function nQ(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var $8e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ok={exports:{}},tb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function aQ(){if(CO)return tb;CO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:n,key:o,ref:s!==void 0?s:null,props:i}}return tb.Fragment=t,tb.jsx=r,tb.jsxs=r,tb}var kO;function sQ(){return kO||(kO=1,ok.exports=aQ()),ok.exports}var a=sQ(),lk={exports:{}},Nn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function iQ(){if(_O)return Nn;_O=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function b(X,ce,M){this.props=X,this.context=ce,this.refs=g,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(X,ce){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ce,"setState")},b.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function y(){}y.prototype=b.prototype;function C(X,ce,M){this.props=X,this.context=ce,this.refs=g,this.updater=M||p}var N=C.prototype=new y;N.constructor=C,v(N,b.prototype),N.isPureReactComponent=!0;var k=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(X,ce,M,q,z,K){return M=K.ref,{$$typeof:e,type:X,key:ce,ref:M!==void 0?M:null,props:K}}function T(X,ce){return E(X.type,ce,void 0,void 0,void 0,X.props)}function A(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function L(X){var ce={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(M){return ce[M]})}var P=/\/+/g;function O(X,ce){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):ce.toString(36)}function J(){}function W(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(J,J):(X.status="pending",X.then(function(ce){X.status==="pending"&&(X.status="fulfilled",X.value=ce)},function(ce){X.status==="pending"&&(X.status="rejected",X.reason=ce)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function re(X,ce,M,q,z){var K=typeof X;(K==="undefined"||K==="boolean")&&(X=null);var ee=!1;if(X===null)ee=!0;else switch(K){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(X.$$typeof){case e:case t:ee=!0;break;case u:return ee=X._init,re(ee(X._payload),ce,M,q,z)}}if(ee)return z=z(X),ee=q===""?"."+O(X,0):q,k(z)?(M="",ee!=null&&(M=ee.replace(P,"$&/")+"/"),re(z,ce,M,"",function(ie){return ie})):z!=null&&(A(z)&&(z=T(z,M+(z.key==null||X&&X.key===z.key?"":(""+z.key).replace(P,"$&/")+"/")+ee)),ce.push(z)),1;ee=0;var ne=q===""?".":q+":";if(k(X))for(var ae=0;ae<X.length;ae++)q=X[ae],K=ne+O(q,ae),ee+=re(q,ce,M,K,z);else if(ae=m(X),typeof ae=="function")for(X=ae.call(X),ae=0;!(q=X.next()).done;)q=q.value,K=ne+O(q,ae++),ee+=re(q,ce,M,K,z);else if(K==="object"){if(typeof X.then=="function")return re(W(X),ce,M,q,z);throw ce=String(X),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return ee}function U(X,ce,M){if(X==null)return X;var q=[],z=0;return re(X,q,"","",function(K){return ce.call(M,K,z++)}),q}function Q(X){if(X._status===-1){var ce=X._result;ce=ce(),ce.then(function(M){(X._status===0||X._status===-1)&&(X._status=1,X._result=M)},function(M){(X._status===0||X._status===-1)&&(X._status=2,X._result=M)}),X._status===-1&&(X._status=0,X._result=ce)}if(X._status===1)return X._result.default;throw X._result}var B=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function te(){}return Nn.Children={map:U,forEach:function(X,ce,M){U(X,function(){ce.apply(this,arguments)},M)},count:function(X){var ce=0;return U(X,function(){ce++}),ce},toArray:function(X){return U(X,function(ce){return ce})||[]},only:function(X){if(!A(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Nn.Component=b,Nn.Fragment=r,Nn.Profiler=s,Nn.PureComponent=C,Nn.StrictMode=n,Nn.Suspense=c,Nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Nn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return S.H.useMemoCache(X)}},Nn.cache=function(X){return function(){return X.apply(null,arguments)}},Nn.cloneElement=function(X,ce,M){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var q=v({},X.props),z=X.key,K=void 0;if(ce!=null)for(ee in ce.ref!==void 0&&(K=void 0),ce.key!==void 0&&(z=""+ce.key),ce)!D.call(ce,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&ce.ref===void 0||(q[ee]=ce[ee]);var ee=arguments.length-2;if(ee===1)q.children=M;else if(1<ee){for(var ne=Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae+2];q.children=ne}return E(X.type,z,void 0,void 0,K,q)},Nn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:i,_context:X},X},Nn.createElement=function(X,ce,M){var q,z={},K=null;if(ce!=null)for(q in ce.key!==void 0&&(K=""+ce.key),ce)D.call(ce,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(z[q]=ce[q]);var ee=arguments.length-2;if(ee===1)z.children=M;else if(1<ee){for(var ne=Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae+2];z.children=ne}if(X&&X.defaultProps)for(q in ee=X.defaultProps,ee)z[q]===void 0&&(z[q]=ee[q]);return E(X,K,void 0,void 0,null,z)},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(X){return{$$typeof:l,render:X}},Nn.isValidElement=A,Nn.lazy=function(X){return{$$typeof:u,_payload:{_status:-1,_result:X},_init:Q}},Nn.memo=function(X,ce){return{$$typeof:d,type:X,compare:ce===void 0?null:ce}},Nn.startTransition=function(X){var ce=S.T,M={};S.T=M;try{var q=X(),z=S.S;z!==null&&z(M,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(te,B)}catch(K){B(K)}finally{S.T=ce}},Nn.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Nn.use=function(X){return S.H.use(X)},Nn.useActionState=function(X,ce,M){return S.H.useActionState(X,ce,M)},Nn.useCallback=function(X,ce){return S.H.useCallback(X,ce)},Nn.useContext=function(X){return S.H.useContext(X)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(X,ce){return S.H.useDeferredValue(X,ce)},Nn.useEffect=function(X,ce,M){var q=S.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(X,ce)},Nn.useId=function(){return S.H.useId()},Nn.useImperativeHandle=function(X,ce,M){return S.H.useImperativeHandle(X,ce,M)},Nn.useInsertionEffect=function(X,ce){return S.H.useInsertionEffect(X,ce)},Nn.useLayoutEffect=function(X,ce){return S.H.useLayoutEffect(X,ce)},Nn.useMemo=function(X,ce){return S.H.useMemo(X,ce)},Nn.useOptimistic=function(X,ce){return S.H.useOptimistic(X,ce)},Nn.useReducer=function(X,ce,M){return S.H.useReducer(X,ce,M)},Nn.useRef=function(X){return S.H.useRef(X)},Nn.useState=function(X){return S.H.useState(X)},Nn.useSyncExternalStore=function(X,ce,M){return S.H.useSyncExternalStore(X,ce,M)},Nn.useTransition=function(){return S.H.useTransition()},Nn.version="19.1.0",Nn}var EO;function Hv(){return EO||(EO=1,lk.exports=iQ()),lk.exports}var w=Hv();const zt=Yu(w),qN=nQ({__proto__:null,default:zt},[w]);var ck={exports:{}},rb={},dk={exports:{}},uk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function oQ(){return DO||(DO=1,function(e){function t(U,Q){var B=U.length;U.push(Q);e:for(;0<B;){var te=B-1>>>1,X=U[te];if(0<s(X,Q))U[te]=Q,U[B]=X,B=te;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Q=U[0],B=U.pop();if(B!==Q){U[0]=B;e:for(var te=0,X=U.length,ce=X>>>1;te<ce;){var M=2*(te+1)-1,q=U[M],z=M+1,K=U[z];if(0>s(q,B))z<X&&0>s(K,q)?(U[te]=K,U[z]=B,te=z):(U[te]=q,U[M]=B,te=M);else if(z<X&&0>s(K,B))U[te]=K,U[z]=B,te=z;else break e}}return Q}function s(U,Q){var B=U.sortIndex-Q.sortIndex;return B!==0?B:U.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,v=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var Q=r(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=U)n(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=r(d)}}function S(U){if(g=!1,k(U),!v)if(r(c)!==null)v=!0,D||(D=!0,O());else{var Q=r(d);Q!==null&&re(S,Q.startTime-U)}}var D=!1,E=-1,T=5,A=-1;function L(){return b?!0:!(e.unstable_now()-A<T)}function P(){if(b=!1,D){var U=e.unstable_now();A=U;var Q=!0;try{e:{v=!1,g&&(g=!1,C(E),E=-1),p=!0;var B=m;try{t:{for(k(U),h=r(c);h!==null&&!(h.expirationTime>U&&L());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var X=te(h.expirationTime<=U);if(U=e.unstable_now(),typeof X=="function"){h.callback=X,k(U),Q=!0;break t}h===r(c)&&n(c),k(U)}else n(c);h=r(c)}if(h!==null)Q=!0;else{var ce=r(d);ce!==null&&re(S,ce.startTime-U),Q=!1}}break e}finally{h=null,m=B,p=!1}Q=void 0}}finally{Q?O():D=!1}}}var O;if(typeof N=="function")O=function(){N(P)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,W=J.port2;J.port1.onmessage=P,O=function(){W.postMessage(null)}}else O=function(){y(P,0)};function re(U,Q){E=y(function(){U(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(U){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var B=m;m=Q;try{return U()}finally{m=B}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=m;m=U;try{return Q()}finally{m=B}},e.unstable_scheduleCallback=function(U,Q,B){var te=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,U={id:u++,callback:Q,priorityLevel:U,startTime:B,expirationTime:X,sortIndex:-1},B>te?(U.sortIndex=B,t(d,U),r(c)===null&&U===r(d)&&(g?(C(E),E=-1):g=!0,re(S,B-te))):(U.sortIndex=X,t(c,U),v||p||(v=!0,D||(D=!0,O()))),U},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(U){var Q=m;return function(){var B=m;m=Q;try{return U.apply(this,arguments)}finally{m=B}}}}(uk)),uk}var AO;function lQ(){return AO||(AO=1,dk.exports=oQ()),dk.exports}var hk={exports:{}},io={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function cQ(){if(TO)return io;TO=1;var e=Hv();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return io.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,io.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},io.flushSync=function(c){var d=o.T,u=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=d,n.p=u,n.d.f()}},io.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},io.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},io.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:p}):u==="script"&&n.d.X(c,{crossOrigin:h,integrity:m,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},io.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},io.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);n.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},io.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},io.requestFormReset=function(c){n.d.r(c)},io.unstable_batchedUpdates=function(c,d){return c(d)},io.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},io.useFormStatus=function(){return o.H.useHostTransitionStatus()},io.version="19.1.0",io}var IO;function H7(){if(IO)return hk.exports;IO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hk.exports=cQ(),hk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO;function dQ(){if(PO)return rb;PO=1;var e=lQ(),t=Hv(),r=H7();function n(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)x+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function i(f){var x=f,j=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(j=x.return),f=x.return;while(f)}return x.tag===3?j:null}function o(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function l(f){if(i(f)!==f)throw Error(n(188))}function c(f){var x=f.alternate;if(!x){if(x=i(f),x===null)throw Error(n(188));return x!==f?null:f}for(var j=f,_=x;;){var R=j.return;if(R===null)break;var V=R.alternate;if(V===null){if(_=R.return,_!==null){j=_;continue}break}if(R.child===V.child){for(V=R.child;V;){if(V===j)return l(R),f;if(V===_)return l(R),x;V=V.sibling}throw Error(n(188))}if(j.return!==_.return)j=R,_=V;else{for(var fe=!1,_e=R.child;_e;){if(_e===j){fe=!0,j=R,_=V;break}if(_e===_){fe=!0,_=R,j=V;break}_e=_e.sibling}if(!fe){for(_e=V.child;_e;){if(_e===j){fe=!0,j=V,_=R;break}if(_e===_){fe=!0,_=V,j=R;break}_e=_e.sibling}if(!fe)throw Error(n(189))}}if(j.alternate!==_)throw Error(n(190))}if(j.tag!==3)throw Error(n(188));return j.stateNode.current===j?f:x}function d(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f;for(f=f.child;f!==null;){if(x=d(f),x!==null)return x;f=f.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}var J=Symbol.for("react.client.reference");function W(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===J?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case D:return"SuspenseList";case A:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case p:return"Portal";case N:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case k:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case E:return x=f.displayName||null,x!==null?x:W(f.type)||"Memo";case T:x=f._payload,f=f._init;try{return W(f(x))}catch{}}return null}var re=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},te=[],X=-1;function ce(f){return{current:f}}function M(f){0>X||(f.current=te[X],te[X]=null,X--)}function q(f,x){X++,te[X]=f.current,f.current=x}var z=ce(null),K=ce(null),ee=ce(null),ne=ce(null);function ae(f,x){switch(q(ee,x),q(K,f),q(z,null),x.nodeType){case 9:case 11:f=(f=x.documentElement)&&(f=f.namespaceURI)?ZP(f):0;break;default:if(f=x.tagName,x=x.namespaceURI)x=ZP(x),f=eO(x,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(z),q(z,f)}function ie(){M(z),M(K),M(ee)}function G(f){f.memoizedState!==null&&q(ne,f);var x=z.current,j=eO(x,f.type);x!==j&&(q(K,f),q(z,j))}function de(f){K.current===f&&(M(z),M(K)),ne.current===f&&(M(ne),Xg._currentValue=B)}var Y=Object.prototype.hasOwnProperty,oe=e.unstable_scheduleCallback,Se=e.unstable_cancelCallback,ue=e.unstable_shouldYield,se=e.unstable_requestPaint,ye=e.unstable_now,Ne=e.unstable_getCurrentPriorityLevel,Le=e.unstable_ImmediatePriority,Je=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,vt=e.unstable_LowPriority,Re=e.unstable_IdlePriority,ht=e.log,At=e.unstable_setDisableYieldValue,Tt=null,Ht=null;function pe(f){if(typeof ht=="function"&&At(f),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Tt,f)}catch{}}var he=Math.clz32?Math.clz32:De,xe=Math.log,me=Math.LN2;function De(f){return f>>>=0,f===0?32:31-(xe(f)/me|0)|0}var Ye=256,jt=4194304;function Qe(f){var x=f&42;if(x!==0)return x;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Xe(f,x,j){var _=f.pendingLanes;if(_===0)return 0;var R=0,V=f.suspendedLanes,fe=f.pingedLanes;f=f.warmLanes;var _e=_&134217727;return _e!==0?(_=_e&~V,_!==0?R=Qe(_):(fe&=_e,fe!==0?R=Qe(fe):j||(j=_e&~f,j!==0&&(R=Qe(j))))):(_e=_&~V,_e!==0?R=Qe(_e):fe!==0?R=Qe(fe):j||(j=_&~f,j!==0&&(R=Qe(j)))),R===0?0:x!==0&&x!==R&&(x&V)===0&&(V=R&-R,j=x&-x,V>=j||V===32&&(j&4194048)!==0)?x:R}function Be(f,x){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&x)===0}function He(f,x){switch(f){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var f=Ye;return Ye<<=1,(Ye&4194048)===0&&(Ye=256),f}function Ae(){var f=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),f}function Ke(f){for(var x=[],j=0;31>j;j++)x.push(f);return x}function Ge(f,x){f.pendingLanes|=x,x!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ct(f,x,j,_,R,V){var fe=f.pendingLanes;f.pendingLanes=j,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=j,f.entangledLanes&=j,f.errorRecoveryDisabledLanes&=j,f.shellSuspendCounter=0;var _e=f.entanglements,Ze=f.expirationTimes,Et=f.hiddenUpdates;for(j=fe&~j;0<j;){var Vt=31-he(j),Zt=1<<Vt;_e[Vt]=0,Ze[Vt]=-1;var Dt=Et[Vt];if(Dt!==null)for(Et[Vt]=null,Vt=0;Vt<Dt.length;Vt++){var It=Dt[Vt];It!==null&&(It.lane&=-536870913)}j&=~Zt}_!==0&&Mt(f,_,0),V!==0&&R===0&&f.tag!==0&&(f.suspendedLanes|=V&~(fe&~x))}function Mt(f,x,j){f.pendingLanes|=x,f.suspendedLanes&=~x;var _=31-he(x);f.entangledLanes|=x,f.entanglements[_]=f.entanglements[_]|1073741824|j&4194090}function Ie(f,x){var j=f.entangledLanes|=x;for(f=f.entanglements;j;){var _=31-he(j),R=1<<_;R&x|f[_]&x&&(f[_]|=x),j&=~R}}function ke(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function it(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function bt(){var f=Q.p;return f!==0?f:(f=window.event,f===void 0?32:bO(f.type))}function Kt(f,x){var j=Q.p;try{return Q.p=f,x()}finally{Q.p=j}}var Rt=Math.random().toString(36).slice(2),tr="__reactFiber$"+Rt,mr="__reactProps$"+Rt,jr="__reactContainer$"+Rt,fn="__reactEvents$"+Rt,hr="__reactListeners$"+Rt,ge="__reactHandles$"+Rt,Ue="__reactResources$"+Rt,Pe="__reactMarker$"+Rt;function Ee(f){delete f[tr],delete f[mr],delete f[fn],delete f[hr],delete f[ge]}function Fe(f){var x=f[tr];if(x)return x;for(var j=f.parentNode;j;){if(x=j[jr]||j[tr]){if(j=x.alternate,x.child!==null||j!==null&&j.child!==null)for(f=aO(f);f!==null;){if(j=f[tr])return j;f=aO(f)}return x}f=j,j=f.parentNode}return null}function Ve(f){if(f=f[tr]||f[jr]){var x=f.tag;if(x===5||x===6||x===13||x===26||x===27||x===3)return f}return null}function xt(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f.stateNode;throw Error(n(33))}function wt(f){var x=f[Ue];return x||(x=f[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function at(f){f[Pe]=!0}var Nt=new Set,St={};function Xt(f,x){ar(f,x),ar(f+"Capture",x)}function ar(f,x){for(St[f]=x,f=0;f<x.length;f++)Nt.add(x[f])}var pr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sr={},qe={};function or(f){return Y.call(qe,f)?!0:Y.call(sr,f)?!1:pr.test(f)?qe[f]=!0:(sr[f]=!0,!1)}function lr(f,x,j){if(or(x))if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":f.removeAttribute(x);return;case"boolean":var _=x.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){f.removeAttribute(x);return}}f.setAttribute(x,""+j)}}function $r(f,x,j){if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttribute(x,""+j)}}function gn(f,x,j,_){if(_===null)f.removeAttribute(j);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(j);return}f.setAttributeNS(x,j,""+_)}}var ta,zs;function za(f){if(ta===void 0)try{throw Error()}catch(j){var x=j.stack.trim().match(/\n( *(at )?)/);ta=x&&x[1]||"",zs=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+f+zs}var fs=!1;function ks(f,x){if(!f||fs)return"";fs=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(x){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(It){var Dt=It}Reflect.construct(f,[],Zt)}else{try{Zt.call()}catch(It){Dt=It}f.call(Zt.prototype)}}else{try{throw Error()}catch(It){Dt=It}(Zt=f())&&typeof Zt.catch=="function"&&Zt.catch(function(){})}}catch(It){if(It&&Dt&&typeof It.stack=="string")return[It.stack,Dt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=_.DetermineComponentFrameRoot(),fe=V[0],_e=V[1];if(fe&&_e){var Ze=fe.split(`
`),Et=_e.split(`
`);for(R=_=0;_<Ze.length&&!Ze[_].includes("DetermineComponentFrameRoot");)_++;for(;R<Et.length&&!Et[R].includes("DetermineComponentFrameRoot");)R++;if(_===Ze.length||R===Et.length)for(_=Ze.length-1,R=Et.length-1;1<=_&&0<=R&&Ze[_]!==Et[R];)R--;for(;1<=_&&0<=R;_--,R--)if(Ze[_]!==Et[R]){if(_!==1||R!==1)do if(_--,R--,0>R||Ze[_]!==Et[R]){var Vt=`
`+Ze[_].replace(" at new "," at ");return f.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",f.displayName)),Vt}while(1<=_&&0<=R);break}}}finally{fs=!1,Error.prepareStackTrace=j}return(j=f?f.displayName||f.name:"")?za(j):""}function gt(f){switch(f.tag){case 26:case 27:case 5:return za(f.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 15:return ks(f.type,!1);case 11:return ks(f.type.render,!1);case 1:return ks(f.type,!0);case 31:return za("Activity");default:return""}}function fr(f){try{var x="";do x+=gt(f),f=f.return;while(f);return x}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}function cr(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Gr(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Rr(f){var x=Gr(f)?"checked":"value",j=Object.getOwnPropertyDescriptor(f.constructor.prototype,x),_=""+f[x];if(!f.hasOwnProperty(x)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var R=j.get,V=j.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return R.call(this)},set:function(fe){_=""+fe,V.call(this,fe)}}),Object.defineProperty(f,x,{enumerable:j.enumerable}),{getValue:function(){return _},setValue:function(fe){_=""+fe},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function oa(f){f._valueTracker||(f._valueTracker=Rr(f))}function Ho(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var j=x.getValue(),_="";return f&&(_=Gr(f)?f.checked?"true":"false":f.value),f=_,f!==j?(x.setValue(f),!0):!1}function es(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Io=/[\n"\\]/g;function vn(f){return f.replace(Io,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function ai(f,x,j,_,R,V,fe,_e){f.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?f.type=fe:f.removeAttribute("type"),x!=null?fe==="number"?(x===0&&f.value===""||f.value!=x)&&(f.value=""+cr(x)):f.value!==""+cr(x)&&(f.value=""+cr(x)):fe!=="submit"&&fe!=="reset"||f.removeAttribute("value"),x!=null?Go(f,fe,cr(x)):j!=null?Go(f,fe,cr(j)):_!=null&&f.removeAttribute("value"),R==null&&V!=null&&(f.defaultChecked=!!V),R!=null&&(f.checked=R&&typeof R!="function"&&typeof R!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?f.name=""+cr(_e):f.removeAttribute("name")}function Wo(f,x,j,_,R,V,fe,_e){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(f.type=V),x!=null||j!=null){if(!(V!=="submit"&&V!=="reset"||x!=null))return;j=j!=null?""+cr(j):"",x=x!=null?""+cr(x):j,_e||x===f.value||(f.value=x),f.defaultValue=x}_=_??R,_=typeof _!="function"&&typeof _!="symbol"&&!!_,f.checked=_e?f.checked:!!_,f.defaultChecked=!!_,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(f.name=fe)}function Go(f,x,j){x==="number"&&es(f.ownerDocument)===f||f.defaultValue===""+j||(f.defaultValue=""+j)}function Oi(f,x,j,_){if(f=f.options,x){x={};for(var R=0;R<j.length;R++)x["$"+j[R]]=!0;for(j=0;j<f.length;j++)R=x.hasOwnProperty("$"+f[j].value),f[j].selected!==R&&(f[j].selected=R),R&&_&&(f[j].defaultSelected=!0)}else{for(j=""+cr(j),x=null,R=0;R<f.length;R++){if(f[R].value===j){f[R].selected=!0,_&&(f[R].defaultSelected=!0);return}x!==null||f[R].disabled||(x=f[R])}x!==null&&(x.selected=!0)}}function Vn(f,x,j){if(x!=null&&(x=""+cr(x),x!==f.value&&(f.value=x),j==null)){f.defaultValue!==x&&(f.defaultValue=x);return}f.defaultValue=j!=null?""+cr(j):""}function Mi(f,x,j,_){if(x==null){if(_!=null){if(j!=null)throw Error(n(92));if(re(_)){if(1<_.length)throw Error(n(93));_=_[0]}j=_}j==null&&(j=""),x=j}j=cr(x),f.defaultValue=j,_=f.textContent,_===j&&_!==""&&_!==null&&(f.value=_)}function _s(f,x){if(x){var j=f.firstChild;if(j&&j===f.lastChild&&j.nodeType===3){j.nodeValue=x;return}}f.textContent=x}var oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ed(f,x,j){var _=x.indexOf("--")===0;j==null||typeof j=="boolean"||j===""?_?f.setProperty(x,""):x==="float"?f.cssFloat="":f[x]="":_?f.setProperty(x,j):typeof j!="number"||j===0||oc.has(x)?x==="float"?f.cssFloat=j:f[x]=(""+j).trim():f[x]=j+"px"}function yl(f,x,j){if(x!=null&&typeof x!="object")throw Error(n(62));if(f=f.style,j!=null){for(var _ in j)!j.hasOwnProperty(_)||x!=null&&x.hasOwnProperty(_)||(_.indexOf("--")===0?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="");for(var R in x)_=x[R],x.hasOwnProperty(R)&&j[R]!==_&&ed(f,R,_)}else for(var V in x)x.hasOwnProperty(V)&&ed(f,V,x[V])}function td(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nl(f){return lc.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var cc=null;function ms(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var dc=null,wl=null;function Qr(f){var x=Ve(f);if(x&&(f=x.stateNode)){var j=f[mr]||null;e:switch(f=x.stateNode,x.type){case"input":if(ai(f,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name),x=j.name,j.type==="radio"&&x!=null){for(j=f;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll('input[name="'+vn(""+x)+'"][type="radio"]'),x=0;x<j.length;x++){var _=j[x];if(_!==f&&_.form===f.form){var R=_[mr]||null;if(!R)throw Error(n(90));ai(_,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(x=0;x<j.length;x++)_=j[x],_.form===f.form&&Ho(_)}break e;case"textarea":Vn(f,j.value,j.defaultValue);break e;case"select":x=j.value,x!=null&&Oi(f,!!j.multiple,x,!1)}}}var ih=!1;function _f(f,x,j){if(ih)return f(x,j);ih=!0;try{var _=f(x);return _}finally{if(ih=!1,(dc!==null||wl!==null)&&(ej(),dc&&(x=dc,f=wl,wl=dc=null,Qr(x),f)))for(x=0;x<f.length;x++)Qr(f[x])}}function rt(f,x){var j=f.stateNode;if(j===null)return null;var _=j[mr]||null;if(_===null)return null;j=_[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(f=f.type,_=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!_;break e;default:f=!1}if(f)return null;if(j&&typeof j!="function")throw Error(n(231,x,typeof j));return j}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),er=!1;if(dr)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){er=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{er=!1}var Cr=null,ka=null,Yo=null;function Ef(){if(Yo)return Yo;var f,x=ka,j=x.length,_,R="value"in Cr?Cr.value:Cr.textContent,V=R.length;for(f=0;f<j&&x[f]===R[f];f++);var fe=j-f;for(_=1;_<=fe&&x[j-_]===R[V-_];_++);return Yo=R.slice(f,1<_?1-_:void 0)}function uc(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function Ko(){return!0}function Xo(){return!1}function Es(f){function x(j,_,R,V,fe){this._reactName=j,this._targetInst=R,this.type=_,this.nativeEvent=V,this.target=fe,this.currentTarget=null;for(var _e in f)f.hasOwnProperty(_e)&&(j=f[_e],this[_e]=j?j(V):V[_e]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Ko:Xo,this.isPropagationStopped=Xo,this}return u(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),x}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Es(vi),Qo=u({},vi,{view:0,detail:0}),Df=Es(Qo),rd,Af,zd,Po=u({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==zd&&(zd&&f.type==="mousemove"?(rd=f.screenX-zd.screenX,Af=f.screenY-zd.screenY):Af=rd=0,zd=f),rd)},movementY:function(f){return"movementY"in f?f.movementY:Af}}),fc=Es(Po),fg=u({},Po,{dataTransfer:0}),Hd=Es(fg),Sl=u({},Qo,{relatedTarget:0}),oh=Es(Sl),lh=u({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),mg=Es(lh),Tf=u({},vi,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),pg=Es(Tf),sp=u({},vi,{data:0}),If=Es(sp),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=ip[f])?!!x[f]:!1}function Of(){return op}var xg=u({},Qo,{key:function(f){if(f.key){var x=Qx[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=uc(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Pf[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(f){return f.type==="keypress"?uc(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?uc(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Mf=Es(xg),ch=u({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=Es(ch),Wd=u({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),lp=Es(Wd),H=u({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=Es(H),We=u({},Po,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Es(We),yt=u({},vi,{newState:0,oldState:0}),Bt=Es(yt),ir=[9,13,27,32],Nr=dr&&"CompositionEvent"in window,Or=null;dr&&"documentMode"in document&&(Or=document.documentMode);var un=dr&&"TextEvent"in window&&!Or,ln=dr&&(!Nr||Or&&8<Or&&11>=Or),Pn=" ",Ta=!1;function Ra(f,x){switch(f){case"keyup":return ir.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var rs=!1;function Hs(f,x){switch(f){case"compositionend":return ts(x);case"keypress":return x.which!==32?null:(Ta=!0,Pn);case"textInput":return f=x.data,f===Pn&&Ta?null:f;default:return null}}function Cl(f,x){if(rs)return f==="compositionend"||!Nr&&Ra(f,x)?(f=Ef(),Yo=ka=Cr=null,rs=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return ln&&x.locale!=="ko"?null:x.data;default:return null}}var Oo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kl(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!Oo[f.type]:x==="textarea"}function cp(f,x,j,_){dc?wl?wl.push(_):wl=[_]:dc=_,x=ij(x,"onChange"),0<x.length&&(j=new hc("onChange","change",null,j,_),f.push({event:j,listeners:x}))}var nd=null,ad=null;function Ff(f){YP(f,0)}function Gd(f){var x=xt(f);if(Ho(x))return f}function Lf(f,x){if(f==="change")return x}var dh=!1;if(dr){var Ds;if(dr){var Yd="oninput"in document;if(!Yd){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Yd=typeof uh.oninput=="function"}Ds=Yd}else Ds=!1;dh=Ds&&(!document.documentMode||9<document.documentMode)}function hh(){nd&&(nd.detachEvent("onpropertychange",Bf),ad=nd=null)}function Bf(f){if(f.propertyName==="value"&&Gd(ad)){var x=[];cp(x,ad,f,ms(f)),_f(Ff,x)}}function to(f,x,j){f==="focusin"?(hh(),nd=x,ad=j,nd.attachEvent("onpropertychange",Bf)):f==="focusout"&&hh()}function vg(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Gd(ad)}function dp(f,x){if(f==="click")return Gd(x)}function Jx(f,x){if(f==="input"||f==="change")return Gd(x)}function Jo(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var Ws=typeof Object.is=="function"?Object.is:Jo;function Kd(f,x){if(Ws(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var j=Object.keys(f),_=Object.keys(x);if(j.length!==_.length)return!1;for(_=0;_<j.length;_++){var R=j[_];if(!Y.call(x,R)||!Ws(f[R],x[R]))return!1}return!0}function up(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function sd(f,x){var j=up(f);f=0;for(var _;j;){if(j.nodeType===3){if(_=f+j.textContent.length,f<=x&&_>=x)return{node:j,offset:x-f};f=_}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=up(j)}}function Xd(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?Xd(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function Ri(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var x=es(f.document);x instanceof f.HTMLIFrameElement;){try{var j=typeof x.contentWindow.location.href=="string"}catch{j=!1}if(j)f=x.contentWindow;else break;x=es(f.document)}return x}function si(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}var Qd=dr&&"documentMode"in document&&11>=document.documentMode,ro=null,_l=null,mc=null,El=!1;function Ha(f,x,j){var _=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;El||ro==null||ro!==es(_)||(_=ro,"selectionStart"in _&&si(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),mc&&Kd(mc,_)||(mc=_,_=ij(_l,"onSelect"),0<_.length&&(x=new hc("onSelect","select",null,x,j),f.push({event:x,listeners:_}),x.target=ro)))}function Dl(f,x){var j={};return j[f.toLowerCase()]=x.toLowerCase(),j["Webkit"+f]="webkit"+x,j["Moz"+f]="moz"+x,j}var ps={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionrun:Dl("Transition","TransitionRun"),transitionstart:Dl("Transition","TransitionStart"),transitioncancel:Dl("Transition","TransitionCancel"),transitionend:Dl("Transition","TransitionEnd")},no={},fh={};dr&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function pc(f){if(no[f])return no[f];if(!ps[f])return f;var x=ps[f],j;for(j in x)if(x.hasOwnProperty(j)&&j in fh)return no[f]=x[j];return f}var Uf=pc("animationend"),Jd=pc("animationiteration"),Zd=pc("animationstart"),eu=pc("transitionrun"),mh=pc("transitionstart"),$f=pc("transitioncancel"),tu=pc("transitionend"),id=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function Wa(f,x){id.set(f,x),Xt(x,[f])}var Mo=new WeakMap;function kn(f,x){if(typeof f=="object"&&f!==null){var j=Mo.get(f);return j!==void 0?j:(x={value:f,source:x,stack:fr(x)},Mo.set(f,x),x)}return{value:f,source:x,stack:fr(x)}}var _n=[],ja=0,ns=0;function Zo(){for(var f=ja,x=ns=ja=0;x<f;){var j=_n[x];_n[x++]=null;var _=_n[x];_n[x++]=null;var R=_n[x];_n[x++]=null;var V=_n[x];if(_n[x++]=null,_!==null&&R!==null){var fe=_.pending;fe===null?R.next=R:(R.next=fe.next,fe.next=R),_.pending=R}V!==0&&Zx(j,R,V)}}function ru(f,x,j,_){_n[ja++]=f,_n[ja++]=x,_n[ja++]=j,_n[ja++]=_,ns|=_,f.lanes|=_,f=f.alternate,f!==null&&(f.lanes|=_)}function nu(f,x,j,_){return ru(f,x,j,_),xh(f)}function od(f,x){return ru(f,null,null,x),xh(f)}function Zx(f,x,j){f.lanes|=j;var _=f.alternate;_!==null&&(_.lanes|=j);for(var R=!1,V=f.return;V!==null;)V.childLanes|=j,_=V.alternate,_!==null&&(_.childLanes|=j),V.tag===22&&(f=V.stateNode,f===null||f._visibility&1||(R=!0)),f=V,V=V.return;return f.tag===3?(V=f.stateNode,R&&x!==null&&(R=31-he(j),f=V.hiddenUpdates,_=f[R],_===null?f[R]=[x]:_.push(x),x.lane=j|536870912),V):null}function xh(f){if(50<qg)throw qg=0,TC=null,Error(n(185));for(var x=f.return;x!==null;)f=x,x=f.return;return f.tag===3?f.stateNode:null}var Gs={};function el(f,x,j,_){this.tag=f,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(f,x,j,_){return new el(f,x,j,_)}function qf(f){return f=f.prototype,!(!f||!f.isReactComponent)}function xc(f,x){var j=f.alternate;return j===null?(j=gi(f.tag,x,f.key,f.mode),j.elementType=f.elementType,j.type=f.type,j.stateNode=f.stateNode,j.alternate=f,f.alternate=j):(j.pendingProps=x,j.type=f.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=f.flags&65011712,j.childLanes=f.childLanes,j.lanes=f.lanes,j.child=f.child,j.memoizedProps=f.memoizedProps,j.memoizedState=f.memoizedState,j.updateQueue=f.updateQueue,x=f.dependencies,j.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},j.sibling=f.sibling,j.index=f.index,j.ref=f.ref,j.refCleanup=f.refCleanup,j}function hp(f,x){f.flags&=65011714;var j=f.alternate;return j===null?(f.childLanes=0,f.lanes=x,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=j.childLanes,f.lanes=j.lanes,f.child=j.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=j.memoizedProps,f.memoizedState=j.memoizedState,f.updateQueue=j.updateQueue,f.type=j.type,x=j.dependencies,f.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),f}function vh(f,x,j,_,R,V){var fe=0;if(_=f,typeof f=="function")qf(f)&&(fe=1);else if(typeof f=="string")fe=zX(f,j,z.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case A:return f=gi(31,j,x,R),f.elementType=A,f.lanes=V,f;case v:return ld(j.children,R,V,x);case g:fe=8,R|=24;break;case b:return f=gi(12,j,x,R|2),f.elementType=b,f.lanes=V,f;case S:return f=gi(13,j,x,R),f.elementType=S,f.lanes=V,f;case D:return f=gi(19,j,x,R),f.elementType=D,f.lanes=V,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:case N:fe=10;break e;case C:fe=9;break e;case k:fe=11;break e;case E:fe=14;break e;case T:fe=16,_=null;break e}fe=29,j=Error(n(130,f===null?"null":typeof f,"")),_=null}return x=gi(fe,j,x,R),x.elementType=f,x.type=_,x.lanes=V,x}function ld(f,x,j,_){return f=gi(7,f,_,x),f.lanes=j,f}function e0(f,x,j){return f=gi(6,f,null,x),f.lanes=j,f}function fp(f,x,j){return x=gi(4,f.children!==null?f.children:[],f.key,x),x.lanes=j,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}var au=[],cd=0,Vf=null,t0=0,tl=[],Ro=0,gh=null,dd=1,ud="";function bh(f,x){au[cd++]=t0,au[cd++]=Vf,Vf=f,t0=x}function S1(f,x,j){tl[Ro++]=dd,tl[Ro++]=ud,tl[Ro++]=gh,gh=f;var _=dd;f=ud;var R=32-he(_)-1;_&=~(1<<R),j+=1;var V=32-he(x)+R;if(30<V){var fe=R-R%5;V=(_&(1<<fe)-1).toString(32),_>>=fe,R-=fe,dd=1<<32-he(x)+R|j<<R|_,ud=V+f}else dd=1<<V|j<<R|_,ud=f}function mp(f){f.return!==null&&(bh(f,1),S1(f,1,0))}function pp(f){for(;f===Vf;)Vf=au[--cd],au[cd]=null,t0=au[--cd],au[cd]=null;for(;f===gh;)gh=tl[--Ro],tl[Ro]=null,ud=tl[--Ro],tl[Ro]=null,dd=tl[--Ro],tl[Ro]=null}var As=null,Ga=null,zn=!1,su=null,vc=!1,gg=Error(n(519));function yh(f){var x=Error(n(418,""));throw zf(kn(x,f)),gg}function C1(f){var x=f.stateNode,j=f.type,_=f.memoizedProps;switch(x[tr]=f,x[mr]=_,j){case"dialog":Mn("cancel",x),Mn("close",x);break;case"iframe":case"object":case"embed":Mn("load",x);break;case"video":case"audio":for(j=0;j<zg.length;j++)Mn(zg[j],x);break;case"source":Mn("error",x);break;case"img":case"image":case"link":Mn("error",x),Mn("load",x);break;case"details":Mn("toggle",x);break;case"input":Mn("invalid",x),Wo(x,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),oa(x);break;case"select":Mn("invalid",x);break;case"textarea":Mn("invalid",x),Mi(x,_.value,_.defaultValue,_.children),oa(x)}j=_.children,typeof j!="string"&&typeof j!="number"&&typeof j!="bigint"||x.textContent===""+j||_.suppressHydrationWarning===!0||JP(x.textContent,j)?(_.popover!=null&&(Mn("beforetoggle",x),Mn("toggle",x)),_.onScroll!=null&&Mn("scroll",x),_.onScrollEnd!=null&&Mn("scrollend",x),_.onClick!=null&&(x.onclick=oj),x=!0):x=!1,x||yh(f)}function hd(f){for(As=f.return;As;)switch(As.tag){case 5:case 13:vc=!1;return;case 27:case 3:vc=!0;return;default:As=As.return}}function Fi(f){if(f!==As)return!1;if(!zn)return hd(f),zn=!0,!1;var x=f.tag,j;if((j=x!==3&&x!==27)&&((j=x===5)&&(j=f.type,j=!(j!=="form"&&j!=="button")||GC(f.type,f.memoizedProps)),j=!j),j&&Ga&&yh(f),hd(f),x===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,x=0;f;){if(f.nodeType===8)if(j=f.data,j==="/$"){if(x===0){Ga=yd(f.nextSibling);break e}x--}else j!=="$"&&j!=="$!"&&j!=="$?"||x++;f=f.nextSibling}Ga=null}}else x===27?(x=Ga,om(f.type)?(f=QC,QC=null,Ga=f):Ga=x):Ga=As?yd(f.stateNode.nextSibling):null;return!0}function Fo(){Ga=As=null,zn=!1}function k1(){var f=su;return f!==null&&(al===null?al=f:al.push.apply(al,f),su=null),f}function zf(f){su===null?su=[f]:su.push(f)}var gc=ce(null),Ys=null,fd=null;function iu(f,x,j){q(gc,x._currentValue),x._currentValue=j}function bc(f){f._currentValue=gc.current,M(gc)}function r0(f,x,j){for(;f!==null;){var _=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,_!==null&&(_.childLanes|=x)):_!==null&&(_.childLanes&x)!==x&&(_.childLanes|=x),f===j)break;f=f.return}}function n0(f,x,j,_){var R=f.child;for(R!==null&&(R.return=f);R!==null;){var V=R.dependencies;if(V!==null){var fe=R.child;V=V.firstContext;e:for(;V!==null;){var _e=V;V=R;for(var Ze=0;Ze<x.length;Ze++)if(_e.context===x[Ze]){V.lanes|=j,_e=V.alternate,_e!==null&&(_e.lanes|=j),r0(V.return,j,f),_||(fe=null);break e}V=_e.next}}else if(R.tag===18){if(fe=R.return,fe===null)throw Error(n(341));fe.lanes|=j,V=fe.alternate,V!==null&&(V.lanes|=j),r0(fe,j,f),fe=null}else fe=R.child;if(fe!==null)fe.return=R;else for(fe=R;fe!==null;){if(fe===f){fe=null;break}if(R=fe.sibling,R!==null){R.return=fe.return,fe=R;break}fe=fe.return}R=fe}}function Hf(f,x,j,_){f=null;for(var R=x,V=!1;R!==null;){if(!V){if((R.flags&524288)!==0)V=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var fe=R.alternate;if(fe===null)throw Error(n(387));if(fe=fe.memoizedProps,fe!==null){var _e=R.type;Ws(R.pendingProps.value,fe.value)||(f!==null?f.push(_e):f=[_e])}}else if(R===ne.current){if(fe=R.alternate,fe===null)throw Error(n(387));fe.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(f!==null?f.push(Xg):f=[Xg])}R=R.return}f!==null&&n0(x,f,j,_),x.flags|=262144}function a0(f){for(f=f.firstContext;f!==null;){if(!Ws(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function yc(f){Ys=f,fd=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Ts(f){return s0(Ys,f)}function ou(f,x){return Ys===null&&yc(f),s0(f,x)}function s0(f,x){var j=x._currentValue;if(x={context:x,memoizedValue:j,next:null},fd===null){if(f===null)throw Error(n(308));fd=x,f.dependencies={lanes:0,firstContext:x},f.flags|=524288}else fd=fd.next=x;return j}var rC=typeof AbortController<"u"?AbortController:function(){var f=[],x=this.signal={aborted:!1,addEventListener:function(j,_){f.push(_)}};this.abort=function(){x.aborted=!0,f.forEach(function(j){return j()})}},_1=e.unstable_scheduleCallback,nC=e.unstable_NormalPriority,Is={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new rC,data:new Map,refCount:0}}function xp(f){f.refCount--,f.refCount===0&&_1(nC,function(){f.controller.abort()})}var vp=null,yg=0,jh=0,md=null;function aC(f,x){if(vp===null){var j=vp=[];yg=0,jh=LC(),md={status:"pending",value:void 0,then:function(_){j.push(_)}}}return yg++,x.then(E1,E1),x}function E1(){if(--yg===0&&vp!==null){md!==null&&(md.status="fulfilled");var f=vp;vp=null,jh=0,md=null;for(var x=0;x<f.length;x++)(0,f[x])()}}function D1(f,x){var j=[],_={status:"pending",value:null,reason:null,then:function(R){j.push(R)}};return f.then(function(){_.status="fulfilled",_.value=x;for(var R=0;R<j.length;R++)(0,j[R])(x)},function(R){for(_.status="rejected",_.reason=R,R=0;R<j.length;R++)(0,j[R])(void 0)}),_}var I=U.S;U.S=function(f,x){typeof x=="object"&&x!==null&&typeof x.then=="function"&&aC(f,x),I!==null&&I(f,x)};var F=ce(null);function Z(){var f=F.current;return f!==null?f:Pa.pooledCache}function le(f,x){x===null?q(F,F.current):q(F,x.pool)}function ve(){var f=Z();return f===null?null:{parent:Is._currentValue,pool:f}}var je=Error(n(460)),we=Error(n(474)),Ce=Error(n(542)),Te={then:function(){}};function $e(f){return f=f.status,f==="fulfilled"||f==="rejected"}function nt(){}function _t(f,x,j){switch(j=f[j],j===void 0?f.push(x):j!==x&&(x.then(nt,nt),x=j),x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Qt(f),f;default:if(typeof x.status=="string")x.then(nt,nt);else{if(f=Pa,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=x,f.status="pending",f.then(function(_){if(x.status==="pending"){var R=x;R.status="fulfilled",R.value=_}},function(_){if(x.status==="pending"){var R=x;R.status="rejected",R.reason=_}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Qt(f),f}throw Ct=x,je}}var Ct=null;function mt(){if(Ct===null)throw Error(n(459));var f=Ct;return Ct=null,f}function Qt(f){if(f===je||f===Ce)throw Error(n(483))}var Ot=!1;function st(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dt(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function qt(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Jt(f,x,j){var _=f.updateQueue;if(_===null)return null;if(_=_.shared,(fa&2)!==0){var R=_.pending;return R===null?x.next=x:(x.next=R.next,R.next=x),_.pending=x,x=xh(f),Zx(f,null,j),x}return ru(f,_,x,j),xh(f)}function Wt(f,x,j){if(x=x.updateQueue,x!==null&&(x=x.shared,(j&4194048)!==0)){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ie(f,j)}}function wr(f,x){var j=f.updateQueue,_=f.alternate;if(_!==null&&(_=_.updateQueue,j===_)){var R=null,V=null;if(j=j.firstBaseUpdate,j!==null){do{var fe={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};V===null?R=V=fe:V=V.next=fe,j=j.next}while(j!==null);V===null?R=V=x:V=V.next=x}else R=V=x;j={baseState:_.baseState,firstBaseUpdate:R,lastBaseUpdate:V,shared:_.shared,callbacks:_.callbacks},f.updateQueue=j;return}f=j.lastBaseUpdate,f===null?j.firstBaseUpdate=x:f.next=x,j.lastBaseUpdate=x}var gr=!1;function qr(){if(gr){var f=md;if(f!==null)throw f}}function br(f,x,j,_){gr=!1;var R=f.updateQueue;Ot=!1;var V=R.firstBaseUpdate,fe=R.lastBaseUpdate,_e=R.shared.pending;if(_e!==null){R.shared.pending=null;var Ze=_e,Et=Ze.next;Ze.next=null,fe===null?V=Et:fe.next=Et,fe=Ze;var Vt=f.alternate;Vt!==null&&(Vt=Vt.updateQueue,_e=Vt.lastBaseUpdate,_e!==fe&&(_e===null?Vt.firstBaseUpdate=Et:_e.next=Et,Vt.lastBaseUpdate=Ze))}if(V!==null){var Zt=R.baseState;fe=0,Vt=Et=Ze=null,_e=V;do{var Dt=_e.lane&-536870913,It=Dt!==_e.lane;if(It?(Un&Dt)===Dt:(_&Dt)===Dt){Dt!==0&&Dt===jh&&(gr=!0),Vt!==null&&(Vt=Vt.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var sn=f,Xr=_e;Dt=x;var wa=j;switch(Xr.tag){case 1:if(sn=Xr.payload,typeof sn=="function"){Zt=sn.call(wa,Zt,Dt);break e}Zt=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=Xr.payload,Dt=typeof sn=="function"?sn.call(wa,Zt,Dt):sn,Dt==null)break e;Zt=u({},Zt,Dt);break e;case 2:Ot=!0}}Dt=_e.callback,Dt!==null&&(f.flags|=64,It&&(f.flags|=8192),It=R.callbacks,It===null?R.callbacks=[Dt]:It.push(Dt))}else It={lane:Dt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Vt===null?(Et=Vt=It,Ze=Zt):Vt=Vt.next=It,fe|=Dt;if(_e=_e.next,_e===null){if(_e=R.shared.pending,_e===null)break;It=_e,_e=It.next,It.next=null,R.lastBaseUpdate=It,R.shared.pending=null}}while(!0);Vt===null&&(Ze=Zt),R.baseState=Ze,R.firstBaseUpdate=Et,R.lastBaseUpdate=Vt,V===null&&(R.shared.lanes=0),nm|=fe,f.lanes=fe,f.memoizedState=Zt}}function Ln(f,x){if(typeof f!="function")throw Error(n(191,f));f.call(x)}function Kn(f,x){var j=f.callbacks;if(j!==null)for(f.callbacks=null,f=0;f<j.length;f++)Ln(j[f],x)}var Cn=ce(null),jn=ce(0);function la(f,x){f=Th,q(jn,f),q(Cn,x),Th=f|x.baseLanes}function Xn(){q(jn,Th),q(Cn,Cn.current)}function dn(){Th=jn.current,M(Cn),M(jn)}var ha=0,Wr=null,rn=null,Fn=null,Bn=!1,Ks=!1,Ps=!1,as=0,ss=0,xs=null,rl=0;function Qn(){throw Error(n(321))}function vs(f,x){if(x===null)return!1;for(var j=0;j<x.length&&j<f.length;j++)if(!Ws(f[j],x[j]))return!1;return!0}function Al(f,x,j,_,R,V){return ha=V,Wr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,U.H=f===null||f.memoizedState===null?II:PI,Ps=!1,V=j(_,R),Ps=!1,Ks&&(V=Nh(x,j,_,R)),lu(f),V}function lu(f){U.H=$1;var x=rn!==null&&rn.next!==null;if(ha=0,Fn=rn=Wr=null,Bn=!1,ss=0,xs=null,x)throw Error(n(300));f===null||bi||(f=f.dependencies,f!==null&&a0(f)&&(bi=!0))}function Nh(f,x,j,_){Wr=f;var R=0;do{if(Ks&&(xs=null),ss=0,Ks=!1,25<=R)throw Error(n(301));if(R+=1,Fn=rn=null,f.updateQueue!=null){var V=f.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}U.H=tX,V=x(j,_)}while(Ks);return V}function cu(){var f=U.H,x=f.useState()[0];return x=typeof x.then=="function"?du(x):x,f=f.useState()[0],(rn!==null?rn.memoizedState:null)!==f&&(Wr.flags|=1024),x}function Ia(){var f=as!==0;return as=0,f}function gp(f,x,j){x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~j}function i0(f){if(Bn){for(f=f.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Bn=!1}ha=0,Fn=rn=Wr=null,Ks=!1,ss=as=0,xs=null}function Li(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Wr.memoizedState=Fn=f:Fn=Fn.next=f,Fn}function Fa(){if(rn===null){var f=Wr.alternate;f=f!==null?f.memoizedState:null}else f=rn.next;var x=Fn===null?Wr.memoizedState:Fn.next;if(x!==null)Fn=x,rn=f;else{if(f===null)throw Wr.alternate===null?Error(n(467)):Error(n(310));rn=f,f={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},Fn===null?Wr.memoizedState=Fn=f:Fn=Fn.next=f}return Fn}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(f){var x=ss;return ss+=1,xs===null&&(xs=[]),f=_t(xs,f,x),x=Wr,(Fn===null?x.memoizedState:Fn.next)===null&&(x=x.alternate,U.H=x===null||x.memoizedState===null?II:PI),f}function ao(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return du(f);if(f.$$typeof===N)return Ts(f)}throw Error(n(438,String(f)))}function uu(f){var x=null,j=Wr.updateQueue;if(j!==null&&(x=j.memoCache),x==null){var _=Wr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(x={data:_.data.map(function(R){return R.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),j===null&&(j=wh(),Wr.updateQueue=j),j.memoCache=x,j=x.data[x.index],j===void 0)for(j=x.data[x.index]=Array(f),_=0;_<f;_++)j[_]=L;return x.index++,j}function so(f,x){return typeof x=="function"?x(f):x}function bp(f){var x=Fa();return Wf(x,rn,f)}function Wf(f,x,j){var _=f.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=j;var R=f.baseQueue,V=_.pending;if(V!==null){if(R!==null){var fe=R.next;R.next=V.next,V.next=fe}x.baseQueue=R=V,_.pending=null}if(V=f.baseState,R===null)f.memoizedState=V;else{x=R.next;var _e=fe=null,Ze=null,Et=x,Vt=!1;do{var Zt=Et.lane&-536870913;if(Zt!==Et.lane?(Un&Zt)===Zt:(ha&Zt)===Zt){var Dt=Et.revertLane;if(Dt===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),Zt===jh&&(Vt=!0);else if((ha&Dt)===Dt){Et=Et.next,Dt===jh&&(Vt=!0);continue}else Zt={lane:0,revertLane:Et.revertLane,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},Ze===null?(_e=Ze=Zt,fe=V):Ze=Ze.next=Zt,Wr.lanes|=Dt,nm|=Dt;Zt=Et.action,Ps&&j(V,Zt),V=Et.hasEagerState?Et.eagerState:j(V,Zt)}else Dt={lane:Zt,revertLane:Et.revertLane,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null},Ze===null?(_e=Ze=Dt,fe=V):Ze=Ze.next=Dt,Wr.lanes|=Zt,nm|=Zt;Et=Et.next}while(Et!==null&&Et!==x);if(Ze===null?fe=V:Ze.next=_e,!Ws(V,f.memoizedState)&&(bi=!0,Vt&&(j=md,j!==null)))throw j;f.memoizedState=V,f.baseState=fe,f.baseQueue=Ze,_.lastRenderedState=V}return R===null&&(_.lanes=0),[f.memoizedState,_.dispatch]}function o0(f){var x=Fa(),j=x.queue;if(j===null)throw Error(n(311));j.lastRenderedReducer=f;var _=j.dispatch,R=j.pending,V=x.memoizedState;if(R!==null){j.pending=null;var fe=R=R.next;do V=f(V,fe.action),fe=fe.next;while(fe!==R);Ws(V,x.memoizedState)||(bi=!0),x.memoizedState=V,x.baseQueue===null&&(x.baseState=V),j.lastRenderedState=V}return[V,_]}function yp(f,x,j){var _=Wr,R=Fa(),V=zn;if(V){if(j===void 0)throw Error(n(407));j=j()}else j=x();var fe=!Ws((rn||R).memoizedState,j);fe&&(R.memoizedState=j,bi=!0),R=R.queue;var _e=Gf.bind(null,_,R,f);if(Xf(2048,8,_e,[f]),R.getSnapshot!==x||fe||Fn!==null&&Fn.memoizedState.tag&1){if(_.flags|=2048,xd(9,Sp(),jp.bind(null,_,R,j,x),null),Pa===null)throw Error(n(349));V||(ha&124)!==0||l0(_,x,j)}return j}function l0(f,x,j){f.flags|=16384,f={getSnapshot:x,value:j},x=Wr.updateQueue,x===null?(x=wh(),Wr.updateQueue=x,x.stores=[f]):(j=x.stores,j===null?x.stores=[f]:j.push(f))}function jp(f,x,j,_){x.value=j,x.getSnapshot=_,A1(x)&&T1(f)}function Gf(f,x,j){return j(function(){A1(x)&&T1(f)})}function A1(f){var x=f.getSnapshot;f=f.value;try{var j=x();return!Ws(f,j)}catch{return!0}}function T1(f){var x=od(f,2);x!==null&&Rl(x,f,2)}function Np(f){var x=Li();if(typeof f=="function"){var j=f;if(f=j(),Ps){pe(!0);try{j()}finally{pe(!1)}}}return x.memoizedState=x.baseState=f,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:f},x}function pd(f,x,j,_){return f.baseState=j,Wf(f,rn,typeof _=="function"?_:so)}function sC(f,x,j,_,R){if(U1(f))throw Error(n(485));if(f=x.action,f!==null){var V={payload:R,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){V.listeners.push(fe)}};U.T!==null?j(!0):V.isTransition=!1,_(V),j=x.pending,j===null?(V.next=x.pending=V,I1(x,V)):(V.next=j.next,x.pending=j.next=V)}}function I1(f,x){var j=x.action,_=x.payload,R=f.state;if(x.isTransition){var V=U.T,fe={};U.T=fe;try{var _e=j(R,_),Ze=U.S;Ze!==null&&Ze(fe,_e),P1(f,x,_e)}catch(Et){Yf(f,x,Et)}finally{U.T=V}}else try{V=j(R,_),P1(f,x,V)}catch(Et){Yf(f,x,Et)}}function P1(f,x,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(_){jg(f,x,_)},function(_){return Yf(f,x,_)}):jg(f,x,j)}function jg(f,x,j){x.status="fulfilled",x.value=j,Ng(x),f.state=j,x=f.pending,x!==null&&(j=x.next,j===x?f.pending=null:(j=j.next,x.next=j,I1(f,j)))}function Yf(f,x,j){var _=f.pending;if(f.pending=null,_!==null){_=_.next;do x.status="rejected",x.reason=j,Ng(x),x=x.next;while(x!==_)}f.action=null}function Ng(f){f=f.listeners;for(var x=0;x<f.length;x++)(0,f[x])()}function wg(f,x){return x}function wp(f,x){if(zn){var j=Pa.formState;if(j!==null){e:{var _=Wr;if(zn){if(Ga){t:{for(var R=Ga,V=vc;R.nodeType!==8;){if(!V){R=null;break t}if(R=yd(R.nextSibling),R===null){R=null;break t}}V=R.data,R=V==="F!"||V==="F"?R:null}if(R){Ga=yd(R.nextSibling),_=R.data==="F!";break e}}yh(_)}_=!1}_&&(x=j[0])}}return j=Li(),j.memoizedState=j.baseState=x,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:x},j.queue=_,j=DI.bind(null,Wr,_),_.dispatch=j,_=Np(!1),V=iC.bind(null,Wr,!1,_.queue),_=Li(),R={state:x,dispatch:null,action:f,pending:null},_.queue=R,j=sC.bind(null,Wr,R,V,j),R.dispatch=j,_.memoizedState=f,[x,j,!1]}function c0(f){var x=Fa();return Kf(x,rn,f)}function Kf(f,x,j){if(x=Wf(f,x,wg)[0],f=bp(so)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var _=du(x)}catch(fe){throw fe===je?Ce:fe}else _=x;x=Fa();var R=x.queue,V=R.dispatch;return j!==x.memoizedState&&(Wr.flags|=2048,xd(9,Sp(),O1.bind(null,R,j),null)),[_,V,f]}function O1(f,x){f.action=x}function M1(f){var x=Fa(),j=rn;if(j!==null)return Kf(x,j,f);Fa(),x=x.memoizedState,j=Fa();var _=j.queue.dispatch;return j.memoizedState=f,[x,_,!1]}function xd(f,x,j,_){return f={tag:f,create:j,deps:_,inst:x,next:null},x=Wr.updateQueue,x===null&&(x=wh(),Wr.updateQueue=x),j=x.lastEffect,j===null?x.lastEffect=f.next=f:(_=j.next,j.next=f,f.next=_,x.lastEffect=f),f}function Sp(){return{destroy:void 0,resource:void 0}}function d0(){return Fa().memoizedState}function Tl(f,x,j,_){var R=Li();_=_===void 0?null:_,Wr.flags|=f,R.memoizedState=xd(1|x,Sp(),j,_)}function Xf(f,x,j,_){var R=Fa();_=_===void 0?null:_;var V=R.memoizedState.inst;rn!==null&&_!==null&&vs(_,rn.memoizedState.deps)?R.memoizedState=xd(x,V,j,_):(Wr.flags|=f,R.memoizedState=xd(1|x,V,j,_))}function Sg(f,x){Tl(8390656,8,f,x)}function R1(f,x){Xf(2048,8,f,x)}function Cg(f,x){return Xf(4,2,f,x)}function Sh(f,x){return Xf(4,4,f,x)}function F1(f,x){if(typeof x=="function"){f=f();var j=x(f);return function(){typeof j=="function"?j():x(null)}}if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function kg(f,x,j){j=j!=null?j.concat([f]):null,Xf(4,4,F1.bind(null,x,f),j)}function _g(){}function Eg(f,x){var j=Fa();x=x===void 0?null:x;var _=j.memoizedState;return x!==null&&vs(x,_[1])?_[0]:(j.memoizedState=[f,x],f)}function L1(f,x){var j=Fa();x=x===void 0?null:x;var _=j.memoizedState;if(x!==null&&vs(x,_[1]))return _[0];if(_=f(),Ps){pe(!0);try{f()}finally{pe(!1)}}return j.memoizedState=[_,x],_}function Ch(f,x,j){return j===void 0||(ha&1073741824)!==0?f.memoizedState=x:(f.memoizedState=j,f=CP(),Wr.lanes|=f,nm|=f,j)}function u0(f,x,j,_){return Ws(j,x)?j:Cn.current!==null?(f=Ch(f,j,_),Ws(f,x)||(bi=!0),f):(ha&42)===0?(bi=!0,f.memoizedState=j):(f=CP(),Wr.lanes|=f,nm|=f,x)}function Cp(f,x,j,_,R){var V=Q.p;Q.p=V!==0&&8>V?V:8;var fe=U.T,_e={};U.T=_e,iC(f,!1,x,j);try{var Ze=R(),Et=U.S;if(Et!==null&&Et(_e,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Vt=D1(Ze,_);Ig(f,x,Vt,Ml(f))}else Ig(f,x,_,Ml(f))}catch(Zt){Ig(f,x,{then:function(){},status:"rejected",reason:Zt},Ml())}finally{Q.p=V,U.T=fe}}function vd(){}function jc(f,x,j,_){if(f.tag!==5)throw Error(n(476));var R=gd(f).queue;Cp(f,R,x,B,j===null?vd:function(){return kp(f),j(_)})}function gd(f){var x=f.memoizedState;if(x!==null)return x;x={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:B},next:null};var j={};return x.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:j},next:null},f.memoizedState=x,f=f.alternate,f!==null&&(f.memoizedState=x),x}function kp(f){var x=gd(f).next.queue;Ig(f,x,{},Ml())}function _p(){return Ts(Xg)}function Dg(){return Fa().memoizedState}function B1(){return Fa().memoizedState}function Ag(f){for(var x=f.return;x!==null;){switch(x.tag){case 24:case 3:var j=Ml();f=qt(j);var _=Jt(x,f,j);_!==null&&(Rl(_,x,j),Wt(_,x,j)),x={cache:bg()},f.payload=x;return}x=x.return}}function Tg(f,x,j){var _=Ml();j={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null},U1(f)?AI(x,j):(j=nu(f,x,j,_),j!==null&&(Rl(j,f,_),TI(j,x,_)))}function DI(f,x,j){var _=Ml();Ig(f,x,j,_)}function Ig(f,x,j,_){var R={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null};if(U1(f))AI(x,R);else{var V=f.alternate;if(f.lanes===0&&(V===null||V.lanes===0)&&(V=x.lastRenderedReducer,V!==null))try{var fe=x.lastRenderedState,_e=V(fe,j);if(R.hasEagerState=!0,R.eagerState=_e,Ws(_e,fe))return ru(f,x,R,0),Pa===null&&Zo(),!1}catch{}finally{}if(j=nu(f,x,R,_),j!==null)return Rl(j,f,_),TI(j,x,_),!0}return!1}function iC(f,x,j,_){if(_={lane:2,revertLane:LC(),action:_,hasEagerState:!1,eagerState:null,next:null},U1(f)){if(x)throw Error(n(479))}else x=nu(f,j,_,2),x!==null&&Rl(x,f,2)}function U1(f){var x=f.alternate;return f===Wr||x!==null&&x===Wr}function AI(f,x){Ks=Bn=!0;var j=f.pending;j===null?x.next=x:(x.next=j.next,j.next=x),f.pending=x}function TI(f,x,j){if((j&4194048)!==0){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ie(f,j)}}var $1={readContext:Ts,use:ao,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn},II={readContext:Ts,use:ao,useCallback:function(f,x){return Li().memoizedState=[f,x===void 0?null:x],f},useContext:Ts,useEffect:Sg,useImperativeHandle:function(f,x,j){j=j!=null?j.concat([f]):null,Tl(4194308,4,F1.bind(null,x,f),j)},useLayoutEffect:function(f,x){return Tl(4194308,4,f,x)},useInsertionEffect:function(f,x){Tl(4,2,f,x)},useMemo:function(f,x){var j=Li();x=x===void 0?null:x;var _=f();if(Ps){pe(!0);try{f()}finally{pe(!1)}}return j.memoizedState=[_,x],_},useReducer:function(f,x,j){var _=Li();if(j!==void 0){var R=j(x);if(Ps){pe(!0);try{j(x)}finally{pe(!1)}}}else R=x;return _.memoizedState=_.baseState=R,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:R},_.queue=f,f=f.dispatch=Tg.bind(null,Wr,f),[_.memoizedState,f]},useRef:function(f){var x=Li();return f={current:f},x.memoizedState=f},useState:function(f){f=Np(f);var x=f.queue,j=DI.bind(null,Wr,x);return x.dispatch=j,[f.memoizedState,j]},useDebugValue:_g,useDeferredValue:function(f,x){var j=Li();return Ch(j,f,x)},useTransition:function(){var f=Np(!1);return f=Cp.bind(null,Wr,f.queue,!0,!1),Li().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,x,j){var _=Wr,R=Li();if(zn){if(j===void 0)throw Error(n(407));j=j()}else{if(j=x(),Pa===null)throw Error(n(349));(Un&124)!==0||l0(_,x,j)}R.memoizedState=j;var V={value:j,getSnapshot:x};return R.queue=V,Sg(Gf.bind(null,_,V,f),[f]),_.flags|=2048,xd(9,Sp(),jp.bind(null,_,V,j,x),null),j},useId:function(){var f=Li(),x=Pa.identifierPrefix;if(zn){var j=ud,_=dd;j=(_&~(1<<32-he(_)-1)).toString(32)+j,x=""+x+"R"+j,j=as++,0<j&&(x+="H"+j.toString(32)),x+=""}else j=rl++,x=""+x+"r"+j.toString(32)+"";return f.memoizedState=x},useHostTransitionStatus:_p,useFormState:wp,useActionState:wp,useOptimistic:function(f){var x=Li();x.memoizedState=x.baseState=f;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=j,x=iC.bind(null,Wr,!0,j),j.dispatch=x,[f,x]},useMemoCache:uu,useCacheRefresh:function(){return Li().memoizedState=Ag.bind(null,Wr)}},PI={readContext:Ts,use:ao,useCallback:Eg,useContext:Ts,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Sh,useMemo:L1,useReducer:bp,useRef:d0,useState:function(){return bp(so)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Fa();return u0(j,rn.memoizedState,f,x)},useTransition:function(){var f=bp(so)[0],x=Fa().memoizedState;return[typeof f=="boolean"?f:du(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:c0,useActionState:c0,useOptimistic:function(f,x){var j=Fa();return pd(j,rn,f,x)},useMemoCache:uu,useCacheRefresh:B1},tX={readContext:Ts,use:ao,useCallback:Eg,useContext:Ts,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Sh,useMemo:L1,useReducer:o0,useRef:d0,useState:function(){return o0(so)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Fa();return rn===null?Ch(j,f,x):u0(j,rn.memoizedState,f,x)},useTransition:function(){var f=o0(so)[0],x=Fa().memoizedState;return[typeof f=="boolean"?f:du(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:M1,useActionState:M1,useOptimistic:function(f,x){var j=Fa();return rn!==null?pd(j,rn,f,x):(j.baseState=f,[f,j.queue.dispatch])},useMemoCache:uu,useCacheRefresh:B1},h0=null,Pg=0;function q1(f){var x=Pg;return Pg+=1,h0===null&&(h0=[]),_t(h0,f,x)}function Og(f,x){x=x.props.ref,f.ref=x!==void 0?x:null}function V1(f,x){throw x.$$typeof===h?Error(n(525)):(f=Object.prototype.toString.call(x),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f)))}function OI(f){var x=f._init;return x(f._payload)}function MI(f){function x(pt,ot){if(f){var kt=pt.deletions;kt===null?(pt.deletions=[ot],pt.flags|=16):kt.push(ot)}}function j(pt,ot){if(!f)return null;for(;ot!==null;)x(pt,ot),ot=ot.sibling;return null}function _(pt){for(var ot=new Map;pt!==null;)pt.key!==null?ot.set(pt.key,pt):ot.set(pt.index,pt),pt=pt.sibling;return ot}function R(pt,ot){return pt=xc(pt,ot),pt.index=0,pt.sibling=null,pt}function V(pt,ot,kt){return pt.index=kt,f?(kt=pt.alternate,kt!==null?(kt=kt.index,kt<ot?(pt.flags|=67108866,ot):kt):(pt.flags|=67108866,ot)):(pt.flags|=1048576,ot)}function fe(pt){return f&&pt.alternate===null&&(pt.flags|=67108866),pt}function _e(pt,ot,kt,Yt){return ot===null||ot.tag!==6?(ot=e0(kt,pt.mode,Yt),ot.return=pt,ot):(ot=R(ot,kt),ot.return=pt,ot)}function Ze(pt,ot,kt,Yt){var Dr=kt.type;return Dr===v?Vt(pt,ot,kt.props.children,Yt,kt.key):ot!==null&&(ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===T&&OI(Dr)===ot.type)?(ot=R(ot,kt.props),Og(ot,kt),ot.return=pt,ot):(ot=vh(kt.type,kt.key,kt.props,null,pt.mode,Yt),Og(ot,kt),ot.return=pt,ot)}function Et(pt,ot,kt,Yt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==kt.containerInfo||ot.stateNode.implementation!==kt.implementation?(ot=fp(kt,pt.mode,Yt),ot.return=pt,ot):(ot=R(ot,kt.children||[]),ot.return=pt,ot)}function Vt(pt,ot,kt,Yt,Dr){return ot===null||ot.tag!==7?(ot=ld(kt,pt.mode,Yt,Dr),ot.return=pt,ot):(ot=R(ot,kt),ot.return=pt,ot)}function Zt(pt,ot,kt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=e0(""+ot,pt.mode,kt),ot.return=pt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case m:return kt=vh(ot.type,ot.key,ot.props,null,pt.mode,kt),Og(kt,ot),kt.return=pt,kt;case p:return ot=fp(ot,pt.mode,kt),ot.return=pt,ot;case T:var Yt=ot._init;return ot=Yt(ot._payload),Zt(pt,ot,kt)}if(re(ot)||O(ot))return ot=ld(ot,pt.mode,kt,null),ot.return=pt,ot;if(typeof ot.then=="function")return Zt(pt,q1(ot),kt);if(ot.$$typeof===N)return Zt(pt,ou(pt,ot),kt);V1(pt,ot)}return null}function Dt(pt,ot,kt,Yt){var Dr=ot!==null?ot.key:null;if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return Dr!==null?null:_e(pt,ot,""+kt,Yt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case m:return kt.key===Dr?Ze(pt,ot,kt,Yt):null;case p:return kt.key===Dr?Et(pt,ot,kt,Yt):null;case T:return Dr=kt._init,kt=Dr(kt._payload),Dt(pt,ot,kt,Yt)}if(re(kt)||O(kt))return Dr!==null?null:Vt(pt,ot,kt,Yt,null);if(typeof kt.then=="function")return Dt(pt,ot,q1(kt),Yt);if(kt.$$typeof===N)return Dt(pt,ot,ou(pt,kt),Yt);V1(pt,kt)}return null}function It(pt,ot,kt,Yt,Dr){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint")return pt=pt.get(kt)||null,_e(ot,pt,""+Yt,Dr);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case m:return pt=pt.get(Yt.key===null?kt:Yt.key)||null,Ze(ot,pt,Yt,Dr);case p:return pt=pt.get(Yt.key===null?kt:Yt.key)||null,Et(ot,pt,Yt,Dr);case T:var An=Yt._init;return Yt=An(Yt._payload),It(pt,ot,kt,Yt,Dr)}if(re(Yt)||O(Yt))return pt=pt.get(kt)||null,Vt(ot,pt,Yt,Dr,null);if(typeof Yt.then=="function")return It(pt,ot,kt,q1(Yt),Dr);if(Yt.$$typeof===N)return It(pt,ot,kt,ou(ot,Yt),Dr);V1(ot,Yt)}return null}function sn(pt,ot,kt,Yt){for(var Dr=null,An=null,Vr=ot,Jr=ot=0,ji=null;Vr!==null&&Jr<kt.length;Jr++){Vr.index>Jr?(ji=Vr,Vr=null):ji=Vr.sibling;var Jn=Dt(pt,Vr,kt[Jr],Yt);if(Jn===null){Vr===null&&(Vr=ji);break}f&&Vr&&Jn.alternate===null&&x(pt,Vr),ot=V(Jn,ot,Jr),An===null?Dr=Jn:An.sibling=Jn,An=Jn,Vr=ji}if(Jr===kt.length)return j(pt,Vr),zn&&bh(pt,Jr),Dr;if(Vr===null){for(;Jr<kt.length;Jr++)Vr=Zt(pt,kt[Jr],Yt),Vr!==null&&(ot=V(Vr,ot,Jr),An===null?Dr=Vr:An.sibling=Vr,An=Vr);return zn&&bh(pt,Jr),Dr}for(Vr=_(Vr);Jr<kt.length;Jr++)ji=It(Vr,pt,Jr,kt[Jr],Yt),ji!==null&&(f&&ji.alternate!==null&&Vr.delete(ji.key===null?Jr:ji.key),ot=V(ji,ot,Jr),An===null?Dr=ji:An.sibling=ji,An=ji);return f&&Vr.forEach(function(hm){return x(pt,hm)}),zn&&bh(pt,Jr),Dr}function Xr(pt,ot,kt,Yt){if(kt==null)throw Error(n(151));for(var Dr=null,An=null,Vr=ot,Jr=ot=0,ji=null,Jn=kt.next();Vr!==null&&!Jn.done;Jr++,Jn=kt.next()){Vr.index>Jr?(ji=Vr,Vr=null):ji=Vr.sibling;var hm=Dt(pt,Vr,Jn.value,Yt);if(hm===null){Vr===null&&(Vr=ji);break}f&&Vr&&hm.alternate===null&&x(pt,Vr),ot=V(hm,ot,Jr),An===null?Dr=hm:An.sibling=hm,An=hm,Vr=ji}if(Jn.done)return j(pt,Vr),zn&&bh(pt,Jr),Dr;if(Vr===null){for(;!Jn.done;Jr++,Jn=kt.next())Jn=Zt(pt,Jn.value,Yt),Jn!==null&&(ot=V(Jn,ot,Jr),An===null?Dr=Jn:An.sibling=Jn,An=Jn);return zn&&bh(pt,Jr),Dr}for(Vr=_(Vr);!Jn.done;Jr++,Jn=kt.next())Jn=It(Vr,pt,Jr,Jn.value,Yt),Jn!==null&&(f&&Jn.alternate!==null&&Vr.delete(Jn.key===null?Jr:Jn.key),ot=V(Jn,ot,Jr),An===null?Dr=Jn:An.sibling=Jn,An=Jn);return f&&Vr.forEach(function(rQ){return x(pt,rQ)}),zn&&bh(pt,Jr),Dr}function wa(pt,ot,kt,Yt){if(typeof kt=="object"&&kt!==null&&kt.type===v&&kt.key===null&&(kt=kt.props.children),typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case m:e:{for(var Dr=kt.key;ot!==null;){if(ot.key===Dr){if(Dr=kt.type,Dr===v){if(ot.tag===7){j(pt,ot.sibling),Yt=R(ot,kt.props.children),Yt.return=pt,pt=Yt;break e}}else if(ot.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===T&&OI(Dr)===ot.type){j(pt,ot.sibling),Yt=R(ot,kt.props),Og(Yt,kt),Yt.return=pt,pt=Yt;break e}j(pt,ot);break}else x(pt,ot);ot=ot.sibling}kt.type===v?(Yt=ld(kt.props.children,pt.mode,Yt,kt.key),Yt.return=pt,pt=Yt):(Yt=vh(kt.type,kt.key,kt.props,null,pt.mode,Yt),Og(Yt,kt),Yt.return=pt,pt=Yt)}return fe(pt);case p:e:{for(Dr=kt.key;ot!==null;){if(ot.key===Dr)if(ot.tag===4&&ot.stateNode.containerInfo===kt.containerInfo&&ot.stateNode.implementation===kt.implementation){j(pt,ot.sibling),Yt=R(ot,kt.children||[]),Yt.return=pt,pt=Yt;break e}else{j(pt,ot);break}else x(pt,ot);ot=ot.sibling}Yt=fp(kt,pt.mode,Yt),Yt.return=pt,pt=Yt}return fe(pt);case T:return Dr=kt._init,kt=Dr(kt._payload),wa(pt,ot,kt,Yt)}if(re(kt))return sn(pt,ot,kt,Yt);if(O(kt)){if(Dr=O(kt),typeof Dr!="function")throw Error(n(150));return kt=Dr.call(kt),Xr(pt,ot,kt,Yt)}if(typeof kt.then=="function")return wa(pt,ot,q1(kt),Yt);if(kt.$$typeof===N)return wa(pt,ot,ou(pt,kt),Yt);V1(pt,kt)}return typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint"?(kt=""+kt,ot!==null&&ot.tag===6?(j(pt,ot.sibling),Yt=R(ot,kt),Yt.return=pt,pt=Yt):(j(pt,ot),Yt=e0(kt,pt.mode,Yt),Yt.return=pt,pt=Yt),fe(pt)):j(pt,ot)}return function(pt,ot,kt,Yt){try{Pg=0;var Dr=wa(pt,ot,kt,Yt);return h0=null,Dr}catch(Vr){if(Vr===je||Vr===Ce)throw Vr;var An=gi(29,Vr,null,pt.mode);return An.lanes=Yt,An.return=pt,An}finally{}}}var f0=MI(!0),RI=MI(!1),Nc=ce(null),hu=null;function Qf(f){var x=f.alternate;q(ii,ii.current&1),q(Nc,f),hu===null&&(x===null||Cn.current!==null||x.memoizedState!==null)&&(hu=f)}function FI(f){if(f.tag===22){if(q(ii,ii.current),q(Nc,f),hu===null){var x=f.alternate;x!==null&&x.memoizedState!==null&&(hu=f)}}else Jf()}function Jf(){q(ii,ii.current),q(Nc,Nc.current)}function kh(f){M(Nc),hu===f&&(hu=null),M(ii)}var ii=ce(0);function z1(f){for(var x=f;x!==null;){if(x.tag===13){var j=x.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||j.data==="$?"||XC(j)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}function oC(f,x,j,_){x=f.memoizedState,j=j(_,x),j=j==null?x:u({},x,j),f.memoizedState=j,f.lanes===0&&(f.updateQueue.baseState=j)}var lC={enqueueSetState:function(f,x,j){f=f._reactInternals;var _=Ml(),R=qt(_);R.payload=x,j!=null&&(R.callback=j),x=Jt(f,R,_),x!==null&&(Rl(x,f,_),Wt(x,f,_))},enqueueReplaceState:function(f,x,j){f=f._reactInternals;var _=Ml(),R=qt(_);R.tag=1,R.payload=x,j!=null&&(R.callback=j),x=Jt(f,R,_),x!==null&&(Rl(x,f,_),Wt(x,f,_))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var j=Ml(),_=qt(j);_.tag=2,x!=null&&(_.callback=x),x=Jt(f,_,j),x!==null&&(Rl(x,f,j),Wt(x,f,j))}};function LI(f,x,j,_,R,V,fe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(_,V,fe):x.prototype&&x.prototype.isPureReactComponent?!Kd(j,_)||!Kd(R,V):!0}function BI(f,x,j,_){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(j,_),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(j,_),x.state!==f&&lC.enqueueReplaceState(x,x.state,null)}function Ep(f,x){var j=x;if("ref"in x){j={};for(var _ in x)_!=="ref"&&(j[_]=x[_])}if(f=f.defaultProps){j===x&&(j=u({},j));for(var R in f)j[R]===void 0&&(j[R]=f[R])}return j}var H1=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function UI(f){H1(f)}function $I(f){console.error(f)}function qI(f){H1(f)}function W1(f,x){try{var j=f.onUncaughtError;j(x.value,{componentStack:x.stack})}catch(_){setTimeout(function(){throw _})}}function VI(f,x,j){try{var _=f.onCaughtError;_(j.value,{componentStack:j.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function cC(f,x,j){return j=qt(j),j.tag=3,j.payload={element:null},j.callback=function(){W1(f,x)},j}function zI(f){return f=qt(f),f.tag=3,f}function HI(f,x,j,_){var R=j.type.getDerivedStateFromError;if(typeof R=="function"){var V=_.value;f.payload=function(){return R(V)},f.callback=function(){VI(x,j,_)}}var fe=j.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(f.callback=function(){VI(x,j,_),typeof R!="function"&&(am===null?am=new Set([this]):am.add(this));var _e=_.stack;this.componentDidCatch(_.value,{componentStack:_e!==null?_e:""})})}function rX(f,x,j,_,R){if(j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(x=j.alternate,x!==null&&Hf(x,j,R,!0),j=Nc.current,j!==null){switch(j.tag){case 13:return hu===null?PC():j.alternate===null&&gs===0&&(gs=3),j.flags&=-257,j.flags|=65536,j.lanes=R,_===Te?j.flags|=16384:(x=j.updateQueue,x===null?j.updateQueue=new Set([_]):x.add(_),MC(f,_,R)),!1;case 22:return j.flags|=65536,_===Te?j.flags|=16384:(x=j.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([_])},j.updateQueue=x):(j=x.retryQueue,j===null?x.retryQueue=new Set([_]):j.add(_)),MC(f,_,R)),!1}throw Error(n(435,j.tag))}return MC(f,_,R),PC(),!1}if(zn)return x=Nc.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=R,_!==gg&&(f=Error(n(422),{cause:_}),zf(kn(f,j)))):(_!==gg&&(x=Error(n(423),{cause:_}),zf(kn(x,j))),f=f.current.alternate,f.flags|=65536,R&=-R,f.lanes|=R,_=kn(_,j),R=cC(f.stateNode,_,R),wr(f,R),gs!==4&&(gs=2)),!1;var V=Error(n(520),{cause:_});if(V=kn(V,j),$g===null?$g=[V]:$g.push(V),gs!==4&&(gs=2),x===null)return!0;_=kn(_,j),j=x;do{switch(j.tag){case 3:return j.flags|=65536,f=R&-R,j.lanes|=f,f=cC(j.stateNode,_,f),wr(j,f),!1;case 1:if(x=j.type,V=j.stateNode,(j.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(am===null||!am.has(V))))return j.flags|=65536,R&=-R,j.lanes|=R,R=zI(R),HI(R,f,j,_),wr(j,R),!1}j=j.return}while(j!==null);return!1}var WI=Error(n(461)),bi=!1;function Bi(f,x,j,_){x.child=f===null?RI(x,null,j,_):f0(x,f.child,j,_)}function GI(f,x,j,_,R){j=j.render;var V=x.ref;if("ref"in _){var fe={};for(var _e in _)_e!=="ref"&&(fe[_e]=_[_e])}else fe=_;return yc(x),_=Al(f,x,j,fe,V,R),_e=Ia(),f!==null&&!bi?(gp(f,x,R),_h(f,x,R)):(zn&&_e&&mp(x),x.flags|=1,Bi(f,x,_,R),x.child)}function YI(f,x,j,_,R){if(f===null){var V=j.type;return typeof V=="function"&&!qf(V)&&V.defaultProps===void 0&&j.compare===null?(x.tag=15,x.type=V,KI(f,x,V,_,R)):(f=vh(j.type,null,_,x,x.mode,R),f.ref=x.ref,f.return=x,x.child=f)}if(V=f.child,!vC(f,R)){var fe=V.memoizedProps;if(j=j.compare,j=j!==null?j:Kd,j(fe,_)&&f.ref===x.ref)return _h(f,x,R)}return x.flags|=1,f=xc(V,_),f.ref=x.ref,f.return=x,x.child=f}function KI(f,x,j,_,R){if(f!==null){var V=f.memoizedProps;if(Kd(V,_)&&f.ref===x.ref)if(bi=!1,x.pendingProps=_=V,vC(f,R))(f.flags&131072)!==0&&(bi=!0);else return x.lanes=f.lanes,_h(f,x,R)}return dC(f,x,j,_,R)}function XI(f,x,j){var _=x.pendingProps,R=_.children,V=f!==null?f.memoizedState:null;if(_.mode==="hidden"){if((x.flags&128)!==0){if(_=V!==null?V.baseLanes|j:j,f!==null){for(R=x.child=f.child,V=0;R!==null;)V=V|R.lanes|R.childLanes,R=R.sibling;x.childLanes=V&~_}else x.childLanes=0,x.child=null;return QI(f,x,_,j)}if((j&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},f!==null&&le(x,V!==null?V.cachePool:null),V!==null?la(x,V):Xn(),FI(x);else return x.lanes=x.childLanes=536870912,QI(f,x,V!==null?V.baseLanes|j:j,j)}else V!==null?(le(x,V.cachePool),la(x,V),Jf(),x.memoizedState=null):(f!==null&&le(x,null),Xn(),Jf());return Bi(f,x,R,j),x.child}function QI(f,x,j,_){var R=Z();return R=R===null?null:{parent:Is._currentValue,pool:R},x.memoizedState={baseLanes:j,cachePool:R},f!==null&&le(x,null),Xn(),FI(x),f!==null&&Hf(f,x,_,!0),null}function G1(f,x){var j=x.ref;if(j===null)f!==null&&f.ref!==null&&(x.flags|=4194816);else{if(typeof j!="function"&&typeof j!="object")throw Error(n(284));(f===null||f.ref!==j)&&(x.flags|=4194816)}}function dC(f,x,j,_,R){return yc(x),j=Al(f,x,j,_,void 0,R),_=Ia(),f!==null&&!bi?(gp(f,x,R),_h(f,x,R)):(zn&&_&&mp(x),x.flags|=1,Bi(f,x,j,R),x.child)}function JI(f,x,j,_,R,V){return yc(x),x.updateQueue=null,j=Nh(x,_,j,R),lu(f),_=Ia(),f!==null&&!bi?(gp(f,x,V),_h(f,x,V)):(zn&&_&&mp(x),x.flags|=1,Bi(f,x,j,V),x.child)}function ZI(f,x,j,_,R){if(yc(x),x.stateNode===null){var V=Gs,fe=j.contextType;typeof fe=="object"&&fe!==null&&(V=Ts(fe)),V=new j(_,V),x.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=lC,x.stateNode=V,V._reactInternals=x,V=x.stateNode,V.props=_,V.state=x.memoizedState,V.refs={},st(x),fe=j.contextType,V.context=typeof fe=="object"&&fe!==null?Ts(fe):Gs,V.state=x.memoizedState,fe=j.getDerivedStateFromProps,typeof fe=="function"&&(oC(x,j,fe,_),V.state=x.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(fe=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),fe!==V.state&&lC.enqueueReplaceState(V,V.state,null),br(x,_,V,R),qr(),V.state=x.memoizedState),typeof V.componentDidMount=="function"&&(x.flags|=4194308),_=!0}else if(f===null){V=x.stateNode;var _e=x.memoizedProps,Ze=Ep(j,_e);V.props=Ze;var Et=V.context,Vt=j.contextType;fe=Gs,typeof Vt=="object"&&Vt!==null&&(fe=Ts(Vt));var Zt=j.getDerivedStateFromProps;Vt=typeof Zt=="function"||typeof V.getSnapshotBeforeUpdate=="function",_e=x.pendingProps!==_e,Vt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(_e||Et!==fe)&&BI(x,V,_,fe),Ot=!1;var Dt=x.memoizedState;V.state=Dt,br(x,_,V,R),qr(),Et=x.memoizedState,_e||Dt!==Et||Ot?(typeof Zt=="function"&&(oC(x,j,Zt,_),Et=x.memoizedState),(Ze=Ot||LI(x,j,Ze,_,Dt,Et,fe))?(Vt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(x.flags|=4194308)):(typeof V.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=_,x.memoizedState=Et),V.props=_,V.state=Et,V.context=fe,_=Ze):(typeof V.componentDidMount=="function"&&(x.flags|=4194308),_=!1)}else{V=x.stateNode,dt(f,x),fe=x.memoizedProps,Vt=Ep(j,fe),V.props=Vt,Zt=x.pendingProps,Dt=V.context,Et=j.contextType,Ze=Gs,typeof Et=="object"&&Et!==null&&(Ze=Ts(Et)),_e=j.getDerivedStateFromProps,(Et=typeof _e=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(fe!==Zt||Dt!==Ze)&&BI(x,V,_,Ze),Ot=!1,Dt=x.memoizedState,V.state=Dt,br(x,_,V,R),qr();var It=x.memoizedState;fe!==Zt||Dt!==It||Ot||f!==null&&f.dependencies!==null&&a0(f.dependencies)?(typeof _e=="function"&&(oC(x,j,_e,_),It=x.memoizedState),(Vt=Ot||LI(x,j,Vt,_,Dt,It,Ze)||f!==null&&f.dependencies!==null&&a0(f.dependencies))?(Et||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(_,It,Ze),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(_,It,Ze)),typeof V.componentDidUpdate=="function"&&(x.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof V.componentDidUpdate!="function"||fe===f.memoizedProps&&Dt===f.memoizedState||(x.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&Dt===f.memoizedState||(x.flags|=1024),x.memoizedProps=_,x.memoizedState=It),V.props=_,V.state=It,V.context=Ze,_=Vt):(typeof V.componentDidUpdate!="function"||fe===f.memoizedProps&&Dt===f.memoizedState||(x.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&Dt===f.memoizedState||(x.flags|=1024),_=!1)}return V=_,G1(f,x),_=(x.flags&128)!==0,V||_?(V=x.stateNode,j=_&&typeof j.getDerivedStateFromError!="function"?null:V.render(),x.flags|=1,f!==null&&_?(x.child=f0(x,f.child,null,R),x.child=f0(x,null,j,R)):Bi(f,x,j,R),x.memoizedState=V.state,f=x.child):f=_h(f,x,R),f}function eP(f,x,j,_){return Fo(),x.flags|=256,Bi(f,x,j,_),x.child}var uC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hC(f){return{baseLanes:f,cachePool:ve()}}function fC(f,x,j){return f=f!==null?f.childLanes&~j:0,x&&(f|=wc),f}function tP(f,x,j){var _=x.pendingProps,R=!1,V=(x.flags&128)!==0,fe;if((fe=V)||(fe=f!==null&&f.memoizedState===null?!1:(ii.current&2)!==0),fe&&(R=!0,x.flags&=-129),fe=(x.flags&32)!==0,x.flags&=-33,f===null){if(zn){if(R?Qf(x):Jf(),zn){var _e=Ga,Ze;if(Ze=_e){e:{for(Ze=_e,_e=vc;Ze.nodeType!==8;){if(!_e){_e=null;break e}if(Ze=yd(Ze.nextSibling),Ze===null){_e=null;break e}}_e=Ze}_e!==null?(x.memoizedState={dehydrated:_e,treeContext:gh!==null?{id:dd,overflow:ud}:null,retryLane:536870912,hydrationErrors:null},Ze=gi(18,null,null,0),Ze.stateNode=_e,Ze.return=x,x.child=Ze,As=x,Ga=null,Ze=!0):Ze=!1}Ze||yh(x)}if(_e=x.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return XC(_e)?x.lanes=32:x.lanes=536870912,null;kh(x)}return _e=_.children,_=_.fallback,R?(Jf(),R=x.mode,_e=Y1({mode:"hidden",children:_e},R),_=ld(_,R,j,null),_e.return=x,_.return=x,_e.sibling=_,x.child=_e,R=x.child,R.memoizedState=hC(j),R.childLanes=fC(f,fe,j),x.memoizedState=uC,_):(Qf(x),mC(x,_e))}if(Ze=f.memoizedState,Ze!==null&&(_e=Ze.dehydrated,_e!==null)){if(V)x.flags&256?(Qf(x),x.flags&=-257,x=pC(f,x,j)):x.memoizedState!==null?(Jf(),x.child=f.child,x.flags|=128,x=null):(Jf(),R=_.fallback,_e=x.mode,_=Y1({mode:"visible",children:_.children},_e),R=ld(R,_e,j,null),R.flags|=2,_.return=x,R.return=x,_.sibling=R,x.child=_,f0(x,f.child,null,j),_=x.child,_.memoizedState=hC(j),_.childLanes=fC(f,fe,j),x.memoizedState=uC,x=R);else if(Qf(x),XC(_e)){if(fe=_e.nextSibling&&_e.nextSibling.dataset,fe)var Et=fe.dgst;fe=Et,_=Error(n(419)),_.stack="",_.digest=fe,zf({value:_,source:null,stack:null}),x=pC(f,x,j)}else if(bi||Hf(f,x,j,!1),fe=(j&f.childLanes)!==0,bi||fe){if(fe=Pa,fe!==null&&(_=j&-j,_=(_&42)!==0?1:ke(_),_=(_&(fe.suspendedLanes|j))!==0?0:_,_!==0&&_!==Ze.retryLane))throw Ze.retryLane=_,od(f,_),Rl(fe,f,_),WI;_e.data==="$?"||PC(),x=pC(f,x,j)}else _e.data==="$?"?(x.flags|=192,x.child=f.child,x=null):(f=Ze.treeContext,Ga=yd(_e.nextSibling),As=x,zn=!0,su=null,vc=!1,f!==null&&(tl[Ro++]=dd,tl[Ro++]=ud,tl[Ro++]=gh,dd=f.id,ud=f.overflow,gh=x),x=mC(x,_.children),x.flags|=4096);return x}return R?(Jf(),R=_.fallback,_e=x.mode,Ze=f.child,Et=Ze.sibling,_=xc(Ze,{mode:"hidden",children:_.children}),_.subtreeFlags=Ze.subtreeFlags&65011712,Et!==null?R=xc(Et,R):(R=ld(R,_e,j,null),R.flags|=2),R.return=x,_.return=x,_.sibling=R,x.child=_,_=R,R=x.child,_e=f.child.memoizedState,_e===null?_e=hC(j):(Ze=_e.cachePool,Ze!==null?(Et=Is._currentValue,Ze=Ze.parent!==Et?{parent:Et,pool:Et}:Ze):Ze=ve(),_e={baseLanes:_e.baseLanes|j,cachePool:Ze}),R.memoizedState=_e,R.childLanes=fC(f,fe,j),x.memoizedState=uC,_):(Qf(x),j=f.child,f=j.sibling,j=xc(j,{mode:"visible",children:_.children}),j.return=x,j.sibling=null,f!==null&&(fe=x.deletions,fe===null?(x.deletions=[f],x.flags|=16):fe.push(f)),x.child=j,x.memoizedState=null,j)}function mC(f,x){return x=Y1({mode:"visible",children:x},f.mode),x.return=f,f.child=x}function Y1(f,x){return f=gi(22,f,null,x),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function pC(f,x,j){return f0(x,f.child,null,j),f=mC(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function rP(f,x,j){f.lanes|=x;var _=f.alternate;_!==null&&(_.lanes|=x),r0(f.return,x,j)}function xC(f,x,j,_,R){var V=f.memoizedState;V===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:_,tail:j,tailMode:R}:(V.isBackwards=x,V.rendering=null,V.renderingStartTime=0,V.last=_,V.tail=j,V.tailMode=R)}function nP(f,x,j){var _=x.pendingProps,R=_.revealOrder,V=_.tail;if(Bi(f,x,_.children,j),_=ii.current,(_&2)!==0)_=_&1|2,x.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&rP(f,j,x);else if(f.tag===19)rP(f,j,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}_&=1}switch(q(ii,_),R){case"forwards":for(j=x.child,R=null;j!==null;)f=j.alternate,f!==null&&z1(f)===null&&(R=j),j=j.sibling;j=R,j===null?(R=x.child,x.child=null):(R=j.sibling,j.sibling=null),xC(x,!1,R,j,V);break;case"backwards":for(j=null,R=x.child,x.child=null;R!==null;){if(f=R.alternate,f!==null&&z1(f)===null){x.child=R;break}f=R.sibling,R.sibling=j,j=R,R=f}xC(x,!0,j,null,V);break;case"together":xC(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function _h(f,x,j){if(f!==null&&(x.dependencies=f.dependencies),nm|=x.lanes,(j&x.childLanes)===0)if(f!==null){if(Hf(f,x,j,!1),(j&x.childLanes)===0)return null}else return null;if(f!==null&&x.child!==f.child)throw Error(n(153));if(x.child!==null){for(f=x.child,j=xc(f,f.pendingProps),x.child=j,j.return=x;f.sibling!==null;)f=f.sibling,j=j.sibling=xc(f,f.pendingProps),j.return=x;j.sibling=null}return x.child}function vC(f,x){return(f.lanes&x)!==0?!0:(f=f.dependencies,!!(f!==null&&a0(f)))}function nX(f,x,j){switch(x.tag){case 3:ae(x,x.stateNode.containerInfo),iu(x,Is,f.memoizedState.cache),Fo();break;case 27:case 5:G(x);break;case 4:ae(x,x.stateNode.containerInfo);break;case 10:iu(x,x.type,x.memoizedProps.value);break;case 13:var _=x.memoizedState;if(_!==null)return _.dehydrated!==null?(Qf(x),x.flags|=128,null):(j&x.child.childLanes)!==0?tP(f,x,j):(Qf(x),f=_h(f,x,j),f!==null?f.sibling:null);Qf(x);break;case 19:var R=(f.flags&128)!==0;if(_=(j&x.childLanes)!==0,_||(Hf(f,x,j,!1),_=(j&x.childLanes)!==0),R){if(_)return nP(f,x,j);x.flags|=128}if(R=x.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),q(ii,ii.current),_)break;return null;case 22:case 23:return x.lanes=0,XI(f,x,j);case 24:iu(x,Is,f.memoizedState.cache)}return _h(f,x,j)}function aP(f,x,j){if(f!==null)if(f.memoizedProps!==x.pendingProps)bi=!0;else{if(!vC(f,j)&&(x.flags&128)===0)return bi=!1,nX(f,x,j);bi=(f.flags&131072)!==0}else bi=!1,zn&&(x.flags&1048576)!==0&&S1(x,t0,x.index);switch(x.lanes=0,x.tag){case 16:e:{f=x.pendingProps;var _=x.elementType,R=_._init;if(_=R(_._payload),x.type=_,typeof _=="function")qf(_)?(f=Ep(_,f),x.tag=1,x=ZI(null,x,_,f,j)):(x.tag=0,x=dC(null,x,_,f,j));else{if(_!=null){if(R=_.$$typeof,R===k){x.tag=11,x=GI(null,x,_,f,j);break e}else if(R===E){x.tag=14,x=YI(null,x,_,f,j);break e}}throw x=W(_)||_,Error(n(306,x,""))}}return x;case 0:return dC(f,x,x.type,x.pendingProps,j);case 1:return _=x.type,R=Ep(_,x.pendingProps),ZI(f,x,_,R,j);case 3:e:{if(ae(x,x.stateNode.containerInfo),f===null)throw Error(n(387));_=x.pendingProps;var V=x.memoizedState;R=V.element,dt(f,x),br(x,_,null,j);var fe=x.memoizedState;if(_=fe.cache,iu(x,Is,_),_!==V.cache&&n0(x,[Is],j,!0),qr(),_=fe.element,V.isDehydrated)if(V={element:_,isDehydrated:!1,cache:fe.cache},x.updateQueue.baseState=V,x.memoizedState=V,x.flags&256){x=eP(f,x,_,j);break e}else if(_!==R){R=kn(Error(n(424)),x),zf(R),x=eP(f,x,_,j);break e}else{switch(f=x.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Ga=yd(f.firstChild),As=x,zn=!0,su=null,vc=!0,j=RI(x,null,_,j),x.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling}else{if(Fo(),_===R){x=_h(f,x,j);break e}Bi(f,x,_,j)}x=x.child}return x;case 26:return G1(f,x),f===null?(j=lO(x.type,null,x.pendingProps,null))?x.memoizedState=j:zn||(j=x.type,f=x.pendingProps,_=lj(ee.current).createElement(j),_[tr]=x,_[mr]=f,$i(_,j,f),at(_),x.stateNode=_):x.memoizedState=lO(x.type,f.memoizedProps,x.pendingProps,f.memoizedState),null;case 27:return G(x),f===null&&zn&&(_=x.stateNode=sO(x.type,x.pendingProps,ee.current),As=x,vc=!0,R=Ga,om(x.type)?(QC=R,Ga=yd(_.firstChild)):Ga=R),Bi(f,x,x.pendingProps.children,j),G1(f,x),f===null&&(x.flags|=4194304),x.child;case 5:return f===null&&zn&&((R=_=Ga)&&(_=TX(_,x.type,x.pendingProps,vc),_!==null?(x.stateNode=_,As=x,Ga=yd(_.firstChild),vc=!1,R=!0):R=!1),R||yh(x)),G(x),R=x.type,V=x.pendingProps,fe=f!==null?f.memoizedProps:null,_=V.children,GC(R,V)?_=null:fe!==null&&GC(R,fe)&&(x.flags|=32),x.memoizedState!==null&&(R=Al(f,x,cu,null,null,j),Xg._currentValue=R),G1(f,x),Bi(f,x,_,j),x.child;case 6:return f===null&&zn&&((f=j=Ga)&&(j=IX(j,x.pendingProps,vc),j!==null?(x.stateNode=j,As=x,Ga=null,f=!0):f=!1),f||yh(x)),null;case 13:return tP(f,x,j);case 4:return ae(x,x.stateNode.containerInfo),_=x.pendingProps,f===null?x.child=f0(x,null,_,j):Bi(f,x,_,j),x.child;case 11:return GI(f,x,x.type,x.pendingProps,j);case 7:return Bi(f,x,x.pendingProps,j),x.child;case 8:return Bi(f,x,x.pendingProps.children,j),x.child;case 12:return Bi(f,x,x.pendingProps.children,j),x.child;case 10:return _=x.pendingProps,iu(x,x.type,_.value),Bi(f,x,_.children,j),x.child;case 9:return R=x.type._context,_=x.pendingProps.children,yc(x),R=Ts(R),_=_(R),x.flags|=1,Bi(f,x,_,j),x.child;case 14:return YI(f,x,x.type,x.pendingProps,j);case 15:return KI(f,x,x.type,x.pendingProps,j);case 19:return nP(f,x,j);case 31:return _=x.pendingProps,j=x.mode,_={mode:_.mode,children:_.children},f===null?(j=Y1(_,j),j.ref=x.ref,x.child=j,j.return=x,x=j):(j=xc(f.child,_),j.ref=x.ref,x.child=j,j.return=x,x=j),x;case 22:return XI(f,x,j);case 24:return yc(x),_=Ts(Is),f===null?(R=Z(),R===null&&(R=Pa,V=bg(),R.pooledCache=V,V.refCount++,V!==null&&(R.pooledCacheLanes|=j),R=V),x.memoizedState={parent:_,cache:R},st(x),iu(x,Is,R)):((f.lanes&j)!==0&&(dt(f,x),br(x,null,null,j),qr()),R=f.memoizedState,V=x.memoizedState,R.parent!==_?(R={parent:_,cache:_},x.memoizedState=R,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=R),iu(x,Is,_)):(_=V.cache,iu(x,Is,_),_!==R.cache&&n0(x,[Is],j,!0))),Bi(f,x,x.pendingProps.children,j),x.child;case 29:throw x.pendingProps}throw Error(n(156,x.tag))}function Eh(f){f.flags|=4}function sP(f,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!fO(x)){if(x=Nc.current,x!==null&&((Un&4194048)===Un?hu!==null:(Un&62914560)!==Un&&(Un&536870912)===0||x!==hu))throw Ct=Te,we;f.flags|=8192}}function K1(f,x){x!==null&&(f.flags|=4),f.flags&16384&&(x=f.tag!==22?Ae():536870912,f.lanes|=x,v0|=x)}function Mg(f,x){if(!zn)switch(f.tailMode){case"hidden":x=f.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?f.tail=null:j.sibling=null;break;case"collapsed":j=f.tail;for(var _=null;j!==null;)j.alternate!==null&&(_=j),j=j.sibling;_===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:_.sibling=null}}function is(f){var x=f.alternate!==null&&f.alternate.child===f.child,j=0,_=0;if(x)for(var R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags&65011712,_|=R.flags&65011712,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags,_|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=_,f.childLanes=j,x}function aX(f,x,j){var _=x.pendingProps;switch(pp(x),x.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(x),null;case 1:return is(x),null;case 3:return j=x.stateNode,_=null,f!==null&&(_=f.memoizedState.cache),x.memoizedState.cache!==_&&(x.flags|=2048),bc(Is),ie(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(f===null||f.child===null)&&(Fi(x)?Eh(x):f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,k1())),is(x),null;case 26:return j=x.memoizedState,f===null?(Eh(x),j!==null?(is(x),sP(x,j)):(is(x),x.flags&=-16777217)):j?j!==f.memoizedState?(Eh(x),is(x),sP(x,j)):(is(x),x.flags&=-16777217):(f.memoizedProps!==_&&Eh(x),is(x),x.flags&=-16777217),null;case 27:de(x),j=ee.current;var R=x.type;if(f!==null&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}f=z.current,Fi(x)?C1(x):(f=sO(R,_,j),x.stateNode=f,Eh(x))}return is(x),null;case 5:if(de(x),j=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}if(f=z.current,Fi(x))C1(x);else{switch(R=lj(ee.current),f){case 1:f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":f=R.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof _.is=="string"?R.createElement("select",{is:_.is}):R.createElement("select"),_.multiple?f.multiple=!0:_.size&&(f.size=_.size);break;default:f=typeof _.is=="string"?R.createElement(j,{is:_.is}):R.createElement(j)}}f[tr]=x,f[mr]=_;e:for(R=x.child;R!==null;){if(R.tag===5||R.tag===6)f.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===x)break e;for(;R.sibling===null;){if(R.return===null||R.return===x)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}x.stateNode=f;e:switch($i(f,j,_),j){case"button":case"input":case"select":case"textarea":f=!!_.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Eh(x)}}return is(x),x.flags&=-16777217,null;case 6:if(f&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(typeof _!="string"&&x.stateNode===null)throw Error(n(166));if(f=ee.current,Fi(x)){if(f=x.stateNode,j=x.memoizedProps,_=null,R=As,R!==null)switch(R.tag){case 27:case 5:_=R.memoizedProps}f[tr]=x,f=!!(f.nodeValue===j||_!==null&&_.suppressHydrationWarning===!0||JP(f.nodeValue,j)),f||yh(x)}else f=lj(f).createTextNode(_),f[tr]=x,x.stateNode=f}return is(x),null;case 13:if(_=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(R=Fi(x),_!==null&&_.dehydrated!==null){if(f===null){if(!R)throw Error(n(318));if(R=x.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[tr]=x}else Fo(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;is(x),R=!1}else R=k1(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=R),R=!0;if(!R)return x.flags&256?(kh(x),x):(kh(x),null)}if(kh(x),(x.flags&128)!==0)return x.lanes=j,x;if(j=_!==null,f=f!==null&&f.memoizedState!==null,j){_=x.child,R=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(R=_.alternate.memoizedState.cachePool.pool);var V=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(V=_.memoizedState.cachePool.pool),V!==R&&(_.flags|=2048)}return j!==f&&j&&(x.child.flags|=8192),K1(x,x.updateQueue),is(x),null;case 4:return ie(),f===null&&qC(x.stateNode.containerInfo),is(x),null;case 10:return bc(x.type),is(x),null;case 19:if(M(ii),R=x.memoizedState,R===null)return is(x),null;if(_=(x.flags&128)!==0,V=R.rendering,V===null)if(_)Mg(R,!1);else{if(gs!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(V=z1(f),V!==null){for(x.flags|=128,Mg(R,!1),f=V.updateQueue,x.updateQueue=f,K1(x,f),x.subtreeFlags=0,f=j,j=x.child;j!==null;)hp(j,f),j=j.sibling;return q(ii,ii.current&1|2),x.child}f=f.sibling}R.tail!==null&&ye()>J1&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304)}else{if(!_)if(f=z1(V),f!==null){if(x.flags|=128,_=!0,f=f.updateQueue,x.updateQueue=f,K1(x,f),Mg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!V.alternate&&!zn)return is(x),null}else 2*ye()-R.renderingStartTime>J1&&j!==536870912&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304);R.isBackwards?(V.sibling=x.child,x.child=V):(f=R.last,f!==null?f.sibling=V:x.child=V,R.last=V)}return R.tail!==null?(x=R.tail,R.rendering=x,R.tail=x.sibling,R.renderingStartTime=ye(),x.sibling=null,f=ii.current,q(ii,_?f&1|2:f&1),x):(is(x),null);case 22:case 23:return kh(x),dn(),_=x.memoizedState!==null,f!==null?f.memoizedState!==null!==_&&(x.flags|=8192):_&&(x.flags|=8192),_?(j&536870912)!==0&&(x.flags&128)===0&&(is(x),x.subtreeFlags&6&&(x.flags|=8192)):is(x),j=x.updateQueue,j!==null&&K1(x,j.retryQueue),j=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),_=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(_=x.memoizedState.cachePool.pool),_!==j&&(x.flags|=2048),f!==null&&M(F),null;case 24:return j=null,f!==null&&(j=f.memoizedState.cache),x.memoizedState.cache!==j&&(x.flags|=2048),bc(Is),is(x),null;case 25:return null;case 30:return null}throw Error(n(156,x.tag))}function sX(f,x){switch(pp(x),x.tag){case 1:return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return bc(Is),ie(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 26:case 27:case 5:return de(x),null;case 13:if(kh(x),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Fo()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return M(ii),null;case 4:return ie(),null;case 10:return bc(x.type),null;case 22:case 23:return kh(x),dn(),f!==null&&M(F),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 24:return bc(Is),null;case 25:return null;default:return null}}function iP(f,x){switch(pp(x),x.tag){case 3:bc(Is),ie();break;case 26:case 27:case 5:de(x);break;case 4:ie();break;case 13:kh(x);break;case 19:M(ii);break;case 10:bc(x.type);break;case 22:case 23:kh(x),dn(),f!==null&&M(F);break;case 24:bc(Is)}}function Rg(f,x){try{var j=x.updateQueue,_=j!==null?j.lastEffect:null;if(_!==null){var R=_.next;j=R;do{if((j.tag&f)===f){_=void 0;var V=j.create,fe=j.inst;_=V(),fe.destroy=_}j=j.next}while(j!==R)}}catch(_e){_a(x,x.return,_e)}}function Zf(f,x,j){try{var _=x.updateQueue,R=_!==null?_.lastEffect:null;if(R!==null){var V=R.next;_=V;do{if((_.tag&f)===f){var fe=_.inst,_e=fe.destroy;if(_e!==void 0){fe.destroy=void 0,R=x;var Ze=j,Et=_e;try{Et()}catch(Vt){_a(R,Ze,Vt)}}}_=_.next}while(_!==V)}}catch(Vt){_a(x,x.return,Vt)}}function oP(f){var x=f.updateQueue;if(x!==null){var j=f.stateNode;try{Kn(x,j)}catch(_){_a(f,f.return,_)}}}function lP(f,x,j){j.props=Ep(f.type,f.memoizedProps),j.state=f.memoizedState;try{j.componentWillUnmount()}catch(_){_a(f,x,_)}}function Fg(f,x){try{var j=f.ref;if(j!==null){switch(f.tag){case 26:case 27:case 5:var _=f.stateNode;break;case 30:_=f.stateNode;break;default:_=f.stateNode}typeof j=="function"?f.refCleanup=j(_):j.current=_}}catch(R){_a(f,x,R)}}function fu(f,x){var j=f.ref,_=f.refCleanup;if(j!==null)if(typeof _=="function")try{_()}catch(R){_a(f,x,R)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(R){_a(f,x,R)}else j.current=null}function cP(f){var x=f.type,j=f.memoizedProps,_=f.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":j.autoFocus&&_.focus();break e;case"img":j.src?_.src=j.src:j.srcSet&&(_.srcset=j.srcSet)}}catch(R){_a(f,f.return,R)}}function gC(f,x,j){try{var _=f.stateNode;kX(_,f.type,j,x),_[mr]=x}catch(R){_a(f,f.return,R)}}function dP(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&om(f.type)||f.tag===4}function bC(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||dP(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&om(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function yC(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?(j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j).insertBefore(f,x):(x=j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j,x.appendChild(f),j=j._reactRootContainer,j!=null||x.onclick!==null||(x.onclick=oj));else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode,x=null),f=f.child,f!==null))for(yC(f,x,j),f=f.sibling;f!==null;)yC(f,x,j),f=f.sibling}function X1(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?j.insertBefore(f,x):j.appendChild(f);else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode),f=f.child,f!==null))for(X1(f,x,j),f=f.sibling;f!==null;)X1(f,x,j),f=f.sibling}function uP(f){var x=f.stateNode,j=f.memoizedProps;try{for(var _=f.type,R=x.attributes;R.length;)x.removeAttributeNode(R[0]);$i(x,_,j),x[tr]=f,x[mr]=j}catch(V){_a(f,f.return,V)}}var Dh=!1,Os=!1,jC=!1,hP=typeof WeakSet=="function"?WeakSet:Set,yi=null;function iX(f,x){if(f=f.containerInfo,HC=mj,f=Ri(f),si(f)){if("selectionStart"in f)var j={start:f.selectionStart,end:f.selectionEnd};else e:{j=(j=f.ownerDocument)&&j.defaultView||window;var _=j.getSelection&&j.getSelection();if(_&&_.rangeCount!==0){j=_.anchorNode;var R=_.anchorOffset,V=_.focusNode;_=_.focusOffset;try{j.nodeType,V.nodeType}catch{j=null;break e}var fe=0,_e=-1,Ze=-1,Et=0,Vt=0,Zt=f,Dt=null;t:for(;;){for(var It;Zt!==j||R!==0&&Zt.nodeType!==3||(_e=fe+R),Zt!==V||_!==0&&Zt.nodeType!==3||(Ze=fe+_),Zt.nodeType===3&&(fe+=Zt.nodeValue.length),(It=Zt.firstChild)!==null;)Dt=Zt,Zt=It;for(;;){if(Zt===f)break t;if(Dt===j&&++Et===R&&(_e=fe),Dt===V&&++Vt===_&&(Ze=fe),(It=Zt.nextSibling)!==null)break;Zt=Dt,Dt=Zt.parentNode}Zt=It}j=_e===-1||Ze===-1?null:{start:_e,end:Ze}}else j=null}j=j||{start:0,end:0}}else j=null;for(WC={focusedElem:f,selectionRange:j},mj=!1,yi=x;yi!==null;)if(x=yi,f=x.child,(x.subtreeFlags&1024)!==0&&f!==null)f.return=x,yi=f;else for(;yi!==null;){switch(x=yi,V=x.alternate,f=x.flags,x.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&V!==null){f=void 0,j=x,R=V.memoizedProps,V=V.memoizedState,_=j.stateNode;try{var sn=Ep(j.type,R,j.elementType===j.type);f=_.getSnapshotBeforeUpdate(sn,V),_.__reactInternalSnapshotBeforeUpdate=f}catch(Xr){_a(j,j.return,Xr)}}break;case 3:if((f&1024)!==0){if(f=x.stateNode.containerInfo,j=f.nodeType,j===9)KC(f);else if(j===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":KC(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=x.sibling,f!==null){f.return=x.return,yi=f;break}yi=x.return}}function fP(f,x,j){var _=j.flags;switch(j.tag){case 0:case 11:case 15:em(f,j),_&4&&Rg(5,j);break;case 1:if(em(f,j),_&4)if(f=j.stateNode,x===null)try{f.componentDidMount()}catch(fe){_a(j,j.return,fe)}else{var R=Ep(j.type,x.memoizedProps);x=x.memoizedState;try{f.componentDidUpdate(R,x,f.__reactInternalSnapshotBeforeUpdate)}catch(fe){_a(j,j.return,fe)}}_&64&&oP(j),_&512&&Fg(j,j.return);break;case 3:if(em(f,j),_&64&&(f=j.updateQueue,f!==null)){if(x=null,j.child!==null)switch(j.child.tag){case 27:case 5:x=j.child.stateNode;break;case 1:x=j.child.stateNode}try{Kn(f,x)}catch(fe){_a(j,j.return,fe)}}break;case 27:x===null&&_&4&&uP(j);case 26:case 5:em(f,j),x===null&&_&4&&cP(j),_&512&&Fg(j,j.return);break;case 12:em(f,j);break;case 13:em(f,j),_&4&&xP(f,j),_&64&&(f=j.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(j=pX.bind(null,j),PX(f,j))));break;case 22:if(_=j.memoizedState!==null||Dh,!_){x=x!==null&&x.memoizedState!==null||Os,R=Dh;var V=Os;Dh=_,(Os=x)&&!V?tm(f,j,(j.subtreeFlags&8772)!==0):em(f,j),Dh=R,Os=V}break;case 30:break;default:em(f,j)}}function mP(f){var x=f.alternate;x!==null&&(f.alternate=null,mP(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&Ee(x)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ya=null,nl=!1;function Ah(f,x,j){for(j=j.child;j!==null;)pP(f,x,j),j=j.sibling}function pP(f,x,j){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Tt,j)}catch{}switch(j.tag){case 26:Os||fu(j,x),Ah(f,x,j),j.memoizedState?j.memoizedState.count--:j.stateNode&&(j=j.stateNode,j.parentNode.removeChild(j));break;case 27:Os||fu(j,x);var _=Ya,R=nl;om(j.type)&&(Ya=j.stateNode,nl=!1),Ah(f,x,j),Wg(j.stateNode),Ya=_,nl=R;break;case 5:Os||fu(j,x);case 6:if(_=Ya,R=nl,Ya=null,Ah(f,x,j),Ya=_,nl=R,Ya!==null)if(nl)try{(Ya.nodeType===9?Ya.body:Ya.nodeName==="HTML"?Ya.ownerDocument.body:Ya).removeChild(j.stateNode)}catch(V){_a(j,x,V)}else try{Ya.removeChild(j.stateNode)}catch(V){_a(j,x,V)}break;case 18:Ya!==null&&(nl?(f=Ya,nO(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,j.stateNode),eb(f)):nO(Ya,j.stateNode));break;case 4:_=Ya,R=nl,Ya=j.stateNode.containerInfo,nl=!0,Ah(f,x,j),Ya=_,nl=R;break;case 0:case 11:case 14:case 15:Os||Zf(2,j,x),Os||Zf(4,j,x),Ah(f,x,j);break;case 1:Os||(fu(j,x),_=j.stateNode,typeof _.componentWillUnmount=="function"&&lP(j,x,_)),Ah(f,x,j);break;case 21:Ah(f,x,j);break;case 22:Os=(_=Os)||j.memoizedState!==null,Ah(f,x,j),Os=_;break;default:Ah(f,x,j)}}function xP(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{eb(f)}catch(j){_a(x,x.return,j)}}function oX(f){switch(f.tag){case 13:case 19:var x=f.stateNode;return x===null&&(x=f.stateNode=new hP),x;case 22:return f=f.stateNode,x=f._retryCache,x===null&&(x=f._retryCache=new hP),x;default:throw Error(n(435,f.tag))}}function NC(f,x){var j=oX(f);x.forEach(function(_){var R=xX.bind(null,f,_);j.has(_)||(j.add(_),_.then(R,R))})}function Il(f,x){var j=x.deletions;if(j!==null)for(var _=0;_<j.length;_++){var R=j[_],V=f,fe=x,_e=fe;e:for(;_e!==null;){switch(_e.tag){case 27:if(om(_e.type)){Ya=_e.stateNode,nl=!1;break e}break;case 5:Ya=_e.stateNode,nl=!1;break e;case 3:case 4:Ya=_e.stateNode.containerInfo,nl=!0;break e}_e=_e.return}if(Ya===null)throw Error(n(160));pP(V,fe,R),Ya=null,nl=!1,V=R.alternate,V!==null&&(V.return=null),R.return=null}if(x.subtreeFlags&13878)for(x=x.child;x!==null;)vP(x,f),x=x.sibling}var bd=null;function vP(f,x){var j=f.alternate,_=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Il(x,f),Pl(f),_&4&&(Zf(3,f,f.return),Rg(3,f),Zf(5,f,f.return));break;case 1:Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),_&64&&Dh&&(f=f.updateQueue,f!==null&&(_=f.callbacks,_!==null&&(j=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=j===null?_:j.concat(_))));break;case 26:var R=bd;if(Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),_&4){var V=j!==null?j.memoizedState:null;if(_=f.memoizedState,j===null)if(_===null)if(f.stateNode===null){e:{_=f.type,j=f.memoizedProps,R=R.ownerDocument||R;t:switch(_){case"title":V=R.getElementsByTagName("title")[0],(!V||V[Pe]||V[tr]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=R.createElement(_),R.head.insertBefore(V,R.querySelector("head > title"))),$i(V,_,j),V[tr]=f,at(V),_=V;break e;case"link":var fe=uO("link","href",R).get(_+(j.href||""));if(fe){for(var _e=0;_e<fe.length;_e++)if(V=fe[_e],V.getAttribute("href")===(j.href==null||j.href===""?null:j.href)&&V.getAttribute("rel")===(j.rel==null?null:j.rel)&&V.getAttribute("title")===(j.title==null?null:j.title)&&V.getAttribute("crossorigin")===(j.crossOrigin==null?null:j.crossOrigin)){fe.splice(_e,1);break t}}V=R.createElement(_),$i(V,_,j),R.head.appendChild(V);break;case"meta":if(fe=uO("meta","content",R).get(_+(j.content||""))){for(_e=0;_e<fe.length;_e++)if(V=fe[_e],V.getAttribute("content")===(j.content==null?null:""+j.content)&&V.getAttribute("name")===(j.name==null?null:j.name)&&V.getAttribute("property")===(j.property==null?null:j.property)&&V.getAttribute("http-equiv")===(j.httpEquiv==null?null:j.httpEquiv)&&V.getAttribute("charset")===(j.charSet==null?null:j.charSet)){fe.splice(_e,1);break t}}V=R.createElement(_),$i(V,_,j),R.head.appendChild(V);break;default:throw Error(n(468,_))}V[tr]=f,at(V),_=V}f.stateNode=_}else hO(R,f.type,f.stateNode);else f.stateNode=dO(R,_,f.memoizedProps);else V!==_?(V===null?j.stateNode!==null&&(j=j.stateNode,j.parentNode.removeChild(j)):V.count--,_===null?hO(R,f.type,f.stateNode):dO(R,_,f.memoizedProps)):_===null&&f.stateNode!==null&&gC(f,f.memoizedProps,j.memoizedProps)}break;case 27:Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),j!==null&&_&4&&gC(f,f.memoizedProps,j.memoizedProps);break;case 5:if(Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),f.flags&32){R=f.stateNode;try{_s(R,"")}catch(It){_a(f,f.return,It)}}_&4&&f.stateNode!=null&&(R=f.memoizedProps,gC(f,R,j!==null?j.memoizedProps:R)),_&1024&&(jC=!0);break;case 6:if(Il(x,f),Pl(f),_&4){if(f.stateNode===null)throw Error(n(162));_=f.memoizedProps,j=f.stateNode;try{j.nodeValue=_}catch(It){_a(f,f.return,It)}}break;case 3:if(uj=null,R=bd,bd=cj(x.containerInfo),Il(x,f),bd=R,Pl(f),_&4&&j!==null&&j.memoizedState.isDehydrated)try{eb(x.containerInfo)}catch(It){_a(f,f.return,It)}jC&&(jC=!1,gP(f));break;case 4:_=bd,bd=cj(f.stateNode.containerInfo),Il(x,f),Pl(f),bd=_;break;case 12:Il(x,f),Pl(f);break;case 13:Il(x,f),Pl(f),f.child.flags&8192&&f.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(EC=ye()),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 22:R=f.memoizedState!==null;var Ze=j!==null&&j.memoizedState!==null,Et=Dh,Vt=Os;if(Dh=Et||R,Os=Vt||Ze,Il(x,f),Os=Vt,Dh=Et,Pl(f),_&8192)e:for(x=f.stateNode,x._visibility=R?x._visibility&-2:x._visibility|1,R&&(j===null||Ze||Dh||Os||Dp(f)),j=null,x=f;;){if(x.tag===5||x.tag===26){if(j===null){Ze=j=x;try{if(V=Ze.stateNode,R)fe=V.style,typeof fe.setProperty=="function"?fe.setProperty("display","none","important"):fe.display="none";else{_e=Ze.stateNode;var Zt=Ze.memoizedProps.style,Dt=Zt!=null&&Zt.hasOwnProperty("display")?Zt.display:null;_e.style.display=Dt==null||typeof Dt=="boolean"?"":(""+Dt).trim()}}catch(It){_a(Ze,Ze.return,It)}}}else if(x.tag===6){if(j===null){Ze=x;try{Ze.stateNode.nodeValue=R?"":Ze.memoizedProps}catch(It){_a(Ze,Ze.return,It)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===f)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;j===x&&(j=null),x=x.return}j===x&&(j=null),x.sibling.return=x.return,x=x.sibling}_&4&&(_=f.updateQueue,_!==null&&(j=_.retryQueue,j!==null&&(_.retryQueue=null,NC(f,j))));break;case 19:Il(x,f),Pl(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 30:break;case 21:break;default:Il(x,f),Pl(f)}}function Pl(f){var x=f.flags;if(x&2){try{for(var j,_=f.return;_!==null;){if(dP(_)){j=_;break}_=_.return}if(j==null)throw Error(n(160));switch(j.tag){case 27:var R=j.stateNode,V=bC(f);X1(f,V,R);break;case 5:var fe=j.stateNode;j.flags&32&&(_s(fe,""),j.flags&=-33);var _e=bC(f);X1(f,_e,fe);break;case 3:case 4:var Ze=j.stateNode.containerInfo,Et=bC(f);yC(f,Et,Ze);break;default:throw Error(n(161))}}catch(Vt){_a(f,f.return,Vt)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function gP(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var x=f;gP(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),f=f.sibling}}function em(f,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)fP(f,x.alternate,x),x=x.sibling}function Dp(f){for(f=f.child;f!==null;){var x=f;switch(x.tag){case 0:case 11:case 14:case 15:Zf(4,x,x.return),Dp(x);break;case 1:fu(x,x.return);var j=x.stateNode;typeof j.componentWillUnmount=="function"&&lP(x,x.return,j),Dp(x);break;case 27:Wg(x.stateNode);case 26:case 5:fu(x,x.return),Dp(x);break;case 22:x.memoizedState===null&&Dp(x);break;case 30:Dp(x);break;default:Dp(x)}f=f.sibling}}function tm(f,x,j){for(j=j&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var _=x.alternate,R=f,V=x,fe=V.flags;switch(V.tag){case 0:case 11:case 15:tm(R,V,j),Rg(4,V);break;case 1:if(tm(R,V,j),_=V,R=_.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Et){_a(_,_.return,Et)}if(_=V,R=_.updateQueue,R!==null){var _e=_.stateNode;try{var Ze=R.shared.hiddenCallbacks;if(Ze!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ze.length;R++)Ln(Ze[R],_e)}catch(Et){_a(_,_.return,Et)}}j&&fe&64&&oP(V),Fg(V,V.return);break;case 27:uP(V);case 26:case 5:tm(R,V,j),j&&_===null&&fe&4&&cP(V),Fg(V,V.return);break;case 12:tm(R,V,j);break;case 13:tm(R,V,j),j&&fe&4&&xP(R,V);break;case 22:V.memoizedState===null&&tm(R,V,j),Fg(V,V.return);break;case 30:break;default:tm(R,V,j)}x=x.sibling}}function wC(f,x){var j=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),f=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(f=x.memoizedState.cachePool.pool),f!==j&&(f!=null&&f.refCount++,j!=null&&xp(j))}function SC(f,x){f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f))}function mu(f,x,j,_){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)bP(f,x,j,_),x=x.sibling}function bP(f,x,j,_){var R=x.flags;switch(x.tag){case 0:case 11:case 15:mu(f,x,j,_),R&2048&&Rg(9,x);break;case 1:mu(f,x,j,_);break;case 3:mu(f,x,j,_),R&2048&&(f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f)));break;case 12:if(R&2048){mu(f,x,j,_),f=x.stateNode;try{var V=x.memoizedProps,fe=V.id,_e=V.onPostCommit;typeof _e=="function"&&_e(fe,x.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ze){_a(x,x.return,Ze)}}else mu(f,x,j,_);break;case 13:mu(f,x,j,_);break;case 23:break;case 22:V=x.stateNode,fe=x.alternate,x.memoizedState!==null?V._visibility&2?mu(f,x,j,_):Lg(f,x):V._visibility&2?mu(f,x,j,_):(V._visibility|=2,m0(f,x,j,_,(x.subtreeFlags&10256)!==0)),R&2048&&wC(fe,x);break;case 24:mu(f,x,j,_),R&2048&&SC(x.alternate,x);break;default:mu(f,x,j,_)}}function m0(f,x,j,_,R){for(R=R&&(x.subtreeFlags&10256)!==0,x=x.child;x!==null;){var V=f,fe=x,_e=j,Ze=_,Et=fe.flags;switch(fe.tag){case 0:case 11:case 15:m0(V,fe,_e,Ze,R),Rg(8,fe);break;case 23:break;case 22:var Vt=fe.stateNode;fe.memoizedState!==null?Vt._visibility&2?m0(V,fe,_e,Ze,R):Lg(V,fe):(Vt._visibility|=2,m0(V,fe,_e,Ze,R)),R&&Et&2048&&wC(fe.alternate,fe);break;case 24:m0(V,fe,_e,Ze,R),R&&Et&2048&&SC(fe.alternate,fe);break;default:m0(V,fe,_e,Ze,R)}x=x.sibling}}function Lg(f,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var j=f,_=x,R=_.flags;switch(_.tag){case 22:Lg(j,_),R&2048&&wC(_.alternate,_);break;case 24:Lg(j,_),R&2048&&SC(_.alternate,_);break;default:Lg(j,_)}x=x.sibling}}var Bg=8192;function p0(f){if(f.subtreeFlags&Bg)for(f=f.child;f!==null;)yP(f),f=f.sibling}function yP(f){switch(f.tag){case 26:p0(f),f.flags&Bg&&f.memoizedState!==null&&WX(bd,f.memoizedState,f.memoizedProps);break;case 5:p0(f);break;case 3:case 4:var x=bd;bd=cj(f.stateNode.containerInfo),p0(f),bd=x;break;case 22:f.memoizedState===null&&(x=f.alternate,x!==null&&x.memoizedState!==null?(x=Bg,Bg=16777216,p0(f),Bg=x):p0(f));break;default:p0(f)}}function jP(f){var x=f.alternate;if(x!==null&&(f=x.child,f!==null)){x.child=null;do x=f.sibling,f.sibling=null,f=x;while(f!==null)}}function Ug(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];yi=_,wP(_,f)}jP(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)NP(f),f=f.sibling}function NP(f){switch(f.tag){case 0:case 11:case 15:Ug(f),f.flags&2048&&Zf(9,f,f.return);break;case 3:Ug(f);break;case 12:Ug(f);break;case 22:var x=f.stateNode;f.memoizedState!==null&&x._visibility&2&&(f.return===null||f.return.tag!==13)?(x._visibility&=-3,Q1(f)):Ug(f);break;default:Ug(f)}}function Q1(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];yi=_,wP(_,f)}jP(f)}for(f=f.child;f!==null;){switch(x=f,x.tag){case 0:case 11:case 15:Zf(8,x,x.return),Q1(x);break;case 22:j=x.stateNode,j._visibility&2&&(j._visibility&=-3,Q1(x));break;default:Q1(x)}f=f.sibling}}function wP(f,x){for(;yi!==null;){var j=yi;switch(j.tag){case 0:case 11:case 15:Zf(8,j,x);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var _=j.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:xp(j.memoizedState.cache)}if(_=j.child,_!==null)_.return=j,yi=_;else e:for(j=f;yi!==null;){_=yi;var R=_.sibling,V=_.return;if(mP(_),_===j){yi=null;break e}if(R!==null){R.return=V,yi=R;break e}yi=V}}}var lX={getCacheForType:function(f){var x=Ts(Is),j=x.data.get(f);return j===void 0&&(j=f(),x.data.set(f,j)),j}},cX=typeof WeakMap=="function"?WeakMap:Map,fa=0,Pa=null,On=null,Un=0,ma=0,Ol=null,rm=!1,x0=!1,CC=!1,Th=0,gs=0,nm=0,Ap=0,kC=0,wc=0,v0=0,$g=null,al=null,_C=!1,EC=0,J1=1/0,Z1=null,am=null,Ui=0,sm=null,g0=null,b0=0,DC=0,AC=null,SP=null,qg=0,TC=null;function Ml(){if((fa&2)!==0&&Un!==0)return Un&-Un;if(U.T!==null){var f=jh;return f!==0?f:LC()}return bt()}function CP(){wc===0&&(wc=(Un&536870912)===0||zn?ft():536870912);var f=Nc.current;return f!==null&&(f.flags|=32),wc}function Rl(f,x,j){(f===Pa&&(ma===2||ma===9)||f.cancelPendingCommit!==null)&&(y0(f,0),im(f,Un,wc,!1)),Ge(f,j),((fa&2)===0||f!==Pa)&&(f===Pa&&((fa&2)===0&&(Ap|=j),gs===4&&im(f,Un,wc,!1)),pu(f))}function kP(f,x,j){if((fa&6)!==0)throw Error(n(327));var _=!j&&(x&124)===0&&(x&f.expiredLanes)===0||Be(f,x),R=_?hX(f,x):OC(f,x,!0),V=_;do{if(R===0){x0&&!_&&im(f,x,0,!1);break}else{if(j=f.current.alternate,V&&!dX(j)){R=OC(f,x,!1),V=!1;continue}if(R===2){if(V=x,f.errorRecoveryDisabledLanes&V)var fe=0;else fe=f.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){x=fe;e:{var _e=f;R=$g;var Ze=_e.current.memoizedState.isDehydrated;if(Ze&&(y0(_e,fe).flags|=256),fe=OC(_e,fe,!1),fe!==2){if(CC&&!Ze){_e.errorRecoveryDisabledLanes|=V,Ap|=V,R=4;break e}V=al,al=R,V!==null&&(al===null?al=V:al.push.apply(al,V))}R=fe}if(V=!1,R!==2)continue}}if(R===1){y0(f,0),im(f,x,0,!0);break}e:{switch(_=f,V=R,V){case 0:case 1:throw Error(n(345));case 4:if((x&4194048)!==x)break;case 6:im(_,x,wc,!rm);break e;case 2:al=null;break;case 3:case 5:break;default:throw Error(n(329))}if((x&62914560)===x&&(R=EC+300-ye(),10<R)){if(im(_,x,wc,!rm),Xe(_,0,!0)!==0)break e;_.timeoutHandle=tO(_P.bind(null,_,j,al,Z1,_C,x,wc,Ap,v0,rm,V,2,-0,0),R);break e}_P(_,j,al,Z1,_C,x,wc,Ap,v0,rm,V,0,-0,0)}}break}while(!0);pu(f)}function _P(f,x,j,_,R,V,fe,_e,Ze,Et,Vt,Zt,Dt,It){if(f.timeoutHandle=-1,Zt=x.subtreeFlags,(Zt&8192||(Zt&16785408)===16785408)&&(Kg={stylesheets:null,count:0,unsuspend:HX},yP(x),Zt=GX(),Zt!==null)){f.cancelPendingCommit=Zt(OP.bind(null,f,x,V,j,_,R,fe,_e,Ze,Vt,1,Dt,It)),im(f,V,fe,!Et);return}OP(f,x,V,j,_,R,fe,_e,Ze)}function dX(f){for(var x=f;;){var j=x.tag;if((j===0||j===11||j===15)&&x.flags&16384&&(j=x.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var _=0;_<j.length;_++){var R=j[_],V=R.getSnapshot;R=R.value;try{if(!Ws(V(),R))return!1}catch{return!1}}if(j=x.child,x.subtreeFlags&16384&&j!==null)j.return=x,x=j;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function im(f,x,j,_){x&=~kC,x&=~Ap,f.suspendedLanes|=x,f.pingedLanes&=~x,_&&(f.warmLanes|=x),_=f.expirationTimes;for(var R=x;0<R;){var V=31-he(R),fe=1<<V;_[V]=-1,R&=~fe}j!==0&&Mt(f,j,x)}function ej(){return(fa&6)===0?(Vg(0),!1):!0}function IC(){if(On!==null){if(ma===0)var f=On.return;else f=On,fd=Ys=null,i0(f),h0=null,Pg=0,f=On;for(;f!==null;)iP(f.alternate,f),f=f.return;On=null}}function y0(f,x){var j=f.timeoutHandle;j!==-1&&(f.timeoutHandle=-1,EX(j)),j=f.cancelPendingCommit,j!==null&&(f.cancelPendingCommit=null,j()),IC(),Pa=f,On=j=xc(f.current,null),Un=x,ma=0,Ol=null,rm=!1,x0=Be(f,x),CC=!1,v0=wc=kC=Ap=nm=gs=0,al=$g=null,_C=!1,(x&8)!==0&&(x|=x&32);var _=f.entangledLanes;if(_!==0)for(f=f.entanglements,_&=x;0<_;){var R=31-he(_),V=1<<R;x|=f[R],_&=~V}return Th=x,Zo(),j}function EP(f,x){Wr=null,U.H=$1,x===je||x===Ce?(x=mt(),ma=3):x===we?(x=mt(),ma=4):ma=x===WI?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,Ol=x,On===null&&(gs=1,W1(f,kn(x,f.current)))}function DP(){var f=U.H;return U.H=$1,f===null?$1:f}function AP(){var f=U.A;return U.A=lX,f}function PC(){gs=4,rm||(Un&4194048)!==Un&&Nc.current!==null||(x0=!0),(nm&134217727)===0&&(Ap&134217727)===0||Pa===null||im(Pa,Un,wc,!1)}function OC(f,x,j){var _=fa;fa|=2;var R=DP(),V=AP();(Pa!==f||Un!==x)&&(Z1=null,y0(f,x)),x=!1;var fe=gs;e:do try{if(ma!==0&&On!==null){var _e=On,Ze=Ol;switch(ma){case 8:IC(),fe=6;break e;case 3:case 2:case 9:case 6:Nc.current===null&&(x=!0);var Et=ma;if(ma=0,Ol=null,j0(f,_e,Ze,Et),j&&x0){fe=0;break e}break;default:Et=ma,ma=0,Ol=null,j0(f,_e,Ze,Et)}}uX(),fe=gs;break}catch(Vt){EP(f,Vt)}while(!0);return x&&f.shellSuspendCounter++,fd=Ys=null,fa=_,U.H=R,U.A=V,On===null&&(Pa=null,Un=0,Zo()),fe}function uX(){for(;On!==null;)TP(On)}function hX(f,x){var j=fa;fa|=2;var _=DP(),R=AP();Pa!==f||Un!==x?(Z1=null,J1=ye()+500,y0(f,x)):x0=Be(f,x);e:do try{if(ma!==0&&On!==null){x=On;var V=Ol;t:switch(ma){case 1:ma=0,Ol=null,j0(f,x,V,1);break;case 2:case 9:if($e(V)){ma=0,Ol=null,IP(x);break}x=function(){ma!==2&&ma!==9||Pa!==f||(ma=7),pu(f)},V.then(x,x);break e;case 3:ma=7;break e;case 4:ma=5;break e;case 7:$e(V)?(ma=0,Ol=null,IP(x)):(ma=0,Ol=null,j0(f,x,V,7));break;case 5:var fe=null;switch(On.tag){case 26:fe=On.memoizedState;case 5:case 27:var _e=On;if(!fe||fO(fe)){ma=0,Ol=null;var Ze=_e.sibling;if(Ze!==null)On=Ze;else{var Et=_e.return;Et!==null?(On=Et,tj(Et)):On=null}break t}}ma=0,Ol=null,j0(f,x,V,5);break;case 6:ma=0,Ol=null,j0(f,x,V,6);break;case 8:IC(),gs=6;break e;default:throw Error(n(462))}}fX();break}catch(Vt){EP(f,Vt)}while(!0);return fd=Ys=null,U.H=_,U.A=R,fa=j,On!==null?0:(Pa=null,Un=0,Zo(),gs)}function fX(){for(;On!==null&&!ue();)TP(On)}function TP(f){var x=aP(f.alternate,f,Th);f.memoizedProps=f.pendingProps,x===null?tj(f):On=x}function IP(f){var x=f,j=x.alternate;switch(x.tag){case 15:case 0:x=JI(j,x,x.pendingProps,x.type,void 0,Un);break;case 11:x=JI(j,x,x.pendingProps,x.type.render,x.ref,Un);break;case 5:i0(x);default:iP(j,x),x=On=hp(x,Th),x=aP(j,x,Th)}f.memoizedProps=f.pendingProps,x===null?tj(f):On=x}function j0(f,x,j,_){fd=Ys=null,i0(x),h0=null,Pg=0;var R=x.return;try{if(rX(f,R,x,j,Un)){gs=1,W1(f,kn(j,f.current)),On=null;return}}catch(V){if(R!==null)throw On=R,V;gs=1,W1(f,kn(j,f.current)),On=null;return}x.flags&32768?(zn||_===1?f=!0:x0||(Un&536870912)!==0?f=!1:(rm=f=!0,(_===2||_===9||_===3||_===6)&&(_=Nc.current,_!==null&&_.tag===13&&(_.flags|=16384))),PP(x,f)):tj(x)}function tj(f){var x=f;do{if((x.flags&32768)!==0){PP(x,rm);return}f=x.return;var j=aX(x.alternate,x,Th);if(j!==null){On=j;return}if(x=x.sibling,x!==null){On=x;return}On=x=f}while(x!==null);gs===0&&(gs=5)}function PP(f,x){do{var j=sX(f.alternate,f);if(j!==null){j.flags&=32767,On=j;return}if(j=f.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!x&&(f=f.sibling,f!==null)){On=f;return}On=f=j}while(f!==null);gs=6,On=null}function OP(f,x,j,_,R,V,fe,_e,Ze){f.cancelPendingCommit=null;do rj();while(Ui!==0);if((fa&6)!==0)throw Error(n(327));if(x!==null){if(x===f.current)throw Error(n(177));if(V=x.lanes|x.childLanes,V|=ns,ct(f,j,V,fe,_e,Ze),f===Pa&&(On=Pa=null,Un=0),g0=x,sm=f,b0=j,DC=V,AC=R,SP=_,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,vX(lt,function(){return BP(),null})):(f.callbackNode=null,f.callbackPriority=0),_=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||_){_=U.T,U.T=null,R=Q.p,Q.p=2,fe=fa,fa|=4;try{iX(f,x,j)}finally{fa=fe,Q.p=R,U.T=_}}Ui=1,MP(),RP(),FP()}}function MP(){if(Ui===1){Ui=0;var f=sm,x=g0,j=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||j){j=U.T,U.T=null;var _=Q.p;Q.p=2;var R=fa;fa|=4;try{vP(x,f);var V=WC,fe=Ri(f.containerInfo),_e=V.focusedElem,Ze=V.selectionRange;if(fe!==_e&&_e&&_e.ownerDocument&&Xd(_e.ownerDocument.documentElement,_e)){if(Ze!==null&&si(_e)){var Et=Ze.start,Vt=Ze.end;if(Vt===void 0&&(Vt=Et),"selectionStart"in _e)_e.selectionStart=Et,_e.selectionEnd=Math.min(Vt,_e.value.length);else{var Zt=_e.ownerDocument||document,Dt=Zt&&Zt.defaultView||window;if(Dt.getSelection){var It=Dt.getSelection(),sn=_e.textContent.length,Xr=Math.min(Ze.start,sn),wa=Ze.end===void 0?Xr:Math.min(Ze.end,sn);!It.extend&&Xr>wa&&(fe=wa,wa=Xr,Xr=fe);var pt=sd(_e,Xr),ot=sd(_e,wa);if(pt&&ot&&(It.rangeCount!==1||It.anchorNode!==pt.node||It.anchorOffset!==pt.offset||It.focusNode!==ot.node||It.focusOffset!==ot.offset)){var kt=Zt.createRange();kt.setStart(pt.node,pt.offset),It.removeAllRanges(),Xr>wa?(It.addRange(kt),It.extend(ot.node,ot.offset)):(kt.setEnd(ot.node,ot.offset),It.addRange(kt))}}}}for(Zt=[],It=_e;It=It.parentNode;)It.nodeType===1&&Zt.push({element:It,left:It.scrollLeft,top:It.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Zt.length;_e++){var Yt=Zt[_e];Yt.element.scrollLeft=Yt.left,Yt.element.scrollTop=Yt.top}}mj=!!HC,WC=HC=null}finally{fa=R,Q.p=_,U.T=j}}f.current=x,Ui=2}}function RP(){if(Ui===2){Ui=0;var f=sm,x=g0,j=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||j){j=U.T,U.T=null;var _=Q.p;Q.p=2;var R=fa;fa|=4;try{fP(f,x.alternate,x)}finally{fa=R,Q.p=_,U.T=j}}Ui=3}}function FP(){if(Ui===4||Ui===3){Ui=0,se();var f=sm,x=g0,j=b0,_=SP;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Ui=5:(Ui=0,g0=sm=null,LP(f,f.pendingLanes));var R=f.pendingLanes;if(R===0&&(am=null),it(j),x=x.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Tt,x,void 0,(x.current.flags&128)===128)}catch{}if(_!==null){x=U.T,R=Q.p,Q.p=2,U.T=null;try{for(var V=f.onRecoverableError,fe=0;fe<_.length;fe++){var _e=_[fe];V(_e.value,{componentStack:_e.stack})}}finally{U.T=x,Q.p=R}}(b0&3)!==0&&rj(),pu(f),R=f.pendingLanes,(j&4194090)!==0&&(R&42)!==0?f===TC?qg++:(qg=0,TC=f):qg=0,Vg(0)}}function LP(f,x){(f.pooledCacheLanes&=x)===0&&(x=f.pooledCache,x!=null&&(f.pooledCache=null,xp(x)))}function rj(f){return MP(),RP(),FP(),BP()}function BP(){if(Ui!==5)return!1;var f=sm,x=DC;DC=0;var j=it(b0),_=U.T,R=Q.p;try{Q.p=32>j?32:j,U.T=null,j=AC,AC=null;var V=sm,fe=b0;if(Ui=0,g0=sm=null,b0=0,(fa&6)!==0)throw Error(n(331));var _e=fa;if(fa|=4,NP(V.current),bP(V,V.current,fe,j),fa=_e,Vg(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Tt,V)}catch{}return!0}finally{Q.p=R,U.T=_,LP(f,x)}}function UP(f,x,j){x=kn(j,x),x=cC(f.stateNode,x,2),f=Jt(f,x,2),f!==null&&(Ge(f,2),pu(f))}function _a(f,x,j){if(f.tag===3)UP(f,f,j);else for(;x!==null;){if(x.tag===3){UP(x,f,j);break}else if(x.tag===1){var _=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(am===null||!am.has(_))){f=kn(j,f),j=zI(2),_=Jt(x,j,2),_!==null&&(HI(j,_,x,f),Ge(_,2),pu(_));break}}x=x.return}}function MC(f,x,j){var _=f.pingCache;if(_===null){_=f.pingCache=new cX;var R=new Set;_.set(x,R)}else R=_.get(x),R===void 0&&(R=new Set,_.set(x,R));R.has(j)||(CC=!0,R.add(j),f=mX.bind(null,f,x,j),x.then(f,f))}function mX(f,x,j){var _=f.pingCache;_!==null&&_.delete(x),f.pingedLanes|=f.suspendedLanes&j,f.warmLanes&=~j,Pa===f&&(Un&j)===j&&(gs===4||gs===3&&(Un&62914560)===Un&&300>ye()-EC?(fa&2)===0&&y0(f,0):kC|=j,v0===Un&&(v0=0)),pu(f)}function $P(f,x){x===0&&(x=Ae()),f=od(f,x),f!==null&&(Ge(f,x),pu(f))}function pX(f){var x=f.memoizedState,j=0;x!==null&&(j=x.retryLane),$P(f,j)}function xX(f,x){var j=0;switch(f.tag){case 13:var _=f.stateNode,R=f.memoizedState;R!==null&&(j=R.retryLane);break;case 19:_=f.stateNode;break;case 22:_=f.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(x),$P(f,j)}function vX(f,x){return oe(f,x)}var nj=null,N0=null,RC=!1,aj=!1,FC=!1,Tp=0;function pu(f){f!==N0&&f.next===null&&(N0===null?nj=N0=f:N0=N0.next=f),aj=!0,RC||(RC=!0,bX())}function Vg(f,x){if(!FC&&aj){FC=!0;do for(var j=!1,_=nj;_!==null;){if(f!==0){var R=_.pendingLanes;if(R===0)var V=0;else{var fe=_.suspendedLanes,_e=_.pingedLanes;V=(1<<31-he(42|f)+1)-1,V&=R&~(fe&~_e),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(j=!0,HP(_,V))}else V=Un,V=Xe(_,_===Pa?V:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(V&3)===0||Be(_,V)||(j=!0,HP(_,V));_=_.next}while(j);FC=!1}}function gX(){qP()}function qP(){aj=RC=!1;var f=0;Tp!==0&&(_X()&&(f=Tp),Tp=0);for(var x=ye(),j=null,_=nj;_!==null;){var R=_.next,V=VP(_,x);V===0?(_.next=null,j===null?nj=R:j.next=R,R===null&&(N0=j)):(j=_,(f!==0||(V&3)!==0)&&(aj=!0)),_=R}Vg(f)}function VP(f,x){for(var j=f.suspendedLanes,_=f.pingedLanes,R=f.expirationTimes,V=f.pendingLanes&-62914561;0<V;){var fe=31-he(V),_e=1<<fe,Ze=R[fe];Ze===-1?((_e&j)===0||(_e&_)!==0)&&(R[fe]=He(_e,x)):Ze<=x&&(f.expiredLanes|=_e),V&=~_e}if(x=Pa,j=Un,j=Xe(f,f===x?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_=f.callbackNode,j===0||f===x&&(ma===2||ma===9)||f.cancelPendingCommit!==null)return _!==null&&_!==null&&Se(_),f.callbackNode=null,f.callbackPriority=0;if((j&3)===0||Be(f,j)){if(x=j&-j,x===f.callbackPriority)return x;switch(_!==null&&Se(_),it(j)){case 2:case 8:j=Je;break;case 32:j=lt;break;case 268435456:j=Re;break;default:j=lt}return _=zP.bind(null,f),j=oe(j,_),f.callbackPriority=x,f.callbackNode=j,x}return _!==null&&_!==null&&Se(_),f.callbackPriority=2,f.callbackNode=null,2}function zP(f,x){if(Ui!==0&&Ui!==5)return f.callbackNode=null,f.callbackPriority=0,null;var j=f.callbackNode;if(rj()&&f.callbackNode!==j)return null;var _=Un;return _=Xe(f,f===Pa?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_===0?null:(kP(f,_,x),VP(f,ye()),f.callbackNode!=null&&f.callbackNode===j?zP.bind(null,f):null)}function HP(f,x){if(rj())return null;kP(f,x,!0)}function bX(){DX(function(){(fa&6)!==0?oe(Le,gX):qP()})}function LC(){return Tp===0&&(Tp=ft()),Tp}function WP(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Nl(""+f)}function GP(f,x){var j=x.ownerDocument.createElement("input");return j.name=x.name,j.value=x.value,f.id&&j.setAttribute("form",f.id),x.parentNode.insertBefore(j,x),f=new FormData(f),j.parentNode.removeChild(j),f}function yX(f,x,j,_,R){if(x==="submit"&&j&&j.stateNode===R){var V=WP((R[mr]||null).action),fe=_.submitter;fe&&(x=(x=fe[mr]||null)?WP(x.formAction):fe.getAttribute("formAction"),x!==null&&(V=x,fe=null));var _e=new hc("action","action",null,_,R);f.push({event:_e,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Tp!==0){var Ze=fe?GP(R,fe):new FormData(R);jc(j,{pending:!0,data:Ze,method:R.method,action:V},null,Ze)}}else typeof V=="function"&&(_e.preventDefault(),Ze=fe?GP(R,fe):new FormData(R),jc(j,{pending:!0,data:Ze,method:R.method,action:V},V,Ze))},currentTarget:R}]})}}for(var BC=0;BC<ph.length;BC++){var UC=ph[BC],jX=UC.toLowerCase(),NX=UC[0].toUpperCase()+UC.slice(1);Wa(jX,"on"+NX)}Wa(Uf,"onAnimationEnd"),Wa(Jd,"onAnimationIteration"),Wa(Zd,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(eu,"onTransitionRun"),Wa(mh,"onTransitionStart"),Wa($f,"onTransitionCancel"),Wa(tu,"onTransitionEnd"),ar("onMouseEnter",["mouseout","mouseover"]),ar("onMouseLeave",["mouseout","mouseover"]),ar("onPointerEnter",["pointerout","pointerover"]),ar("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zg));function YP(f,x){x=(x&4)!==0;for(var j=0;j<f.length;j++){var _=f[j],R=_.event;_=_.listeners;e:{var V=void 0;if(x)for(var fe=_.length-1;0<=fe;fe--){var _e=_[fe],Ze=_e.instance,Et=_e.currentTarget;if(_e=_e.listener,Ze!==V&&R.isPropagationStopped())break e;V=_e,R.currentTarget=Et;try{V(R)}catch(Vt){H1(Vt)}R.currentTarget=null,V=Ze}else for(fe=0;fe<_.length;fe++){if(_e=_[fe],Ze=_e.instance,Et=_e.currentTarget,_e=_e.listener,Ze!==V&&R.isPropagationStopped())break e;V=_e,R.currentTarget=Et;try{V(R)}catch(Vt){H1(Vt)}R.currentTarget=null,V=Ze}}}}function Mn(f,x){var j=x[fn];j===void 0&&(j=x[fn]=new Set);var _=f+"__bubble";j.has(_)||(KP(x,f,2,!1),j.add(_))}function $C(f,x,j){var _=0;x&&(_|=4),KP(j,f,_,x)}var sj="_reactListening"+Math.random().toString(36).slice(2);function qC(f){if(!f[sj]){f[sj]=!0,Nt.forEach(function(j){j!=="selectionchange"&&(wX.has(j)||$C(j,!1,f),$C(j,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[sj]||(x[sj]=!0,$C("selectionchange",!1,x))}}function KP(f,x,j,_){switch(bO(x)){case 2:var R=XX;break;case 8:R=QX;break;default:R=rk}j=R.bind(null,x,j,f),R=void 0,!er||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(R=!0),_?R!==void 0?f.addEventListener(x,j,{capture:!0,passive:R}):f.addEventListener(x,j,!0):R!==void 0?f.addEventListener(x,j,{passive:R}):f.addEventListener(x,j,!1)}function VC(f,x,j,_,R){var V=_;if((x&1)===0&&(x&2)===0&&_!==null)e:for(;;){if(_===null)return;var fe=_.tag;if(fe===3||fe===4){var _e=_.stateNode.containerInfo;if(_e===R)break;if(fe===4)for(fe=_.return;fe!==null;){var Ze=fe.tag;if((Ze===3||Ze===4)&&fe.stateNode.containerInfo===R)return;fe=fe.return}for(;_e!==null;){if(fe=Fe(_e),fe===null)return;if(Ze=fe.tag,Ze===5||Ze===6||Ze===26||Ze===27){_=V=fe;continue e}_e=_e.parentNode}}_=_.return}_f(function(){var Et=V,Vt=ms(j),Zt=[];e:{var Dt=id.get(f);if(Dt!==void 0){var It=hc,sn=f;switch(f){case"keypress":if(uc(j)===0)break e;case"keydown":case"keyup":It=Mf;break;case"focusin":sn="focus",It=oh;break;case"focusout":sn="blur",It=oh;break;case"beforeblur":case"afterblur":It=oh;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=lp;break;case Uf:case Jd:case Zd:It=mg;break;case tu:It=be;break;case"scroll":case"scrollend":It=Df;break;case"wheel":It=tt;break;case"copy":case"cut":case"paste":It=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=Rf;break;case"toggle":case"beforetoggle":It=Bt}var Xr=(x&4)!==0,wa=!Xr&&(f==="scroll"||f==="scrollend"),pt=Xr?Dt!==null?Dt+"Capture":null:Dt;Xr=[];for(var ot=Et,kt;ot!==null;){var Yt=ot;if(kt=Yt.stateNode,Yt=Yt.tag,Yt!==5&&Yt!==26&&Yt!==27||kt===null||pt===null||(Yt=rt(ot,pt),Yt!=null&&Xr.push(Hg(ot,Yt,kt))),wa)break;ot=ot.return}0<Xr.length&&(Dt=new It(Dt,sn,null,j,Vt),Zt.push({event:Dt,listeners:Xr}))}}if((x&7)===0){e:{if(Dt=f==="mouseover"||f==="pointerover",It=f==="mouseout"||f==="pointerout",Dt&&j!==cc&&(sn=j.relatedTarget||j.fromElement)&&(Fe(sn)||sn[jr]))break e;if((It||Dt)&&(Dt=Vt.window===Vt?Vt:(Dt=Vt.ownerDocument)?Dt.defaultView||Dt.parentWindow:window,It?(sn=j.relatedTarget||j.toElement,It=Et,sn=sn?Fe(sn):null,sn!==null&&(wa=i(sn),Xr=sn.tag,sn!==wa||Xr!==5&&Xr!==27&&Xr!==6)&&(sn=null)):(It=null,sn=Et),It!==sn)){if(Xr=fc,Yt="onMouseLeave",pt="onMouseEnter",ot="mouse",(f==="pointerout"||f==="pointerover")&&(Xr=Rf,Yt="onPointerLeave",pt="onPointerEnter",ot="pointer"),wa=It==null?Dt:xt(It),kt=sn==null?Dt:xt(sn),Dt=new Xr(Yt,ot+"leave",It,j,Vt),Dt.target=wa,Dt.relatedTarget=kt,Yt=null,Fe(Vt)===Et&&(Xr=new Xr(pt,ot+"enter",sn,j,Vt),Xr.target=kt,Xr.relatedTarget=wa,Yt=Xr),wa=Yt,It&&sn)t:{for(Xr=It,pt=sn,ot=0,kt=Xr;kt;kt=w0(kt))ot++;for(kt=0,Yt=pt;Yt;Yt=w0(Yt))kt++;for(;0<ot-kt;)Xr=w0(Xr),ot--;for(;0<kt-ot;)pt=w0(pt),kt--;for(;ot--;){if(Xr===pt||pt!==null&&Xr===pt.alternate)break t;Xr=w0(Xr),pt=w0(pt)}Xr=null}else Xr=null;It!==null&&XP(Zt,Dt,It,Xr,!1),sn!==null&&wa!==null&&XP(Zt,wa,sn,Xr,!0)}}e:{if(Dt=Et?xt(Et):window,It=Dt.nodeName&&Dt.nodeName.toLowerCase(),It==="select"||It==="input"&&Dt.type==="file")var Dr=Lf;else if(kl(Dt))if(dh)Dr=Jx;else{Dr=vg;var An=to}else It=Dt.nodeName,!It||It.toLowerCase()!=="input"||Dt.type!=="checkbox"&&Dt.type!=="radio"?Et&&td(Et.elementType)&&(Dr=Lf):Dr=dp;if(Dr&&(Dr=Dr(f,Et))){cp(Zt,Dr,j,Vt);break e}An&&An(f,Dt,Et),f==="focusout"&&Et&&Dt.type==="number"&&Et.memoizedProps.value!=null&&Go(Dt,"number",Dt.value)}switch(An=Et?xt(Et):window,f){case"focusin":(kl(An)||An.contentEditable==="true")&&(ro=An,_l=Et,mc=null);break;case"focusout":mc=_l=ro=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Ha(Zt,j,Vt);break;case"selectionchange":if(Qd)break;case"keydown":case"keyup":Ha(Zt,j,Vt)}var Vr;if(Nr)e:{switch(f){case"compositionstart":var Jr="onCompositionStart";break e;case"compositionend":Jr="onCompositionEnd";break e;case"compositionupdate":Jr="onCompositionUpdate";break e}Jr=void 0}else rs?Ra(f,j)&&(Jr="onCompositionEnd"):f==="keydown"&&j.keyCode===229&&(Jr="onCompositionStart");Jr&&(ln&&j.locale!=="ko"&&(rs||Jr!=="onCompositionStart"?Jr==="onCompositionEnd"&&rs&&(Vr=Ef()):(Cr=Vt,ka="value"in Cr?Cr.value:Cr.textContent,rs=!0)),An=ij(Et,Jr),0<An.length&&(Jr=new If(Jr,f,null,j,Vt),Zt.push({event:Jr,listeners:An}),Vr?Jr.data=Vr:(Vr=ts(j),Vr!==null&&(Jr.data=Vr)))),(Vr=un?Hs(f,j):Cl(f,j))&&(Jr=ij(Et,"onBeforeInput"),0<Jr.length&&(An=new If("onBeforeInput","beforeinput",null,j,Vt),Zt.push({event:An,listeners:Jr}),An.data=Vr)),yX(Zt,f,Et,j,Vt)}YP(Zt,x)})}function Hg(f,x,j){return{instance:f,listener:x,currentTarget:j}}function ij(f,x){for(var j=x+"Capture",_=[];f!==null;){var R=f,V=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||V===null||(R=rt(f,j),R!=null&&_.unshift(Hg(f,R,V)),R=rt(f,x),R!=null&&_.push(Hg(f,R,V))),f.tag===3)return _;f=f.return}return[]}function w0(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function XP(f,x,j,_,R){for(var V=x._reactName,fe=[];j!==null&&j!==_;){var _e=j,Ze=_e.alternate,Et=_e.stateNode;if(_e=_e.tag,Ze!==null&&Ze===_)break;_e!==5&&_e!==26&&_e!==27||Et===null||(Ze=Et,R?(Et=rt(j,V),Et!=null&&fe.unshift(Hg(j,Et,Ze))):R||(Et=rt(j,V),Et!=null&&fe.push(Hg(j,Et,Ze)))),j=j.return}fe.length!==0&&f.push({event:x,listeners:fe})}var SX=/\r\n?/g,CX=/\u0000|\uFFFD/g;function QP(f){return(typeof f=="string"?f:""+f).replace(SX,`
`).replace(CX,"")}function JP(f,x){return x=QP(x),QP(f)===x}function oj(){}function Na(f,x,j,_,R,V){switch(j){case"children":typeof _=="string"?x==="body"||x==="textarea"&&_===""||_s(f,_):(typeof _=="number"||typeof _=="bigint")&&x!=="body"&&_s(f,""+_);break;case"className":$r(f,"class",_);break;case"tabIndex":$r(f,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(f,j,_);break;case"style":yl(f,_,V);break;case"data":if(x!=="object"){$r(f,"data",_);break}case"src":case"href":if(_===""&&(x!=="a"||j!=="href")){f.removeAttribute(j);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=Nl(""+_),f.setAttribute(j,_);break;case"action":case"formAction":if(typeof _=="function"){f.setAttribute(j,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(j==="formAction"?(x!=="input"&&Na(f,x,"name",R.name,R,null),Na(f,x,"formEncType",R.formEncType,R,null),Na(f,x,"formMethod",R.formMethod,R,null),Na(f,x,"formTarget",R.formTarget,R,null)):(Na(f,x,"encType",R.encType,R,null),Na(f,x,"method",R.method,R,null),Na(f,x,"target",R.target,R,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=Nl(""+_),f.setAttribute(j,_);break;case"onClick":_!=null&&(f.onclick=oj);break;case"onScroll":_!=null&&Mn("scroll",f);break;case"onScrollEnd":_!=null&&Mn("scrollend",f);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"multiple":f.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":f.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){f.removeAttribute("xlink:href");break}j=Nl(""+_),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""+_):f.removeAttribute(j);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""):f.removeAttribute(j);break;case"capture":case"download":_===!0?f.setAttribute(j,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,_):f.removeAttribute(j);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?f.setAttribute(j,_):f.removeAttribute(j);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?f.removeAttribute(j):f.setAttribute(j,_);break;case"popover":Mn("beforetoggle",f),Mn("toggle",f),lr(f,"popover",_);break;case"xlinkActuate":gn(f,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":gn(f,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":gn(f,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":gn(f,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":gn(f,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":gn(f,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":gn(f,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":gn(f,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":gn(f,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":lr(f,"is",_);break;case"innerText":case"textContent":break;default:(!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(j=jl.get(j)||j,lr(f,j,_))}}function zC(f,x,j,_,R,V){switch(j){case"style":yl(f,_,V);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"children":typeof _=="string"?_s(f,_):(typeof _=="number"||typeof _=="bigint")&&_s(f,""+_);break;case"onScroll":_!=null&&Mn("scroll",f);break;case"onScrollEnd":_!=null&&Mn("scrollend",f);break;case"onClick":_!=null&&(f.onclick=oj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!St.hasOwnProperty(j))e:{if(j[0]==="o"&&j[1]==="n"&&(R=j.endsWith("Capture"),x=j.slice(2,R?j.length-7:void 0),V=f[mr]||null,V=V!=null?V[j]:null,typeof V=="function"&&f.removeEventListener(x,V,R),typeof _=="function")){typeof V!="function"&&V!==null&&(j in f?f[j]=null:f.hasAttribute(j)&&f.removeAttribute(j)),f.addEventListener(x,_,R);break e}j in f?f[j]=_:_===!0?f.setAttribute(j,""):lr(f,j,_)}}}function $i(f,x,j){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mn("error",f),Mn("load",f);var _=!1,R=!1,V;for(V in j)if(j.hasOwnProperty(V)){var fe=j[V];if(fe!=null)switch(V){case"src":_=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Na(f,x,V,fe,j,null)}}R&&Na(f,x,"srcSet",j.srcSet,j,null),_&&Na(f,x,"src",j.src,j,null);return;case"input":Mn("invalid",f);var _e=V=fe=R=null,Ze=null,Et=null;for(_ in j)if(j.hasOwnProperty(_)){var Vt=j[_];if(Vt!=null)switch(_){case"name":R=Vt;break;case"type":fe=Vt;break;case"checked":Ze=Vt;break;case"defaultChecked":Et=Vt;break;case"value":V=Vt;break;case"defaultValue":_e=Vt;break;case"children":case"dangerouslySetInnerHTML":if(Vt!=null)throw Error(n(137,x));break;default:Na(f,x,_,Vt,j,null)}}Wo(f,V,_e,Ze,Et,fe,R,!1),oa(f);return;case"select":Mn("invalid",f),_=fe=V=null;for(R in j)if(j.hasOwnProperty(R)&&(_e=j[R],_e!=null))switch(R){case"value":V=_e;break;case"defaultValue":fe=_e;break;case"multiple":_=_e;default:Na(f,x,R,_e,j,null)}x=V,j=fe,f.multiple=!!_,x!=null?Oi(f,!!_,x,!1):j!=null&&Oi(f,!!_,j,!0);return;case"textarea":Mn("invalid",f),V=R=_=null;for(fe in j)if(j.hasOwnProperty(fe)&&(_e=j[fe],_e!=null))switch(fe){case"value":_=_e;break;case"defaultValue":R=_e;break;case"children":V=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(91));break;default:Na(f,x,fe,_e,j,null)}Mi(f,_,R,V),oa(f);return;case"option":for(Ze in j)if(j.hasOwnProperty(Ze)&&(_=j[Ze],_!=null))switch(Ze){case"selected":f.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Na(f,x,Ze,_,j,null)}return;case"dialog":Mn("beforetoggle",f),Mn("toggle",f),Mn("cancel",f),Mn("close",f);break;case"iframe":case"object":Mn("load",f);break;case"video":case"audio":for(_=0;_<zg.length;_++)Mn(zg[_],f);break;case"image":Mn("error",f),Mn("load",f);break;case"details":Mn("toggle",f);break;case"embed":case"source":case"link":Mn("error",f),Mn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Et in j)if(j.hasOwnProperty(Et)&&(_=j[Et],_!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Na(f,x,Et,_,j,null)}return;default:if(td(x)){for(Vt in j)j.hasOwnProperty(Vt)&&(_=j[Vt],_!==void 0&&zC(f,x,Vt,_,j,void 0));return}}for(_e in j)j.hasOwnProperty(_e)&&(_=j[_e],_!=null&&Na(f,x,_e,_,j,null))}function kX(f,x,j,_){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,V=null,fe=null,_e=null,Ze=null,Et=null,Vt=null;for(It in j){var Zt=j[It];if(j.hasOwnProperty(It)&&Zt!=null)switch(It){case"checked":break;case"value":break;case"defaultValue":Ze=Zt;default:_.hasOwnProperty(It)||Na(f,x,It,null,_,Zt)}}for(var Dt in _){var It=_[Dt];if(Zt=j[Dt],_.hasOwnProperty(Dt)&&(It!=null||Zt!=null))switch(Dt){case"type":V=It;break;case"name":R=It;break;case"checked":Et=It;break;case"defaultChecked":Vt=It;break;case"value":fe=It;break;case"defaultValue":_e=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(n(137,x));break;default:It!==Zt&&Na(f,x,Dt,It,_,Zt)}}ai(f,fe,_e,Ze,Et,Vt,V,R);return;case"select":It=fe=_e=Dt=null;for(V in j)if(Ze=j[V],j.hasOwnProperty(V)&&Ze!=null)switch(V){case"value":break;case"multiple":It=Ze;default:_.hasOwnProperty(V)||Na(f,x,V,null,_,Ze)}for(R in _)if(V=_[R],Ze=j[R],_.hasOwnProperty(R)&&(V!=null||Ze!=null))switch(R){case"value":Dt=V;break;case"defaultValue":_e=V;break;case"multiple":fe=V;default:V!==Ze&&Na(f,x,R,V,_,Ze)}x=_e,j=fe,_=It,Dt!=null?Oi(f,!!j,Dt,!1):!!_!=!!j&&(x!=null?Oi(f,!!j,x,!0):Oi(f,!!j,j?[]:"",!1));return;case"textarea":It=Dt=null;for(_e in j)if(R=j[_e],j.hasOwnProperty(_e)&&R!=null&&!_.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Na(f,x,_e,null,_,R)}for(fe in _)if(R=_[fe],V=j[fe],_.hasOwnProperty(fe)&&(R!=null||V!=null))switch(fe){case"value":Dt=R;break;case"defaultValue":It=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==V&&Na(f,x,fe,R,_,V)}Vn(f,Dt,It);return;case"option":for(var sn in j)if(Dt=j[sn],j.hasOwnProperty(sn)&&Dt!=null&&!_.hasOwnProperty(sn))switch(sn){case"selected":f.selected=!1;break;default:Na(f,x,sn,null,_,Dt)}for(Ze in _)if(Dt=_[Ze],It=j[Ze],_.hasOwnProperty(Ze)&&Dt!==It&&(Dt!=null||It!=null))switch(Ze){case"selected":f.selected=Dt&&typeof Dt!="function"&&typeof Dt!="symbol";break;default:Na(f,x,Ze,Dt,_,It)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xr in j)Dt=j[Xr],j.hasOwnProperty(Xr)&&Dt!=null&&!_.hasOwnProperty(Xr)&&Na(f,x,Xr,null,_,Dt);for(Et in _)if(Dt=_[Et],It=j[Et],_.hasOwnProperty(Et)&&Dt!==It&&(Dt!=null||It!=null))switch(Et){case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(n(137,x));break;default:Na(f,x,Et,Dt,_,It)}return;default:if(td(x)){for(var wa in j)Dt=j[wa],j.hasOwnProperty(wa)&&Dt!==void 0&&!_.hasOwnProperty(wa)&&zC(f,x,wa,void 0,_,Dt);for(Vt in _)Dt=_[Vt],It=j[Vt],!_.hasOwnProperty(Vt)||Dt===It||Dt===void 0&&It===void 0||zC(f,x,Vt,Dt,_,It);return}}for(var pt in j)Dt=j[pt],j.hasOwnProperty(pt)&&Dt!=null&&!_.hasOwnProperty(pt)&&Na(f,x,pt,null,_,Dt);for(Zt in _)Dt=_[Zt],It=j[Zt],!_.hasOwnProperty(Zt)||Dt===It||Dt==null&&It==null||Na(f,x,Zt,Dt,_,It)}var HC=null,WC=null;function lj(f){return f.nodeType===9?f:f.ownerDocument}function ZP(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eO(f,x){if(f===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&x==="foreignObject"?0:f}function GC(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var YC=null;function _X(){var f=window.event;return f&&f.type==="popstate"?f===YC?!1:(YC=f,!0):(YC=null,!1)}var tO=typeof setTimeout=="function"?setTimeout:void 0,EX=typeof clearTimeout=="function"?clearTimeout:void 0,rO=typeof Promise=="function"?Promise:void 0,DX=typeof queueMicrotask=="function"?queueMicrotask:typeof rO<"u"?function(f){return rO.resolve(null).then(f).catch(AX)}:tO;function AX(f){setTimeout(function(){throw f})}function om(f){return f==="head"}function nO(f,x){var j=x,_=0,R=0;do{var V=j.nextSibling;if(f.removeChild(j),V&&V.nodeType===8)if(j=V.data,j==="/$"){if(0<_&&8>_){j=_;var fe=f.ownerDocument;if(j&1&&Wg(fe.documentElement),j&2&&Wg(fe.body),j&4)for(j=fe.head,Wg(j),fe=j.firstChild;fe;){var _e=fe.nextSibling,Ze=fe.nodeName;fe[Pe]||Ze==="SCRIPT"||Ze==="STYLE"||Ze==="LINK"&&fe.rel.toLowerCase()==="stylesheet"||j.removeChild(fe),fe=_e}}if(R===0){f.removeChild(V),eb(x);return}R--}else j==="$"||j==="$?"||j==="$!"?R++:_=j.charCodeAt(0)-48;else _=0;j=V}while(j);eb(x)}function KC(f){var x=f.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var j=x;switch(x=x.nextSibling,j.nodeName){case"HTML":case"HEAD":case"BODY":KC(j),Ee(j);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(j.rel.toLowerCase()==="stylesheet")continue}f.removeChild(j)}}function TX(f,x,j,_){for(;f.nodeType===1;){var R=j;if(f.nodeName.toLowerCase()!==x.toLowerCase()){if(!_&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(_){if(!f[Pe])switch(x){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(V=f.getAttribute("rel"),V==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(V!==R.rel||f.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||f.getAttribute("title")!==(R.title==null?null:R.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(V=f.getAttribute("src"),(V!==(R.src==null?null:R.src)||f.getAttribute("type")!==(R.type==null?null:R.type)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&V&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(x==="input"&&f.type==="hidden"){var V=R.name==null?null:""+R.name;if(R.type==="hidden"&&f.getAttribute("name")===V)return f}else return f;if(f=yd(f.nextSibling),f===null)break}return null}function IX(f,x,j){if(x==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!j||(f=yd(f.nextSibling),f===null))return null;return f}function XC(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function PX(f,x){var j=f.ownerDocument;if(f.data!=="$?"||j.readyState==="complete")x();else{var _=function(){x(),j.removeEventListener("DOMContentLoaded",_)};j.addEventListener("DOMContentLoaded",_),f._reactRetry=_}}function yd(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?"||x==="F!"||x==="F")break;if(x==="/$")return null}}return f}var QC=null;function aO(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var j=f.data;if(j==="$"||j==="$!"||j==="$?"){if(x===0)return f;x--}else j==="/$"&&x++}f=f.previousSibling}return null}function sO(f,x,j){switch(x=lj(j),f){case"html":if(f=x.documentElement,!f)throw Error(n(452));return f;case"head":if(f=x.head,!f)throw Error(n(453));return f;case"body":if(f=x.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function Wg(f){for(var x=f.attributes;x.length;)f.removeAttributeNode(x[0]);Ee(f)}var Sc=new Map,iO=new Set;function cj(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Ih=Q.d;Q.d={f:OX,r:MX,D:RX,C:FX,L:LX,m:BX,X:$X,S:UX,M:qX};function OX(){var f=Ih.f(),x=ej();return f||x}function MX(f){var x=Ve(f);x!==null&&x.tag===5&&x.type==="form"?kp(x):Ih.r(f)}var S0=typeof document>"u"?null:document;function oO(f,x,j){var _=S0;if(_&&typeof x=="string"&&x){var R=vn(x);R='link[rel="'+f+'"][href="'+R+'"]',typeof j=="string"&&(R+='[crossorigin="'+j+'"]'),iO.has(R)||(iO.add(R),f={rel:f,crossOrigin:j,href:x},_.querySelector(R)===null&&(x=_.createElement("link"),$i(x,"link",f),at(x),_.head.appendChild(x)))}}function RX(f){Ih.D(f),oO("dns-prefetch",f,null)}function FX(f,x){Ih.C(f,x),oO("preconnect",f,x)}function LX(f,x,j){Ih.L(f,x,j);var _=S0;if(_&&f&&x){var R='link[rel="preload"][as="'+vn(x)+'"]';x==="image"&&j&&j.imageSrcSet?(R+='[imagesrcset="'+vn(j.imageSrcSet)+'"]',typeof j.imageSizes=="string"&&(R+='[imagesizes="'+vn(j.imageSizes)+'"]')):R+='[href="'+vn(f)+'"]';var V=R;switch(x){case"style":V=C0(f);break;case"script":V=k0(f)}Sc.has(V)||(f=u({rel:"preload",href:x==="image"&&j&&j.imageSrcSet?void 0:f,as:x},j),Sc.set(V,f),_.querySelector(R)!==null||x==="style"&&_.querySelector(Gg(V))||x==="script"&&_.querySelector(Yg(V))||(x=_.createElement("link"),$i(x,"link",f),at(x),_.head.appendChild(x)))}}function BX(f,x){Ih.m(f,x);var j=S0;if(j&&f){var _=x&&typeof x.as=="string"?x.as:"script",R='link[rel="modulepreload"][as="'+vn(_)+'"][href="'+vn(f)+'"]',V=R;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=k0(f)}if(!Sc.has(V)&&(f=u({rel:"modulepreload",href:f},x),Sc.set(V,f),j.querySelector(R)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(j.querySelector(Yg(V)))return}_=j.createElement("link"),$i(_,"link",f),at(_),j.head.appendChild(_)}}}function UX(f,x,j){Ih.S(f,x,j);var _=S0;if(_&&f){var R=wt(_).hoistableStyles,V=C0(f);x=x||"default";var fe=R.get(V);if(!fe){var _e={loading:0,preload:null};if(fe=_.querySelector(Gg(V)))_e.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":x},j),(j=Sc.get(V))&&JC(f,j);var Ze=fe=_.createElement("link");at(Ze),$i(Ze,"link",f),Ze._p=new Promise(function(Et,Vt){Ze.onload=Et,Ze.onerror=Vt}),Ze.addEventListener("load",function(){_e.loading|=1}),Ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,dj(fe,x,_)}fe={type:"stylesheet",instance:fe,count:1,state:_e},R.set(V,fe)}}}function $X(f,x){Ih.X(f,x);var j=S0;if(j&&f){var _=wt(j).hoistableScripts,R=k0(f),V=_.get(R);V||(V=j.querySelector(Yg(R)),V||(f=u({src:f,async:!0},x),(x=Sc.get(R))&&ZC(f,x),V=j.createElement("script"),at(V),$i(V,"link",f),j.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},_.set(R,V))}}function qX(f,x){Ih.M(f,x);var j=S0;if(j&&f){var _=wt(j).hoistableScripts,R=k0(f),V=_.get(R);V||(V=j.querySelector(Yg(R)),V||(f=u({src:f,async:!0,type:"module"},x),(x=Sc.get(R))&&ZC(f,x),V=j.createElement("script"),at(V),$i(V,"link",f),j.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},_.set(R,V))}}function lO(f,x,j,_){var R=(R=ee.current)?cj(R):null;if(!R)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof j.precedence=="string"&&typeof j.href=="string"?(x=C0(j.href),j=wt(R).hoistableStyles,_=j.get(x),_||(_={type:"style",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(j.rel==="stylesheet"&&typeof j.href=="string"&&typeof j.precedence=="string"){f=C0(j.href);var V=wt(R).hoistableStyles,fe=V.get(f);if(fe||(R=R.ownerDocument||R,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(f,fe),(V=R.querySelector(Gg(f)))&&!V._p&&(fe.instance=V,fe.state.loading=5),Sc.has(f)||(j={rel:"preload",as:"style",href:j.href,crossOrigin:j.crossOrigin,integrity:j.integrity,media:j.media,hrefLang:j.hrefLang,referrerPolicy:j.referrerPolicy},Sc.set(f,j),V||VX(R,f,j,fe.state))),x&&_===null)throw Error(n(528,""));return fe}if(x&&_!==null)throw Error(n(529,""));return null;case"script":return x=j.async,j=j.src,typeof j=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=k0(j),j=wt(R).hoistableScripts,_=j.get(x),_||(_={type:"script",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function C0(f){return'href="'+vn(f)+'"'}function Gg(f){return'link[rel="stylesheet"]['+f+"]"}function cO(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function VX(f,x,j,_){f.querySelector('link[rel="preload"][as="style"]['+x+"]")?_.loading=1:(x=f.createElement("link"),_.preload=x,x.addEventListener("load",function(){return _.loading|=1}),x.addEventListener("error",function(){return _.loading|=2}),$i(x,"link",j),at(x),f.head.appendChild(x))}function k0(f){return'[src="'+vn(f)+'"]'}function Yg(f){return"script[async]"+f}function dO(f,x,j){if(x.count++,x.instance===null)switch(x.type){case"style":var _=f.querySelector('style[data-href~="'+vn(j.href)+'"]');if(_)return x.instance=_,at(_),_;var R=u({},j,{"data-href":j.href,"data-precedence":j.precedence,href:null,precedence:null});return _=(f.ownerDocument||f).createElement("style"),at(_),$i(_,"style",R),dj(_,j.precedence,f),x.instance=_;case"stylesheet":R=C0(j.href);var V=f.querySelector(Gg(R));if(V)return x.state.loading|=4,x.instance=V,at(V),V;_=cO(j),(R=Sc.get(R))&&JC(_,R),V=(f.ownerDocument||f).createElement("link"),at(V);var fe=V;return fe._p=new Promise(function(_e,Ze){fe.onload=_e,fe.onerror=Ze}),$i(V,"link",_),x.state.loading|=4,dj(V,j.precedence,f),x.instance=V;case"script":return V=k0(j.src),(R=f.querySelector(Yg(V)))?(x.instance=R,at(R),R):(_=j,(R=Sc.get(V))&&(_=u({},j),ZC(_,R)),f=f.ownerDocument||f,R=f.createElement("script"),at(R),$i(R,"link",_),f.head.appendChild(R),x.instance=R);case"void":return null;default:throw Error(n(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(_=x.instance,x.state.loading|=4,dj(_,j.precedence,f));return x.instance}function dj(f,x,j){for(var _=j.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=_.length?_[_.length-1]:null,V=R,fe=0;fe<_.length;fe++){var _e=_[fe];if(_e.dataset.precedence===x)V=_e;else if(V!==R)break}V?V.parentNode.insertBefore(f,V.nextSibling):(x=j.nodeType===9?j.head:j,x.insertBefore(f,x.firstChild))}function JC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.title==null&&(f.title=x.title)}function ZC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.integrity==null&&(f.integrity=x.integrity)}var uj=null;function uO(f,x,j){if(uj===null){var _=new Map,R=uj=new Map;R.set(j,_)}else R=uj,_=R.get(j),_||(_=new Map,R.set(j,_));if(_.has(f))return _;for(_.set(f,null),j=j.getElementsByTagName(f),R=0;R<j.length;R++){var V=j[R];if(!(V[Pe]||V[tr]||f==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=V.getAttribute(x)||"";fe=f+fe;var _e=_.get(fe);_e?_e.push(V):_.set(fe,[V])}}return _}function hO(f,x,j){f=f.ownerDocument||f,f.head.insertBefore(j,x==="title"?f.querySelector("head > title"):null)}function zX(f,x,j){if(j===1||x.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return f=x.disabled,typeof x.precedence=="string"&&f==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function fO(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Kg=null;function HX(){}function WX(f,x,j){if(Kg===null)throw Error(n(475));var _=Kg;if(x.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var R=C0(j.href),V=f.querySelector(Gg(R));if(V){f=V._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(_.count++,_=hj.bind(_),f.then(_,_)),x.state.loading|=4,x.instance=V,at(V);return}V=f.ownerDocument||f,j=cO(j),(R=Sc.get(R))&&JC(j,R),V=V.createElement("link"),at(V);var fe=V;fe._p=new Promise(function(_e,Ze){fe.onload=_e,fe.onerror=Ze}),$i(V,"link",j),x.instance=V}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(x,f),(f=x.state.preload)&&(x.state.loading&3)===0&&(_.count++,x=hj.bind(_),f.addEventListener("load",x),f.addEventListener("error",x))}}function GX(){if(Kg===null)throw Error(n(475));var f=Kg;return f.stylesheets&&f.count===0&&ek(f,f.stylesheets),0<f.count?function(x){var j=setTimeout(function(){if(f.stylesheets&&ek(f,f.stylesheets),f.unsuspend){var _=f.unsuspend;f.unsuspend=null,_()}},6e4);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(j)}}:null}function hj(){if(this.count--,this.count===0){if(this.stylesheets)ek(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var fj=null;function ek(f,x){f.stylesheets=null,f.unsuspend!==null&&(f.count++,fj=new Map,x.forEach(YX,f),fj=null,hj.call(f))}function YX(f,x){if(!(x.state.loading&4)){var j=fj.get(f);if(j)var _=j.get(null);else{j=new Map,fj.set(f,j);for(var R=f.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<R.length;V++){var fe=R[V];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&(j.set(fe.dataset.precedence,fe),_=fe)}_&&j.set(null,_)}R=x.instance,fe=R.getAttribute("data-precedence"),V=j.get(fe)||_,V===_&&j.set(null,R),j.set(fe,R),this.count++,_=hj.bind(this),R.addEventListener("load",_),R.addEventListener("error",_),V?V.parentNode.insertBefore(R,V.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(R,f.firstChild)),x.state.loading|=4}}var Xg={$$typeof:N,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function KX(f,x,j,_,R,V,fe,_e){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=_,this.onUncaughtError=R,this.onCaughtError=V,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function mO(f,x,j,_,R,V,fe,_e,Ze,Et,Vt,Zt){return f=new KX(f,x,j,fe,_e,Ze,Et,Zt),x=1,V===!0&&(x|=24),V=gi(3,null,null,x),f.current=V,V.stateNode=f,x=bg(),x.refCount++,f.pooledCache=x,x.refCount++,V.memoizedState={element:_,isDehydrated:j,cache:x},st(V),f}function pO(f){return f?(f=Gs,f):Gs}function xO(f,x,j,_,R,V){R=pO(R),_.context===null?_.context=R:_.pendingContext=R,_=qt(x),_.payload={element:j},V=V===void 0?null:V,V!==null&&(_.callback=V),j=Jt(f,_,x),j!==null&&(Rl(j,f,x),Wt(j,f,x))}function vO(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var j=f.retryLane;f.retryLane=j!==0&&j<x?j:x}}function tk(f,x){vO(f,x),(f=f.alternate)&&vO(f,x)}function gO(f){if(f.tag===13){var x=od(f,67108864);x!==null&&Rl(x,f,67108864),tk(f,67108864)}}var mj=!0;function XX(f,x,j,_){var R=U.T;U.T=null;var V=Q.p;try{Q.p=2,rk(f,x,j,_)}finally{Q.p=V,U.T=R}}function QX(f,x,j,_){var R=U.T;U.T=null;var V=Q.p;try{Q.p=8,rk(f,x,j,_)}finally{Q.p=V,U.T=R}}function rk(f,x,j,_){if(mj){var R=nk(_);if(R===null)VC(f,x,_,pj,j),yO(f,_);else if(ZX(R,f,x,j,_))_.stopPropagation();else if(yO(f,_),x&4&&-1<JX.indexOf(f)){for(;R!==null;){var V=Ve(R);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var fe=Qe(V.pendingLanes);if(fe!==0){var _e=V;for(_e.pendingLanes|=2,_e.entangledLanes|=2;fe;){var Ze=1<<31-he(fe);_e.entanglements[1]|=Ze,fe&=~Ze}pu(V),(fa&6)===0&&(J1=ye()+500,Vg(0))}}break;case 13:_e=od(V,2),_e!==null&&Rl(_e,V,2),ej(),tk(V,2)}if(V=nk(_),V===null&&VC(f,x,_,pj,j),V===R)break;R=V}R!==null&&_.stopPropagation()}else VC(f,x,_,null,j)}}function nk(f){return f=ms(f),ak(f)}var pj=null;function ak(f){if(pj=null,f=Fe(f),f!==null){var x=i(f);if(x===null)f=null;else{var j=x.tag;if(j===13){if(f=o(x),f!==null)return f;f=null}else if(j===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null)}}return pj=f,null}function bO(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Le:return 2;case Je:return 8;case lt:case vt:return 32;case Re:return 268435456;default:return 32}default:return 32}}var sk=!1,lm=null,cm=null,dm=null,Qg=new Map,Jg=new Map,um=[],JX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yO(f,x){switch(f){case"focusin":case"focusout":lm=null;break;case"dragenter":case"dragleave":cm=null;break;case"mouseover":case"mouseout":dm=null;break;case"pointerover":case"pointerout":Qg.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(x.pointerId)}}function Zg(f,x,j,_,R,V){return f===null||f.nativeEvent!==V?(f={blockedOn:x,domEventName:j,eventSystemFlags:_,nativeEvent:V,targetContainers:[R]},x!==null&&(x=Ve(x),x!==null&&gO(x)),f):(f.eventSystemFlags|=_,x=f.targetContainers,R!==null&&x.indexOf(R)===-1&&x.push(R),f)}function ZX(f,x,j,_,R){switch(x){case"focusin":return lm=Zg(lm,f,x,j,_,R),!0;case"dragenter":return cm=Zg(cm,f,x,j,_,R),!0;case"mouseover":return dm=Zg(dm,f,x,j,_,R),!0;case"pointerover":var V=R.pointerId;return Qg.set(V,Zg(Qg.get(V)||null,f,x,j,_,R)),!0;case"gotpointercapture":return V=R.pointerId,Jg.set(V,Zg(Jg.get(V)||null,f,x,j,_,R)),!0}return!1}function jO(f){var x=Fe(f.target);if(x!==null){var j=i(x);if(j!==null){if(x=j.tag,x===13){if(x=o(j),x!==null){f.blockedOn=x,Kt(f.priority,function(){if(j.tag===13){var _=Ml();_=ke(_);var R=od(j,_);R!==null&&Rl(R,j,_),tk(j,_)}});return}}else if(x===3&&j.stateNode.current.memoizedState.isDehydrated){f.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}f.blockedOn=null}function xj(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var j=nk(f.nativeEvent);if(j===null){j=f.nativeEvent;var _=new j.constructor(j.type,j);cc=_,j.target.dispatchEvent(_),cc=null}else return x=Ve(j),x!==null&&gO(x),f.blockedOn=j,!1;x.shift()}return!0}function NO(f,x,j){xj(f)&&j.delete(x)}function eQ(){sk=!1,lm!==null&&xj(lm)&&(lm=null),cm!==null&&xj(cm)&&(cm=null),dm!==null&&xj(dm)&&(dm=null),Qg.forEach(NO),Jg.forEach(NO)}function vj(f,x){f.blockedOn===x&&(f.blockedOn=null,sk||(sk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eQ)))}var gj=null;function wO(f){gj!==f&&(gj=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gj===f&&(gj=null);for(var x=0;x<f.length;x+=3){var j=f[x],_=f[x+1],R=f[x+2];if(typeof _!="function"){if(ak(_||j)===null)continue;break}var V=Ve(j);V!==null&&(f.splice(x,3),x-=3,jc(V,{pending:!0,data:R,method:j.method,action:_},_,R))}}))}function eb(f){function x(Ze){return vj(Ze,f)}lm!==null&&vj(lm,f),cm!==null&&vj(cm,f),dm!==null&&vj(dm,f),Qg.forEach(x),Jg.forEach(x);for(var j=0;j<um.length;j++){var _=um[j];_.blockedOn===f&&(_.blockedOn=null)}for(;0<um.length&&(j=um[0],j.blockedOn===null);)jO(j),j.blockedOn===null&&um.shift();if(j=(f.ownerDocument||f).$$reactFormReplay,j!=null)for(_=0;_<j.length;_+=3){var R=j[_],V=j[_+1],fe=R[mr]||null;if(typeof V=="function")fe||wO(j);else if(fe){var _e=null;if(V&&V.hasAttribute("formAction")){if(R=V,fe=V[mr]||null)_e=fe.formAction;else if(ak(R)!==null)continue}else _e=fe.action;typeof _e=="function"?j[_+1]=_e:(j.splice(_,3),_-=3),wO(j)}}}function ik(f){this._internalRoot=f}bj.prototype.render=ik.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(n(409));var j=x.current,_=Ml();xO(j,_,f,x,null,null)},bj.prototype.unmount=ik.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;xO(f.current,2,null,f,null,null),ej(),x[jr]=null}};function bj(f){this._internalRoot=f}bj.prototype.unstable_scheduleHydration=function(f){if(f){var x=bt();f={blockedOn:null,target:f,priority:x};for(var j=0;j<um.length&&x!==0&&x<um[j].priority;j++);um.splice(j,0,f),j===0&&jO(f)}};var SO=t.version;if(SO!=="19.1.0")throw Error(n(527,SO,"19.1.0"));Q.findDOMNode=function(f){var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=c(x),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var tQ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yj.isDisabled&&yj.supportsFiber)try{Tt=yj.inject(tQ),Ht=yj}catch{}}return rb.createRoot=function(f,x){if(!s(f))throw Error(n(299));var j=!1,_="",R=UI,V=$I,fe=qI,_e=null;return x!=null&&(x.unstable_strictMode===!0&&(j=!0),x.identifierPrefix!==void 0&&(_=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(V=x.onCaughtError),x.onRecoverableError!==void 0&&(fe=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(_e=x.unstable_transitionCallbacks)),x=mO(f,1,!1,null,null,j,_,R,V,fe,_e,null),f[jr]=x.current,qC(f),new ik(x)},rb.hydrateRoot=function(f,x,j){if(!s(f))throw Error(n(299));var _=!1,R="",V=UI,fe=$I,_e=qI,Ze=null,Et=null;return j!=null&&(j.unstable_strictMode===!0&&(_=!0),j.identifierPrefix!==void 0&&(R=j.identifierPrefix),j.onUncaughtError!==void 0&&(V=j.onUncaughtError),j.onCaughtError!==void 0&&(fe=j.onCaughtError),j.onRecoverableError!==void 0&&(_e=j.onRecoverableError),j.unstable_transitionCallbacks!==void 0&&(Ze=j.unstable_transitionCallbacks),j.formState!==void 0&&(Et=j.formState)),x=mO(f,1,!0,x,j??null,_,R,V,fe,_e,Ze,Et),x.context=pO(null),j=x.current,_=Ml(),_=ke(_),R=qt(_),R.callback=null,Jt(j,R,_),j=_,x.current.lanes=j,Ge(x,j),pu(x),f[jr]=x.current,qC(f),new bj(x)},rb.version="19.1.0",rb}var OO;function uQ(){if(OO)return ck.exports;OO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ck.exports=dQ(),ck.exports}var hQ=uQ(),nb={},MO;function fQ(){if(MO)return nb;MO=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.parse=o,nb.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,p){const v=new i,g=m.length;if(g<2)return v;const b=p?.decode||u;let y=0;do{const C=m.indexOf("=",y);if(C===-1)break;const N=m.indexOf(";",y),k=N===-1?g:N;if(C>k){y=m.lastIndexOf(";",C-1)+1;continue}const S=l(m,y,C),D=c(m,C,S),E=m.slice(S,D);if(v[E]===void 0){let T=l(m,C+1,k),A=c(m,k,T);const L=b(m.slice(T,A));v[E]=L}y=k+1}while(y<g);return v}function l(m,p,v){do{const g=m.charCodeAt(p);if(g!==32&&g!==9)return p}while(++p<v);return v}function c(m,p,v){for(;p>v;){const g=m.charCodeAt(--p);if(g!==32&&g!==9)return p+1}return v}function d(m,p,v){const g=v?.encode||encodeURIComponent;if(!e.test(m))throw new TypeError(`argument name is invalid: ${m}`);const b=g(p);if(!t.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=m+"="+b;if(!v)return y;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);y+="; Max-Age="+v.maxAge}if(v.domain){if(!r.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);y+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);y+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);y+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(y+="; HttpOnly"),v.secure&&(y+="; Secure"),v.partitioned&&(y+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return y}function u(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return s.call(m)==="[object Date]"}return nb}fQ();var RO="popstate";function mQ(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return f5("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Xb(s)}return xQ(t,r,null,e)}function Ja(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Md(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pQ(){return Math.random().toString(36).substring(2,10)}function FO(e,t){return{usr:e.state,key:e.key,idx:t}}function f5(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wv(t):t,state:r,key:t&&t.key||n||pQ()}}function Xb({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function xQ(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function m(b,y){l="PUSH";let C=f5(g.location,b,y);d=u()+1;let N=FO(C,d),k=g.createHref(C);try{o.pushState(N,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let C=f5(g.location,b,y);d=u();let N=FO(C,d),k=g.createHref(C);o.replaceState(N,"",k),i&&c&&c({action:l,location:g.location,delta:0})}function v(b){return vQ(b)}let g={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(RO,h),c=b,()=>{s.removeEventListener(RO,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(b){return o.go(b)}};return g}function vQ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ja(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Xb(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function W7(e,t,r="/"){return gQ(e,t,r,!1)}function gQ(e,t,r,n){let s=typeof t=="string"?Wv(t):t,i=ef(s.pathname||"/",r);if(i==null)return null;let o=G7(e);bQ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AQ(i);l=EQ(o[c],d,n)}return l}function G7(e,t=[],r=[],n=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ja(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=qh([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ja(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),G7(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:kQ(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))s(i,o);else for(let l of Y7(i.path))s(i,o,l)}),t}function Y7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Y7(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function bQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_Q(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var yQ=/^:[\w-]+$/,jQ=3,NQ=2,wQ=1,SQ=10,CQ=-2,LO=e=>e==="*";function kQ(e,t){let r=e.split("/"),n=r.length;return r.some(LO)&&(n+=CQ),t&&(n+=NQ),r.filter(s=>!LO(s)).reduce((s,i)=>s+(yQ.test(i)?jQ:i===""?wQ:SQ),n)}function _Q(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function EQ(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=VN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=VN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:qh([i,h.pathname]),pathnameBase:OQ(qh([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=qh([i,h.pathnameBase]))}return o}function VN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DQ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function DQ(e,t=!1,r=!0){Md(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function AQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Md(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ef(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function TQ(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Wv(e):e;return{pathname:r?r.startsWith("/")?r:IQ(r,t):t,search:MQ(n),hash:RQ(s)}}function IQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fk(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function w3(e){let t=PQ(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function S3(e,t,r,n=!1){let s;typeof e=="string"?s=Wv(e):(s={...e},Ja(!s.pathname||!s.pathname.includes("?"),fk("?","pathname","search",s)),Ja(!s.pathname||!s.pathname.includes("#"),fk("#","pathname","hash",s)),Ja(!s.search||!s.search.includes("#"),fk("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=TQ(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var qh=e=>e.join("/").replace(/\/\/+/g,"/"),OQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var K7=["POST","PUT","PATCH","DELETE"];new Set(K7);var LQ=["GET",...K7];new Set(LQ);var Gv=w.createContext(null);Gv.displayName="DataRouter";var D2=w.createContext(null);D2.displayName="DataRouterState";var X7=w.createContext({isTransitioning:!1});X7.displayName="ViewTransition";var BQ=w.createContext(new Map);BQ.displayName="Fetchers";var UQ=w.createContext(null);UQ.displayName="Await";var Fd=w.createContext(null);Fd.displayName="Navigation";var Ry=w.createContext(null);Ry.displayName="Location";var Ku=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ku.displayName="Route";var C3=w.createContext(null);C3.displayName="RouteError";function $Q(e,{relative:t}={}){Ja(Yv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(Fd),{hash:s,pathname:i,search:o}=Fy(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:qh([r,i])),n.createHref({pathname:l,search:o,hash:s})}function Yv(){return w.useContext(Ry)!=null}function Ym(){return Ja(Yv(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ry).location}var Q7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J7(e){w.useContext(Fd).static||w.useLayoutEffect(e)}function Xu(){let{isDataRoute:e}=w.useContext(Ku);return e?eJ():qQ()}function qQ(){Ja(Yv(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Gv),{basename:t,navigator:r}=w.useContext(Fd),{matches:n}=w.useContext(Ku),{pathname:s}=Ym(),i=JSON.stringify(w3(n)),o=w.useRef(!1);return J7(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(Md(o.current,Q7),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=S3(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:qh([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,s,e])}w.createContext(null);function Fy(e,{relative:t}={}){let{matches:r}=w.useContext(Ku),{pathname:n}=Ym(),s=JSON.stringify(w3(r));return w.useMemo(()=>S3(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function VQ(e,t){return Z7(e,t)}function Z7(e,t,r,n){Ja(Yv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(Fd),{matches:i}=w.useContext(Ku),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";e9(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=Ym(),m;if(t){let y=typeof t=="string"?Wv(t):t;Ja(d==="/"||y.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=h;let p=m.pathname||"/",v=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=W7(e,{pathname:v});Md(u||g!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Md(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=YQ(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:qh([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:qh([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&b?w.createElement(Ry.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function zQ(){let e=ZQ(),t=FQ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,o)}var HQ=w.createElement(zQ,null),WQ=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Ku.Provider,{value:this.props.routeContext},w.createElement(C3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GQ({routeContext:e,match:t,children:r}){let n=w.useContext(Gv);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Ku.Provider,{value:e},r)}function YQ(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r?.errors;if(i!=null){let c=s.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);Ja(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=r,m=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,u)=>{let h,m=!1,p=null,v=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,p=d.route.errorElement||HQ,o&&(l<0&&u===0?(e9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===u&&(m=!0,v=d.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),b=()=>{let y;return h?y=p:m?y=v:d.route.Component?y=w.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,w.createElement(GQ,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?w.createElement(WQ,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function k3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KQ(e){let t=w.useContext(Gv);return Ja(t,k3(e)),t}function XQ(e){let t=w.useContext(D2);return Ja(t,k3(e)),t}function QQ(e){let t=w.useContext(Ku);return Ja(t,k3(e)),t}function _3(e){let t=QQ(e),r=t.matches[t.matches.length-1];return Ja(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function JQ(){return _3("useRouteId")}function ZQ(){let e=w.useContext(C3),t=XQ("useRouteError"),r=_3("useRouteError");return e!==void 0?e:t.errors?.[r]}function eJ(){let{router:e}=KQ("useNavigate"),t=_3("useNavigate"),r=w.useRef(!1);return J7(()=>{r.current=!0}),w.useCallback(async(s,i={})=>{Md(r.current,Q7),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var BO={};function e9(e,t,r){!t&&!BO[e]&&(BO[e]=!0,Md(!1,r))}w.memo(tJ);function tJ({routes:e,future:t,state:r}){return Z7(e,void 0,r,t)}function rJ({to:e,replace:t,state:r,relative:n}){Ja(Yv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(Fd);Md(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Ku),{pathname:o}=Ym(),l=Xu(),c=S3(e,w3(i),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:n})},[l,d,n,t,r]),null}function ur(e){Ja(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nJ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Ja(!Yv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Wv(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:m="default"}=r,p=w.useMemo(()=>{let v=ef(c,o);return v==null?null:{location:{pathname:v,search:d,hash:u,state:h,key:m},navigationType:n}},[o,c,d,u,h,m,n]);return Md(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(Fd.Provider,{value:l},w.createElement(Ry.Provider,{children:t,value:p}))}function aJ({children:e,location:t}){return VQ(m5(e),t)}function m5(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,m5(n.props.children,i));return}Ja(n.type===ur,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ja(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=m5(n.props.children,i)),r.push(o)}),r}var yN="get",jN="application/x-www-form-urlencoded";function A2(e){return e!=null&&typeof e.tagName=="string"}function sJ(e){return A2(e)&&e.tagName.toLowerCase()==="button"}function iJ(e){return A2(e)&&e.tagName.toLowerCase()==="form"}function oJ(e){return A2(e)&&e.tagName.toLowerCase()==="input"}function lJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cJ(e,t){return e.button===0&&(!t||t==="_self")&&!lJ(e)}var jj=null;function dJ(){if(jj===null)try{new FormData(document.createElement("form"),0),jj=!1}catch{jj=!0}return jj}var uJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mk(e){return e!=null&&!uJ.has(e)?(Md(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jN}"`),null):e}function hJ(e,t){let r,n,s,i,o;if(iJ(e)){let l=e.getAttribute("action");n=l?ef(l,t):null,r=e.getAttribute("method")||yN,s=mk(e.getAttribute("enctype"))||jN,i=new FormData(e)}else if(sJ(e)||oJ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?ef(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||yN,s=mk(e.getAttribute("formenctype"))||mk(l.getAttribute("enctype"))||jN,i=new FormData(l,e),!dJ()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(A2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yN,n=null,s=jN,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function E3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function fJ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mJ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pJ(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await fJ(i,r);return o.links?o.links():[]}return[]}));return bJ(n.flat(1).filter(mJ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function UO(e,t,r,n,s,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>r[d].pathname!==c.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function xJ(e,t,{includeHydrateFallback:r}={}){return vJ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function vJ(e){return[...new Set(e)]}function gJ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function bJ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(gJ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yJ=new Set([100,101,204,205]);function jJ(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&ef(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function t9(){let e=w.useContext(Gv);return E3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function NJ(){let e=w.useContext(D2);return E3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var D3=w.createContext(void 0);D3.displayName="FrameworkContext";function r9(){let e=w.useContext(D3);return E3(e,"You must render this element inside a <HydratedRouter> element"),e}function wJ(e,t){let r=w.useContext(D3),[n,s]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(C=>{o(C.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:ab(l,p),onBlur:ab(c,v),onMouseEnter:ab(d,p),onMouseLeave:ab(u,v),onTouchStart:ab(h,p)}]:[!1,m,{}]}function ab(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function SJ({page:e,...t}){let{router:r}=t9(),n=w.useMemo(()=>W7(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(kJ,{page:e,matches:n,...t}):null}function CJ(e){let{manifest:t,routeModules:r}=r9(),[n,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return pJ(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function kJ({page:e,matches:t,...r}){let n=Ym(),{manifest:s,routeModules:i}=r9(),{basename:o}=t9(),{loaderData:l,matches:c}=NJ(),d=w.useMemo(()=>UO(e,t,c,s,n,"data"),[e,t,c,s,n]),u=w.useMemo(()=>UO(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,g=!1;if(t.forEach(y=>{let C=s.routes[y.route.id];!C||!C.hasLoader||(!d.some(N=>N.route.id===y.route.id)&&y.route.id in l&&i[y.route.id]?.shouldRevalidate||C.hasClientLoader?g=!0:v.add(y.route.id))}),v.size===0)return[];let b=jJ(e,o);return g&&v.size>0&&b.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,d,t,e,i]),m=w.useMemo(()=>xJ(u,s),[u,s]),p=CJ(u);return w.createElement(w.Fragment,null,h.map(v=>w.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),m.map(v=>w.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:g})=>w.createElement("link",{key:v,...g})))}function _J(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var n9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{n9&&(window.__reactRouterVersion="7.6.3")}catch{}function EJ({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=mQ({window:r,v5Compat:!0}));let s=n.current,[i,o]=w.useState({action:s.action,location:s.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>s.listen(l),[s,l]),w.createElement(nJ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var a9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vp=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...m},p){let{basename:v}=w.useContext(Fd),g=typeof d=="string"&&a9.test(d),b,y=!1;if(typeof d=="string"&&g&&(b=d,n9))try{let A=new URL(window.location.href),L=d.startsWith("//")?new URL(A.protocol+d):new URL(d),P=ef(L.pathname,v);L.origin===A.origin&&P!=null?d=P+L.search+L.hash:y=!0}catch{Md(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=$Q(d,{relative:s}),[N,k,S]=wJ(n,m),D=IJ(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function E(A){t&&t(A),A.defaultPrevented||D(A)}let T=w.createElement("a",{...m,...S,href:b||C,onClick:y||i?t:E,ref:_J(p,k),target:c,"data-discover":!g&&r==="render"?"true":void 0});return N&&!g?w.createElement(w.Fragment,null,T,w.createElement(SJ,{page:C})):T});Vp.displayName="Link";var DJ=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Fy(o,{relative:d.relative}),m=Ym(),p=w.useContext(D2),{navigator:v,basename:g}=w.useContext(Fd),b=p!=null&&FJ(h)&&l===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,C=m.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(C=C.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&g&&(N=ef(N,g)||N);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=C===y||!s&&C.startsWith(y)&&C.charAt(k)==="/",D=N!=null&&(N===y||!s&&N.startsWith(y)&&N.charAt(y.length)==="/"),E={isActive:S,isPending:D,isTransitioning:b},T=S?t:void 0,A;typeof n=="function"?A=n(E):A=[n,S?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(E):i;return w.createElement(Vp,{...d,"aria-current":T,className:A,ref:u,style:L,to:o,viewTransition:l},typeof c=="function"?c(E):c)});DJ.displayName="NavLink";var AJ=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=yN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...m},p)=>{let v=MJ(),g=RJ(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&a9.test(l),C=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let k=N.nativeEvent.submitter,S=k?.getAttribute("formmethod")||o;v(k||N.currentTarget,{fetcherKey:t,method:S,navigate:r,replace:s,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return w.createElement("form",{ref:p,method:b,action:g,onSubmit:n?c:C,...m,"data-discover":!y&&e==="render"?"true":void 0})});AJ.displayName="Form";function TJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s9(e){let t=w.useContext(Gv);return Ja(t,TJ(e)),t}function IJ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Xu(),c=Ym(),d=Fy(e,{relative:i});return w.useCallback(u=>{if(cJ(u,t)){u.preventDefault();let h=r!==void 0?r:Xb(c)===Xb(d);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,r,n,t,e,s,i,o])}var PJ=0,OJ=()=>`__${String(++PJ)}__`;function MJ(){let{router:e}=s9("useSubmit"),{basename:t}=w.useContext(Fd),r=JQ();return w.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=hJ(n,t);if(s.navigate===!1){let u=s.fetcherKey||OJ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function RJ(e,{relative:t}={}){let{basename:r}=w.useContext(Fd),n=w.useContext(Ku);Ja(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Fy(e||".",{relative:t})},o=Ym();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:qh([r,i.pathname])),Xb(i)}function FJ(e,t={}){let r=w.useContext(X7);Ja(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=s9("useViewTransitionState"),s=Fy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=ef(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ef(r.nextLocation.pathname,n)||r.nextLocation.pathname;return VN(s.pathname,o)!=null||VN(s.pathname,i)!=null}[...yJ];var Ly=H7();const LJ=Yu(Ly);function i9(e,t){return function(){return e.apply(t,arguments)}}const{toString:BJ}=Object.prototype,{getPrototypeOf:A3}=Object,{iterator:T2,toStringTag:o9}=Symbol,I2=(e=>t=>{const r=BJ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ld=e=>(e=e.toLowerCase(),t=>I2(t)===e),P2=e=>t=>typeof t===e,{isArray:Kv}=Array,Qb=P2("undefined");function UJ(e){return e!==null&&!Qb(e)&&e.constructor!==null&&!Qb(e.constructor)&&dl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const l9=Ld("ArrayBuffer");function $J(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&l9(e.buffer),t}const qJ=P2("string"),dl=P2("function"),c9=P2("number"),O2=e=>e!==null&&typeof e=="object",VJ=e=>e===!0||e===!1,NN=e=>{if(I2(e)!=="object")return!1;const t=A3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(o9 in e)&&!(T2 in e)},zJ=Ld("Date"),HJ=Ld("File"),WJ=Ld("Blob"),GJ=Ld("FileList"),YJ=e=>O2(e)&&dl(e.pipe),KJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dl(e.append)&&((t=I2(e))==="formdata"||t==="object"&&dl(e.toString)&&e.toString()==="[object FormData]"))},XJ=Ld("URLSearchParams"),[QJ,JJ,ZJ,eZ]=["ReadableStream","Request","Response","Headers"].map(Ld),tZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function By(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Kv(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function d9(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const zp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,u9=e=>!Qb(e)&&e!==zp;function p5(){const{caseless:e}=u9(this)&&this||{},t={},r=(n,s)=>{const i=e&&d9(t,s)||s;NN(t[i])&&NN(n)?t[i]=p5(t[i],n):NN(n)?t[i]=p5({},n):Kv(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&By(arguments[n],r);return t}const rZ=(e,t,r,{allOwnKeys:n}={})=>(By(t,(s,i)=>{r&&dl(s)?e[i]=i9(s,r):e[i]=s},{allOwnKeys:n}),e),nZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aZ=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sZ=(e,t,r,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&A3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iZ=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},oZ=e=>{if(!e)return null;if(Kv(e))return e;let t=e.length;if(!c9(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&A3(Uint8Array)),cZ=(e,t)=>{const n=(e&&e[T2]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},dZ=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},uZ=Ld("HTMLFormElement"),hZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),$O=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),fZ=Ld("RegExp"),h9=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};By(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},mZ=e=>{h9(e,(t,r)=>{if(dl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(dl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pZ=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Kv(e)?n(e):n(String(e).split(t)),r},xZ=()=>{},vZ=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gZ(e){return!!(e&&dl(e.append)&&e[o9]==="FormData"&&e[T2])}const bZ=e=>{const t=new Array(10),r=(n,s)=>{if(O2(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=Kv(n)?[]:{};return By(n,(o,l)=>{const c=r(o,s+1);!Qb(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},yZ=Ld("AsyncFunction"),jZ=e=>e&&(O2(e)||dl(e))&&dl(e.then)&&dl(e.catch),f9=((e,t)=>e?setImmediate:t?((r,n)=>(zp.addEventListener("message",({source:s,data:i})=>{s===zp&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),zp.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",dl(zp.postMessage)),NZ=typeof queueMicrotask<"u"?queueMicrotask.bind(zp):typeof process<"u"&&process.nextTick||f9,wZ=e=>e!=null&&dl(e[T2]),Lt={isArray:Kv,isArrayBuffer:l9,isBuffer:UJ,isFormData:KJ,isArrayBufferView:$J,isString:qJ,isNumber:c9,isBoolean:VJ,isObject:O2,isPlainObject:NN,isReadableStream:QJ,isRequest:JJ,isResponse:ZJ,isHeaders:eZ,isUndefined:Qb,isDate:zJ,isFile:HJ,isBlob:WJ,isRegExp:fZ,isFunction:dl,isStream:YJ,isURLSearchParams:XJ,isTypedArray:lZ,isFileList:GJ,forEach:By,merge:p5,extend:rZ,trim:tZ,stripBOM:nZ,inherits:aZ,toFlatObject:sZ,kindOf:I2,kindOfTest:Ld,endsWith:iZ,toArray:oZ,forEachEntry:cZ,matchAll:dZ,isHTMLForm:uZ,hasOwnProperty:$O,hasOwnProp:$O,reduceDescriptors:h9,freezeMethods:mZ,toObjectSet:pZ,toCamelCase:hZ,noop:xZ,toFiniteNumber:vZ,findKey:d9,global:zp,isContextDefined:u9,isSpecCompliantForm:gZ,toJSONObject:bZ,isAsyncFn:yZ,isThenable:jZ,setImmediate:f9,asap:NZ,isIterable:wZ};function bn(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Lt.inherits(bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Lt.toJSONObject(this.config),code:this.code,status:this.status}}});const m9=bn.prototype,p9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p9[e]={value:e}});Object.defineProperties(bn,p9);Object.defineProperty(m9,"isAxiosError",{value:!0});bn.from=(e,t,r,n,s,i)=>{const o=Object.create(m9);return Lt.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),bn.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const SZ=null;function x5(e){return Lt.isPlainObject(e)||Lt.isArray(e)}function x9(e){return Lt.endsWith(e,"[]")?e.slice(0,-2):e}function qO(e,t,r){return e?e.concat(t).map(function(s,i){return s=x9(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function CZ(e){return Lt.isArray(e)&&!e.some(x5)}const kZ=Lt.toFlatObject(Lt,{},null,function(t){return/^is[A-Z]/.test(t)});function M2(e,t,r){if(!Lt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Lt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!Lt.isUndefined(b[g])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Lt.isSpecCompliantForm(t);if(!Lt.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Lt.isDate(v))return v.toISOString();if(Lt.isBoolean(v))return v.toString();if(!c&&Lt.isBlob(v))throw new bn("Blob is not supported. Use a Buffer instead.");return Lt.isArrayBuffer(v)||Lt.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,b){let y=v;if(v&&!b&&typeof v=="object"){if(Lt.endsWith(g,"{}"))g=n?g:g.slice(0,-2),v=JSON.stringify(v);else if(Lt.isArray(v)&&CZ(v)||(Lt.isFileList(v)||Lt.endsWith(g,"[]"))&&(y=Lt.toArray(v)))return g=x9(g),y.forEach(function(N,k){!(Lt.isUndefined(N)||N===null)&&t.append(o===!0?qO([g],k,i):o===null?g:g+"[]",d(N))}),!1}return x5(v)?!0:(t.append(qO(b,g,i),d(v)),!1)}const h=[],m=Object.assign(kZ,{defaultVisitor:u,convertValue:d,isVisitable:x5});function p(v,g){if(!Lt.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(v),Lt.forEach(v,function(y,C){(!(Lt.isUndefined(y)||y===null)&&s.call(t,y,Lt.isString(C)?C.trim():C,g,m))===!0&&p(y,g?g.concat(C):[C])}),h.pop()}}if(!Lt.isObject(e))throw new TypeError("data must be an object");return p(e),t}function VO(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function T3(e,t){this._pairs=[],e&&M2(e,this,t)}const v9=T3.prototype;v9.append=function(t,r){this._pairs.push([t,r])};v9.toString=function(t){const r=t?function(n){return t.call(this,n,VO)}:VO;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function _Z(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function g9(e,t,r){if(!t)return e;const n=r&&r.encode||_Z;Lt.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Lt.isURLSearchParams(t)?t.toString():new T3(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class zO{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Lt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const b9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EZ=typeof URLSearchParams<"u"?URLSearchParams:T3,DZ=typeof FormData<"u"?FormData:null,AZ=typeof Blob<"u"?Blob:null,TZ={isBrowser:!0,classes:{URLSearchParams:EZ,FormData:DZ,Blob:AZ},protocols:["http","https","file","blob","url","data"]},I3=typeof window<"u"&&typeof document<"u",v5=typeof navigator=="object"&&navigator||void 0,IZ=I3&&(!v5||["ReactNative","NativeScript","NS"].indexOf(v5.product)<0),PZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OZ=I3&&window.location.href||"http://localhost",MZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I3,hasStandardBrowserEnv:IZ,hasStandardBrowserWebWorkerEnv:PZ,navigator:v5,origin:OZ},Symbol.toStringTag,{value:"Module"})),jo={...MZ,...TZ};function RZ(e,t){return M2(e,new jo.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return jo.isNode&&Lt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function FZ(e){return Lt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function LZ(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function y9(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Lt.isArray(s)?s.length:o,c?(Lt.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!Lt.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&Lt.isArray(s[o])&&(s[o]=LZ(s[o])),!l)}if(Lt.isFormData(e)&&Lt.isFunction(e.entries)){const r={};return Lt.forEachEntry(e,(n,s)=>{t(FZ(n),s,r,0)}),r}return null}function BZ(e,t,r){if(Lt.isString(e))try{return(t||JSON.parse)(e),Lt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Uy={transitional:b9,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=Lt.isObject(t);if(i&&Lt.isHTMLForm(t)&&(t=new FormData(t)),Lt.isFormData(t))return s?JSON.stringify(y9(t)):t;if(Lt.isArrayBuffer(t)||Lt.isBuffer(t)||Lt.isStream(t)||Lt.isFile(t)||Lt.isBlob(t)||Lt.isReadableStream(t))return t;if(Lt.isArrayBufferView(t))return t.buffer;if(Lt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RZ(t,this.formSerializer).toString();if((l=Lt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return M2(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),BZ(t)):t}],transformResponse:[function(t){const r=this.transitional||Uy.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Lt.isResponse(t)||Lt.isReadableStream(t))return t;if(t&&Lt.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?bn.from(l,bn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jo.classes.FormData,Blob:jo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Lt.forEach(["delete","get","head","post","put","patch"],e=>{Uy.headers[e]={}});const UZ=Lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$Z=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&UZ[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},HO=Symbol("internals");function sb(e){return e&&String(e).trim().toLowerCase()}function wN(e){return e===!1||e==null?e:Lt.isArray(e)?e.map(wN):String(e)}function qZ(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const VZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pk(e,t,r,n,s){if(Lt.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Lt.isString(t)){if(Lt.isString(n))return t.indexOf(n)!==-1;if(Lt.isRegExp(n))return n.test(t)}}function zZ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function HZ(e,t){const r=Lt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let ul=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,d){const u=sb(c);if(!u)throw new Error("header name must be a non-empty string");const h=Lt.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=wN(l))}const o=(l,c)=>Lt.forEach(l,(d,u)=>i(d,u,c));if(Lt.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Lt.isString(t)&&(t=t.trim())&&!VZ(t))o($Z(t),r);else if(Lt.isObject(t)&&Lt.isIterable(t)){let l={},c,d;for(const u of t){if(!Lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Lt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=sb(t),t){const n=Lt.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return qZ(s);if(Lt.isFunction(r))return r.call(this,s,n);if(Lt.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=sb(t),t){const n=Lt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||pk(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=sb(o),o){const l=Lt.findKey(n,o);l&&(!r||pk(n,n[l],l,r))&&(delete n[l],s=!0)}}return Lt.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||pk(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return Lt.forEach(this,(s,i)=>{const o=Lt.findKey(n,i);if(o){r[o]=wN(s),delete r[i];return}const l=t?zZ(i):String(i).trim();l!==i&&delete r[i],r[l]=wN(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Lt.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Lt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[HO]=this[HO]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=sb(o);n[l]||(HZ(s,o),n[l]=!0)}return Lt.isArray(t)?t.forEach(i):i(t),this}};ul.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Lt.reduceDescriptors(ul.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Lt.freezeMethods(ul);function xk(e,t){const r=this||Uy,n=t||r,s=ul.from(n.headers);let i=n.data;return Lt.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function j9(e){return!!(e&&e.__CANCEL__)}function Xv(e,t,r){bn.call(this,e??"canceled",bn.ERR_CANCELED,t,r),this.name="CanceledError"}Lt.inherits(Xv,bn,{__CANCEL__:!0});function N9(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new bn("Request failed with status code "+r.status,[bn.ERR_BAD_REQUEST,bn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WZ(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function GZ(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[s]=c,n[s]=d;let h=i,m=0;for(;h!==s;)m+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(m*1e3/p):void 0}}function YZ(e,t){let r=0,n=1e3/t,s,i;const o=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const zN=(e,t,r=3)=>{let n=0;const s=GZ(50,250);return YZ(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=s(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},WO=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},GO=e=>(...t)=>Lt.asap(()=>e(...t)),KZ=jo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,jo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(jo.origin),jo.navigator&&/(msie|trident)/i.test(jo.navigator.userAgent)):()=>!0,XZ=jo.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];Lt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Lt.isString(n)&&o.push("path="+n),Lt.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QZ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JZ(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function w9(e,t,r){let n=!QZ(t);return e&&(n||r==!1)?JZ(e,t):t}const YO=e=>e instanceof ul?{...e}:e;function vx(e,t){t=t||{};const r={};function n(d,u,h,m){return Lt.isPlainObject(d)&&Lt.isPlainObject(u)?Lt.merge.call({caseless:m},d,u):Lt.isPlainObject(u)?Lt.merge({},u):Lt.isArray(u)?u.slice():u}function s(d,u,h,m){if(Lt.isUndefined(u)){if(!Lt.isUndefined(d))return n(void 0,d,h,m)}else return n(d,u,h,m)}function i(d,u){if(!Lt.isUndefined(u))return n(void 0,u)}function o(d,u){if(Lt.isUndefined(u)){if(!Lt.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>s(YO(d),YO(u),h,!0)};return Lt.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,m=h(e[u],t[u],u);Lt.isUndefined(m)&&h!==l||(r[u]=m)}),r}const S9=e=>{const t=vx({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=ul.from(o),t.url=g9(w9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Lt.isFormData(r)){if(jo.hasStandardBrowserEnv||jo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(jo.hasStandardBrowserEnv&&(n&&Lt.isFunction(n)&&(n=n(t)),n||n!==!1&&KZ(t.url))){const d=s&&i&&XZ.read(i);d&&o.set(s,d)}return t},ZZ=typeof XMLHttpRequest<"u",eee=ZZ&&function(e){return new Promise(function(r,n){const s=S9(e);let i=s.data;const o=ul.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,m,p,v;function g(){p&&p(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const N=ul.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:N,config:e,request:b};N9(function(E){r(E),g()},function(E){n(E),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new bn("Request aborted",bn.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new bn("Network Error",bn.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||b9;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new bn(k,S.clarifyTimeoutError?bn.ETIMEDOUT:bn.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&Lt.forEach(o.toJSON(),function(k,S){b.setRequestHeader(S,k)}),Lt.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),d&&([m,v]=zN(d,!0),b.addEventListener("progress",m)),c&&b.upload&&([h,p]=zN(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=N=>{b&&(n(!N||N.type?new Xv(null,e,b):N),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const C=WZ(s.url);if(C&&jo.protocols.indexOf(C)===-1){n(new bn("Unsupported protocol "+C+":",bn.ERR_BAD_REQUEST,e));return}b.send(i||null)})},tee=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof bn?u:new Xv(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new bn(`timeout ${t} of ms exceeded`,bn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>Lt.asap(l),c}},ree=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},nee=async function*(e,t){for await(const r of aee(e))yield*ree(r,t)},aee=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},KO=(e,t,r,n)=>{const s=nee(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},R2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",C9=R2&&typeof ReadableStream=="function",see=R2&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),k9=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iee=C9&&k9(()=>{let e=!1;const t=new Request(jo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),XO=64*1024,g5=C9&&k9(()=>Lt.isReadableStream(new Response("").body)),HN={stream:g5&&(e=>e.body)};R2&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!HN[t]&&(HN[t]=Lt.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new bn(`Response type '${t}' is not supported`,bn.ERR_NOT_SUPPORT,n)})})})(new Response);const oee=async e=>{if(e==null)return 0;if(Lt.isBlob(e))return e.size;if(Lt.isSpecCompliantForm(e))return(await new Request(jo.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Lt.isArrayBufferView(e)||Lt.isArrayBuffer(e))return e.byteLength;if(Lt.isURLSearchParams(e)&&(e=e+""),Lt.isString(e))return(await see(e)).byteLength},lee=async(e,t)=>{const r=Lt.toFiniteNumber(e.getContentLength());return r??oee(t)},cee=R2&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:m}=S9(e);d=d?(d+"").toLowerCase():"text";let p=tee([s,i&&i.toAbortSignal()],o),v;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&iee&&r!=="get"&&r!=="head"&&(b=await lee(u,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),D;if(Lt.isFormData(n)&&(D=S.headers.get("content-type"))&&u.setContentType(D),S.body){const[E,T]=WO(b,zN(GO(c)));n=KO(S.body,XO,E,T)}}Lt.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...m,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let C=await fetch(v,m);const N=g5&&(d==="stream"||d==="response");if(g5&&(l||N&&g)){const S={};["status","statusText","headers"].forEach(A=>{S[A]=C[A]});const D=Lt.toFiniteNumber(C.headers.get("content-length")),[E,T]=l&&WO(D,zN(GO(l),!0))||[];C=new Response(KO(C.body,XO,E,()=>{T&&T(),g&&g()}),S)}d=d||"text";let k=await HN[Lt.findKey(HN,d)||"text"](C,e);return!N&&g&&g(),await new Promise((S,D)=>{N9(S,D,{data:k,headers:ul.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:v})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new bn("Network Error",bn.ERR_NETWORK,e,v),{cause:y.cause||y}):bn.from(y,y&&y.code,e,v)}}),b5={http:SZ,xhr:eee,fetch:cee};Lt.forEach(b5,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QO=e=>`- ${e}`,dee=e=>Lt.isFunction(e)||e===null||e===!1,_9={getAdapter:e=>{e=Lt.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!dee(r)&&(n=b5[(o=String(r)).toLowerCase()],n===void 0))throw new bn(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(QO).join(`
`):" "+QO(i[0]):"as no adapter specified";throw new bn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:b5};function vk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xv(null,e)}function JO(e){return vk(e),e.headers=ul.from(e.headers),e.data=xk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_9.getAdapter(e.adapter||Uy.adapter)(e).then(function(n){return vk(e),n.data=xk.call(e,e.transformResponse,n),n.headers=ul.from(n.headers),n},function(n){return j9(n)||(vk(e),n&&n.response&&(n.response.data=xk.call(e,e.transformResponse,n.response),n.response.headers=ul.from(n.response.headers))),Promise.reject(n)})}const E9="1.10.0",F2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{F2[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ZO={};F2.transitional=function(t,r,n){function s(i,o){return"[Axios v"+E9+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new bn(s(o," has been removed"+(r?" in "+r:"")),bn.ERR_DEPRECATED);return r&&!ZO[o]&&(ZO[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};F2.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function uee(e,t,r){if(typeof e!="object")throw new bn("options must be an object",bn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new bn("option "+i+" must be "+c,bn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new bn("Unknown option "+i,bn.ERR_BAD_OPTION)}}const SN={assertOptions:uee,validators:F2},xu=SN.validators;let rx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zO,response:new zO}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=vx(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&SN.assertOptions(n,{silentJSONParsing:xu.transitional(xu.boolean),forcedJSONParsing:xu.transitional(xu.boolean),clarifyTimeoutError:xu.transitional(xu.boolean)},!1),s!=null&&(Lt.isFunction(s)?r.paramsSerializer={serialize:s}:SN.assertOptions(s,{encode:xu.function,serialize:xu.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),SN.assertOptions(r,{baseUrl:xu.spelling("baseURL"),withXsrfToken:xu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Lt.merge(i.common,i[r.method]);i&&Lt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=ul.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,m;if(!c){const v=[JO.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,d),m=v.length,u=Promise.resolve(r);h<m;)u=u.then(v[h++],v[h++]);return u}m=l.length;let p=r;for(h=0;h<m;){const v=l[h++],g=l[h++];try{p=v(p)}catch(b){g.call(this,b);break}}try{u=JO.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,m=d.length;h<m;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=vx(this.defaults,t);const r=w9(t.baseURL,t.url,t.allowAbsoluteUrls);return g9(r,t.params,t.paramsSerializer)}};Lt.forEach(["delete","get","head","options"],function(t){rx.prototype[t]=function(r,n){return this.request(vx(n||{},{method:t,url:r,data:(n||{}).data}))}});Lt.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(vx(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}rx.prototype[t]=r(),rx.prototype[t+"Form"]=r(!0)});let hee=class D9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Xv(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new D9(function(s){t=s}),cancel:t}}};function fee(e){return function(r){return e.apply(null,r)}}function mee(e){return Lt.isObject(e)&&e.isAxiosError===!0}const y5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(y5).forEach(([e,t])=>{y5[t]=e});function A9(e){const t=new rx(e),r=i9(rx.prototype.request,t);return Lt.extend(r,rx.prototype,t,{allOwnKeys:!0}),Lt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return A9(vx(e,s))},r}const Oe=A9(Uy);Oe.Axios=rx;Oe.CanceledError=Xv;Oe.CancelToken=hee;Oe.isCancel=j9;Oe.VERSION=E9;Oe.toFormData=M2;Oe.AxiosError=bn;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=fee;Oe.isAxiosError=mee;Oe.mergeConfig=vx;Oe.AxiosHeaders=ul;Oe.formToJSON=e=>y9(Lt.isHTMLForm(e)?new FormData(e):e);Oe.getAdapter=_9.getAdapter;Oe.HttpStatusCode=y5;Oe.default=Oe;const{Axios:z8e,AxiosError:H8e,CanceledError:W8e,isCancel:G8e,CancelToken:Y8e,VERSION:K8e,all:X8e,Cancel:Q8e,isAxiosError:J8e,spread:Z8e,toFormData:eBe,AxiosHeaders:tBe,HttpStatusCode:rBe,formToJSON:nBe,getAdapter:aBe,mergeConfig:sBe}=Oe,pee=()=>{const[e,t]=w.useState({dashboard:!1,superAdmin:!1,application:!1,call:!1,master:!1,category:!1,mrp:!1,purchase:!1,sales:!1,inventory:!1,accounts:!1,invoice:!1,billing:!1,purchasereport:!1,salesreport:!1,inventoryreport:!1,accountsreport:!1,crm:!1,vendorBilling:!1,project:!1,campaigns:!1,hrms:!1}),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(""),c=Xu(),d={purchasereport:"purchase",salesreport:"sales",inventoryreport:"inventory",accountsreport:"accounts",vendorBilling:"invoice",billing:"invoice"},u=v=>r.some(g=>g.name===v),h=(v,g)=>r.find(y=>y.name===v)?.subPermissions?.includes(g)||!1,m=v=>window.location.pathname===v,p=v=>{t(g=>{const b={...g},y=d[v];return y?(Object.keys(b).forEach(C=>{C!==v&&C!==y&&(b[C]=!1)}),b[v]=!g[v],b[y]=!0):(Object.keys(b).forEach(C=>{C!==v&&(b[C]=!1)}),b[v]=!g[v]),localStorage.setItem("openSubmenus",JSON.stringify(b)),b})};return w.useEffect(()=>{const v=localStorage.getItem("openSubmenus");v&&t(JSON.parse(v))},[]),w.useEffect(()=>{const v=async()=>{i(!0);try{const y=localStorage.getItem("activeRole");if(y){l(y);const N=(await Oe.get(`/api/permissions/${y}`)).data.data||[];if(n(N),localStorage.setItem("cachedPermissions",JSON.stringify(N)),localStorage.setItem("prevActiveRole",y),N.length>0){const k=N[0].subPermissions?.[0];k&&setTimeout(()=>{const S=document.querySelectorAll("a");for(let D of S)if(D.textContent?.trim()===k){const T=D.getAttribute("href");T&&c(T);break}},150)}}}catch(y){console.error("Error fetching permissions:",y),n([])}finally{i(!1)}},g=localStorage.getItem("prevActiveRole"),b=localStorage.getItem("activeRole");if(b&&b!==g)console.log("New role detected, fetching permissions"),v();else{console.log("Same role as before  loading cached permissions");const y=localStorage.getItem("cachedPermissions");y?(n(JSON.parse(y)),l(b),i(!1)):v()}},[c]),s?a.jsx("div",{className:"two-col-sidebar",id:"two-col-sidebar",children:a.jsx("div",{className:"sidebar",id:"sidebar-two",children:a.jsx("div",{className:"sidebar-inner",children:a.jsxs("div",{className:"text-center p-3",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading permissions..."})]})})})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"sidebar",id:"sidebar",children:[a.jsxs("div",{className:"sidebar-logo",children:[a.jsx("a",{href:"/",className:"logo logo-normal",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"logo-small",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"dark-logo",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})})]}),a.jsx("div",{className:"sidebar-inner slimscroll",children:a.jsx("div",{id:"sidebar-menu",className:"sidebar-menu",children:a.jsxs("ul",{children:[u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/",className:m("/")?"active":"",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"Dashboard"})]})})})}),u("Master Data")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/material-form","/customer-form","/vendor-form","/customer-price-list","/vendor-price-list","/tax-form","/LocationMaster","/ProcessList","/GeneralCondition"].some(v=>m(v))&&e.master?"active subdrop":"",onClick:v=>{v.preventDefault(),p("master")},children:[a.jsx("i",{className:"ti ti-server"}),a.jsx("span",{children:"Master Data"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.master?"block":"none"},children:[h("Master Data","Material Master")&&a.jsx("li",{children:a.jsx("a",{href:"/material-form",className:m("/material-form")?"active":"",children:"Material Master"})}),h("Master Data","Customer Master")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-form",className:m("/customer-form")?"active":"",children:"Customer Master"})}),h("Master Data","Vendor Master")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-form",className:m("/vendor-form")?"active":"",children:"Vendor Master"})}),h("Master Data","Customer Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-price-list",className:m("/customer-price-list")?"active":"",children:"Customer Price List"})}),h("Master Data","Vendor Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-price-list",className:m("/vendor-price-list")?"active":"",children:"Vendor Price List"})}),h("Master Data","Tax List")&&a.jsx("li",{children:a.jsx("a",{href:"/tax-form",className:m("/tax-form")?"active":"",children:"Tax List"})}),h("Master Data","Location Master")&&a.jsx("li",{children:a.jsx("a",{href:"/LocationMaster",className:m("/LocationMaster")?"active":"",children:"Location Master"})}),h("Master Data","Process List Master")&&a.jsx("li",{children:a.jsx("a",{href:"/ProcessList",className:m("/ProcessList")?"active":"",children:"Process List Master"})}),h("Master Data","General Condition Master")&&a.jsx("li",{children:a.jsx("a",{href:"/GeneralCondition",className:m("/GeneralCondition")?"active":"",children:"General Condition Master"})})]})]})})}),u("MRP")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/MRP",className:m("/MRP")?"active":"",children:[a.jsx("i",{className:"ti ti-chart-line"}),a.jsx("span",{children:"MRP"})]})})})}),u("Category")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:e.category?"active subdrop":"",onClick:v=>{v.preventDefault(),p("category")},children:[a.jsx("i",{className:"bi bi-database"}),a.jsx("span",{children:"Category"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.category?"block":"none"},children:[h("Category","Material Category")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialCategory",className:m("/MaterialCategory")?"active":"",children:"Material Category"})}),h("Category","Customer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-category-form",className:m("/customer-category-form")?"active":"",children:"Customer Category"})}),h("Category","Vendor Category")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-category",className:m("/vendor-category")?"active":"",children:"Vendor Category"})}),h("Category","Purchase Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/Purchaserequestcat",className:m("/Purchaserequestcat")?"active":"",children:"Purchase Indent Category"})}),h("Category","Sales Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesCategory",className:m("/SalesCategory")?"active":"",children:"Sales Indent Category"})}),h("Category","PO Category")&&a.jsx("li",{children:a.jsx("a",{href:"/POCategory",className:m("/POCategory")?"active":"",children:"PO Category"})}),h("Category","Sales RFQ Category")&&a.jsx("li",{children:a.jsx("a",{href:"/sale-quotation-category-form",className:m("/sale-quotation-category-form")?"active":"",children:"Sales RFQ Category"})}),h("Category","Sales Order Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderCategoryForm",className:m("/SalesOrderCategoryForm")?"active":"",children:"Sales Order Category"})}),h("Category","Goods Receipt Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsReceiptCategory",className:m("/GoodsReceiptCategory")?"active":"",children:"Goods Receipt Category"})}),h("Category","Goods Issue Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsIssueCategory",className:m("/GoodsIssueCategory")?"active":"",children:"Goods Issue Category"})}),h("Category","Invoice Category")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceCategory",className:m("/InvoiceCategory")?"active":"",children:"Invoice Category"})}),h("Category","Billing Category")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingCategory",className:m("/BillingCategory")?"active":"",children:"Billing Category"})}),h("Category","Sale Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SaleContractCategoryForm",className:m("/SaleContractCategoryForm")?"active":"",children:"Sale Contract Category"})}),h("Category","Transfer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/TransferCategory",className:m("/TransferCategory")?"active":"",children:"Transfer Category"})}),h("Category","Purchase Quotation Category")&&a.jsx("li",{children:a.jsx("a",{href:"/RFQCategoryForm",className:m("/RFQCategoryForm")?"active":"",children:"RFQ Category"})}),h("Category","Purchase Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractCategory",className:m("/PurchaseContractCategory")?"active":"",children:"Purchase Contract Category"})})]})]})})}),u("Purchase")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/PurchaseEnquiry","/PurchaseQuotation","/PurchaseContract","/PurchaseOrder","/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchase?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchase")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Purchase"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.purchase?"block":"none"},children:[h("Purchase","Purchase Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseEnquiry",className:m("/PurchaseEnquiry")?"active":"",children:"Purchase Enquiry"})}),h("Purchase","Purchase Quotation")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotation",className:m("/PurchaseQuotation")?"active":"",children:"Purchase Quotation"})}),h("Purchase","Purchase Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContract",className:m("/PurchaseContract")?"active":"",children:"Purchase Contract"})}),h("Purchase","Purchase Order")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrder",className:m("/PurchaseOrder")?"active":"",children:"Purchase Order"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchasereport")},children:["Purchase Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"block":"none"},children:[h("Purchase","Purchase Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseIndentsummary",className:m("/PurchaseIndentsummary")?"active":"",children:"Purchase Enquiry List"})}),h("Purchase","Purchase Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotationsDisplay",className:m("/PurchaseQuotationsDisplay")?"active":"",children:"Purchase Quotations List"})}),h("Purchase","Purchase Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractsummary",className:m("/PurchaseContractsummary")?"active":"",children:"Purchase Contract List"})}),h("Purchase","Purchase Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrderList",className:m("/PurchaseOrderList")?"active":"",children:"Purchase Order List"})})]})]})]})]})})}),u("Sales")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/SalesEnquiry","/SalesQuotation","/SalesContract","/SalesOrder","/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.sales?"active subdrop":"",onClick:v=>{v.preventDefault(),p("sales")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Sales"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.sales?"block":"none"},children:[h("Sales","Sales Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiry",className:m("/SalesEnquiry")?"active":"",children:"Sales Enquiry"})}),h("Sales","Sales Quotation Form")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotation",className:m("/SalesQuotation")?"active":"",children:"Sales Quotation"})}),h("Sales","Sales Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContract",className:m("/SalesContract")?"active":"",children:"Sales Contract"})}),h("Sales","Sales Order")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrder",className:m("/SalesOrder")?"active":"",children:"Sales Order"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("salesreport")},children:["Sales Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"block":"none"},children:[h("Sales","Sales Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiryList",className:m("/SalesEnquiryList")?"active":"",children:"Sales Enquiry List"})}),h("Sales","Sales Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotationList",className:m("/SalesQuotationList")?"active":"",children:"Sales Quotations List"})}),h("Sales","Sales Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContractsummary",className:m("/SalesContractsummary")?"active":"",children:"Sales Contract List"})}),h("Sales","Sales Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderList",className:m("/SalesOrderList")?"active":"",children:"Sales Order List"})})]})]})]})]})})}),u("Inventory")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/MatrialReceipt","/MatrialIssue","/MatrialTransfer","/StockListERP","/MatrialReceiptList","/MatrialTransferList"].some(v=>m(v))||e.inventory?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventory")},children:[a.jsx("i",{className:"ti ti-box"}),a.jsx("span",{children:"Inventory"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.inventory?"block":"none"},children:[h("Inventory","Material Receipt")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceipt",className:m("/MatrialReceipt")?"active":"",children:"Material Receipt"})}),h("Inventory","Material Issue")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialIssue",className:m("/MatrialIssue")?"active":"",children:"Material Issue"})}),h("Inventory","Material Transfer")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransfer",className:m("/MatrialTransfer")?"active":"",children:"Delivery Challan"})}),h("Inventory","Stock List")&&a.jsx("li",{children:a.jsx("a",{href:"/StockListERP",className:m("/StockListERP")?"active":"",children:"Stock List"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventoryreport")},children:["Inventory Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"block":"none"},children:[h("Inventory","Material Receipt List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceiptList",className:m("/MatrialReceiptList")?"active":"",children:"Material Receipt List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialIssueList",className:m("/MaterialIssueList")?"active":"",children:"Material Issue List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransferList",className:m("/MatrialTransferList")?"active":"",children:"Material Transfer List"})})]})]})]})]})})}),u("Invoice")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("invoice")},className:["/InvoiceForm","/InvoiceList","/BillingForm","/BillingDisplay"].some(v=>m(v))||e.invoice?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-file-dollar"}),a.jsx("span",{children:"Invoice"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.invoice?"block":"none"},children:[a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("vendorBilling")},className:["/InvoiceForm","/InvoiceList"].some(v=>m(v))||e.vendorBilling?"active subdrop":"",children:[a.jsx("span",{children:"Vendor Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.vendorBilling?"block":"none"},children:[h("Invoice","Invoice Form")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceForm",className:m("/InvoiceForm")?"active":"",children:"Vendor Invoice Creation"})}),h("Invoice","Invoice List")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceList",className:m("/InvoiceList")?"active":"",children:"Vendor Invoice List"})})]})]}),u("Billing")&&a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("billing")},className:["/BillingForm","/BillingDisplay"].some(v=>m(v))||e.billing?"active subdrop":"",children:[a.jsx("span",{children:"Customer Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.billing?"block":"none"},children:[h("Billing","Billing Form")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingForm",className:m("/BillingForm")?"active":"",children:"Customer Invoice Creation"})}),h("Billing","Billing List")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingDisplay",className:m("/BillingDisplay")?"active":"",children:"Customer Invoice List"})})]})]})]})]})})}),u("Accounts")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("accounts")},className:["/gst","/Ledger","/PaymentDisplay"].some(v=>m(v))||e.accounts?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-credit-card"}),a.jsx("span",{children:"Accounts"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.accounts?"block":"none"},children:[h("Accounts","GST")&&a.jsx("li",{children:a.jsx("a",{href:"/gst",className:m("/gst")?"active":"",children:"GST"})}),h("Accounts","Ledger")&&a.jsx("li",{children:a.jsx("a",{href:"/Ledger",className:m("/Ledger")?"active":"",children:"Ledger"})}),h("Accounts","Payments")&&a.jsx("li",{children:a.jsx("a",{href:"/PaymentDisplay",className:m("/PaymentDisplay")?"active":"",children:"Payments"})})]})]})})}),u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{target:"_blank",href:"https://ewaybillgst.gov.in/login.aspx",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"E-Way Bill"})]})})})}),u("CRM")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/contacts","/leads","/proposals","/sources","/lost-reason","/contact-stage","/industry","/calls"].some(v=>m(v))||e.crm?"active subdrop":"",onClick:v=>{v.preventDefault(),p("crm")},children:[a.jsx("i",{className:"ti ti-address-book"}),a.jsx("span",{children:"CRM"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.crm?"block":"none"},children:[h("CRM","Contacts List")&&a.jsx("li",{children:a.jsx("a",{href:"/contacts",className:m("/contacts")?"active":"",children:"Contacts List"})}),h("CRM","Leads")&&a.jsx("li",{children:a.jsx("a",{href:"/leads",className:m("/leads")?"active":"",children:"Leads"})}),h("CRM","Proposals")&&a.jsx("li",{children:a.jsx("a",{href:"/proposals",className:m("/proposals")?"active":"",children:"Proposals"})}),h("CRM","Sources")&&a.jsx("li",{children:a.jsx("a",{href:"/sources",className:m("/sources")?"active":"",children:"Sources"})}),h("CRM","Lost Reason")&&a.jsx("li",{children:a.jsx("a",{href:"/lost-reason",className:m("/lost-reason")?"active":"",children:"Lost Reason"})}),h("CRM","Contact Stage")&&a.jsx("li",{children:a.jsx("a",{href:"/contact-stage",className:m("/contact-stage")?"active":"",children:"Contact Stage"})}),h("CRM","Industry")&&a.jsx("li",{children:a.jsx("a",{href:"/industry",className:m("/industry")?"active":"",children:"Industry"})}),h("CRM","Calls")&&a.jsx("li",{children:a.jsx("a",{href:"/calls",className:m("/calls")?"active":"",children:"Calls"})})]})]})})}),u("Project Management")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/projects","/tasks","/milestones","/time-entries"].some(v=>m(v))||e.project?"active subdrop":"",onClick:v=>{v.preventDefault(),p("project")},children:[a.jsx("i",{className:"ti ti-briefcase"}),a.jsx("span",{children:"Project Management"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.project?"block":"none"},children:[h("Project Management","Projects")&&a.jsx("li",{children:a.jsx("a",{href:"/projects",className:m("/projects")?"active":"",children:"Projects"})}),h("Project Management","Tasks")&&a.jsx("li",{children:a.jsx("a",{href:"/tasks",className:m("/tasks")?"active":"",children:"Tasks"})}),h("Project Management","Milestones")&&a.jsx("li",{children:a.jsx("a",{href:"/milestones",className:m("/milestones")?"active":"",children:"Milestones"})}),h("Project Management","Time Entries")&&a.jsx("li",{children:a.jsx("a",{href:"/time-entries",className:m("/time-entries")?"active":"",children:"Time Entries"})})]})]})})}),u("Campaigns")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/campaigns","/analytics"].some(v=>m(v))||e.campaigns?"active subdrop":"",onClick:v=>{v.preventDefault(),p("campaigns")},children:[a.jsx("i",{className:"ti ti-brand-campaignmonitor"}),"  ",a.jsx("span",{children:"Campaigns"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.campaigns?"block":"none"},children:[h("Campaigns","Campaigns")&&a.jsx("li",{children:a.jsx("a",{href:"/campaigns",className:m("/campaigns")?"active":"",children:"Campaigns"})}),h("Campaigns","Analytics")&&a.jsx("li",{children:a.jsx("a",{href:"/analytics",className:m("/analytics")?"active":"",children:"Analytics"})})]})]})})}),u("HRMS")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/designation","/departments","/employee","/leaverequest","/leavemanagement","/payroll","/attendancereg","/attendancetaking","/attendancereport"].some(v=>m(v))||e.hrms?"active subdrop":"",onClick:v=>{v.preventDefault(),p("hrms")},children:[a.jsx("i",{className:"ti ti-user-circle"}),a.jsx("span",{children:"HRMS"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.hrms?"block":"none"},children:[h("HRMS","Designation")&&a.jsx("li",{children:a.jsx("a",{href:"/designation",className:m("/designation")?"active":"",children:"Designation"})}),h("HRMS","Department")&&a.jsx("li",{children:a.jsx("a",{href:"/departments",className:m("/departments")?"active":"",children:"Departments"})}),h("HRMS","Employee")&&a.jsx("li",{children:a.jsx("a",{href:"/employee",className:m("/employee")?"active":"",children:"Employee"})}),h("HRMS","LeaveRequests")&&a.jsx("li",{children:a.jsx("a",{href:"/leaverequest",className:m("/leaverequest")?"active":"",children:"Leave Request"})}),h("HRMS","LeaveRequestManagement")&&a.jsx("li",{children:a.jsx("a",{href:"/leavemanagement",className:m("/leavemanagement")?"active":"",children:"Leave Management"})}),h("HRMS","Payroll")&&a.jsx("li",{children:a.jsx("a",{href:"/payroll",className:m("/payroll")?"active":"",children:"Payroll"})}),h("HRMS","AttendanceRegister")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereg",className:m("/attendancereg")?"active":"",children:"Attendance Register"})}),h("HRMS","AttendanceTaking")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancetaking",className:m("/attendancetaking")?"active":"",children:"Attendance Taking"})}),h("HRMS","AttendanceReports")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereport",className:m("/attendancereport")?"active":"",children:"Attendance Reports"})})]})]})})}),r.length===0&&a.jsx("li",{className:"menu-title",children:a.jsxs("span",{children:["No permissions assigned for role: ",o]})})]})})})]})})};function xee({toggleSidebar:e}){Xu();const[t,r]=w.useState(!1),[n,s]=w.useState(!1),i=JSON.parse(localStorage.getItem("user"));console.log("user",i);const o=i?.roles?.map(h=>h.roleName)||[],[l,c]=w.useState(()=>localStorage.getItem("activeRole")||o[0]||"");w.useEffect(()=>{!localStorage.getItem("activeRole")&&o.length>0&&(localStorage.setItem("activeRole",i.roles[0]?.roleName||""),c(o[0]))},[o]),console.log("Active Role:",l);const d=h=>{const m=h.target.value;c(m),localStorage.setItem("activeRole",i.roles[0]?.roleName||"")},u=()=>{localStorage.removeItem("user"),localStorage.removeItem("activeRole"),localStorage.removeItem("openSubmenus"),window.location.href="/login"};return a.jsx("div",{className:"header",children:a.jsxs("div",{className:"main-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("a",{href:"index.html",className:"logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})}),a.jsx("a",{href:"index.html",className:"dark-logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})})]}),a.jsx("a",{id:"mobile_btn",className:"mobile_btn",onClick:h=>{h.preventDefault(),e()},children:a.jsxs("span",{className:"bar-icon",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]})}),a.jsx("div",{className:"header-user",children:a.jsxs("div",{className:"nav user-menu nav-list",children:[a.jsx("div",{className:"me-auto d-flex align-items-center",id:"header-search"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("div",{className:"me-1 notification_item",children:[a.jsxs("a",{href:"#",className:"btn btn-menubar position-relative me-1",id:"notification_popup","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-bell"}),a.jsx("span",{className:"notification-status-dot"})]}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end notification-dropdown p-4",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between border-bottom p-0 pb-3 mb-3",children:[a.jsx("h4",{className:"notification-title",children:"Notifications (2)"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("a",{href:"#",className:"text-primary fs-15 me-3 lh-1",children:"Mark all as read"}),a.jsxs("div",{className:"dropdown",children:[a.jsxs("a",{href:"javascript:void(0);",className:"bg-white dropdown-toggle","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-calendar-due me-1"}),"Today"]}),a.jsxs("ul",{className:"dropdown-menu mt-2 p-3",children:[a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"This Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Month"})})]})]})]})]}),a.jsx("div",{className:"noti-content",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-27.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Shawn"})," performance in Math is below the threshold."]}),a.jsx("span",{children:"Just Now"})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",className:"pb-0",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-23.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Sylvia"})," added appointment on 02:00 PM"]}),a.jsx("span",{children:"10 mins ago"}),a.jsxs("div",{className:"d-flex justify-content-start align-items-center mt-1",children:[a.jsx("span",{className:"btn btn-light btn-sm me-2",children:"Deny"}),a.jsx("span",{className:"btn btn-primary btn-sm",children:"Approve"})]})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-25.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["New student record ",a.jsx("span",{className:"text-dark fw-semibold",children:" George"})," is created by ",a.jsx("span",{className:"text-dark fw-semibold",children:"Teressa"})]}),a.jsx("span",{children:"2 hrs ago"})]})]})})}),a.jsx("div",{className:"border-0 mb-3 pb-0",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-01.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["A new teacher record for ",a.jsx("span",{className:"text-dark fw-semibold",children:"Elisa"})," "]}),a.jsx("span",{children:"09:45 AM"})]})]})})})]})}),a.jsxs("div",{className:"d-flex p-0",children:[a.jsx("a",{href:"#",className:"btn btn-light w-100 me-2",children:"Cancel"}),a.jsx("a",{href:"activity.html",className:"btn btn-primary w-100",children:"View All"})]})]})]}),a.jsxs("div",{className:"dropdown profile-dropdown",children:[a.jsx("a",{href:"javascript:void(0);",className:"dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",children:a.jsx("span",{className:"avatar avatar-sm online",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"Img",className:"img-fluid rounded-circle"})})}),a.jsx("div",{className:"dropdown-menu shadow-none",children:a.jsxs("div",{className:"card mb-0",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"avatar avatar-lg me-2 avatar-rounded",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"img"})}),a.jsxs("div",{children:[a.jsx("h5",{className:"mb-0",children:i?.username||"User"}),a.jsxs("p",{className:"fs-12 fw-medium mb-0",children:["Active Role: ",a.jsx("strong",{children:l})," "]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",children:[a.jsx("label",{className:"mb-1 fw-medium",children:"Switch Role"}),a.jsx("select",{className:"form-select form-select-sm",value:l,onChange:d,children:o.map(h=>a.jsx("option",{value:h,children:h},h))})]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/profile",children:[a.jsx("i",{className:"isax isax-profile-circle me-2"}),"Profile Settings"]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/reports",children:[a.jsx("i",{className:"isax isax-document-text me-2"}),"Reports"]}),a.jsxs("div",{className:"form-check form-switch form-check-reverse d-flex align-items-center justify-content-between dropdown-item mb-0",children:[a.jsxs("label",{className:"form-check-label",htmlFor:"notify",children:[a.jsx("i",{className:"isax isax-notification me-2"}),"Notifications"]}),a.jsx("input",{className:"form-check-input",type:"checkbox",id:"notify"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsxs("button",{className:"dropdown-item logout d-flex align-items-center",onClick:u,style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[a.jsx("i",{className:"isax isax-logout me-2"}),"Sign Out"]})})]})})]})]})]})}),a.jsxs("div",{className:"dropdown mobile-user-menu",children:[a.jsx("a",{href:"javascript:void(0);",className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:a.jsx("i",{className:"fa fa-ellipsis-v"})}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[a.jsx("a",{className:"dropdown-item",href:"profile.html",children:"My Profile"}),a.jsx("a",{className:"dropdown-item",href:"profile-settings.html",children:"Settings"}),a.jsx("a",{className:"dropdown-item",onClick:u,children:"Logout"})]})]})]})})}const vee=({children:e})=>(()=>{const r=localStorage.getItem("user");return r&&r!=="null"&&r!=="undefined"})()?e:a.jsx(rJ,{to:"/login",replace:!0});function T9(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=T9(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function xn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=T9(e))&&(n&&(n+=" "),n+=t);return n}var gk={},bk={},eM;function gee(){return eM||(eM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(bk)),bk}var yk={},tM;function I9(){return tM||(tM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(yk)),yk}var jk={},rM;function P9(){return rM||(rM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(jk)),jk}var Nk={},nM;function P3(){return nM||(nM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const d=r[i];l?d==="\\"&&i+1<s?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,n.push(o),o=""):o+=d:d==="["?(c=!0,o&&(n.push(o),o="")):d==="."?o&&(n.push(o),o=""):o+=d,i++}return o&&n.push(o),n}e.toPath=t}(Nk)),Nk}var aM;function O3(){return aM||(aM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gee(),r=I9(),n=P9(),s=P3();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(gk)),gk}var wk,sM;function bee(){return sM||(sM=1,wk=O3().get),wk}var yee=bee();const gx=Yu(yee);var Sk={exports:{}},Sa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM;function jee(){if(iM)return Sa;iM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case n:case c:case d:case m:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case h:case u:return g;case i:return g;default:return b}}case t:return b}}}return Sa.ContextConsumer=i,Sa.ContextProvider=o,Sa.Element=e,Sa.ForwardRef=l,Sa.Fragment=r,Sa.Lazy=h,Sa.Memo=u,Sa.Portal=t,Sa.Profiler=s,Sa.StrictMode=n,Sa.Suspense=c,Sa.SuspenseList=d,Sa.isContextConsumer=function(g){return v(g)===i},Sa.isContextProvider=function(g){return v(g)===o},Sa.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Sa.isForwardRef=function(g){return v(g)===l},Sa.isFragment=function(g){return v(g)===r},Sa.isLazy=function(g){return v(g)===h},Sa.isMemo=function(g){return v(g)===u},Sa.isPortal=function(g){return v(g)===t},Sa.isProfiler=function(g){return v(g)===s},Sa.isStrictMode=function(g){return v(g)===n},Sa.isSuspense=function(g){return v(g)===c},Sa.isSuspenseList=function(g){return v(g)===d},Sa.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===n||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},Sa.typeOf=v,Sa}var oM;function Nee(){return oM||(oM=1,Sk.exports=jee()),Sk.exports}var wee=Nee(),$c=e=>e===0?0:e>0?1:-1,nc=e=>typeof e=="number"&&e!=+e,Hp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Tr=e=>(typeof e=="number"||e instanceof Number)&&!nc(e),zu=e=>Tr(e)||typeof e=="string",See=0,Jb=e=>{var t=++See;return"".concat(e||"").concat(t)},Fm=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tr(t)&&typeof t!="string")return n;var i;if(Hp(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return nc(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},O9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function _0(e,t,r){return Tr(e)&&Tr(t)?e+r*(t-e):t}function M9(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):gx(n,t))===r)}var ri=e=>e===null||typeof e>"u",$y=e=>ri(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Cee=["viewBox","children"],kee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lM=["points","pathLength"],Ck={svg:Cee,polygon:lM,polyline:lM},M3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],R3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{M3.includes(s)&&(n[s]=i=>r[s](r,i))}),n},_ee=(e,t,r)=>n=>(e(t,r,n),null),R9=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];M3.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=_ee(i,t,r))}),n},cM=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",dM=null,kk=null,F9=e=>{if(e===dM&&Array.isArray(kk))return kk;var t=[];return w.Children.forEach(e,r=>{ri(r)||(wee.isFragment(r)?t=t.concat(F9(r.props.children)):t.push(r))}),kk=t,dM=e,t};function L9(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>cM(s)):n=[cM(t)],F9(e).forEach(s=>{var i=gx(s,"type.displayName")||gx(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var B9=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Eee=(e,t,r,n)=>{var s,i=(s=n&&Ck?.[n])!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||kee.includes(t))||r&&M3.includes(t)},Da=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Eee((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},Dee=["children","width","height","viewBox","className","style","title","desc"];function j5(){return j5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j5.apply(null,arguments)}function Aee(e,t){if(e==null)return{};var r,n,s=Tee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F3=w.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=Aee(e,Dee),h=i||{width:n,height:s,x:0,y:0},m=xn("recharts-surface",o);return w.createElement("svg",j5({},Da(u,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,d),r)}),Iee=["children","className"];function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N5.apply(null,arguments)}function Pee(e,t){if(e==null)return{};var r,n,s=Oee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tf=w.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Pee(e,Iee),i=xn("recharts-layer",n);return w.createElement("g",N5({className:i},Da(s,!0),{ref:t}),r)}),U9=w.createContext(null),Mee=()=>w.useContext(U9);function Oa(e){return function(){return e}}const $9=Math.cos,WN=Math.sin,Bd=Math.sqrt,GN=Math.PI,L2=2*GN,w5=Math.PI,S5=2*w5,Pp=1e-6,Ree=S5-Pp;function q9(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Fee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return q9;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Lee{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?q9:Fee(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=s-r,u=o-t,h=l-r,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Pp)if(!(Math.abs(h*c-d*u)>Pp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=s-l,g=c*c+d*d,b=p*p+v*v,y=Math.sqrt(g),C=Math.sqrt(m),N=i*Math.tan((w5-Math.acos((g+m-b)/(2*y*C)))/2),k=N/C,S=N/y;Math.abs(k-1)>Pp&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,u=r+c,h=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Pp||Math.abs(this._y1-u)>Pp)&&this._append`L${d},${u}`,n&&(m<0&&(m=m%S5+S5),m>Ree?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:m>Pp&&this._append`A${n},${n},0,${+(m>=w5)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function L3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Lee(t)}function B3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function V9(e){this._context=e}V9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function B2(e){return new V9(e)}function z9(e){return e[0]}function H9(e){return e[1]}function W9(e,t){var r=Oa(!0),n=null,s=B2,i=null,o=L3(l);e=typeof e=="function"?e:e===void 0?z9:Oa(e),t=typeof t=="function"?t:t===void 0?H9:Oa(t);function l(c){var d,u=(c=B3(c)).length,h,m=!1,p;for(n==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,d,c),+t(h,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Nj(e,t,r){var n=null,s=Oa(!0),i=null,o=B2,l=null,c=L3(d);e=typeof e=="function"?e:e===void 0?z9:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?H9:Oa(+r);function d(h){var m,p,v,g=(h=B3(h)).length,b,y=!1,C,N=new Array(g),k=new Array(g);for(i==null&&(l=o(C=c())),m=0;m<=g;++m){if(!(m<g&&s(b=h[m],m,h))===y)if(y=!y)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(N[v],k[v]);l.lineEnd(),l.areaEnd()}y&&(N[m]=+e(b,m,h),k[m]=+t(b,m,h),l.point(n?+n(b,m,h):N[m],r?+r(b,m,h):k[m]))}if(C)return l=null,C+""||null}function u(){return W9().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Oa(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Oa(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Oa(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Oa(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Oa(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Oa(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Oa(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class G9{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Bee(e){return new G9(e,!0)}function Uee(e){return new G9(e,!1)}const U3={draw(e,t){const r=Bd(t/GN);e.moveTo(r,0),e.arc(0,0,r,0,L2)}},$ee={draw(e,t){const r=Bd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Y9=Bd(1/3),qee=Y9*2,Vee={draw(e,t){const r=Bd(t/qee),n=r*Y9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},zee={draw(e,t){const r=Bd(t),n=-r/2;e.rect(n,n,r,r)}},Hee=.8908130915292852,K9=WN(GN/10)/WN(7*GN/10),Wee=WN(L2/10)*K9,Gee=-$9(L2/10)*K9,Yee={draw(e,t){const r=Bd(t*Hee),n=Wee*r,s=Gee*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=L2*i/5,l=$9(o),c=WN(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},_k=Bd(3),Kee={draw(e,t){const r=-Bd(t/(_k*3));e.moveTo(0,r*2),e.lineTo(-_k*r,-r),e.lineTo(_k*r,-r),e.closePath()}},Cc=-.5,kc=Bd(3)/2,C5=1/Bd(12),Xee=(C5/2+1)*3,Qee={draw(e,t){const r=Bd(t/Xee),n=r/2,s=r*C5,i=n,o=r*C5+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Cc*n-kc*s,kc*n+Cc*s),e.lineTo(Cc*i-kc*o,kc*i+Cc*o),e.lineTo(Cc*l-kc*c,kc*l+Cc*c),e.lineTo(Cc*n+kc*s,Cc*s-kc*n),e.lineTo(Cc*i+kc*o,Cc*o-kc*i),e.lineTo(Cc*l+kc*c,Cc*c-kc*l),e.closePath()}};function Jee(e,t){let r=null,n=L3(s);e=typeof e=="function"?e:Oa(e||U3),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Oa(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Oa(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function YN(){}function KN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function X9(e){this._context=e}X9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:KN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zee(e){return new X9(e)}function Q9(e){this._context=e}Q9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ete(e){return new Q9(e)}function J9(e){this._context=e}J9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tte(e){return new J9(e)}function Z9(e){this._context=e}Z9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rte(e){return new Z9(e)}function uM(e){return e<0?-1:1}function hM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(uM(i)+uM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function fM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ek(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ek(this,this._t0,fM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ek(this,fM(this,r=hM(this,e,t)),r);break;default:Ek(this,this._t0,r=hM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eU(e){this._context=new tU(e)}(eU.prototype=Object.create(XN.prototype)).point=function(e,t){XN.prototype.point.call(this,t,e)};function tU(e){this._context=e}tU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function nte(e){return new XN(e)}function ate(e){return new eU(e)}function rU(e){this._context=e}rU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=mM(e),s=mM(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mM(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function ste(e){return new rU(e)}function U2(e,t){this._context=e,this._t=t}U2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ite(e){return new U2(e,.5)}function ote(e){return new U2(e,0)}function lte(e){return new U2(e,1)}function wv(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function k5(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function cte(e,t){return e[t]}function dte(e){const t=[];return t.key=e,t}function ute(){var e=Oa([]),t=k5,r=wv,n=cte;function s(i){var o=Array.from(e.apply(this,arguments),dte),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=B3(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Oa(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Oa(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?k5:typeof i=="function"?i:Oa(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??wv,s):r},s}function hte(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}wv(e,t)}}function fte(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}wv(e,t)}}function mte(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[n][1]||0,m=u[n-1][1]||0,p=(h-m)/2,v=0;v<l;++v){var g=e[t[v]],b=g[n][1]||0,y=g[n-1][1]||0;p+=b-y}c+=h,d+=p*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,wv(e,t)}}var pte=["type","size","sizeType"];function _5(){return _5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_5.apply(null,arguments)}function pM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(r),!0).forEach(function(n){xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xte(e,t,r){return(t=vte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=gte(e,"string");return typeof t=="symbol"?t:t+""}function gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bte(e,t){if(e==null)return{};var r,n,s=yte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nU={symbolCircle:U3,symbolCross:$ee,symbolDiamond:Vee,symbolSquare:zee,symbolStar:Yee,symbolTriangle:Kee,symbolWye:Qee},jte=Math.PI/180,Nte=e=>{var t="symbol".concat($y(e));return nU[t]||U3},wte=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*jte;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ste=(e,t)=>{nU["symbol".concat($y(e))]=t},aU=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=bte(e,pte),i=xM(xM({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=Nte(t),m=Jee().type(h).size(wte(r,n,t));return m()},{className:l,cx:c,cy:d}=i,u=Da(i,!0);return c===+c&&d===+d&&r===+r?w.createElement("path",_5({},u,{className:xn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};aU.registerSymbol=Ste;function E5(){return E5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E5.apply(null,arguments)}function vM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(r),!0).forEach(function(n){$3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $3(e,t,r){return(t=kte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=_te(e,"string");return typeof t=="symbol"?t:t+""}function _te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _c=32;class q3 extends w.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=_c/2,i=_c/6,o=_c/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:_c,y2:s,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(_c,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_c/8,"h").concat(_c,"v").concat(_c*3/4,"h").concat(-_c,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var d=Cte({},t);return delete d.legendIcon,w.cloneElement(t.legendIcon,d)}return w.createElement(aU,{fill:l,cx:s,cy:s,size:_c,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:_c,height:_c},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var m=u.formatter||s,p=xn({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,g=m?m(u.value,u,h):u.value;return w.createElement("li",E5({className:p,style:c,key:"legend-item-".concat(h)},R9(this.props,u,h)),w.createElement(F3,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}$3(q3,"displayName","Legend");$3(q3,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Dk={},Ak={},gM;function Ete(){return gM||(gM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t}(Ak)),Ak}var Tk={},bM;function sU(){return bM||(bM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Tk)),Tk}var Ik={},Pk={},Ok={},yM;function Dte(){return yM||(yM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(Ok)),Ok}var jM;function V3(){return jM||(jM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dte();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(Pk)),Pk}var Mk={},NM;function Ate(){return NM||(NM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(Mk)),Mk}var wM;function Tte(){return wM||(wM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V3(),r=Ate();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n}(Ik)),Ik}var Rk={},Fk={},SM;function Ite(){return SM||(SM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O3();function r(n){return function(s){return t.get(s,n)}}e.property=r}(Fk)),Fk}var Lk={},Bk={},Uk={},$k={},CM;function iU(){return CM||(CM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}($k)),$k}var qk={},kM;function oU(){return kM||(kM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(qk)),qk}var Vk={},_M;function z3(){return _M||(_M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(Vk)),Vk}var EM;function Pte(){return EM||(EM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=iU(),n=oU(),s=z3();function i(h,m,p){return typeof p!="function"?t.isMatch(h,m):o(h,m,function v(g,b,y,C,N,k){const S=p(g,b,y,C,N,k);return S!==void 0?!!S:o(g,b,v,k)},new Map)}function o(h,m,p,v){if(m===h)return!0;switch(typeof m){case"object":return l(h,m,p,v);case"function":return Object.keys(m).length>0?o(h,{...m},p,v):s.eq(h,m);default:return r.isObject(h)?typeof m=="string"?m==="":!0:s.eq(h,m)}}function l(h,m,p,v){if(m==null)return!0;if(Array.isArray(m))return d(h,m,p,v);if(m instanceof Map)return c(h,m,p,v);if(m instanceof Set)return u(h,m,p,v);const g=Object.keys(m);if(h==null)return g.length===0;if(g.length===0)return!0;if(v&&v.has(m))return v.get(m)===h;v&&v.set(m,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!n.isPrimitive(h)&&!(y in h)||m[y]===void 0&&h[y]!==void 0||m[y]===null&&h[y]!==null||!p(h[y],m[y],y,h,m,v))return!1}return!0}finally{v&&v.delete(m)}}function c(h,m,p,v){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of m.entries()){const y=h.get(g);if(p(y,b,g,h,m,v)===!1)return!1}return!0}function d(h,m,p,v){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<m.length;b++){const y=m[b];let C=!1;for(let N=0;N<h.length;N++){if(g.has(N))continue;const k=h[N];let S=!1;if(p(k,y,b,h,m,v)&&(S=!0),S){g.add(N),C=!0;break}}if(!C)return!1}return!0}function u(h,m,p,v){return m.size===0?!0:h instanceof Set?d([...h],[...m],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(Uk)),Uk}var DM;function H3(){return DM||(DM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pte();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(Bk)),Bk}var zk={},Hk={},Wk={},AM;function lU(){return AM||(AM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(Wk)),Wk}var Gk={},TM;function W3(){return TM||(TM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Gk)),Gk}var Yk={},IM;function G3(){return IM||(IM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",m="[object ArrayBuffer]",p="[object Object]",v="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",k="[object BigUint64Array]",S="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",A="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=A,e.float64ArrayTag=L,e.functionTag=h,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=C,e.uint32ArrayTag=N,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(Yk)),Yk}var Kk={},PM;function Ote(){return PM||(PM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Kk)),Kk}var OM;function cU(){return OM||(OM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lU(),r=W3(),n=G3(),s=oU(),i=Ote();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,m,p=new Map,v=void 0){const g=v?.(u,h,m,p);if(g!=null)return g;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,C]of u)b.set(y,l(C,y,m,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,m,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,m,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,m,p,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,m,p,v),b}return u}function c(u,h,m=u,p,v){const g=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],C=Object.getOwnPropertyDescriptor(u,y);(C==null||C.writable)&&(u[y]=l(h[y],y,m,p,v))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(Hk)),Hk}var MM;function Mte(){return MM||(MM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(zk)),zk}var RM;function Rte(){return RM||(RM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=Mte();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n}(Lk)),Lk}var Xk={},Qk={},Jk={},FM;function Fte(){return FM||(FM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU(),r=G3();function n(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!=null)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n}(Jk)),Jk}var LM;function Lte(){return LM||(LM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fte();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Qk)),Qk}var Zk={},e_={},BM;function dU(){return BM||(BM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(e_)),e_}var t_={},UM;function Bte(){return UM||(UM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W3();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(t_)),t_}var $M;function Ute(){return $M||($M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9(),r=dU(),n=Bte(),s=P3();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(Zk)),Zk}var qM;function $te(){return qM||(qM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=P9(),n=Lte(),s=O3(),i=Ute();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(Xk)),Xk}var VM;function qte(){return VM||(VM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sU(),r=Ite(),n=Rte(),s=$te();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(Rk)),Rk}var zM;function Vte(){return zM||(zM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ete(),r=sU(),n=Tte(),s=qte();function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i}(Dk)),Dk}var r_,HM;function zte(){return HM||(HM=1,r_=Vte().uniqBy),r_}var Hte=zte();const WM=Yu(Hte);function uU(e,t,r){return t===!0?WM(e,r):typeof t=="function"?WM(e,t):e}var n_={exports:{}},a_={},s_={exports:{}},i_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function Wte(){if(GM)return i_;GM=1;var e=Hv();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,m){var p=m(),v=n({inst:{value:p,getSnapshot:m}}),g=v[0].inst,b=v[1];return i(function(){g.value=p,g.getSnapshot=m,c(g)&&b({inst:g})},[h,p,m]),s(function(){return c(g)&&b({inst:g}),h(function(){c(g)&&b({inst:g})})},[h]),o(p),p}function c(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!r(h,p)}catch{return!0}}function d(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return i_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,i_}var YM;function Gte(){return YM||(YM=1,s_.exports=Wte()),s_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function Yte(){if(KM)return a_;KM=1;var e=Hv(),t=Gte();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return a_.useSyncExternalStoreWithSelector=function(d,u,h,m,p){var v=i(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=l(function(){function y(D){if(!C){if(C=!0,N=D,D=m(D),p!==void 0&&g.hasValue){var E=g.value;if(p(E,D))return k=E}return k=D}if(E=k,n(N,D))return E;var T=m(D);return p!==void 0&&p(E,T)?(N=D,E):(N=D,k=T)}var C=!1,N,k,S=h===void 0?null:h;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,h,m,p]);var b=s(d,v[0],v[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),c(b),b},a_}var XM;function Kte(){return XM||(XM=1,n_.exports=Yte()),n_.exports}var Xte=Kte(),Y3=w.createContext(null),Qte=e=>e,Ji=()=>{var e=w.useContext(Y3);return e?e.store.dispatch:Qte},CN=()=>{},Jte=()=>CN,Zte=(e,t)=>e===t;function Kr(e){var t=w.useContext(Y3);return Xte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Jte,t?t.store.getState:CN,t?t.store.getState:CN,t?e:CN,Zte)}function ere(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function tre(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rre(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var QM=e=>Array.isArray(e)?e:[e];function nre(e){const t=Array.isArray(e[0])?e[0]:e;return rre(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function are(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var sre=class{constructor(e){this.value=e}deref(){return this.value}},ire=typeof WeakRef<"u"?WeakRef:sre,ore=0,JM=1;function wj(){return{s:ore,v:void 0,o:null,p:null}}function hU(e,t={}){let r=wj();const{resultEqualityCheck:n}=t;let s,i=0;function o(){let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}else{let v=l.p;v===null&&(l.p=v=new Map);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}}const d=l;let u;if(l.s===JM)u=l.v;else if(u=e.apply(null,arguments),i++,n){const h=s?.deref?.()??s;h!=null&&n(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new ire(u):u}return d.s=JM,d.v=u,u}return o.clearCache=()=>{r=wj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function lre(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),ere(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:m=[],argsMemoize:p=hU,argsMemoizeOptions:v=[]}=u,g=QM(m),b=QM(v),y=nre(s),C=h(function(){return i++,d.apply(null,arguments)},...g),N=p(function(){o++;const S=are(y,arguments);return l=C.apply(null,S),l},...b);return Object.assign(N,{resultFunc:d,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Gt=lre(hU),cre=Object.assign((e,t=Gt)=>{tre(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>cre}),o_={},l_={},c_={},ZM;function dre(){return ZM||(ZM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(c_)),c_}var d_={},u_={},eR;function fU(){return eR||(eR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(u_)),u_}var tR;function ure(){return tR||(tR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s}(d_)),d_}var rR;function hre(){return rR||(rR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dre(),r=ure(),n=P3();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,v)=>{let g=p;for(let b=0;b<v.length&&g!=null;++b)g=g[v[b]];return g},u=(p,v)=>v==null||p==null?v:typeof p=="object"&&"key"in p?Object.hasOwn(v,p.key)?v[p.key]:d(v,p.path):typeof p=="function"?p(v):Array.isArray(p)?d(v,p):typeof v=="object"?v[p]:v,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return i.map(p=>({original:p,criteria:h.map(v=>u(v,p))})).slice().sort((p,v)=>{for(let g=0;g<h.length;g++){const b=t.compareValues(p.criteria[g],v.criteria[g],l[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s}(l_)),l_}var h_={},nR;function fre(){return nR||(nR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t}(h_)),h_}var f_={},aR;function mU(){return aR||(aR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dU(),r=V3(),n=iU(),s=z3();function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i}(f_)),f_}var sR;function mre(){return sR||(sR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hre(),r=fre(),n=mU();function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s}(o_)),o_}var m_,iR;function pre(){return iR||(iR=1,m_=mre().sortBy),m_}var xre=pre();const $2=Yu(xre);var pU=e=>e.legend.settings,vre=e=>e.legend.size,gre=e=>e.legend.payload,bre=Gt([gre,pU],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$2(n,r):n});function yre(){return Kr(bre)}var Sj=1;function xU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Sj||Math.abs(o.left-t.left)>Sj||Math.abs(o.top-t.top)>Sj||Math.abs(o.width-t.width)>Sj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Vi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jre=typeof Symbol=="function"&&Symbol.observable||"@@observable",oR=jre,p_=()=>Math.random().toString(36).substring(7).split("").join("."),Nre={INIT:`@@redux/INIT${p_()}`,REPLACE:`@@redux/REPLACE${p_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${p_()}`},QN=Nre;function K3(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vU(e,t,r){if(typeof e!="function")throw new Error(Vi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Vi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Vi(1));return r(vU)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(Vi(3));return s}function h(b){if(typeof b!="function")throw new Error(Vi(4));if(c)throw new Error(Vi(5));let y=!0;d();const C=l++;return o.set(C,b),function(){if(y){if(c)throw new Error(Vi(6));y=!1,d(),o.delete(C),i=null}}}function m(b){if(!K3(b))throw new Error(Vi(7));if(typeof b.type>"u")throw new Error(Vi(8));if(typeof b.type!="string")throw new Error(Vi(17));if(c)throw new Error(Vi(9));try{c=!0,s=n(s,b)}finally{c=!1}return(i=o).forEach(C=>{C()}),b}function p(b){if(typeof b!="function")throw new Error(Vi(10));n=b,m({type:QN.REPLACE})}function v(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Vi(11));function C(){const k=y;k.next&&k.next(u())}return C(),{unsubscribe:b(C)}},[oR](){return this}}}return m({type:QN.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:p,[oR]:v}}function wre(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:QN.INIT})>"u")throw new Error(Vi(12));if(typeof r(void 0,{type:QN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vi(13))})}function gU(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{wre(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],m=r[h],p=o[h],v=m(p,l);if(typeof v>"u")throw l&&l.type,new Error(Vi(14));d[h]=v,c=c||v!==p}return c=c||n.length!==Object.keys(o).length,c?d:o}}function JN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Sre(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Vi(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=JN(...l)(s.dispatch),{...s,dispatch:i}}}function bU(e){return K3(e)&&"type"in e&&typeof e.type=="string"}var yU=Symbol.for("immer-nothing"),lR=Symbol.for("immer-draftable"),ac=Symbol.for("immer-state");function kd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sv=Object.getPrototypeOf;function bx(e){return!!e&&!!e[ac]}function rf(e){return e?jU(e)||Array.isArray(e)||!!e[lR]||!!e.constructor?.[lR]||V2(e)||z2(e):!1}var Cre=Object.prototype.constructor.toString();function jU(e){if(!e||typeof e!="object")return!1;const t=Sv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Cre}function ZN(e,t){q2(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function q2(e){const t=e[ac];return t?t.type_:Array.isArray(e)?1:V2(e)?2:z2(e)?3:0}function D5(e,t){return q2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NU(e,t,r){const n=q2(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function kre(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function V2(e){return e instanceof Map}function z2(e){return e instanceof Set}function Op(e){return e.copy_||e.base_}function A5(e,t){if(V2(e))return new Map(e);if(z2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jU(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ac];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Sv(e),n)}else{const n=Sv(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function X3(e,t=!1){return H2(e)||bx(e)||!rf(e)||(q2(e)>1&&(e.set=e.add=e.clear=e.delete=_re),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>X3(n,!0))),e}function _re(){kd(2)}function H2(e){return Object.isFrozen(e)}var Ere={};function yx(e){const t=Ere[e];return t||kd(0,e),t}var Zb;function wU(){return Zb}function Dre(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cR(e,t){t&&(yx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T5(e){I5(e),e.drafts_.forEach(Are),e.drafts_=null}function I5(e){e===Zb&&(Zb=e.parent_)}function dR(e){return Zb=Dre(Zb,e)}function Are(e){const t=e[ac];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ac].modified_&&(T5(t),kd(4)),rf(e)&&(e=ew(t,e),t.parent_||tw(t,e)),t.patches_&&yx("Patches").generateReplacementPatches_(r[ac].base_,e,t.patches_,t.inversePatches_)):e=ew(t,r,[]),T5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yU?e:void 0}function ew(e,t,r){if(H2(t))return t;const n=t[ac];if(!n)return ZN(t,(s,i)=>hR(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return tw(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),ZN(i,(l,c)=>hR(e,n,s,l,c,r,o)),tw(e,s,!1),r&&e.patches_&&yx("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function hR(e,t,r,n,s,i,o){if(bx(s)){const l=i&&t&&t.type_!==3&&!D5(t.assigned_,n)?i.concat(n):void 0,c=ew(e,s,l);if(NU(r,n,c),bx(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(rf(s)&&!H2(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ew(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&tw(e,s)}}function tw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X3(t,r)}function Tre(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:wU(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Q3;r&&(s=[n],i=ey);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var Q3={get(e,t){if(t===ac)return e;const r=Op(e);if(!D5(r,t))return Ire(e,r,t);const n=r[t];return e.finalized_||!rf(n)?n:n===x_(e.base_,t)?(v_(e),e.copy_[t]=O5(n,e)):n},has(e,t){return t in Op(e)},ownKeys(e){return Reflect.ownKeys(Op(e))},set(e,t,r){const n=SU(Op(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=x_(Op(e),t),i=s?.[ac];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(kre(r,s)&&(r!==void 0||D5(e.base_,t)))return!0;v_(e),P5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return x_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,v_(e),P5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Op(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){kd(11)},getPrototypeOf(e){return Sv(e.base_)},setPrototypeOf(){kd(12)}},ey={};ZN(Q3,(e,t)=>{ey[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ey.deleteProperty=function(e,t){return ey.set.call(this,e,t,void 0)};ey.set=function(e,t,r){return Q3.set.call(this,e[0],t,r,e[0])};function x_(e,t){const r=e[ac];return(r?Op(r):e)[t]}function Ire(e,t,r){const n=SU(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function SU(e,t){if(!(t in e))return;let r=Sv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Sv(r)}}function P5(e){e.modified_||(e.modified_=!0,e.parent_&&P5(e.parent_))}function v_(e){e.copy_||(e.copy_=A5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Pre=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&kd(6),n!==void 0&&typeof n!="function"&&kd(7);let s;if(rf(t)){const i=dR(this),o=O5(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?T5(i):I5(i)}return cR(i,n),uR(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===yU&&(s=void 0),this.autoFreeze_&&X3(s,!0),n){const i=[],o=[];yx("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else kd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){rf(e)||kd(8),bx(e)&&(e=Vh(e));const t=dR(this),r=O5(e,void 0);return r[ac].isManual_=!0,I5(t),r}finishDraft(e,t){const r=e&&e[ac];(!r||!r.isManual_)&&kd(9);const{scope_:n}=r;return cR(n,t),uR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=yx("Patches").applyPatches_;return bx(e)?n(e,t):this.produce(e,s=>n(s,t))}};function O5(e,t){const r=V2(e)?yx("MapSet").proxyMap_(e,t):z2(e)?yx("MapSet").proxySet_(e,t):Tre(e,t);return(t?t.scope_:wU()).drafts_.push(r),r}function Vh(e){return bx(e)||kd(10,e),CU(e)}function CU(e){if(!rf(e)||H2(e))return e;const t=e[ac];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=A5(e,t.scope_.immer_.useStrictShallowCopy_)}else r=A5(e,!0);return ZN(r,(n,s)=>{NU(r,n,CU(s))}),t&&(t.finalized_=!1),r}var sc=new Pre,kU=sc.produce;sc.produceWithPatches.bind(sc);sc.setAutoFreeze.bind(sc);sc.setUseStrictShallowCopy.bind(sc);sc.applyPatches.bind(sc);sc.createDraft.bind(sc);sc.finishDraft.bind(sc);function _U(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var Ore=_U(),Mre=_U,Rre=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?JN:JN.apply(null,arguments)};function Hc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Jl(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bU(n)&&n.type===e,r}var EU=class Eb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Eb.prototype)}static get[Symbol.species](){return Eb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Eb(...t[0].concat(this)):new Eb(...t.concat(this))}};function fR(e){return rf(e)?kU(e,()=>{}):e}function Cj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Fre(e){return typeof e=="boolean"}var Lre=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new EU;return r&&(Fre(r)?o.push(Ore):o.push(Mre(r.extraArgument))),o},Bre="RTK_autoBatch",mR=e=>t=>{setTimeout(t,e)},Ure=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mR(10):e.type==="callback"?e.queueNotification:mR(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),m=n.subscribe(h);return l.add(u),()=>{m(),l.delete(u)}},dispatch(u){try{return s=!u?.meta?.[Bre],i=!s,i&&(o||(o=!0,c(d))),n.dispatch(u)}finally{s=!0}}})},$re=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new EU(e);return n&&s.push(Ure(typeof n=="object"?n:void 0)),s};function qre(e){const t=Lre(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(K3(r))l=gU(r);else throw new Error(Jl(1));let c;typeof n=="function"?c=n(t):c=t();let d=JN;s&&(d=Rre({trace:!1,...typeof s=="object"&&s}));const u=Sre(...c),h=$re(u);let m=typeof o=="function"?o(h):h();const p=d(...m);return vU(l,i,p)}function DU(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Jl(28));if(l in t)throw new Error(Jl(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function Vre(e){return typeof e=="function"}function zre(e,t){let[r,n,s]=DU(t),i;if(Vre(e))i=()=>fR(e());else{const l=fR(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(bx(u)){const p=h(u,c);return p===void 0?u:p}else{if(rf(u))return kU(u,m=>h(m,c));{const m=h(u,c);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},l)}return o.getInitialState=i,o}var Hre="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wre=(e=21)=>{let t="",r=e;for(;r--;)t+=Hre[Math.random()*64|0];return t},Gre=Symbol.for("rtk-slice-createasyncthunk");function Yre(e,t){return`${e}/${t}`}function Kre({creators:e}={}){const t=e?.asyncThunk?.[Gre];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(Jl(11));const o=(typeof n.reducers=="function"?n.reducers(Qre()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,k){const S=typeof N=="string"?N:N.type;if(!S)throw new Error(Jl(12));if(S in c.sliceCaseReducersByType)throw new Error(Jl(13));return c.sliceCaseReducersByType[S]=k,d},addMatcher(N,k){return c.sliceMatchers.push({matcher:N,reducer:k}),d},exposeAction(N,k){return c.actionCreators[N]=k,d},exposeCaseReducer(N,k){return c.sliceCaseReducersByName[N]=k,d}};l.forEach(N=>{const k=o[N],S={reducerName:N,type:Yre(s,N),createNotation:typeof n.reducers=="function"};Zre(k)?tne(S,k,d,t):Jre(S,k,d)});function u(){const[N={},k=[],S=void 0]=typeof n.extraReducers=="function"?DU(n.extraReducers):[n.extraReducers],D={...N,...c.sliceCaseReducersByType};return zre(n.initialState,E=>{for(let T in D)E.addCase(T,D[T]);for(let T of c.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of k)E.addMatcher(T.matcher,T.reducer);S&&E.addDefaultCase(S)})}const h=N=>N,m=new Map,p=new WeakMap;let v;function g(N,k){return v||(v=u()),v(N,k)}function b(){return v||(v=u()),v.getInitialState()}function y(N,k=!1){function S(E){let T=E[N];return typeof T>"u"&&k&&(T=Cj(p,S,b)),T}function D(E=h){const T=Cj(m,k,()=>new WeakMap);return Cj(T,E,()=>{const A={};for(const[L,P]of Object.entries(n.selectors??{}))A[L]=Xre(P,E,()=>Cj(p,E,b),k);return A})}return{reducerPath:N,getSelectors:D,get selectors(){return D(S)},selectSlice:S}}const C={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...y(i),injectInto(N,{reducerPath:k,...S}={}){const D=k??i;return N.inject({reducerPath:D,reducer:g},S),{...C,...y(D,!0)}}};return C}}function Xre(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var Kc=Kre();function Qre(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Jre({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!ene(n))throw new Error(Jl(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Hc(e,o):Hc(e))}function Zre(e){return e._reducerDefinitionType==="asyncThunk"}function ene(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tne({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Jl(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:o||kj,pending:l||kj,rejected:c||kj,settled:d||kj})}function kj(){}var rne="task",AU="listener",TU="completed",J3="cancelled",nne=`task-${J3}`,ane=`task-${TU}`,M5=`${AU}-${J3}`,sne=`${AU}-${TU}`,W2=class{constructor(e){this.code=e,this.message=`${rne} ${J3} (reason: ${e})`}name="TaskAbortError";message},Z3=(e,t)=>{if(typeof e!="function")throw new TypeError(Jl(32))},rw=()=>{},IU=(e,t=rw)=>(e.catch(t),e),PU=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),nx=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ax=e=>{if(e.aborted){const{reason:t}=e;throw new W2(t)}};function OU(e,t){let r=rw;return new Promise((n,s)=>{const i=()=>s(new W2(e.reason));if(e.aborted){i();return}r=PU(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=rw})}var ine=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof W2?"cancelled":"rejected",error:r}}finally{t?.()}},nw=e=>t=>IU(OU(e,t).then(r=>(ax(e),r))),MU=e=>{const t=nw(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:rv}=Object,pR={},G2="listenerMiddleware",one=(e,t)=>{const r=n=>PU(e,()=>nx(n,e.reason));return(n,s)=>{Z3(n);const i=new AbortController;r(i);const o=ine(async()=>{ax(e),ax(i.signal);const l=await n({pause:nw(i.signal),delay:MU(i.signal),signal:i.signal});return ax(i.signal),l},()=>nx(i,ane));return s?.autoJoin&&t.push(o.catch(rw)),{result:nw(e)(o),cancel(){nx(i,nne)}}}},lne=(e,t)=>{const r=async(n,s)=>{ax(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,m)=>{m.unsubscribe(),c([h,m.getState(),m.getOriginalState()])}});i=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await OU(t,Promise.race(l));return ax(t),c}finally{i()}};return(n,s)=>IU(r(n,s))},RU=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Hc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Jl(21));return Z3(i),{predicate:s,type:t,effect:i}},FU=rv(e=>{const{type:t,predicate:r,effect:n}=RU(e);return{id:Wre(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Jl(22))}}},{withTypes:()=>FU}),xR=(e,t)=>{const{type:r,effect:n,predicate:s}=RU(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},R5=e=>{e.pending.forEach(t=>{nx(t,M5)})},cne=e=>()=>{e.forEach(R5),e.clear()},vR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},LU=rv(Hc(`${G2}/add`),{withTypes:()=>LU}),dne=Hc(`${G2}/removeAll`),BU=rv(Hc(`${G2}/remove`),{withTypes:()=>BU}),une=(...e)=>{console.error(`${G2}/error`,...e)},qy=(e={})=>{const t=new Map,{extra:r,onError:n=une}=e;Z3(n);const s=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&R5(u)}),i=u=>{const h=xR(t,u)??FU(u);return s(h)};rv(i,{withTypes:()=>i});const o=u=>{const h=xR(t,u);return h&&(h.unsubscribe(),u.cancelActive&&R5(h)),!!h};rv(o,{withTypes:()=>o});const l=async(u,h,m,p)=>{const v=new AbortController,g=lne(i,v.signal),b=[];try{u.pending.add(v),await Promise.resolve(u.effect(h,rv({},m,{getOriginalState:p,condition:(y,C)=>g(y,C).then(Boolean),take:g,delay:MU(v.signal),pause:nw(v.signal),extra:r,signal:v.signal,fork:one(v.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,C,N)=>{y!==v&&(nx(y,M5),N.delete(y))})},cancel:()=>{nx(v,M5),u.pending.delete(v)},throwIfCancelled:()=>{ax(v.signal)}})))}catch(y){y instanceof W2||vR(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),nx(v,sne),u.pending.delete(v)}},c=cne(t);return{middleware:u=>h=>m=>{if(!bU(m))return h(m);if(LU.match(m))return i(m.payload);if(dne.match(m)){c();return}if(BU.match(m))return o(m.payload);let p=u.getState();const v=()=>{if(p===pR)throw new Error(Jl(23));return p};let g;try{if(g=h(m),t.size>0){const b=u.getState(),y=Array.from(t.values());for(const C of y){let N=!1;try{N=C.predicate(m,b,p)}catch(k){N=!1,vR(n,k,{raisedBy:"predicate"})}N&&l(C,m,u,v)}}}finally{p=pR}return g},startListening:i,stopListening:o,clearListeners:c}};function Jl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hne={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},UU=Kc({name:"chartLayout",initialState:hne,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:fne,setLayout:mne,setChartSize:pne,setScale:xne}=UU.actions,vne=UU.reducer;function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(n){gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gne(e,t,r){return(t=bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bne(e){var t=yne(e,"string");return typeof t=="symbol"?t:t+""}function yne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aw=Math.PI/180,jne=e=>e*180/Math.PI,Qi=(e,t,r,n)=>({x:e+Math.cos(-aw*n)*r,y:t+Math.sin(-aw*n)*r}),Nne=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wne=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Sne=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=wne({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:jne(c),angleInRadian:c}},Cne=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},kne=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},_ne=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=Sne({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=Cne(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?bR(bR({},t),{},{radius:s,angle:kne(u,t)}):null};function yR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(r),!0).forEach(function(n){Ene(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ene(e,t,r){return(t=Dne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dne(e){var t=Ane(e,"string");return typeof t=="symbol"?t:t+""}function Ane(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zl(e,t,r){return ri(e)||ri(t)?r:zu(t)?gx(e,t,r):typeof t=="function"?t(e):r}var Tne=(e,t,r,n,s)=>{var i,o=-1,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if($c(u-d)!==$c(h-u)){var p=[];if($c(h-u)===$c(s[1]-s[0])){m=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+d)/2),p[1]=Math.max(v,(v+d)/2)}else{m=d;var g=h+s[1]-s[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),C=Math.max(d,h);if(e>(y+u)/2&&e<=(C+u)/2){({index:o}=r[c]);break}}}else if(t){for(var N=0;N<l;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:o}=t[N]);break}}return o},Ine=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Tr(e[i]))return Fc(Fc({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Tr(e[o]))return Fc(Fc({},e),{},{[o]:e[o]+(s||0)})}return e},cf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",$U=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},qU=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:m,axisType:p}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(g=p==="angleAxis"&&i&&i.length>=2?$c(i[0]-i[1])*2*g:g,h||m){var b=(h||m||[]).map((y,C)=>{var N=n?n.indexOf(y):y;return{coordinate:o(N)+g,value:y,offset:g,index:C}});return b.filter(y=>!nc(y.coordinate))}return c&&d?d.map((y,C)=>({coordinate:o(y)+g,value:y,index:C,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,C)=>({coordinate:o(y)+g,value:y,offset:g,index:C})):o.domain().map((y,C)=>({coordinate:o(y)+g,value:n?n[y]:y,index:C,offset:g}))},jR=1e-4,Pne=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-jR,i=Math.max(n[0],n[1])+jR,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},One=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=nc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},Mne=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=nc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Rne={sign:One,expand:hte,none:wv,silhouette:fte,wiggle:mte,positive:Mne},Fne=(e,t,r)=>{var n=Rne[r],s=ute().keys(t).value((i,o)=>+Zl(i,o,0)).order(k5).offset(n);return s(e)};function VU(e){return e==null?void 0:String(e)}function NR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ri(s[t.dataKey])){var l=M9(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Zl(s,ri(o)?t.dataKey:o);return ri(c)?null:t.scale(c)}var Lne=e=>{var t=e.flat(2).filter(Tr);return[Math.min(...t),Math.max(...t)]},Bne=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Une=(e,t,r)=>{if(e!=null)return Bne(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Lne(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},wR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F5=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=$2(t,u=>u.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function CR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Fc(Fc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function zU(e,t){if(e)return String(e);if(typeof t=="string")return t}function $ne(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?_ne({x:e,y:t},n):null}var qne=(e,t,r,n)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Fc(Fc(Fc({},n),Qi(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Fc(Fc(Fc({},n),Qi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},Vne=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,df=e=>e.layout.width,uf=e=>e.layout.height,zne=e=>e.layout.scale,HU=e=>e.layout.margin,eA=Gt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),tA=Gt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Hne="data-recharts-item-index",Wne="data-recharts-item-data-key",Y2=60;function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(n){Gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gne(e,t,r){return(t=Yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yne(e){var t=Kne(e,"string");return typeof t=="symbol"?t:t+""}function Kne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xne=e=>e.brush.height,Zi=Gt([df,uf,HU,Xne,eA,tA,pU,vre],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((v,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:Y2;return fm(fm({},v),{},{[b]:v[b]+y})}return v},{left:r.left||0,right:r.right||0}),d=s.reduce((v,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?fm(fm({},v),{},{[b]:gx(v,"".concat(b))+g.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=fm(fm({},d),c),h=u.bottom;u.bottom+=n,u=Ine(u,o,l);var m=e-u.left-u.right,p=t-u.top-u.bottom;return fm(fm({brushBottom:h},u),{},{width:Math.max(m,0),height:Math.max(p,0)})}),Qne=Gt(Zi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),WU=Gt(df,uf,(e,t)=>({x:0,y:0,width:e,height:t})),Jne=w.createContext(null),Xc=()=>w.useContext(Jne)!=null,K2=e=>e.brush,X2=Gt([K2,Zi,HU],(e,t,r)=>({height:e.height,x:Tr(e.x)?e.x:t.left,y:Tr(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Tr(e.width)?e.width:t.width})),rA=()=>{var e,t=Xc(),r=Kr(Qne),n=Kr(X2),s=(e=Kr(K2))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Zne={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},GU=()=>{var e;return(e=Kr(Zi))!==null&&e!==void 0?e:Zne},nA=()=>Kr(df),aA=()=>Kr(uf),eae={top:0,right:0,bottom:0,left:0},tae=()=>{var e;return(e=Kr(t=>t.layout.margin))!==null&&e!==void 0?e:eae},Za=e=>e.layout.layoutType,sA=()=>Kr(Za),rae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YU=Kc({name:"legend",initialState:rae,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Vh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:_R,setLegendSettings:nae,addLegendPayload:aae,removeLegendPayload:sae}=YU.actions,iae=YU.reducer,oae=["contextPayload"];function L5(){return L5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L5.apply(null,arguments)}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(n){iA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iA(e,t,r){return(t=lae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lae(e){var t=cae(e,"string");return typeof t=="symbol"?t:t+""}function cae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dae(e,t){if(e==null)return{};var r,n,s=uae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hae(e){return e.value}function fae(e){var{contextPayload:t}=e,r=dae(e,oae),n=uU(t,e.payloadUniqBy,hae),s=Cv(Cv({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,s):typeof e.content=="function"?w.createElement(e.content,s):w.createElement(q3,s)}function mae(e,t,r,n,s,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Cv(Cv({},d),u)}function pae(e){var t=Ji();return w.useEffect(()=>{t(nae(e))},[t,e]),null}function xae(e){var t=Ji();return w.useEffect(()=>(t(_R(e)),()=>{t(_R({width:0,height:0}))}),[t,e]),null}function vae(e){var t=yre(),r=Mee(),n=tae(),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=xU([t]),u=nA(),h=aA(),m=u-(n.left||0)-(n.right||0),p=Q2.getWidthOrHeight(e.layout,i,s,m),v=l?o:Cv(Cv({position:"absolute",width:p?.width||s||"auto",height:p?.height||i||"auto"},mae(o,e,n,u,h,c)),o),g=l??r;if(g==null)return null;var b=w.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:d},w.createElement(pae,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(xae,{width:c.width,height:c.height}),w.createElement(fae,L5({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return Ly.createPortal(b,g)}class Q2 extends w.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Tr(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return w.createElement(vae,this.props)}}iA(Q2,"displayName","Legend");iA(Q2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function B5(){return B5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B5.apply(null,arguments)}function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gae(e,t,r){return(t=bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jae(e){return Array.isArray(e)&&zu(e[0])&&zu(e[1])?e.join(" ~ "):e}var Nae=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:m=!1}=e,p=()=>{if(i&&i.length){var S={padding:0,margin:0},D=(l?$2(i,l):i).map((E,T)=>{if(E.type==="none")return null;var A=E.formatter||o||jae,{value:L,name:P}=E,O=L,J=P;if(A){var W=A(L,P,E,T,i);if(Array.isArray(W))[O,J]=W;else if(W!=null)O=W;else return null}var re=g_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:re},zu(J)?w.createElement("span",{className:"recharts-tooltip-item-name"},J):null,zu(J)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},O),w.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:S},D)}return null},v=g_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=g_({margin:0},s),b=!ri(u),y=b?u:"",C=xn("recharts-default-tooltip",c),N=xn("recharts-tooltip-label",d);b&&h&&i!==void 0&&i!==null&&(y=h(u,i));var k=m?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",B5({className:C,style:v},k),w.createElement("p",{className:N,style:g},w.isValidElement(y)?y:"".concat(y)),p())},ib="recharts-tooltip-wrapper",wae={visibility:"hidden"};function Sae(e){var{coordinate:t,translateX:r,translateY:n}=e;return xn(ib,{["".concat(ib,"-right")]:Tr(r)&&t&&Tr(t.x)&&r>=t.x,["".concat(ib,"-left")]:Tr(r)&&t&&Tr(t.x)&&r<t.x,["".concat(ib,"-bottom")]:Tr(n)&&t&&Tr(t.y)&&n>=t.y,["".concat(ib,"-top")]:Tr(n)&&t&&Tr(t.y)&&n<t.y})}function AR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Tr(i[n]))return i[n];var u=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var m=c[n];if(m==null)return 0;if(o[n]){var p=u,v=m;return p<v?Math.max(h,m):Math.max(u,m)}if(d==null)return 0;var g=h+l,b=m+d;return g>b?Math.max(u,m):Math.max(h,m)}function Cae(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kae(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=AR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=AR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Cae({translateX:u,translateY:h,useTranslate3d:l})):d=wae,{cssProperties:d,cssClasses:Sae({translateX:u,translateY:h,coordinate:r})}}function TR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(r),!0).forEach(function(n){U5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U5(e,t,r){return(t=_ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ae(e){var t=Eae(e,"string");return typeof t=="symbol"?t:t+""}function Eae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dae extends w.PureComponent{constructor(){super(...arguments),U5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),U5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:m,viewBox:p,wrapperStyle:v,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:C,cssProperties:N}=kae({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:m,viewBox:p}),k=y?{}:_j(_j({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),S=_j(_j({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:S,ref:b},i)}}var Aae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Vy={isSsr:Aae()},KU=()=>Kr(e=>e.rootProps.accessibilityLayer);function zo(e){return Number.isFinite(e)}function sw(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$5.apply(null,arguments)}function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){Tae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tae(e,t,r){return(t=Iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iae(e){var t=Pae(e,"string");return typeof t=="symbol"?t:t+""}function Pae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OR={curveBasisClosed:ete,curveBasisOpen:tte,curveBasis:Zee,curveBumpX:Bee,curveBumpY:Uee,curveLinearClosed:rte,curveLinear:B2,curveMonotoneX:nte,curveMonotoneY:ate,curveNatural:ste,curveStep:ite,curveStepAfter:lte,curveStepBefore:ote},Ej=e=>zo(e.x)&&zo(e.y),ob=e=>e.x,lb=e=>e.y,Oae=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($y(e));return(r==="curveMonotone"||r==="curveBump")&&t?OR["".concat(r).concat(t==="vertical"?"Y":"X")]:OR[r]||B2},Mae=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=Oae(t,s),l=i?r.filter(Ej):r,c;if(Array.isArray(n)){var d=i?n.filter(h=>Ej(h)):n,u=l.map((h,m)=>PR(PR({},h),{},{base:d[m]}));return s==="vertical"?c=Nj().y(lb).x1(ob).x0(h=>h.base.x):c=Nj().x(ob).y1(lb).y0(h=>h.base.y),c.defined(Ej).curve(o),c(u)}return s==="vertical"&&Tr(n)?c=Nj().y(lb).x1(ob).x0(n):Tr(n)?c=Nj().x(ob).y1(lb).y0(n):c=W9().x(ob).y(lb),c.defined(Ej).curve(o),c(l)},kN=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Mae(e):n;return w.createElement("path",$5({},Da(e,!1),R3(e),{className:xn("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Rae=["x","y","top","left","width","height","className"];function q5(){return q5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q5.apply(null,arguments)}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){Lae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lae(e,t,r){return(t=Bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bae(e){var t=Uae(e,"string");return typeof t=="symbol"?t:t+""}function Uae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ae(e,t){if(e==null)return{};var r,n,s=qae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vae=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),zae=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=$ae(e,Rae),d=Fae({x:t,y:r,top:n,left:s,width:i,height:o},c);return!Tr(t)||!Tr(r)||!Tr(i)||!Tr(o)||!Tr(n)||!Tr(s)?null:w.createElement("path",q5({},Da(d,!0),{className:xn("recharts-cross",l),d:Vae(t,r,i,o,n,s)}))};function Hae(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){Gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t,r){return(t=Yae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qv(e,t){var r=Wae({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var b_={},y_={},j_={},FR;function Xae(){return FR||(FR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(j_)),j_}var LR;function Qae(){return LR||(LR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xae(),r=lU(),n=W3(),s=G3(),i=z3();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,m,p,v,g){const b=g(d,u,h,m,p,v);if(b!==void 0)return b;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,v,g)}return c(d,u,v,g)}function c(d,u,h,m){if(Object.is(d,u))return!0;let p=n.getTag(d),v=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return d.toString()===u.toString();case s.numberTag:{const y=d.valueOf(),C=u.valueOf();return i.eq(y,C)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),u.valueOf());case s.regexpTag:return d.source===u.source&&d.flags===u.flags;case s.functionTag:return d===u}h=h??new Map;const g=h.get(d),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(d,u),h.set(u,d);try{switch(p){case s.mapTag:{if(d.size!==u.size)return!1;for(const[y,C]of d.entries())if(!u.has(y)||!l(C,u.get(y),y,d,u,h,m))return!1;return!0}case s.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),C=Array.from(u.values());for(let N=0;N<y.length;N++){const k=y[N],S=C.findIndex(D=>l(k,D,void 0,d,u,h,m));if(S===-1)return!1;C.splice(S,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,m))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.errorTag:return d.name===u.name&&d.message===u.message;case s.objectTag:{if(!(c(d.constructor,u.constructor,h,m)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const C=[...Object.keys(d),...r.getSymbols(d)],N=[...Object.keys(u),...r.getSymbols(u)];if(C.length!==N.length)return!1;for(let k=0;k<C.length;k++){const S=C[k],D=d[S];if(!Object.hasOwn(u,S))return!1;const E=u[S];if(!l(D,E,S,d,u,h,m))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(y_)),y_}var N_={},BR;function Jae(){return BR||(BR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(N_)),N_}var UR;function Zae(){return UR||(UR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qae(),r=Jae();function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n}(b_)),b_}var w_,$R;function ese(){return $R||($R=1,w_=Zae().isEqual),w_}var tse=ese();const rse=Yu(tse);function nse(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var iw=1e-4,XU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],QU=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),qR=(e,t)=>r=>{var n=XU(e,t);return QU(n,r)},ase=(e,t)=>r=>{var n=XU(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return QU(s,r)},VR=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([t,n,r,s]=o);var d=qR(t,r),u=qR(n,s),h=ase(t,r),m=v=>v>1?1:v<0?0:v,p=v=>{for(var g=v>1?1:v,b=g,y=0;y<8;++y){var C=d(b)-g,N=h(b);if(Math.abs(C-g)<iw||N<iw)return u(b);b=m(b-C/N)}return u(b)};return p.isStepper=!1,p},sse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*n,h=c+(d-u)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<iw&&Math.abs(h)<iw?[l,0]:[m,h]};return i.isStepper=!0,i.dt=s,i},ise=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VR(e);case"spring":return sse();default:if(e.split("(")[0]==="cubic-bezier")return VR(e)}return typeof e=="function"?e:null};function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){ose(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ose(e,t,r){return(t=lse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lse(e){var t=cse(e,"string");return typeof t=="symbol"?t:t+""}function cse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dse=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),use=(e,t,r)=>e.map(n=>"".concat(dse(n)," ").concat(t,"ms ").concat(r)).join(","),hse=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ty=(e,t)=>Object.keys(t).reduce((r,n)=>HR(HR({},r),{},{[n]:e(n,t[n])}),{});function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){fse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=pse(e,"string");return typeof t=="symbol"?t:t+""}function pse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ow=(e,t,r)=>e+(t-e)*r,V5=e=>{var{from:t,to:r}=e;return t!==r},JU=(e,t,r)=>{var n=ty((s,i)=>{if(V5(i)){var[o,l]=e(i.from,i.to,i.velocity);return Hi(Hi({},i),{},{from:o,velocity:l})}return i},t);return r<1?ty((s,i)=>V5(i)?Hi(Hi({},i),{},{velocity:ow(i.velocity,n[s].velocity,r),from:ow(i.from,n[s].from,r)}):i,t):JU(e,n,r-1)};function xse(e,t,r,n,s,i){var o,l=n.reduce((m,p)=>Hi(Hi({},m),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>ty((m,p)=>p.from,l),d=()=>!Object.values(l).filter(V5).length,u=null,h=m=>{o||(o=m);var p=m-o,v=p/r.dt;l=JU(r,l,v),s(Hi(Hi(Hi({},e),t),c())),o=m,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function vse(e,t,r,n,s,i,o){var l=null,c=s.reduce((h,m)=>Hi(Hi({},h),{},{[m]:[e[m],t[m]]}),{}),d,u=h=>{d||(d=h);var m=(h-d)/n,p=ty((g,b)=>ow(...b,r(m)),c);if(i(Hi(Hi(Hi({},e),t),p)),m<1)l=o.setTimeout(u);else{var v=ty((g,b)=>ow(...b,r(1)),c);i(Hi(Hi(Hi({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{l()})}const gse=(e,t,r,n,s,i)=>{var o=hse(e,t);return r.isStepper===!0?xse(e,t,r,o,s,i):vse(e,t,r,n,o,s,i)};class bse{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var yse=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function z5(){return z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z5.apply(null,arguments)}function jse(e,t){if(e==null)return{};var r,n,s=Nse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Nse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){Wp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wp(e,t,r){return(t=wse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wse(e){var t=Sse(e,"string");return typeof t=="symbol"?t:t+""}function Sse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cse(){return nse(new bse)}class oA extends w.PureComponent{constructor(t,r){super(t,r),Wp(this,"mounted",!1),Wp(this,"manager",null),Wp(this,"stopJSAnimation",null),Wp(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var d={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(d);return}if(!(rse(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:h}:h};(s&&c[s]!==h||!s&&c!==h)&&this.setState(m)}this.runAnimation(mm(mm({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=gse(r,n,ise(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=use(Object.keys(u),n,o);this.manager.start([l,r,mm(mm({},u),{},{transition:h}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:m,onAnimationReStart:p,animationManager:v}=t,g=jse(t,yse),b=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var C=N=>{var{style:k={},className:S}=N.props,D=w.cloneElement(N,mm(mm({},g),{},{style:mm(mm({},k),y),className:S}));return D};return b===1?C(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,N=>C(N)))}}Wp(oA,"displayName","Animate");Wp(oA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var kse=w.createContext(null);function H5(e){var t,r,n=w.useContext(kse);return w.createElement(oA,z5({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:Cse()}))}function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lw.apply(null,arguments)}var YR=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,m=4;h<m;h++)u[h]=s[h]>i?i:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,`
            L `).concat(e+l*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},_se={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ese=e=>{var t=Qv(e,_se),r=w.useRef(null),[n,s]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var b=xn("recharts-rectangle",u);return g?w.createElement(H5,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:h,isActive:g},y=>{var{width:C,height:N,x:k,y:S}=y;return w.createElement(H5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:v,easing:h},w.createElement("path",lw({},Da(t,!0),{className:b,d:YR(k,S,C,N,d),ref:r})))}):w.createElement("path",lw({},Da(t,!0),{className:b,d:YR(i,o,l,c,d)}))};function ZU(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=Qi(t,r,n,s),l=Qi(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W5.apply(null,arguments)}var Dse=(e,t)=>{var r=$c(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Dj=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/aw,h=c?s:s+i*u,m=Qi(t,r,d,h),p=Qi(t,r,n,h),v=c?s-i*u:s,g=Qi(t,r,d*Math.cos(u*aw),v);return{center:m,circleTangency:p,lineTangency:g,theta:u}},e$=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=Dse(i,o),c=i+l,d=Qi(t,r,s,i),u=Qi(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var m=Qi(t,r,n,i),p=Qi(t,r,n,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},Ase=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=$c(d-c),{circleTangency:h,lineTangency:m,theta:p}=Dj({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:g,theta:b}=Dj({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):e$({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:d});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:k,theta:S}=Dj({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:D,lineTangency:E,theta:T}=Dj({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=l?Math.abs(c-d):Math.abs(c-d)-S-T;if(A<0&&i===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},Tse={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ise=e=>{var t=Qv(e,Tse),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var m=xn("recharts-sector",h),p=i-s,v=Fm(o,p,0,!0),g;return v>0&&Math.abs(d-u)<360?g=Ase({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=e$({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),w.createElement("path",W5({},Da(t,!0),{className:m,d:g}))};function Pse(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,m=Qi(l,c,d,h),p=Qi(l,c,u,h);n=m.x,s=m.y,i=p.x,o=p.y}else return ZU(t);return[{x:n,y:s},{x:i,y:o}]}var S_={},C_={},k_={},KR;function Ose(){return KR||(KR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(k_)),k_}var XR;function Mse(){return XR||(XR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ose();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(C_)),C_}var QR;function Rse(){return QR||(QR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mU(),r=Mse();function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=n}(S_)),S_}var __,JR;function Fse(){return JR||(JR=1,__=Rse().range),__}var Lse=Fse();const t$=Yu(Lse);function Am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lA(e){let t,r,n;e.length!==2?(t=Am,r=(l,c)=>Am(e(l),c),n=(l,c)=>e(l)-c):(t=e===Am||e===Bse?e:Use,r=e,n=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Use(){return 0}function r$(e){return e===null?NaN:+e}function*$se(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qse=lA(Am),zy=qse.right;lA(r$).center;class ZR extends Map{constructor(t,r=Hse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(eF(this,t))}has(t){return super.has(eF(this,t))}set(t,r){return super.set(Vse(this,t),r)}delete(t){return super.delete(zse(this,t))}}function eF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Vse({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function zse({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Hse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wse(e=Am){if(e===Am)return n$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function n$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Gse=Math.sqrt(50),Yse=Math.sqrt(10),Kse=Math.sqrt(2);function cw(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Gse?10:i>=Yse?5:i>=Kse?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?cw(e,t,r*2):[l,c,d]}function G5(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?cw(t,e,r):cw(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function Y5(e,t,r){return t=+t,e=+e,r=+r,cw(e,t,r)[2]}function K5(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Y5(t,e,r):Y5(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function tF(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rF(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function a$(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?n$:Wse(s);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+m)),v=Math.min(n,Math.floor(t+(c-d)*h/c+m));a$(e,t,p,v,s)}const i=e[t];let o=r,l=n;for(cb(e,r,t),s(e[n],i)>0&&cb(e,r,n);o<l;){for(cb(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?cb(e,r,l):(++l,cb(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Xse(e,t,r){if(e=Float64Array.from($se(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return rF(e);if(t>=1)return tF(e);var n,s=(n-1)*t,i=Math.floor(s),o=tF(a$(e,i).subarray(0,i+1)),l=rF(e.subarray(i+1));return o+(l-o)*(s-i)}}function Qse(e,t,r=r$){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Jse(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Qc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const X5=Symbol("implicit");function cA(){var e=new ZR,t=[],r=[],n=X5;function s(i){let o=e.get(i);if(o===void 0){if(n!==X5)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return cA(t,r).unknown(n)},Qc.apply(s,arguments),s}function dA(){var e=cA().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var m=t().length,p=s<n,v=p?s:n,g=p?n:s;i=(g-v)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(m-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=Jse(m).map(function(y){return v+i*y});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,h()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},e.copy=function(){return dA(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Qc.apply(h(),arguments)}function s$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return s$(t())},e}function Zse(){return s$(dA.apply(null,arguments).paddingInner(1))}function uA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function i$(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Hy(){}var ry=.7,dw=1/ry,nv="\\s*([+-]?\\d+)\\s*",ny="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eie=/^#([0-9a-f]{3,8})$/,tie=new RegExp(`^rgb\\(${nv},${nv},${nv}\\)$`),rie=new RegExp(`^rgb\\(${Fu},${Fu},${Fu}\\)$`),nie=new RegExp(`^rgba\\(${nv},${nv},${nv},${ny}\\)$`),aie=new RegExp(`^rgba\\(${Fu},${Fu},${Fu},${ny}\\)$`),sie=new RegExp(`^hsl\\(${ny},${Fu},${Fu}\\)$`),iie=new RegExp(`^hsla\\(${ny},${Fu},${Fu},${ny}\\)$`),nF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uA(Hy,ay,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aF,formatHex:aF,formatHex8:oie,formatHsl:lie,formatRgb:sF,toString:sF});function aF(){return this.rgb().formatHex()}function oie(){return this.rgb().formatHex8()}function lie(){return o$(this).formatHsl()}function sF(){return this.rgb().formatRgb()}function ay(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iF(t):r===3?new cl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Aj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Aj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tie.exec(e))?new cl(t[1],t[2],t[3],1):(t=rie.exec(e))?new cl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nie.exec(e))?Aj(t[1],t[2],t[3],t[4]):(t=aie.exec(e))?Aj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sie.exec(e))?cF(t[1],t[2]/100,t[3]/100,1):(t=iie.exec(e))?cF(t[1],t[2]/100,t[3]/100,t[4]):nF.hasOwnProperty(e)?iF(nF[e]):e==="transparent"?new cl(NaN,NaN,NaN,0):null}function iF(e){return new cl(e>>16&255,e>>8&255,e&255,1)}function Aj(e,t,r,n){return n<=0&&(e=t=r=NaN),new cl(e,t,r,n)}function cie(e){return e instanceof Hy||(e=ay(e)),e?(e=e.rgb(),new cl(e.r,e.g,e.b,e.opacity)):new cl}function Q5(e,t,r,n){return arguments.length===1?cie(e):new cl(e,t,r,n??1)}function cl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}uA(cl,Q5,i$(Hy,{brighter(e){return e=e==null?dw:Math.pow(dw,e),new cl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new cl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cl(sx(this.r),sx(this.g),sx(this.b),uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oF,formatHex:oF,formatHex8:die,formatRgb:lF,toString:lF}));function oF(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}`}function die(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}${Gp((isNaN(this.opacity)?1:this.opacity)*255)}`}function lF(){const e=uw(this.opacity);return`${e===1?"rgb(":"rgba("}${sx(this.r)}, ${sx(this.g)}, ${sx(this.b)}${e===1?")":`, ${e})`}`}function uw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gp(e){return e=sx(e),(e<16?"0":"")+e.toString(16)}function cF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _d(e,t,r,n)}function o$(e){if(e instanceof _d)return new _d(e.h,e.s,e.l,e.opacity);if(e instanceof Hy||(e=ay(e)),!e)return new _d;if(e instanceof _d)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new _d(o,l,c,e.opacity)}function uie(e,t,r,n){return arguments.length===1?o$(e):new _d(e,t,r,n??1)}function _d(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}uA(_d,uie,i$(Hy,{brighter(e){return e=e==null?dw:Math.pow(dw,e),new _d(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new _d(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new cl(E_(e>=240?e-240:e+120,s,n),E_(e,s,n),E_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new _d(dF(this.h),Tj(this.s),Tj(this.l),uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uw(this.opacity);return`${e===1?"hsl(":"hsla("}${dF(this.h)}, ${Tj(this.s)*100}%, ${Tj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dF(e){return e=(e||0)%360,e<0?e+360:e}function Tj(e){return Math.max(0,Math.min(1,e||0))}function E_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hA=e=>()=>e;function hie(e,t){return function(r){return e+r*t}}function fie(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function mie(e){return(e=+e)==1?l$:function(t,r){return r-t?fie(t,r,e):hA(isNaN(t)?r:t)}}function l$(e,t){var r=t-e;return r?hie(e,r):hA(isNaN(e)?t:e)}const uF=function e(t){var r=mie(t);function n(s,i){var o=r((s=Q5(s)).r,(i=Q5(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=l$(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function pie(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function xie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vie(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Jv(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function gie(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bie(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Jv(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var J5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D_=new RegExp(J5.source,"g");function yie(e){return function(){return e}}function jie(e){return function(t){return e(t)+""}}function Nie(e,t){var r=J5.lastIndex=D_.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=J5.exec(e))&&(s=D_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:hw(n,s)})),r=D_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jie(c[0].x):yie(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Jv(e,t){var r=typeof t,n;return t==null||r==="boolean"?hA(t):(r==="number"?hw:r==="string"?(n=ay(t))?(t=n,uF):Nie:t instanceof ay?uF:t instanceof Date?gie:xie(t)?pie:Array.isArray(t)?vie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bie:hw)(e,t)}function fA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function wie(e,t){t===void 0&&(t=e,e=Jv);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Sie(e){return function(){return e}}function fw(e){return+e}var hF=[0,1];function $o(e){return e}function Z5(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Sie(isNaN(t)?NaN:.5)}function Cie(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function kie(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Z5(s,n),i=r(o,i)):(n=Z5(n,s),i=r(i,o)),function(l){return i(n(l))}}function _ie(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Z5(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=zy(e,l,1,n)-1;return i[c](s[c](l))}}function Wy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function J2(){var e=hF,t=hF,r=Jv,n,s,i,o=$o,l,c,d;function u(){var m=Math.min(e.length,t.length);return o!==$o&&(o=Cie(e[0],e[m-1])),l=m>2?_ie:kie,c=d=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return h.invert=function(m){return o(s((d||(d=l(t,e.map(n),hw)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,fw),u()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),r=fA,u()},h.clamp=function(m){return arguments.length?(o=m?!0:$o,u()):o!==$o},h.interpolate=function(m){return arguments.length?(r=m,u()):r},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,p){return n=m,s=p,u()}}function mA(){return J2()($o,$o)}function Eie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function kv(e){return e=mw(Math.abs(e)),e?e[1]:NaN}function Die(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Aie(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sy(e){if(!(t=Tie.exec(e)))throw new Error("invalid format: "+e);var t;return new pA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sy.prototype=pA.prototype;function pA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iie(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var c$;function Pie(e,t){var r=mw(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(c$=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+mw(e,Math.max(0,t+i-1))[0]}function fF(e,t){var r=mw(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const mF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fF(e*100,t),r:fF,s:Pie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pF(e){return e}var xF=Array.prototype.map,vF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Oie(e){var t=e.grouping===void 0||e.thousands===void 0?pF:Die(xF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?pF:Aie(xF.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=sy(h);var m=h.fill,p=h.align,v=h.sign,g=h.symbol,b=h.zero,y=h.width,C=h.comma,N=h.precision,k=h.trim,S=h.type;S==="n"?(C=!0,S="g"):mF[S]||(N===void 0&&(N=12),k=!0,S="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=g==="$"?n:/[%p]/.test(S)?o:"",T=mF[S],A=/[defgprs%]/.test(S);N=N===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function L(P){var O=D,J=E,W,re,U;if(S==="c")J=T(P)+J,P="";else{P=+P;var Q=P<0||1/P<0;if(P=isNaN(P)?c:T(Math.abs(P),N),k&&(P=Iie(P)),Q&&+P==0&&v!=="+"&&(Q=!1),O=(Q?v==="("?v:l:v==="-"||v==="("?"":v)+O,J=(S==="s"?vF[8+c$/3]:"")+J+(Q&&v==="("?")":""),A){for(W=-1,re=P.length;++W<re;)if(U=P.charCodeAt(W),48>U||U>57){J=(U===46?s+P.slice(W+1):P.slice(W))+J,P=P.slice(0,W);break}}}C&&!b&&(P=t(P,1/0));var B=O.length+P.length+J.length,te=B<y?new Array(y-B+1).join(m):"";switch(C&&b&&(P=t(te+P,te.length?y-J.length:1/0),te=""),p){case"<":P=O+P+J+te;break;case"=":P=O+te+P+J;break;case"^":P=te.slice(0,B=te.length>>1)+O+P+J+te.slice(B);break;default:P=te+O+P+J;break}return i(P)}return L.toString=function(){return h+""},L}function u(h,m){var p=d((h=sy(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(kv(m)/3)))*3,g=Math.pow(10,-v),b=vF[8+v/3];return function(y){return p(g*y)+b}}return{format:d,formatPrefix:u}}var Ij,xA,d$;Mie({thousands:",",grouping:[3],currency:["$",""]});function Mie(e){return Ij=Oie(e),xA=Ij.format,d$=Ij.formatPrefix,Ij}function Rie(e){return Math.max(0,-kv(Math.abs(e)))}function Fie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kv(t)/3)))*3-kv(Math.abs(e)))}function Lie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kv(t)-kv(e))+1}function u$(e,t,r,n){var s=K5(e,t,r),i;switch(n=sy(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Fie(s,o))&&(n.precision=i),d$(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Lie(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Rie(s))&&(n.precision=i-(n.type==="%")*2);break}}return xA(n)}function Km(e){var t=e.domain;return e.ticks=function(r){var n=t();return G5(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return u$(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=Y5(o,l,r),d===c)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function h$(){var e=mA();return e.copy=function(){return Wy(e,h$())},Qc.apply(e,arguments),Km(e)}function f$(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,fw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return f$(e).unknown(t)},e=arguments.length?Array.from(e,fw):[0,1],Km(r)}function m$(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function gF(e){return Math.log(e)}function bF(e){return Math.exp(e)}function Bie(e){return-Math.log(-e)}function Uie(e){return-Math.exp(-e)}function $ie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qie(e){return e===10?$ie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Vie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yF(e){return(t,r)=>-e(-t,r)}function vA(e){const t=e(gF,bF),r=t.domain;let n=10,s,i;function o(){return s=Vie(n),i=qie(n),r()[0]<0?(s=yF(s),i=yF(i),e(Bie,Uie)):e(gF,bF),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let m=s(d),p=s(u),v,g;const b=l==null?10:+l;let y=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),d>0){for(;m<=p;++m)for(v=1;v<n;++v)if(g=m<0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}}else for(;m<=p;++m)for(v=n-1;v>=1;--v)if(g=m>0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}y.length*2<b&&(y=G5(d,u,b))}else y=G5(m,p,Math.min(p-m,b)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sy(c)).precision==null&&(c.trim=!0),c=xA(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(m$(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function p$(){const e=vA(J2()).domain([1,10]);return e.copy=()=>Wy(e,p$()).base(e.base()),Qc.apply(e,arguments),e}function jF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gA(e){var t=1,r=e(jF(t),NF(t));return r.constant=function(n){return arguments.length?e(jF(t=+n),NF(t)):t},Km(r)}function x$(){var e=gA(J2());return e.copy=function(){return Wy(e,x$()).constant(e.constant())},Qc.apply(e,arguments)}function wF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function zie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hie(e){return e<0?-e*e:e*e}function bA(e){var t=e($o,$o),r=1;function n(){return r===1?e($o,$o):r===.5?e(zie,Hie):e(wF(r),wF(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Km(t)}function yA(){var e=bA(J2());return e.copy=function(){return Wy(e,yA()).exponent(e.exponent())},Qc.apply(e,arguments),e}function Wie(){return yA.apply(null,arguments).exponent(.5)}function SF(e){return Math.sign(e)*e*e}function Gie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function v$(){var e=mA(),t=[0,1],r=!1,n;function s(i){var o=Gie(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(SF(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,fw)).map(SF)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return v$(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Qc.apply(s,arguments),Km(s)}function g$(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Qse(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[zy(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Am),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return g$().domain(e).range(t).unknown(n)},Qc.apply(i,arguments)}function b$(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[zy(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return b$().domain([e,t]).range(s).unknown(i)},Qc.apply(Km(o),arguments)}function y$(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[zy(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return y$().domain(e).range(t).unknown(r)},Qc.apply(s,arguments)}const A_=new Date,T_=new Date;function pi(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>pi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(A_.setTime(+i),T_.setTime(+o),e(A_),e(T_),Math.floor(r(A_,T_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const pw=pi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):pw);pw.range;const Bh=1e3,qc=Bh*60,Uh=qc*60,nf=Uh*24,jA=nf*7,CF=nf*30,I_=nf*365,Yp=pi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getUTCSeconds());Yp.range;const NA=pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bh)},(e,t)=>{e.setTime(+e+t*qc)},(e,t)=>(t-e)/qc,e=>e.getMinutes());NA.range;const wA=pi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qc)},(e,t)=>(t-e)/qc,e=>e.getUTCMinutes());wA.range;const SA=pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bh-e.getMinutes()*qc)},(e,t)=>{e.setTime(+e+t*Uh)},(e,t)=>(t-e)/Uh,e=>e.getHours());SA.range;const CA=pi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Uh)},(e,t)=>(t-e)/Uh,e=>e.getUTCHours());CA.range;const Gy=pi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qc)/nf,e=>e.getDate()-1);Gy.range;const Z2=pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nf,e=>e.getUTCDate()-1);Z2.range;const j$=pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nf,e=>Math.floor(e/nf));j$.range;function Px(e){return pi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*qc)/jA)}const eS=Px(0),xw=Px(1),Yie=Px(2),Kie=Px(3),_v=Px(4),Xie=Px(5),Qie=Px(6);eS.range;xw.range;Yie.range;Kie.range;_v.range;Xie.range;Qie.range;function Ox(e){return pi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jA)}const tS=Ox(0),vw=Ox(1),Jie=Ox(2),Zie=Ox(3),Ev=Ox(4),eoe=Ox(5),toe=Ox(6);tS.range;vw.range;Jie.range;Zie.range;Ev.range;eoe.range;toe.range;const kA=pi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kA.range;const _A=pi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_A.range;const af=pi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());af.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});af.range;const sf=pi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});sf.range;function N$(e,t,r,n,s,i){const o=[[Yp,1,Bh],[Yp,5,5*Bh],[Yp,15,15*Bh],[Yp,30,30*Bh],[i,1,qc],[i,5,5*qc],[i,15,15*qc],[i,30,30*qc],[s,1,Uh],[s,3,3*Uh],[s,6,6*Uh],[s,12,12*Uh],[n,1,nf],[n,2,2*nf],[r,1,jA],[t,1,CF],[t,3,3*CF],[e,1,I_]];function l(d,u,h){const m=u<d;m&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),v=p?p.range(d,+u+1):[];return m?v.reverse():v}function c(d,u,h){const m=Math.abs(u-d)/h,p=lA(([,,b])=>b).right(o,m);if(p===o.length)return e.every(K5(d/I_,u/I_,h));if(p===0)return pw.every(Math.max(K5(d,u,h),1));const[v,g]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(g)}return[l,c]}const[roe,noe]=N$(sf,_A,tS,j$,CA,wA),[aoe,soe]=N$(af,kA,eS,Gy,SA,NA);function P_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function O_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function db(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ioe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ub(s),u=hb(s),h=ub(i),m=hb(i),p=ub(o),v=hb(o),g=ub(l),b=hb(l),y=ub(c),C=hb(c),N={a:Q,A:B,b:te,B:X,c:null,d:TF,e:TF,f:Doe,g:Boe,G:$oe,H:koe,I:_oe,j:Eoe,L:w$,m:Aoe,M:Toe,p:ce,q:M,Q:OF,s:MF,S:Ioe,u:Poe,U:Ooe,V:Moe,w:Roe,W:Foe,x:null,X:null,y:Loe,Y:Uoe,Z:qoe,"%":PF},k={a:q,A:z,b:K,B:ee,c:null,d:IF,e:IF,f:Woe,g:rle,G:ale,H:Voe,I:zoe,j:Hoe,L:C$,m:Goe,M:Yoe,p:ne,q:ae,Q:OF,s:MF,S:Koe,u:Xoe,U:Qoe,V:Joe,w:Zoe,W:ele,x:null,X:null,y:tle,Y:nle,Z:sle,"%":PF},S={a:L,A:P,b:O,B:J,c:W,d:DF,e:DF,f:Noe,g:EF,G:_F,H:AF,I:AF,j:goe,L:joe,m:voe,M:boe,p:A,q:xoe,Q:Soe,s:Coe,S:yoe,u:uoe,U:hoe,V:foe,w:doe,W:moe,x:re,X:U,y:EF,Y:_F,Z:poe,"%":woe};N.x=D(r,N),N.X=D(n,N),N.c=D(t,N),k.x=D(r,k),k.X=D(n,k),k.c=D(t,k);function D(ie,G){return function(de){var Y=[],oe=-1,Se=0,ue=ie.length,se,ye,Ne;for(de instanceof Date||(de=new Date(+de));++oe<ue;)ie.charCodeAt(oe)===37&&(Y.push(ie.slice(Se,oe)),(ye=kF[se=ie.charAt(++oe)])!=null?se=ie.charAt(++oe):ye=se==="e"?" ":"0",(Ne=G[se])&&(se=Ne(de,ye)),Y.push(se),Se=oe+1);return Y.push(ie.slice(Se,oe)),Y.join("")}}function E(ie,G){return function(de){var Y=db(1900,void 0,1),oe=T(Y,ie,de+="",0),Se,ue;if(oe!=de.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(G&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Se=O_(db(Y.y,0,1)),ue=Se.getUTCDay(),Se=ue>4||ue===0?vw.ceil(Se):vw(Se),Se=Z2.offset(Se,(Y.V-1)*7),Y.y=Se.getUTCFullYear(),Y.m=Se.getUTCMonth(),Y.d=Se.getUTCDate()+(Y.w+6)%7):(Se=P_(db(Y.y,0,1)),ue=Se.getDay(),Se=ue>4||ue===0?xw.ceil(Se):xw(Se),Se=Gy.offset(Se,(Y.V-1)*7),Y.y=Se.getFullYear(),Y.m=Se.getMonth(),Y.d=Se.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),ue="Z"in Y?O_(db(Y.y,0,1)).getUTCDay():P_(db(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(ue+5)%7:Y.w+Y.U*7-(ue+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,O_(Y)):P_(Y)}}function T(ie,G,de,Y){for(var oe=0,Se=G.length,ue=de.length,se,ye;oe<Se;){if(Y>=ue)return-1;if(se=G.charCodeAt(oe++),se===37){if(se=G.charAt(oe++),ye=S[se in kF?G.charAt(oe++):se],!ye||(Y=ye(ie,de,Y))<0)return-1}else if(se!=de.charCodeAt(Y++))return-1}return Y}function A(ie,G,de){var Y=d.exec(G.slice(de));return Y?(ie.p=u.get(Y[0].toLowerCase()),de+Y[0].length):-1}function L(ie,G,de){var Y=p.exec(G.slice(de));return Y?(ie.w=v.get(Y[0].toLowerCase()),de+Y[0].length):-1}function P(ie,G,de){var Y=h.exec(G.slice(de));return Y?(ie.w=m.get(Y[0].toLowerCase()),de+Y[0].length):-1}function O(ie,G,de){var Y=y.exec(G.slice(de));return Y?(ie.m=C.get(Y[0].toLowerCase()),de+Y[0].length):-1}function J(ie,G,de){var Y=g.exec(G.slice(de));return Y?(ie.m=b.get(Y[0].toLowerCase()),de+Y[0].length):-1}function W(ie,G,de){return T(ie,t,G,de)}function re(ie,G,de){return T(ie,r,G,de)}function U(ie,G,de){return T(ie,n,G,de)}function Q(ie){return o[ie.getDay()]}function B(ie){return i[ie.getDay()]}function te(ie){return c[ie.getMonth()]}function X(ie){return l[ie.getMonth()]}function ce(ie){return s[+(ie.getHours()>=12)]}function M(ie){return 1+~~(ie.getMonth()/3)}function q(ie){return o[ie.getUTCDay()]}function z(ie){return i[ie.getUTCDay()]}function K(ie){return c[ie.getUTCMonth()]}function ee(ie){return l[ie.getUTCMonth()]}function ne(ie){return s[+(ie.getUTCHours()>=12)]}function ae(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var G=D(ie+="",N);return G.toString=function(){return ie},G},parse:function(ie){var G=E(ie+="",!1);return G.toString=function(){return ie},G},utcFormat:function(ie){var G=D(ie+="",k);return G.toString=function(){return ie},G},utcParse:function(ie){var G=E(ie+="",!0);return G.toString=function(){return ie},G}}}var kF={"-":"",_:" ",0:"0"},Ai=/^\s*\d+/,ooe=/^%/,loe=/[\\^$*+?|[\]().{}]/g;function ea(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function coe(e){return e.replace(loe,"\\$&")}function ub(e){return new RegExp("^(?:"+e.map(coe).join("|")+")","i")}function hb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function doe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function uoe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function hoe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function foe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function moe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function _F(e,t,r){var n=Ai.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function EF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function poe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xoe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function voe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function DF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function goe(e,t,r){var n=Ai.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function AF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function boe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function yoe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function joe(e,t,r){var n=Ai.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Noe(e,t,r){var n=Ai.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function woe(e,t,r){var n=ooe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Soe(e,t,r){var n=Ai.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Coe(e,t,r){var n=Ai.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function TF(e,t){return ea(e.getDate(),t,2)}function koe(e,t){return ea(e.getHours(),t,2)}function _oe(e,t){return ea(e.getHours()%12||12,t,2)}function Eoe(e,t){return ea(1+Gy.count(af(e),e),t,3)}function w$(e,t){return ea(e.getMilliseconds(),t,3)}function Doe(e,t){return w$(e,t)+"000"}function Aoe(e,t){return ea(e.getMonth()+1,t,2)}function Toe(e,t){return ea(e.getMinutes(),t,2)}function Ioe(e,t){return ea(e.getSeconds(),t,2)}function Poe(e){var t=e.getDay();return t===0?7:t}function Ooe(e,t){return ea(eS.count(af(e)-1,e),t,2)}function S$(e){var t=e.getDay();return t>=4||t===0?_v(e):_v.ceil(e)}function Moe(e,t){return e=S$(e),ea(_v.count(af(e),e)+(af(e).getDay()===4),t,2)}function Roe(e){return e.getDay()}function Foe(e,t){return ea(xw.count(af(e)-1,e),t,2)}function Loe(e,t){return ea(e.getFullYear()%100,t,2)}function Boe(e,t){return e=S$(e),ea(e.getFullYear()%100,t,2)}function Uoe(e,t){return ea(e.getFullYear()%1e4,t,4)}function $oe(e,t){var r=e.getDay();return e=r>=4||r===0?_v(e):_v.ceil(e),ea(e.getFullYear()%1e4,t,4)}function qoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ea(t/60|0,"0",2)+ea(t%60,"0",2)}function IF(e,t){return ea(e.getUTCDate(),t,2)}function Voe(e,t){return ea(e.getUTCHours(),t,2)}function zoe(e,t){return ea(e.getUTCHours()%12||12,t,2)}function Hoe(e,t){return ea(1+Z2.count(sf(e),e),t,3)}function C$(e,t){return ea(e.getUTCMilliseconds(),t,3)}function Woe(e,t){return C$(e,t)+"000"}function Goe(e,t){return ea(e.getUTCMonth()+1,t,2)}function Yoe(e,t){return ea(e.getUTCMinutes(),t,2)}function Koe(e,t){return ea(e.getUTCSeconds(),t,2)}function Xoe(e){var t=e.getUTCDay();return t===0?7:t}function Qoe(e,t){return ea(tS.count(sf(e)-1,e),t,2)}function k$(e){var t=e.getUTCDay();return t>=4||t===0?Ev(e):Ev.ceil(e)}function Joe(e,t){return e=k$(e),ea(Ev.count(sf(e),e)+(sf(e).getUTCDay()===4),t,2)}function Zoe(e){return e.getUTCDay()}function ele(e,t){return ea(vw.count(sf(e)-1,e),t,2)}function tle(e,t){return ea(e.getUTCFullYear()%100,t,2)}function rle(e,t){return e=k$(e),ea(e.getUTCFullYear()%100,t,2)}function nle(e,t){return ea(e.getUTCFullYear()%1e4,t,4)}function ale(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ev(e):Ev.ceil(e),ea(e.getUTCFullYear()%1e4,t,4)}function sle(){return"+0000"}function PF(){return"%"}function OF(e){return+e}function MF(e){return Math.floor(+e/1e3)}var E0,_$,E$;ile({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ile(e){return E0=ioe(e),_$=E0.format,E0.parse,E$=E0.utcFormat,E0.utcParse,E0}function ole(e){return new Date(e)}function lle(e){return e instanceof Date?+e:+new Date(+e)}function EA(e,t,r,n,s,i,o,l,c,d){var u=mA(),h=u.invert,m=u.domain,p=d(".%L"),v=d(":%S"),g=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),C=d("%b %d"),N=d("%B"),k=d("%Y");function S(D){return(c(D)<D?p:l(D)<D?v:o(D)<D?g:i(D)<D?b:n(D)<D?s(D)<D?y:C:r(D)<D?N:k)(D)}return u.invert=function(D){return new Date(h(D))},u.domain=function(D){return arguments.length?m(Array.from(D,lle)):m().map(ole)},u.ticks=function(D){var E=m();return e(E[0],E[E.length-1],D??10)},u.tickFormat=function(D,E){return E==null?S:d(E)},u.nice=function(D){var E=m();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?m(m$(E,D)):u},u.copy=function(){return Wy(u,EA(e,t,r,n,s,i,o,l,c,d))},u}function cle(){return Qc.apply(EA(aoe,soe,af,kA,eS,Gy,SA,NA,Yp,_$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dle(){return Qc.apply(EA(roe,noe,sf,_A,tS,Z2,CA,wA,Yp,E$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rS(){var e=0,t=1,r,n,s,i,o=$o,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(m){var p,v;return arguments.length?([p,v]=m,o=h(p,v),d):[o(0),o(1)]}}return d.range=u(Jv),d.rangeRound=u(fA),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),d}}function Xm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D$(){var e=Km(rS()($o));return e.copy=function(){return Xm(e,D$())},hf.apply(e,arguments)}function A$(){var e=vA(rS()).domain([1,10]);return e.copy=function(){return Xm(e,A$()).base(e.base())},hf.apply(e,arguments)}function T$(){var e=gA(rS());return e.copy=function(){return Xm(e,T$()).constant(e.constant())},hf.apply(e,arguments)}function DA(){var e=bA(rS());return e.copy=function(){return Xm(e,DA()).exponent(e.exponent())},hf.apply(e,arguments)}function ule(){return DA.apply(null,arguments).exponent(.5)}function I$(){var e=[],t=$o;function r(n){if(n!=null&&!isNaN(n=+n))return t((zy(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Xse(e,i/n))},r.copy=function(){return I$(t).domain(e)},hf.apply(r,arguments)}function nS(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,d=$o,u,h=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+u(g))-i)*(n*g<n*i?l:c),d(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(d=g,p):d};function v(g){return function(b){var y,C,N;return arguments.length?([y,C,N]=b,d=wie(g,[y,C,N]),p):[d(0),d(.5),d(1)]}}return p.range=v(Jv),p.rangeRound=v(fA),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return u=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function P$(){var e=Km(nS()($o));return e.copy=function(){return Xm(e,P$())},hf.apply(e,arguments)}function O$(){var e=vA(nS()).domain([.1,1,10]);return e.copy=function(){return Xm(e,O$()).base(e.base())},hf.apply(e,arguments)}function M$(){var e=gA(nS());return e.copy=function(){return Xm(e,M$()).constant(e.constant())},hf.apply(e,arguments)}function AA(){var e=bA(nS());return e.copy=function(){return Xm(e,AA()).exponent(e.exponent())},hf.apply(e,arguments)}function hle(){return AA.apply(null,arguments).exponent(.5)}const Db=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dA,scaleDiverging:P$,scaleDivergingLog:O$,scaleDivergingPow:AA,scaleDivergingSqrt:hle,scaleDivergingSymlog:M$,scaleIdentity:f$,scaleImplicit:X5,scaleLinear:h$,scaleLog:p$,scaleOrdinal:cA,scalePoint:Zse,scalePow:yA,scaleQuantile:g$,scaleQuantize:b$,scaleRadial:v$,scaleSequential:D$,scaleSequentialLog:A$,scaleSequentialPow:DA,scaleSequentialQuantile:I$,scaleSequentialSqrt:ule,scaleSequentialSymlog:T$,scaleSqrt:Wie,scaleSymlog:x$,scaleThreshold:y$,scaleTime:cle,scaleUtc:dle,tickFormat:u$},Symbol.toStringTag,{value:"Module"}));var Mx=e=>e.chartData,fle=Gt([Mx],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),R$=(e,t,r,n)=>n?fle(e):Mx(e);function Dv(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zo(t)&&zo(r))return!0}return!1}function RF(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function mle(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(zo(r))s=r;else if(typeof r=="function")return;if(zo(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Dv(o))return o}}function ple(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Dv(n))return RF(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Tr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&wR.test(s)){var c=wR.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Tr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&SR.test(i)){var u=SR.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var m=[o,l];if(Dv(m))return t==null?m:RF(m,t,r)}}}var Zv=1e9,xle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IA,Xa=!0,Wc="[DecimalError] ",ix=Wc+"Invalid argument: ",TA=Wc+"Exponent out of range: ",eg=Math.floor,Mp=Math.pow,vle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hl,wi=1e7,Ba=7,F$=9007199254740991,gw=eg(F$/Ba),Er={};Er.absoluteValue=Er.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Er.comparedTo=Er.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Er.decimalPlaces=Er.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ba;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Er.dividedBy=Er.div=function(e){return zh(this,new this.constructor(e))};Er.dividedToIntegerBy=Er.idiv=function(e){var t=this,r=t.constructor;return Aa(zh(t,new r(e),0,1),r.precision)};Er.equals=Er.eq=function(e){return!this.cmp(e)};Er.exponent=function(){return ni(this)};Er.greaterThan=Er.gt=function(e){return this.cmp(e)>0};Er.greaterThanOrEqualTo=Er.gte=function(e){return this.cmp(e)>=0};Er.isInteger=Er.isint=function(){return this.e>this.d.length-2};Er.isNegative=Er.isneg=function(){return this.s<0};Er.isPositive=Er.ispos=function(){return this.s>0};Er.isZero=function(){return this.s===0};Er.lessThan=Er.lt=function(e){return this.cmp(e)<0};Er.lessThanOrEqualTo=Er.lte=function(e){return this.cmp(e)<1};Er.logarithm=Er.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Hl))throw Error(Wc+"NaN");if(r.s<1)throw Error(Wc+(r.s?"NaN":"-Infinity"));return r.eq(Hl)?new n(0):(Xa=!1,t=zh(iy(r,i),iy(e,i),i),Xa=!0,Aa(t,s))};Er.minus=Er.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?U$(t,e):L$(t,(e.s=-e.s,e))};Er.modulo=Er.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Wc+"NaN");return r.s?(Xa=!1,t=zh(r,e,0,1).times(e),Xa=!0,r.minus(t)):Aa(new n(r),s)};Er.naturalExponential=Er.exp=function(){return B$(this)};Er.naturalLogarithm=Er.ln=function(){return iy(this)};Er.negated=Er.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Er.plus=Er.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?L$(t,e):U$(t,(e.s=-e.s,e))};Er.precision=Er.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ix+e);if(t=ni(s)+1,n=s.d.length-1,r=n*Ba+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Er.squareRoot=Er.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wc+"NaN")}for(e=ni(l),Xa=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Iu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=eg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(zh(l,i,o+2)).times(.5),Iu(i.d).slice(0,o)===(t=Iu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Aa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Xa=!0,Aa(n,r)};Er.times=Er.mul=function(e){var t,r,n,s,i,o,l,c,d,u=this,h=u.constructor,m=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=m.length,d=p.length,c<d&&(i=m,m=p,p=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+p[n]*m[s-n-1]+t,i[s--]=l%wi|0,t=l/wi|0;i[s]=(i[s]+t)%wi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Xa?Aa(e,h.precision):e};Er.toDecimalPlaces=Er.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Hu(e,0,Zv),t===void 0?t=n.rounding:Hu(t,0,8),Aa(r,e+ni(r)+1,t))};Er.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=jx(n,!0):(Hu(e,0,Zv),t===void 0?t=s.rounding:Hu(t,0,8),n=Aa(new s(n),e+1,t),r=jx(n,!0,e+1)),r};Er.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?jx(s):(Hu(e,0,Zv),t===void 0?t=i.rounding:Hu(t,0,8),n=Aa(new i(s),e+ni(s)+1,t),r=jx(n.abs(),!1,e+ni(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Er.toInteger=Er.toint=function(){var e=this,t=e.constructor;return Aa(new t(e),ni(e)+1,t.rounding)};Er.toNumber=function(){return+this};Er.toPower=Er.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Hl);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wc+"Infinity");return l}if(l.eq(Hl))return l;if(n=c.precision,e.eq(Hl))return Aa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=F$){for(s=new c(Hl),t=Math.ceil(n/Ba+4),Xa=!1;r%2&&(s=s.times(l),LF(s.d,t)),r=eg(r/2),r!==0;)l=l.times(l),LF(l.d,t);return Xa=!0,e.s<0?new c(Hl).div(s):Aa(s,n)}}else if(i<0)throw Error(Wc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Xa=!1,s=e.times(iy(l,n+d)),Xa=!0,s=B$(s),s.s=i,s};Er.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ni(s),n=jx(s,r<=i.toExpNeg||r>=i.toExpPos)):(Hu(e,1,Zv),t===void 0?t=i.rounding:Hu(t,0,8),s=Aa(new i(s),e,t),r=ni(s),n=jx(s,e<=r||r<=i.toExpNeg,e)),n};Er.toSignificantDigits=Er.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Hu(e,1,Zv),t===void 0?t=n.rounding:Hu(t,0,8)),Aa(new n(r),e,t)};Er.toString=Er.valueOf=Er.val=Er.toJSON=Er[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ni(e),r=e.constructor;return jx(e,t<=r.toExpNeg||t>=r.toExpPos)};function L$(e,t){var r,n,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Xa?Aa(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(h/Ba),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/wi|0,c[i]%=wi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Xa?Aa(t,h):t}function Hu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ix+e)}function Iu(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Ba-n.length,r&&(i+=Nm(r)),i+=n;o=e[t],n=o+"",r=Ba-n.length,r&&(i+=Nm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var zh=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%wi|0,o=i/wi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A=n.constructor,L=n.s==s.s?1:-1,P=n.d,O=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Wc+"Division by zero");for(c=n.e-s.e,E=O.length,S=P.length,p=new A(L),v=p.d=[],d=0;O[d]==(P[d]||0);)++d;if(O[d]>(P[d]||0)&&--c,i==null?C=i=A.precision:o?C=i+(ni(n)-ni(s))+1:C=i,C<0)return new A(0);if(C=C/Ba+2|0,d=0,E==1)for(u=0,O=O[0],C++;(d<S||u)&&C--;d++)N=u*wi+(P[d]||0),v[d]=N/O|0,u=N%O|0;else{for(u=wi/(O[0]+1)|0,u>1&&(O=e(O,u),P=e(P,u),E=O.length,S=P.length),k=E,g=P.slice(0,E),b=g.length;b<E;)g[b++]=0;T=O.slice(),T.unshift(0),D=O[0],O[1]>=wi/2&&++D;do u=0,l=t(O,g,E,b),l<0?(y=g[0],E!=b&&(y=y*wi+(g[1]||0)),u=y/D|0,u>1?(u>=wi&&(u=wi-1),h=e(O,u),m=h.length,b=g.length,l=t(h,g,m,b),l==1&&(u--,r(h,E<m?T:O,m))):(u==0&&(l=u=1),h=O.slice()),m=h.length,m<b&&h.unshift(0),r(g,h,b),l==-1&&(b=g.length,l=t(O,g,E,b),l<1&&(u++,r(g,E<b?T:O,b))),b=g.length):l===0&&(u++,g=[0]),v[d++]=u,l&&g[0]?g[b++]=P[k]||0:(g=[P[k]],b=1);while((k++<S||g[0]!==void 0)&&C--)}return v[0]||v.shift(),p.e=c,Aa(p,o?i+ni(p)+1:i)}}();function B$(e,t){var r,n,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(ni(e)>16)throw Error(TA+ni(e));if(!e.s)return new u(Hl);for(Xa=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Mp(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new u(Hl),u.precision=l;;){if(s=Aa(s.times(e),l),r=r.times(++c),o=i.plus(zh(s,r,l)),Iu(o.d).slice(0,l)===Iu(i.d).slice(0,l)){for(;d--;)i=Aa(i.times(i),l);return u.precision=h,t==null?(Xa=!0,Aa(i,h)):i}i=o}}function ni(e){for(var t=e.e*Ba,r=e.d[0];r>=10;r/=10)t++;return t}function M_(e,t,r){if(t>e.LN10.sd())throw Xa=!0,r&&(e.precision=r),Error(Wc+"LN10 precision limit exceeded");return Aa(new e(e.LN10),t)}function Nm(e){for(var t="";e--;)t+="0";return t}function iy(e,t){var r,n,s,i,o,l,c,d,u,h=1,m=10,p=e,v=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(Wc+(p.s?"NaN":"-Infinity"));if(p.eq(Hl))return new g(0);if(t==null?(Xa=!1,d=b):d=t,p.eq(10))return t==null&&(Xa=!0),M_(g,d);if(d+=m,g.precision=d,r=Iu(v),n=r.charAt(0),i=ni(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Iu(p.d),n=r.charAt(0),h++;i=ni(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=M_(g,d+2,b).times(i+""),p=iy(new g(n+"."+r.slice(1)),d-m).plus(c),g.precision=b,t==null?(Xa=!0,Aa(p,b)):p;for(l=o=p=zh(p.minus(Hl),p.plus(Hl),d),u=Aa(p.times(p),d),s=3;;){if(o=Aa(o.times(u),d),c=l.plus(zh(o,new g(s),d)),Iu(c.d).slice(0,d)===Iu(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(M_(g,d+2,b).times(i+""))),l=zh(l,new g(h),d),g.precision=b,t==null?(Xa=!0,Aa(l,b)):l;l=c,s+=2}}function FF(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=eg(r/Ba),e.d=[],n=(r+1)%Ba,r<0&&(n+=Ba),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ba;n<s;)e.d.push(+t.slice(n,n+=Ba));t=t.slice(n),n=Ba-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Xa&&(e.e>gw||e.e<-gw))throw Error(TA+r)}else e.s=0,e.e=0,e.d=[0];return e}function Aa(e,t,r){var n,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ba,s=t,d=h[u=0];else{if(u=Math.ceil((n+1)/Ba),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=Ba,s=n-Ba+o}if(r!==void 0&&(i=Mp(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/Mp(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=ni(e),h.length=1,t=t-i-1,h[0]=Mp(10,(Ba-t%Ba)%Ba),e.e=eg(-t/Ba)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=Mp(10,Ba-n),h[u]=s>0?(d/Mp(10,o-s)%Mp(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==wi&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=wi)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Xa&&(e.e>gw||e.e<-gw))throw Error(TA+ni(e));return e}function U$(e,t){var r,n,s,i,o,l,c,d,u,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Xa?Aa(t,p):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),s=Math.max(Math.ceil(p/Ba),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=wi-1;--c[i],c[s]+=wi}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Xa?Aa(t,p):t):new m(0)}function jx(e,t,r){var n,s=ni(e),i=Iu(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Nm(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Nm(-s-1)+i,r&&(n=r-o)>0&&(i+=Nm(n))):s>=o?(i+=Nm(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Nm(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Nm(n))),e.s<0?"-"+i:i}function LF(e,t){if(e.length>t)return e.length=t,!0}function $$(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ix+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return FF(o,i.toString())}else if(typeof i!="string")throw Error(ix+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,vle.test(i))FF(o,i);else throw Error(ix+i)}if(s.prototype=Er,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$$,s.config=s.set=gle,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function gle(e){if(!e||typeof e!="object")throw Error(Wc+"Object expected");var t,r,n,s=["precision",1,Zv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(eg(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(ix+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ix+r+": "+n);return this}var IA=$$(xle);Hl=new IA(1);const ga=IA;var ble=e=>e,q$={},V$=e=>e===q$,BF=e=>function t(){return arguments.length===0||arguments.length===1&&V$(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},z$=(e,t)=>e===1?t:BF(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==q$).length;return i>=e?t(...n):z$(e-i,BF(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>V$(u)?l.shift():u);return t(...d,...l)}))}),aS=e=>z$(e.length,e),eD=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},yle=aS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),jle=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return ble;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},tD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),H$=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function W$(e){var t;return e===0?t=1:t=Math.floor(new ga(e).abs().log(10).toNumber())+1,t}function G$(e,t,r){for(var n=new ga(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}aS((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});aS((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});aS((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Y$=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},K$=(e,t,r)=>{if(e.lte(0))return new ga(0);var n=W$(e.toNumber()),s=new ga(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new ga(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new ga(c.toNumber()):new ga(Math.ceil(c.toNumber()))},Nle=(e,t,r)=>{var n=new ga(1),s=new ga(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new ga(10).pow(W$(e)-1),s=new ga(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new ga(Math.floor(e)))}else e===0?s=new ga(Math.floor((t-1)/2)):r||(s=new ga(Math.floor(e)));var o=Math.floor((t-1)/2),l=jle(yle(c=>s.add(new ga(c-o).mul(n)).toNumber()),eD);return l(0,t)},X$=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ga(0),tickMin:new ga(0),tickMax:new ga(0)};var o=K$(new ga(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new ga(0):(l=new ga(t).add(r).div(2),l=l.sub(new ga(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new ga(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?X$(t,r,n,s,i+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new ga(c).mul(o)),tickMax:l.add(new ga(d).mul(o))})};function wle(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=Y$([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...eD(0,n-1).map(()=>1/0)]:[...eD(0,n-1).map(()=>-1/0),l];return t>r?tD(c):c}if(o===l)return Nle(o,n,s);var{step:d,tickMin:u,tickMax:h}=X$(o,l,i,s,0),m=G$(u,h.add(new ga(.1).mul(d)),d);return t>r?tD(m):m}function Sle(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Y$([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=K$(new ga(o).sub(i).div(l-1),s,0),d=[...G$(new ga(i),new ga(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>n?tD(d):d}var Cle=H$(wle),kle=H$(Sle),_le=e=>e.rootProps.barCategoryGap,sS=e=>e.rootProps.stackOffset,PA=e=>e.options.chartName,OA=e=>e.rootProps.syncId,Q$=e=>e.rootProps.syncMethod,MA=e=>e.options.eventEmitter,Rh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Bl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Ele={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:Rh.reversed,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:Rh.type,unit:void 0},Dle={allowDataOverflow:Bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bl.scale,tick:Bl.tick,tickCount:Bl.tickCount,ticks:void 0,type:Bl.type,unit:void 0},Ale={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Rh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tle={allowDataOverflow:Bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bl.scale,tick:Bl.tick,tickCount:Bl.tickCount,ticks:void 0,type:"category",unit:void 0},RA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Ale:Ele,FA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Tle:Dle,oS=e=>e.polarOptions,LA=Gt([df,uf,Zi],Nne),J$=Gt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.innerRadius,t,0)}),Z$=Gt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.outerRadius,t,t*.8)}),Ile=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},eq=Gt([oS],Ile);Gt([RA,eq],iS);var tq=Gt([LA,J$,Z$],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Gt([FA,tq],iS);var Ple=Gt([Za,oS,J$,Z$,df,uf],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Fm(o,s,s/2),cy:Fm(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Ti=(e,t)=>t,lS=(e,t,r)=>r;function UF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(r),!0).forEach(function(n){Ole(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ole(e,t,r){return(t=Mle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mle(e){var t=Rle(e,"string");return typeof t=="symbol"?t:t+""}function Rle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rD=[0,"auto"],Fl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ff=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Fl},Ll={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Y2},Qm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ll},Fle={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BA=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Fle},gl=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);case"zAxis":return BA(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Lle=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Yy=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rq=e=>e.graphicalItems.countOfBars>0;function nq(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var aq=e=>e.graphicalItems.cartesianItems,Ble=Gt([Ti,lS],nq),sq=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Ky=Gt([aq,gl,Ble],sq),iq=e=>e.filter(t=>t.stackId===void 0),Ule=Gt([Ky],iq),oq=e=>e.map(t=>t.data).filter(Boolean).flat(1),$le=Gt([Ky],oq),lq=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},cS=Gt([$le,R$],lq),cq=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Zl(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Zl(s,n)}))):e.map(n=>({value:n})),dS=Gt([cS,gl,Ky],cq);function dq(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Rx(e){return e.filter(t=>zu(t)||t instanceof Date).map(Number).filter(t=>nc(t)===!1)}function qle(e,t,r){return!r||typeof t!="number"||nc(t)?[]:r.length?Rx(r.flatMap(n=>{var s=Zl(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!zo(i)||!zo(o)))return[t-i,t+o]})):[]}var uq=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:Fne(e,c,r),graphicalItems:l}]}))},nD=Gt([cS,Ky,sS],uq),hq=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Une(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Vle=Gt([nD,Mx,Ti],hq),fq=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>dq(n,u)),d=Zl(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:qle(s,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Zl(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),zle=Gt(cS,gl,Ule,Ti,fq);function Hle(e){var{value:t}=e;if(zu(t)||t instanceof Date)return t}var Wle=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Rx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gle=(e,t,r)=>{var n=e.map(Hle).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&O9(n))?t$(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UA=e=>{var t;if(e==null||!("domain"in e))return rD;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Rx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:rD},$A=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},mq=e=>e.referenceElements.dots,tg=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Yle=Gt([mq,Ti,lS],tg),pq=e=>e.referenceElements.areas,Kle=Gt([pq,Ti,lS],tg),xq=e=>e.referenceElements.lines,Xle=Gt([xq,Ti,lS],tg),vq=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Qle=Gt(Yle,Ti,vq),gq=(e,t)=>{var r=Rx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Jle=Gt([Kle,Ti],gq),bq=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Zle=Gt(Xle,Ti,bq),ece=Gt(Qle,Zle,Jle,(e,t,r)=>$A(e,r,t)),tce=Gt([gl],UA),yq=(e,t,r,n,s)=>{var i=mle(t,e.allowDataOverflow);return i??ple(t,$A(r,s,Wle(n)),e.allowDataOverflow)},rce=Gt([gl,tce,Vle,zle,ece],yq),nce=[0,1],jq=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,d=cf(t,i);return d&&l==null?t$(0,r.length):c==="category"?Gle(n,e,d):s==="expand"?nce:o}},qA=Gt([gl,Za,cS,dS,sS,Ti,rce],jq),Nq=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat($y(i));return l in Db?l:"point"}}},Xy=Gt([gl,Za,rq,PA,Ti],Nq);function ace(e){if(e!=null){if(e in Db)return Db[e]();var t="scale".concat($y(e));if(t in Db)return Db[t]()}}function VA(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=ace(t);if(s!=null){var i=s.domain(r).range(n);return Pne(i),i}}}var wq=(e,t,r)=>{var n=UA(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Dv(e))return Cle(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Dv(e))return kle(e,t.tickCount,t.allowDecimals)}},zA=Gt([qA,Yy,Xy],wq),Sq=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Dv(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},sce=Gt([gl,qA,zA,Ti],Sq),ice=Gt(dS,gl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Rx(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),Cq=Gt(ice,Za,_le,Zi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!zo(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Fm(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),oce=(e,t)=>{var r=ff(e,t);return r==null||typeof r.padding!="string"?0:Cq(e,"xAxis",t,r.padding)},lce=(e,t)=>{var r=Qm(e,t);return r==null||typeof r.padding!="string"?0:Cq(e,"yAxis",t,r.padding)},cce=Gt(ff,oce,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),dce=Gt(Qm,lce,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),uce=Gt([Zi,cce,X2,K2,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),hce=Gt([Zi,Za,dce,X2,K2,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qy=(e,t,r,n)=>{var s;switch(t){case"xAxis":return uce(e,r,n);case"yAxis":return hce(e,r,n);case"zAxis":return(s=BA(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return eq(e);case"radiusAxis":return tq(e,r);default:return}},kq=Gt([gl,Qy],iS),rg=Gt([gl,Xy,sce,kq],VA);Gt(Ky,Ti,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>dq(t,r)));function _q(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var uS=(e,t)=>t,hS=(e,t,r)=>r,fce=Gt(eA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_q)),mce=Gt(tA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_q)),Eq=(e,t)=>({width:e.width,height:t.height}),pce=(e,t)=>{var r=typeof t.width=="number"?t.width:Y2;return{width:r,height:e.height}},xce=Gt(Zi,ff,Eq),vce=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gce=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},bce=Gt(uf,Zi,fce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=Eq(t,l);o==null&&(o=vce(t,n,e));var d=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),yce=Gt(df,Zi,mce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=pce(t,l);o==null&&(o=gce(t,n,e));var d=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),jce=(e,t)=>{var r=Zi(e),n=ff(e,t);if(n!=null){var s=bce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Nce=(e,t)=>{var r=Zi(e),n=Qm(e,t);if(n!=null){var s=yce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},wce=Gt(Zi,Qm,(e,t)=>{var r=typeof t.width=="number"?t.width:Y2;return{width:r,height:e.height}}),Dq=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=cf(e,n),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&O9(c))return c}},HA=Gt([Za,dS,gl,Ti],Dq),Aq=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=cf(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},WA=Gt([Za,dS,Yy,Ti],Aq),$F=Gt([Za,Lle,Xy,rg,HA,WA,Qy,zA,Ti],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var d=cf(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}),Sce=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var d=cf(e,c),{type:u,ticks:h,tickCount:m}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/p:0;v=c==="angleAxis"&&i!=null&&i.length>=2?$c(i[0]-i[1])*2*v:v;var g=h||s;if(g){var b=g.map((y,C)=>{var N=o?o.indexOf(y):y;return{index:C,coordinate:n(N)+v,value:y,offset:v}});return b.filter(y=>!nc(y.coordinate))}return d&&l?l.map((y,C)=>({coordinate:n(y)+v,value:y,index:C,offset:v})):n.ticks?n.ticks(m).map(y=>({coordinate:n(y)+v,value:y,offset:v})):n.domain().map((y,C)=>({coordinate:n(y)+v,value:o?o[y]:y,index:C,offset:v}))}},Tq=Gt([Za,Yy,Xy,rg,zA,Qy,HA,WA,Ti],Sce),Cce=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=cf(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&n?.length>=2?$c(n[0]-n[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},Iq=Gt([Za,Yy,rg,Qy,HA,WA,Ti],Cce),Pq=Gt(gl,rg,(e,t)=>{if(!(e==null||t==null))return bw(bw({},e),{},{scale:t})}),kce=Gt([gl,Xy,qA,kq],VA);Gt((e,t,r)=>BA(e,r),kce,(e,t)=>{if(!(e==null||t==null))return bw(bw({},e),{},{scale:t})});var _ce=Gt([Za,eA,tA],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Oq=e=>e.options.defaultTooltipEventType,Mq=e=>e.options.validateTooltipEventTypes;function Rq(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function GA(e,t){var r=Oq(e),n=Mq(e);return Rq(t,r,n)}function Ece(e){return Kr(t=>GA(t,e))}var Fq=(e,t)=>{var r,n=Number(t);if(!(nc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Dce=e=>e.tooltip.settings,wm={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ace={itemInteraction:{click:wm,hover:wm},axisInteraction:{click:wm,hover:wm},keyboardInteraction:wm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Lq=Kc({name:"tooltip",initialState:Ace,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Vh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Tce,removeTooltipEntrySettings:Ice,setTooltipSettingsState:Pce,setActiveMouseOverItemIndex:Oce,mouseLeaveItem:iBe,mouseLeaveChart:Bq,setActiveClickItemIndex:oBe,setMouseOverAxisIndex:Uq,setMouseClickAxisIndex:Mce,setSyncInteraction:aD,setKeyboardInteraction:sD}=Lq.actions,Rce=Lq.reducer;function qF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(r),!0).forEach(function(n){Fce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fce(e,t,r){return(t=Lce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lce(e){var t=Bce(e,"string");return typeof t=="symbol"?t:t+""}function Bce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uce(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $ce(e){return e.index!=null}var $q=(e,t,r,n)=>{if(t==null)return wm;var s=Uce(e,t,r);if(s==null)return wm;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($ce(s)){if(i)return Pj(Pj({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Pj(Pj({},wm),{},{coordinate:s.coordinate})},YA=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!zo(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},qq=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=s?.[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},Vq=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Jy=e=>e.options.tooltipPayloadSearcher,ng=e=>e.tooltip;function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VF(Object(r),!0).forEach(function(n){qce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qce(e,t,r){return(t=Vce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vce(e){var t=zce(e,"string");return typeof t=="symbol"?t:t+""}function zce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hce(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Wce(e,t){return e??t}var zq=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((m,p)=>{var v,{dataDefinedOnItem:g,settings:b}=p,y=Wce(g,l),C=Hce(y,d,u),N=(v=b?.dataKey)!==null&&v!==void 0?v:n?.dataKey,k=b?.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?S=M9(C,n.dataKey,s):S=i(C,t,c,k),Array.isArray(S))S.forEach(E=>{var T=zF(zF({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});m.push(CR({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:Zl(E.payload,E.dataKey),name:E.name}))});else{var D;m.push(CR({tooltipEntrySettings:b,dataKey:N,payload:S,value:Zl(S,N),name:(D=Zl(S,k))!==null&&D!==void 0?D:b?.name}))}return m},h)}},Ii=e=>{var t=Za(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ag=e=>e.tooltip.settings.axisId,eo=e=>{var t=Ii(e),r=ag(e);return Yy(e,t,r)},KA=Gt([eo,Za,rq,PA,Ii],Nq),Gce=Gt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Yce=Gt([Ii,ag],nq),fS=Gt([Gce,eo,Yce],sq),Kce=Gt([fS],oq),Fx=Gt([Kce,Mx],lq),XA=Gt([Fx,eo,fS],cq),Xce=Gt([eo],UA),Qce=Gt([Fx,fS,sS],uq),Jce=Gt([Qce,Mx,Ii],hq),Zce=Gt([fS],iq),ede=Gt([Fx,eo,Zce,Ii],fq),tde=Gt([mq,Ii,ag],tg),rde=Gt([tde,Ii],vq),nde=Gt([pq,Ii,ag],tg),ade=Gt([nde,Ii],gq),sde=Gt([xq,Ii,ag],tg),ide=Gt([sde,Ii],bq),ode=Gt([rde,ide,ade],$A),lde=Gt([eo,Xce,Jce,ede,ode],yq),Hq=Gt([eo,Za,Fx,XA,sS,Ii,lde],jq),cde=Gt([Hq,eo,KA],wq),dde=Gt([eo,Hq,cde,Ii],Sq),Wq=e=>{var t=Ii(e),r=ag(e),n=!1;return Qy(e,t,r,n)},Gq=Gt([eo,Wq],iS),Yq=Gt([eo,KA,dde,Gq],VA),ude=Gt([Za,XA,eo,Ii],Dq),hde=Gt([Za,XA,eo,Ii],Aq),fde=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,d=cf(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?$c(s[0]-s[1])*2*h:h,d&&o?o.map((m,p)=>({coordinate:n(m)+h,value:m,index:p,offset:h})):n.domain().map((m,p)=>({coordinate:n(m)+h,value:i?i[m]:m,index:p,offset:h}))}}},mf=Gt([Za,eo,KA,Yq,Wq,ude,hde,Ii],fde),QA=Gt([Oq,Mq,Dce],(e,t,r)=>Rq(r.shared,e,t)),Kq=e=>e.tooltip.settings.trigger,JA=e=>e.tooltip.settings.defaultIndex,mS=Gt([ng,QA,Kq,JA],$q),oy=Gt([mS,Fx],YA),Xq=Gt([mf,oy],Fq),mde=Gt([mS],e=>{if(e)return e.dataKey}),Qq=Gt([ng,QA,Kq,JA],Vq),pde=Gt([df,uf,Za,Zi,mf,JA,Qq,Jy],qq),xde=Gt([mS,pde],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),vde=Gt([mS],e=>e.active),gde=Gt([Qq,oy,Mx,eo,Xq,Jy,QA],zq),bde=Gt([gde],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function HF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HF(Object(r),!0).forEach(function(n){yde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yde(e,t,r){return(t=jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jde(e){var t=Nde(e,"string");return typeof t=="symbol"?t:t+""}function Nde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wde=()=>Kr(eo),Sde=()=>{var e=wde(),t=Kr(mf),r=Kr(Yq);return F5(WF(WF({},e),{},{scale:r}),t)},Jq=()=>Kr(PA),ZA=(e,t)=>t,Zq=(e,t,r)=>r,e4=(e,t,r,n)=>n,Cde=Gt(mf,e=>$2(e,t=>t.coordinate)),t4=Gt([ng,ZA,Zq,e4],$q),eV=Gt([t4,Fx],YA),kde=(e,t,r)=>{if(t!=null){var n=ng(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tV=Gt([ng,ZA,Zq,e4],Vq),yw=Gt([df,uf,Za,Zi,mf,e4,tV,Jy],qq),_de=Gt([t4,yw],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rV=Gt(mf,eV,Fq),Ede=Gt([tV,eV,Mx,eo,rV,Jy,ZA],zq),Dde=Gt([t4],e=>({isActive:e.active,activeIndex:e.index})),Ade=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=$ne(e.chartX,e.chartY,t,r,l);if(c){var d=Vne(c,t),u=Tne(d,o,i,n,s),h=qne(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function iD(){return iD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iD.apply(null,arguments)}function GF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GF(Object(r),!0).forEach(function(n){Tde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tde(e,t,r){return(t=Ide(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ide(e){var t=Pde(e,"string");return typeof t=="symbol"?t:t+""}function Pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ode(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,m=n;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,v;if(d==="ScatterChart")p=u,v=zae;else if(d==="BarChart")p=Hae(o,u,s,i),v=Ese;else if(o==="radial"){var{cx:g,cy:b,radius:y,startAngle:C,endAngle:N}=ZU(u);p={cx:g,cy:b,startAngle:C,endAngle:N,innerRadius:y,outerRadius:y},v=Ise}else p={points:Pse(o,u,s)},v=kN;var k=typeof l=="object"&&"className"in l?l.className:void 0,S=Oj(Oj(Oj(Oj({stroke:"#ccc",pointerEvents:"none"},s),p),Da(l,!1)),{},{payload:h,payloadIndex:m,className:xn("recharts-tooltip-cursor",k)});return w.isValidElement(l)?w.cloneElement(l,S):w.createElement(v,S)}function Mde(e){var t=Sde(),r=GU(),n=sA(),s=Jq();return w.createElement(Ode,iD({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var nV=w.createContext(null),Rde=()=>w.useContext(nV),R_={exports:{}},YF;function Fde(){return YF||(YF=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,m),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,m,p,v){var g=r?r+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,C,N;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,m),!0;case 5:return b.fn.call(b.context,u,h,m,p),!0;case 6:return b.fn.call(b.context,u,h,m,p,v),!0}for(N=1,C=new Array(y-1);N<y;N++)C[N-1]=arguments[N];b.fn.apply(b.context,C)}else{var k=b.length,S;for(N=0;N<k;N++)switch(b[N].once&&this.removeListener(d,b[N].fn,void 0,!0),y){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,u);break;case 3:b[N].fn.call(b[N].context,u,h);break;case 4:b[N].fn.call(b[N].context,u,h,m);break;default:if(!C)for(S=1,C=new Array(y-1);S<y;S++)C[S-1]=arguments[S];b[N].fn.apply(b[N].context,C)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,m){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!m||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var g=0,b=[],y=v.length;g<y;g++)(v[g].fn!==u||m&&!v[g].once||h&&v[g].context!==h)&&b.push(v[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(R_)),R_.exports}var Lde=Fde();const Bde=Yu(Lde);var ly=new Bde,oD="recharts.syncEvent.tooltip",KF="recharts.syncEvent.brush";function Ude(e,t){if(t){var r=Number.parseInt(t,10);if(!nc(r))return e?.[r]}}var $de={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},aV=Kc({name:"options",initialState:$de,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),qde=aV.reducer,{createEventEmitter:Vde}=aV.actions;function zde(e){return e.tooltip.syncInteraction}var Hde={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sV=Kc({name:"chartData",initialState:Hde,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:XF,setDataStartEndIndexes:Wde,setComputedData:lBe}=sV.actions,Gde=sV.reducer,iV=()=>{};function Yde(){var e=Kr(OA),t=Kr(MA),r=Ji(),n=Kr(Q$),s=Kr(mf),i=sA(),o=rA(),l=Kr(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return iV;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){r(u);return}if(s!=null){var m;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(s,p);m=s[v]}else n==="value"&&(m=s.find(D=>String(D.value)===u.payload.label));var{coordinate:g}=u.payload;if(m==null||u.payload.active===!1||g==null||o==null){r(aD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,C=Math.min(b,o.x+o.width),N=Math.min(y,o.y+o.height),k={x:i==="horizontal"?m.coordinate:C,y:i==="horizontal"?N:m.coordinate},S=aD({active:u.payload.active,coordinate:k,dataKey:u.payload.dataKey,index:String(m.index),label:u.payload.label});r(S)}}};return ly.on(oD,c),()=>{ly.off(oD,c)}},[l,r,t,e,n,s,i,o])}function Kde(){var e=Kr(OA),t=Kr(MA),r=Ji();w.useEffect(()=>{if(e==null)return iV;var n=(s,i,o)=>{t!==o&&e===s&&r(Wde(i))};return ly.on(KF,n),()=>{ly.off(KF,n)}},[r,t,e])}function Xde(){var e=Ji();w.useEffect(()=>{e(Vde())},[e]),Yde(),Kde()}function Qde(e,t,r,n,s,i){var o=Kr(m=>kde(m,e,t)),l=Kr(MA),c=Kr(OA),d=Kr(Q$),u=Kr(zde),h=u?.active;w.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=aD({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ly.emit(oD,c,m,l)}},[h,r,o,s,n,l,c,d,i])}function QF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(r),!0).forEach(function(n){Jde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jde(e,t,r){return(t=Zde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zde(e){var t=eue(e,"string");return typeof t=="symbol"?t:t+""}function eue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e){return e.dataKey}function rue(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(Nae,t)}var ZF=[],nue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Vy.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aue(e){var t=Qv(e,nue),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:v,cursor:g,shared:b,trigger:y,defaultIndex:C,portal:N,axisId:k}=t,S=Ji(),D=typeof C=="number"?String(C):C;w.useEffect(()=>{S(Pce({shared:b,trigger:y,axisId:k,active:r,defaultIndex:D}))},[S,b,y,k,r,D]);var E=rA(),T=KU(),A=Ece(b),{activeIndex:L,isActive:P}=Kr(K=>Dde(K,A,y,D)),O=Kr(K=>Ede(K,A,y,D)),J=Kr(K=>rV(K,A,y,D)),W=Kr(K=>_de(K,A,y,D)),re=O,U=Rde(),Q=r??P,[B,te]=xU([re,Q]),X=A==="axis"?J:void 0;Qde(A,y,W,X,L,Q);var ce=N??U;if(ce==null)return null;var M=re??ZF;Q||(M=ZF),l&&M.length&&(M=uU(re.filter(K=>K.value!=null&&(K.hide!==!0||t.includeHidden)),u,tue));var q=M.length>0,z=w.createElement(Dae,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:Q,coordinate:W,hasPayload:q,offset:d,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:v,lastBoundingBox:B,innerRef:te,hasPortalFromProps:!!N},rue(o,JF(JF({},t),{},{payload:M,label:X,active:Q,coordinate:W,accessibilityLayer:T})));return w.createElement(w.Fragment,null,Ly.createPortal(z,ce),Q&&w.createElement(Mde,{cursor:g,tooltipEventType:A,coordinate:W,payload:re,index:L}))}var F_={},L_={},eL;function sue(){return eL||(eL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,s={}){typeof s!="object"&&(s={});let i=null,o=null,l=null,c=0,d=null,u;const{leading:h=!1,trailing:m=!0,maxWait:p}=s,v="maxWait"in s,g=v?Math.max(Number(p)||0,n):0,b=E=>(i!==null&&(u=r.apply(o,i)),i=o=null,c=E,u),y=E=>(c=E,d=setTimeout(S,n),h&&i!==null?b(E):u),C=E=>(d=null,m&&i!==null?b(E):u),N=E=>{if(l===null)return!0;const T=E-l,A=T>=n||T<0,L=v&&E-c>=g;return A||L},k=E=>{const T=l===null?0:E-l,A=n-T,L=g-(E-c);return v?Math.min(A,L):A},S=()=>{const E=Date.now();if(N(E))return C(E);d=setTimeout(S,k(E))},D=function(...E){const T=Date.now(),A=N(T);if(i=E,o=this,l=T,A){if(d===null)return y(T);if(v)return clearTimeout(d),d=setTimeout(S,n),b(T)}return d===null&&(d=setTimeout(S,n)),u};return D.cancel=()=>{d!==null&&clearTimeout(d),c=0,l=i=o=d=null},D.flush=()=>d===null?u:C(Date.now()),D}e.debounce=t}(L_)),L_}var tL;function iue(){return tL||(tL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sue();function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r}(F_)),F_}var B_,rL;function oue(){return rL||(rL=1,B_=iue().throttle),B_}var lue=oue();const cue=Yu(lue);var Rb=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function nL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(r),!0).forEach(function(n){due(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function due(e,t,r){return(t=uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uue(e){var t=hue(e,"string");return typeof t=="symbol"?t:t+""}function hue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fue=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:m,onResize:p,style:v={}}=e,g=w.useRef(null),b=w.useRef();b.current=p,w.useImperativeHandle(t,()=>g.current);var[y,C]=w.useState({containerWidth:n.width,containerHeight:n.height}),N=w.useCallback((S,D)=>{C(E=>{var T=Math.round(S),A=Math.round(D);return E.containerWidth===T&&E.containerHeight===A?E:{containerWidth:T,containerHeight:A}})},[]);w.useEffect(()=>{var S=A=>{var L,{width:P,height:O}=A[0].contentRect;N(P,O),(L=b.current)===null||L===void 0||L.call(b,P,O)};u>0&&(S=cue(S,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(S),{width:E,height:T}=g.current.getBoundingClientRect();return N(E,T),D.observe(g.current),()=>{D.disconnect()}},[N,u]);var k=w.useMemo(()=>{var{containerWidth:S,containerHeight:D}=y;if(S<0||D<0)return null;Rb(Hp(s)||Hp(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Hp(s)?S:s,T=Hp(i)?D:i;return r&&r>0&&(E?T=E/r:T&&(E=T*r),c&&T>c&&(T=c)),Rb(E>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,T,s,i,o,l,r),w.Children.map(d,A=>w.cloneElement(A,{width:E,height:T,style:U_({width:E,height:T},A.props.style)}))},[r,d,i,c,l,o,y,s]);return w.createElement("div",{id:h?"".concat(h):void 0,className:xn("recharts-responsive-container",m),style:U_(U_({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))});function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mue(e,t,r){return(t=pue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pue(e){var t=xue(e,"string");return typeof t=="symbol"?t:t+""}function xue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D0={widthCache:{},cacheCount:0},vue=2e3,gue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sL="recharts_measurement_span";function bue(e){var t=lD({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Fb=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Vy.isSsr)return{width:0,height:0};var n=bue(r),s=JSON.stringify({text:t,copyStyle:n});if(D0.widthCache[s])return D0.widthCache[s];try{var i=document.getElementById(sL);i||(i=document.createElement("span"),i.setAttribute("id",sL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=lD(lD({},gue),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return D0.widthCache[s]=c,++D0.cacheCount>vue&&(D0.cacheCount=0,D0.widthCache={}),c}catch{return{width:0,height:0}}},iL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Nue=Object.keys(oV),X0="NaN";function wue(e,t){return e*oV[t]}class sl{static parse(t){var r,[,n,s]=(r=jue.exec(t))!==null&&r!==void 0?r:[];return new sl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,nc(t)&&(this.unit=""),r!==""&&!yue.test(r)&&(this.num=NaN,this.unit=""),Nue.includes(r)&&(this.num=wue(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return nc(this.num)}}function lV(e){if(e.includes(X0))return X0;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=iL.exec(t))!==null&&r!==void 0?r:[],o=sl.parse(n??""),l=sl.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return X0;t=t.replace(iL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,m]=(d=oL.exec(t))!==null&&d!==void 0?d:[],p=sl.parse(u??""),v=sl.parse(m??""),g=h==="+"?p.add(v):p.subtract(v);if(g.isNaN())return X0;t=t.replace(oL,g.toString())}return t}var lL=/\(([^()]*)\)/;function Sue(e){for(var t=e,r;(r=lL.exec(t))!=null;){var[,n]=r;t=t.replace(lL,lV(n))}return t}function Cue(e){var t=e.replace(/\s+/g,"");return t=Sue(t),t=lV(t),t}function kue(e){try{return Cue(e)}catch{return X0}}function $_(e){var t=kue(e.slice(5,-1));return t===X0?"":t}var _ue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eue=["dx","dy","angle","className","breakAll"];function cD(){return cD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cD.apply(null,arguments)}function cL(e,t){if(e==null)return{};var r,n,s=Due(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Due(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cV=/[ \f\n\r\t\v\u2028\u2029]+/,dV=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ri(t)||(r?s=t.toString().split(""):s=t.toString().split(cV));var i=s.map(l=>({word:l,width:Fb(l,n).width})),o=r?0:Fb("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Aue=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Tr(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,J)=>{var{word:W,width:re}=J,U=O[O.length-1];if(U&&(n==null||s||U.width+re+r<Number(n)))U.words.push(W),U.width+=re+r;else{var Q={words:[W],width:re};O.push(Q)}return O},[])},m=h(t),p=L=>L.reduce((P,O)=>P.width>O.width?P:O);if(!d||s)return m;var v=m.length>i||p(m).width>Number(n);if(!v)return m;for(var g="",b=L=>{var P=u.slice(0,L),O=dV({breakAll:c,style:l,children:P+g}).wordsWithComputedWidth,J=h(O),W=J.length>i||p(J).width>Number(n);return[W,J]},y=0,C=u.length-1,N=0,k;y<=C&&N<=u.length-1;){var S=Math.floor((y+C)/2),D=S-1,[E,T]=b(D),[A]=b(S);if(!E&&!A&&(y=S+1),E&&A&&(C=S-1),!E&&A){k=T;break}N++}return k||m},dL=e=>{var t=ri(e)?[]:e.toString().split(cV);return[{words:t}]},Tue=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Vy.isSsr){var l,c,d=dV({breakAll:i,children:n,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return dL(n);return Aue({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return dL(n)},uL="#808080",r4=w.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=uL}=e,u=cL(e,_ue),h=w.useMemo(()=>Tue({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:m,dy:p,angle:v,className:g,breakAll:b}=u,y=cL(u,Eue);if(!zu(r)||!zu(n))return null;var C=r+(Tr(m)?m:0),N=n+(Tr(p)?p:0),k;switch(c){case"start":k=$_("calc(".concat(i,")"));break;case"middle":k=$_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:k=$_("calc(".concat(h.length-1," * -").concat(s,")"));break}var S=[];if(o){var D=h[0].width,{width:E}=u;S.push("scale(".concat(Tr(E)?E/D:1,")"))}return v&&S.push("rotate(".concat(v,", ").concat(C,", ").concat(N,")")),S.length&&(y.transform=S.join(" ")),w.createElement("text",cD({},Da(y,!0),{ref:t,x:C,y:N,className:xn("recharts-text",g),textAnchor:l,fill:d.includes("url")?uL:d}),h.map((T,A)=>{var L=T.words.join(b?"":" ");return w.createElement("tspan",{x:C,dy:A===0?k:s,key:"".concat(L,"-").concat(A)},L)}))});r4.displayName="Text";var Iue=["offset"],Pue=["labelRef"];function hL(e,t){if(e==null)return{};var r,n,s=Oue(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(n){Mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mue(e,t,r){return(t=Rue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rue(e){var t=Fue(e,"string");return typeof t=="symbol"?t:t+""}function Fue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(null,arguments)}var Lue=e=>{var{value:t,formatter:r}=e,n=ri(e.children)?t:e.children;return typeof r=="function"?r(n):n},n4=e=>e!=null&&typeof e=="function",Bue=(e,t)=>{var r=$c(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Uue=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:m,clockWise:p}=s,v=(d+u)/2,g=Bue(h,m),b=g>=0?1:-1,y,C;n==="insideStart"?(y=h+b*i,C=p):n==="insideEnd"?(y=m-b*i,C=!p):n==="end"&&(y=m+b*i,C=p),C=g<=0?C:!C;var N=Qi(l,c,v,y),k=Qi(l,c,v,y+(C?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),D=ri(e.id)?Jb("recharts-radial-line-"):e.id;return w.createElement("text",Fh({},r,{dominantBaseline:"central",className:xn("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:D,d:S})),w.createElement("textPath",{xlinkHref:"#".concat(D)},t))},$ue=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(n==="outside"){var{x:h,y:m}=Qi(s,i,l+r,u);return{x:h,y:m,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:g}=Qi(s,i,p,u);return{x:v,y:g,textAnchor:"middle",verticalAnchor:"middle"}},que=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,v=p*n,g=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Qs(Qs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var C={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m};return Qs(Qs({},C),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var N={x:i-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Qs(Qs({},N),r?{width:Math.max(N.x-r.x,0),height:c}:{})}if(s==="right"){var k={x:i+l+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"};return Qs(Qs({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:c}:{})}var S=r?{width:l,height:c}:{};return s==="insideLeft"?Qs({x:i+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?Qs({x:i+l-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},S):s==="insideTop"?Qs({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},S):s==="insideBottom"?Qs({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},S):s==="insideTopLeft"?Qs({x:i+v,y:o+u,textAnchor:b,verticalAnchor:m},S):s==="insideTopRight"?Qs({x:i+l-v,y:o+u,textAnchor:g,verticalAnchor:m},S):s==="insideBottomLeft"?Qs({x:i+v,y:o+c-u,textAnchor:b,verticalAnchor:h},S):s==="insideBottomRight"?Qs({x:i+l-v,y:o+c-u,textAnchor:g,verticalAnchor:h},S):s&&typeof s=="object"&&(Tr(s.x)||Hp(s.x))&&(Tr(s.y)||Hp(s.y))?Qs({x:i+Fm(s.x,l),y:o+Fm(s.y,c),textAnchor:"end",verticalAnchor:"end"},S):Qs({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},Vue=e=>"cx"in e&&Tr(e.cx);function $l(e){var{offset:t=5}=e,r=hL(e,Iue),n=Qs({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=n,m=rA(),p=s||m;if(!p||ri(o)&&ri(l)&&!w.isValidElement(c)&&typeof c!="function")return null;if(w.isValidElement(c)){var{labelRef:v}=n,g=hL(n,Pue);return w.cloneElement(c,g)}var b;if(typeof c=="function"){if(b=w.createElement(c,n),w.isValidElement(b))return b}else b=Lue(n);var y=Vue(p),C=Da(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Uue(n,b,C);var N=y?$ue(n):que(n,p);return w.createElement(r4,Fh({ref:h,className:xn("recharts-label",d)},C,N,{breakAll:u}),b)}$l.displayName="Label";var uV=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:m,left:p,width:v,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(Tr(v)&&Tr(g)){if(Tr(u)&&Tr(h))return{x:u,y:h,width:v,height:g};if(Tr(m)&&Tr(p))return{x:m,y:p,width:v,height:g}}if(Tr(u)&&Tr(h))return{x:u,y:h,width:0,height:0};if(Tr(t)&&Tr(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},zue=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement($l,Fh({key:"label-implicit"},n)):zu(e)?w.createElement($l,Fh({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===$l?w.cloneElement(e,Qs({key:"label-implicit"},n)):w.createElement($l,Fh({key:"label-implicit",content:e},n)):n4(e)?w.createElement($l,Fh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement($l,Fh({},e,{key:"label-implicit"},n)):null},Hue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=uV(t),l=L9(s,$l).map((d,u)=>w.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!n)return l;var c=zue(t.label,r||o,i);return[c,...l]};$l.parseViewBox=uV;$l.renderCallByParent=Hue;var q_={},V_={},mL;function Wue(){return mL||(mL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(V_)),V_}var z_={},pL;function Gue(){return pL||(pL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(z_)),z_}var xL;function Yue(){return xL||(xL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wue(),r=Gue(),n=V3();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(q_)),q_}var H_,vL;function Kue(){return vL||(vL=1,H_=Yue().last),H_}var Xue=Kue();const Que=Yu(Xue);var Jue=["valueAccessor"],Zue=["data","dataKey","clockWise","id","textBreakAll"];function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(null,arguments)}function gL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(r),!0).forEach(function(n){ehe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ehe(e,t,r){return(t=the(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function the(e){var t=rhe(e,"string");return typeof t=="symbol"?t:t+""}function rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yL(e,t){if(e==null)return{};var r,n,s=nhe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ahe=e=>Array.isArray(e.value)?Que(e.value):e.value;function ox(e){var{valueAccessor:t=ahe}=e,r=yL(e,Jue),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=yL(r,Zue);return!n||!n.length?null:w.createElement(tf,{className:"recharts-label-list"},n.map((d,u)=>{var h=ri(s)?t(d,u):Zl(d&&d.payload,s),m=ri(o)?{}:{id:"".concat(o,"-").concat(u)};return w.createElement($l,jw({},Da(d,!0),c,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:$l.parseViewBox(ri(i)?d:bL(bL({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}ox.displayName="LabelList";function she(e,t){return e?e===!0?w.createElement(ox,{key:"labelList-implicit",data:t}):w.isValidElement(e)||n4(e)?w.createElement(ox,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(ox,jw({data:t},e,{key:"labelList-implicit"})):null:null}function ihe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=L9(n,ox).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=she(e.label,t);return[i,...s]}ox.renderCallByParent=ihe;function dD(){return dD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dD.apply(null,arguments)}var hV=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=xn("recharts-dot",s);return t===+t&&r===+r&&n===+n?w.createElement("circle",dD({},Da(e,!1),R3(e),{className:i,cx:t,cy:r,r:n})):null},ohe={radiusAxis:{},angleAxis:{}},fV=Kc({name:"polarAxis",initialState:ohe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:cBe,removeRadiusAxis:dBe,addAngleAxis:uBe,removeAngleAxis:hBe}=fV.actions,lhe=fV.reducer,che={countOfBars:0,cartesianItems:[],polarItems:[]},mV=Kc({name:"graphicalItems",initialState:che,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=Vh(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=Vh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Vh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:fBe,removeBar:mBe,addCartesianGraphicalItem:dhe,replaceCartesianGraphicalItem:uhe,removeCartesianGraphicalItem:hhe,addPolarGraphicalItem:pBe,removePolarGraphicalItem:xBe}=mV.actions,fhe=mV.reducer;function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(n){mhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mhe(e,t,r){return(t=phe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function phe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vhe(e){var t=Ji(),r=w.useRef(null);return w.useEffect(()=>{var n=NL(NL({},e),{},{stackId:VU(e.stackId)});r.current===null?t(dhe(n)):r.current!==n&&t(uhe({prev:r.current,next:n})),r.current=n},[t,e]),w.useEffect(()=>()=>{r.current&&(t(hhe(r.current)),r.current=null)},[t]),null}function ghe(e){var{fn:t,args:r}=e,n=Ji(),s=Xc();return w.useEffect(()=>{if(!s){var i=t(r);return n(Tce(i)),()=>{n(Ice(i))}}},[t,r,n,s]),null}var bhe=()=>{};function yhe(e){var{legendPayload:t}=e,r=Ji(),n=Xc();return w.useEffect(()=>n?bhe:(r(aae(t)),()=>{r(sae(t))}),[r,n,t]),null}function jhe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(Jb(t)),n=w.useRef(e);return n.current!==e&&(r.current=Jb(t),n.current=e),r.current}var Nhe=Gt([Zi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),whe=Gt([Nhe,df,uf],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),a4=()=>Kr(whe),She=()=>Kr(bde);function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return(t=khe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function khe(e){var t=_he(e,"string");return typeof t=="symbol"?t:t+""}function _he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ehe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=SL(SL({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Da(s,!1)),R3(s)),l;return w.isValidElement(s)?l=w.cloneElement(s,o):typeof s=="function"?l=s(o):l=w.createElement(hV,o),w.createElement(tf,{className:"recharts-active-dot"},l)};function CL(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Kr(oy),o=She();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return ri(l)?null:Ehe({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var kL=()=>{},Dhe=w.createContext({addErrorBar:kL,removeErrorBar:kL}),Ahe=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,m]=w.useState([]),p=w.useCallback(b=>{m(y=>[...y,b])},[m]),v=w.useCallback(b=>{m(y=>y.filter(C=>C!==b))},[m]),g=Xc();return w.createElement(Dhe.Provider,{value:{addErrorBar:p,removeErrorBar:v}},w.createElement(vhe,{type:d,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:g}),t)};function pV(e,t){var r,n,s=Kr(d=>ff(d,e)),i=Kr(d=>Qm(d,t)),o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Fl.allowDataOverflow,l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Ll.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function The(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=a4(),{needClipX:i,needClipY:o,needClip:l}=pV(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var Ihe=e=>{var{chartData:t}=e,r=Ji(),n=Xc();return w.useEffect(()=>n?()=>{}:(r(XF(t)),()=>{r(XF(void 0))}),[t,r,n]),null},_L={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xV=Kc({name:"brush",initialState:_L,reducers:{setBrushSettings(e,t){return t.payload==null?_L:t.payload}}}),{setBrushSettings:vBe}=xV.actions,Phe=xV.reducer;function Ohe(e,t,r){return(t=Mhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mhe(e){var t=Rhe(e,"string");return typeof t=="symbol"?t:t+""}function Rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class s4{static create(t){return new s4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}Ohe(s4,"EPS",1e-4);function Fhe(e){return(e%180+180)%180}var Lhe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fhe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Bhe={dots:[],areas:[],lines:[]},vV=Kc({name:"referenceElements",initialState:Bhe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Vh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Vh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Vh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:gBe,removeDot:bBe,addArea:yBe,removeArea:jBe,addLine:NBe,removeLine:wBe}=vV.actions,Uhe=vV.reducer,$he=w.createContext(void 0),qhe=e=>{var{children:t}=e,[r]=w.useState("".concat(Jb("recharts"),"-clip")),n=a4();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return w.createElement($he.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function W_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Vhe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Lhe(n,r)}function zhe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Nw(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Hhe(e,t){return gV(e,t+1)}function Whe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var v=n?.[c];if(v===void 0)return{v:gV(n,d)};var g=c,b,y=()=>(b===void 0&&(b=r(v,g)),b),C=v.coordinate,N=c===0||Nw(e,C,y,u,l);N||(c=0,u=o,d+=1),N&&(u=C+e*(y()/2+s),c+=d)},m;d<=i.length;)if(m=h(),m)return m.v;return[]}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(n){Ghe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ghe(e,t,r){return(t=Yhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yhe(e){var t=Khe(e,"string");return typeof t=="symbol"?t:t+""}function Khe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xhe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(m){var p=i[m],v,g=()=>(v===void 0&&(v=r(p,m)),v);if(m===o-1){var b=e*(p.coordinate+e*g()/2-c);i[m]=p=mo(mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=mo(mo({},p),{},{tickCoord:p.coordinate});var y=Nw(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+s),i[m]=mo(mo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Qhe(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=n[l-1],h=r(u,l-1),m=e*(u.coordinate+e*h/2-d);o[l-1]=u=mo(mo({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var p=Nw(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=mo(mo({},u),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(C){var N=o[C],k,S=()=>(k===void 0&&(k=r(N,C)),k);if(C===0){var D=e*(N.coordinate-e*S()/2-c);o[C]=N=mo(mo({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else o[C]=N=mo(mo({},N),{},{tickCoord:N.coordinate});var E=Nw(e,N.tickCoord,S,c,d);E&&(c=N.tickCoord+e*(S()/2+s),o[C]=mo(mo({},N),{},{isShow:!0}))},b=0;b<v;b++)g(b);return o}function i4(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Tr(c)||Vy.isSsr){var m;return(m=Hhe(s,Tr(c)?c:0))!==null&&m!==void 0?m:[]}var p=[],v=l==="top"||l==="bottom"?"width":"height",g=u&&v==="width"?Fb(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(N,k)=>{var S=typeof d=="function"?d(N.value,k):N.value;return v==="width"?Vhe(Fb(S,{fontSize:t,letterSpacing:r}),g,h):Fb(S,{fontSize:t,letterSpacing:r})[v]},y=s.length>=2?$c(s[1].coordinate-s[0].coordinate):1,C=zhe(i,y,v);return c==="equidistantPreserveStart"?Whe(y,C,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Qhe(y,C,b,s,o,c==="preserveStartEnd"):p=Xhe(y,C,b,s,o),p.filter(N=>N.isShow))}var Jhe=["viewBox"],Zhe=["viewBox"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(null,arguments)}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){o4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AL(e,t){if(e==null)return{};var r,n,s=efe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function efe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o4(e,t,r){return(t=tfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tfe(e){var t=rfe(e,"string");return typeof t=="symbol"?t:t+""}function rfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Jm extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=AL(t,Jhe),i=this.props,{viewBox:o}=i,l=AL(i,Zhe);return!W_(n,o)||!W_(s,l)||!W_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,m,p,v,g,b=c?-1:1,y=t.tickSize||l,C=Tr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!c*i,m=p-b*y,g=m-b*d,v=C;break;case"left":m=p=t.coordinate,h=r+ +!c*s,u=h-b*y,v=u-b*d,g=C;break;case"right":m=p=t.coordinate,h=r+ +c*s,u=h+b*y,v=u+b*d,g=C;break;default:u=h=t.coordinate,p=n+ +c*i,m=p+b*y,g=m+b*d,v=C;break}return{line:{x1:u,y1:m,x2:h,y2:p},tick:{x:v,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=oi(oi(oi({},Da(this.props,!1)),Da(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=oi(oi({},c),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=oi(oi({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return w.createElement("line",Q0({},c,{className:xn("recharts-cartesian-axis-line",gx(l,"className"))}))}static renderTickItem(t,r,n){var s,i=xn(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))s=w.cloneElement(t,oi(oi({},r),{},{className:i}));else if(typeof t=="function")s=t(oi(oi({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=xn(o,t.className)),s=w.createElement(r4,Q0({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=i4(oi(oi({},this.props),{},{ticks:n}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=Da(this.props,!1),p=Da(o,!1),v=oi(oi({},m),{},{fill:"none"},Da(s,!1)),g=d.map((b,y)=>{var{line:C,tick:N}=this.getTickLineCoord(b),k=oi(oi(oi(oi({textAnchor:u,verticalAnchor:h},m),{},{stroke:"none",fill:i},p),N),{},{index:y,payload:b,visibleTicksCount:d.length,tickFormatter:l});return w.createElement(tf,Q0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},R9(this.props,b,y)),s&&w.createElement("line",Q0({},v,C,{className:xn("recharts-cartesian-axis-tick-line",gx(s,"className"))})),o&&Jm.renderTickItem(o,k,"".concat(typeof l=="function"?l(b.value,y):b.value).concat(c||"")))});return g.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:w.createElement(tf,{className:xn("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),$l.renderCallByParent(this.props))}}o4(Jm,"displayName","CartesianAxis");o4(Jm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var nfe=["x1","y1","x2","y2","key"],afe=["offset"],sfe=["xAxisId","yAxisId"],ife=["xAxisId","yAxisId"];function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){ofe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ofe(e,t,r){return(t=lfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lfe(e){var t=cfe(e,"string");return typeof t=="symbol"?t:t+""}function cfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(null,arguments)}function ww(e,t){if(e==null)return{};var r,n,s=dfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ufe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return w.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function bV(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=ww(t,nfe),d=Da(c,!1),{offset:u}=d,h=ww(d,afe);r=w.createElement("line",Kp({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function hfe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ww(e,sfe),c=s.map((d,u)=>{var h=go(go({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return bV(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function ffe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ww(e,ife),c=s.map((d,u)=>{var h=go(go({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return bV(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function mfe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%t.length;return w.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function pfe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%r.length;return w.createElement("rect",{key:"react-".concat(m),x:h,y:i,width:v,height:l,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var xfe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return $U(i4(go(go(go({},Jm.defaultProps),r),{},{ticks:qU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},vfe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return $U(i4(go(go(go({},Jm.defaultProps),r),{},{ticks:qU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},gfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function yV(e){var t=nA(),r=aA(),n=GU(),s=go(go({},Qv(e,gfe)),{},{x:Tr(e.x)?e.x:n.left,y:Tr(e.y)?e.y:n.top,width:Tr(e.width)?e.width:n.width,height:Tr(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:p}=s,v=Xc(),g=Kr(A=>$F(A,"xAxis",i,v)),b=Kr(A=>$F(A,"yAxis",o,v));if(!Tr(d)||d<=0||!Tr(u)||u<=0||!Tr(l)||l!==+l||!Tr(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||xfe,C=s.horizontalCoordinatesGenerator||vfe,{horizontalPoints:N,verticalPoints:k}=s;if((!N||!N.length)&&typeof C=="function"){var S=m&&m.length,D=C({yAxis:b?go(go({},b),{},{ticks:S?m:b.ticks}):void 0,width:t,height:r,offset:n},S?!0:h);Rb(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}if((!k||!k.length)&&typeof y=="function"){var E=p&&p.length,T=y({xAxis:g?go(go({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:n},E?!0:h);Rb(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(k=T)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(ufe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),w.createElement(mfe,Kp({},s,{horizontalPoints:N})),w.createElement(pfe,Kp({},s,{verticalPoints:k})),w.createElement(hfe,Kp({},s,{offset:n,horizontalPoints:N,xAxis:g,yAxis:b})),w.createElement(ffe,Kp({},s,{offset:n,verticalPoints:k,xAxis:g,yAxis:b})))}yV.displayName="CartesianGrid";var jV=(e,t,r,n)=>Pq(e,"xAxis",t,n),NV=(e,t,r,n)=>Iq(e,"xAxis",t,n),wV=(e,t,r,n)=>Pq(e,"yAxis",r,n),SV=(e,t,r,n)=>Iq(e,"yAxis",r,n),bfe=Gt([Za,jV,wV,NV,SV],(e,t,r,n,s)=>cf(e,"xAxis")?F5(t,n,!1):F5(r,s,!1)),yfe=(e,t,r,n,s)=>{var i,o=Za(e),l=cf(o,"xAxis"),c;if(l?c=nD(e,"yAxis",r,n):c=nD(e,"xAxis",t,n),c!=null){var{dataKey:d,stackId:u}=s;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h?.find(m=>m.key===d)}}},jfe=(e,t,r,n,s)=>s,Nfe=Gt([aq,jfe],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&VU(t.stackId)===r.stackId&&t.data===r.data))return t}),wfe=Gt([Za,jV,wV,NV,SV,yfe,R$,bfe,Nfe],(e,t,r,n,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||s==null||n.length===0||s.length===0||l==null)){var{data:m}=c,p;if(m&&m.length>0?p=m:p=d?.slice(u,h+1),p!=null){var v=void 0;return qfe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:v,bandSize:l})}}}),Sfe=["layout","type","stroke","connectNulls","isRange"],Cfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function CV(e,t){if(e==null)return{};var r,n,s=kfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(n){pS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pS(e,t,r){return(t=_fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _fe(e){var t=Efe(e,"string");return typeof t=="symbol"?t:t+""}function Efe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(null,arguments)}function Sw(e,t){return e&&e!=="none"?e:t}var Dfe=e=>{var{dataKey:t,name:r,stroke:n,fill:s,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:Sw(n,s),value:zU(r,t),payload:e}]};function Afe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:zU(o,t),hide:l,type:e.tooltipType,color:Sw(n,i),unit:c}}}var Tfe=(e,t)=>{var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=xn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=w.createElement(hV,Tm({},t,{className:n}))}return r};function Ife(e,t){return e==null?!1:t?!0:e.length===1}function Pfe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:s,dot:i,dataKey:o}=n;if(!Ife(r,i))return null;var l=B9(i),c=Da(n,!1),d=Da(i,!0),u=r.map((m,p)=>{var v=Xp(Xp(Xp({key:"dot-".concat(p),r:3},c),d),{},{index:p,cx:m.x,cy:m.y,dataKey:o,value:m.value,payload:m.payload,points:r});return Tfe(i,v)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return w.createElement(tf,Tm({className:"recharts-area-dots"},h),u)}function uD(e){var{points:t,baseLine:r,needClip:n,clipPathId:s,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,m=CV(i,Sfe);return w.createElement(w.Fragment,null,t?.length>1&&w.createElement(tf,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},w.createElement(kN,Tm({},Da(m,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&w.createElement(kN,Tm({},Da(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&w.createElement(kN,Tm({},Da(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),w.createElement(Pfe,{points:t,props:i,clipPathId:s}),o&&ox.renderCallByParent(i,t))}function Ofe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].y,o=n[n.length-1].y;if(!zo(i)||!zo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.x||0));return Tr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Tr(c)?w.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function Mfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].x,o=n[n.length-1].x;if(!zo(i)||!zo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.y||0));return Tr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Tr(c)?w.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function Rfe(e){var{alpha:t,layout:r,points:n,baseLine:s,strokeWidth:i}=e;return r==="vertical"?w.createElement(Ofe,{alpha:t,points:n,baseLine:s,strokeWidth:i}):w.createElement(Mfe,{alpha:t,points:n,baseLine:s,strokeWidth:i})}function Ffe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=n,v=jhe(n,"recharts-area-"),[g,b]=w.useState(!0),y=w.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),C=w.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]),N=s.current,k=i.current;return w.createElement(H5,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:C,key:v},S=>{var{t:D}=S;if(N){var E=N.length/o.length,T=D===1?o:o.map((L,P)=>{var O=Math.floor(P*E);if(N[O]){var J=N[O];return Xp(Xp({},L),{},{x:_0(J.x,L.x,D),y:_0(J.y,L.y,D)})}return L}),A;return Tr(l)?A=_0(k,l,D):ri(l)||nc(l)?A=_0(k,0,D):A=l.map((L,P)=>{var O=Math.floor(P*E);if(Array.isArray(k)&&k[O]){var J=k[O];return Xp(Xp({},L),{},{x:_0(J.x,L.x,D),y:_0(J.y,L.y,D)})}return L}),D>0&&(s.current=T,i.current=A),w.createElement(uD,{points:T,baseLine:A,needClip:t,clipPathId:r,props:n,showLabels:!g})}return D>0&&(s.current=o,i.current=l),w.createElement(tf,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(r)},w.createElement(Rfe,{alpha:D,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),w.createElement(tf,{clipPath:"url(#animationClipPath-".concat(r,")")},w.createElement(uD,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function Lfe(e){var{needClip:t,clipPathId:r,props:n}=e,{points:s,baseLine:i,isAnimationActive:o}=n,l=w.useRef(null),c=w.useRef(),d=l.current,u=c.current;return o&&s&&s.length&&(d!==s||u!==i)?w.createElement(Ffe,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:c}):w.createElement(uD,{points:s,baseLine:i,needClip:t,clipPathId:r,props:n,showLabels:!0})}class Bfe extends w.PureComponent{constructor(){super(...arguments),pS(this,"id",Jb("recharts-area-"))}render(){var t,{hide:r,dot:n,points:s,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:m,id:p,baseLine:v}=this.props;if(r)return null;var g=xn("recharts-area",i),b=ri(p)?this.id:p,{r:y=3,strokeWidth:C=2}=(t=Da(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},N=B9(n),k=y*2+C;return w.createElement(w.Fragment,null,w.createElement(tf,{className:g},c&&w.createElement("defs",null,w.createElement(The,{clipPathId:b,xAxisId:d,yAxisId:u}),!N&&w.createElement("clipPath",{id:"clipPath-dots-".concat(b)},w.createElement("rect",{x:l-k/2,y:o-k/2,width:h+k,height:m+k}))),w.createElement(Lfe,{needClip:c,clipPathId:b,props:this.props})),w.createElement(CL,{points:s,mainColor:Sw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&w.createElement(CL,{points:v,mainColor:Sw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kV={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Vy.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Ufe(e){var t,r=Qv(e,kV),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:m,legendType:p,stroke:v,xAxisId:g,yAxisId:b}=r,y=CV(r,Cfe),C=sA(),N=Jq(),{needClip:k}=pV(g,b),S=Xc(),D=w.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:E,isRange:T,baseLine:A}=(t=Kr(W=>wfe(W,g,b,S,D)))!==null&&t!==void 0?t:{},{height:L,width:P,x:O,y:J}=a4();return C!=="horizontal"&&C!=="vertical"||N!=="AreaChart"&&N!=="ComposedChart"?null:w.createElement(Bfe,Tm({},y,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:A,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:L,hide:h,layout:C,isAnimationActive:m,isRange:T,legendType:p,needClip:k,points:E,stroke:v,width:P,left:O,top:J,xAxisId:g,yAxisId:b}))}var $fe=(e,t,r,n,s)=>{var i=r??t;if(Tr(i))return i;var o=e==="horizontal"?s:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function qfe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,v=s&&s.length,g=$fe(i,o,r,l,c),b=i==="horizontal",y=!1,C=d.map((k,S)=>{var D;v?D=s[u+S]:(D=Zl(k,n),Array.isArray(D)?y=!0:D=[g,D]);var E=D[1]==null||v&&!t&&Zl(k,n)==null;return b?{x:NR({axis:l,ticks:h,bandSize:p,entry:k,index:S}),y:E?null:c.scale(D[1]),value:D,payload:k}:{x:E?null:l.scale(D[1]),y:NR({axis:c,ticks:m,bandSize:p,entry:k,index:S}),value:D,payload:k}}),N;return v||y?N=C.map(k=>{var S=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:S!=null&&k.y!=null?c.scale(S):null}:{x:S!=null?l.scale(S):null,y:k.y}}):N=b?c.scale(g):l.scale(g),{points:C,baseLine:N,isRange:y}}class J0 extends w.PureComponent{render(){return w.createElement(Ahe,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},w.createElement(yhe,{legendPayload:Dfe(this.props)}),w.createElement(ghe,{fn:Afe,args:this.props}),w.createElement(Ufe,this.props))}}pS(J0,"displayName","Area");pS(J0,"defaultProps",kV);function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){Vfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vfe(e,t,r){return(t=zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zfe(e){var t=Hfe(e,"string");return typeof t=="symbol"?t:t+""}function Hfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wfe={xAxis:{},yAxis:{},zAxis:{}},_V=Kc({name:"cartesianAxis",initialState:Wfe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=OL(OL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Gfe,removeXAxis:Yfe,addYAxis:Kfe,removeYAxis:Xfe,addZAxis:SBe,removeZAxis:CBe,updateYAxisWidth:Qfe}=_V.actions,Jfe=_V.reducer,Zfe=["children"],eme=["dangerouslySetInnerHTML","ticks"];function EV(e,t,r){return(t=tme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tme(e){var t=rme(e,"string");return typeof t=="symbol"?t:t+""}function rme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(null,arguments)}function DV(e,t){if(e==null)return{};var r,n,s=nme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ame(e){var t=Ji(),r=w.useMemo(()=>{var{children:i}=e,o=DV(e,Zfe);return o},[e]),n=Kr(i=>ff(i,r.id)),s=r===n;return w.useEffect(()=>(t(Gfe(r)),()=>{t(Yfe(r))}),[r,t]),s?e.children:null}var sme=e=>{var{xAxisId:t,className:r}=e,n=Kr(WU),s=Xc(),i="xAxis",o=Kr(p=>rg(p,i,t,s)),l=Kr(p=>Tq(p,i,t,s)),c=Kr(p=>xce(p,t)),d=Kr(p=>jce(p,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,m=DV(e,eme);return w.createElement(Jm,hD({},m,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:xn("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},ime=e=>{var t,r,n,s,i;return w.createElement(ame,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},w.createElement(sme,e))};class l4 extends w.Component{render(){return w.createElement(ime,this.props)}}EV(l4,"displayName","XAxis");EV(l4,"defaultProps",{allowDataOverflow:Fl.allowDataOverflow,allowDecimals:Fl.allowDecimals,allowDuplicatedCategory:Fl.allowDuplicatedCategory,height:Fl.height,hide:!1,mirror:Fl.mirror,orientation:Fl.orientation,padding:Fl.padding,reversed:Fl.reversed,scale:Fl.scale,tickCount:Fl.tickCount,type:Fl.type,xAxisId:0});var ome=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(r?n:0);return Math.round(d)}return 0},lme=["dangerouslySetInnerHTML","ticks"];function AV(e,t,r){return(t=cme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cme(e){var t=dme(e,"string");return typeof t=="symbol"?t:t+""}function dme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fD(){return fD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fD.apply(null,arguments)}function ume(e,t){if(e==null)return{};var r,n,s=hme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fme(e){var t=Ji();return w.useEffect(()=>(t(Kfe(e)),()=>{t(Xfe(e))}),[e,t]),null}var mme=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=w.useRef(null),l=w.useRef(null),c=Kr(WU),d=Xc(),u=Ji(),h="yAxis",m=Kr(N=>rg(N,h,r,d)),p=Kr(N=>wce(N,r)),v=Kr(N=>Nce(N,r)),g=Kr(N=>Tq(N,h,r,d));if(w.useLayoutEffect(()=>{var N;if(!(s!=="auto"||!p||n4(i)||w.isValidElement(i))){var k=o.current,S=k==null||(N=k.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:D,tickMargin:E}=k.props,T=ome({ticks:S,label:l.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(p.width)!==Math.round(T)&&u(Qfe({id:r,width:T}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p?.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,C=ume(e,lme);return w.createElement(Jm,fD({},C,{ref:o,labelRef:l,scale:m,x:v.x,y:v.y,width:p.width,height:p.height,className:xn("recharts-".concat(h," ").concat(h),n),viewBox:c,ticks:g}))},pme=e=>{var t,r,n,s,i;return w.createElement(w.Fragment,null,w.createElement(fme,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),w.createElement(mme,e))},xme={allowDataOverflow:Ll.allowDataOverflow,allowDecimals:Ll.allowDecimals,allowDuplicatedCategory:Ll.allowDuplicatedCategory,hide:!1,mirror:Ll.mirror,orientation:Ll.orientation,padding:Ll.padding,reversed:Ll.reversed,scale:Ll.scale,tickCount:Ll.tickCount,type:Ll.type,width:Ll.width,yAxisId:0};class c4 extends w.Component{render(){return w.createElement(pme,this.props)}}AV(c4,"displayName","YAxis");AV(c4,"defaultProps",xme);var G_={exports:{}},Y_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function vme(){if(ML)return Y_;ML=1;var e=Hv();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Y_.useSyncExternalStoreWithSelector=function(c,d,u,h,m){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(S){if(!y){if(y=!0,C=S,S=h(S),m!==void 0&&v.hasValue){var D=v.value;if(m(D,S))return N=D}return N=S}if(D=N,r(C,S))return D;var E=h(S);return m!==void 0&&m(D,E)?(C=S,D):(C=S,N=E)}var y=!1,C,N,k=u===void 0?null:u;return[function(){return b(d())},k===null?void 0:function(){return b(k())}]},[d,u,h,m]);var g=n(c,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),l(g),g},Y_}var RL;function gme(){return RL||(RL=1,G_.exports=vme()),G_.exports}gme();function bme(e){e()}function yme(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bme(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var FL={notify(){},get:()=>[]};function jme(e,t){let r,n=FL,s=0,i=!1;function o(g){u();const b=n.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){s++,r||(r=e.subscribe(c),n=yme())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=FL)}function m(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return v}var Nme=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wme=Nme(),Sme=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cme=Sme(),kme=()=>wme||Cme?w.useLayoutEffect:w.useEffect,_me=kme(),Eme=Symbol.for("react-redux-context"),Dme=typeof globalThis<"u"?globalThis:{};function Ame(){if(!w.createContext)return{};const e=Dme[Eme]??=new Map;let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Tme=Ame();function Ime(e){const{children:t,context:r,serverState:n,store:s}=e,i=w.useMemo(()=>{const c=jme(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=w.useMemo(()=>s.getState(),[s]);_me(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||Tme;return w.createElement(l.Provider,{value:i},t)}var Pme=Ime,Ome=(e,t)=>t,d4=Gt([Ome,Za,Ple,Ii,Gq,mf,Cde,Zi],Ade),u4=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},TV=Hc("mouseClick"),IV=qy();IV.startListening({actionCreator:TV,effect:(e,t)=>{var r=e.payload,n=d4(t.getState(),u4(r));n?.activeIndex!=null&&t.dispatch(Mce({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var mD=Hc("mouseMove"),PV=qy();PV.startListening({actionCreator:mD,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared),i=d4(n,u4(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(Uq({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Bq()))}});function Mme(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var LL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},OV=Kc({name:"rootProps",initialState:LL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:LL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Rme=OV.reducer,{updateOptions:Fme}=OV.actions,MV=Kc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:kBe}=MV.actions,Lme=MV.reducer,RV=Hc("keyDown"),FV=Hc("focus"),h4=qy();h4.startListening({actionCreator:RV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(YA(s,Fx(r))),l=mf(r);if(i==="Enter"){var c=yw(r,"axis","hover",String(s.index));t.dispatch(sD({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=_ce(r),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,m=o+h*u;if(!(l==null||m>=l.length||m<0)){var p=yw(r,"axis","hover",String(m));t.dispatch(sD({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});h4.startListening({actionCreator:FV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=yw(r,"axis","hover",String(i));t.dispatch(sD({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Dc=Hc("externalEvent"),LV=qy();LV.startListening({actionCreator:Dc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:xde(r),activeDataKey:mde(r),activeIndex:oy(r),activeLabel:Xq(r),activeTooltipIndex:oy(r),isTooltipActive:vde(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Bme=Gt([ng],e=>e.tooltipItemPayloads),Ume=Gt([Bme,Jy,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),BV=Hc("touchMove"),UV=qy();UV.startListening({actionCreator:BV,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared);if(s==="axis"){var i=d4(n,u4({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(Uq({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(Hne),u=(o=c.getAttribute(Wne))!==null&&o!==void 0?o:void 0,h=Ume(t.getState(),d,u);t.dispatch(Oce({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var $me=gU({brush:Phe,cartesianAxis:Jfe,chartData:Gde,graphicalItems:fhe,layout:vne,legend:iae,options:qde,polarAxis:lhe,polarOptions:Lme,referenceElements:Uhe,rootProps:Rme,tooltip:Rce}),qme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return qre({reducer:$me,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([IV.middleware,PV.middleware,h4.middleware,LV.middleware,UV.middleware]),devTools:{serialize:{replacer:Mme},name:"recharts-".concat(r)}})};function Vme(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Xc(),i=w.useRef(null);if(s)return r;i.current==null&&(i.current=qme(t,n));var o=Y3;return w.createElement(Pme,{context:o,store:i.current},r)}function zme(e){var{layout:t,width:r,height:n,margin:s}=e,i=Ji(),o=Xc();return w.useEffect(()=>{o||(i(mne(t)),i(pne({width:r,height:n})),i(fne(s)))},[i,o,t,r,n,s]),null}function Hme(e){var t=Ji();return w.useEffect(()=>{t(Fme(e))},[t,e]),null}var Wme=["children"];function Gme(e,t){if(e==null)return{};var r,n,s=Yme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(null,arguments)}var Kme={width:"100%",height:"100%"},Xme=w.forwardRef((e,t)=>{var r=nA(),n=aA(),s=KU();if(!sw(r)||!sw(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,w.createElement(F3,Cw({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:Kme,ref:t}),i)}),Qme=e=>{var{children:t}=e,r=Kr(X2);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return w.createElement(F3,{width:n,height:s,x:o,y:i},t)},BL=w.forwardRef((e,t)=>{var{children:r}=e,n=Gme(e,Wme),s=Xc();return s?w.createElement(Qme,null,r):w.createElement(Xme,Cw({ref:t},n),r)});function Jme(){var e=Ji(),[t,r]=w.useState(null),n=Kr(zne);return w.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;zo(i)&&i!==n&&e(xne(i))}},[t,e,n]),r}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zme(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){epe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function epe(e,t,r){return(t=tpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tpe(e){var t=rpe(e,"string");return typeof t=="symbol"?t:t+""}function rpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var npe=w.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:v,onTouchStart:g,style:b,width:y}=e,C=Ji(),[N,k]=w.useState(null),[S,D]=w.useState(null);Xde();var E=Jme(),T=w.useCallback(M=>{E(M),typeof t=="function"&&t(M),k(M),D(M)},[E,t,k,D]),A=w.useCallback(M=>{C(TV(M)),C(Dc({handler:i,reactEvent:M}))},[C,i]),L=w.useCallback(M=>{C(mD(M)),C(Dc({handler:d,reactEvent:M}))},[C,d]),P=w.useCallback(M=>{C(Bq()),C(Dc({handler:u,reactEvent:M}))},[C,u]),O=w.useCallback(M=>{C(mD(M)),C(Dc({handler:h,reactEvent:M}))},[C,h]),J=w.useCallback(()=>{C(FV())},[C]),W=w.useCallback(M=>{C(RV(M.key))},[C]),re=w.useCallback(M=>{C(Dc({handler:o,reactEvent:M}))},[C,o]),U=w.useCallback(M=>{C(Dc({handler:l,reactEvent:M}))},[C,l]),Q=w.useCallback(M=>{C(Dc({handler:c,reactEvent:M}))},[C,c]),B=w.useCallback(M=>{C(Dc({handler:m,reactEvent:M}))},[C,m]),te=w.useCallback(M=>{C(Dc({handler:g,reactEvent:M}))},[C,g]),X=w.useCallback(M=>{C(BV(M)),C(Dc({handler:v,reactEvent:M}))},[C,v]),ce=w.useCallback(M=>{C(Dc({handler:p,reactEvent:M}))},[C,p]);return w.createElement(nV.Provider,{value:N},w.createElement(U9.Provider,{value:S},w.createElement("div",{className:xn("recharts-wrapper",n),style:Zme({position:"relative",cursor:"default",width:y,height:s},b),onClick:A,onContextMenu:re,onDoubleClick:U,onFocus:J,onKeyDown:W,onMouseDown:Q,onMouseEnter:L,onMouseLeave:P,onMouseMove:O,onMouseUp:B,onTouchEnd:ce,onTouchMove:X,onTouchStart:te,ref:T},r)))}),ape=["children","className","width","height","style","compact","title","desc"];function spe(e,t){if(e==null)return{};var r,n,s=ipe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ipe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ope=w.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=spe(e,ape),h=Da(u,!1);return l?w.createElement(BL,{otherAttributes:h,title:c,desc:d},r):w.createElement(npe,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(BL,{otherAttributes:h,title:c,desc:d,ref:t},w.createElement(qhe,null,r)))}),lpe=["width","height"];function pD(){return pD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pD.apply(null,arguments)}function cpe(e,t){if(e==null)return{};var r,n,s=dpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var upe={top:5,right:5,bottom:5,left:5},hpe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:upe,reverseStackOrder:!1,syncMethod:"index"},fpe=w.forwardRef(function(t,r){var n,s=Qv(t.categoricalChartProps,hpe),{width:i,height:o}=s,l=cpe(s,lpe);if(!sw(i)||!sw(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:m}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(Vme,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},w.createElement(Ihe,{chartData:m.data}),w.createElement(zme,{width:i,height:o,layout:s.layout,margin:s.margin}),w.createElement(Hme,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),w.createElement(ope,pD({},l,{width:i,height:o,ref:r})))}),mpe=["axis"],ppe=w.forwardRef((e,t)=>w.createElement(fpe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mpe,tooltipPayloadSearcher:Ude,categoricalChartProps:e,ref:t}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vpe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),$L=e=>{const t=vpe(e);return t.charAt(0).toUpperCase()+t.slice(1)},$V=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),gpe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...bpe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$V("lucide",s),...!i&&!gpe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>w.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=(e,t)=>{const r=w.forwardRef(({className:n,...s},i)=>w.createElement(ype,{ref:i,iconNode:t,className:$V(`lucide-${xpe($L(e))}`,`lucide-${e}`,n),...s}));return r.displayName=$L(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Npe=Zy("credit-card",jpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Spe=Zy("dollar-sign",wpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kpe=Zy("file-text",Cpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Epe=Zy("shopping-cart",_pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ape=Zy("trending-up",Dpe),Tpe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[u,h]=w.useState(!0),[m,p]=w.useState(new Date().getFullYear()),[v]=w.useState(localStorage.getItem("selectedCompanyId")||""),[g]=w.useState(localStorage.getItem("financialYear")||""),b=new Date().getFullYear(),y=[b-1,b,b+1];w.useEffect(()=>{(async()=>{h(!0);try{const k={companyId:v,financialYear:g},[S,D,E,T,A]=await Promise.all([Oe.get("/api/purchase-orders",{params:k}),Oe.get("/api/sales-orders",{params:k}),Oe.get("/api/stock/data",{params:k}),Oe.get("/api/invoiceform",{params:k}),Oe.get("/api/billingform",{params:k})]);t(S.data),n(D.data),i(E.data),l(T.data),d(A.data)}catch(k){console.error("Data fetch error:",k)}finally{h(!1)}})()},[v,g]);const C=w.useMemo(()=>{const N=Array.from({length:12},(S,D)=>({month:new Date(2e3,D).toLocaleString("default",{month:"short"}),purchases:0,sales:0,inventory:0,invoices:0,billings:0})),k=(S,D,E,T)=>{S?.forEach(A=>{const L=new Date(A[D]);if(!isNaN(L)&&L.getFullYear()===Number(m)){const P=L.getMonth();N[P][T]+=E?A[E]||0:1}})};return k(e,"date","finalTotal","purchases"),k(r,"date","finalTotal","sales"),k(s,"createdAt",null,"inventory"),k(o,"documentDate","finalTotal","invoices"),k(c,"documentDate","finalTotal","billings"),N},[e,r,s,o,c,m]);return e.reduce((N,k)=>N+(k.finalTotal||0),0),r.reduce((N,k)=>N+(k.finalTotal||0),0),o.reduce((N,k)=>N+(k.finalTotal||0),0),c.reduce((N,k)=>N+(k.finalTotal||0),0),u?a.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"spinner-border text-light mb-3",role:"status",style:{width:"4rem",height:"4rem"},children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"fs-5",children:"Loading your dashboard..."})]})}):a.jsxs("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[a.jsx("style",{children:`
        .card-hover {
          transition: all 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
          border: none;
          border-radius: 15px;
          overflow: hidden;
          position: relative;
        }
        .metric-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .chart-container {
          border-radius: 15px;
          border: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .stat-item {
          padding: 12px;
          margin: 5px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.7);
          transition: all 0.3s ease;
        }
        .stat-item:hover {
          background: rgba(255,255,255,0.9);
          transform: translateX(5px);
        }
        .progress-custom {
          height: 8px;
          border-radius: 10px;
          background: rgba(0,0,0,0.1);
        }
        .progress-bar-custom {
          border-radius: 10px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
      `}),a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"d-grid gap-4 mb-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[{title:"Purchase Orders",value:e.length,icon:Epe,color:"primary",bgColor:"bg-primary"},{title:"Sales Orders",value:r.length,icon:Spe,color:"success",bgColor:"bg-success"},{title:"Vendor Invoices",value:o.length,icon:kpe,color:"info",bgColor:"bg-info"},{title:"Customer Invoices",value:c.length,icon:Npe,color:"danger",bgColor:"bg-danger"}].map((N,k)=>a.jsx("div",{className:"card metric-card card-hover h-100",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("div",{className:`${N.bgColor} bg-opacity-10 p-3 rounded-3 text-center`,children:a.jsx(N.icon,{size:24,className:`text-${N.color}`})})}),a.jsxs("div",{className:"col-8 text-end",children:[a.jsx("div",{className:`h4 fw-bold text-${N.color} mb-1`,children:N.value}),a.jsx("div",{className:"small text-muted",children:N.title})]})]})})},k))}),a.jsx("div",{className:"row g-4 mb-4",children:a.jsx("div",{className:"col-lg-12",children:a.jsxs("div",{className:"card chart-container",children:[a.jsxs("div",{className:"card-header bg-transparent border-0 d-flex justify-content-between align-items-center",children:[a.jsxs("h5",{className:"card-title fw-bold mb-0 d-flex align-items-center",children:[a.jsx(Ape,{size:20,className:"text-primary me-2"}),"Monthly Financial Trends (",m,")"]}),a.jsx("select",{className:"form-select w-auto",value:m,onChange:N=>p(Number(N.target.value)),children:y.map(N=>a.jsx("option",{value:N,children:N},N))})]}),a.jsx("div",{className:"card-body",children:a.jsx(fue,{width:"100%",height:350,children:a.jsxs(ppe,{data:C,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#28a745",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#28a745",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorPurchases",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#007bff",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#007bff",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorInvoices",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6f42c1",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#6f42c1",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorBillings",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#dc3545",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#dc3545",stopOpacity:0})]})]}),a.jsx(yV,{strokeDasharray:"3 3",stroke:"#e9ecef"}),a.jsx(l4,{dataKey:"month",stroke:"#6c757d"}),a.jsx(c4,{tickFormatter:N=>`${(N/1e3).toFixed(0)}k`,stroke:"#6c757d"}),a.jsx(aue,{formatter:(N,k)=>["inventory"].includes(k.toLowerCase())?[`${N}`,k]:[`${N.toLocaleString()}`,k],contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),a.jsx(Q2,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),a.jsx(J0,{type:"monotone",dataKey:"sales",stroke:"#28a745",fillOpacity:1,fill:"url(#colorSales)",strokeWidth:2,name:"Sales Orders"}),a.jsx(J0,{type:"monotone",dataKey:"purchases",stroke:"#007bff",fillOpacity:1,fill:"url(#colorPurchases)",strokeWidth:2,name:"Purchase Orders"}),a.jsx(J0,{type:"monotone",dataKey:"invoices",stroke:"#6f42c1",fillOpacity:1,fill:"url(#colorInvoices)",strokeWidth:2,name:"Invoices"}),a.jsx(J0,{type:"monotone",dataKey:"billings",stroke:"#dc3545",fillOpacity:1,fill:"url(#colorBillings)",strokeWidth:2,name:"Billings"})]})})})]})})})]})]})},Ipe=()=>{const e=Xu(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,u]=w.useState(""),h=async m=>{m.preventDefault(),o(!0);try{const p=await Oe.post("/api/users/login",{identifier:d,password:n});console.log(" Logged in user:",p.data.user);const v=p.data.user;localStorage.setItem("user",JSON.stringify(v)),console.log("User data:",v),alert("Login successful!"),e("/loginscreen")}catch(p){alert("Login failed: "+(p.response?.data?.error||"Unknown error"))}finally{o(!1)}};return a.jsx("div",{className:"container-fluid min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundImage:'url("/assets/img/loginbg.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:a.jsx("div",{className:"row w-100 justify-content-center",children:a.jsxs("div",{className:"col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4",children:[a.jsxs("div",{className:"card shadow-lg border-0 rounded-4",style:{maxHeight:"90vh",height:"auto"},children:[a.jsxs("div",{className:"card-body p-4 overflow-auto",children:[a.jsx("div",{className:"text-center mb-3",children:a.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"60px",height:"60px"},children:a.jsx("i",{className:"ti ti-building text-white",style:{fontSize:"1.8rem"}})})}),a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("h1",{className:"fw-bold text-primary mb-1",style:{fontSize:"1.5rem"},children:"Jyothi Cloud ERP"}),a.jsx("p",{style:{textAlign:"center"},children:"(Endless Possibilities)"}),a.jsx("p",{className:"text-muted mb-0 small",children:"Enter your credentials to access your account"})]}),a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-mail me-2 text-primary"}),"Email or Phone"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-user text-muted"})}),a.jsx("input",{type:"text",id:"identifier",value:d,onChange:m=>u(m.target.value),className:"form-control border-start-0 py-2",placeholder:"Enter your email or phone number",required:!0,disabled:i})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-lock me-2 text-primary"}),"Password"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-key text-muted"})}),a.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:m=>s(m.target.value),className:"form-control border-start-0 border-end-0 py-2",placeholder:"Enter your password",required:!0,disabled:i}),a.jsx("span",{className:"input-group-text bg-light border-start-0 cursor-pointer",onClick:()=>c(!l),style:{cursor:"pointer"},children:a.jsx("i",{className:`ti ${l?"ti-eye text-primary":"ti-eye-off text-muted"}`})})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-semibold",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ti ti-login me-2"}),"Sign In"]})})})]})]}),a.jsx("div",{className:"card-footer bg-light border-0 text-center py-3",children:a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(Vp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsx("div",{className:"bg-white bg-opacity-90 rounded-3 p-2 d-inline-block",children:a.jsxs("div",{className:"d-flex gap-3 justify-content-center",children:[a.jsxs(Vp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-phone me-1"}),"Support"]}),a.jsxs(Vp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-mail me-1"}),"Contact"]}),a.jsxs(Vp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-book me-1"}),"Guide"]})]})})})]})})})},Ppe=({onOpen:e})=>{const[t,r]=w.useState([]),[n,s]=w.useState(""),[i,o]=w.useState(()=>new Date().toISOString().split("T")[0]),[l,c]=w.useState([]),[d,u]=w.useState(""),[h,m]=w.useState(!1),p=Xu(),v=JSON.parse(localStorage.getItem("user"))?.id;console.log("User ID from localStorage:",localStorage.getItem("user")),console.log("Fetching companies for user ID:",v),w.useEffect(()=>{if(!v)return;m(!0),Oe.get(`/api/users/${v}/companies`).then(N=>{r(N.data),N.data.length>0&&s(N.data[0]._id)}).catch(N=>{console.error("Error fetching companies:",N)}).finally(()=>{m(!1)});const b=[],C=new Date().getFullYear();for(let N=2020;N<=C;N++)b.push(`01/04/${N} - 31/03/${N+1}`);c(b.reverse())},[v]);const g=()=>{if(!n||!i||!d)return alert("Please select all fields");localStorage.setItem("selectedCompanyId",n),localStorage.setItem("financialYear",d),console.log("financial",localStorage.getItem("financialYear")),console.log("company",localStorage.getItem("selectedCompanyId")),e?.({companyId:n,financialYear:d}),p("/")};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"row w-100",children:a.jsx("div",{className:"col-12 col-md-6 col-lg-4 mx-auto",children:a.jsxs("div",{className:"card shadow-lg border-0",children:[a.jsx("div",{className:"card-header bg-primary  py-4",children:a.jsx("h3",{className:"mb-0 text-white text-center ",children:"Jyothi Cloud ERP"})}),a.jsx("div",{className:"card-body p-4",children:h?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading companies..."})]}):a.jsxs("form",{children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"ti ti-building me-2 text-primary"}),"Company"]}),a.jsxs("select",{className:"form-select form-select-lg",value:n,onChange:b=>s(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Choose a company..."}),t.map(b=>a.jsx("option",{value:b._id,children:b.name},b._id))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"bi bi-calendar-range me-2 text-primary"}),"Transaction Period"]}),a.jsxs("select",{className:"form-select form-select-lg",value:d,onChange:b=>u(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select financial year..."}),l.map((b,y)=>a.jsx("option",{value:b,children:b},y))]})]}),a.jsx("div",{className:"d-grid gap-2",children:a.jsxs("button",{type:"button",onClick:g,className:"btn btn-primary btn-sm",disabled:!n||!i||!d,children:[a.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"Open Transaction"]})})]})}),a.jsxs("div",{className:"card-footer text-center py-3 bg-light",children:[a.jsxs("small",{className:"text-muted",children:[a.jsx("i",{className:"bi bi-shield-check me-1"}),"Secure transaction portal"]}),a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(Vp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})]})]})})})}),a.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css",rel:"stylesheet"})]})},Ope=()=>{const[e,t]=w.useState({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]}),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!0);w.useEffect(()=>{(async()=>{try{const[p,v]=await Promise.all([Oe.get("/api/companies"),Oe.get("/api/roles")]);n(p.data),i(v.data)}catch(p){console.error("Error fetching data:",p),alert("Error loading companies and roles")}finally{l(!1)}})()},[]);const c=(m,p)=>{t({...e,[m]:p})},d=m=>{const v=e.roles.includes(m)?e.roles.filter(g=>g!==m):[...e.roles,m];t({...e,roles:v})},u=async m=>{m.preventDefault();try{await Oe.post("/api/users/create",e),alert("User created successfully!"),t({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]})}catch(p){console.error("Error creating user:",p),alert("Error creating user. Please try again.")}},h=m=>e.roles.includes(m);return o?a.jsx("div",{className:"container mt-5",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading form data..."})]})})})}):a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-10 col-lg-8",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create New User"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Basic Information"]})})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"username",className:"form-label",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Username ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"username",className:"form-control",placeholder:"Enter username",value:e.username,onChange:m=>c("username",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"email",className:"form-label",children:[a.jsx("i",{className:"fas fa-envelope me-2"}),"Email ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email address",value:e.email,onChange:m=>c("email",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"phone",className:"form-label",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Phone ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"tel",id:"phone",className:"form-control",placeholder:"Enter phone number",value:e.phone,onChange:m=>{const p=m.target.value.replace(/[^0-9]/g,"").slice(0,10);(p.length===0||/^[6-9]/.test(p))&&c("phone",p)},required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"password",className:"form-label",children:[a.jsx("i",{className:"fas fa-lock me-2"}),"Password ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",value:e.password,onChange:m=>c("password",m.target.value),required:!0})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("label",{htmlFor:"address",className:"form-label",children:[a.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Address ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("textarea",{id:"address",className:"form-control",rows:"3",placeholder:"Enter full address",value:e.address,onChange:m=>c("address",m.target.value),required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"companies",className:"form-label",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Select Companies ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("select",{id:"companies",multiple:!0,className:"form-select",style:{minHeight:"120px"},value:e.companies,onChange:m=>c("companies",Array.from(m.target.selectedOptions,p=>p.value)),required:!0,children:r.map(m=>a.jsx("option",{value:m._id,children:m.name},m._id))}),a.jsxs("div",{className:"form-text",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"Hold Ctrl (Cmd on Mac) to select multiple companies"]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-2",children:[a.jsx("i",{className:"fas fa-users-cog me-2"}),"Assign Roles"]})})}),a.jsx("div",{className:"row",children:s.map(m=>a.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:`role-${m._id}`,checked:h(m._id),onChange:()=>d(m._id)}),a.jsxs("label",{className:"form-check-label",htmlFor:`role-${m._id}`,children:[a.jsx("strong",{children:m.roleName}),a.jsx("br",{}),a.jsxs("small",{className:"text-muted",children:["(",m.roleId,")"]})]})]})},m._id))}),a.jsx("div",{className:"d-grid mt-4",children:a.jsxs("button",{type:"submit",className:"btn btn-success btn-lg",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create User"]})})]})})]})})})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var kw={};kw.version="0.18.5";var qV=1252,Mpe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],f4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},m4=function(e){Mpe.indexOf(e)!=-1&&(qV=f4[0]=e)};function Rpe(){m4(1252)}var Ed=function(e){m4(e)};function p4(){Ed(1200),Rpe()}function qL(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Fpe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function VV(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ab=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Fpe(e.slice(2)):t==254&&r==255?VV(e.slice(2)):t==65279?e.slice(1):e},Mj=function(t){return String.fromCharCode(t)},VL=function(t){return String.fromCharCode(t)},cy,Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function dy(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Sm.charAt(i)+Sm.charAt(o)+Sm.charAt(l)+Sm.charAt(c);return t}function ic(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Sm.indexOf(e.charAt(d++)),o=Sm.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Sm.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Sm.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),pf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Lm(e){return En?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function zL(e){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Wl=function(t){return En?pf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function xS(e){if(typeof ArrayBuffer>"u")return Wl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Zm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Lpe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function x4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return x4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ki=En?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:pf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Bpe(e){for(var t=[],r=0,n=e.length+250,s=Lm(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Lm(65535),n=65530)}return t.push(s.slice(0,r)),ki(t)}var Vo=/\u0000/g,Tb=/[\u0001-\u0006]/g;function av(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Dd(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}function v4(e,t){var r=""+e;return r.length>=t?r:js(" ",t-r.length)+r}function _w(e,t){var r=""+e;return r.length>=t?r:r+js(" ",t-r.length)}function Upe(e,t){var r=""+Math.round(e);return r.length>=t?r:js("0",t-r.length)+r}function $pe(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}var HL=Math.pow(2,32);function A0(e,t){if(e>HL||e<-HL)return Upe(e,t);var r=Math.round(e);return $pe(r,t)}function Ew(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var WL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],K_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function qpe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var tn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},GL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Vpe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Dw(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<t&&(h=Math.floor(s),l=h*o+i,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,n*l,u];var m=Math.floor(n*l/u);return[m,n*l-m*u,u]}function Qp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Kpe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var zV=new Date(1899,11,31,0,0,0),zpe=zV.getTime(),Hpe=new Date(1900,2,1,0,0,0);function HV(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Hpe&&(r+=24*60*60*1e3),(r-(zpe+(e.getTimezoneOffset()-zV.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function g4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Wpe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Gpe(e){var t=e<0?12:11,r=g4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ype(e){var t=g4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function uy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Gpe(e):t===10?r=e.toFixed(10).substr(0,12):r=Ype(e),g4(Wpe(r.toUpperCase()))}function Nx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):uy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Gc(14,HV(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Kpe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Xpe(e,t,r,n){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return K_[r.m-1][1];case 5:return K_[r.m-1][0];default:return K_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return WL[r.q][0];default:return WL[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Dd(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Dd(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Dd(c,d):"";return u}function Cm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var WV=/%/g;function Qpe(e,t,r){var n=t.replace(WV,""),s=t.length-n.length;return Hh(e,n,r*Math.pow(10,2*s))+js("%",s)}function Jpe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function GV(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+GV(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var YV=/# (\?+)( ?)\/( ?)(\d+)/;function Zpe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?js(" ",e[1].length+1+e[4].length):v4(o,e[1].length)+e[2]+"/"+e[3]+Dd(l,e[4].length))}function exe(e,t,r){return r+(t===0?"":""+t)+js(" ",e[1].length+2+e[4].length)}var KV=/^#*0*\.([0#]+)/,XV=/\).*[0#]/,QV=/\(###\) ###\\?-####/;function Lo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function YL(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function KL(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function txe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function rxe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ac(e,t,r){if(e.charCodeAt(0)===40&&!t.match(XV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ac("n",n,r):"("+Ac("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Jpe(e,t,r);if(t.indexOf("%")!==-1)return Qpe(e,t,r);if(t.indexOf("E")!==-1)return GV(t,r);if(t.charCodeAt(0)===36)return"$"+Ac(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+A0(c,t.length);if(t.match(/^[#?]+$/))return s=A0(r,0),s==="0"&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(YV))return Zpe(i,c,d);if(t.match(/^#+0+$/))return d+A0(c,t.length-t.indexOf("0"));if(i=t.match(KV))return s=YL(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Lo(i[1])).replace(/\.$/,"."+Lo(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+js("0",Lo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+YL(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(A0(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ac(e,t,-r):Cm(""+(Math.floor(r)+txe(r,i[1].length)))+"."+Dd(KL(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ac(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=av(Ac(e,t.replace(/[\\-]/g,""),r)),o=0,av(av(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(QV))return s=Ac(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Dw(c,Math.pow(10,o)-1,!1),s=""+d,u=Hh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_w(l[2],o),u.length<i[4].length&&(u=Lo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Dw(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?v4(l[1],o)+i[2]+"/"+i[3]+_w(l[2],o):js(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=A0(r,0),t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Lo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=KL(r,i[1].length),r<0?"-"+Ac(e,t,-r):Cm(rxe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(o,i[1].length);switch(t){case"###,##0.00":return Ac(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Cm(A0(c,0));return p!=="0"?d+p:"";case"###,###.00":return Ac(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ac(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function nxe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function axe(e,t,r){var n=t.replace(WV,""),s=t.length-n.length;return Hh(e,n,r*Math.pow(10,2*s))+js("%",s)}function JV(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+JV(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(XV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bu("n",n,r):"("+bu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return nxe(e,t,r);if(t.indexOf("%")!==-1)return axe(e,t,r);if(t.indexOf("E")!==-1)return JV(t,r);if(t.charCodeAt(0)===36)return"$"+bu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Dd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(YV))return exe(i,c,d);if(t.match(/^#+0+$/))return d+Dd(c,t.length-t.indexOf("0"));if(i=t.match(KV))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Lo(i[1])).replace(/\.$/,"."+Lo(i[1])),s=s.replace(/\.(\d*)$/,function(v,g){return"."+g+js("0",Lo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):Cm(""+r)+"."+js("0",i[1].length);if(i=t.match(/^#,#*,#0/))return bu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=av(bu(e,t.replace(/[\\-]/g,""),r)),o=0,av(av(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(QV))return s=bu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Dw(c,Math.pow(10,o)-1,!1),s=""+d,u=Hh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_w(l[2],o),u.length<i[4].length&&(u=Lo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Dw(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?v4(l[1],o)+i[2]+"/"+i[3]+_w(l[2],o):js(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Lo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):Cm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Cm(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return bu(e,t.slice(0,t.lastIndexOf(".")),r)+Lo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Hh(e,t,r){return(r|0)===r?bu(e,t,r):Ac(e,t,r)}function sxe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var ZV=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sg(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Ew(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(ZV))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ixe(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",d,u,h,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Ew(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),v=p==="("||p===")"?p:"t";s[s.length]={t:v,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=Qp(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=Qp(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=Qp(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",o+=5,m="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(ZV)){if(d==null&&(d=Qp(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sg(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,y=0,C;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",b<1&&(b=1);break;case"s":(C=s[o].v.match(/\.0+$/))&&(y=Math.max(y,C[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",k;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Xpe(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(k=o+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[o].v+=s[k].v,s[k]={v:"",t:";"},++k;N+=s[o].v,o=k-1;break;case"G":s[o].t="t",s[o].v=Nx(t,r);break}var S="",D,E;if(N.length>0){N.charCodeAt(0)==40?(D=t<0&&N.charCodeAt(0)===45?-t:t,E=Hh("n",N,D)):(D=t<0&&n>1?-t:t,E=Hh("n",N,D),D<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),k=E.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var A=s.length;if(T===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(k>=s[o].v.length-1?(k-=s[o].v.length,s[o].v=E.substr(k+1,s[o].v.length)):k<0?s[o].v="":(s[o].v=E.substr(0,k+1),k=-1),s[o].t="t",A=o);k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(k=E.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)k>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=E.charAt(k--)+S);s[o].v=S,s[o].t="t",A=o}for(k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v),k=E.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)k<E.length&&(S+=E.charAt(k++));s[o].v=S,s[o].t="t",A=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(D=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Hh(s[o].t,s[o].v,D),s[o].t="t");var L="";for(o=0;o!==s.length;++o)s[o]!=null&&(L+=s[o].v);return L}var XL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function QL(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function oxe(e,t){var r=sxe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(XL),l=r[1].match(XL);return QL(t,o)?[n,r[0]]:QL(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Gc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:tn)[e],n==null&&(n=r.table&&r.table[GL[e]]||tn[GL[e]]),n==null&&(n=Vpe[e]||"General");break}if(Ew(n,0))return Nx(t,r);t instanceof Date&&(t=HV(t,r.date1904));var s=oxe(n,t);if(Ew(s[1]))return Nx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ixe(s[1],t,r,s[0])}function Wh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(tn[r]==null){t<0&&(t=r);continue}if(tn[r]==e){t=r;break}}t<0&&(t=391)}return tn[t]=e,t}function vS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Wh(e[t],t)}function ig(){tn=qpe()}var lxe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ez=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function cxe(e){var t=typeof e=="number"?tn[e]:e;return t=t.replace(ez,"(\\d+)"),new RegExp("^"+t+"$")}function dxe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(ez)||[]).forEach(function(h,m){var p=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:n==-1&&s==-1&&i==-1?u:d+"T"+u}var uxe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,T=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[A]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(E){var T=0,A=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=E[L];for(L=0;L!=256;++L)for(A=E[L],T=256+L;T<4096;T+=256)A=P[T]=A>>>8^E[A&255];var O=[];for(L=1;L!=16;++L)O[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],m=s[7],p=s[8],v=s[9],g=s[10],b=s[11],y=s[12],C=s[13],N=s[14];function k(E,T){for(var A=T^-1,L=0,P=E.length;L<P;)A=A>>>8^r[(A^E.charCodeAt(L++))&255];return~A}function S(E,T){for(var A=T^-1,L=E.length-15,P=0;P<L;)A=N[E[P++]^A&255]^C[E[P++]^A>>8&255]^y[E[P++]^A>>16&255]^b[E[P++]^A>>>24]^g[E[P++]]^v[E[P++]]^p[E[P++]]^m[E[P++]]^h[E[P++]]^u[E[P++]]^d[E[P++]]^c[E[P++]]^l[E[P++]]^o[E[P++]]^i[E[P++]]^r[E[P++]];for(L+=15;P<L;)A=A>>>8^r[(A^E[P++])&255];return~A}function D(E,T){for(var A=T^-1,L=0,P=E.length,O=0,J=0;L<P;)O=E.charCodeAt(L++),O<128?A=A>>>8^r[(A^O)&255]:O<2048?(A=A>>>8^r[(A^(192|O>>6&31))&255],A=A>>>8^r[(A^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,J=E.charCodeAt(L++)&1023,A=A>>>8^r[(A^(240|O>>8&7))&255],A=A>>>8^r[(A^(128|O>>2&63))&255],A=A>>>8^r[(A^(128|J>>6&15|(O&3)<<4))&255],A=A>>>8^r[(A^(128|J&63))&255]):(A=A>>>8^r[(A^(224|O>>12&15))&255],A=A>>>8^r[(A^(128|O>>6&63))&255],A=A>>>8^r[(A^(128|O&63))&255]);return~A}return e.table=r,e.bstr=k,e.buf=S,e.str=D,e}(),zr=function(){var t={};t.version="1.2.1";function r(ge,Ue){for(var Pe=ge.split("/"),Ee=Ue.split("/"),Fe=0,Ve=0,xt=Math.min(Pe.length,Ee.length);Fe<xt;++Fe){if(Ve=Pe[Fe].length-Ee[Fe].length)return Ve;if(Pe[Fe]!=Ee[Fe])return Pe[Fe]<Ee[Fe]?-1:1}return Pe.length-Ee.length}function n(ge){if(ge.charAt(ge.length-1)=="/")return ge.slice(0,-1).indexOf("/")===-1?ge:n(ge.slice(0,-1));var Ue=ge.lastIndexOf("/");return Ue===-1?ge:ge.slice(0,Ue+1)}function s(ge){if(ge.charAt(ge.length-1)=="/")return s(ge.slice(0,-1));var Ue=ge.lastIndexOf("/");return Ue===-1?ge:ge.slice(Ue+1)}function i(ge,Ue){typeof Ue=="string"&&(Ue=new Date(Ue));var Pe=Ue.getHours();Pe=Pe<<6|Ue.getMinutes(),Pe=Pe<<5|Ue.getSeconds()>>>1,ge.write_shift(2,Pe);var Ee=Ue.getFullYear()-1980;Ee=Ee<<4|Ue.getMonth()+1,Ee=Ee<<5|Ue.getDate(),ge.write_shift(2,Ee)}function o(ge){var Ue=ge.read_shift(2)&65535,Pe=ge.read_shift(2)&65535,Ee=new Date,Fe=Pe&31;Pe>>>=5;var Ve=Pe&15;Pe>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(Pe+1980),Ee.setMonth(Ve-1),Ee.setDate(Fe);var xt=Ue&31;Ue>>>=5;var wt=Ue&63;return Ue>>>=6,Ee.setHours(Ue),Ee.setMinutes(wt),Ee.setSeconds(xt<<1),Ee}function l(ge){Gi(ge,0);for(var Ue={},Pe=0;ge.l<=ge.length-4;){var Ee=ge.read_shift(2),Fe=ge.read_shift(2),Ve=ge.l+Fe,xt={};switch(Ee){case 21589:Pe=ge.read_shift(1),Pe&1&&(xt.mtime=ge.read_shift(4)),Fe>5&&(Pe&2&&(xt.atime=ge.read_shift(4)),Pe&4&&(xt.ctime=ge.read_shift(4))),xt.mtime&&(xt.mt=new Date(xt.mtime*1e3));break}ge.l=Ve,Ue[Ee]=xt}return Ue}var c;function d(){return c||(c={})}function u(ge,Ue){if(ge[0]==80&&ge[1]==75)return Ae(ge,Ue);if((ge[0]|32)==109&&(ge[1]|32)==105)return Kt(ge,Ue);if(ge.length<512)throw new Error("CFB file size "+ge.length+" < 512");var Pe=3,Ee=512,Fe=0,Ve=0,xt=0,wt=0,at=0,Nt=[],St=ge.slice(0,512);Gi(St,0);var Xt=h(St);switch(Pe=Xt[0],Pe){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(Xt[1]==0)return Ae(ge,Ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+Pe)}Ee!==512&&(St=ge.slice(0,Ee),Gi(St,28));var ar=ge.slice(0,Ee);m(St,Pe);var pr=St.read_shift(4,"i");if(Pe===3&&pr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+pr);St.l+=4,xt=St.read_shift(4,"i"),St.l+=4,St.chk("00100000","Mini Stream Cutoff Size: "),wt=St.read_shift(4,"i"),Fe=St.read_shift(4,"i"),at=St.read_shift(4,"i"),Ve=St.read_shift(4,"i");for(var sr=-1,qe=0;qe<109&&(sr=St.read_shift(4,"i"),!(sr<0));++qe)Nt[qe]=sr;var or=p(ge,Ee);b(at,Ve,or,Ee,Nt);var lr=C(or,xt,Nt,Ee);lr[xt].name="!Directory",Fe>0&&wt!==J&&(lr[wt].name="!MiniFAT"),lr[Nt[0]].name="!FAT",lr.fat_addrs=Nt,lr.ssz=Ee;var $r={},gn=[],ta=[],zs=[];N(xt,lr,or,gn,Fe,$r,ta,wt),v(ta,zs,gn),gn.shift();var za={FileIndex:ta,FullPaths:zs};return Ue&&Ue.raw&&(za.raw={header:ar,sectors:or}),za}function h(ge){if(ge[ge.l]==80&&ge[ge.l+1]==75)return[0,0];ge.chk(W,"Header Signature: "),ge.l+=16;var Ue=ge.read_shift(2,"u");return[ge.read_shift(2,"u"),Ue]}function m(ge,Ue){var Pe=9;switch(ge.l+=2,Pe=ge.read_shift(2)){case 9:if(Ue!=3)throw new Error("Sector Shift: Expected 9 saw "+Pe);break;case 12:if(Ue!=4)throw new Error("Sector Shift: Expected 12 saw "+Pe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Pe)}ge.chk("0600","Mini Sector Shift: "),ge.chk("000000000000","Reserved: ")}function p(ge,Ue){for(var Pe=Math.ceil(ge.length/Ue)-1,Ee=[],Fe=1;Fe<Pe;++Fe)Ee[Fe-1]=ge.slice(Fe*Ue,(Fe+1)*Ue);return Ee[Pe-1]=ge.slice(Pe*Ue),Ee}function v(ge,Ue,Pe){for(var Ee=0,Fe=0,Ve=0,xt=0,wt=0,at=Pe.length,Nt=[],St=[];Ee<at;++Ee)Nt[Ee]=St[Ee]=Ee,Ue[Ee]=Pe[Ee];for(;wt<St.length;++wt)Ee=St[wt],Fe=ge[Ee].L,Ve=ge[Ee].R,xt=ge[Ee].C,Nt[Ee]===Ee&&(Fe!==-1&&Nt[Fe]!==Fe&&(Nt[Ee]=Nt[Fe]),Ve!==-1&&Nt[Ve]!==Ve&&(Nt[Ee]=Nt[Ve])),xt!==-1&&(Nt[xt]=Ee),Fe!==-1&&Ee!=Nt[Ee]&&(Nt[Fe]=Nt[Ee],St.lastIndexOf(Fe)<wt&&St.push(Fe)),Ve!==-1&&Ee!=Nt[Ee]&&(Nt[Ve]=Nt[Ee],St.lastIndexOf(Ve)<wt&&St.push(Ve));for(Ee=1;Ee<at;++Ee)Nt[Ee]===Ee&&(Ve!==-1&&Nt[Ve]!==Ve?Nt[Ee]=Nt[Ve]:Fe!==-1&&Nt[Fe]!==Fe&&(Nt[Ee]=Nt[Fe]));for(Ee=1;Ee<at;++Ee)if(ge[Ee].type!==0){if(wt=Ee,wt!=Nt[wt])do wt=Nt[wt],Ue[Ee]=Ue[wt]+"/"+Ue[Ee];while(wt!==0&&Nt[wt]!==-1&&wt!=Nt[wt]);Nt[Ee]=-1}for(Ue[0]+="/",Ee=1;Ee<at;++Ee)ge[Ee].type!==2&&(Ue[Ee]+="/")}function g(ge,Ue,Pe){for(var Ee=ge.start,Fe=ge.size,Ve=[],xt=Ee;Pe&&Fe>0&&xt>=0;)Ve.push(Ue.slice(xt*O,xt*O+O)),Fe-=O,xt=Up(Pe,xt*4);return Ve.length===0?Ut(0):ki(Ve).slice(0,ge.size)}function b(ge,Ue,Pe,Ee,Fe){var Ve=J;if(ge===J){if(Ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(ge!==-1){var xt=Pe[ge],wt=(Ee>>>2)-1;if(!xt)return;for(var at=0;at<wt&&(Ve=Up(xt,at*4))!==J;++at)Fe.push(Ve);b(Up(xt,Ee-4),Ue-1,Pe,Ee,Fe)}}function y(ge,Ue,Pe,Ee,Fe){var Ve=[],xt=[];Fe||(Fe=[]);var wt=Ee-1,at=0,Nt=0;for(at=Ue;at>=0;){Fe[at]=!0,Ve[Ve.length]=at,xt.push(ge[at]);var St=Pe[Math.floor(at*4/Ee)];if(Nt=at*4&wt,Ee<4+Nt)throw new Error("FAT boundary crossed: "+at+" 4 "+Ee);if(!ge[St])break;at=Up(ge[St],Nt)}return{nodes:Ve,data:c6([xt])}}function C(ge,Ue,Pe,Ee){var Fe=ge.length,Ve=[],xt=[],wt=[],at=[],Nt=Ee-1,St=0,Xt=0,ar=0,pr=0;for(St=0;St<Fe;++St)if(wt=[],ar=St+Ue,ar>=Fe&&(ar-=Fe),!xt[ar]){at=[];var sr=[];for(Xt=ar;Xt>=0;){sr[Xt]=!0,xt[Xt]=!0,wt[wt.length]=Xt,at.push(ge[Xt]);var qe=Pe[Math.floor(Xt*4/Ee)];if(pr=Xt*4&Nt,Ee<4+pr)throw new Error("FAT boundary crossed: "+Xt+" 4 "+Ee);if(!ge[qe]||(Xt=Up(ge[qe],pr),sr[Xt]))break}Ve[ar]={nodes:wt,data:c6([at])}}return Ve}function N(ge,Ue,Pe,Ee,Fe,Ve,xt,wt){for(var at=0,Nt=Ee.length?2:0,St=Ue[ge].data,Xt=0,ar=0,pr;Xt<St.length;Xt+=128){var sr=St.slice(Xt,Xt+128);Gi(sr,64),ar=sr.read_shift(2),pr=C4(sr,0,ar-Nt),Ee.push(pr);var qe={name:pr,type:sr.read_shift(1),color:sr.read_shift(1),L:sr.read_shift(4,"i"),R:sr.read_shift(4,"i"),C:sr.read_shift(4,"i"),clsid:sr.read_shift(16),state:sr.read_shift(4,"i"),start:0,size:0},or=sr.read_shift(2)+sr.read_shift(2)+sr.read_shift(2)+sr.read_shift(2);or!==0&&(qe.ct=k(sr,sr.l-8));var lr=sr.read_shift(2)+sr.read_shift(2)+sr.read_shift(2)+sr.read_shift(2);lr!==0&&(qe.mt=k(sr,sr.l-8)),qe.start=sr.read_shift(4,"i"),qe.size=sr.read_shift(4,"i"),qe.size<0&&qe.start<0&&(qe.size=qe.type=0,qe.start=J,qe.name=""),qe.type===5?(at=qe.start,Fe>0&&at!==J&&(Ue[at].name="!StreamData")):qe.size>=4096?(qe.storage="fat",Ue[qe.start]===void 0&&(Ue[qe.start]=y(Pe,qe.start,Ue.fat_addrs,Ue.ssz)),Ue[qe.start].name=qe.name,qe.content=Ue[qe.start].data.slice(0,qe.size)):(qe.storage="minifat",qe.size<0?qe.size=0:at!==J&&qe.start!==J&&Ue[at]&&(qe.content=g(qe,Ue[at].data,(Ue[wt]||{}).data))),qe.content&&Gi(qe.content,0),Ve[pr]=qe,xt.push(qe)}}function k(ge,Ue){return new Date((Vl(ge,Ue+4)/1e7*Math.pow(2,32)+Vl(ge,Ue)/1e7-11644473600)*1e3)}function S(ge,Ue){return d(),u(c.readFileSync(ge),Ue)}function D(ge,Ue){var Pe=Ue&&Ue.type;switch(Pe||En&&Buffer.isBuffer(ge)&&(Pe="buffer"),Pe||"base64"){case"file":return S(ge,Ue);case"base64":return u(Wl(ic(ge)),Ue);case"binary":return u(Wl(ge),Ue)}return u(ge,Ue)}function E(ge,Ue){var Pe=Ue||{},Ee=Pe.root||"Root Entry";if(ge.FullPaths||(ge.FullPaths=[]),ge.FileIndex||(ge.FileIndex=[]),ge.FullPaths.length!==ge.FileIndex.length)throw new Error("inconsistent CFB structure");ge.FullPaths.length===0&&(ge.FullPaths[0]=Ee+"/",ge.FileIndex[0]={name:Ee,type:5}),Pe.CLSID&&(ge.FileIndex[0].clsid=Pe.CLSID),T(ge)}function T(ge){var Ue="Sh33tJ5";if(!zr.find(ge,"/"+Ue)){var Pe=Ut(4);Pe[0]=55,Pe[1]=Pe[3]=50,Pe[2]=54,ge.FileIndex.push({name:Ue,type:2,content:Pe,size:4,L:69,R:69,C:69}),ge.FullPaths.push(ge.FullPaths[0]+Ue),A(ge)}}function A(ge,Ue){E(ge);for(var Pe=!1,Ee=!1,Fe=ge.FullPaths.length-1;Fe>=0;--Fe){var Ve=ge.FileIndex[Fe];switch(Ve.type){case 0:Ee?Pe=!0:(ge.FileIndex.pop(),ge.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(Ve.R*Ve.L*Ve.C)&&(Pe=!0),Ve.R>-1&&Ve.L>-1&&Ve.R==Ve.L&&(Pe=!0);break;default:Pe=!0;break}}if(!(!Pe&&!Ue)){var xt=new Date(1987,1,19),wt=0,at=Object.create?Object.create(null):{},Nt=[];for(Fe=0;Fe<ge.FullPaths.length;++Fe)at[ge.FullPaths[Fe]]=!0,ge.FileIndex[Fe].type!==0&&Nt.push([ge.FullPaths[Fe],ge.FileIndex[Fe]]);for(Fe=0;Fe<Nt.length;++Fe){var St=n(Nt[Fe][0]);Ee=at[St],Ee||(Nt.push([St,{name:s(St).replace("/",""),type:1,clsid:U,ct:xt,mt:xt,content:null}]),at[St]=!0)}for(Nt.sort(function(pr,sr){return r(pr[0],sr[0])}),ge.FullPaths=[],ge.FileIndex=[],Fe=0;Fe<Nt.length;++Fe)ge.FullPaths[Fe]=Nt[Fe][0],ge.FileIndex[Fe]=Nt[Fe][1];for(Fe=0;Fe<Nt.length;++Fe){var Xt=ge.FileIndex[Fe],ar=ge.FullPaths[Fe];if(Xt.name=s(ar).replace("/",""),Xt.L=Xt.R=Xt.C=-(Xt.color=1),Xt.size=Xt.content?Xt.content.length:0,Xt.start=0,Xt.clsid=Xt.clsid||U,Fe===0)Xt.C=Nt.length>1?1:-1,Xt.size=0,Xt.type=5;else if(ar.slice(-1)=="/"){for(wt=Fe+1;wt<Nt.length&&n(ge.FullPaths[wt])!=ar;++wt);for(Xt.C=wt>=Nt.length?-1:wt,wt=Fe+1;wt<Nt.length&&n(ge.FullPaths[wt])!=n(ar);++wt);Xt.R=wt>=Nt.length?-1:wt,Xt.type=1}else n(ge.FullPaths[Fe+1]||"")==n(ar)&&(Xt.R=Fe+1),Xt.type=2}}}function L(ge,Ue){var Pe=Ue||{};if(Pe.fileType=="mad")return Rt(ge,Pe);switch(A(ge),Pe.fileType){case"zip":return Ge(ge,Pe)}var Ee=function(pr){for(var sr=0,qe=0,or=0;or<pr.FileIndex.length;++or){var lr=pr.FileIndex[or];if(lr.content){var $r=lr.content.length;$r>0&&($r<4096?sr+=$r+63>>6:qe+=$r+511>>9)}}for(var gn=pr.FullPaths.length+3>>2,ta=sr+7>>3,zs=sr+127>>7,za=ta+qe+gn+zs,fs=za+127>>7,ks=fs<=109?0:Math.ceil((fs-109)/127);za+fs+ks+127>>7>fs;)ks=++fs<=109?0:Math.ceil((fs-109)/127);var gt=[1,ks,fs,zs,gn,qe,sr,0];return pr.FileIndex[0].size=sr<<6,gt[7]=(pr.FileIndex[0].start=gt[0]+gt[1]+gt[2]+gt[3]+gt[4]+gt[5])+(gt[6]+7>>3),gt}(ge),Fe=Ut(Ee[7]<<9),Ve=0,xt=0;{for(Ve=0;Ve<8;++Ve)Fe.write_shift(1,re[Ve]);for(Ve=0;Ve<8;++Ve)Fe.write_shift(2,0);for(Fe.write_shift(2,62),Fe.write_shift(2,3),Fe.write_shift(2,65534),Fe.write_shift(2,9),Fe.write_shift(2,6),Ve=0;Ve<3;++Ve)Fe.write_shift(2,0);for(Fe.write_shift(4,0),Fe.write_shift(4,Ee[2]),Fe.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),Fe.write_shift(4,0),Fe.write_shift(4,4096),Fe.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:J),Fe.write_shift(4,Ee[3]),Fe.write_shift(-4,Ee[1]?Ee[0]-1:J),Fe.write_shift(4,Ee[1]),Ve=0;Ve<109;++Ve)Fe.write_shift(-4,Ve<Ee[2]?Ee[1]+Ve:-1)}if(Ee[1])for(xt=0;xt<Ee[1];++xt){for(;Ve<236+xt*127;++Ve)Fe.write_shift(-4,Ve<Ee[2]?Ee[1]+Ve:-1);Fe.write_shift(-4,xt===Ee[1]-1?J:xt+1)}var wt=function(pr){for(xt+=pr;Ve<xt-1;++Ve)Fe.write_shift(-4,Ve+1);pr&&(++Ve,Fe.write_shift(-4,J))};for(xt=Ve=0,xt+=Ee[1];Ve<xt;++Ve)Fe.write_shift(-4,Q.DIFSECT);for(xt+=Ee[2];Ve<xt;++Ve)Fe.write_shift(-4,Q.FATSECT);wt(Ee[3]),wt(Ee[4]);for(var at=0,Nt=0,St=ge.FileIndex[0];at<ge.FileIndex.length;++at)St=ge.FileIndex[at],St.content&&(Nt=St.content.length,!(Nt<4096)&&(St.start=xt,wt(Nt+511>>9)));for(wt(Ee[6]+7>>3);Fe.l&511;)Fe.write_shift(-4,Q.ENDOFCHAIN);for(xt=Ve=0,at=0;at<ge.FileIndex.length;++at)St=ge.FileIndex[at],St.content&&(Nt=St.content.length,!(!Nt||Nt>=4096)&&(St.start=xt,wt(Nt+63>>6)));for(;Fe.l&511;)Fe.write_shift(-4,Q.ENDOFCHAIN);for(Ve=0;Ve<Ee[4]<<2;++Ve){var Xt=ge.FullPaths[Ve];if(!Xt||Xt.length===0){for(at=0;at<17;++at)Fe.write_shift(4,0);for(at=0;at<3;++at)Fe.write_shift(4,-1);for(at=0;at<12;++at)Fe.write_shift(4,0);continue}St=ge.FileIndex[Ve],Ve===0&&(St.start=St.size?St.start-1:J);var ar=Ve===0&&Pe.root||St.name;if(Nt=2*(ar.length+1),Fe.write_shift(64,ar,"utf16le"),Fe.write_shift(2,Nt),Fe.write_shift(1,St.type),Fe.write_shift(1,St.color),Fe.write_shift(-4,St.L),Fe.write_shift(-4,St.R),Fe.write_shift(-4,St.C),St.clsid)Fe.write_shift(16,St.clsid,"hex");else for(at=0;at<4;++at)Fe.write_shift(4,0);Fe.write_shift(4,St.state||0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,St.start),Fe.write_shift(4,St.size),Fe.write_shift(4,0)}for(Ve=1;Ve<ge.FileIndex.length;++Ve)if(St=ge.FileIndex[Ve],St.size>=4096)if(Fe.l=St.start+1<<9,En&&Buffer.isBuffer(St.content))St.content.copy(Fe,Fe.l,0,St.size),Fe.l+=St.size+511&-512;else{for(at=0;at<St.size;++at)Fe.write_shift(1,St.content[at]);for(;at&511;++at)Fe.write_shift(1,0)}for(Ve=1;Ve<ge.FileIndex.length;++Ve)if(St=ge.FileIndex[Ve],St.size>0&&St.size<4096)if(En&&Buffer.isBuffer(St.content))St.content.copy(Fe,Fe.l,0,St.size),Fe.l+=St.size+63&-64;else{for(at=0;at<St.size;++at)Fe.write_shift(1,St.content[at]);for(;at&63;++at)Fe.write_shift(1,0)}if(En)Fe.l=Fe.length;else for(;Fe.l<Fe.length;)Fe.write_shift(1,0);return Fe}function P(ge,Ue){var Pe=ge.FullPaths.map(function(at){return at.toUpperCase()}),Ee=Pe.map(function(at){var Nt=at.split("/");return Nt[Nt.length-(at.slice(-1)=="/"?2:1)]}),Fe=!1;Ue.charCodeAt(0)===47?(Fe=!0,Ue=Pe[0].slice(0,-1)+Ue):Fe=Ue.indexOf("/")!==-1;var Ve=Ue.toUpperCase(),xt=Fe===!0?Pe.indexOf(Ve):Ee.indexOf(Ve);if(xt!==-1)return ge.FileIndex[xt];var wt=!Ve.match(Tb);for(Ve=Ve.replace(Vo,""),wt&&(Ve=Ve.replace(Tb,"!")),xt=0;xt<Pe.length;++xt)if((wt?Pe[xt].replace(Tb,"!"):Pe[xt]).replace(Vo,"")==Ve||(wt?Ee[xt].replace(Tb,"!"):Ee[xt]).replace(Vo,"")==Ve)return ge.FileIndex[xt];return null}var O=64,J=-2,W="d0cf11e0a1b11ae1",re=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function B(ge,Ue,Pe){d();var Ee=L(ge,Pe);c.writeFileSync(Ue,Ee)}function te(ge){for(var Ue=new Array(ge.length),Pe=0;Pe<ge.length;++Pe)Ue[Pe]=String.fromCharCode(ge[Pe]);return Ue.join("")}function X(ge,Ue){var Pe=L(ge,Ue);switch(Ue&&Ue.type||"buffer"){case"file":return d(),c.writeFileSync(Ue.filename,Pe),Pe;case"binary":return typeof Pe=="string"?Pe:te(Pe);case"base64":return dy(typeof Pe=="string"?Pe:te(Pe));case"buffer":if(En)return Buffer.isBuffer(Pe)?Pe:pf(Pe);case"array":return typeof Pe=="string"?Wl(Pe):Pe}return Pe}var ce;function M(ge){try{var Ue=ge.InflateRaw,Pe=new Ue;if(Pe._processChunk(new Uint8Array([3,0]),Pe._finishFlushFlag),Pe.bytesRead)ce=ge;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function q(ge,Ue){if(!ce)return He(ge,Ue);var Pe=ce.InflateRaw,Ee=new Pe,Fe=Ee._processChunk(ge.slice(ge.l),Ee._finishFlushFlag);return ge.l+=Ee.bytesRead,Fe}function z(ge){return ce?ce.deflateRawSync(ge):xe(ge)}var K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ae(ge){var Ue=(ge<<1|ge<<11)&139536|(ge<<5|ge<<15)&558144;return(Ue>>16|Ue>>8|Ue)&255}for(var ie=typeof Uint8Array<"u",G=ie?new Uint8Array(256):[],de=0;de<256;++de)G[de]=ae(de);function Y(ge,Ue){var Pe=G[ge&255];return Ue<=8?Pe>>>8-Ue:(Pe=Pe<<8|G[ge>>8&255],Ue<=16?Pe>>>16-Ue:(Pe=Pe<<8|G[ge>>16&255],Pe>>>24-Ue))}function oe(ge,Ue){var Pe=Ue&7,Ee=Ue>>>3;return(ge[Ee]|(Pe<=6?0:ge[Ee+1]<<8))>>>Pe&3}function Se(ge,Ue){var Pe=Ue&7,Ee=Ue>>>3;return(ge[Ee]|(Pe<=5?0:ge[Ee+1]<<8))>>>Pe&7}function ue(ge,Ue){var Pe=Ue&7,Ee=Ue>>>3;return(ge[Ee]|(Pe<=4?0:ge[Ee+1]<<8))>>>Pe&15}function se(ge,Ue){var Pe=Ue&7,Ee=Ue>>>3;return(ge[Ee]|(Pe<=3?0:ge[Ee+1]<<8))>>>Pe&31}function ye(ge,Ue){var Pe=Ue&7,Ee=Ue>>>3;return(ge[Ee]|(Pe<=1?0:ge[Ee+1]<<8))>>>Pe&127}function Ne(ge,Ue,Pe){var Ee=Ue&7,Fe=Ue>>>3,Ve=(1<<Pe)-1,xt=ge[Fe]>>>Ee;return Pe<8-Ee||(xt|=ge[Fe+1]<<8-Ee,Pe<16-Ee)||(xt|=ge[Fe+2]<<16-Ee,Pe<24-Ee)||(xt|=ge[Fe+3]<<24-Ee),xt&Ve}function Le(ge,Ue,Pe){var Ee=Ue&7,Fe=Ue>>>3;return Ee<=5?ge[Fe]|=(Pe&7)<<Ee:(ge[Fe]|=Pe<<Ee&255,ge[Fe+1]=(Pe&7)>>8-Ee),Ue+3}function Je(ge,Ue,Pe){var Ee=Ue&7,Fe=Ue>>>3;return Pe=(Pe&1)<<Ee,ge[Fe]|=Pe,Ue+1}function lt(ge,Ue,Pe){var Ee=Ue&7,Fe=Ue>>>3;return Pe<<=Ee,ge[Fe]|=Pe&255,Pe>>>=8,ge[Fe+1]=Pe,Ue+8}function vt(ge,Ue,Pe){var Ee=Ue&7,Fe=Ue>>>3;return Pe<<=Ee,ge[Fe]|=Pe&255,Pe>>>=8,ge[Fe+1]=Pe&255,ge[Fe+2]=Pe>>>8,Ue+16}function Re(ge,Ue){var Pe=ge.length,Ee=2*Pe>Ue?2*Pe:Ue+5,Fe=0;if(Pe>=Ue)return ge;if(En){var Ve=zL(Ee);if(ge.copy)ge.copy(Ve);else for(;Fe<ge.length;++Fe)Ve[Fe]=ge[Fe];return Ve}else if(ie){var xt=new Uint8Array(Ee);if(xt.set)xt.set(ge);else for(;Fe<Pe;++Fe)xt[Fe]=ge[Fe];return xt}return ge.length=Ee,ge}function ht(ge){for(var Ue=new Array(ge),Pe=0;Pe<ge;++Pe)Ue[Pe]=0;return Ue}function At(ge,Ue,Pe){var Ee=1,Fe=0,Ve=0,xt=0,wt=0,at=ge.length,Nt=ie?new Uint16Array(32):ht(32);for(Ve=0;Ve<32;++Ve)Nt[Ve]=0;for(Ve=at;Ve<Pe;++Ve)ge[Ve]=0;at=ge.length;var St=ie?new Uint16Array(at):ht(at);for(Ve=0;Ve<at;++Ve)Nt[Fe=ge[Ve]]++,Ee<Fe&&(Ee=Fe),St[Ve]=0;for(Nt[0]=0,Ve=1;Ve<=Ee;++Ve)Nt[Ve+16]=wt=wt+Nt[Ve-1]<<1;for(Ve=0;Ve<at;++Ve)wt=ge[Ve],wt!=0&&(St[Ve]=Nt[wt+16]++);var Xt=0;for(Ve=0;Ve<at;++Ve)if(Xt=ge[Ve],Xt!=0)for(wt=Y(St[Ve],Ee)>>Ee-Xt,xt=(1<<Ee+4-Xt)-1;xt>=0;--xt)Ue[wt|xt<<Xt]=Xt&15|Ve<<4;return Ee}var Tt=ie?new Uint16Array(512):ht(512),Ht=ie?new Uint16Array(32):ht(32);if(!ie){for(var pe=0;pe<512;++pe)Tt[pe]=0;for(pe=0;pe<32;++pe)Ht[pe]=0}(function(){for(var ge=[],Ue=0;Ue<32;Ue++)ge.push(5);At(ge,Ht,32);var Pe=[];for(Ue=0;Ue<=143;Ue++)Pe.push(8);for(;Ue<=255;Ue++)Pe.push(9);for(;Ue<=279;Ue++)Pe.push(7);for(;Ue<=287;Ue++)Pe.push(8);At(Pe,Tt,288)})();var he=function(){for(var Ue=ie?new Uint8Array(32768):[],Pe=0,Ee=0;Pe<ne.length-1;++Pe)for(;Ee<ne[Pe+1];++Ee)Ue[Ee]=Pe;for(;Ee<32768;++Ee)Ue[Ee]=29;var Fe=ie?new Uint8Array(259):[];for(Pe=0,Ee=0;Pe<ee.length-1;++Pe)for(;Ee<ee[Pe+1];++Ee)Fe[Ee]=Pe;function Ve(wt,at){for(var Nt=0;Nt<wt.length;){var St=Math.min(65535,wt.length-Nt),Xt=Nt+St==wt.length;for(at.write_shift(1,+Xt),at.write_shift(2,St),at.write_shift(2,~St&65535);St-- >0;)at[at.l++]=wt[Nt++]}return at.l}function xt(wt,at){for(var Nt=0,St=0,Xt=ie?new Uint16Array(32768):[];St<wt.length;){var ar=Math.min(65535,wt.length-St);if(ar<10){for(Nt=Le(at,Nt,+(St+ar==wt.length)),Nt&7&&(Nt+=8-(Nt&7)),at.l=Nt/8|0,at.write_shift(2,ar),at.write_shift(2,~ar&65535);ar-- >0;)at[at.l++]=wt[St++];Nt=at.l*8;continue}Nt=Le(at,Nt,+(St+ar==wt.length)+2);for(var pr=0;ar-- >0;){var sr=wt[St];pr=(pr<<5^sr)&32767;var qe=-1,or=0;if((qe=Xt[pr])&&(qe|=St&-32768,qe>St&&(qe-=32768),qe<St))for(;wt[qe+or]==wt[St+or]&&or<250;)++or;if(or>2){sr=Fe[or],sr<=22?Nt=lt(at,Nt,G[sr+1]>>1)-1:(lt(at,Nt,3),Nt+=5,lt(at,Nt,G[sr-23]>>5),Nt+=3);var lr=sr<8?0:sr-4>>2;lr>0&&(vt(at,Nt,or-ee[sr]),Nt+=lr),sr=Ue[St-qe],Nt=lt(at,Nt,G[sr]>>3),Nt-=3;var $r=sr<4?0:sr-2>>1;$r>0&&(vt(at,Nt,St-qe-ne[sr]),Nt+=$r);for(var gn=0;gn<or;++gn)Xt[pr]=St&32767,pr=(pr<<5^wt[St])&32767,++St;ar-=or-1}else sr<=143?sr=sr+48:Nt=Je(at,Nt,1),Nt=lt(at,Nt,G[sr]),Xt[pr]=St&32767,++St}Nt=lt(at,Nt,0)-1}return at.l=(Nt+7)/8|0,at.l}return function(at,Nt){return at.length<8?Ve(at,Nt):xt(at,Nt)}}();function xe(ge){var Ue=Ut(50+Math.floor(ge.length*1.1)),Pe=he(ge,Ue);return Ue.slice(0,Pe)}var me=ie?new Uint16Array(32768):ht(32768),De=ie?new Uint16Array(32768):ht(32768),Ye=ie?new Uint16Array(128):ht(128),jt=1,Qe=1;function Xe(ge,Ue){var Pe=se(ge,Ue)+257;Ue+=5;var Ee=se(ge,Ue)+1;Ue+=5;var Fe=ue(ge,Ue)+4;Ue+=4;for(var Ve=0,xt=ie?new Uint8Array(19):ht(19),wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],at=1,Nt=ie?new Uint8Array(8):ht(8),St=ie?new Uint8Array(8):ht(8),Xt=xt.length,ar=0;ar<Fe;++ar)xt[K[ar]]=Ve=Se(ge,Ue),at<Ve&&(at=Ve),Nt[Ve]++,Ue+=3;var pr=0;for(Nt[0]=0,ar=1;ar<=at;++ar)St[ar]=pr=pr+Nt[ar-1]<<1;for(ar=0;ar<Xt;++ar)(pr=xt[ar])!=0&&(wt[ar]=St[pr]++);var sr=0;for(ar=0;ar<Xt;++ar)if(sr=xt[ar],sr!=0){pr=G[wt[ar]]>>8-sr;for(var qe=(1<<7-sr)-1;qe>=0;--qe)Ye[pr|qe<<sr]=sr&7|ar<<3}var or=[];for(at=1;or.length<Pe+Ee;)switch(pr=Ye[ye(ge,Ue)],Ue+=pr&7,pr>>>=3){case 16:for(Ve=3+oe(ge,Ue),Ue+=2,pr=or[or.length-1];Ve-- >0;)or.push(pr);break;case 17:for(Ve=3+Se(ge,Ue),Ue+=3;Ve-- >0;)or.push(0);break;case 18:for(Ve=11+ye(ge,Ue),Ue+=7;Ve-- >0;)or.push(0);break;default:or.push(pr),at<pr&&(at=pr);break}var lr=or.slice(0,Pe),$r=or.slice(Pe);for(ar=Pe;ar<286;++ar)lr[ar]=0;for(ar=Ee;ar<30;++ar)$r[ar]=0;return jt=At(lr,me,286),Qe=At($r,De,30),Ue}function Be(ge,Ue){if(ge[0]==3&&!(ge[1]&3))return[Lm(Ue),2];for(var Pe=0,Ee=0,Fe=zL(Ue||1<<18),Ve=0,xt=Fe.length>>>0,wt=0,at=0;(Ee&1)==0;){if(Ee=Se(ge,Pe),Pe+=3,Ee>>>1)Ee>>1==1?(wt=9,at=5):(Pe=Xe(ge,Pe),wt=jt,at=Qe);else{Pe&7&&(Pe+=8-(Pe&7));var Nt=ge[Pe>>>3]|ge[(Pe>>>3)+1]<<8;if(Pe+=32,Nt>0)for(!Ue&&xt<Ve+Nt&&(Fe=Re(Fe,Ve+Nt),xt=Fe.length);Nt-- >0;)Fe[Ve++]=ge[Pe>>>3],Pe+=8;continue}for(;;){!Ue&&xt<Ve+32767&&(Fe=Re(Fe,Ve+32767),xt=Fe.length);var St=Ne(ge,Pe,wt),Xt=Ee>>>1==1?Tt[St]:me[St];if(Pe+=Xt&15,Xt>>>=4,(Xt>>>8&255)===0)Fe[Ve++]=Xt;else{if(Xt==256)break;Xt-=257;var ar=Xt<8?0:Xt-4>>2;ar>5&&(ar=0);var pr=Ve+ee[Xt];ar>0&&(pr+=Ne(ge,Pe,ar),Pe+=ar),St=Ne(ge,Pe,at),Xt=Ee>>>1==1?Ht[St]:De[St],Pe+=Xt&15,Xt>>>=4;var sr=Xt<4?0:Xt-2>>1,qe=ne[Xt];for(sr>0&&(qe+=Ne(ge,Pe,sr),Pe+=sr),!Ue&&xt<pr&&(Fe=Re(Fe,pr+100),xt=Fe.length);Ve<pr;)Fe[Ve]=Fe[Ve-qe],++Ve}}}return Ue?[Fe,Pe+7>>>3]:[Fe.slice(0,Ve),Pe+7>>>3]}function He(ge,Ue){var Pe=ge.slice(ge.l||0),Ee=Be(Pe,Ue);return ge.l+=Ee[1],Ee[0]}function ft(ge,Ue){if(ge)typeof console<"u"&&console.error(Ue);else throw new Error(Ue)}function Ae(ge,Ue){var Pe=ge;Gi(Pe,0);var Ee=[],Fe=[],Ve={FileIndex:Ee,FullPaths:Fe};E(Ve,{root:Ue.root});for(var xt=Pe.length-4;(Pe[xt]!=80||Pe[xt+1]!=75||Pe[xt+2]!=5||Pe[xt+3]!=6)&&xt>=0;)--xt;Pe.l=xt+4,Pe.l+=4;var wt=Pe.read_shift(2);Pe.l+=6;var at=Pe.read_shift(4);for(Pe.l=at,xt=0;xt<wt;++xt){Pe.l+=20;var Nt=Pe.read_shift(4),St=Pe.read_shift(4),Xt=Pe.read_shift(2),ar=Pe.read_shift(2),pr=Pe.read_shift(2);Pe.l+=8;var sr=Pe.read_shift(4),qe=l(Pe.slice(Pe.l+Xt,Pe.l+Xt+ar));Pe.l+=Xt+ar+pr;var or=Pe.l;Pe.l=sr+4,Ke(Pe,Nt,St,Ve,qe),Pe.l=or}return Ve}function Ke(ge,Ue,Pe,Ee,Fe){ge.l+=2;var Ve=ge.read_shift(2),xt=ge.read_shift(2),wt=o(ge);if(Ve&8257)throw new Error("Unsupported ZIP encryption");for(var at=ge.read_shift(4),Nt=ge.read_shift(4),St=ge.read_shift(4),Xt=ge.read_shift(2),ar=ge.read_shift(2),pr="",sr=0;sr<Xt;++sr)pr+=String.fromCharCode(ge[ge.l++]);if(ar){var qe=l(ge.slice(ge.l,ge.l+ar));(qe[21589]||{}).mt&&(wt=qe[21589].mt),((Fe||{})[21589]||{}).mt&&(wt=Fe[21589].mt)}ge.l+=ar;var or=ge.slice(ge.l,ge.l+Nt);switch(xt){case 8:or=q(ge,St);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+xt)}var lr=!1;Ve&8&&(at=ge.read_shift(4),at==134695760&&(at=ge.read_shift(4),lr=!0),Nt=ge.read_shift(4),St=ge.read_shift(4)),Nt!=Ue&&ft(lr,"Bad compressed size: "+Ue+" != "+Nt),St!=Pe&&ft(lr,"Bad uncompressed size: "+Pe+" != "+St),mr(Ee,pr,or,{unsafe:!0,mt:wt})}function Ge(ge,Ue){var Pe=Ue||{},Ee=[],Fe=[],Ve=Ut(1),xt=Pe.compression?8:0,wt=0,at=0,Nt=0,St=0,Xt=0,ar=ge.FullPaths[0],pr=ar,sr=ge.FileIndex[0],qe=[],or=0;for(at=1;at<ge.FullPaths.length;++at)if(pr=ge.FullPaths[at].slice(ar.length),sr=ge.FileIndex[at],!(!sr.size||!sr.content||pr=="Sh33tJ5")){var lr=St,$r=Ut(pr.length);for(Nt=0;Nt<pr.length;++Nt)$r.write_shift(1,pr.charCodeAt(Nt)&127);$r=$r.slice(0,$r.l),qe[Xt]=uxe.buf(sr.content,0);var gn=sr.content;xt==8&&(gn=z(gn)),Ve=Ut(30),Ve.write_shift(4,67324752),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,xt),sr.mt?i(Ve,sr.mt):Ve.write_shift(4,0),Ve.write_shift(-4,qe[Xt]),Ve.write_shift(4,gn.length),Ve.write_shift(4,sr.content.length),Ve.write_shift(2,$r.length),Ve.write_shift(2,0),St+=Ve.length,Ee.push(Ve),St+=$r.length,Ee.push($r),St+=gn.length,Ee.push(gn),Ve=Ut(46),Ve.write_shift(4,33639248),Ve.write_shift(2,0),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,xt),Ve.write_shift(4,0),Ve.write_shift(-4,qe[Xt]),Ve.write_shift(4,gn.length),Ve.write_shift(4,sr.content.length),Ve.write_shift(2,$r.length),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(4,0),Ve.write_shift(4,lr),or+=Ve.l,Fe.push(Ve),or+=$r.length,Fe.push($r),++Xt}return Ve=Ut(22),Ve.write_shift(4,101010256),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,Xt),Ve.write_shift(2,Xt),Ve.write_shift(4,or),Ve.write_shift(4,St),Ve.write_shift(2,0),ki([ki(Ee),ki(Fe),Ve])}var ct={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Mt(ge,Ue){if(ge.ctype)return ge.ctype;var Pe=ge.name||"",Ee=Pe.match(/\.([^\.]+)$/);return Ee&&ct[Ee[1]]||Ue&&(Ee=(Pe=Ue).match(/[\.\\]([^\.\\])+$/),Ee&&ct[Ee[1]])?ct[Ee[1]]:"application/octet-stream"}function Ie(ge){for(var Ue=dy(ge),Pe=[],Ee=0;Ee<Ue.length;Ee+=76)Pe.push(Ue.slice(Ee,Ee+76));return Pe.join(`\r
`)+`\r
`}function ke(ge){var Ue=ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Nt){var St=Nt.charCodeAt(0).toString(16).toUpperCase();return"="+(St.length==1?"0"+St:St)});Ue=Ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ue.charAt(0)==`
`&&(Ue="=0D"+Ue.slice(1)),Ue=Ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Pe=[],Ee=Ue.split(`\r
`),Fe=0;Fe<Ee.length;++Fe){var Ve=Ee[Fe];if(Ve.length==0){Pe.push("");continue}for(var xt=0;xt<Ve.length;){var wt=76,at=Ve.slice(xt,xt+wt);at.charAt(wt-1)=="="?wt--:at.charAt(wt-2)=="="?wt-=2:at.charAt(wt-3)=="="&&(wt-=3),at=Ve.slice(xt,xt+wt),xt+=wt,xt<Ve.length&&(at+="="),Pe.push(at)}}return Pe.join(`\r
`)}function it(ge){for(var Ue=[],Pe=0;Pe<ge.length;++Pe){for(var Ee=ge[Pe];Pe<=ge.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+ge[++Pe];Ue.push(Ee)}for(var Fe=0;Fe<Ue.length;++Fe)Ue[Fe]=Ue[Fe].replace(/[=][0-9A-Fa-f]{2}/g,function(Ve){return String.fromCharCode(parseInt(Ve.slice(1),16))});return Wl(Ue.join(`\r
`))}function bt(ge,Ue,Pe){for(var Ee="",Fe="",Ve="",xt,wt=0;wt<10;++wt){var at=Ue[wt];if(!at||at.match(/^\s*$/))break;var Nt=at.match(/^(.*?):\s*([^\s].*)$/);if(Nt)switch(Nt[1].toLowerCase()){case"content-location":Ee=Nt[2].trim();break;case"content-type":Ve=Nt[2].trim();break;case"content-transfer-encoding":Fe=Nt[2].trim();break}}switch(++wt,Fe.toLowerCase()){case"base64":xt=Wl(ic(Ue.slice(wt).join("")));break;case"quoted-printable":xt=it(Ue.slice(wt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Fe)}var St=mr(ge,Ee.slice(Pe.length),xt,{unsafe:!0});Ve&&(St.ctype=Ve)}function Kt(ge,Ue){if(te(ge.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Pe=Ue&&Ue.root||"",Ee=(En&&Buffer.isBuffer(ge)?ge.toString("binary"):te(ge)).split(`\r
`),Fe=0,Ve="";for(Fe=0;Fe<Ee.length;++Fe)if(Ve=Ee[Fe],!!/^Content-Location:/i.test(Ve)&&(Ve=Ve.slice(Ve.indexOf("file")),Pe||(Pe=Ve.slice(0,Ve.lastIndexOf("/")+1)),Ve.slice(0,Pe.length)!=Pe))for(;Pe.length>0&&(Pe=Pe.slice(0,Pe.length-1),Pe=Pe.slice(0,Pe.lastIndexOf("/")+1),Ve.slice(0,Pe.length)!=Pe););var xt=(Ee[1]||"").match(/boundary="(.*?)"/);if(!xt)throw new Error("MAD cannot find boundary");var wt="--"+(xt[1]||""),at=[],Nt=[],St={FileIndex:at,FullPaths:Nt};E(St);var Xt,ar=0;for(Fe=0;Fe<Ee.length;++Fe){var pr=Ee[Fe];pr!==wt&&pr!==wt+"--"||(ar++&&bt(St,Ee.slice(Xt,Fe),Pe),Xt=Fe)}return St}function Rt(ge,Ue){var Pe=Ue||{},Ee=Pe.boundary||"SheetJS";Ee="------="+Ee;for(var Fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],Ve=ge.FullPaths[0],xt=Ve,wt=ge.FileIndex[0],at=1;at<ge.FullPaths.length;++at)if(xt=ge.FullPaths[at].slice(Ve.length),wt=ge.FileIndex[at],!(!wt.size||!wt.content||xt=="Sh33tJ5")){xt=xt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(or){return"_x"+or.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(or){return"_u"+or.charCodeAt(0).toString(16)+"_"});for(var Nt=wt.content,St=En&&Buffer.isBuffer(Nt)?Nt.toString("binary"):te(Nt),Xt=0,ar=Math.min(1024,St.length),pr=0,sr=0;sr<=ar;++sr)(pr=St.charCodeAt(sr))>=32&&pr<128&&++Xt;var qe=Xt>=ar*4/5;Fe.push(Ee),Fe.push("Content-Location: "+(Pe.root||"file:///C:/SheetJS/")+xt),Fe.push("Content-Transfer-Encoding: "+(qe?"quoted-printable":"base64")),Fe.push("Content-Type: "+Mt(wt,xt)),Fe.push(""),Fe.push(qe?ke(St):Ie(St))}return Fe.push(Ee+`--\r
`),Fe.join(`\r
`)}function tr(ge){var Ue={};return E(Ue,ge),Ue}function mr(ge,Ue,Pe,Ee){var Fe=Ee&&Ee.unsafe;Fe||E(ge);var Ve=!Fe&&zr.find(ge,Ue);if(!Ve){var xt=ge.FullPaths[0];Ue.slice(0,xt.length)==xt?xt=Ue:(xt.slice(-1)!="/"&&(xt+="/"),xt=(xt+Ue).replace("//","/")),Ve={name:s(Ue),type:2},ge.FileIndex.push(Ve),ge.FullPaths.push(xt),Fe||zr.utils.cfb_gc(ge)}return Ve.content=Pe,Ve.size=Pe?Pe.length:0,Ee&&(Ee.CLSID&&(Ve.clsid=Ee.CLSID),Ee.mt&&(Ve.mt=Ee.mt),Ee.ct&&(Ve.ct=Ee.ct)),Ve}function jr(ge,Ue){E(ge);var Pe=zr.find(ge,Ue);if(Pe){for(var Ee=0;Ee<ge.FileIndex.length;++Ee)if(ge.FileIndex[Ee]==Pe)return ge.FileIndex.splice(Ee,1),ge.FullPaths.splice(Ee,1),!0}return!1}function fn(ge,Ue,Pe){E(ge);var Ee=zr.find(ge,Ue);if(Ee){for(var Fe=0;Fe<ge.FileIndex.length;++Fe)if(ge.FileIndex[Fe]==Ee)return ge.FileIndex[Fe].name=s(Pe),ge.FullPaths[Fe]=Pe,!0}return!1}function hr(ge){A(ge,!0)}return t.find=P,t.read=D,t.parse=u,t.write=X,t.writeFile=B,t.utils={cfb_new:tr,cfb_add:mr,cfb_del:jr,cfb_mov:fn,cfb_gc:hr,ReadShift:Lb,CheckField:Nz,prep_blob:Gi,bconcat:ki,use_zlib:M,_deflateRaw:xe,_inflateRaw:He,consts:Q},t}();function hxe(e){return typeof e=="string"?xS(e):Array.isArray(e)?Lpe(e):e}function e1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=xS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Pu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([hxe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Zm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function fxe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ss(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function JL(e,t){for(var r=[],n=Ss(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function gS(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function bS(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function mxe(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Aw=new Date(1899,11,30,0,0,0);function hi(e,t){var r=e.getTime(),n=Aw.getTime()+(e.getTimezoneOffset()-Aw.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var tz=new Date,pxe=Aw.getTime()+(tz.getTimezoneOffset()-Aw.getTimezoneOffset())*6e4,ZL=tz.getTimezoneOffset();function yS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+pxe),t.getTimezoneOffset()!==ZL&&t.setTime(t.getTime()+(t.getTimezoneOffset()-ZL)*6e4),t}function xxe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var e6=new Date("2017-02-19T19:06:09.000Z"),rz=isNaN(e6.getFullYear())?new Date("2/19/17"):e6,vxe=rz.getFullYear()==2017;function qa(e,t){var r=new Date(e);if(vxe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(rz.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function wx(e,t){if(En&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Pu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Pu(VV(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Pu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Pu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function js(e,t){for(var r="";r.length<t;)r+=e;return r}function Td(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var gxe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Av(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&gxe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var bxe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function nz(e){return e?e.content&&e.type?wx(e.content,!0):e.data?Ab(e.data):e.asNodeBuffer&&En?Ab(e.asNodeBuffer().toString("binary")):e.asBinary?Ab(e.asBinary()):e._data&&e._data.getContent?Ab(wx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function az(e){if(!e)return null;if(e.data)return qL(e.data);if(e.asNodeBuffer&&En)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?qL(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yxe(e){return e&&e.name.slice(-4)===".bin"?az(e):nz(e)}function Pc(e,t){for(var r=e.FullPaths||Ss(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function b4(e,t){var r=Pc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Js(e,t,r){if(!r)return yxe(b4(e,t));if(!t)return null;try{return Js(e,t)}catch{return null}}function Gl(e,t,r){if(!r)return nz(b4(e,t));if(!t)return null;try{return Gl(e,t)}catch{return null}}function jxe(e,t,r){return az(b4(e,t))}function t6(e){for(var t=e.FullPaths||Ss(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Sn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return En?n=pf(r):n=Bpe(r),zr.utils.cfb_add(e,t,n)}zr.utils.cfb_add(e,t,r)}else e.file(t,r)}function y4(){return zr.utils.cfb_new()}function sz(e,t){switch(t.type){case"base64":return zr.read(e,{type:"base64"});case"binary":return zr.read(e,{type:"binary"});case"buffer":case"array":return zr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ib(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Vs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Nxe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,r6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,wxe=/<[^>]*>/g,To=Vs.match(r6)?r6:wxe,Sxe=/<\w*:/,Cxe=/<(\/?)\w+:/;function on(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(Nxe),l=0,c="",d=0,u="",h="",m=1;if(o)for(d=0;d!=o.length;++d){for(h=o[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(m=(s=h.charCodeAt(i+1))==34||s==39?1:0,c=h.slice(i+1+m,h.length-m),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=c,n[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(n[p]&&u.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Qu(e){return e.replace(Cxe,"<$1")}var iz={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},j4=gS(iz),Gn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return iz[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),N4=/[&<>'"]/g,kxe=/[\u0000-\u0008\u000b-\u001f]/g;function ba(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(kxe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function n6(e){return ba(e).replace(/ /g,"_x0020_")}var oz=/[\u0000-\u001f]/g;function w4(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(/\n/g,"<br/>").replace(oz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function _xe(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(oz,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var a6=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Exe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function X_(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function s6(e){var t=Lm(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function i6(e){return pf(e,"binary").toString("utf8")}var Rj="foo bar baz",Ca=En&&(i6(Rj)==X_(Rj)&&i6||s6(Rj)==X_(Rj)&&s6)||X_,Pu=En?function(e){return pf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},hy=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),lz=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),Dxe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Axe=/<\/?(?:vt:)?variant>/g,Txe=/<(?:vt:)([^>]*)>([\s\S]*)</;function o6(e,t){var r=on(e),n=e.match(Dxe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Axe,"").match(Txe);o&&s.push({v:Ca(o[2]),t:o[1]})}),s}var cz=/(^\s|\s$|\n)/;function Xi(e,t){return"<"+e+(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function fy(e){return Ss(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function xr(e,t,r){return"<"+e+(r!=null?fy(r):"")+(t!=null?(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function xD(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Ixe(e,t){switch(typeof e){case"string":var r=xr("vt:lpwstr",ba(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return xr((e|0)==e?"vt:i4":"vt:r8",ba(String(e)));case"boolean":return xr("vt:bool",e?"true":"false")}if(e instanceof Date)return xr("vt:filetime",xD(e));throw new Error("Unable to serialize "+e)}function S4(e){if(En&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ca(Zm(x4(e)));throw new Error("Bad input format: expected Buffer or string")}var my=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Lx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ql={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pxe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Oxe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var l6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},c6=En?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:pf(t)})):l6(e)}:l6,d6=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode($h(e,s)));return n.join("").replace(Vo,"")},C4=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Vo,""):d6(e,t,r)}:d6,u6=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},dz=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):u6(e,t,r)}:u6,h6=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(q0(e,s)));return n.join("")},t1=En?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):h6(t,r,n)}:h6,uz=function(e,t){var r=Vl(e,t);return r>0?t1(e,t+4,t+4+r-1):""},hz=uz,fz=function(e,t){var r=Vl(e,t);return r>0?t1(e,t+4,t+4+r-1):""},mz=fz,pz=function(e,t){var r=2*Vl(e,t);return r>0?t1(e,t+4,t+4+r-1):""},xz=pz,vz=function(t,r){var n=Vl(t,r);return n>0?C4(t,r+4,r+4+n):""},gz=vz,bz=function(e,t){var r=Vl(e,t);return r>0?t1(e,t+4,t+4+r):""},yz=bz,jz=function(e,t){return Pxe(e,t)},Tw=jz,k4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};En&&(hz=function(t,r){if(!Buffer.isBuffer(t))return uz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},mz=function(t,r){if(!Buffer.isBuffer(t))return fz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xz=function(t,r){if(!Buffer.isBuffer(t))return pz(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},gz=function(t,r){if(!Buffer.isBuffer(t))return vz(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},yz=function(t,r){if(!Buffer.isBuffer(t))return bz(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Tw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):jz(t,r)},k4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var q0=function(e,t){return e[t]},$h=function(e,t){return e[t+1]*256+e[t]},Mxe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Vl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Up=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Rxe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Lb(e,t){var r="",n,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,En&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode($h(this,d)),d+=2;e*=2;break;case"utf8":r=t1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=C4(this,this.l,this.l+e);break;case"wstr":return Lb.call(this,e,"dbcs");case"lpstr-ansi":r=hz(this,this.l),e=4+Vl(this,this.l);break;case"lpstr-cp":r=mz(this,this.l),e=4+Vl(this,this.l);break;case"lpwstr":r=xz(this,this.l),e=4+2*Vl(this,this.l);break;case"lpp4":e=4+Vl(this,this.l),r=gz(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Vl(this,this.l),r=yz(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=q0(this,this.l+e++))!==0;)i.push(Mj(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=$h(this,this.l+e))!==0;)i.push(Mj(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=q0(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj($h(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=q0(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj(q0(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=q0(this,this.l),this.l++,n;case 2:return n=(t==="i"?Mxe:$h)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Up:Rxe)(this,this.l),this.l+=4,n):(s=Vl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Tw(this,this.l):s=Tw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=dz(this,this.l,e);break}}return this.l+=e,r}var Fxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Lxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Bxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Uxe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Bxe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Fxe(this,t,this.l);break;case 8:if(n=8,r==="f"){Oxe(this,t,this.l);break}case 16:break;case-4:n=4,Lxe(this,t,this.l);break}return this.l+=n,this}function Nz(e,t){var r=dz(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Gi(e,t){e.l=t,e.read_shift=Lb,e.chk=Nz,e.write_shift=Uxe}function Do(e,t){e.l+=t}function Ut(e){var t=Lm(e);return Gi(t,0),t}function xf(e,t,r){if(e){var n,s,i;Gi(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=yy[l]||yy[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function hl(){var e=[],t=En?256:2048,r=function(d){var u=Ut(d);return Gi(u,0),u},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),ki(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function nr(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=yy[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&k4(r)&&e.push(r)}}function Bb(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function f6(e,t,r){var n=Va(e);return n.s=Bb(n.s,t.s,r),n.e=Bb(n.e,t.s,r),n}function Ub(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=an(e);return!e.cRel&&e.cRel!=null&&(r=Vxe(r)),!e.rRel&&e.rRel!=null&&(r=$xe(r)),r}function Q_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+cs(e.s.c)+":"+(e.e.cRel?"":"$")+cs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+$s(e.s.r)+":"+(e.e.rRel?"":"$")+$s(e.e.r):Ub(e.s,t.biff)+":"+Ub(e.e,t.biff)}function _4(e){return parseInt(qxe(e),10)-1}function $s(e){return""+(e+1)}function $xe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function qxe(e){return e.replace(/\$(\d+)$/,"$1")}function E4(e){for(var t=zxe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function cs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Vxe(e){return e.replace(/^([A-Z])/,"$$$1")}function zxe(e){return e.replace(/^\$([A-Z])/,"$1")}function Hxe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function an(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ml(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function yn(e,t){return typeof t>"u"||typeof t=="number"?yn(e.s,e.e):(typeof e!="string"&&(e=an(e)),typeof t!="string"&&(t=an(t)),e==t?e:e+":"+t)}function Yn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function m6(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Gc(e.z,r?hi(t):t)}catch{}try{return e.w=Gc((e.XF||{}).numFmtId||(r?14:0),r?hi(t):t)}catch{return""+t}}function of(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?vf[e.v]||e.v:t==null?m6(e,e.v):m6(e,t))}function ep(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function wz(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Yn(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[h].length;++m)if(!(typeof t[h][m]>"u")){var p={v:t[h][m]},v=o+h,g=l+m;if(d.s.r>v&&(d.s.r=v),d.s.c>g&&(d.s.c=g),d.e.r<v&&(d.e.r=v),d.e.c<g&&(d.e.c=g),t[h][m]&&typeof t[h][m]=="object"&&!Array.isArray(t[h][m])&&!(t[h][m]instanceof Date))p=t[h][m];else if(Array.isArray(p.v)&&(p.f=t[h][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||tn[14],n.cellDates?(p.t="d",p.w=Gc(p.z,hi(p.v))):(p.t="n",p.v=hi(p.v),p.w=Gc(p.z,p.v))):p.t="s";if(s)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var b=an({c:g,r:v});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return d.s.c<1e7&&(i["!ref"]=yn(d)),i}function og(e,t){return wz(null,e,t)}function Wxe(e){return e.read_shift(4,"i")}function Id(e,t){return t||(t=Ut(4)),t.write_shift(4,e),t}function Eo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function _i(e,t){var r=!1;return t==null&&(r=!0,t=Ut(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Gxe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Yxe(e,t){return t||(t=Ut(4)),t.write_shift(2,0),t.write_shift(2,0),t}function D4(e,t){var r=e.l,n=e.read_shift(1),s=Eo(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Gxe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Kxe(e,t){var r=!1;return t==null&&(r=!0,t=Ut(15+4*e.t.length)),t.write_shift(1,0),_i(e.t,t),r?t.slice(0,t.l):t}var Xxe=D4;function Qxe(e,t){var r=!1;return t==null&&(r=!0,t=Ut(23+4*e.t.length)),t.write_shift(1,1),_i(e.t,t),t.write_shift(4,1),Yxe({},t),r?t.slice(0,t.l):t}function Jc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Bx(e,t){return t==null&&(t=Ut(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ux(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $x(e,t){return t==null&&(t=Ut(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Jxe=Eo,Sz=_i;function A4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Iw(e,t){var r=!1;return t==null&&(r=!0,t=Ut(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Zxe=Eo,vD=A4,T4=Iw;function I4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?Tw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Up(t,0)>>2;return r?s/100:s}function Cz(e,t){t==null&&(t=Ut(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function kz(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function e0e(e,t){return t||(t=Ut(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var qx=kz,lg=e0e;function No(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Sx(e,t){return(t||Ut(8)).write_shift(8,e,"f")}function t0e(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=lx[s];d&&(t.rgb=xy(d));break;case 2:t.rgb=xy([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Pw(e,t){if(t||(t=Ut(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function r0e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function n0e(e,t){t||(t=Ut(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function _z(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function a0e(e){return _z(e,1)}function s0e(e){return _z(e,2)}var P4=2,il=3,Fj=11,p6=12,Ow=19,Lj=64,i0e=65,o0e=71,l0e=4108,c0e=4126,Si=80,Ez=81,d0e=[Si,Ez],gD={1:{n:"CodePage",t:P4},2:{n:"Category",t:Si},3:{n:"PresentationFormat",t:Si},4:{n:"ByteCount",t:il},5:{n:"LineCount",t:il},6:{n:"ParagraphCount",t:il},7:{n:"SlideCount",t:il},8:{n:"NoteCount",t:il},9:{n:"HiddenCount",t:il},10:{n:"MultimediaClipCount",t:il},11:{n:"ScaleCrop",t:Fj},12:{n:"HeadingPairs",t:l0e},13:{n:"TitlesOfParts",t:c0e},14:{n:"Manager",t:Si},15:{n:"Company",t:Si},16:{n:"LinksUpToDate",t:Fj},17:{n:"CharacterCount",t:il},19:{n:"SharedDoc",t:Fj},22:{n:"HyperlinksChanged",t:Fj},23:{n:"AppVersion",t:il,p:"version"},24:{n:"DigSig",t:i0e},26:{n:"ContentType",t:Si},27:{n:"ContentStatus",t:Si},28:{n:"Language",t:Si},29:{n:"Version",t:Si},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},bD={1:{n:"CodePage",t:P4},2:{n:"Title",t:Si},3:{n:"Subject",t:Si},4:{n:"Author",t:Si},5:{n:"Keywords",t:Si},6:{n:"Comments",t:Si},7:{n:"Template",t:Si},8:{n:"LastAuthor",t:Si},9:{n:"RevNumber",t:Si},10:{n:"EditTime",t:Lj},11:{n:"LastPrinted",t:Lj},12:{n:"CreatedDate",t:Lj},13:{n:"ModifiedDate",t:Lj},14:{n:"PageCount",t:il},15:{n:"WordCount",t:il},16:{n:"CharCount",t:il},17:{n:"Thumbnail",t:o0e},18:{n:"Application",t:Si},19:{n:"DocSecurity",t:il},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},x6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},u0e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function h0e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var f0e=h0e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lx=Va(f0e),vf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},yD={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Bj={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function O4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function m0e(e){var t=O4();if(!e||!e.match)return t;var r={};if((e.match(To)||[]).forEach(function(n){var s=on(n);switch(s[0].replace(Sxe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[yD[s.ContentType]]!==void 0&&t[yD[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ci.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Az(e,t){var r=mxe(yD),n=[],s;n[n.length]=Vs,n[n.length]=xr("Types",null,{xmlns:ci.CT,"xmlns:xsd":ci.xsd,"xmlns:xsi":ci.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return xr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=xr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Bj[c][t.bookType]||Bj[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=xr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Bj[c][t.bookType]||Bj[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=xr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Tn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function py(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $b(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(To)||[]).forEach(function(s){var i=on(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Ib(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function sv(e){var t=[Vs,xr("Relationships",null,{xmlns:ci.RELS})];return Ss(e["!id"]).forEach(function(r){t[t.length]=xr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function va(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Tn.HLINK,Tn.XPATH,Tn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var p0e="application/vnd.oasis.opendocument.spreadsheet";function x0e(e,t){for(var r=S4(e),n,s;n=my.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=on(n[0],!1),s.path=="/"&&s.type!==p0e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function v0e(e){var t=[Vs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function v6(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function g0e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function b0e(e){var t=[Vs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(v6(e[r][0],e[r][1])),t.push(g0e("",e[r][0]));return t.push(v6("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Tz(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+kw.version+"</meta:generator></office:meta></office:document-meta>"}var zc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],y0e=function(){for(var e=new Array(zc.length),t=0;t<zc.length;++t){var r=zc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Iz(e){var t={};e=Ca(e);for(var r=0;r<zc.length;++r){var n=zc[r],s=e.match(y0e[r]);s!=null&&s.length>0&&(t[n[1]]=Gn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=qa(t[n[1]]))}return t}function J_(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=ba(t),n[n.length]=r?xr(e,t,r):Xi(e,t))}function Pz(e,t){var r=t||{},n=[Vs,xr("cp:coreProperties",null,{"xmlns:cp":ci.CORE_PROPS,"xmlns:dc":ci.dc,"xmlns:dcterms":ci.dcterms,"xmlns:dcmitype":ci.dcmitype,"xmlns:xsi":ci.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&J_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:xD(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&J_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:xD(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=zc.length;++i){var o=zc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&J_(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Oz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Mz(e,t,r,n){var s=[];if(typeof e=="string")s=o6(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?o6(t,n).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function j0e(e,t,r){var n={};return t||(t={}),e=Ca(e),cx.forEach(function(s){var i=(e.match(hy(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Gn(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Mz(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Rz(e){var t=[],r=xr;return e||(e={}),e.Application="SheetJS",t[t.length]=Vs,t[t.length]=xr("Properties",null,{xmlns:ci.EXT_PROPS,"xmlns:vt":ci.vt}),cx.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ba(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ba(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var N0e=/<[^>]+>[^<]*/g;function w0e(e,t){var r={},n="",s=e.match(N0e);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=on(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Gn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Gn(u);break;case"bool":r[n]=Ua(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=qa(u);break;case"cy":case"error":r[n]=Gn(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Fz(e){var t=[Vs,xr("Properties",null,{xmlns:ci.CUST_PROPS,"xmlns:vt":ci.vt})];if(!e)return t.join("");var r=1;return Ss(e).forEach(function(s){++r,t[t.length]=xr("property",Ixe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ba(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var jD={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Z_;function S0e(e,t,r){Z_||(Z_=gS(jD)),t=Z_[t]||t,e[t]=r}function C0e(e,t){var r=[];return Ss(jD).map(function(n){for(var s=0;s<zc.length;++s)if(zc[s][1]==n)return zc[s];for(s=0;s<cx.length;++s)if(cx[s][1]==n)return cx[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Xi(jD[n[1]]||n[1],s))}}),xr("DocumentProperties",r.join(""),{xmlns:ql.o})}function k0e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Ss(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<zc.length;++o)if(i==zc[o][1])return;for(o=0;o<cx.length;++o)if(i==cx[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(xr(n6(i),l,{"dt:dt":c}))}}),t&&Ss(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(xr(n6(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+ql.o+'">'+s.join("")+"</"+n+">"}function M4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function _0e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Ut(8);return o.write_shift(4,n),o.write_shift(4,s),o}function Lz(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function Bz(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Uz(e,t,r){return t===31?Bz(e):Lz(e,t,r)}function ND(e,t,r){return Uz(e,t,r===!1?0:4)}function E0e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Uz(e,t,0)}function D0e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Vo,""),e.l-s&2&&(e.l+=2)}return r}function A0e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Vo,"");return r}function T0e(e){var t=e.l,r=Mw(e,Ez);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Mw(e,il);return[r,n]}function I0e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(T0e(e));return r}function g6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Vo,"").replace(Tb,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function $z(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function P0e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Mw(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==p6&&n!==t&&d0e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===p6?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return Lz(e,n,4).replace(Vo,"");case 31:return Bz(e);case 64:return M4(e);case 65:return $z(e);case 71:return P0e(e);case 80:return ND(e,n,!i.raw).replace(Vo,"");case 81:return E0e(e,n).replace(Vo,"");case 4108:return I0e(e);case 4126:case 4127:return n==4127?D0e(e):A0e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function b6(e,t){var r=Ut(4),n=Ut(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ut(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=_0e(t);break;case 31:case 80:for(n=Ut(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ki([r,n])}function y6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),h=e.read_shift(4);i[o]=[u,h+r]}i.sort(function(C,N){return C[1]-N[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(m[v.n]=Mw(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ed(l=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(i[o][0]===1){if(l=m.CodePage=Mw(e,P4),Ed(l),c!==-1){var g=e.l;e.l=i[c][1],d=g6(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=g6(e,l)}else{var b=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=$z(e);break;case 30:e.l+=4,y=ND(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=ND(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=qa(M4(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=y}}return e.l=r+n,m}var qz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function O0e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function j6(e,t,r){var n=Ut(8),s=[],i=[],o=8,l=0,c=Ut(8),d=Ut(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=Ut(8),d.write_shift(4,0),s.unshift(d);var u=[Ut(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var h=e[l][0];for(c=Ut(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=ki(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(qz.indexOf(e[l][0])>-1||Oz.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof m=="string"){var g=m.split(".");m=(+g[0]<<16)+(+g[1]||0)}c=b6(v.t,m)}else{var b=O0e(m);b==-1&&(b=31,m=String(m)),c=b6(b,m)}i.push(c),d=Ut(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),ki([n].concat(s).concat(i))}function N6(e,t,r){var n=e.content;if(!n)return{};Gi(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),u=n.read_shift(16);if(u!==zr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var h=y6(n,t),m={SystemIdentifier:d};for(var p in h)m[p]=h[p];if(m.FMTID=i,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var v;try{v=y6(n,null)}catch{}for(p in v)m[p]=v[p];return m.FMTID=[i,o],m}function w6(e,t,r,n,s,i){var o=Ut(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,zr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=j6(e,r,n);if(l.push(c),s){var d=j6(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return ki(l)}function pm(e,t){return e.read_shift(t),null}function M0e(e,t){t||(t=Ut(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function R0e(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function Bo(e,t){return t||(t=Ut(2)),t.write_shift(2,+!!e),t}function Zs(e){return e.read_shift(2,"u")}function Oc(e,t){return t||(t=Ut(2)),t.write_shift(2,e),t}function Vz(e,t){return R0e(e,t,Zs)}function F0e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function zz(e,t,r){return r||(r=Ut(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function r1(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function L0e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function B0e(e){var t=e.t||"",r=Ut(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ut(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return ki(s)}function Cx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function n1(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Cx(e,n,r)}function Vx(e,t,r){if(r.biff>5)return n1(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Hz(e,t,r){return r||(r=Ut(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function U0e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function $0e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Vo,"");return n&&(e.l+=24),s}function q0e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Vo,"");return r+o}function V0e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return $0e(e);case"0303000000000000c000000000000046":return q0e(e);default:throw new Error("Unsupported Moniker "+r)}}function Uj(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Vo,""):"";return r}function S6(e,t){t||(t=Ut(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function z0e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,h;s&16&&(i=Uj(e,r-e.l)),s&128&&(o=Uj(e,r-e.l)),(s&257)===257&&(l=Uj(e,r-e.l)),(s&257)===1&&(c=V0e(e,r-e.l)),s&8&&(d=Uj(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(h=M4(e)),e.l=r;var m=o||l||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return u&&(p.guid=u),h&&(p.time=h),i&&(p.Tooltip=i),p}function H0e(e){var t=Ut(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),S6(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&S6(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Wz(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function Gz(e,t){var r=Wz(e);return r[3]=0,r}function Ju(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function kx(e,t,r,n){return n||(n=Ut(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function W0e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function G0e(e,t,r){return t===0?"":Vx(e,t,r)}function Y0e(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function Yz(e){var t=e.read_shift(2),r=I4(e);return[t,r]}function K0e(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=r1(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function jS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function Kz(e,t){return t||(t=Ut(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Xz(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var X0e=Xz;function Qz(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Q0e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function J0e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function oo(e){e.l+=2,e.l+=e.read_shift(2)}var Z0e={0:oo,4:oo,5:oo,6:oo,7:J0e,8:oo,9:oo,10:oo,11:oo,12:oo,13:Q0e,14:oo,15:oo,16:oo,17:oo,18:oo,19:oo,20:oo,21:Qz};function eve(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Z0e[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function $j(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function R4(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ut(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function tve(e,t){return t===0||e.read_shift(2),1200}function rve(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=Vx(e,0,r);return e.read_shift(t+n-e.l),s}function nve(e,t){var r=!t||t.biff==8,n=Ut(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ave(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function sve(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=r1(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function ive(e,t){var r=!t||t.biff>=8?2:1,n=Ut(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function ove(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(L0e(e));return i.Count=n,i.Unique=s,i}function lve(e,t){var r=Ut(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=B0e(e[s]);var i=ki([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function cve(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function dve(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function uve(e){var t=W0e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function hve(e){return e.read_shift(2),e.read_shift(4)}function C6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function fve(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function mve(){var e=Ut(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function pve(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function xve(e){var t=Ut(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function vve(){}function gve(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=r1(e,0,r),n}function bve(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=Ut(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function yve(e){var t=Ju(e);return t.isst=e.read_shift(4),t}function jve(e,t,r,n){var s=Ut(10);return kx(e,t,n,s),s.write_shift(4,r),s}function Nve(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ju(e);r.biff==2&&e.l++;var i=n1(e,n-e.l,r);return s.val=i,s}function wve(e,t,r,n,s){var i=!s||s.biff==8,o=Ut(8+ +i+(1+i)*r.length);return kx(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Sve(e,t,r){var n=e.read_shift(2),s=Vx(e,0,r);return[n,s]}function Cve(e,t,r,n){var s=r&&r.biff==5;n||(n=Ut(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var kve=Vx;function k6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function _ve(e,t){var r=t.biff==8||!t.biff?4:2,n=Ut(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Eve(e){var t=e.read_shift(2),r=e.read_shift(2),n=Yz(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Dve(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(Yz(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function Ave(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Tve(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=u0e[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function Ive(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Tve(e,t,n.fStyle,r),n}function _6(e,t,r,n){var s=r&&r.biff==5;n||(n=Ut(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Pve(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Ove(e){var t=Ut(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function E6(e,t,r){var n=Ju(e);(r.biff==2||t==9)&&++e.l;var s=F0e(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Mve(e,t,r,n,s,i){var o=Ut(8);return kx(e,t,n,o),zz(r,i,o),o}function Rve(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ju(e),s=No(e);return n.val=s,n}function Fve(e,t,r,n){var s=Ut(14);return kx(e,t,n,s),Sx(r,s),s}var D6=G0e;function Lve(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Cx(e,i),l=[];n>e.l;)l.push(n1(e));return[i,s,o,l]}function A6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=K0e(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Bve=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function T6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Cx(e,o,r);s&32&&(d=Bve[d.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var h=n==e.l||l===0||!(u>0)?[]:eje(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function Jz(e,t,r){if(r.biff<8)return Uve(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Y0e(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Uve(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=r1(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function $ve(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=Cx(e,n,r),o=Cx(e,s,r);return[i,o]}function qve(e,t,r){var n=Xz(e);e.l++;var s=e.read_shift(1);return t-=8,[tje(e,t,r),s,n]}function I6(e,t,r){var n=X0e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,J1e(e,t,r)]}function Vve(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function zve(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Vx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function Hve(e,t,r){return zve(e,t,r)}function Wve(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(jS(e));return r}function Gve(e){var t=Ut(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Kz(e[r],t);return t}function Yve(e,t,r){if(r&&r.biff<8)return Xve(e,t,r);var n=Qz(e),s=eve(e,t-22,n[1]);return{cmo:n,ft:s}}var Kve={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Xve(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Kve[n]||Do)(e,t,r)),{cmo:[s,n,i],ft:o}}function Qve(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=U0e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Zs(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=Cx(e,e.lens[d+1]-e.lens[d]-1);if(s+=h,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Jve(e,t){var r=jS(e);e.l+=16;var n=z0e(e,t-24);return[r,n]}function Zve(e){var t=Ut(24),r=ds(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return ki([t,H0e(e[1])])}function ege(e,t){e.read_shift(2);var r=jS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Vo,""),[r,n]}function tge(e){var t=e[1].Tooltip,r=Ut(10+2*(t.length+1));r.write_shift(2,2048);var n=ds(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function rge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=x6[r]||r,r=e.read_shift(2),t[1]=x6[r]||r,t}function nge(e){return e||(e=Ut(4)),e.write_shift(2,1),e.write_shift(2,1),e}function age(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function sge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function ige(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Zz(e,t,r){if(!r.cellStyles)return Do(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function oge(e,t){var r=Ut(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function lge(e,t){var r={};return t<32||(e.l+=16,r.header=No(e),r.footer=No(e),e.l+=2),r}function cge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function dge(e){for(var t=Ut(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var uge=Ju,hge=Vz,fge=n1;function mge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function pge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ju(e);++e.l;var s=Vx(e,t-7,r);return n.t="str",n.val=s,n}function xge(e){var t=Ju(e);++e.l;var r=No(e);return t.t="n",t.val=r,t}function vge(e,t,r){var n=Ut(15);return o1(n,e,t),n.write_shift(8,r,"f"),n}function gge(e){var t=Ju(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function bge(e,t,r){var n=Ut(9);return o1(n,e,t),n.write_shift(2,r),n}function yge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function jge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Nge(e,t,r){var n=e.l+t,s=Ju(e),i=e.read_shift(2),o=Cx(e,i,r);return e.l=n,s.t="str",s.val=o,s}var wge=[2,3,48,49,131,139,140,245],wD=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Lm(1);switch(c.type){case"base64":u=Wl(ic(l));break;case"binary":u=Wl(l);break;case"buffer":case"array":u=l;break}Gi(u,0);var h=u.read_shift(1),m=!!(h&136),p=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,b=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(b=u.read_shift(2));var y=u.read_shift(2),C=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(C=e[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var N=[],k={},S=Math.min(u.length,h==2?521:b-10-(p?264:0)),D=v?32:11;u.l<S&&u[u.l]!=13;)switch(k={},k.name=cy.utils.decode(C,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&N.push(k),h!=2&&(u.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var E=0,T=0;for(d[0]=[],T=0;T!=N.length;++T)d[0][T]=N[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++E]=[],T=0,T=0;T!=N.length;++T){var A=u.slice(u.l,u.l+N[T].len);u.l+=N[T].len,Gi(A,0);var L=cy.utils.decode(C,A);switch(N[T].type){case"C":L.trim().length&&(d[E][T]=L.replace(/\s+$/,""));break;case"D":L.length===8?d[E][T]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):d[E][T]=L;break;case"F":d[E][T]=parseFloat(L.trim());break;case"+":case"I":d[E][T]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":d[E][T]=!0;break;case"N":case"F":d[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][T]="##MEMO##"+(v?parseInt(L.trim(),10):A.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(d[E][T]=+L||0);break;case"@":d[E][T]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":d[E][T]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":d[E][T]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][T]=-A.read_shift(-8,"f");break;case"B":if(p&&N[T].len==8){d[E][T]=A.read_shift(8,"f");break}case"G":case"P":A.l+=N[T].len;break;case"0":if(N[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[T].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=N,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=og(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return ep(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Ed(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=hl(),h=Lw(l,{header:1,raw:!0,cellDates:!0}),m=h[0],p=h.slice(1),v=l["!cols"]||[],g=0,b=0,y=0,C=1;for(g=0;g<m.length;++g){if(((v[g]||{}).DBF||{}).name){m[g]=v[g].DBF.name,++y;continue}if(m[g]!=null){if(++y,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(b=0;b<1024;++b)if(m.indexOf(m[g]+"_"+b)==-1){m[g]+="_"+b;break}}}}var N=Yn(l["!ref"]),k=[],S=[],D=[];for(g=0;g<=N.e.c-N.s.c;++g){var E="",T="",A=0,L=[];for(b=0;b<p.length;++b)p[b][g]!=null&&L.push(p[b][g]);if(L.length==0||m[g]==null){k[g]="?";continue}for(b=0;b<L.length;++b){switch(typeof L[b]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=L[b]instanceof Date?"D":"C";break;default:T="C"}A=Math.max(A,String(L[b]).length),E=E&&E!=T?"C":T}A>250&&(A=250),T=((v[g]||{}).DBF||{}).type,T=="C"&&v[g].DBF.len>A&&(A=v[g].DBF.len),E=="B"&&T=="N"&&(E="N",D[g]=v[g].DBF.dec,A=v[g].DBF.len),S[g]=E=="C"||T=="N"?A:i[E]||0,C+=S[g],k[g]=E}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*y),P.write_shift(2,C),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[qV]||3)<<8),g=0,b=0;g<m.length;++g)if(m[g]!=null){var O=u.next(32),J=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,J,"sbcs"),O.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),O.write_shift(4,b),O.write_shift(1,S[g]||i[k[g]]||0),O.write_shift(1,D[g]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=S[g]||i[k[g]]||0}var W=u.next(264);for(W.write_shift(4,13),g=0;g<65;++g)W.write_shift(4,0);for(g=0;g<p.length;++g){var re=u.next(C);for(re.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(k[b]){case"L":re.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":re.write_shift(8,p[g][b]||0,"f");break;case"N":var U="0";for(typeof p[g][b]=="number"&&(U=p[g][b].toFixed(D[b]||0)),y=0;y<S[b]-U.length;++y)re.write_shift(1,32);re.write_shift(1,U,"sbcs");break;case"D":p[g][b]?(re.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(p[g][b]!=null?p[g][b]:"").slice(0,S[b]);for(re.write_shift(1,Q,"sbcs"),y=0;y<S[b]-Q.length;++y)re.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),eH=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ss(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var v=e[p];return typeof v=="number"?VL(v):v},n=function(m,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?m:VL(g)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(ic(m),p);case"binary":return i(m,p);case"buffer":return i(En&&Buffer.isBuffer(m)?m.toString("binary"):Zm(m),p);case"array":return i(wx(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var v=m.split(/[\n\r]+/),g=-1,b=-1,y=0,C=0,N=[],k=[],S=null,D={},E=[],T=[],A=[],L=0,P;for(+p.codepage>=0&&Ed(+p.codepage);y!==v.length;++y){L=0;var O=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),J=O.replace(/;;/g,"\0").split(";").map(function(K){return K.replace(/\u0000/g,";")}),W=J[0],re;if(O.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":J[1].charAt(0)=="P"&&k.push(O.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,Q=!1,B=!1,te=!1,X=-1,ce=-1;for(C=1;C<J.length;++C)switch(J[C].charAt(0)){case"A":break;case"X":b=parseInt(J[C].slice(1))-1,Q=!0;break;case"Y":for(g=parseInt(J[C].slice(1))-1,Q||(b=0),P=N.length;P<=g;++P)N[P]=[];break;case"K":re=J[C].slice(1),re.charAt(0)==='"'?re=re.slice(1,re.length-1):re==="TRUE"?re=!0:re==="FALSE"?re=!1:isNaN(Td(re))?isNaN(Av(re).getDate())||(re=qa(re)):(re=Td(re),S!==null&&sg(S)&&(re=yS(re))),U=!0;break;case"E":te=!0;var M=iv(J[C].slice(1),{r:g,c:b});N[g][b]=[N[g][b],M];break;case"S":B=!0,N[g][b]=[N[g][b],"S5S"];break;case"G":break;case"R":X=parseInt(J[C].slice(1))-1;break;case"C":ce=parseInt(J[C].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(U&&(N[g][b]&&N[g][b].length==2?N[g][b][0]=re:N[g][b]=re,S=null),B){if(te)throw new Error("SYLK shared formula cannot have own formula");var q=X>-1&&N[X][ce];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");N[g][b][1]=gH(q[1],{r:g-X,c:b-ce})}break;case"F":var z=0;for(C=1;C<J.length;++C)switch(J[C].charAt(0)){case"X":b=parseInt(J[C].slice(1))-1,++z;break;case"Y":for(g=parseInt(J[C].slice(1))-1,P=N.length;P<=g;++P)N[P]=[];break;case"M":L=parseInt(J[C].slice(1))/20;break;case"F":break;case"G":break;case"P":S=k[parseInt(J[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=J[C].slice(1).split(" "),P=parseInt(A[0],10);P<=parseInt(A[1],10);++P)L=parseInt(A[2],10),T[P-1]=L===0?{hidden:!0}:{wch:L},Bm(T[P-1]);break;case"C":b=parseInt(J[C].slice(1))-1,T[b]||(T[b]={});break;case"R":g=parseInt(J[C].slice(1))-1,E[g]||(E[g]={}),L>0?(E[g].hpt=L,E[g].hpx=Iv(L)):L===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}z<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(D["!rows"]=E),T.length>0&&(D["!cols"]=T),p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),[N,D]}function o(m,p){var v=s(m,p),g=v[0],b=v[1],y=og(g,p);return Ss(b).forEach(function(C){y[C]=b[C]}),y}function l(m,p){return ep(o(m,p),p)}function c(m,p,v,g){var b="C;Y"+(v+1)+";X"+(g+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+q4(m.f,{r:v,c:g}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(m,p){p.forEach(function(v,g){var b="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=vy(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=gy(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function u(m,p){p.forEach(function(v,g){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*by(v.hpx)+";"),b.length>2&&m.push(b+"R"+(g+1))})}function h(m,p){var v=["ID;PWXL;N;E"],g=[],b=Yn(m["!ref"]),y,C=Array.isArray(m),N=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&d(v,m["!cols"]),m["!rows"]&&u(v,m["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var S=b.s.c;S<=b.e.c;++S){var D=an({r:k,c:S});y=C?(m[k]||[])[S]:m[D],!(!y||y.v==null&&(!y.f||y.F))&&g.push(c(y,m,k,S))}return v.join(N)+N+g.join(N)+N+"E"+N}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),tH=function(){function e(i,o){switch(o.type){case"base64":return t(ic(i),o);case"binary":return t(i,o);case"buffer":return t(En&&Buffer.isBuffer(i)?i.toString("binary"):Zm(i),o);case"array":return t(wx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var m=l[u].trim().split(","),p=m[0],v=m[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Td(v))?isNaN(Av(v).getDate())?h[c][d]=v:h[c][d]=qa(v):h[c][d]=Td(v),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return og(e(i,o),o)}function n(i,o){return ep(r(i,o),o)}var s=function(){var i=function(c,d,u,h,m){c.push(d),c.push(u+","+h),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Yn(c["!ref"]),h,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var g=an({r:p,c:v});if(h=m?(c[p]||[])[v]:c[g],!h){o(d,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(d,1,0,"="+h.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Gc(h.z||tn[14],hi(qa(h.v)))),o(d,0,h.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,C=d.join(y);return C}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),rH=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var p=h.split(`
`),v=-1,g=-1,b=0,y=[];b!==p.length;++b){var C=p[b].trim().split(":");if(C[0]==="cell"){var N=ds(C[1]);if(y.length<=N.r)for(v=y.length;v<=N.r;++v)y[v]||(y[v]=[]);switch(v=N.r,g=N.c,C[2]){case"t":y[v][g]=e(C[3]);break;case"v":y[v][g]=+C[3];break;case"vtf":var k=C[C.length-1];case"vtc":switch(C[3]){case"nl":y[v][g]=!!+C[4];break;default:y[v][g]=+C[4];break}C[2]=="vtf"&&(y[v][g]=[y[v][g],k])}}}return m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),y}function n(h,m){return og(r(h,m),m)}function s(h,m){return ep(n(h,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var m=[],p=[],v,g="",b=ml(h["!ref"]),y=Array.isArray(h),C=b.s.r;C<=b.e.r;++C)for(var N=b.s.c;N<=b.e.c;++N)if(g=an({r:C,c:N}),v=y?(h[C]||[])[N]:h[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=hi(qa(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||Gc(v.z||tn[14],k);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(h){return[i,o,l,o,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Tv=function(){function e(u,h,m,p,v){v.raw?h[m][p]=u:u===""||(u==="TRUE"?h[m][p]=!0:u==="FALSE"?h[m][p]=!1:isNaN(Td(u))?isNaN(Av(u).getDate())?h[m][p]=u:h[m][p]=qa(u):h[m][p]=Td(u))}function t(u,h){var m=h||{},p=[];if(!u||u.length===0)return p;for(var v=u.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var b=10,y=0,C=0;C<=g;++C)y=v[C].indexOf(" "),y==-1?y=v[C].length:y++,b=Math.max(b,y);for(C=0;C<=g;++C){p[C]=[];var N=0;for(e(v[C].slice(0,b).trim(),p,C,N,m),N=1;N<=(v[C].length-b)/10+1;++N)e(v[C].slice(b+(N-1)*10,b+N*10).trim(),p,C,N,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var h={},m=!1,p=0,v=0;p<u.length;++p)(v=u.charCodeAt(p))==34?m=!m:!m&&v in r&&(h[v]=(h[v]||0)+1);v=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p]);if(!v.length){h=n;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p])}return v.sort(function(g,b){return g[0]-b[0]||n[g[1]]-n[b[1]]}),r[v.pop()[1]]||44}function i(u,h){var m=h||{},p="",v=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):m&&m.FS?p=m.FS:p=s(u.slice(0,1024));var b=0,y=0,C=0,N=0,k=0,S=p.charCodeAt(0),D=!1,E=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var A=m.dateNF!=null?cxe(m.dateNF):null;function L(){var P=u.slice(N,k),O={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)O.t="z";else if(m.raw)O.t="s",O.v=P;else if(P.trim().length===0)O.t="s",O.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(O.t="s",O.v=P.slice(2,-1).replace(/""/g,'"')):Lye(P)?(O.t="n",O.f=P.slice(1)):(O.t="s",O.v=P);else if(P=="TRUE")O.t="b",O.v=!0;else if(P=="FALSE")O.t="b",O.v=!1;else if(!isNaN(C=Td(P)))O.t="n",m.cellText!==!1&&(O.w=P),O.v=C;else if(!isNaN(Av(P).getDate())||A&&P.match(A)){O.z=m.dateNF||tn[14];var J=0;A&&P.match(A)&&(P=dxe(P,m.dateNF,P.match(A)||[]),J=1),m.cellDates?(O.t="d",O.v=qa(P,J)):(O.t="n",O.v=hi(qa(P,J))),m.cellText!==!1&&(O.w=Gc(O.z,O.v instanceof Date?hi(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=P;if(O.t=="z"||(m.dense?(v[b]||(v[b]=[]),v[b][y]=O):v[an({c:y,r:b})]=O),N=k+1,T=u.charCodeAt(N),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==S)++y;else if(y=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;k<u.length;++k)switch(E=u.charCodeAt(k)){case 34:T===34&&(D=!D);break;case S:case 10:case 13:if(!D&&L())break e;break}return k-N>0&&L(),v["!ref"]=yn(g),v}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):og(t(u,h),h)}function l(u,h){var m="",p=h.type=="string"?[0,0,0,0]:X4(u,h);switch(h.type){case"base64":m=ic(u);break;case"binary":m=u;break;case"buffer":h.codepage==65001?m=u.toString("utf8"):h.codepage&&typeof cy<"u"||(m=En&&Buffer.isBuffer(u)?u.toString("binary"):Zm(u));break;case"array":m=wx(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ca(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=Ca(m):h.type=="binary"&&typeof cy<"u",m.slice(0,19)=="socialcalc:version:"?rH.to_sheet(h.type=="string"?m:Ca(m),h):o(m,h)}function c(u,h){return ep(l(u,h),h)}function d(u){for(var h=[],m=Yn(u["!ref"]),p,v=Array.isArray(u),g=m.s.r;g<=m.e.r;++g){for(var b=[],y=m.s.c;y<=m.e.c;++y){var C=an({r:g,c:y});if(p=v?(u[g]||[])[y]:u[C],!p||p.v==null){b.push("          ");continue}for(var N=(p.w||(of(p),p.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function Sge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=eH.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Tv.to_workbook(e,t)}}var dx=function(){function e(M,q,z){if(M){Gi(M,M.l||0);for(var K=z.Enum||X;M.l<M.length;){var ee=M.read_shift(2),ne=K[ee]||K[65535],ae=M.read_shift(2),ie=M.l+ae,G=ne.f&&ne.f(M,ae,z);if(M.l=ie,q(G,ne,ee))return}}}function t(M,q){switch(q.type){case"base64":return r(Wl(ic(M)),q);case"binary":return r(Wl(M),q);case"buffer":case"array":return r(M,q)}throw"Unsupported type "+q.type}function r(M,q){if(!M)return M;var z=q||{},K=z.dense?[]:{},ee="Sheet1",ne="",ae=0,ie={},G=[],de=[],Y={s:{r:0,c:0},e:{r:0,c:0}},oe=z.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)z.Enum=X,e(M,function(ye,Ne,Le){switch(Le){case 0:z.vers=ye,ye>=4096&&(z.qpro=!0);break;case 6:Y=ye;break;case 204:ye&&(ne=ye);break;case 222:ne=ye;break;case 15:case 51:z.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:Le==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=z.dateNF||tn[14],z.cellDates&&(ye[1].t="d",ye[1].v=yS(ye[1].v))),z.qpro&&ye[3]>ae&&(K["!ref"]=yn(Y),ie[ee]=K,G.push(ee),K=z.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},ae=ye[3],ee=ne||"Sheet"+(ae+1),ne="");var Je=z.dense?(K[ye[0].r]||[])[ye[0].c]:K[an(ye[0])];if(Je){Je.t=ye[1].t,Je.v=ye[1].v,ye[1].z!=null&&(Je.z=ye[1].z),ye[1].f!=null&&(Je.f=ye[1].f);break}z.dense?(K[ye[0].r]||(K[ye[0].r]=[]),K[ye[0].r][ye[0].c]=ye[1]):K[an(ye[0])]=ye[1];break}},z);else if(M[2]==26||M[2]==14)z.Enum=ce,M[2]==14&&(z.qpro=!0,M.l=0),e(M,function(ye,Ne,Le){switch(Le){case 204:ee=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ae&&(K["!ref"]=yn(Y),ie[ee]=K,G.push(ee),K=z.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},ae=ye[3],ee="Sheet"+(ae+1)),oe>0&&ye[0].r>=oe)break;z.dense?(K[ye[0].r]||(K[ye[0].r]=[]),K[ye[0].r][ye[0].c]=ye[1]):K[an(ye[0])]=ye[1],Y.e.c<ye[0].c&&(Y.e.c=ye[0].c),Y.e.r<ye[0].r&&(Y.e.r=ye[0].r);break;case 27:ye[14e3]&&(de[ye[14e3][0]]=ye[14e3][1]);break;case 1537:de[ye[0]]=ye[1],ye[0]==ae&&(ee=ye[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(K["!ref"]=yn(Y),ie[ne||ee]=K,G.push(ne||ee),!de.length)return{SheetNames:G,Sheets:ie};for(var Se={},ue=[],se=0;se<de.length;++se)ie[G[se]]?(ue.push(de[se]||G[se]),Se[de[se]]=ie[de[se]]||ie[G[se]]):(ue.push(de[se]),Se[de[se]]={"!ref":"A1"});return{SheetNames:ue,Sheets:Se}}function n(M,q){var z=q||{};if(+z.codepage>=0&&Ed(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var K=hl(),ee=Yn(M["!ref"]),ne=Array.isArray(M),ae=[];vr(K,0,i(1030)),vr(K,6,c(ee));for(var ie=Math.min(ee.e.r,8191),G=ee.s.r;G<=ie;++G)for(var de=$s(G),Y=ee.s.c;Y<=ee.e.c;++Y){G===ee.s.r&&(ae[Y]=cs(Y));var oe=ae[Y]+de,Se=ne?(M[G]||[])[Y]:M[oe];if(!(!Se||Se.t=="z"))if(Se.t=="n")(Se.v|0)==Se.v&&Se.v>=-32768&&Se.v<=32767?vr(K,13,p(G,Y,Se.v)):vr(K,14,g(G,Y,Se.v));else{var ue=of(Se);vr(K,15,h(G,Y,ue.slice(0,239)))}}return vr(K,1),K.end()}function s(M,q){var z=q||{};if(+z.codepage>=0&&Ed(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var K=hl();vr(K,0,o(M));for(var ee=0,ne=0;ee<M.SheetNames.length;++ee)(M.Sheets[M.SheetNames[ee]]||{})["!ref"]&&vr(K,27,te(M.SheetNames[ee],ne++));var ae=0;for(ee=0;ee<M.SheetNames.length;++ee){var ie=M.Sheets[M.SheetNames[ee]];if(!(!ie||!ie["!ref"])){for(var G=Yn(ie["!ref"]),de=Array.isArray(ie),Y=[],oe=Math.min(G.e.r,8191),Se=G.s.r;Se<=oe;++Se)for(var ue=$s(Se),se=G.s.c;se<=G.e.c;++se){Se===G.s.r&&(Y[se]=cs(se));var ye=Y[se]+ue,Ne=de?(ie[Se]||[])[se]:ie[ye];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")vr(K,23,L(Se,se,ae,Ne.v));else{var Le=of(Ne);vr(K,22,E(Se,se,ae,Le.slice(0,239)))}}++ae}}return vr(K,1),K.end()}function i(M){var q=Ut(2);return q.write_shift(2,M),q}function o(M){var q=Ut(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var z=0,K=0,ee=0,ne=0;ne<M.SheetNames.length;++ne){var ae=M.SheetNames[ne],ie=M.Sheets[ae];if(!(!ie||!ie["!ref"])){++ee;var G=ml(ie["!ref"]);z<G.e.r&&(z=G.e.r),K<G.e.c&&(K=G.e.c)}}return z>8191&&(z=8191),q.write_shift(2,z),q.write_shift(1,ee),q.write_shift(1,K),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(M,q,z){var K={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&z.qpro?(K.s.c=M.read_shift(1),M.l++,K.s.r=M.read_shift(2),K.e.c=M.read_shift(1),M.l++,K.e.r=M.read_shift(2),K):(K.s.c=M.read_shift(2),K.s.r=M.read_shift(2),q==12&&z.qpro&&(M.l+=2),K.e.c=M.read_shift(2),K.e.r=M.read_shift(2),q==12&&z.qpro&&(M.l+=2),K.s.c==65535&&(K.s.c=K.e.c=K.s.r=K.e.r=0),K)}function c(M){var q=Ut(8);return q.write_shift(2,M.s.c),q.write_shift(2,M.s.r),q.write_shift(2,M.e.c),q.write_shift(2,M.e.r),q}function d(M,q,z){var K=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(K[0].c=M.read_shift(1),K[3]=M.read_shift(1),K[0].r=M.read_shift(2),M.l+=2):(K[2]=M.read_shift(1),K[0].c=M.read_shift(2),K[0].r=M.read_shift(2)),K}function u(M,q,z){var K=M.l+q,ee=d(M,q,z);if(ee[1].t="s",z.vers==20768){M.l++;var ne=M.read_shift(1);return ee[1].v=M.read_shift(ne,"utf8"),ee}return z.qpro&&M.l++,ee[1].v=M.read_shift(K-M.l,"cstr"),ee}function h(M,q,z){var K=Ut(7+z.length);K.write_shift(1,255),K.write_shift(2,q),K.write_shift(2,M),K.write_shift(1,39);for(var ee=0;ee<K.length;++ee){var ne=z.charCodeAt(ee);K.write_shift(1,ne>=128?95:ne)}return K.write_shift(1,0),K}function m(M,q,z){var K=d(M,q,z);return K[1].v=M.read_shift(2,"i"),K}function p(M,q,z){var K=Ut(7);return K.write_shift(1,255),K.write_shift(2,q),K.write_shift(2,M),K.write_shift(2,z,"i"),K}function v(M,q,z){var K=d(M,q,z);return K[1].v=M.read_shift(8,"f"),K}function g(M,q,z){var K=Ut(13);return K.write_shift(1,255),K.write_shift(2,q),K.write_shift(2,M),K.write_shift(8,z,"f"),K}function b(M,q,z){var K=M.l+q,ee=d(M,q,z);if(ee[1].v=M.read_shift(8,"f"),z.qpro)M.l=K;else{var ne=M.read_shift(2);k(M.slice(M.l,M.l+ne),ee),M.l+=ne}return ee}function y(M,q,z){var K=q&32768;return q&=-32769,q=(K?M:0)+(q>=8192?q-16384:q),(K?"":"$")+(z?cs(q):$s(q))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,q){Gi(M,0);for(var z=[],K=0,ee="",ne="",ae="",ie="";M.l<M.length;){var G=M[M.l++];switch(G){case 0:z.push(M.read_shift(8,"f"));break;case 1:ne=y(q[0].c,M.read_shift(2),!0),ee=y(q[0].r,M.read_shift(2),!1),z.push(ne+ee);break;case 2:{var de=y(q[0].c,M.read_shift(2),!0),Y=y(q[0].r,M.read_shift(2),!1);ne=y(q[0].c,M.read_shift(2),!0),ee=y(q[0].r,M.read_shift(2),!1),z.push(de+Y+":"+ne+ee)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(M.read_shift(2));break;case 6:{for(var oe="";G=M[M.l++];)oe+=String.fromCharCode(G);z.push('"'+oe.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:ie=z.pop(),ae=z.pop(),z.push(["AND","OR"][G-20]+"("+ae+","+ie+")");break;default:if(G<32&&N[G])ie=z.pop(),ae=z.pop(),z.push(ae+N[G]+ie);else if(C[G]){if(K=C[G][1],K==69&&(K=M[M.l++]),K>z.length){console.error("WK1 bad formula parse 0x"+G.toString(16)+":|"+z.join("|")+"|");return}var Se=z.slice(-K);z.length-=K,z.push(C[G][0]+"("+Se.join(",")+")")}else return G<=7?console.error("WK1 invalid opcode "+G.toString(16)):G<=24?console.error("WK1 unsupported op "+G.toString(16)):G<=30?console.error("WK1 invalid opcode "+G.toString(16)):G<=115?console.error("WK1 unsupported function opcode "+G.toString(16)):console.error("WK1 unrecognized opcode "+G.toString(16))}}z.length==1?q[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function S(M){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=M.read_shift(2),q[3]=M[M.l++],q[0].c=M[M.l++],q}function D(M,q){var z=S(M);return z[1].t="s",z[1].v=M.read_shift(q-4,"cstr"),z}function E(M,q,z,K){var ee=Ut(6+K.length);ee.write_shift(2,M),ee.write_shift(1,z),ee.write_shift(1,q),ee.write_shift(1,39);for(var ne=0;ne<K.length;++ne){var ae=K.charCodeAt(ne);ee.write_shift(1,ae>=128?95:ae)}return ee.write_shift(1,0),ee}function T(M,q){var z=S(M);z[1].v=M.read_shift(2);var K=z[1].v>>1;if(z[1].v&1)switch(K&7){case 0:K=(K>>3)*5e3;break;case 1:K=(K>>3)*500;break;case 2:K=(K>>3)/20;break;case 3:K=(K>>3)/200;break;case 4:K=(K>>3)/2e3;break;case 5:K=(K>>3)/2e4;break;case 6:K=(K>>3)/16;break;case 7:K=(K>>3)/64;break}return z[1].v=K,z}function A(M,q){var z=S(M),K=M.read_shift(4),ee=M.read_shift(4),ne=M.read_shift(2);if(ne==65535)return K===0&&ee===3221225472?(z[1].t="e",z[1].v=15):K===0&&ee===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var ae=ne&32768;return ne=(ne&32767)-16446,z[1].v=(1-ae*2)*(ee*Math.pow(2,ne+32)+K*Math.pow(2,ne)),z}function L(M,q,z,K){var ee=Ut(14);if(ee.write_shift(2,M),ee.write_shift(1,z),ee.write_shift(1,q),K==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var ne=0,ae=0,ie=0,G=0;return K<0&&(ne=1,K=-K),ae=Math.log2(K)|0,K/=Math.pow(2,ae-31),G=K>>>0,(G&2147483648)==0&&(K/=2,++ae,G=K>>>0),K-=G,G|=2147483648,G>>>=0,K*=Math.pow(2,32),ie=K>>>0,ee.write_shift(4,ie),ee.write_shift(4,G),ae+=16383+(ne?32768:0),ee.write_shift(2,ae),ee}function P(M,q){var z=A(M);return M.l+=q-14,z}function O(M,q){var z=S(M),K=M.read_shift(4);return z[1].v=K>>6,z}function J(M,q){var z=S(M),K=M.read_shift(8,"f");return z[1].v=K,z}function W(M,q){var z=J(M);return M.l+=q-10,z}function re(M,q){return M[M.l+q-1]==0?M.read_shift(q,"cstr"):""}function U(M,q){var z=M[M.l++];z>q-1&&(z=q-1);for(var K="";K.length<z;)K+=String.fromCharCode(M[M.l++]);return K}function Q(M,q,z){if(!(!z.qpro||q<21)){var K=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ee=M.read_shift(q-21,"cstr");return[K,ee]}}function B(M,q){for(var z={},K=M.l+q;M.l<K;){var ee=M.read_shift(2);if(ee==14e3){for(z[ee]=[0,""],z[ee][0]=M.read_shift(2);M[M.l];)z[ee][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return z}function te(M,q){var z=Ut(5+M.length);z.write_shift(2,14e3),z.write_shift(2,q);for(var K=0;K<M.length;++K){var ee=M.charCodeAt(K);z[z.l++]=ee>127?95:ee}return z[z.l++]=0,z}var X={0:{n:"BOF",f:Zs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:re},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},ce={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:B},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:J},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function Cge(e){var t={},r=e.match(To),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=on(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=f4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var kge=function(){var e=hy("t"),t=hy("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Gn(o[1])},c=i.match(t);return c&&(l.s=Cge(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),_ge=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Ege=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Dge=/<(?:\w+:)?r>/,Age=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function F4(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Gn(Ca(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ca(e),r&&(n.h=w4(n.t))):e.match(Dge)&&(n.r=Ca(e),n.t=Gn(Ca((e.replace(Age,"").match(Ege)||[]).join("").replace(To,""))),r&&(n.h=_ge(kge(n.r)))),n):{t:""}}var Tge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ige=/<(?:\w+:)?(?:si|sstItem)>/g,Pge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Oge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Tge);if(s){n=s[2].replace(Ige,"").split(Pge);for(var i=0;i!=n.length;++i){var o=F4(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=on(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Mge=/^\s|\s$|[\t\n\r]/;function nH(e,t){if(!t.bookSST)return"";var r=[Vs];r[r.length]=xr("sst",null,{xmlns:Lx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Mge)&&(i+=' xml:space="preserve"'),i+=">"+ba(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Rge(e){return[e.read_shift(4),e.read_shift(4)]}function Fge(e,t){var r=[],n=!1;return xf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Lge(e,t){return t||(t=Ut(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Bge=Kxe;function Uge(e){var t=hl();nr(t,159,Lge(e));for(var r=0;r<e.length;++r)nr(t,19,Bge(e[r]));return nr(t,160),t.end()}function aH(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Gh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function $ge(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Gh(e,4),t.U=Gh(e,4),t.W=Gh(e,4),t}function qge(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Vge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(qge(e));return t}function zge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Hge(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Gh(e,4),t.U=Gh(e,4),t.W=Gh(e,4),t}function Wge(e){var t=Hge(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function sH(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function iH(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Gge(e){var t=Gh(e);switch(t.Minor){case 2:return[t.Minor,Yge(e)];case 3:return[t.Minor,Kge()];case 4:return[t.Minor,Xge(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Yge(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=sH(e,r),s=iH(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Kge(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xge(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(To,function(i){var o=on(i);switch(Qu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Qge(e,t){var r={},n=r.EncryptionVersionInfo=Gh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=sH(e,s),t-=s,r.EncryptionVerifier=iH(e,t),r}function Jge(e){var t={},r=t.EncryptionVersionInfo=Gh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function L4(e){var t=0,r,n=aH(e),s=n.length+1,i,o,l,c,d;for(r=Lm(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var oH=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=aH(o),c=i(l),d=l.length,u=Lm(16),h=0;h!=16;++h)u[h]=0;var m,p,v;for((d&1)===1&&(m=c>>8,u[d]=s(e[0],m),--d,m=c&255,p=l[l.length-1],u[d]=s(p,m));d>0;)--d,m=c>>8,u[d]=s(l[d],m),--d,m=c&255,u[d]=s(l[d],m);for(d=15,v=15-l.length;v>0;)m=c>>8,u[d]=s(e[v],m),--d,--v,m=c&255,u[d]=s(l[d],m),--d,--v;return u}}(),Zge=function(e,t,r,n,s){s||(s=t),n||(n=oH(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},ebe=function(e){var t=0,r=oH(e);return function(n){var s=Zge("",n,t,r);return t=s[1],s[0]}};function tbe(e,t,r,n){var s={key:Zs(e),verificationBytes:Zs(e)};return r.password&&(s.verifier=L4(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=ebe(r.password)),s}function rbe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Jge(e):n.Data=Qge(e,t),n}function nbe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?rbe(e,t-2,n):tbe(e,r.biff>=8?t:t-2,r,n),n}var lH=function(){function e(s,i){switch(i.type){case"base64":return t(ic(s),i);case"binary":return t(s,i);case"buffer":return t(En&&Buffer.isBuffer(s)?s.toString("binary"):Zm(s),i);case"array":return t(wx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var m=/\\\w+\b/g,p=0,v,g=-1;v=m.exec(u);){switch(v[0]){case"\\cell":var b=u.slice(p,m.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][g]=y:l[an({r:h,c:g})]=y}break}p=m.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=yn(d),l}function r(s,i){return ep(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Yn(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=an({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(of(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function abe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function xy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function sbe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,d/2]}function ibe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Rw(e,t){if(t===0)return e;var r=sbe(abe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),xy(ibe(r))}var cH=6,obe=15,lbe=1,bo=cH;function vy(e){return Math.floor((e+Math.round(128/bo)/256)*bo)}function gy(e){return Math.floor((e-5)/bo*100+.5)/100}function Fw(e){return Math.round((e*bo+5)/bo*256)/256}function eE(e){return Fw(gy(vy(e)))}function B4(e){var t=Math.abs(e-eE(e)),r=bo;if(t>.005)for(bo=lbe;bo<obe;++bo)Math.abs(e-eE(e))<=t&&(t=Math.abs(e-eE(e)),r=bo);bo=r}function Bm(e){e.width?(e.wpx=vy(e.width),e.wch=gy(e.wpx),e.MDW=bo):e.wpx?(e.wch=gy(e.wpx),e.width=Fw(e.wch),e.MDW=bo):typeof e.wch=="number"&&(e.width=Fw(e.wch),e.wpx=vy(e.width),e.MDW=bo),e.customWidth&&delete e.customWidth}var cbe=96,dH=cbe;function by(e){return e*96/dH}function Iv(e){return e*dH/96}var dbe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ube(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=on(o);switch(Qu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Ua(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Ua(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function hbe(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=on(o);switch(Qu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function fbe(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=on(o);switch(Qu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ca(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Ua(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Ua(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Ua(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Ua(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Ua(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Ua(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Ua(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=f4[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Ua(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=lx[s.color.index];s.color.index==81&&(c=lx[1]),c||(c=lx[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Rw(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function mbe(e,t,r){t.NumberFmt=[];for(var n=Ss(tn),s=0;s<n.length;++s)t.NumberFmt[n[s]]=tn[n[s]];var i=e[0].match(To);if(i)for(s=0;s<i.length;++s){var o=on(i[s]);switch(Qu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Gn(Ca(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Wh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function pbe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=xr("numFmt",null,{numFmtId:n,formatCode:ba(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=xr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var qj=["numFmtId","fillId","fontId","borderId","xfId"],Vj=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function xbe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(To)||[]).forEach(function(i){var o=on(i),l=0;switch(Qu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<qj.length;++l)n[qj[l]]&&(n[qj[l]]=parseInt(n[qj[l]],10));for(l=0;l<Vj.length;++l)n[Vj[l]]&&(n[Vj[l]]=Ua(n[Vj[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Ua(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function vbe(e){var t=[];return t[t.length]=xr("cellXfs",null),e.forEach(function(r){t[t.length]=xr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=xr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gbe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&mbe(h,u,d),(h=l.match(s))&&fbe(h,u,c,d),(h=l.match(n))&&hbe(h,u,c,d),(h=l.match(i))&&ube(h,u,c,d),(h=l.match(r))&&xbe(h,u,d),u}}();function uH(e,t){var r=[Vs,xr("styleSheet",null,{xmlns:Lx[0],"xmlns:vt":ci.vt})],n;return e.SSF&&(n=pbe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=vbe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function bbe(e,t){var r=e.read_shift(2),n=Eo(e);return[r,n]}function ybe(e,t,r){r||(r=Ut(6+4*t.length)),r.write_shift(2,e),_i(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function jbe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=r0e(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=t0e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Eo(e),n}function Nbe(e,t){t||(t=Ut(25+4*32)),t.write_shift(2,e.sz*20),n0e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Pw(e.color,t);var n=0;return n=2,t.write_shift(1,n),_i(e.name,t),t.length>t.l?t.slice(0,t.l):t}var wbe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tE,Sbe=Do;function P6(e,t){t||(t=Ut(4*3+8*7+16*1)),tE||(tE=gS(wbe));var r=tE[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Pw({auto:1},t),Pw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Cbe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function hH(e,t,r){r||(r=Ut(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function fb(e,t){return t||(t=Ut(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var kbe=Do;function _be(e,t){return t||(t=Ut(51)),t.write_shift(1,0),fb(null,t),fb(null,t),fb(null,t),fb(null,t),fb(null,t),t.length>t.l?t.slice(0,t.l):t}function Ebe(e,t){return t||(t=Ut(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Iw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Dbe(e,t,r){var n=Ut(2052);return n.write_shift(4,e),Iw(t,n),Iw(r,n),n.length>n.l?n.slice(0,n.l):n}function Abe(e,t,r){var n={};n.NumberFmt=[];for(var s in tn)n.NumberFmt[s]=tn[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return xf(e,function(c,d,u){switch(u){case 44:n.NumberFmt[c[0]]=c[1],Wh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Rw(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function Tbe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(nr(e,615,Id(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&nr(e,44,ybe(s,t[s]))}),nr(e,616))}}function Ibe(e){var t=1;nr(e,611,Id(t)),nr(e,43,Nbe({sz:12,color:{theme:1},name:"Calibri",family:2})),nr(e,612)}function Pbe(e){var t=2;nr(e,603,Id(t)),nr(e,45,P6({patternType:"none"})),nr(e,45,P6({patternType:"gray125"})),nr(e,604)}function Obe(e){var t=1;nr(e,613,Id(t)),nr(e,46,_be()),nr(e,614)}function Mbe(e){var t=1;nr(e,626,Id(t)),nr(e,47,hH({numFmtId:0},65535)),nr(e,627)}function Rbe(e,t){nr(e,617,Id(t.length)),t.forEach(function(r){nr(e,47,hH(r,0))}),nr(e,618)}function Fbe(e){var t=1;nr(e,619,Id(t)),nr(e,48,Ebe({xfId:0,name:"Normal"})),nr(e,620)}function Lbe(e){var t=0;nr(e,505,Id(t)),nr(e,506)}function Bbe(e){var t=0;nr(e,508,Dbe(t,"TableStyleMedium9","PivotStyleMedium4")),nr(e,509)}function Ube(e,t){var r=hl();return nr(r,278),Tbe(r,e.SSF),Ibe(r),Pbe(r),Obe(r),Mbe(r),Rbe(r,t.cellXfs),Fbe(r),Lbe(r),Bbe(r),nr(r,279),r.end()}var $be=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function qbe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(To)||[]).forEach(function(s){var i=on(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[$be.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Vbe(){}function zbe(){}var Hbe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Wbe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Gbe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ybe(e,t,r){t.themeElements={};var n;[["clrScheme",Hbe,qbe],["fontScheme",Wbe,Vbe],["fmtScheme",Gbe,zbe]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Kbe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function fH(e,t){(!e||e.length===0)&&(e=U4());var r,n={};if(!(r=e.match(Kbe)))throw new Error("themeElements not found in theme");return Ybe(r[0],n,t),n.raw=e,n}function U4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Vs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xbe(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=sz(i,{type:"array"})}catch{return}var l=Gl(o,"theme/theme/theme1.xml",!0);if(l)return fH(l,r)}}function Qbe(e){return e.read_shift(4)}function Jbe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Zbe(e,4);break;case 2:t.xclrValue=Wz(e);break;case 3:t.xclrValue=Qbe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Zbe(e,t){return Do(e,t)}function eye(e,t){return Do(e,t)}function tye(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Jbe(e);break;case 6:n[1]=eye(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function rye(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(tye(e,r-e.l));return{ixfe:n,ext:i}}function nye(e,t){t.forEach(function(r){r[0]})}function aye(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Eo(e)}}function sye(e){var t=Ut(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),_i(e.name,t),t.slice(0,t.l)}function iye(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function oye(e){var t=Ut(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function lye(e,t){var r=Ut(8+2*t.length);return r.write_shift(4,e),_i(t,r),r.slice(0,r.l)}function cye(e){return e.l+=4,e.read_shift(4)!=0}function dye(e,t){var r=Ut(8);return r.write_shift(4,e),r.write_shift(4,1),r}function uye(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return xf(e,function(c,d,u){switch(u){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):l==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function hye(){var e=hl();return nr(e,332),nr(e,334,Id(1)),nr(e,335,sye({name:"XLDAPR",version:12e4,flags:3496657072})),nr(e,336),nr(e,339,lye(1,"XLDAPR")),nr(e,52),nr(e,35,Id(514)),nr(e,4096,Id(0)),nr(e,4097,Oc(1)),nr(e,36),nr(e,53),nr(e,340),nr(e,337,dye(1)),nr(e,51,oye([[1,0]])),nr(e,338),nr(e,333),e.end()}function fye(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(To,function(l){var c=on(l);switch(Qu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function mH(){var e=[Vs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function mye(e){var t=[];if(!e)return t;var r=1;return(e.match(To)||[]).forEach(function(n){var s=on(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function pye(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=an(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function xye(e,t,r){var n=[];return xf(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function vye(e,t,r,n){if(!e)return e;var s=n||{},i=!1;xf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function gye(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Z0=1024;function pH(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[xr("xml",null,{"xmlns:v":ql.v,"xmlns:o":ql.o,"xmlns:x":ql.x,"xmlns:mv":ql.mv}).replace(/\/>/,">"),xr("o:shapelayout",xr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),xr("v:shapetype",[xr("v:stroke",null,{joinstyle:"miter"}),xr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Z0<e*1e3;)Z0+=1e3;return t.forEach(function(i){var o=ds(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?xr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=xr("v:fill",c,l),u={on:"t",obscured:"t"};++Z0,s=s.concat(["<v:shape"+fy({id:"_x0000_s"+Z0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,xr("v:shadow",null,u),xr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Xi("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Xi("x:AutoFill","False"),Xi("x:Row",String(o.r)),Xi("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function O6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=ds(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Yn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=yn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(u.a==n[h].id){u.a=n[h].name||u.a;break}}i.c.push(u)})}function bye(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=on(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=ds(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&F4(h[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function xH(e){var t=[Vs,xr("comments",null,{xmlns:Lx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=ba(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(ba(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Xi("t",ba(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Xi("t",ba(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function yye(e,t){var r=[],n=!1,s={},i=0;return e.replace(To,function(l,c){var d=on(l);switch(Qu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function jye(e,t,r){var n=[Vs,xr("ThreadedComments",null,{xmlns:ci.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(xr("threadedComment",Xi("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Nye(e,t){var r=[],n=!1;return e.replace(To,function(i){var o=on(i);switch(Qu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function wye(e){var t=[Vs,xr("personList",null,{xmlns:ci.TCMNT,"xmlns:x":Lx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(xr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Sye(e){var t={};t.iauthor=e.read_shift(4);var r=qx(e);return t.rfx=r.s,t.ref=an(r.s),e.l+=16,t}function Cye(e,t){return t==null&&(t=Ut(36)),t.write_shift(4,e[1].iauthor),lg(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var kye=Eo;function _ye(e){return _i(e.slice(0,54))}function Eye(e,t){var r=[],n=[],s={},i=!1;return xf(e,function(l,c,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Dye(e){var t=hl(),r=[];return nr(t,628),nr(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),nr(t,632,_ye(s.a)))})}),nr(t,631),nr(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:ds(n[0]),e:ds(n[0])};nr(t,635,Cye([i,s])),s.t&&s.t.length>0&&nr(t,637,Qxe(s)),nr(t,636),delete s.iauthor})}),nr(t,634),nr(t,629),t.end()}var Aye="application/vnd.ms-office.vbaProject";function Tye(e){var t=zr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");zr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),zr.write(t)}function Iye(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&zr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var vH=["xlsb","xlsm","xlam","biff8","xla"];function Pye(){return{"!type":"dialog"}}function Oye(){return{"!type":"dialog"}}function Mye(){return{"!type":"macro"}}function Rye(){return{"!type":"macro"}}var iv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+cs(u)+(c?"":"$")+$s(d)}return function(s,i){return t=i,s.replace(e,r)}}(),$4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,q4=function(){return function(t,r){return t.replace($4,function(n,s,i,o,l,c){var d=E4(o)-(i?0:r.c),u=_4(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+h+"C"+m})}}();function gH(e,t){return e.replace($4,function(r,n,s,i,o,l){return n+(s=="$"?s+i:cs(E4(i)+t.c))+(o=="$"?o+l:$s(_4(l)+t.r))})}function Fye(e,t,r){var n=ml(t),s=n.s,i=ds(r),o={r:i.r-s.r,c:i.c-s.c};return gH(e,o)}function Lye(e){return e.length!=1}function M6(e){return e.replace(/_xlfn\./g,"")}function Xs(e){e.l+=1}function Um(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function bH(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return yH(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=Um(e),l=Um(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function yH(e){var t=Um(e),r=Um(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Bye(e,t,r){if(r.biff<8)return yH(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Um(e),o=Um(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function jH(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Uye(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Um(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Uye(e){var t=Um(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function $ye(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function qye(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Vye(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Vye(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function zye(e,t,r){var n=(e[e.l++]&96)>>5,s=bH(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Hye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=bH(e,i,r);return[n,s,o]}function Wye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Gye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Yye(e,t,r){var n=(e[e.l++]&96)>>5,s=Bye(e,t-1,r);return[n,s]}function Kye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function R6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Xye(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Qye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Jye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Zye(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function e1e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function NH(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function t1e(e){return e.read_shift(2),NH(e)}function r1e(e){return e.read_shift(2),NH(e)}function n1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=jH(e,0,r);return[n,s]}function a1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=qye(e,0,r);return[n,s]}function s1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=jH(e,0,r);return[n,s,i]}function i1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[cje[s],CH[s],n]}function o1e(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:l1e(e);return[s,(i[0]===0?CH:lje)[i[1]]]}function l1e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function c1e(e,t,r){e.l+=r&&r.biff==2?3:4}function d1e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function u1e(e){return e.l++,vf[e.read_shift(1)]}function h1e(e){return e.l++,e.read_shift(2)}function f1e(e){return e.l++,e.read_shift(1)!==0}function m1e(e){return e.l++,No(e)}function p1e(e,t,r){return e.l++,r1(e,t-1,r)}function x1e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=vf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=No(e);break;case 2:r[1]=Vx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function v1e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?qx:jS)(e));return s}function g1e(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=x1e(e,r.biff);return o}function b1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function y1e(e,t,r){if(r.biff==5)return j1e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function j1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function N1e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function w1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function S1e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function C1e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var k1e=Do,_1e=Do,E1e=Do;function a1(e,t,r){return e.l+=2,[$ye(e)]}function V4(e){return e.l+=6,[]}var D1e=a1,A1e=V4,T1e=V4,I1e=a1;function wH(e){return e.l+=2,[Zs(e),e.read_shift(2)&1]}var P1e=a1,O1e=wH,M1e=V4,R1e=a1,F1e=a1,L1e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B1e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=L1e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function U1e(e){return e.l+=2,[e.read_shift(4)]}function $1e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function q1e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function V1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function z1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function H1e(e){return e.l+=4,[0,0]}var F6={1:{n:"PtgExp",f:d1e},2:{n:"PtgTbl",f:E1e},3:{n:"PtgAdd",f:Xs},4:{n:"PtgSub",f:Xs},5:{n:"PtgMul",f:Xs},6:{n:"PtgDiv",f:Xs},7:{n:"PtgPower",f:Xs},8:{n:"PtgConcat",f:Xs},9:{n:"PtgLt",f:Xs},10:{n:"PtgLe",f:Xs},11:{n:"PtgEq",f:Xs},12:{n:"PtgGe",f:Xs},13:{n:"PtgGt",f:Xs},14:{n:"PtgNe",f:Xs},15:{n:"PtgIsect",f:Xs},16:{n:"PtgUnion",f:Xs},17:{n:"PtgRange",f:Xs},18:{n:"PtgUplus",f:Xs},19:{n:"PtgUminus",f:Xs},20:{n:"PtgPercent",f:Xs},21:{n:"PtgParen",f:Xs},22:{n:"PtgMissArg",f:Xs},23:{n:"PtgStr",f:p1e},26:{n:"PtgSheet",f:$1e},27:{n:"PtgEndSheet",f:q1e},28:{n:"PtgErr",f:u1e},29:{n:"PtgBool",f:f1e},30:{n:"PtgInt",f:h1e},31:{n:"PtgNum",f:m1e},32:{n:"PtgArray",f:Kye},33:{n:"PtgFunc",f:i1e},34:{n:"PtgFuncVar",f:o1e},35:{n:"PtgName",f:b1e},36:{n:"PtgRef",f:n1e},37:{n:"PtgArea",f:zye},38:{n:"PtgMemArea",f:N1e},39:{n:"PtgMemErr",f:k1e},40:{n:"PtgMemNoMem",f:_1e},41:{n:"PtgMemFunc",f:w1e},42:{n:"PtgRefErr",f:S1e},43:{n:"PtgAreaErr",f:Wye},44:{n:"PtgRefN",f:a1e},45:{n:"PtgAreaN",f:Yye},46:{n:"PtgMemAreaN",f:V1e},47:{n:"PtgMemNoMemN",f:z1e},57:{n:"PtgNameX",f:y1e},58:{n:"PtgRef3d",f:s1e},59:{n:"PtgArea3d",f:Hye},60:{n:"PtgRefErr3d",f:C1e},61:{n:"PtgAreaErr3d",f:Gye},255:{}},W1e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},G1e={1:{n:"PtgElfLel",f:wH},2:{n:"PtgElfRw",f:R1e},3:{n:"PtgElfCol",f:D1e},6:{n:"PtgElfRwV",f:F1e},7:{n:"PtgElfColV",f:I1e},10:{n:"PtgElfRadical",f:P1e},11:{n:"PtgElfRadicalS",f:M1e},13:{n:"PtgElfColS",f:A1e},15:{n:"PtgElfColSV",f:T1e},16:{n:"PtgElfRadicalLel",f:O1e},25:{n:"PtgList",f:B1e},29:{n:"PtgSxName",f:U1e},255:{}},Y1e={0:{n:"PtgAttrNoop",f:H1e},1:{n:"PtgAttrSemi",f:e1e},2:{n:"PtgAttrIf",f:Jye},4:{n:"PtgAttrChoose",f:Xye},8:{n:"PtgAttrGoto",f:Qye},16:{n:"PtgAttrSum",f:c1e},32:{n:"PtgAttrBaxcel",f:R6},33:{n:"PtgAttrBaxcel",f:R6},64:{n:"PtgAttrSpace",f:t1e},65:{n:"PtgAttrSpaceSemi",f:r1e},128:{n:"PtgAttrIfError",f:Zye},255:{}};function s1(e,t,r,n){if(n.biff<8)return Do(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=g1e(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=v1e(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Do(e,t)),i}function i1(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=F6[i]||F6[W1e[i]],(i===24||i===25)&&(s=(i===24?G1e:Y1e)[e[e.l+1]]),!s||!s.f?Do(e,t):o.push([s.n,s.f(e,t,r)]);return o}function K1e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var X1e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Q1e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function SH(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function L6(e,t,r){var n=SH(e,t,r);return n=="#REF"?n:Q1e(n,r)}function vo(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,h=0,m=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,C=e[0].length;y<C;++y){var N=e[0][y];switch(N[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=js(" ",e[0][g][1][1]);break;case 1:b=js("\r",e[0][g][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+b,g=-1}l.push(d+X1e[N[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Bb(N[1][1],o,s),l.push(Ub(u,i));break;case"PtgRefN":u=r?Bb(N[1][1],r,s):N[1][1],l.push(Ub(u,i));break;case"PtgRef3d":h=N[1][1],u=Bb(N[1][2],o,s),v=L6(n,h,s),l.push(v+"!"+Ub(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=N[1][0],S=N[1][1];k||(k=0),k&=127;var D=k==0?[]:l.slice(-k);l.length-=k,S==="User"&&(S=D.shift()),l.push(S+"("+D.join(",")+")");break;case"PtgBool":l.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(N[1]);break;case"PtgNum":l.push(String(N[1]));break;case"PtgStr":l.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(N[1]);break;case"PtgAreaN":p=f6(N[1][1],r?{s:r}:o,s),l.push(Q_(p,s));break;case"PtgArea":p=f6(N[1][1],o,s),l.push(Q_(p,s));break;case"PtgArea3d":h=N[1][1],p=N[1][2],v=L6(n,h,s),l.push(v+"!"+Q_(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=N[1][2];var E=(n.names||[])[m-1]||(n[0]||[])[m],T=E?E.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var A=N[1][1];m=N[1][2];var L;if(s.biff<=5)A<0&&(A=-A),n[A]&&(L=n[A][m]);else{var P="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][m]&&n[A][m].itab>0&&(P=n.SheetNames[n[A][m].itab-1]+"!"):P=n.SheetNames[m-1]+"!"),n[A]&&n[A][m])P+=n[A][m].Name;else if(n[0]&&n[0][m])P+=n[0][m].Name;else{var O=(SH(n,A,s)||"").split(";;");O[m-1]?P=O[m-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var J="(",W=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:J=js(" ",e[0][g][1][1])+J;break;case 3:J=js("\r",e[0][g][1][1])+J;break;case 4:W=js(" ",e[0][g][1][1])+W;break;case 5:W=js("\r",e[0][g][1][1])+W;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(J+l.pop()+W);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var re={c:r.c,r:r.r};if(n.sharedf[an(u)]){var U=n.sharedf[an(u)];l.push(vo(U,o,re,n,s))}else{var Q=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(vo(d[1],o,re,n,s)),Q=!0;break}Q||l.push(N[1])}break;case"PtgArray":l.push("{"+K1e(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var B=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&B.indexOf(e[0][y][0])==-1){N=e[0][g];var te=!0;switch(N[1][0]){case 4:te=!1;case 0:b=js(" ",N[1][1]);break;case 5:te=!1;case 1:b=js("\r",N[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}l.push((te?b:"")+l.pop()+(te?"":b)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function J1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Do(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function Z1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Do(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function eje(e,t,r,n){var s=e.l+t,i=i1(e,n,r),o;return s!==e.l&&(o=s1(e,s-e.l,i,r)),[i,o]}function tje(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=i1(e,i,r);return i==65535?[[],Do(e,t-2)]:(t!==i+2&&(s=s1(e,n-i-2,o,r)),[o,s])}function rje(e){var t;if($h(e,e.l+6)!==65535)return[No(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function nje(e){if(e==null){var t=Ut(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Sx(e);return Sx(0)}function rE(e,t,r){var n=e.l+t,s=Ju(e);r.biff==2&&++e.l;var i=rje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Z1e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function aje(e,t,r,n,s){var i=kx(t,r,s),o=nje(e.v),l=Ut(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Ut(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var h=ki([i,o,l,d]);return h}function NS(e,t,r){var n=e.read_shift(4),s=i1(e,n,r),i=e.read_shift(4),o=i>0?s1(e,i,s,r):null;return[s,o]}var sje=NS,wS=NS,ije=NS,oje=NS,lje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},CH={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function B6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function dje(e){var t="of:="+e.replace($4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function nE(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function uje(e){return e.replace(/\./,"!")}var qb={},ov={},Vb=typeof Map<"u";function z4(e,t,r){var n=0,s=e.length;if(r){if(Vb?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Vb?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(Vb?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function SS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(bo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=gy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Fw(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function ux(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function tp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Wh(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function kH(e,t,r,n,s,i){try{n.cellNF&&(e.z=tn[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(tn[t]==null&&Wh(lxe[t]||"General",t),e.t==="e")e.w=e.w||vf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v);else if(e.t==="d"){var o=hi(e.v);(o|0)===o?e.w=o.toString(10):e.w=uy(o)}else{if(e.v===void 0)return"";e.w=Nx(e.v,ov)}else e.t==="d"?e.w=Gc(t,hi(e.v),ov):e.w=Gc(t,e.v,ov)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Rw(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Rw(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function hje(e,t,r){if(e&&e["!ref"]){var n=Yn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function fje(e,t){var r=Yn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=yn(r))}var mje=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,pje=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,xje=/<(?:\w:)?hyperlink [^>]*>/mg,vje=/"(\w*:\w*)"/,gje=/<(?:\w:)?col\b[^>]*[\/]?>/g,bje=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,yje=/<(?:\w:)?pageMargins[^>]*\/>/g,_H=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,jje=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Nje=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function wje(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(pje);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var m=d.match(_H);m?H4(m[0],l,s,r):(m=d.match(jje))&&Cje(m[0],m[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=d.slice(p,p+50).match(vje);v&&fje(l,v[1])}var g=d.match(Nje);g&&g[1]&&Lje(g[1],s);var b=[];if(t.cellStyles){var y=d.match(gje);y&&Pje(b,y)}h&&$je(h[1],l,t,c,i,o);var C=u.match(bje);C&&(l["!autofilter"]=Mje(C[0]));var N=[],k=u.match(mje);if(k)for(p=0;p!=k.length;++p)N[p]=Yn(k[p].slice(k[p].indexOf('"')+1));var S=u.match(xje);S&&Aje(l,S,n);var D=u.match(yje);if(D&&(l["!margins"]=Tje(on(D[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=yn(c)),t.sheetRows>0&&l["!ref"]){var E=Yn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=yn(E))}return b.length>0&&(l["!cols"]=b),N.length>0&&(l["!merges"]=N),l}function Sje(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+yn(e[r])+'"/>';return t+"</mergeCells>"}function H4(e,t,r,n){var s=on(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Gn(Ca(s.codeName)))}function Cje(e,t,r,n,s){H4(e.slice(0,e.indexOf(">")),r,n,s)}function kje(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Pu(ba(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+xr("outlinePr",null,d)}!i&&!l||(s[s.length]=xr("sheetPr",l,o))}var _je=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Eje=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Dje(e){var t={sheet:1};return _je.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Eje.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=L4(e.password).toString(16).toUpperCase()),xr("sheetProtection",null,t)}function Aje(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=on(Ca(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Gn(i.location))):(i.Target="#"+Gn(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Yn(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=an({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function Tje(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Ije(e){return ux(e),xr("pageMargins",null,e)}function Pje(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=on(t[n],!0);s.hidden&&(s.hidden=Ua(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,B4(s.width)),Bm(s);i<=o;)e[i++]=Va(s)}}function Oje(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=xr("col",null,SS(s,n)));return r[r.length]="</cols>",r.join("")}function Mje(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Rje(e,t,r,n){var s=typeof e.ref=="string"?e.ref:yn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=ml(s);o.s.r==o.e.r&&(o.e.r=ml(t["!ref"]).e.r,s=yn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),xr("autoFilter",null,{ref:s})}var Fje=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Lje(e,t){t.Views||(t.Views=[{}]),(e.match(Fje)||[]).forEach(function(r,n){var s=on(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ua(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Bje(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),xr("sheetViews",xr("sheetView",null,s),{})}function Uje(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=vf[e.v];break;case"d":n&&n.cellDates?s=qa(e.v,-1).toISOString():(e=Va(e),e.t="n",s=""+(e.v=hi(qa(e.v)))),typeof e.z>"u"&&(e.z=tn[14]);break;default:s=e.v;break}var l=Xi("v",ba(s)),c={r:t},d=tp(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Xi("v",""+z4(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=xr("f",ba(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),xr("c",l,c)}var $je=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=hy("v"),o=hy("f");return function(c,d,u,h,m,p){for(var v=0,g="",b=[],y=[],C=0,N=0,k=0,S="",D,E,T=0,A=0,L,P,O=0,J=0,W=Array.isArray(p.CellXf),re,U=[],Q=[],B=Array.isArray(d),te=[],X={},ce=!1,M=!!u.sheetStubs,q=c.split(t),z=0,K=q.length;z!=K;++z){g=q[z].trim();var ee=g.length;if(ee!==0){var ne=0;e:for(v=0;v<ee;++v)switch(g[v]){case">":if(g[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(E=on(g.slice(ne,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,u.sheetRows&&u.sheetRows<T)continue;X={},ce=!1,E.ht&&(ce=!0,X.hpt=parseFloat(E.ht),X.hpx=Iv(X.hpt)),E.hidden=="1"&&(ce=!0,X.hidden=!0),E.outlineLevel!=null&&(ce=!0,X.level=+E.outlineLevel),ce&&(te[T-1]=X)}break;case"<":ne=v;break}if(ne>=v)break;if(E=on(g.slice(ne,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,!(u.sheetRows&&u.sheetRows<T)){h.s.r>T-1&&(h.s.r=T-1),h.e.r<T-1&&(h.e.r=T-1),u&&u.cellStyles&&(X={},ce=!1,E.ht&&(ce=!0,X.hpt=parseFloat(E.ht),X.hpx=Iv(X.hpt)),E.hidden=="1"&&(ce=!0,X.hidden=!0),E.outlineLevel!=null&&(ce=!0,X.level=+E.outlineLevel),ce&&(te[T-1]=X)),b=g.slice(v).split(e);for(var ae=0;ae!=b.length&&b[ae].trim().charAt(0)=="<";++ae);for(b=b.slice(ae),v=0;v!=b.length;++v)if(g=b[v].trim(),g.length!==0){if(y=g.match(r),C=v,N=0,k=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(C=0,S=y[1],N=0;N!=S.length&&!((k=S.charCodeAt(N)-64)<1||k>26);++N)C=26*C+k;--C,A=C}else++A;for(N=0;N!=g.length&&g.charCodeAt(N)!==62;++N);if(++N,E=on(g.slice(0,N),!0),E.r||(E.r=an({r:T-1,c:A})),S=g.slice(N),D={t:""},(y=S.match(i))!=null&&y[1]!==""&&(D.v=Gn(y[1])),u.cellFormula){if((y=S.match(o))!=null&&y[1]!==""){if(D.f=Gn(Ca(y[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=M6(D.f)),y[0].indexOf('t="array"')>-1)D.F=(S.match(s)||[])[1],D.F.indexOf(":")>-1&&U.push([Yn(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){P=on(y[0]);var ie=Gn(Ca(y[1]));u.xlfn||(ie=M6(ie)),Q[parseInt(P.si,10)]=[P,ie,E.r]}}else(y=S.match(/<f[^>]*\/>/))&&(P=on(y[0]),Q[P.si]&&(D.f=Fye(Q[P.si][1],Q[P.si][2],E.r)));var G=ds(E.r);for(N=0;N<U.length;++N)G.r>=U[N][0].s.r&&G.r<=U[N][0].e.r&&G.c>=U[N][0].s.c&&G.c<=U[N][0].e.c&&(D.F=U[N][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(M)D.t="z";else continue;else D.t=E.t||"n";switch(h.s.c>A&&(h.s.c=A),h.e.c<A&&(h.e.c=A),D.t){case"n":if(D.v==""||D.v==null){if(!M)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!M)continue;D.t="z"}else L=qb[parseInt(D.v,10)],D.v=L.t,D.r=L.r,u.cellHTML&&(D.h=L.h);break;case"str":D.t="s",D.v=D.v!=null?Ca(D.v):"",u.cellHTML&&(D.h=w4(D.v));break;case"inlineStr":y=S.match(n),D.t="s",y!=null&&(L=F4(y[1]))?(D.v=L.t,u.cellHTML&&(D.h=L.h)):D.v="";break;case"b":D.v=Ua(D.v);break;case"d":u.cellDates?D.v=qa(D.v,1):(D.v=hi(qa(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=Dz[D.v];break}if(O=J=0,re=null,W&&E.s!==void 0&&(re=p.CellXf[E.s],re!=null&&(re.numFmtId!=null&&(O=re.numFmtId),u.cellStyles&&re.fillId!=null&&(J=re.fillId))),kH(D,O,J,u,m,p),u.cellDates&&W&&D.t=="n"&&sg(tn[O])&&(D.t="d",D.v=yS(D.v)),E.cm&&u.xlmeta){var de=(u.xlmeta.Cell||[])[+E.cm-1];de&&de.type=="XLDAPR"&&(D.D=!0)}if(B){var Y=ds(E.r);d[Y.r]||(d[Y.r]=[]),d[Y.r][Y.c]=D}else d[E.r]=D}}}}te.length>0&&(d["!rows"]=te)}}();function qje(e,t,r,n){var s=[],i=[],o=Yn(e["!ref"]),l="",c,d="",u=[],h=0,m=0,p=e["!rows"],v=Array.isArray(e),g={r:d},b,y=-1;for(m=o.s.c;m<=o.e.c;++m)u[m]=cs(m);for(h=o.s.r;h<=o.e.r;++h){for(i=[],d=$s(h),m=o.s.c;m<=o.e.c;++m){c=u[m]+d;var C=v?(e[h]||[])[m]:e[c];C!==void 0&&(l=Uje(C,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[h])&&(g={r:d},p&&p[h]&&(b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),s[s.length]=xr("row",i.join(""),g))}if(p)for(;h<p.length;++h)p&&p[h]&&(g={r:h+1},b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),s[s.length]=xr("row","",g));return s.join("")}function EH(e,t,r,n){var s=[Vs,xr("worksheet",null,{xmlns:Lx[0],"xmlns:r":ci.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Yn(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=yn(u)}n||(n={}),c["!comments"]=[];var h=[];kje(c,r,e,t,s),s[s.length]=xr("dimension",null,{ref:d}),s[s.length]=Bje(c,t,e,r),t.sheetFormat&&(s[s.length]=xr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Oje(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=qje(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=Dje(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Rje(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Sje(c["!merges"]));var m=-1,p,v=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=va(n,-1,ba(g[1].Target).replace(/#.*$/,""),Tn.HLINK),p["r:id"]="rId"+v),(m=g[1].Target.indexOf("#"))>-1&&(p.location=ba(g[1].Target.slice(m+1))),g[1].Tooltip&&(p.tooltip=ba(g[1].Tooltip)),s[s.length]=xr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Ije(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Xi("ignoredErrors",xr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(v=va(n,-1,"../drawings/drawing"+(e+1)+".xml",Tn.DRAW),s[s.length]=xr("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=h),c["!comments"].length>0&&(v=va(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Tn.VML),s[s.length]=xr("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Vje(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function zje(e,t,r){var n=Ut(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=by(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,m=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var v=Array.isArray(r)?(r[d.r]||[])[d.c]:r[an(d)];v&&(h<0&&(h=p),m=p)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,m))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Hje(e,t,r,n){var s=zje(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&nr(e,0,s)}var Wje=qx,Gje=lg;function Yje(){}function Kje(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Jxe(e),r}function Xje(e,t,r){r==null&&(r=Ut(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Pw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Sz(e,r),r.slice(0,r.l)}function Qje(e){var t=Jc(e);return[t]}function Jje(e,t,r){return r==null&&(r=Ut(8)),Bx(t,r)}function Zje(e){var t=Ux(e);return[t]}function eNe(e,t,r){return r==null&&(r=Ut(4)),$x(t,r)}function tNe(e){var t=Jc(e),r=e.read_shift(1);return[t,r,"b"]}function rNe(e,t,r){return r==null&&(r=Ut(9)),Bx(t,r),r.write_shift(1,e.v?1:0),r}function nNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"b"]}function aNe(e,t,r){return r==null&&(r=Ut(5)),$x(t,r),r.write_shift(1,e.v?1:0),r}function sNe(e){var t=Jc(e),r=e.read_shift(1);return[t,r,"e"]}function iNe(e,t,r){return r==null&&(r=Ut(9)),Bx(t,r),r.write_shift(1,e.v),r}function oNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"e"]}function lNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function cNe(e){var t=Jc(e),r=e.read_shift(4);return[t,r,"s"]}function dNe(e,t,r){return r==null&&(r=Ut(12)),Bx(t,r),r.write_shift(4,t.v),r}function uNe(e){var t=Ux(e),r=e.read_shift(4);return[t,r,"s"]}function hNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),r.write_shift(4,t.v),r}function fNe(e){var t=Jc(e),r=No(e);return[t,r,"n"]}function mNe(e,t,r){return r==null&&(r=Ut(16)),Bx(t,r),Sx(e.v,r),r}function DH(e){var t=Ux(e),r=No(e);return[t,r,"n"]}function pNe(e,t,r){return r==null&&(r=Ut(12)),$x(t,r),Sx(e.v,r),r}function xNe(e){var t=Jc(e),r=I4(e);return[t,r,"n"]}function vNe(e,t,r){return r==null&&(r=Ut(12)),Bx(t,r),Cz(e.v,r),r}function gNe(e){var t=Ux(e),r=I4(e);return[t,r,"n"]}function bNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),Cz(e.v,r),r}function yNe(e){var t=Jc(e),r=D4(e);return[t,r,"is"]}function jNe(e){var t=Jc(e),r=Eo(e);return[t,r,"str"]}function NNe(e,t,r){return r==null&&(r=Ut(12+4*e.v.length)),Bx(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wNe(e){var t=Ux(e),r=Eo(e);return[t,r,"str"]}function SNe(e,t,r){return r==null&&(r=Ut(8+4*e.v.length)),$x(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function CNe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function kNe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function _Ne(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=No(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function ENe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=Eo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}var DNe=qx,ANe=lg;function TNe(e,t){return t==null&&(t=Ut(4)),t.write_shift(4,e),t}function INe(e,t){var r=e.l+t,n=qx(e),s=A4(e),i=Eo(e),o=Eo(e),l=Eo(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function PNe(e,t){var r=Ut(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));lg({s:ds(e[0]),e:ds(e[0])},r),T4("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return _i(s||"",r),_i(e[1].Tooltip||"",r),_i("",r),r.slice(0,r.l)}function ONe(){}function MNe(e,t,r){var n=e.l+t,s=kz(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=sje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function RNe(e,t,r){var n=e.l+t,s=qx(e),i=[s];if(r.cellFormula){var o=oje(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function FNe(e,t,r){r==null&&(r=Ut(18));var n=SS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var AH=["left","right","top","bottom","header","footer"];function LNe(e){var t={};return AH.forEach(function(r){t[r]=No(e)}),t}function BNe(e,t){return t==null&&(t=Ut(6*8)),ux(e),AH.forEach(function(r){Sx(e[r],t)}),t}function UNe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function $Ne(e,t,r){r==null&&(r=Ut(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function qNe(e){var t=Ut(24);return t.write_shift(4,4),t.write_shift(4,1),lg(e,t),t}function VNe(e,t){return t==null&&(t=Ut(16*4+2)),t.write_shift(2,e.password?L4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function zNe(){}function HNe(){}function WNe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,p,v,g,b,y,C,N,k,S,D=[];l.biff=12,l["!row"]=0;var E=0,T=!1,A=[],L={},P=l.supbooks||s.supbooks||[[]];if(P.sharedf=L,P.arrayf=A,P.SheetNames=s.SheetNames||s.Sheets.map(function(B){return B.name}),!l.supbooks&&(l.supbooks=P,s.Names))for(var O=0;O<s.Names.length;++O)P[0][O+1]=s.Names[O];var J=[],W=[],re=!1;yy[16]={n:"BrtShortReal",f:DH};var U;if(xf(e,function(te,X,ce){if(!m)switch(ce){case 148:d=te;break;case 0:p=te,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),k=$s(b=p.r),l["!row"]=p.r,(te.hidden||te.hpt||te.level!=null)&&(te.hpt&&(te.hpx=Iv(te.hpt)),W[te.r]=te);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:te[2]},te[2]){case"n":v.v=te[1];break;case"s":N=qb[te[1]],v.v=N.t,v.r=N.r;break;case"b":v.v=!!te[1];break;case"e":v.v=te[1],l.cellText!==!1&&(v.w=vf[v.v]);break;case"str":v.t="s",v.v=te[1];break;case"is":v.t="s",v.v=te[1].t;break}if((g=o.CellXf[te[0].iStyleRef])&&kH(v,g.numFmtId,null,l,i,o),y=te[0].c==-1?y+1:te[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,l.cellFormula){for(T=!1,E=0;E<A.length;++E){var M=A[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(v.F=yn(M[0]),T=!0)}!T&&te.length>3&&(v.f=te[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),l.cellDates&&g&&v.t=="n"&&sg(tn[g.numFmtId])){var q=Qp(v.v);q&&(v.t="d",v.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}U&&(U.type=="XLDAPR"&&(v.D=!0),U=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;v={t:"z",v:void 0},y=te[0].c==-1?y+1:te[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),U&&(U.type=="XLDAPR"&&(v.D=!0),U=void 0);break;case 176:D.push(te);break;case 49:U=((l.xlmeta||{}).Cell||[])[te-1];break;case 494:var z=n["!id"][te.relId];for(z?(te.Target=z.Target,te.loc&&(te.Target+="#"+te.loc),te.Rel=z):te.relId==""&&(te.Target="#"+te.loc),b=te.rfx.s.r;b<=te.rfx.e.r;++b)for(y=te.rfx.s.c;y<=te.rfx.e.c;++y)l.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=te):(C=an({c:y,r:b}),c[C]||(c[C]={t:"z",v:void 0}),c[C].l=te);break;case 426:if(!l.cellFormula)break;A.push(te),S=l.dense?c[b][y]:c[cs(y)+k],S.f=vo(te[1],u,{r:p.r,c:y},P,l),S.F=yn(te[0]);break;case 427:if(!l.cellFormula)break;L[an(te[0].s)]=te[1],S=l.dense?c[b][y]:c[cs(y)+k],S.f=vo(te[1],u,{r:p.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;te.e>=te.s;)J[te.e--]={width:te.w/256,hidden:!!(te.flags&1),level:te.level},re||(re=!0,B4(te.w/256)),Bm(J[te.e+1]);break;case 161:c["!autofilter"]={ref:yn(te)};break;case 476:c["!margins"]=te;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),te.name&&(s.Sheets[r].CodeName=te.name),(te.above||te.left)&&(c["!outline"]={above:te.above,left:te.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),te.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!X.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+ce.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=yn(d||u)),l.sheetRows&&c["!ref"]){var Q=Yn(c["!ref"]);l.sheetRows<=+Q.e.r&&(Q.e.r=l.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=yn(Q))}return D.length>0&&(c["!merges"]=D),J.length>0&&(c["!cols"]=J),W.length>0&&(c["!rows"]=W),c}function GNe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||tn[14],t.v=hi(qa(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=tp(s.cellXfs,t,s),t.l&&i["!links"].push([an(c),t.l]),t.c&&i["!comments"].push([an(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=z4(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?nr(e,18,hNe(t,c)):nr(e,7,dNe(t,c))):(c.t="str",o?nr(e,17,SNe(t,c)):nr(e,6,NNe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?nr(e,13,bNe(t,c)):nr(e,2,vNe(t,c)):o?nr(e,16,pNe(t,c)):nr(e,5,mNe(t,c)),!0;case"b":return c.t="b",o?nr(e,15,aNe(t,c)):nr(e,4,rNe(t,c)),!0;case"e":return c.t="e",o?nr(e,14,lNe(t,c)):nr(e,3,iNe(t,c)),!0}return o?nr(e,12,eNe(t,c)):nr(e,1,Jje(t,c)),!0}function YNe(e,t,r,n){var s=Yn(t["!ref"]||"A1"),i,o="",l=[];nr(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=$s(u),Hje(e,t,s,u);var h=!1;if(u<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){u===s.s.r&&(l[m]=cs(m)),i=l[m]+o;var p=c?(t[u]||[])[m]:t[i];if(!p){h=!1;continue}h=GNe(e,p,u,m,n,t,h)}}nr(e,146)}function KNe(e,t){!t||!t["!merges"]||(nr(e,177,TNe(t["!merges"].length)),t["!merges"].forEach(function(r){nr(e,176,ANe(r))}),nr(e,178))}function XNe(e,t){!t||!t["!cols"]||(nr(e,390),t["!cols"].forEach(function(r,n){r&&nr(e,60,FNe(n,r))}),nr(e,391))}function QNe(e,t){!t||!t["!ref"]||(nr(e,648),nr(e,649,qNe(Yn(t["!ref"]))),nr(e,650))}function JNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=va(r,-1,n[1].Target.replace(/#.*$/,""),Tn.HLINK);nr(e,494,PNe(n,s))}}),delete t["!links"]}function ZNe(e,t,r,n){if(t["!comments"].length>0){var s=va(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Tn.VML);nr(e,551,T4("rId"+s)),t["!legacy"]=s}}function ewe(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:yn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=ml(i);l.s.r==l.e.r&&(l.e.r=ml(t["!ref"]).e.r,i=yn(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),nr(e,161,lg(Yn(i))),nr(e,162)}}function twe(e,t,r){nr(e,133),nr(e,137,$Ne(t,r)),nr(e,138),nr(e,134)}function rwe(e,t){t["!protect"]&&nr(e,535,VNe(t["!protect"]))}function nwe(e,t,r,n){var s=hl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Yn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],nr(s,129),(r.vbaraw||o["!outline"])&&nr(s,147,Xje(l,o["!outline"])),nr(s,148,Gje(c)),twe(s,o,r.Workbook),XNe(s,o),YNe(s,o,e,t),rwe(s,o),ewe(s,o,r,e),KNe(s,o),JNe(s,o,n),o["!margins"]&&nr(s,476,BNe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&QNe(s,o),ZNe(s,o,e,n),nr(s,130),s.end()}function awe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Gn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function swe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=awe(h);u.s.r=u.s.c=0,u.e.c=l,d=cs(l),m[0].forEach(function(p,v){o[d+$s(v)]={t:"n",v:p,z:m[1]},c=v}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=yn(u)),o}function iwe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(_H);return l&&H4(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function owe(e,t){e.l+=10;var r=Eo(e);return{name:r}}function lwe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return xf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var W4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],cwe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],dwe=[],uwe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function U6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ua(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function $6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function TH(e){$6(e.WBProps,W4),$6(e.CalcPr,uwe),U6(e.WBView,cwe),U6(e.Sheets,dwe),ov.date1904=Ua(e.WBProps.date1904)}function hwe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var fwe="][*?/\\".split("");function IH(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return fwe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function mwe(e,t,r){e.forEach(function(n,s){IH(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function pwe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];mwe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)hje(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var xwe=/<\w+:workbook/;function vwe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(To,function(c,d){var u=on(c);switch(Qu(u[0])){case"<?xml":break;case"<workbook":c.match(xwe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":W4.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=Ua(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=Ca(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Gn(Ca(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ca(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Ua(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Gn(Ca(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Lx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return TH(r),r}function PH(e){var t=[Vs];t[t.length]=xr("workbook",null,{xmlns:Lx[0],"xmlns:r":ci.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(W4.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=xr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:ba(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=xr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=xr("definedName",ba(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function gwe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=vD(e),r.name=Eo(e),r}function bwe(e,t){return t||(t=Ut(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),T4(e.strRelID,t),_i(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function ywe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Eo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function jwe(e,t){t||(t=Ut(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Sz(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Nwe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function wwe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Zxe(e),o=ije(e,0,r),l=A4(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Swe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],yy[16]={n:"BrtFRTArchID$",f:Nwe},xf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=vo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),TH(r),r.Names=i,r.supbooks=o,r}function Cwe(e,t){nr(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};nr(e,156,bwe(s))}nr(e,144)}function kwe(e,t){t||(t=Ut(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return _i("SheetJS",t),_i(kw.version,t),_i(kw.version,t),_i("7262",t),t.length>t.l?t.slice(0,t.l):t}function _we(e,t){t||(t=Ut(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Ewe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(nr(e,135),nr(e,158,_we(s)),nr(e,136))}}function Dwe(e,t){var r=hl();return nr(r,131),nr(r,128,kwe()),nr(r,153,jwe(e.Workbook&&e.Workbook.WBProps||null)),Ewe(r,e),Cwe(r,e),nr(r,132),r.end()}function Awe(e,t,r){return t.slice(-4)===".bin"?Swe(e,r):vwe(e,r)}function Twe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?WNe(e,n,r,s,i,o,l):wje(e,n,r,s,i,o,l)}function Iwe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?lwe(e,n,r,s,i):iwe(e,n,r,s,i)}function Pwe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Mye():Rye()}function Owe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Pye():Oye()}function Mwe(e,t,r,n){return t.slice(-4)===".bin"?Abe(e,r,n):gbe(e,r,n)}function Rwe(e,t,r){return fH(e,r)}function Fwe(e,t,r){return t.slice(-4)===".bin"?Fge(e,r):Oge(e,r)}function Lwe(e,t,r){return t.slice(-4)===".bin"?Eye(e,r):bye(e,r)}function Bwe(e,t,r){return t.slice(-4)===".bin"?xye(e):mye(e)}function Uwe(e,t,r,n){return r.slice(-4)===".bin"?vye(e,t,r,n):void 0}function $we(e,t,r){return t.slice(-4)===".bin"?uye(e,t,r):fye(e,t,r)}function qwe(e,t,r){return(t.slice(-4)===".bin"?Dwe:PH)(e)}function Vwe(e,t,r,n,s){return(t.slice(-4)===".bin"?nwe:EH)(e,r,n,s)}function zwe(e,t,r){return(t.slice(-4)===".bin"?Ube:uH)(e,r)}function Hwe(e,t,r){return(t.slice(-4)===".bin"?Uge:nH)(e,r)}function Wwe(e,t,r){return(t.slice(-4)===".bin"?Dye:xH)(e)}function Gwe(e){return(e.slice(-4)===".bin"?hye:mH)()}var OH=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,MH=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function jd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(OH),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(MH),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Ywe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(OH),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(MH),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var zb;function Kwe(e,t){var r=zb[e]||Gn(e);return r==="General"?Nx(t):Gc(r,t)}function Xwe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ua(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Gn(t)]=s}function Qwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||vf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=Kwe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=zb[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&sg(n)){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Jwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=dbe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Zwe(e,t,r,n,s,i,o,l,c,d){var u="General",h=n.StyleID,m={};d=d||{};var p=[],v=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&p.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=a6(Gn(e)),n.v=e.indexOf("<")>-1?Gn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(qa(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Gn(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Dz[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=a6(t||e));break}if(Qwe(n,u,d),d.cellFormula!==!1)if(n.Formula){var g=Gn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=iv(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=iv("RC:RC",s):n.ArrayRange&&(n.F=iv(n.ArrayRange,s),c.push([Yn(n.F),n.F]))}else for(v=0;v<c.length;++v)s.r>=c[v][0].s.r&&s.r<=c[v][0].e.r&&s.c>=c[v][0].s.c&&s.c<=c[v][0].e.c&&(n.F=c[v][1]);d.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function e2e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function aE(e,t){var r=t||{};ig();var n=Ab(S4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ca(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Va(r);return o.type="string",Tv.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){s.indexOf("<"+Ne)>=0&&(i=!0)}),i)return B2e(n,r);zb={"General Number":"General","General Date":tn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tn[15],"Short Date":tn[14],"Long Time":tn[19],"Medium Time":tn[18],"Short Time":tn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tn[2],Standard:tn[4],Percent:tn[10],Scientific:tn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],m=r.dense?[]:{},p="",v={},g={},b=jd('<Data ss:Type="String">'),y=0,C=0,N=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},D={},E="",T=0,A=[],L={},P={},O=0,J=[],W=[],re={},U=[],Q,B=!1,te=[],X=[],ce={},M=0,q=0,z={Sheets:[],WBProps:{date1904:!1}},K={};my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ee="";l=my.exec(n);)switch(l[3]=(ee=l[3]).toLowerCase()){case"data":if(ee=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Zwe(n.slice(y,l.index),E,b,c[c.length-1][0]=="comment"?re:v,{c:C,r:N},S,U[C],g,te,r):(E="",b=jd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(W.length>0&&(v.c=W),(!r.sheetRows||r.sheetRows>N)&&v.v!==void 0&&(r.dense?(m[N]||(m[N]=[]),m[N][C]=v):m[cs(C)+$s(N)]=v),v.HRef&&(v.l={Target:Gn(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=C+(parseInt(v.MergeAcross,10)|0),q=N+(parseInt(v.MergeDown,10)|0),A.push({s:{c:C,r:N},e:{c:M,r:q}})),!r.sheetStubs)v.MergeAcross?C=M+1:++C;else if(v.MergeAcross||v.MergeDown){for(var ne=C;ne<=M;++ne)for(var ae=N;ae<=q;++ae)(ne>C||ae>N)&&(r.dense?(m[ae]||(m[ae]=[]),m[ae][ne]={t:"z"}):m[cs(ne)+$s(ae)]={t:"z"});C=M+1}else++C;else v=Ywe(l[0]),v.Index&&(C=+v.Index-1),C<k.s.c&&(k.s.c=C),C>k.e.c&&(k.e.c=C),l[0].slice(-2)==="/>"&&++C,W=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(N<k.s.r&&(k.s.r=N),N>k.e.r&&(k.e.r=N),l[0].slice(-2)==="/>"&&(g=jd(l[0]),g.Index&&(N=+g.Index-1)),C=0,++N):(g=jd(l[0]),g.Index&&(N=+g.Index-1),ce={},(g.AutoFitHeight=="0"||g.Height)&&(ce.hpx=parseInt(g.Height,10),ce.hpt=by(ce.hpx),X[N]=ce),g.Hidden=="1"&&(ce.hidden=!0,X[N]=ce));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(m["!ref"]=yn(k),r.sheetRows&&r.sheetRows<=k.e.r&&(m["!fullref"]=m["!ref"],k.e.r=r.sheetRows-1,m["!ref"]=yn(k))),A.length&&(m["!merges"]=A),U.length>0&&(m["!cols"]=U),X.length>0&&(m["!rows"]=X),u[p]=m}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=C=0,c.push([l[3],!1]),d=jd(l[0]),p=Gn(d.Name),m=r.dense?[]:{},A=[],te=[],X=[],K={name:p,Hidden:0},z.Sheets.push(K);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),U=[],B=!1}break;case"style":l[1]==="/"?Jwe(S,D,r):D=jd(l[0]);break;case"numberformat":D.nf=Gn(jd(l[0]).Format||"General"),zb[D.nf]&&(D.nf=zb[D.nf]);for(var ie=0;ie!=392&&tn[ie]!=D.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(tn[ie]==null){Wh(D.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=jd(l[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!B&&Q.wpx>10){B=!0,bo=cH;for(var G=0;G<U.length;++G)U[G]&&Bm(U[G])}B&&Bm(Q),U[Q.Index-1||U.length]=Q;for(var de=0;de<+Q.Span;++de)U[U.length]=Va(Q);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var Y=on(l[0]),oe={Name:Y.Name,Ref:iv(Y.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(oe.Sheet=z.Sheets.length-1),z.Names.push(oe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=jd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?S0e(L,ee,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));e2e(re),W.push(re)}else c.push([l[3],!1]),d=jd(l[0]),re={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Se=jd(l[0]);m["!autofilter"]={ref:iv(Se.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return W6(n,r);var ue=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ue=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ue=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ue=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ue=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":K.Hidden=1;break;case"SheetVeryHidden":K.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+on(l[0]).Margin)||(m["!margins"].header=+on(l[0]).Margin);break;case"footer":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+on(l[0]).Margin)||(m["!margins"].footer=+on(l[0]).Margin);break;case"pagemargins":var se=on(l[0]);m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+se.Top)||(m["!margins"].top=+se.Top),isNaN(+se.Left)||(m["!margins"].left=+se.Left),isNaN(+se.Right)||(m["!margins"].right=+se.Right),isNaN(+se.Bottom)||(m["!margins"].bottom=+se.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ue=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ue=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ue=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ue=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ue=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ue=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ue=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ue=!1}break;case"smarttags":break;default:ue=!1;break}if(ue||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Xwe(P,ee,J,n.slice(O,l.index)):(J=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=u),ye.SheetNames=h,ye.Workbook=z,ye.SSF=Va(tn),ye.Props=L,ye.Custprops=P,ye}function SD(e,t){switch(Y4(t=t||{}),t.type||"base64"){case"base64":return aE(ic(e),t);case"binary":case"buffer":case"file":return aE(e,t);case"array":return aE(Zm(e),t)}}function t2e(e,t){var r=[];return e.Props&&r.push(C0e(e.Props,t)),e.Custprops&&r.push(k0e(e.Props,e.Custprops)),r.join("")}function r2e(){return""}function n2e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(xr("NumberFormat",null,{"ss:Format":ba(tn[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(xr("Style",i.join(""),o))}),xr("Styles",r.join(""))}function RH(e){return xr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+q4(e.Ref,{r:0,c:0})})}function a2e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(RH(s)))}return xr("Names",r.join(""))}function s2e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(RH(l)))}return i.join("")}function i2e(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(xr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(xr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(xr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(xr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Xi("ProtectContents","True")),e["!protect"].objects&&s.push(Xi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Xi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Xi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Xi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":xr("WorksheetOptions",s.join(""),{xmlns:ql.x})}function o2e(e){return e.map(function(t){var r=Exe(t.t||""),n=xr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return xr("Comment",n,{"ss:Author":t.a})}).join("")}function l2e(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+ba(q4(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ds(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=ba(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=ba(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(e.v);break;case"b":h="Boolean",m=e.v?"1":"0";break;case"e":h="Error",m=vf[e.v];break;case"d":h="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||tn[14]);break;case"s":h="String",m=_xe(e.v||"");break}var p=tp(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var v=e.v!=null?m:"",g=e.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=o2e(e.c)),xr("Cell",g,l)}function c2e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Iv(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function d2e(e,t,r,n){if(!e["!ref"])return"";var s=Yn(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,y){Bm(b);var C=!!b.width,N=SS(y,b),k={"ss:Index":y+1};C&&(k["ss:Width"]=vy(N.width)),b.hidden&&(k["ss:Hidden"]="1"),l.push(xr("Column",null,k))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[c2e(d,(e["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>h)&&!(i[o].s.r>d)&&!(i[o].e.c<h)&&!(i[o].e.r<d)){(i[o].s.c!=h||i[o].s.r!=d)&&(m=!0);break}if(!m){var p={r:d,c:h},v=an(p),g=c?(e[d]||[])[h]:e[v];u.push(l2e(g,v,e,t,r,n,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function u2e(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?s2e(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?d2e(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(i2e(i,t,e,r)),n.join("")}function h2e(e,t){t||(t={}),e.SSF||(e.SSF=Va(tn)),e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(t2e(e,t)),r.push(r2e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(xr("Worksheet",u2e(n,t,e),{"ss:Name":ba(e.SheetNames[n])}));return r[2]=n2e(e,t),r[3]=a2e(e),Vs+xr("Workbook",r.join(""),{xmlns:ql.ss,"xmlns:o":ql.o,"xmlns:x":ql.x,"xmlns:ss":ql.ss,"xmlns:dt":ql.dt,"xmlns:html":ql.html})}function f2e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=a0e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=s0e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var m2e=[60,1084,2066,2165,2175];function p2e(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=$h(r,r.l),d=CD[c],u=0;d!=null&&m2e.indexOf(c)>-1;)i=$h(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=CD[c=$h(r,r.l)];var h=ki(o);Gi(h,0);var m=0;h.lens=[];for(var p=0;p<o.length;++p)h.lens.push(m),m+=o[p].length;if(h.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+n;return t.f(h,h.length,s)}function vu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=tn[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||vf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=Gc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&sg(tn[n]||String(n))){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function zj(e,t,r){return{v:e,ixfe:t,t:r}}function x2e(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},h,m="",p,v,g,b,y={},C=[],N,k,S=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},A=function(xe){return xe<8?lx[xe]:xe<64&&D[xe-8]||lx[xe]},L=function(xe,me,De){var Ye=me.XF.data;if(!(!Ye||!Ye.patternType||!De||!De.cellStyles)){me.s={},me.s.patternType=Ye.patternType;var jt;(jt=xy(A(Ye.icvFore)))&&(me.s.fgColor={rgb:jt}),(jt=xy(A(Ye.icvBack)))&&(me.s.bgColor={rgb:jt})}},P=function(xe,me,De){if(!(ce>1)&&!(De.sheetRows&&xe.r>=De.sheetRows)){if(De.cellStyles&&me.XF&&me.XF.data&&L(xe,me,De),delete me.ixfe,delete me.XF,h=xe,m=an(xe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<o.s.r&&(o.s.r=xe.r),xe.c<o.s.c&&(o.s.c=xe.c),xe.r+1>o.e.r&&(o.e.r=xe.r+1),xe.c+1>o.e.c&&(o.e.c=xe.c+1),De.cellFormula&&me.f){for(var Ye=0;Ye<C.length;++Ye)if(!(C[Ye][0].s.c>xe.c||C[Ye][0].s.r>xe.r)&&!(C[Ye][0].e.c<xe.c||C[Ye][0].e.r<xe.r)){me.F=yn(C[Ye][0]),(C[Ye][0].s.c!=xe.c||C[Ye][0].s.r!=xe.r)&&delete me.f,me.f&&(me.f=""+vo(C[Ye][1],o,xe,te,O));break}}De.dense?(s[xe.r]||(s[xe.r]=[]),s[xe.r][xe.c]=me):s[m]=me}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var J,W=[],re=[],U=[],Q=[],B=!1,te=[];te.SheetNames=O.snames,te.sharedf=O.sharedf,te.arrayf=O.arrayf,te.names=[],te.XTI=[];var X=0,ce=0,M=0,q=[],z=[],K;O.codepage=1200,Ed(1200);for(var ee=!1;e.l<e.length-1;){var ne=e.l,ae=e.read_shift(2);if(ae===0&&X===10)break;var ie=e.l===e.length?0:e.read_shift(2),G=CD[ae];if(G&&G.f){if(t.bookSheets&&X===133&&ae!==133)break;if(X=ae,G.r===2||G.r==12){var de=e.read_shift(2);if(ie-=2,!O.enc&&de!==ae&&((de&255)<<8|de>>8)!==ae)throw new Error("rt mismatch: "+de+"!="+ae);G.r==12&&(e.l+=10,ie-=10)}var Y={};if(ae===10?Y=G.f(e,ie,O):Y=p2e(ae,G,e,ie,O),ce==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(ae){case 34:r.opts.Date1904=E.WBProps.date1904=Y;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=Y,!t.password)throw new Error("File is password-protected");if(Y.valid==null)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=Y;break;case 66:var oe=Number(Y);switch(oe){case 21010:oe=1200;break;case 32768:oe=1e4;break;case 32769:oe=1252;break}Ed(O.codepage=oe),ee=!0;break;case 317:O.rrtabid=Y;break;case 25:O.winlocked=Y;break;case 439:r.opts.RefreshAll=Y;break;case 12:r.opts.CalcCount=Y;break;case 16:r.opts.CalcDelta=Y;break;case 17:r.opts.CalcIter=Y;break;case 13:r.opts.CalcMode=Y;break;case 14:r.opts.CalcPrecision=Y;break;case 95:r.opts.CalcSaveRecalc=Y;break;case 15:O.CalcRefMode=Y;break;case 2211:r.opts.FullCalc=Y;break;case 129:Y.fDialog&&(s["!type"]="dialog"),Y.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),Y.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(Y);break;case 430:te.push([Y]),te[te.length-1].XTI=[];break;case 35:case 547:te[te.length-1].push(Y);break;case 24:case 536:K={Name:Y.Name,Ref:vo(Y.rgce,o,null,te,O)},Y.itab>0&&(K.Sheet=Y.itab-1),te.names.push(K),te[0]||(te[0]=[],te[0].XTI=[]),te[te.length-1].push(Y),Y.Name=="_xlnm._FilterDatabase"&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&Y.rgce[0][0][0]=="PtgArea3d"&&(z[Y.itab-1]={ref:yn(Y.rgce[0][0][1][2])});break;case 22:O.ExternCount=Y;break;case 23:te.length==0&&(te[0]=[],te[0].XTI=[]),te[te.length-1].XTI=te[te.length-1].XTI.concat(Y),te.XTI=te.XTI.concat(Y);break;case 2196:if(O.biff<8)break;K!=null&&(K.Comment=Y[1]);break;case 18:s["!protect"]=Y;break;case 19:Y!==0&&O.WTF&&console.error("Password verifier: "+Y);break;case 133:i[Y.pos]=Y,O.snames.push(Y.name);break;case 10:{if(--ce)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=yn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Se=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=yn(o),o.e.r=Se}o.e.r++,o.e.c++}W.length>0&&(s["!merges"]=W),re.length>0&&(s["!objects"]=re),U.length>0&&(s["!cols"]=U),Q.length>0&&(s["!rows"]=Q),E.Sheets.push(T)}d===""?u=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[ae]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),O.biffguess=Y.BIFFVer==0,Y.BIFFVer==0&&Y.dt==4096&&(O.biff=5,ee=!0,Ed(O.codepage=28591)),O.biff==8&&Y.BIFFVer==0&&Y.dt==16&&(O.biff=2),ce++)break;if(s=t.dense?[]:{},O.biff<8&&!ee&&(ee=!0,Ed(O.codepage=t.codepage||1252)),O.biff<5||Y.BIFFVer==0&&Y.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ue={pos:e.l-ie,name:d};i[ue.pos]=ue,O.snames.push(d)}else d=(i[ne]||{name:""}).name;Y.dt==32&&(s["!type"]="chart"),Y.dt==64&&(s["!type"]="macro"),W=[],re=[],O.arrayf=C=[],U=[],Q=[],B=!1,T={Hidden:(i[ne]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[Y.r]||[])[Y.c]:s[an({c:Y.c,r:Y.r})])&&++Y.c,N={ixfe:Y.ixfe,XF:S[Y.ixfe]||{},v:Y.val,t:"n"},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t);break;case 5:case 517:N={ixfe:Y.ixfe,XF:S[Y.ixfe],v:Y.val,t:Y.t},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t);break;case 638:N={ixfe:Y.ixfe,XF:S[Y.ixfe],v:Y.rknum,t:"n"},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t);break;case 189:for(var se=Y.c;se<=Y.C;++se){var ye=Y.rkrec[se-Y.c][0];N={ixfe:ye,XF:S[ye],v:Y.rkrec[se-Y.c][1],t:"n"},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:se,r:Y.r},N,t)}break;case 6:case 518:case 1030:{if(Y.val=="String"){l=Y;break}if(N=zj(Y.val,Y.cell.ixfe,Y.tt),N.XF=S[N.ixfe],t.cellFormula){var Ne=Y.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var Le=Ne[0][0][1][0],Je=Ne[0][0][1][1],lt=an({r:Le,c:Je});y[lt]?N.f=""+vo(Y.formula,o,Y.cell,te,O):N.F=((t.dense?(s[Le]||[])[Je]:s[lt])||{}).F}else N.f=""+vo(Y.formula,o,Y.cell,te,O)}M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P(Y.cell,N,t),l=Y}break;case 7:case 519:if(l)l.val=Y,N=zj(Y,l.cell.ixfe,"s"),N.XF=S[N.ixfe],t.cellFormula&&(N.f=""+vo(l.formula,o,l.cell,te,O)),M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P(l.cell,N,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{C.push(Y);var vt=an(Y[0].s);if(p=t.dense?(s[Y[0].s.r]||[])[Y[0].s.c]:s[vt],t.cellFormula&&p){if(!l||!vt||!p)break;p.f=""+vo(Y[1],o,Y[0],te,O),p.F=yn(Y[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;y[an(l.cell)]=Y[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[an(l.cell)],(p||{}).f=""+vo(Y[0],o,h,te,O)}}break;case 253:N=zj(c[Y.isst].t,Y.ixfe,"s"),c[Y.isst].h&&(N.h=c[Y.isst].h),N.XF=S[N.ixfe],M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:Y.ixfe,XF:S[Y.ixfe],t:"z"},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t));break;case 190:if(t.sheetStubs)for(var Re=Y.c;Re<=Y.C;++Re){var ht=Y.ixfe[Re-Y.c];N={ixfe:ht,XF:S[ht],t:"z"},M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Re,r:Y.r},N,t)}break;case 214:case 516:case 4:N=zj(Y.val,Y.ixfe,"s"),N.XF=S[N.ixfe],M>0&&(N.z=q[N.ixfe>>8&63]),vu(N,t,r.opts.Date1904),P({c:Y.c,r:Y.r},N,t);break;case 0:case 512:ce===1&&(o=Y);break;case 252:c=Y;break;case 1054:if(O.biff==4){q[M++]=Y[1];for(var At=0;At<M+163&&tn[At]!=Y[1];++At);At>=163&&Wh(Y[1],M+163)}else Wh(Y[1],Y[0]);break;case 30:{q[M++]=Y;for(var Tt=0;Tt<M+163&&tn[Tt]!=Y;++Tt);Tt>=163&&Wh(Y,M+163)}break;case 229:W=W.concat(Y);break;case 93:re[Y.cmo[0]]=O.lastobj=Y;break;case 438:O.lastobj.TxO=Y;break;case 127:O.lastobj.ImData=Y;break;case 440:for(b=Y[0].s.r;b<=Y[0].e.r;++b)for(g=Y[0].s.c;g<=Y[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[an({c:g,r:b})],p&&(p.l=Y[1]);break;case 2048:for(b=Y[0].s.r;b<=Y[0].e.r;++b)for(g=Y[0].s.c;g<=Y[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[an({c:g,r:b})],p&&p.l&&(p.l.Tooltip=Y[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(s[Y[0].r]||[])[Y[0].c]:s[an(Y[0])];var Ht=re[Y[2]];p||(t.dense?(s[Y[0].r]||(s[Y[0].r]=[]),p=s[Y[0].r][Y[0].c]={t:"z"}):p=s[an(Y[0])]={t:"z"},o.e.r=Math.max(o.e.r,Y[0].r),o.s.r=Math.min(o.s.r,Y[0].r),o.e.c=Math.max(o.e.c,Y[0].c),o.s.c=Math.min(o.s.c,Y[0].c)),p.c||(p.c=[]),v={a:Y[1],t:Ht.TxO.t},p.c.push(v)}break;case 2173:nye(S[Y.ixfe],Y.ext);break;case 125:{if(!O.cellStyles)break;for(;Y.e>=Y.s;)U[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(Y.flags&1)},B||(B=!0,B4(Y.w/256)),Bm(U[Y.e+1])}break;case 520:{var pe={};Y.level!=null&&(Q[Y.r]=pe,pe.level=Y.level),Y.hidden&&(Q[Y.r]=pe,pe.hidden=!0),Y.hpt&&(Q[Y.r]=pe,pe.hpt=Y.hpt,pe.hpx=Iv(Y.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||ux(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ae]]=Y;break;case 161:s["!margins"]||ux(s["!margins"]={}),s["!margins"].header=Y.header,s["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(E.Views[0].RTL=!0);break;case 146:D=Y;break;case 2198:J=Y;break;case 140:k=Y;break;case 442:d?T.CodeName=Y||T.name:E.WBProps.CodeName=Y||"ThisWorkbook";break}}else G||console.error("Missing Info for XLS Record 0x"+ae.toString(16)),e.l+=ie}return r.SheetNames=Ss(i).sort(function(he,xe){return Number(he)-Number(xe)}).map(function(he){return i[he].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&z.forEach(function(he,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=he}),r.Strings=c,r.SSF=Va(tn),O.enc&&(r.Encryption=O.enc),J&&(r.Themes=J),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),te.names.length>0&&(E.Names=te.names),r.Workbook=E,r}var Hb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function v2e(e,t,r){var n=zr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=N6(n,gD,Hb.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=zr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=N6(o,bD,Hb.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(Mz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function g2e(e,t){var r=[],n=[],s=[],i=0,o,l=JL(gD,"n"),c=JL(bD,"n");if(e.Props)for(o=Ss(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Ss(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)qz.indexOf(s[i][0])>-1||Oz.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);n.length&&zr.utils.cfb_add(t,"/SummaryInformation",w6(n,Hb.SI,c,bD)),(r.length||d.length)&&zr.utils.cfb_add(t,"/DocumentSummaryInformation",w6(r,Hb.DSI,l,gD,d.length?d:null,Hb.UDI))}function FH(e,t){t||(t={}),Y4(t),p4(),t.codepage&&m4(t.codepage);var r,n;if(e.FullPaths){if(zr.find(e,"/encryption"))throw new Error("File is password-protected");r=zr.find(e,"!CompObj"),n=zr.find(e,"/Workbook")||zr.find(e,"/Book")}else{switch(t.type){case"base64":e=Wl(ic(e));break;case"binary":e=Wl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Gi(e,0),n={content:e}}var s,i;if(r&&f2e(r),t.bookProps&&!t.bookSheets)s={};else{var o=En?"buffer":"array";if(n&&n.content)s=x2e(n.content,t);else if((i=zr.find(e,"PerfectOffice_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else if((i=zr.find(e,"NativeContent_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else throw(i=zr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&zr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Tye(e))}var l={};return e.FullPaths&&v2e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function b2e(e,t){var r=t||{},n=zr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return zr.utils.cfb_add(n,s,LH(e,r)),r.biff==8&&(e.Props||e.Custprops)&&g2e(e,n),r.biff==8&&e.vbaraw&&Iye(n,zr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var yy={0:{f:Vje},1:{f:Qje},2:{f:xNe},3:{f:sNe},4:{f:tNe},5:{f:fNe},6:{f:jNe},7:{f:cNe},8:{f:ENe},9:{f:_Ne},10:{f:CNe},11:{f:kNe},12:{f:Zje},13:{f:gNe},14:{f:oNe},15:{f:nNe},16:{f:DH},17:{f:wNe},18:{f:uNe},19:{f:D4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:wwe},40:{},42:{},43:{f:jbe},44:{f:bbe},45:{f:Sbe},46:{f:kbe},47:{f:Cbe},48:{},49:{f:Wxe},50:{},51:{f:iye},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zz},62:{f:yNe},63:{f:pye},64:{f:zNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Do,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:UNe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Kje},148:{f:Wje,p:16},151:{f:ONe},152:{},153:{f:ywe},154:{},155:{},156:{f:gwe},157:{},158:{},159:{T:1,f:Rge},160:{T:-1},161:{T:1,f:qx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:DNe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:aye},336:{T:-1},337:{f:cye,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vD},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Jz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:MNe},427:{f:RNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:LNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Yje},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:INe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vD},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kye},633:{T:1},634:{T:-1},635:{T:1,f:Sye},636:{T:-1},637:{f:Xxe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:owe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:HNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},CD={6:{f:rE},10:{f:pm},12:{f:Zs},13:{f:Zs},14:{f:Ms},15:{f:Ms},16:{f:No},17:{f:Ms},18:{f:Ms},19:{f:Zs},20:{f:D6},21:{f:D6},23:{f:Jz},24:{f:T6},25:{f:Ms},26:{},27:{},28:{f:Hve},29:{},34:{f:Ms},35:{f:A6},38:{f:No},39:{f:No},40:{f:No},41:{f:No},42:{f:Ms},43:{f:Ms},47:{f:nbe},49:{f:gve},51:{f:Zs},60:{},61:{f:fve},64:{f:Ms},65:{f:vve},66:{f:Zs},77:{},80:{},81:{},82:{},85:{f:Zs},89:{},90:{},91:{},92:{f:rve},93:{f:Yve},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:Zz},128:{f:Pve},129:{f:ave},130:{f:Zs},131:{f:Ms},132:{f:Ms},133:{f:sve},134:{},140:{f:rge},141:{f:Zs},144:{},146:{f:sge},151:{},152:{},153:{},154:{},155:{},156:{f:Zs},157:{},158:{},160:{f:hge},161:{f:lge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Dve},190:{f:Ave},193:{f:pm},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Zs},220:{},221:{f:Ms},222:{},224:{f:Ive},225:{f:tve},226:{f:pm},227:{},229:{f:Wve},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ove},253:{f:yve},255:{f:cve},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Vz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:pm},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Lve},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:Qve},439:{f:Ms},440:{f:Jve},441:{},442:{f:n1},443:{},444:{f:Zs},445:{},446:{},448:{f:pm},449:{f:hve,r:2},450:{f:pm},512:{f:k6},513:{f:uge},515:{f:Rve},516:{f:Nve},517:{f:E6},519:{f:fge},520:{f:dve},523:{},545:{f:I6},549:{f:C6},566:{},574:{f:pve},638:{f:Eve},659:{},1048:{},1054:{f:Sve},1084:{},1212:{f:qve},2048:{f:ege},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$j},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:pm},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ige,r:12},2173:{f:rye,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:$ve,r:12},2197:{},2198:{f:Xbe,r:12},2199:{},2200:{},2201:{},2202:{f:Vve,r:12},2203:{f:pm},2204:{},2205:{},2206:{},2207:{},2211:{f:uve},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Zs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:cge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:age},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:k6},1:{},2:{f:gge},3:{f:xge},4:{f:pge},5:{f:E6},7:{f:yge},8:{},9:{f:$j},11:{},22:{f:Zs},30:{f:kve},31:{},32:{},33:{f:I6},36:{},37:{f:C6},50:{f:jge},62:{},52:{},67:{},68:{f:Zs},69:{},86:{},126:{},127:{f:mge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Nge},223:{},234:{},354:{},421:{},518:{f:rE},521:{f:$j},536:{f:T6},547:{f:A6},561:{},579:{},1030:{f:rE},1033:{f:$j},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function vr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&k4(r)&&e.push(r)}}function y2e(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return vr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function o1(e,t,r){return e||(e=Ut(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function j2e(e,t,r,n){var s=Ut(9);return o1(s,e,t),zz(r,n||"b",s),s}function N2e(e,t,r){var n=Ut(8+2*r.length);return o1(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function w2e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?hi(qa(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?vr(e,2,bge(r,n,s)):vr(e,3,vge(r,n,s));return;case"b":case"e":vr(e,5,j2e(r,n,t.v,t.t));return;case"s":case"str":vr(e,4,N2e(r,n,(t.v||"").slice(0,255)));return}vr(e,1,o1(null,r,n))}function S2e(e,t,r,n){var s=Array.isArray(t),i=Yn(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=yn(i)}for(var d=i.s.r;d<=i.e.r;++d){l=$s(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=cs(u)),o=c[u]+l;var h=s?(t[d]||[])[u]:t[o];h&&w2e(e,h,d,u)}}}function C2e(e,t){for(var r=t||{},n=hl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return vr(n,r.biff==4?1033:r.biff==3?521:9,R4(e,16,r)),S2e(n,e.Sheets[e.SheetNames[s]],s,r),vr(n,10),n.end()}function k2e(e,t,r){vr(e,49,bve({sz:12,name:"Arial"},r))}function _2e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&vr(e,1054,Cve(s,t[s],r))})}function E2e(e,t){var r=Ut(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),vr(e,2151,r),r=Ut(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Kz(Yn(t["!ref"]||"A1"),r),r.write_shift(4,4),vr(e,2152,r)}function D2e(e,t){for(var r=0;r<16;++r)vr(e,224,_6({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){vr(e,224,_6(n,0,t))})}function A2e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];vr(e,440,Zve(n)),n[1].Tooltip&&vr(e,2048,tge(n))}delete t["!links"]}function T2e(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&vr(e,125,oge(SS(s,n),s))})}}function I2e(e,t,r,n,s){var i=16+tp(s.cellXfs,t,s);if(t.v==null&&!t.bf){vr(e,513,kx(r,n,i));return}if(t.bf)vr(e,6,aje(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?hi(qa(t.v)):t.v;vr(e,515,Fve(r,n,o,i));break;case"b":case"e":vr(e,517,Mve(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=z4(s.Strings,t.v,s.revStrings);vr(e,253,jve(r,n,l,i))}else vr(e,516,wve(r,n,(t.v||"").slice(0,255),i,s));break;default:vr(e,513,kx(r,n,i))}}function P2e(e,t,r){var n=hl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,h="",m=[],p=Yn(i["!ref"]||"A1"),v=d?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}vr(n,2057,R4(r,16,t)),vr(n,13,Oc(1)),vr(n,12,Oc(100)),vr(n,15,Bo(!0)),vr(n,17,Bo(!1)),vr(n,16,Sx(.001)),vr(n,95,Bo(!0)),vr(n,42,Bo(!1)),vr(n,43,Bo(!1)),vr(n,130,Oc(1)),vr(n,128,Ove()),vr(n,131,Bo(!1)),vr(n,132,Bo(!1)),d&&T2e(n,i["!cols"]),vr(n,512,_ve(p,t)),d&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){h=$s(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(m[b]=cs(b)),u=m[b]+h;var y=c?(i[g]||[])[b]:i[u];y&&(I2e(n,y,g,b,t),d&&y.l&&i["!links"].push([u,y.l]))}}var C=l.CodeName||l.name||s;return d&&vr(n,574,xve((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&vr(n,229,Gve(i["!merges"])),d&&A2e(n,i),vr(n,442,Hz(C)),d&&E2e(n,i),vr(n,10),n.end()}function O2e(e,t,r){var n=hl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(vr(n,2057,R4(e,5,r)),r.bookType=="xla"&&vr(n,135),vr(n,225,l?Oc(1200):null),vr(n,193,M0e(2)),c&&vr(n,191),c&&vr(n,192),vr(n,226),vr(n,92,nve("SheetJS",r)),vr(n,66,Oc(l?1200:1252)),l&&vr(n,353,Oc(0)),l&&vr(n,448),vr(n,317,dge(e.SheetNames.length)),l&&e.vbaraw&&vr(n,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";vr(n,442,Hz(d))}vr(n,156,Oc(17)),vr(n,25,Bo(!1)),vr(n,18,Bo(!1)),vr(n,19,Oc(0)),l&&vr(n,431,Bo(!1)),l&&vr(n,444,Oc(0)),vr(n,61,mve()),vr(n,64,Bo(!1)),vr(n,141,Oc(0)),vr(n,34,Bo(hwe(e)=="true")),vr(n,14,Bo(!0)),l&&vr(n,439,Bo(!1)),vr(n,218,Oc(0)),k2e(n,e,r),_2e(n,e.SSF,r),D2e(n,r),l&&vr(n,352,Bo(!1));var u=n.end(),h=hl();l&&vr(h,140,nge()),l&&r.Strings&&y2e(h,252,lve(r.Strings)),vr(h,10);var m=h.end(),p=hl(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var b=u.length+v+m.length;for(g=0;g<e.SheetNames.length;++g){var y=i[g]||{};vr(p,133,ive({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var C=p.end();if(v!=C.length)throw new Error("BS8 "+v+" != "+C.length);var N=[];return u.length&&N.push(u),C.length&&N.push(C),m.length&&N.push(m),ki(N)}function M2e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(tn)),e&&e.SSF&&(ig(),vS(e.SSF),r.revssf=bS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,K4(r),r.cellXfs=[],tp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=P2e(s,r,e);return n.unshift(O2e(e,n,r)),ki(n)}function LH(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=ml(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return M2e(e,t);case 4:case 3:case 2:return C2e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function q6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=bxe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var g=c[o].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var C=y[l].trim();if(C.match(/<t[dh]/i)){for(var N=C,k=0;N.charAt(0)=="<"&&(k=N.indexOf(">"))>-1;)N=N.slice(k+1);for(var S=0;S<v.length;++S){var D=v[S];D.s.c==u&&D.s.r<d&&d<=D.e.r&&(u=D.e.c+1,S=-1)}var E=on(C.slice(0,C.indexOf(">")));m=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||m>1)&&v.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+m-1}});var T=E.t||E["data-t"]||"";if(!N.length){u+=m;continue}if(N=lz(N),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!N.length){u+=m;continue}var A={t:"s",v:N};r.raw||!N.trim().length||T=="s"||(N==="TRUE"?A={t:"b",v:!0}:N==="FALSE"?A={t:"b",v:!1}:isNaN(Td(N))?isNaN(Av(N).getDate())||(A={t:"d",v:qa(N)},r.cellDates||(A={t:"n",v:hi(A.v)}),A.z=r.dateNF||tn[14]):A={t:"n",v:Td(N)}),r.dense?(n[d]||(n[d]=[]),n[d][u]=A):n[an({r:d,c:u})]=A,u+=m}}}}return n["!ref"]=yn(p),v.length&&(n["!merges"]=v),n}function R2e(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=an({r,c:o}),h=n.dense?(e[r]||[])[o]:e[u],m=h&&h.v!=null&&(h.h||w4(h.w||(of(h),h.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(xr("td",m,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var F2e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',L2e="</body></html>";function B2e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ep(q6(r[0],t),t);var n=J4();return r.forEach(function(s,i){Z4(n,q6(s,t),"Sheet"+(i+1))}),n}function U2e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function BH(e,t){var r=t||{},n=r.header!=null?r.header:F2e,s=r.footer!=null?r.footer:L2e,i=[n],o=ml(e["!ref"]);r.dense=Array.isArray(e),i.push(U2e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(R2e(e,o,l,r));return i.push("</table>"+s),i.join("")}function UH(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?ds(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=ml(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],m=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,b=0,y=0,C=0,N=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var k=l[v];if(V6(k)){if(n.display)continue;p[g]={hidden:!0}}var S=k.children;for(b=y=0;b<S.length;++b){var D=S[b];if(!(n.display&&V6(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):lz(D.innerHTML),T=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var A=h[m];A.s.c==y+i&&A.s.r<g+s&&g+s<=A.e.r&&(y=A.e.c+1-i,m=-1)}N=+D.getAttribute("colspan")||1,((C=+D.getAttribute("rowspan")||1)>1||N>1)&&h.push({s:{r:g+s,c:y+i},e:{r:g+s+(C||1)-1,c:y+i+(N||1)-1}});var L={t:"s",v:E},P=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?L.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(Td(E))?isNaN(Av(E).getDate())||(L={t:"d",v:qa(E)},n.cellDates||(L={t:"n",v:hi(L.v)}),L.z=n.dateNF||tn[14]):L={t:"n",v:Td(E)})),L.z===void 0&&T!=null&&(L.z=T);var O="",J=D.getElementsByTagName("A");if(J&&J.length)for(var W=0;W<J.length&&!(J[W].hasAttribute("href")&&(O=J[W].getAttribute("href"),O.charAt(0)!="#"));++W);O&&O.charAt(0)!="#"&&(L.l={Target:O}),n.dense?(e[g+s]||(e[g+s]=[]),e[g+s][y+i]=L):e[an({c:y+i,r:g+s})]=L,d.e.c<y+i&&(d.e.c=y+i),y+=N}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=yn(d),g>=c&&(e["!fullref"]=yn((d.e.r=l.length-v+g-1+s,d))),e}function $H(e,t){var r=t||{},n=r.dense?[]:{};return UH(n,e,t)}function $2e(e,t){return ep($H(e,t),t)}function V6(e){var t="",r=q2e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function q2e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function V2e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Gn(t.replace(/<[^>]*>/g,""));return[r]}var z6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function qH(e,t){var r=t||{},n=S4(e),s=[],i,o,l={name:""},c="",d=0,u,h,m={},p=[],v=r.dense?[]:{},g,b,y={value:""},C="",N=0,k=[],S=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,A={},L=[],P={},O=0,J=0,W=[],re=1,U=1,Q=[],B={Names:[]},te={},X=["",""],ce=[],M={},q="",z=0,K=!1,ee=!1,ne=0;for(my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=my.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=yn(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=yn(E)),L.length&&(v["!merges"]=L),W.length&&(v["!rows"]=W),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),m[u.name]=v,ee=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=on(g[0],!1),S=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},L=[],W=[],ee=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){S+=re,re=1;break}if(h=on(g[0],!1),h.?S=h.-1:S==-1&&(S=0),re=+h["number-rows-repeated"]||1,re<10)for(ne=0;ne<re;++ne)T>0&&(W[S+ne]={level:T});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[S]||(v[S]=[]),v[S][D]={t:"z"}):v[an({r:S,c:D})]={t:"z"}),C="",k=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++D,y=on(g[0],!1),U=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=B6(Gn(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Gn(y["string-value"]||""),r.dense?(v[S]||(v[S]=[]),v[S][D]=b):v[an({r:S,c:D})]=b),D+=U-1;else if(g[1]!=="/"){++D,C="",N=0,k=[],U=1;var ae=re?S+re-1:S;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),S<E.s.r&&(E.s.r=S),ae>E.e.r&&(E.e.r=ae),y=on(g[0],!1),ce=[],M={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Gn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,J=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+J-1}},b.F=yn(P),Q.push([P,b.F])),y.formula)b.f=B6(y.formula);else for(ne=0;ne<Q.length;++ne)S>=Q[ne][0].s.r&&S<=Q[ne][0].e.r&&D>=Q[ne][0].s.c&&D<=Q[ne][0].e.c&&(b.F=Q[ne][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,J=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+J-1}},L.push(P)),y["number-columns-repeated"]&&(U=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ua(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=qa(y["date-value"]),r.cellDates||(b.t="n",b.v=hi(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=xxe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=yS(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(C=Gn(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(K=!1,b.t==="s"&&(b.v=C||"",k.length&&(b.R=k),K=N==0),te.Target&&(b.l=te),ce.length>0&&(b.c=ce,ce=[]),C&&r.cellText!==!1&&(b.w=C),K&&(b.t="z",delete b.v),(!K||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<re;++ie){if(U=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(v[S+ie]||(v[S+ie]=[]),v[S+ie][D]=ie==0?b:Va(b);--U>0;)v[S+ie][D+U]=Va(b);else for(v[an({r:S+ie,c:D})]=b;--U>0;)v[an({r:S+ie,c:D+U})]=Va(b);E.e.c<=D&&(E.e.c=D)}U=parseInt(y["number-columns-repeated"]||"1",10),D+=U-1,U=0,b={},C="",k=[]}te={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;M.t=C,k.length&&(M.R=k),M.a=q,ce.push(M)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);q="",z=0,C="",N=0,k=[];break;case"creator":g[1]==="/"?q=n.slice(z,g.index):z=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);C="",N=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(A[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=on(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=on(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=on(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=on(g[0],!1),X=nE(o["cell-range-address"]);var G={Name:o.name,Ref:X[0]+"!"+X[1]};ee&&(G.Sheet=p.length),B.Names.push(G);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var de=V2e(n.slice(N,g.index));C=(C.length>0?C+`
`:"")+de[0]}else on(g[0],!1),N=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{X=nE(on(g[0])["target-range-address"]),m[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(te=on(g[0],!1),!te.href)break;te.Target=Gn(te.href),delete te.href,te.Target.charAt(0)=="#"&&te.Target.indexOf(".")>-1?(X=nE(te.Target.slice(1)),te.Target="#"+X[0]+"!"+X[1]):te.Target.match(/^\.\.[\\\/]/)&&(te.Target=te.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var Y={Sheets:m,SheetNames:p,Workbook:B};return r.bookSheets&&delete Y.Sheets,Y}function H6(e,t){t=t||{},Pc(e,"META-INF/manifest.xml")&&x0e(Js(e,"META-INF/manifest.xml"),t);var r=Gl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=qH(Ca(r),t);return Pc(e,"meta.xml")&&(n.Props=Iz(Js(e,"meta.xml"))),n}function W6(e,t){return qH(e,t)}var z2e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Vs+t}}(),G6=function(){var e=function(i){return ba(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+ba(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=ml(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",b=i["!rows"]||[];for(d=0;d<h.s.r;++d)g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(t);for(;u<=h.e.c;++u){var y=!1,C={},N="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>u)&&!(m[p].s.r>d)&&!(m[p].e.c<u)&&!(m[p].e.r<d)){(m[p].s.c!=u||m[p].s.r!=d)&&(y=!0),C["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,C["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(y){c.push(r);continue}var k=an({r:d,c:u}),S=v?(i[d]||[])[u]:i[k];if(S&&S.f&&(C["table:formula"]=ba(dje(S.f)),S.F&&S.F.slice(0,k.length)==k)){var D=ml(S.F);C["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,C["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":N=S.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=S.v?"true":"false";break;case"n":N=S.w||String(S.v||0),C["office:value-type"]="float",C["office:value"]=S.v||0;break;case"s":case"str":N=S.v==null?"":S.v,C["office:value-type"]="string";break;case"d":N=S.w||qa(S.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=qa(S.v).toISOString(),C["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(N);if(S.l&&S.l.Target){var T=S.l.Target;T=T.charAt(0)=="#"?"#"+uje(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),E=xr("text:a",E,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+xr("table:table-cell",xr("text:p",E,{}),C)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Bm(h),h.ods=l;var m=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Vs],d=fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=fy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(Tz().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function VH(e,t){if(t.bookType=="fods")return G6(e,t);var r=y4(),n="",s=[],i=[];return n="mimetype",Sn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Sn(r,n,G6(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Sn(r,n,z2e(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Sn(r,n,Vs+Tz()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Sn(r,n,b0e(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Sn(r,n,v0e(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _x(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function kD(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ca(Zm(e))}function H2e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Wl(Pu(e))}function W2e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function $m(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function Y6(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function G2e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Y2e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function jy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function pa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Zn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=jy(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=jy(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function qi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(pa(n*8+s.type)),s.type==2&&t.push(pa(s.data.length)),t.push(s.data))})}),$m(t)}function G4(e,t){return e?.map(function(r){return t(r.data)})||[]}function Tc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=jy(e,n),i=Zn(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:Ns(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Zn(l.data),d=Ns(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Ns(i[3][0].data)>>>0>0),r.push(o)}return r}function T0(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:pa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:pa(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:pa(o.data.length)}],n[2].push({data:qi(o.meta),type:2})});var i=qi(n);t.push(pa(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),$m(t)}function K2e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=jy(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[$m(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=$m(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Ic(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(K2e(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return $m(t)}function I0(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=pa(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return $m(t)}function X2e(e,t,r,n){var s=_x(e),i=s.getUint32(4,!0),o=(n>1?12:8)+Y6(i&(n>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=Y6(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function Q2e(e,t,r){var n=_x(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=G2e(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return h}function sE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Y2e(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function iE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function J2e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return X2e(e,t,r,e[0]);case 5:return Q2e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function po(e){var t=Zn(e);return jy(t[1][0].data)}function K6(e,t){var r=Zn(t.data),n=Ns(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Zn(o.data),c=Ns(l[1][0].data)>>>0;switch(n){case 1:i[c]=kD(l[3][0].data);break;case 8:{var d=e[po(l[9][0].data)][0],u=Zn(d.data),h=e[po(u[1][0].data)][0],m=Ns(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Zn(h.data);i[c]=p[3].map(function(v){return kD(v.data)}).join("")}break}}),i}function Z2e(e,t){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b=Zn(e),y=Ns(b[1][0].data)>>>0,C=Ns(b[2][0].data)>>>0,N=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ns(b[8][0].data)>0||!1,k,S;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)k=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=b[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=b[4])==null?void 0:u[0])!=null&&h.data&&t!=1)k=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,S=(g=(v=b[3])==null?void 0:v[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=N?4:1,E=_x(k),T=[],A=0;A<k.length/2;++A){var L=E.getUint16(A*2,!0);L<65535&&T.push([A,L])}if(T.length!=C)throw"Expected ".concat(C," cells, found ").concat(T.length);var P=[];for(A=0;A<T.length-1;++A)P[T[A][0]]=S.subarray(T[A][1]*D,T[A+1][1]*D);return T.length>=1&&(P[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*D)),{R:y,cells:P}}function eSe(e,t){var r,n=Zn(t.data),s=(r=n?.[7])!=null&&r[0]?Ns(n[7][0].data)>>>0>0?1:0:-1,i=G4(n[5],function(o){return Z2e(o,s)});return{nrows:Ns(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function tSe(e,t,r){var n,s=Zn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ns(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Ns(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=yn(i);var o=Zn(s[4][0].data),l=K6(e,e[po(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?K6(e,e[po(o[17][0].data)][0]):[],d=Zn(o[3][0].data),u=0;d[1].forEach(function(h){var m=Zn(h.data),p=e[po(m[2][0].data)][0],v=Ns(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var g=eSe(e,p);g.data.forEach(function(b,y){b.forEach(function(C,N){var k=an({r:u+y,c:N}),S=J2e(C,l,c);S&&(r[k]=S)})}),u+=g.nrows})}function rSe(e,t){var r=Zn(t.data),n={"!ref":"A1"},s=e[po(r[2][0].data)],i=Ns(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return tSe(e,s[0],n),n}function nSe(e,t){var r,n=Zn(t.data),s={name:(r=n[1])!=null&&r[0]?kD(n[1][0].data):"",sheets:[]},i=G4(n[2],po);return i.forEach(function(o){e[o].forEach(function(l){var c=Ns(l.meta[1][0].data);c==6e3&&s.sheets.push(rSe(e,l))})}),s}function aSe(e,t){var r=J4(),n=Zn(t.data),s=G4(n[1],po);if(s.forEach(function(i){e[i].forEach(function(o){var l=Ns(o.meta[1][0].data);if(l==2){var c=nSe(e,o);c.sheets.forEach(function(d,u){Z4(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function oE(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Ic(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Tc(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Ns(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Ns(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return aSe(i,l)}function sSe(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ns(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=_x(e[7][0].data),u=0,h=[],m=_x(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),m.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=sE({t:"s",v:t[g]},r),y=iE({t:"s",v:t[g]},r);break;case"number":b=sE({t:"n",v:t[g]},r),y=iE({t:"n",v:t[g]},r);break;case"boolean":b=sE({t:"b",v:t[g]},r),y=iE({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}h.push(b),u+=b.length,v.push(y),p+=y.length,++c}for(e[2][0].data=pa(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535,!0);return e[6][0].data=$m(h),e[3][0].data=$m(v),c}function iSe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ml(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(yn(n)));var i=Lw(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],d=zr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(q,z){return[q,d.FullPaths[z]]}).forEach(function(q){var z=q[0],K=q[1];if(z.type==2&&z.name.match(/\.iwa/)){var ee=z.content,ne=Ic(ee),ae=Tc(ne);ae.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:K,type:Ns(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(q,z){return q-z});var u=c.filter(function(q){return q>1}).map(function(q){return[q,pa(q)]});d.FileIndex.map(function(q,z){return[q,d.FullPaths[z]]}).forEach(function(q){var z=q[0];if(q[1],!!z.name.match(/\.iwa/)){var K=Tc(Ic(z.content));K.forEach(function(ee){ee.messages.forEach(function(ne){u.forEach(function(ae){ee.messages.some(function(ie){return Ns(ie.meta[1][0].data)!=11006&&W2e(ie.data,ae[1])})&&l[ae[0]].deps.push(ee.id)})})})}});for(var h=zr.find(d,l[1].location),m=Tc(Ic(h.content)),p,v=0;v<m.length;++v){var g=m[v];g.id==1&&(p=g)}var b=po(Zn(p.messages[0].data)[1][0].data);for(h=zr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=po(Zn(p.messages[0].data)[2][0].data),h=zr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=po(Zn(p.messages[0].data)[2][0].data),h=zr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);var y=Zn(p.messages[0].data);{y[6][0].data=pa(n.e.r+1),y[7][0].data=pa(n.e.c+1);var C=po(y[46][0].data),N=zr.find(d,l[C].location),k=Tc(Ic(N.content));{for(var S=0;S<k.length&&k[S].id!=C;++S);if(k[S].id!=C)throw"Bad ColumnRowUIDMapArchive";var D=Zn(k[S].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=n.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:pa(E+420690)}],D[1].push({type:2,data:qi(T)}),D[2].push({type:0,data:pa(E)}),D[3].push({type:0,data:pa(E)})}D[4]=[],D[5]=[],D[6]=[];for(var A=0;A<=n.e.r;++A)T=[],T[1]=T[2]=[{type:0,data:pa(A+726270)}],D[4].push({type:2,data:qi(T)}),D[5].push({type:0,data:pa(A)}),D[6].push({type:0,data:pa(A)});k[S].messages[0].data=qi(D)}N.content=I0(T0(k)),N.size=N.content.length,delete y[46];var L=Zn(y[4][0].data);{L[7][0].data=pa(n.e.r+1);var P=Zn(L[1][0].data),O=po(P[2][0].data);N=zr.find(d,l[O].location),k=Tc(Ic(N.content));{if(k[0].id!=O)throw"Bad HeaderStorageBucket";var J=Zn(k[0].messages[0].data);for(A=0;A<i.length;++A){var W=Zn(J[2][0].data);W[1][0].data=pa(A),W[4][0].data=pa(i[A].length),J[2][A]={type:J[2][0].type,data:qi(W)}}k[0].messages[0].data=qi(J)}N.content=I0(T0(k)),N.size=N.content.length;var re=po(L[2][0].data);N=zr.find(d,l[re].location),k=Tc(Ic(N.content));{if(k[0].id!=re)throw"Bad HeaderStorageBucket";for(J=Zn(k[0].messages[0].data),E=0;E<=n.e.c;++E)W=Zn(J[2][0].data),W[1][0].data=pa(E),W[4][0].data=pa(n.e.r+1),J[2][E]={type:J[2][0].type,data:qi(W)};k[0].messages[0].data=qi(J)}N.content=I0(T0(k)),N.size=N.content.length;var U=po(L[4][0].data);(function(){for(var q=zr.find(d,l[U].location),z=Tc(Ic(q.content)),K,ee=0;ee<z.length;++ee){var ne=z[ee];ne.id==U&&(K=ne)}var ae=Zn(K.messages[0].data);{ae[3]=[];var ie=[];o.forEach(function(Y,oe){ie[1]=[{type:0,data:pa(oe)}],ie[2]=[{type:0,data:pa(1)}],ie[3]=[{type:2,data:H2e(Y)}],ae[3].push({type:2,data:qi(ie)})})}K.messages[0].data=qi(ae);var G=T0(z),de=I0(G);q.content=de,q.size=q.content.length})();var Q=Zn(L[3][0].data);{var B=Q[1][0];delete Q[2];var te=Zn(B.data);{var X=po(te[2][0].data);(function(){for(var q=zr.find(d,l[X].location),z=Tc(Ic(q.content)),K,ee=0;ee<z.length;++ee){var ne=z[ee];ne.id==X&&(K=ne)}var ae=Zn(K.messages[0].data);{delete ae[6],delete Q[7];var ie=new Uint8Array(ae[5][0].data);ae[5]=[];for(var G=0,de=0;de<=n.e.r;++de){var Y=Zn(ie);G+=sSe(Y,i[de],o),Y[1][0].data=pa(de),ae[5].push({data:qi(Y),type:2})}ae[1]=[{type:0,data:pa(n.e.c+1)}],ae[2]=[{type:0,data:pa(n.e.r+1)}],ae[3]=[{type:0,data:pa(G)}],ae[4]=[{type:0,data:pa(n.e.r+1)}]}K.messages[0].data=qi(ae);var oe=T0(z),Se=I0(oe);q.content=Se,q.size=q.content.length})()}B.data=qi(te)}L[3][0].data=qi(Q)}y[4][0].data=qi(L)}p.messages[0].data=qi(y);var ce=T0(m),M=I0(ce);return h.content=M,h.size=h.content.length,d}function zH(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Y4(e){zH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function K4(e){zH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function oSe(e){return Tn.WS.indexOf(e)>-1?"sheet":e==Tn.CS?"chart":e==Tn.DS?"dialog":e==Tn.MS?"macro":e&&e.length?e:"sheet"}function lSe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,oSe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function cSe(e,t,r,n,s,i,o,l,c,d,u,h){try{i[n]=$b(Gl(e,r,!0),t);var m=Js(e,t),p;switch(l){case"sheet":p=Twe(m,t,s,c,i[n],d,u,h);break;case"chart":if(p=Iwe(m,t,s,c,i[n],d,u,h),!p||!p["!drawel"])break;var v=Ib(p["!drawel"].Target,t),g=py(v),b=gye(Gl(e,v,!0),$b(Gl(e,g,!0),v)),y=Ib(b,v),C=py(y);p=swe(Gl(e,y,!0),y,c,$b(Gl(e,C,!0),y),d,p);break;case"macro":p=Pwe(m,t,s,c,i[n],d,u,h);break;case"dialog":p=Owe(m,t,s,c,i[n],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var N=[];i&&i[n]&&Ss(i[n]).forEach(function(k){var S="";if(i[n][k].Type==Tn.CMNT){S=Ib(i[n][k].Target,t);var D=Lwe(Js(e,S,!0),S,c);if(!D||!D.length)return;O6(p,D,!1)}i[n][k].Type==Tn.TCMNT&&(S=Ib(i[n][k].Target,t),N=N.concat(yye(Js(e,S,!0),c)))}),N&&N.length&&O6(p,N,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Ec(e){return e.charAt(0)=="/"?e.slice(1):e}function dSe(e,t){if(ig(),t=t||{},Y4(t),Pc(e,"META-INF/manifest.xml")||Pc(e,"objectdata.xml"))return H6(e,t);if(Pc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof oE<"u"){if(e.FileIndex)return oE(e);var r=zr.utils.cfb_new();return t6(e).forEach(function(W){Sn(r,W,jxe(e,W))}),oE(r)}throw new Error("Unsupported NUMBERS file")}if(!Pc(e,"[Content_Types].xml"))throw Pc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Pc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=t6(e),s=m0e(Gl(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Js(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Js(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(qb=[],s.sst)try{qb=Fwe(Js(e,Ec(s.sst)),s.sst,t)}catch(W){if(t.WTF)throw W}t.cellStyles&&s.themes.length&&(c=Rwe(Gl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=Mwe(Js(e,Ec(s.style)),s.style,c,t))}s.links.map(function(W){try{var re=$b(Gl(e,py(Ec(W))),W);return Uwe(Js(e,Ec(W)),re,W,t)}catch{}});var u=Awe(Js(e,Ec(s.workbooks[0])),s.workbooks[0],t),h={},m="";s.coreprops.length&&(m=Js(e,Ec(s.coreprops[0]),!0),m&&(h=Iz(m)),s.extprops.length!==0&&(m=Js(e,Ec(s.extprops[0]),!0),m&&j0e(m,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=Gl(e,Ec(s.custprops[0]),!0),m&&(p=w0e(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(re){return re.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(v.Props=h,v.Custprops=p),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var g={};t.bookDeps&&s.calcchain&&(g=Bwe(Js(e,Ec(s.calcchain)),s.calcchain));var b=0,y={},C,N;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var S=0;S!=k.length;++S)h.SheetNames[S]=k[S].name}var D=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Pc(e,T)||(T="xl/_rels/workbook."+D+".rels");var A=$b(Gl(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=$we(Js(e,Ec(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Nye(Js(e,Ec(s.people[0])),t)),A&&(A=lSe(A,u.Sheets));var L=Js(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var P="sheet";if(A&&A[b]?(C="xl/"+A[b][1].replace(/[\/]?xl\//,""),Pc(e,C)||(C=A[b][1]),Pc(e,C)||(C=T.replace(/_rels\/.*$/,"")+A[b][1]),P=A[b][2]):(C="xl/worksheets/sheet"+(b+1-L)+"."+D,C=C.replace(/sheet0\./,"sheet.")),N=C.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,J=0;J!=t.sheets.length;++J)typeof t.sheets[J]=="number"&&t.sheets[J]==b&&(O=1),typeof t.sheets[J]=="string"&&t.sheets[J].toLowerCase()==h.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}cSe(e,C,N,h.SheetNames[b],b,y,o,P,t,u,c,d)}return v={Directory:s,Workbook:u,Props:h,Custprops:p,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:qb,Styles:d,Themes:c,SSF:Va(tn)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(W,re){W=W.replace(/^Root Entry[\/]/,""),v.keys.push(W),v.files[W]=e.FileIndex[re]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=Js(e,Ec(s.vba[0]),!0):s.defaults&&s.defaults.bin===Aye&&(v.vbaraw=Js(e,"xl/vbaProject.bin",!0))),v}function uSe(e,t){var r=t||{},n="Workbook",s=zr.find(e,n);try{if(n="/!DataSpaces/Version",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if($ge(s.content),n="/!DataSpaces/DataSpaceMap",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Vge(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=zge(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Wge(s.content)}catch{}if(n="/EncryptionInfo",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Gge(s.content);if(n="/EncryptedPackage",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function hSe(e,t){return t.bookType=="ods"?VH(e,t):t.bookType=="numbers"?iSe(e,t):t.bookType=="xlsb"?fSe(e,t):mSe(e,t)}function fSe(e,t){Z0=1024,e&&!e.SSF&&(e.SSF=Va(tn)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Vb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=vH.indexOf(t.bookType)>-1,s=O4();K4(t=t||{});var i=y4(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Sn(i,o,Pz(e.Props,t)),s.coreprops.push(o),va(t.rels,2,o,Tn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Sn(i,o,Rz(e.Props)),s.extprops.push(o),va(t.rels,3,o,Tn.EXT_PROPS),e.Custprops!==e.Props&&Ss(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Sn(i,o,Fz(e.Custprops)),s.custprops.push(o),va(t.rels,4,o,Tn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Sn(i,o,Vwe(l-1,o,t,e,u)),s.sheets.push(o),va(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(h){var p=h["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,Sn(i,g,Wwe(p,g)),s.comments.push(g),va(u,-1,"../comments"+l+"."+r,Tn.CMNT),v=!0),h["!legacy"]&&v&&Sn(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Sn(i,py(o),sv(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Sn(i,o,Hwe(t.Strings,o,t)),s.strs.push(o),va(t.wbrels,-1,"sharedStrings."+r,Tn.SST)),o="xl/workbook."+r,Sn(i,o,qwe(e,o)),s.workbooks.push(o),va(t.rels,1,o,Tn.WB),o="xl/theme/theme1.xml",Sn(i,o,U4(e.Themes,t)),s.themes.push(o),va(t.wbrels,-1,"theme/theme1.xml",Tn.THEME),o="xl/styles."+r,Sn(i,o,zwe(e,o,t)),s.styles.push(o),va(t.wbrels,-1,"styles."+r,Tn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Sn(i,o,e.vbaraw),s.vba.push(o),va(t.wbrels,-1,"vbaProject.bin",Tn.VBA)),o="xl/metadata."+r,Sn(i,o,Gwe(o)),s.metadata.push(o),va(t.wbrels,-1,"metadata."+r,Tn.XLMETA),Sn(i,"[Content_Types].xml",Az(s,t)),Sn(i,"_rels/.rels",sv(t.rels)),Sn(i,"xl/_rels/workbook."+r+".rels",sv(t.wbrels)),delete t.revssf,delete t.ssf,i}function mSe(e,t){Z0=1024,e&&!e.SSF&&(e.SSF=Va(tn)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Vb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=vH.indexOf(t.bookType)>-1,s=O4();K4(t=t||{});var i=y4(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Sn(i,o,Pz(e.Props,t)),s.coreprops.push(o),va(t.rels,2,o,Tn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Sn(i,o,Rz(e.Props)),s.extprops.push(o),va(t.rels,3,o,Tn.EXT_PROPS),e.Custprops!==e.Props&&Ss(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Sn(i,o,Fz(e.Custprops)),s.custprops.push(o),va(t.rels,4,o,Tn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var h={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Sn(i,o,EH(l-1,t,e,h)),s.sheets.push(o),va(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(m){var v=m["!comments"],g=!1,b="";if(v&&v.length>0){var y=!1;v.forEach(function(C){C[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+r,Sn(i,b,jye(v,u,t)),s.threadedcomments.push(b),va(h,-1,"../threadedComments/threadedComment"+l+"."+r,Tn.TCMNT)),b="xl/comments"+l+"."+r,Sn(i,b,xH(v)),s.comments.push(b),va(h,-1,"../comments"+l+"."+r,Tn.CMNT),g=!0}m["!legacy"]&&g&&Sn(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Sn(i,py(o),sv(h))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Sn(i,o,nH(t.Strings,t)),s.strs.push(o),va(t.wbrels,-1,"sharedStrings."+r,Tn.SST)),o="xl/workbook."+r,Sn(i,o,PH(e)),s.workbooks.push(o),va(t.rels,1,o,Tn.WB),o="xl/theme/theme1.xml",Sn(i,o,U4(e.Themes,t)),s.themes.push(o),va(t.wbrels,-1,"theme/theme1.xml",Tn.THEME),o="xl/styles."+r,Sn(i,o,uH(e,t)),s.styles.push(o),va(t.wbrels,-1,"styles."+r,Tn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Sn(i,o,e.vbaraw),s.vba.push(o),va(t.wbrels,-1,"vbaProject.bin",Tn.VBA)),o="xl/metadata."+r,Sn(i,o,mH()),s.metadata.push(o),va(t.wbrels,-1,"metadata."+r,Tn.XLMETA),u.length>1&&(o="xl/persons/person.xml",Sn(i,o,wye(u)),s.people.push(o),va(t.wbrels,-1,"persons/person.xml",Tn.PEOPLE)),Sn(i,"[Content_Types].xml",Az(s,t)),Sn(i,"_rels/.rels",sv(t.rels)),Sn(i,"xl/_rels/workbook."+r+".rels",sv(t.wbrels)),delete t.revssf,delete t.ssf,i}function X4(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ic(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function pSe(e,t){return zr.find(e,"EncryptedPackage")?uSe(e,t):FH(e,t)}function xSe(e,t){var r,n=e,s=t||{};return s.type||(s.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r=sz(n,s),dSe(r,s)}function HH(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return SD(e.slice(r),t);default:break e}return Tv.to_workbook(e,t)}function vSe(e,t){var r="",n=X4(e,t);switch(t.type){case"base64":r=ic(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=wx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ca(r)),t.type="binary",HH(r,t)}function gSe(e,t){var r=e;return t.type=="base64"&&(r=ic(r)),r=cy.utils.decode(1200,r.slice(2),"str"),t.type="binary",HH(r,t)}function bSe(e){return e.match(/[^\x00-\x7F]/)?Pu(e):e}function lE(e,t,r,n){return n?(r.type="string",Tv.to_workbook(e,r)):Tv.to_workbook(t,r)}function _D(e,t){p4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return _D(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),ov={},r.dateNF&&(ov.dateNF=r.dateNF),r.type||(r.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=En?"buffer":"binary",n=fxe(e),typeof Uint8Array<"u"&&!En&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=bSe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Va(r),r.type="array",_D(x4(n),r)}switch((s=X4(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return pSe(zr.read(n,r),r);break;case 9:if(s[1]<=8)return FH(n,r);break;case 60:return SD(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Sge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return tH.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?xSe(n,r):lE(e,n,r,i);case 239:return s[3]===60?SD(n,r):lE(e,n,r,i);case 255:if(s[1]===254)return gSe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return dx.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return dx.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return wD.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return lH.to_workbook(n,r);break;case 10:case 13:case 32:return vSe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return wge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?wD.to_workbook(n,r):lE(e,n,r,i)}function WH(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return e1(t.file,zr.write(e,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return zr.write(e,t)}function ySe(e,t){var r=Va(t||{}),n=hSe(e,r);return jSe(n,r)}function jSe(e,t){var r={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?zr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(xS(s))}return t.password&&typeof encrypt_agile<"u"?WH(encrypt_agile(s,t.password),t):t.type==="file"?e1(t.file,s):t.type=="string"?Ca(s):s}function NSe(e,t){var r=t||{},n=b2e(e,r);return WH(n,r)}function yu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return dy(Pu(n));case"binary":return Pu(n);case"string":return e;case"file":return e1(t.file,n,"utf8");case"buffer":return En?pf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):yu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function wSe(e,t){switch(t.type){case"base64":return dy(e);case"binary":return e;case"string":return e;case"file":return e1(t.file,e,"binary");case"buffer":return En?pf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Hj(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?dy(r):t.type=="string"?Ca(r):r;case"file":return e1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function GH(e,t){p4(),pwe(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=GH(e,r);return r.type="array",xS(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yu(h2e(e,r),r);case"slk":case"sylk":return yu(eH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return yu(BH(e.Sheets[e.SheetNames[s]],r),r);case"txt":return wSe(YH(e.Sheets[e.SheetNames[s]],r),r);case"csv":return yu(Q4(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return yu(tH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Hj(wD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return yu(Tv.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return yu(lH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return yu(rH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return yu(VH(e,r),r);case"wk1":return Hj(dx.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Hj(dx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Hj(LH(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),NSe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ySe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function SSe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Zu(e,t,r){var n={};return n.type="file",n.file=t,SSe(n),GH(e,n)}function CSe(e,t,r,n,s,i,o,l){var c=$s(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=o?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[p]!=null&&(m[i[p]]=d);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)m[i[p]]=null;else if(d!==void 0)m[i[p]]=d;else if(u&&g===null)m[i[p]]=null;else continue;else m[i[p]]=u&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:of(v,g,l);g!=null&&(h=!1)}}return{row:m,isempty:h}}function Lw(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof u){case"string":c=Yn(u);break;case"number":c=Yn(e["!ref"]),c.s.r=u;break;default:c=u}n>0&&(s=0);var h=$s(c.s.r),m=[],p=[],v=0,g=0,b=Array.isArray(e),y=c.s.r,C=0,N={};b&&!e[y]&&(e[y]=[]);var k=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(C=c.s.c;C<=c.e.c;++C)if(!(k[C]||{}).hidden)switch(m[C]=cs(C),r=b?e[y][C]:e[m[C]+h],n){case 1:i[C]=C-c.s.c;break;case 2:i[C]=m[C];break;case 3:i[C]=d.header[C-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=of(r,null,d),g=N[o]||0,!g)N[o]=1;else{do l=o+"_"+g++;while(N[l]);N[o]=g,N[l]=1}i[C]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(S[y]||{}).hidden){var D=CSe(e,c,y,m,n,i,b,d);(D.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(p[v++]=D.row)}return p.length=v,p}var X6=/"/g;function kSe(e,t,r,n,s,i,o,l){for(var c=!0,d=[],u="",h=$s(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=l.dense?(e[r]||[])[m]:e[n[m]+h];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:of(p,null,l));for(var v=0,g=0;v!==u.length;++v)if((g=u.charCodeAt(v))===s||g===i||g===34||l.forceQuotes){u='"'+u.replace(X6,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(X6,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function Q4(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Yn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(m[v]||{}).hidden||(h[v]=cs(v));for(var g=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(u=kSe(e,s,b,h,o,c,i,n),u!=null&&(n.strip&&(u=u.replace(d,"")),(u||n.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete n.dense,r.join("")}function YH(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Q4(e,t);return r}function _Se(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Yn(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=cs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=$s(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function KH(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var h=Yn(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(g,b){Ss(g).forEach(function(y){(p=m.indexOf(y))==-1&&(m[p=m.length]=y);var C=g[y],N="z",k="",S=an({c:l+p,r:o+b+s});d=Ny(i,S),C&&typeof C=="object"&&!(C instanceof Date)?i[S]=C:(typeof C=="number"?N="n":typeof C=="boolean"?N="b":typeof C=="string"?N="s":C instanceof Date?(N="d",n.cellDates||(N="n",C=hi(C)),k=n.dateNF||tn[14]):C===null&&n.nullError&&(N="e",C=0),d?(d.t=N,d.v=C,delete d.w,delete d.R,k&&(d.z=k)):i[S]=d={t:N,v:C},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+m.length-1);var v=$s(o);if(s)for(p=0;p<m.length;++p)i[cs(p+l)+v]={t:"s",v:m[p]};return i["!ref"]=yn(u),i}function ESe(e,t){return KH(null,e,t)}function Ny(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ny(e,an(t)):Ny(e,an({r:t,c:r||0}))}function DSe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function J4(){return{SheetNames:[],Sheets:{}}}function Z4(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(IH(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ASe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=DSe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function TSe(e,t){return e.z=t,e}function XH(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function ISe(e,t,r){return XH(e,"#"+t,r)}function PSe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function OSe(e,t,r,n){for(var s=typeof t!="string"?t:Yn(t),i=typeof t=="string"?t:yn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Ny(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var sa={encode_col:cs,encode_row:$s,encode_cell:an,encode_range:yn,decode_col:E4,decode_row:_4,split_cell:Hxe,decode_cell:ds,decode_range:ml,format_cell:of,sheet_add_aoa:wz,sheet_add_json:KH,sheet_add_dom:UH,aoa_to_sheet:og,json_to_sheet:ESe,table_to_sheet:$H,table_to_book:$2e,sheet_to_csv:Q4,sheet_to_txt:YH,sheet_to_json:Lw,sheet_to_html:BH,sheet_to_formulae:_Se,sheet_to_row_object_array:Lw,sheet_get_cell:Ny,book_new:J4,book_append_sheet:Z4,book_set_sheet_visibility:ASe,cell_set_number_format:TSe,cell_set_hyperlink:XH,cell_set_internal_link:ISe,cell_add_comment:PSe,sheet_set_array_formula:OSe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gf=({show:e,onClose:t,onImport:r,masterDataType:n,templateFields:s=[],apiEndpoint:i})=>{const[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState(!1),[m,p]=w.useState(0),[v,g]=w.useState([]),[b,y]=w.useState([]),[C,N]=w.useState(!1),[k,S]=w.useState(null),D=w.useRef(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("selectedFinancialYear");const E={material:{name:"Material Master",fields:["materialId","categoryName","description","baseUnit","orderUnit","conversionValue","dimension","hsn","mpn","minstock","safetyStock","maxstock","pdt","materialgroup","location"],sampleData:{materialId:"MAT001",categoryName:"Raw Materials",description:"Sample Raw Material Description",baseUnit:"KG",orderUnit:"KG",conversionValue:1,dimension:"10x10x10",hsn:"1234567890",mpn:"MPN001",minstock:10,safetyStock:5,maxstock:100,pdt:7,materialgroup:"RAW_MATERIAL",location:"WH01"}},customer:{name:"Customer Master",fields:["cnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","name","email","isDeleted","isBlocked"],sampleData:{cnNo:"CUST000001",categoryName:"Retail Customers",name1:"Sample Customer Pvt Ltd",name2:"Sample Customer",search:"SAMPLE_CUSTOMER",address1:"123, Business Street",address2:"Near Business Park",extraAddresses:"Alternative Address 1, Alternative Address 2",city:"Mumbai",pincode:"400001",region:"Maharashtra",country:"India",contactNo:"9876543210",name:"Contact Person Name",email:"customer@example.com",isDeleted:!1,isBlocked:!1}},vendor:{name:"Vendor Master",fields:["vnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","contactname","email","isDeleted","isBlocked"],sampleData:{vnNo:"VEND000001",categoryName:"Raw Material Suppliers",name1:"Sample Vendor Pvt Ltd",name2:"Sample Vendor",search:"SAMPLE_VENDOR",address1:"456, Supplier Avenue",address2:"Industrial Area",extraAddresses:"Warehouse Address 1, Backup Address 2",city:"Delhi",pincode:"110001",region:"Delhi",country:"India",contactNo:"9876543210",contactname:"Vendor Contact Person",email:"vendor@example.com",isDeleted:!1,isBlocked:!1}},customerPriceList:{name:"Customer Price List",fields:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup","taxCode","tandc"],sampleData:{categoryName:"Retail Customers",customerCode:"CUST000001",materialCode:"MAT001",unit:"KG",bum:250.75,orderUnit:"BOX",salesGroup:"RETAIL",taxCode:"GST1",tandc:"Payment terms: 30 days net. Delivery: FOB warehouse."}},vendorPriceList:{name:"Vendor Price List",fields:["categoryName","vendorCode","materialCode","unit","bum","orderUnit","buyer","taxCode"],sampleData:{categoryName:"Raw Material Suppliers",vendorCode:"VEND000001",materialCode:"MAT001",unit:"KG",bum:150.5,orderUnit:100,buyer:"John Doe",taxCode:"GST1"}},tax:{name:"Tax Master",fields:["taxCode","taxName","cgst","sgst","igst"],sampleData:{taxCode:"GST1",taxName:"GST Standard Rate 18%",cgst:"9",sgst:"9",igst:"18"}},location:{name:"Location Master",fields:["name","address","city","state","country","postalCode","contactPerson","contactNumber"],sampleData:{name:"Main Warehouse",address:"123, Industrial Area, Sector 5",city:"Bangalore",state:"Karnataka",country:"India",postalCode:"560001",contactPerson:"Warehouse Manager",contactNumber:"+91-9876543210"}},generalCondition:{name:"General Condition Master",fields:["name","description","isDeleted","isBlocked"],sampleData:{name:"Standard Terms and Conditions",description:"Default terms and conditions applicable to all transactions. Payment due within 30 days. Quality complaints must be reported within 48 hours.",isDeleted:!1,isBlocked:!1}},process:{name:"Process Master",fields:["processId","processDescription","isDeleted","isBlocked"],sampleData:{processId:"PROC001",processDescription:"Standard manufacturing process for raw material conversion. Includes quality checks at each stage.",isDeleted:!1,isBlocked:!1}}},T=()=>E[n]||E.material,A=Q=>{const B=Q.target.files[0];if(!B)return;if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"].includes(B.type)){alert("Please select a valid file format (CSV, Excel, or JSON)");return}l(B),g([]),S(null),L(B)},L=async Q=>{h(!0),p(10);try{if(Q.type==="application/json"){const B=await Q.text(),te=JSON.parse(B);d(Array.isArray(te)?te:[te])}else if(Q.type==="text/csv"){const te=(await Q.text()).split(`
`),X=te[0].split(",").map(M=>M.trim().replace(/"/g,"")),ce=te.slice(1).filter(M=>M.trim()).map(M=>{const q=[];let z="",K=!1;for(let ne=0;ne<M.length;ne++){const ae=M[ne];ae==='"'&&(ne===0||M[ne-1]===",")?K=!0:ae==='"'&&K&&(ne===M.length-1||M[ne+1]===",")?K=!1:ae===","&&!K?(q.push(z.trim()),z=""):z+=ae}q.push(z.trim());const ee={};return X.forEach((ne,ae)=>{ee[ne]=q[ae]||""}),ee});d(ce)}else{const B=await Q.arrayBuffer(),te=_D(B,{type:"buffer"}),X=te.SheetNames[0],ce=te.Sheets[X],M=sa.sheet_to_json(ce);d(M)}p(50),P()}catch(B){console.error("Error parsing file:",B),g([{row:0,error:"Failed to parse file: "+B.message}])}finally{h(!1),p(100)}},P=()=>{const Q=[],B=c.slice(0,5);c.forEach((te,X)=>{({material:["materialId","categoryName","description","baseUnit","orderUnit"],customer:["cnNo","categoryName","name1","search","address1","contactNo","region","country"],vendor:["vnNo","categoryName","name1","search","address1","contactNo","region","country"],vendorPriceList:["categoryName","vendorCode","materialCode","unit","bum","orderUnit"],customerPriceList:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup"],tax:["taxCode","taxName","cgst","sgst","igst"],location:["name"],generalCondition:[],process:[]}[n]||[]).forEach(q=>{(!te[q]||te[q].toString().trim()==="")&&Q.push({row:X+1,field:q,error:`${q} is required`})}),n==="tax"&&(te.taxCode&&te.taxCode.length>4&&Q.push({row:X+1,field:"taxCode",error:"taxCode must be 4 characters or less"}),te.taxName&&te.taxName.length>25&&Q.push({row:X+1,field:"taxName",error:"taxName must be 25 characters or less"}),te.cgst&&te.cgst.length>2&&Q.push({row:X+1,field:"cgst",error:"cgst must be 2 characters or less"}),te.sgst&&te.sgst.length>2&&Q.push({row:X+1,field:"sgst",error:"sgst must be 2 characters or less"}),te.igst&&te.igst.length>2&&Q.push({row:X+1,field:"igst",error:"igst must be 2 characters or less"}))}),g(Q),y(B)},O=Q=>{const B=T(),te=[B.sampleData];if(Q==="csv"){const X=[B.fields.join(","),B.fields.map(z=>{const K=B.sampleData[z]||"";return typeof K=="string"&&K.includes(",")?`"${K}"`:K}).join(",")].join(`
`),ce=new Blob([X],{type:"text/csv"}),M=window.URL.createObjectURL(ce),q=document.createElement("a");q.href=M,q.download=`${B.name.replace(/\s+/g,"_")}_Template.csv`,q.click(),window.URL.revokeObjectURL(M)}else if(Q==="excel"){const X=sa.json_to_sheet(te),ce=sa.book_new();sa.book_append_sheet(ce,X,"Template"),Zu(ce,`${B.name.replace(/\s+/g,"_")}_Template.xlsx`)}else if(Q==="json"){const X=JSON.stringify(te,null,2),ce=new Blob([X],{type:"application/json"}),M=window.URL.createObjectURL(ce),q=document.createElement("a");q.href=M,q.download=`${B.name.replace(/\s+/g,"_")}_Template.json`,q.click(),window.URL.revokeObjectURL(M)}},J=async()=>{if(v.length>0){alert("Please fix validation errors before importing");return}h(!0);try{const Q=localStorage.getItem("selectedCompanyId"),B=localStorage.getItem("financialYear"),te=await fetch(`/api/master-data/${n}/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c,companyId:Q,financialYear:B})}),X=await te.json();te.ok?(S(X),r&&r(X)):alert("Import failed: "+X.message)}catch(Q){console.error("Import error:",Q),alert("Import failed: "+Q.message)}finally{h(!1)}},W=()=>{l(null),d([]),g([]),y([]),N(!1),S(null),p(0),D.current&&(D.current.value="")},re=()=>{W(),t()};if(!e)return null;const U=T();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Import ",U.name]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:re})]}),a.jsx("div",{className:"modal-body",children:k?a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-check-circle me-2"}),"Import Complete"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-success",children:k.results?.imported||0}),a.jsx("p",{className:"text-muted",children:"Records Imported"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-warning",children:k.results?.updated||0}),a.jsx("p",{className:"text-muted",children:"Records Updated"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-danger",children:k.results?.failed||0}),a.jsx("p",{className:"text-muted",children:"Records Failed"})]})})]}),k.results?.errors&&k.results.errors.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Error Details:"}),a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:k.results.errors.map((Q,B)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsx("small",{children:Q})},B))})]}),a.jsx("div",{className:"mt-3 d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:re,children:"Close"})})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-download me-2"}),"Download Template"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("p",{className:"text-muted",children:"Download the template in your preferred format and fill in your data:"}),a.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:()=>O("csv"),children:[a.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Template"]}),a.jsxs("button",{className:"btn btn-outline-info btn-sm",onClick:()=>O("excel"),children:[a.jsx("i",{className:"fas fa-file-excel me-1"}),"Excel Template"]}),a.jsxs("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>O("json"),children:[a.jsx("i",{className:"fas fa-file-code me-1"}),"JSON Template"]})]}),a.jsx("div",{className:"mt-3",children:a.jsxs("small",{className:"text-muted",children:[a.jsx("strong",{children:"Template Fields:"})," ",U.fields.join(", ")]})})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Upload File"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"mb-3 col-xl-6",children:[a.jsx("input",{ref:D,type:"file",className:"form-control form-control-sm",accept:".csv,.xlsx,.xls,.json",onChange:A}),a.jsx("div",{className:"form-text",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]}),m>0&&m<100&&a.jsx("div",{className:"progress mb-3",children:a.jsxs("div",{className:"progress-bar",style:{width:`${m}%`},children:[m,"%"]})})]})]}),v.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-danger text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"Validation Errors (",v.length,")"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:v.map((Q,B)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsxs("small",{children:["Row ",Q.row,": ",Q.field&&`${Q.field} - `,Q.error]})},B))})})]}),b.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-eye me-2"}),"Preview (First 5 records)"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsx("tr",{children:U.fields.map(Q=>a.jsx("th",{style:{minWidth:"120px"},children:Q},Q))})}),a.jsx("tbody",{children:b.map((Q,B)=>a.jsx("tr",{children:U.fields.map(te=>a.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Q[te]!==void 0&&Q[te]!==null?Q[te].toString():"-"},te))},B))})]})})})]}),!k&&c.length>0&&a.jsx("div",{className:"d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-primary",onClick:J,disabled:u||v.length>0,children:u?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-upload me-1"}),"Import Data (",c.length," records)"]})})})]})})]})})})]})},Q6=["Piece","Box","Kg","Ltr"],MSe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",minstock:"",safetyStock:"",maxstock:"",pdt:"",mpn:"",location:"",materialgroup:"",hsn:""}),[m,p]=w.useState(""),[v,g]=w.useState(1),[b]=w.useState(10),[y,C]=w.useState(!1),[N,k]=w.useState(!1),[S,D]=w.useState(""),[E,T]=w.useState(""),[A,L]=w.useState(null);w.useEffect(()=>{P(),W()},[]),w.useEffect(()=>{if(!m)l(r);else{const Ne=r.filter(Le=>{const Je=m.toLowerCase();return(Le.materialId||"").toLowerCase().includes(Je)||(Le.description||"").toLowerCase().includes(Je)||(Le.baseUnit||"").toLowerCase().includes(Je)||(Le.orderUnit||"").toLowerCase().includes(Je)||(Le.conversionValue||"").toString().toLowerCase().includes(Je)||(Le.dimension||"").toLowerCase().includes(Je)||(Le.mpn||"").toLowerCase().includes(Je)||(Le.hsn||"").toLowerCase().includes(Je)||(Le.location||"").toLowerCase().includes(Je)||(Le.materialgroup||"").toLowerCase().includes(Je)});l(Ne)}g(1)},[m,r]);const P=async()=>{const Ne=await Oe.get("/api/category",{params:{companyId:O,financialYear:J}});t(Ne.data)},O=localStorage.getItem("selectedCompanyId"),J=localStorage.getItem("financialYear"),W=async()=>{const Ne=await Oe.get("/api/material",{params:{companyId:O,financialYear:J}});console.log(Ne);const Le=Ne.data.sort((Je,lt)=>new Date(lt.createdAt)-new Date(Je.createdAt));n(Le)},re=Ne=>{const{name:Le,value:Je}=Ne.target;h(lt=>({...lt,[Le]:Je}))},U=Ne=>{p(Ne.target.value)},Q=Ne=>{d(Ne),h({categoryId:Ne.categoryId?._id||Ne.categoryId,description:Ne.description,baseUnit:Ne.baseUnit,orderUnit:Ne.orderUnit,conversionValue:Ne.conversionValue||"",dimension:Ne.dimension||"",mpn:Ne.mpn||"",location:Ne.location||"",materialgroup:Ne.materialgroup||"",hsn:Ne.hsn||"",minstock:Ne.minstock||"",safetyStock:Ne.safetyStock||"",maxstock:Ne.maxstock||"",pdt:Ne.pdt||""})},B=()=>{d(null),h({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",hsn:"",mpn:"",location:"",materialgroup:"",minstock:"",safetyStock:"",maxstock:"",pdt:""}),D(""),T(""),L(null)},te=async Ne=>{Ne.preventDefault();try{c?(await Oe.put(`/api/material/${c._id}`,u),alert("Material updated!"),W(),B(),z()):(L(u),C(!1),k(!0))}catch(Le){console.error(Le),alert("Operation failed!")}},X=async()=>{try{let Ne;const Le=localStorage.getItem("selectedCompanyId"),Je=localStorage.getItem("financialYear");S==="external"?Ne=E:Ne=(await Oe.post("/api/material/generate-id",{categoryId:A.categoryId})).data.materialId,await Oe.post("/api/material",{...A,materialId:Ne,materialIdType:S,companyId:Le,financialYear:Je}),alert("Material added!"),W(),B(),z()}catch(Ne){console.error(Ne),alert("Operation failed!")}},ce=async(Ne,Le,Je)=>{try{const lt={[Le]:Je};await Oe.put(`/api/material/status/${Ne}`,lt),n(r.map(vt=>vt._id===Ne?{...vt,[Le]:Je}:vt)),alert("Status updated successfully!")}catch(lt){console.error("Error updating status:",lt),alert("Failed to update status!")}},M=()=>{const Ne=o.map(Tt=>({"Material ID":Tt.materialId||"",Description:Tt.description||"","Base Unit":Tt.baseUnit||"","Order Unit":Tt.orderUnit||"","Conversion Value":Tt.conversionValue||"",Dimension:Tt.dimension||"",MPN:Tt.mpn||"",HSN:Tt.hsn||"","Min Stock":Tt.minstock||"","Safety Stock":Tt.safetyStock||"","Max Stock":Tt.maxstock||"",PDT:Tt.pdt||"",Location:Tt.location||"","Material Group":Tt.materialgroup||"","Is Deleted":Tt.isDeleted?"Yes":"No","Is Blocked":Tt.isBlocked?"Yes":"No","Created Date":Tt.createdAt?new Date(Tt.createdAt).toLocaleDateString():"","Updated Date":Tt.updatedAt?new Date(Tt.updatedAt).toLocaleDateString():""})),Le=sa.book_new(),Je=sa.json_to_sheet(Ne),lt=[{wch:15},{wch:30},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:15},{wch:12},{wch:15},{wch:12},{wch:10},{wch:20},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Je["!cols"]=lt,sa.book_append_sheet(Le,Je,"Materials");const vt=new Date,Re=vt.toLocaleDateString("en-GB").replace(/\//g,"-"),ht=vt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),At=`Material-Master-${Re}-${ht}.xlsx`;Zu(Le,At),ie()},q=()=>C(!0),z=()=>{C(!1),k(!1),L(null)},K=()=>{k(!1),D(""),T(""),L(null),C(!0)},ee=Ne=>{D(Ne),Ne==="internal"&&X()},[ne,ae]=w.useState(!1),ie=()=>ae(!1),[G,de]=w.useState([]);w.useEffect(()=>{(async()=>{try{const Le=await Oe.get("/api/locations",{params:{companyId:O}});de(Le.data)}catch(Le){console.error("Error fetching locations:",Le)}})()},[]);const Y=v*b,oe=Y-b,Se=o.slice(oe,Y),ue=Math.ceil(o.length/b),se=Ne=>{g(Ne)},ye=Ne=>{console.log("Import successful:",Ne),W()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:m,onChange:U})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-info btn-sm me-2",onClick:()=>i(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:M,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{q(),B()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Material"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base"}),a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Conversion"}),a.jsx("th",{children:"Dimension"}),a.jsx("th",{children:"MPN"}),a.jsx("th",{children:"HSN"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"safety Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"PDT"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Se.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"16",className:"text-center",children:m?"No materials found matching your search":"No materials found"})}):Se.map(Ne=>a.jsxs("tr",{children:[a.jsx("td",{children:Ne.materialId}),a.jsx("td",{className:"text-wrap",children:Ne.description}),a.jsx("td",{children:Ne.baseUnit}),a.jsx("td",{children:Ne.orderUnit}),a.jsx("td",{children:Ne.conversionValue||"-"}),a.jsx("td",{className:"text-wrap",children:Ne.dimension||"-"}),a.jsx("td",{children:Ne.mpn||"_"}),a.jsx("td",{children:Ne.hsn||"_"}),a.jsx("td",{children:Ne.minstock||"_"}),a.jsx("td",{children:Ne.safetyStock||"_"}),a.jsx("td",{children:Ne.maxstock||"_"}),a.jsx("td",{children:Ne.pdt||"_"}),a.jsx("td",{className:"text-wrap",children:Ne.location||"_"}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isDeleted||!1,onChange:Le=>ce(Ne._id,"isDeleted",Le.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isBlocked||!1,onChange:Le=>ce(Ne._id,"isBlocked",Le.target.checked)})})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!Ne.isDeleted&&!Ne.isBlocked?"bg-success":Ne.isDeleted&&Ne.isBlocked?"bg-dark":Ne.isDeleted?"bg-secondary":"bg-danger"}`,children:!Ne.isDeleted&&!Ne.isBlocked?"Active":Ne.isDeleted&&Ne.isBlocked?"Deleted & Blocked":Ne.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{Q(Ne),q()},children:"Edit"})})]},Ne._id))})]})})})]}),ue>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>se(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Le=[],Je=[];Le.push(1);for(let Re=Math.max(2,v-2);Re<=Math.min(ue-1,v+2);Re++)Le.push(Re);ue>1&&Le.push(ue);const lt=[...new Set(Le)].sort((Re,ht)=>Re-ht);let vt;for(let Re of lt)vt&&(Re-vt===2?Je.push(vt+1):Re-vt!==1&&Je.push("...")),Je.push(Re),vt=Re;return Je.map((Re,ht)=>Re==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ht}`):a.jsx("li",{className:`page-item ${v===Re?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>se(Re),children:Re})},Re))})(),a.jsx("li",{className:`page-item ${v===ue?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>se(v+1),disabled:v===ue,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})}),N&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Material ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Material ID:"}),S==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3 ",children:[a.jsx("label",{className:"form-label",children:"External Material ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:E,onChange:Ne=>T(Ne.target.value),maxLength:50,required:!0,placeholder:"Enter custom material ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[E.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:X,disabled:!E.trim(),children:"Create Material"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>D(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>ee("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ee("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Custom ID)"]})})]})]})]})})})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:c?"Edit Material":"Add New Material"}),a.jsx("button",{type:"button",className:"btn-close",onClick:z,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:te,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:u.categoryId,onChange:re,className:"form-select",placeholder:"Select Category",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),e.map(Ne=>a.jsx("option",{value:Ne._id,children:Ne.categoryName},Ne._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"description",value:u.description,onChange:re,className:"form-control",placeholder:"Enter Description",maxLength:100,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"HSN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"hsn",value:u.hsn,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Base Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"baseUnit",value:u.baseUnit,onChange:re,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Order Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"orderUnit",value:u.orderUnit,onChange:re,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),u.baseUnit&&u.orderUnit&&u.baseUnit!==u.orderUnit&&a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label text-primary",children:"Unit Conversion"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{name:"conversionValue",value:u.conversionValue,onChange:re,className:"form-control",required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Min Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"minstock",value:u.minstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Safety Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"safetyStock",value:u.safetyStock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Max Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"maxstock",value:u.maxstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Material Group"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"materialgroup",value:u.materialgroup,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"MPN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"mpn",value:u.mpn,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Packing"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"dimension",value:u.dimension,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Shipping Note"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"pdt",type:"text",value:u.pdt,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"location",value:u.location,onChange:re,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"Select Location"}),G.map(Ne=>a.jsx("option",{value:Ne.name,children:Ne.name},Ne.name))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:B,children:"Clear"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update Material":"Save Material"})]})]})})]})})})]}),a.jsx(gf,{show:s,onClose:()=>i(!1),onImport:ye,masterDataType:"material",apiEndpoint:"materials"})]})};function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zr.apply(null,arguments)}function RSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ED(e,t){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ED(e,t)}function FSe(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),[b,y]=w.useState({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},N=e.filter(U=>{if(!v)return!0;const Q=v.toLowerCase(),B=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.processId?.toLowerCase().includes(Q)||U.processDescription?.toLowerCase().includes(Q)||B.toLowerCase().includes(Q)||(U.isDeleted?"yes deleted":"no active").includes(Q)||(U.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(N.length/m),S=(u-1)*m,D=S+m,E=N.slice(S,D),T=U=>{g(U.target.value),h(1)},A=U=>{h(U)},L=()=>{const Q=(v?N:e).map((ne,ae)=>({"S.No":ae+1,"Process ID":ne.processId||"","Process Description":ne.processDescription||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=sa.book_new(),te=sa.json_to_sheet(Q),X=[{wch:8},{wch:15},{wch:40},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];te["!cols"]=X,sa.book_append_sheet(B,te,"Process List Master");const ce=new Date,M=ce.toLocaleDateString("en-GB").replace(/\//g,"-"),q=ce.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),K=`Process-List-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${q}.xlsx`;Zu(B,K);const ee=v?N.length:e.length;alert(`Excel file exported successfully: ${ee} records exported as ${K}`)},P=async()=>{try{const U=await Oe.get("/api/processes",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Fetch failed:",U),alert("Error loading processes")}},O=(U=null)=>{U?(y({processId:U.processId||"",processDescription:U.processDescription||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},J=async()=>{try{if(!b.processId.trim()){alert("Process ID is required");return}if(!b.processDescription.trim()){alert("Process Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/processes/${s._id}`,U),alert("Process updated successfully!")):(await Oe.post("/api/processes",U),alert("Process added successfully!")),P(),n(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving process. Please try again.")}},W=async(U,Q,B)=>{try{const te={[Q]:B,companyId:o,financialYear:l};await Oe.put(`/api/processes/${U}`,te),alert(`Process ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(te){console.error("Status update failed:",te),alert("Error updating status")}},re=()=>{n(!1),i(null),y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1})};return w.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Process List Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Process List Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by ID, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:N.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Process"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Process ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Is Deleted"}),a.jsx("th",{children:"Is Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No processes found matching your search criteria":"No processes found"})}):E.map((U,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:U.processId})}),a.jsx("td",{className:"text-wrap",children:U.processDescription}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:B=>W(U._id,"isDeleted",B.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:B=>W(U._id,"isBlocked",B.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),A(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:s?"Edit Process":"Add New Process"}),a.jsx("button",{type:"button",className:"btn-close",onClick:re,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"d-flex  align-items-center",children:[a.jsxs("div",{className:" col-md-2 row me-4",children:[a.jsx("label",{className:"form-label col-xl-7",children:"Process_ID"}),a.jsx("input",{type:"text",className:" col-xl-5  form-control-sm",placeholder:"Enter Process ID",value:b.processId,onChange:U=>y({...b,processId:U.target.value}),required:!0})]}),a.jsxs("div",{className:"col-md-10 row",children:[a.jsx("label",{className:"form-label col-xl-2 mt-4",children:"Process Description"}),a.jsx("textarea",{type:"text",className:"form-control-sm col-xl-10",rows:"4",placeholder:"Enter Process Description",value:b.processDescription,onChange:U=>y({...b,processDescription:U.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary me-3",onClick:re,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:J,children:[s?"Update":"Save"," Process"]})]})]})})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"process"})]})}function LSe(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),[b,y]=w.useState({name:"",description:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},N=e.filter(U=>{if(!v)return!0;const Q=v.toLowerCase(),B=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.name?.toLowerCase().includes(Q)||U.description?.toLowerCase().includes(Q)||B.toLowerCase().includes(Q)||(U.isDeleted?"yes deleted":"no active").includes(Q)||(U.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(N.length/m),S=(u-1)*m,D=S+m,E=N.slice(S,D),T=U=>{g(U.target.value),h(1)},A=U=>{h(U)},L=()=>{const Q=(v?N:e).map((ne,ae)=>({"S.No":ae+1,"Condition Name":ne.name||"",Description:ne.description||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=sa.book_new(),te=sa.json_to_sheet(Q),X=[{wch:8},{wch:25},{wch:50},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];te["!cols"]=X,sa.book_append_sheet(B,te,"General Condition Master");const ce=new Date,M=ce.toLocaleDateString("en-GB").replace(/\//g,"-"),q=ce.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),K=`General-Condition-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${q}.xlsx`;Zu(B,K);const ee=v?N.length:e.length;alert(`Excel file exported successfully: ${ee} records exported as ${K}`)},P=async()=>{try{const U=await Oe.get("/api/general-conditions",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Failed to fetch:",U),alert("Error loading general conditions")}},O=(U=null)=>{U?(y({name:U.name||"",description:U.description||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({name:"",description:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},J=async()=>{try{if(!b.name.trim()){alert("Condition name is required");return}if(!b.description.trim()){alert("Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/general-conditions/${s._id}`,U),alert("General condition updated successfully!")):(await Oe.post("/api/general-conditions",U),alert("General condition added successfully!")),P(),n(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving general condition. Please try again.")}},W=async(U,Q,B)=>{try{const te={[Q]:B,companyId:o,financialYear:l};await Oe.put(`/api/general-conditions/${U}`,te),alert(`General condition ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(te){console.error("Status update failed:",te),alert("Error updating status")}},re=()=>{n(!1),i(null),y({name:"",description:"",isDeleted:!1,isBlocked:!1})};return w.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"General Condition Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"General Condition Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:N.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add General Condition"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Condition Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Deleted"}),a.jsx("th",{children:"Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No general conditions found matching your search criteria":"No general conditions found"})}):E.map((U,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:U.name})}),a.jsx("td",{className:"text-wrap",children:U.description}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:B=>W(U._id,"isDeleted",B.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:B=>W(U._id,"isBlocked",B.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),A(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," General Condition"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:re,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:" form-label col-xl-6",children:"Condition Name"}),a.jsx("input",{type:"text",className:"form-control col-xl-6",placeholder:"Enter General Condition Name",value:b.name,onChange:U=>y({...b,name:U.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-9",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:"form-label col-xl-2",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",placeholder:"Enter Description",value:b.description,onChange:U=>y({...b,description:U.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"row ",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"me-3 btn btn-secondary",onClick:re,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:J,children:[s?"Update":"Save"," Condition"]})]})]})})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"generalCondition"})]})}const J6=["Piece","Box","Kg","Ltr"],BSe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState(""),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(new Date().toISOString().split("T")[0]),[C,N]=w.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}]),[k,S]=w.useState(!1),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState("materialId"),[O,J]=w.useState(null),[W,re]=w.useState(!1),[U,Q]=w.useState([]),[B,te]=w.useState(""),[X,ce]=w.useState(""),[M,q]=w.useState(1),[z]=w.useState(5),[K,ee]=w.useState(1),[ne]=w.useState(3),ae="MMNR-",ie=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:ie}}).then(De=>{const Ye=De.data.filter(jt=>!jt.isDeleted&&!jt.isBlocked);t(Ye),console.log("Fetched materials:",Ye)}).catch(De=>console.error(De)),Oe.get("/api/locations").then(De=>Q(De.data))},[]),w.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:ie,financialYear:G}}).then(De=>d(De.data)).catch(De=>console.error(De))},[]);const de=()=>{N(De=>[...De,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}])},Y=De=>{N(jt=>jt.filter((Qe,Xe)=>Xe!==De));const Ye=Math.ceil((C.length-1)/z);M>Ye&&Ye>0&&q(Ye)},oe=async(De,Ye,jt)=>{const Qe=[...C];if(Qe[De][Ye]=jt,Ye==="materialId"&&Qe[De].isManual)try{const Be=(await Oe.get(`/api/material/byId/${jt}`)).data;Be&&(Qe[De]={...Qe[De],materialId:Be.materialId,description:Be.description,baseUnit:Be.baseUnit,orderUnit:Be.orderUnit,location:Be.location,materialgroup:Be.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",jt)}N(Qe)},Se=()=>{if(!D.trim()){A([]);return}if(L==="materialId"){let De=D;/^\d+$/.test(D)&&(De=ae+D);const Ye=e.filter(jt=>(jt.materialId||"").toLowerCase().includes(De.toLowerCase()));A(Ye)}else{const De=e.filter(Ye=>(Ye.description||"").toLowerCase().includes(D.toLowerCase()));A(De)}};w.useEffect(()=>{const De=setTimeout(()=>{D.trim()?Se():A([])},300);return()=>clearTimeout(De)},[D,L,e]);const ue=De=>{const Ye=De.target.value;E(Ye)},se=()=>{A(e),E("")},ye=()=>{A([]),E("")},Ne=De=>{J(De),S(!0),E(""),A([])},Le=()=>{S(!1),J(null),E(""),A([])},Je=De=>{if(O!==null){const Ye=[...C];Ye[O]={...Ye[O],materialId:De.materialId,description:De.description,baseUnit:De.baseUnit,orderUnit:De.orderUnit,location:De.location,materialgroup:De.materialgroup,isManual:!0},N(Ye)}Le()},[lt,vt]=w.useState([]);w.useEffect(()=>{Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(De=>vt(De.data)).catch(De=>console.error("Failed to fetch saved indents",De))},[]);const Re=async()=>{if(!u){alert("Please select a purchase category");return}if(!m||!v){alert("Please fill in Location and Buyer Group");return}const De=C.filter(Xe=>Xe.materialId&&Xe.materialId.trim()!==""&&Xe.description&&Xe.description.trim()!==""&&Xe.qty&&Xe.qty>0);if(De.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const Ye=c.find(Xe=>Xe.name===u||Xe.categoryName===u||Xe._id===u),jt=localStorage.getItem("selectedCompanyId"),Qe=localStorage.getItem("financialYear");try{const Xe={indentIdType:B,externalIndentId:X,categoryId:Ye._id,categoryName:Ye.name||Ye.categoryName,location:m,buyerGroup:v,documentDate:b,items:De,companyId:jt,financialYear:Qe};if(B==="")l(Xe),n(!1),re(!0);else{if(B==="internal"){const Be=await Oe.post("/api/indent/create",Xe);alert(`Indent saved successfully with ID: ${Be.data.indentId}`)}else if(B==="external"){if(!X||X.trim()===""){alert("Please enter an External Indent ID");return}Xe.indentId=X;const Be=await Oe.post("/api/indent/create",Xe);alert(`Indent saved successfully with External ID: ${Be.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);re(!1),N([]),p(""),g(""),y(new Date().toISOString().split("T")[0]),q(1)}Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Be=>vt(Be.data)).catch(Be=>console.error("Failed to fetch saved indents",Be))}catch(Xe){console.error(Xe),alert("Failed to save indent")}},ht=M*z,At=ht-z,Tt=C.slice(At,ht),Ht=Math.ceil(C.length/z),pe=De=>q(De),he=({currentPage:De,totalPages:Ye,onPageChange:jt,size:Qe="normal"})=>{if(Ye<=1)return null;const Xe=[],Be=5;let He=Math.max(1,De-Math.floor(Be/2)),ft=Math.min(Ye,He+Be-1);ft-He+1<Be&&(He=Math.max(1,ft-Be+1));for(let Ke=He;Ke<=ft;Ke++)Xe.push(Ke);const Ae=Qe==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation mt-2",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${De===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ae}`,onClick:()=>jt(De-1),disabled:De===1,children:"Previous"})}),He>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ae}`,onClick:()=>jt(1),children:"1"})}),He>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ae}`,children:"..."})})]}),Xe.map(Ke=>a.jsx("li",{className:`page-item ${De===Ke?"active":""}`,children:a.jsx("button",{className:`page-link ${Ae}`,onClick:()=>jt(Ke),children:Ke})},Ke)),ft<Ye&&a.jsxs(a.Fragment,{children:[ft<Ye-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ae}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ae}`,onClick:()=>jt(Ye),children:Ye})})]}),a.jsx("li",{className:`page-item ${De===Ye?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ae}`,onClick:()=>jt(De+1),disabled:De===Ye,children:"Next"})})]})})},xe=()=>{re(!1),te(""),ce(""),l(null),n(!0)},me=De=>{te(De),Re()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto mb-2",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-6",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Purchase Category",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-6",children:a.jsxs("select",{className:"form-select form-select-sm",value:u,onChange:De=>h(De.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),c.map((De,Ye)=>a.jsx("option",{value:De.name||De.categoryName||De._id,children:De.name||De.categoryName||`Category ${Ye+1}`},Ye))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Doc Date",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:De=>y(De.target.value)})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Location",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:m,onChange:De=>p(De.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),U.map((De,Ye)=>a.jsx("option",{value:De.name||De._id,children:De.name||De._id},Ye))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Buyer Group",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:De=>g(De.target.value),placeholder:"Buyer Group"})})]})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",C.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body ",children:[C.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:" table-bordered table-sm mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Tt.map((De,Ye)=>{const jt=At+Ye;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:jt+1}),a.jsx("td",{children:De.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm w-50",value:De.materialId,onChange:Qe=>oe(jt,"materialId",Qe.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>Ne(jt),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:De.materialId})}),a.jsx("td",{children:De.isManual?a.jsx("input",{className:"form-control form-control-sm",value:De.description,onChange:Qe=>oe(jt,"description",Qe.target.value),placeholder:"Description",readOnly:!!De.materialId}):a.jsx("span",{title:De.description,children:De.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:De.qty,onChange:Qe=>oe(jt,"qty",Qe.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:De.baseUnit,onChange:Qe=>oe(jt,"baseUnit",Qe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Qe=>a.jsx("option",{value:Qe,children:Qe},Qe))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:De.deliveryDate,onChange:Qe=>oe(jt,"deliveryDate",Qe.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:De.orderUnit,onChange:Qe=>oe(jt,"orderUnit",Qe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Qe=>a.jsx("option",{value:Qe,children:Qe},Qe))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:De.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>Y(jt),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},jt)})})]})}),a.jsx(he,{currentPage:M,totalPages:Ht,onPageChange:pe,size:"small"})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]}),"   ",a.jsx("div",{className:"col-xl-2",children:a.jsxs("button",{onClick:de,className:"btn btn-outline-primary btn-sm me-2 mt-2",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})})]})]}),a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-6 col-xl-2 col-sm-12",children:a.jsxs("button",{onClick:Re,className:"btn btn-success btn-sm",disabled:!u||C.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]})})}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Le})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select form-select-sm",value:L,onChange:De=>P(De.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:L==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:D,onChange:ue})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info btn-sm",onClick:se,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),T.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:ye,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:T.length>0?a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((De,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{children:De.materialId})}),a.jsx("td",{children:De.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:De.baseUnit})}),a.jsx("td",{children:De.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:De.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Je(De),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":D?`No materials found matching "${D}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Le,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),W&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:xe,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>me("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>te("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),B==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Indent ID (max 50 characters)",value:X,onChange:De=>ce(De.target.value),onKeyPress:De=>{De.key==="Enter"&&X.trim()&&Re()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[X.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:Re,disabled:!X.trim(),children:"Create Indent"})})]})]})]})})})]})]})},USe=()=>{const[e,t]=w.useState(1),[r]=w.useState(10),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(""),[d,u]=w.useState("indentId"),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState([]),[y]=w.useState(10),[C,N]=w.useState(null),[k,S]=w.useState(null);w.useEffect(()=>{D()},[]),w.useEffect(()=>{const ne=n.find(ae=>ae._id===C);S(ne)},[C,n]);const D=()=>{m(!0);const ne=localStorage.getItem("selectedCompanyId"),ae=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:ne,financialYear:ae}}).then(ie=>{const G=ie.data.sort((de,Y)=>new Date(Y.createdAt||Y.documentDate)-new Date(de.createdAt||de.documentDate));s(G),console.log("Fetched saved indents:",G),o(G)}).catch(ie=>console.error("Failed to fetch saved indents",ie)).finally(()=>m(!1))},E=async(ne,ae,ie)=>{try{const G={[ae]:ie};await Oe.put(`/api/indent/status/${ne}`,G);const de=Y=>Y.map(oe=>oe._id===ne?{...oe,[ae]:ie}:oe);s(de),o(Y=>de(Y)),alert("Status updated successfully!")}catch(G){console.error("Error updating status:",G),alert("Failed to update status!")}},T=()=>{v(!0),b(n)},A=()=>{v(!1),c(""),b([])},L=ne=>{const ae=ne.target.value;if(c(ae),ae.trim()===""){b(n);return}const ie=n.filter(G=>{if(d==="indentId"){const de=ae.toLowerCase(),Y=G.indentId.toLowerCase();return Y.includes(de)||Y.replace(/[^0-9]/g,"").includes(de.replace(/[^0-9]/g,""))}else{if(d==="location")return G.location.toLowerCase().includes(ae.toLowerCase());if(d==="buyerGroup")return G.buyerGroup.toLowerCase().includes(ae.toLowerCase());if(d==="categoryName")return G.categoryName.toLowerCase().includes(ae.toLowerCase())}return!1});b(ie)},P=()=>{b(n),c("")},O=()=>{b([]),c("")},J=ne=>{o([ne]),t(1),A()},W=()=>{o(n),t(1)},re=ne=>{const ae=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${ne.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(ne.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${ne.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${ne.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${ne.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${ne.items.map((G,de)=>`
                                <tr style="${de%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${de+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${G.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ie=window.open("","","width=900,height=700");ie.document.write("<html><head><title>Indent Print - "+ne.indentId+"</title></head><body>"),ie.document.write(ae),ie.document.write("</body></html>"),ie.document.close(),ie.print()},U=e*r,Q=U-r,B=i.slice(Q,U),te=Math.ceil(i.length/r),X=ne=>t(ne),ce=({currentPage:ne,totalPages:ae,onPageChange:ie})=>{if(ae<=1)return null;const G=[],de=5;let Y=Math.max(1,ne-Math.floor(de/2)),oe=Math.min(ae,Y+de-1);oe-Y+1<de&&(Y=Math.max(1,oe-de+1));for(let Se=Y;Se<=oe;Se++)G.push(Se);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne-1),disabled:ne===1,children:"Previous"})}),Y>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(1),children:"1"})}),Y>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(Se=>a.jsx("li",{className:`page-item ${ne===Se?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(Se),children:Se})},Se)),oe<ae&&a.jsxs(a.Fragment,{children:[oe<ae-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae),children:ae})})]}),a.jsx("li",{className:`page-item ${ne===ae?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne+1),disabled:ne===ae,children:"Next"})})]})})},M=e*y,q=M-y,z=g.slice(q,M);Math.ceil(g.length/y);const K=ne=>t(ne),ee=({currentPage:ne,totalPages:ae,onPageChange:ie})=>{if(ae<=1)return null;const G=[],de=5;let Y=Math.max(1,ne-Math.floor(de/2)),oe=Math.min(ae,Y+de-1);oe-Y+1<de&&(Y=Math.max(1,oe-de+1));for(let Se=Y;Se<=oe;Se++)G.push(Se);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne-1),disabled:ne===1,children:"Previous"})}),Y>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(1),children:"1"})}),Y>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(Se=>a.jsx("li",{className:`page-item ${ne===Se?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(Se),children:Se})},Se)),oe<ae&&a.jsxs(a.Fragment,{children:[oe<ae-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae),children:ae})})]}),a.jsx("li",{className:`page-item ${ne===ae?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne+1),disabled:ne===ae,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Indent List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Indent List"})]})})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-dark btn-sm",onClick:T,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:W,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):B.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered table-sm align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60px"},children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{style:{width:"100px"},children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{style:{width:"100px"},children:"Action"})]})}),a.jsx("tbody",{children:B.map((ne,ae)=>{const ie=Q+ae;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:ie+1}),a.jsx("td",{children:ne.indentId}),a.jsx("td",{children:(()=>{const G=new Date(ne.documentDate),de=String(G.getDate()).padStart(2,"0"),Y=String(G.getMonth()+1).padStart(2,"0"),oe=G.getFullYear();return`${de}/${Y}/${oe}`})()}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),a.jsx("td",{children:ne.buyerGroup}),a.jsx("td",{children:ne.categoryName}),a.jsxs("td",{className:"text-center",children:[ne.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isDeleted||!1,onChange:G=>E(ne._id,"isDeleted",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ne.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isBlocked||!1,onChange:G=>E(ne._id,"isBlocked",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ne.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>re(ne),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>N(ne._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},ne._id)})})]})}),te>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(ce,{currentPage:e,totalPages:te,onPageChange:X})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:W,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:A})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:ne=>u(ne.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:L})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:P,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:O,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{children:z.length>0?a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:z.map((ne,ae)=>a.jsxs("tr",{children:[a.jsx("td",{children:ae+1}),a.jsx("td",{children:ne.indentId}),a.jsx("td",{children:new Date(ne.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:ne.buyerGroup})}),a.jsx("td",{children:ne.categoryName}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[ne.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>J(ne),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ae))}),te>1&&a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx(ee,{currentPage:e,totalPages:te,onPageChange:K})})})})})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:A,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:k?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:k?.items.map((ne,ae)=>a.jsxs("tr",{children:[a.jsx("td",{children:ae+1}),a.jsx("td",{children:ne.materialId}),a.jsx("td",{children:ne.description}),a.jsx("td",{children:ne.qty}),a.jsx("td",{children:ne.baseUnit}),a.jsx("td",{children:ne.orderUnit}),a.jsx("td",{children:k.location}),a.jsx("td",{children:k.buyerGroup}),a.jsx("td",{children:new Date(ne.deliveryDate).toLocaleDateString()})]},ne._id))})]})})})]})})})]})};function $Se(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]);Xu();const[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,J]=w.useState(""),[W,re]=w.useState(!1),[U,Q]=w.useState(null),[B,te]=w.useState(0),[X,ce]=w.useState(!1),[M,q]=w.useState(!1),[z,K]=w.useState(""),[ee,ne]=w.useState(""),[ae,ie]=w.useState(""),[G,de]=w.useState(""),[Y,oe]=w.useState(""),[Se,ue]=w.useState(""),[se,ye]=w.useState(null);console.log("cat",r),w.useEffect(()=>{if(Y){const Xe=e.filter(Be=>Be.indentId.toLowerCase().includes(Y.toLowerCase()));setFilteredIndents(Xe)}},[Y]);const[Ne,Le]=w.useState([]);w.useEffect(()=>{const Xe=localStorage.getItem("selectedCompanyId"),Be=localStorage.getItem("financialYear"),He={params:{companyId:Xe,financialYear:Be}};Oe.get("/api/indent/get",He).then(ft=>{const Ae=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);t(Ae.map(Ke=>({label:`${Ke.indentId} (${Ke.categoryName})`,value:Ke}))),t(Ae.map(Ke=>({label:`${Ke.indentId} (${Ke.categoryName})`,value:Ke})))}),Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(ft=>{n(ft.data.map(Ae=>({label:`${Ae.categoryName}`,value:Ae._id})))}),Oe.get("/api/vendors",He).then(ft=>{const Ae=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);i(Ae.map(Ke=>({label:`${Ke.name1} ${Ke.name2||""}`,value:Ke._id,vnNo:Ke.vnNo||""})))}),Oe.get("/api/locations",He).then(ft=>{console.log("Locations API response:",ft.data),Array.isArray(ft.data)?Le(ft.data):ft.data&&Array.isArray(ft.data.locations)?Le(ft.data.locations):Le([])}).catch(ft=>{console.error("Failed to fetch locations:",ft),Le([])}),console.log("location",T),Oe.get("/api/material",He).then(ft=>{console.log("Fetched materials:",ft.data);const Ae=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);l(Ae),console.log("Filtered materials:",Ae)}).catch(ft=>console.error("Failed to fetch materials:",ft))},[]);const Je=Xe=>{h(Xe);const{buyerGroup:Be,materialGroup:He,deliveryDate:ft,location:Ae}=Xe.value;A(Ae||""),P(Be||"");const Ke=Xe.value.items.map(Ge=>({...Ge,unit:Ge.unit||"",price:Ge.price||"",materialGroup:Ge.materialGroup||He||"",deliveryDate:Ge.deliveryDate||ft||""}));E(Ke)},lt=(Xe,Be,He)=>{const ft=[...D];ft[Xe][Be]=He,E(ft)},vt=Xe=>{console.log("Opening modal for item at index:",Xe),Q(Xe),re(!0)},Re=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date().toISOString().slice(0,10),price:0}])},[ht,At]=w.useState(!1),[Tt,Ht]=w.useState("internal"),[pe,he]=w.useState(""),xe=async Xe=>{Xe.preventDefault(),At(!0)};w.useEffect(()=>{const Xe=D.reduce((Be,He)=>{const ft=parseFloat(He.price)||0,Ae=parseFloat(He.qty)||0;return Be+ft*Ae},0);te(Xe)},[D]);const me=async()=>{const Xe=localStorage.getItem("selectedCompanyId"),Be=localStorage.getItem("financialYear"),He={indentId:u?.value?.indentId,categoryId:u?.value?.categoryId,rfqCategoryId:m?.value,vendor:v,vendorName:b,quotationReference:c,validityDate:O,vnNo:k,companyId:Xe,financialYear:Be,note:C,buyerGroup:L,location:T,totalPrice:B,items:D,quotationGenType:Tt,externalQuotationNumber:Tt==="external"?pe:null};console.log("Payload for submission:",He);try{const ft=await Oe.post("/api/quotations/create",He);alert("Quotation Created Successfully"),console.log(ft.data),At(!1)}catch(ft){console.error(ft),alert("Failed to create quotation")}},De=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Quotation Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>At(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ht("internal"),me()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ht("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Tt==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:pe,onChange:Xe=>{Xe.target.value.length<=50&&he(Xe.target.value)},onKeyPress:Xe=>{Xe.key==="Enter"&&pe.trim()&&me()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[pe.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:me,disabled:!pe.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Quotation"]})})]}),Tt==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Quotation number will be auto-generated based on category and range count."})})]})]})})})]}),Ye=()=>{const[Xe,Be]=w.useState([]),[He,ft]=w.useState("materialId"),[Ae,Ke]=w.useState(""),Ge=ke=>{const it=ke.target.value;Ke(it);const bt=o.filter(Kt=>(He==="materialId"?Kt.materialId:Kt.description)?.toLowerCase().includes(it.toLowerCase()));Be(bt)},ct=()=>{Be(o),Ke("")},Mt=()=>{Be([]),Ke("")},Ie=ke=>{if(console.log("selectedItemIndex when selecting:",U),U==null){console.error("No item selected for update");return}E(it=>{console.log("Previous items:",it);const bt=[...it];return bt[U]={...bt[U],materialId:ke.materialId,description:ke.description,materialGroup:ke.materialgroup||"",baseUnit:ke.baseUnit,orderUnit:ke.orderUnit},console.log("Updated items:",bt),bt}),re(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>re(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:He,onChange:ke=>ft(ke.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:He==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ae,onChange:Ge})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ct,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Xe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Xe.map((ke,it)=>a.jsxs("tr",{children:[a.jsx("td",{children:ke.materialId}),a.jsx("td",{children:ke.description}),a.jsx("td",{children:ke.baseUnit}),a.jsx("td",{children:ke.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ie(ke),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},it))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ae?`No materials found matching "${Ae}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},jt=()=>{const[Xe,Be]=w.useState("indentId"),[He,ft]=w.useState([]),[Ae,Ke]=w.useState(""),Ge=Ie=>{const ke=Ie.target.value;Ke(ke);const it=e.filter(bt=>(Xe==="indentId"?bt?.value?.indentId:bt?.value?.categoryName)?.toLowerCase().includes(ke.toLowerCase()));ft(it)},ct=()=>{ft(e),Ke("")},Mt=()=>{ft([]),Ke("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ce(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Xe,onChange:Ie=>Be(Ie.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ae,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:ct,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),He.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:He.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:He.map((Ie,ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.value.indentId})}),a.jsx("td",{children:Ie.value.categoryName}),a.jsx("td",{children:Ie.value.buyerGroup}),a.jsx("td",{children:Ie.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{Je(Ie),ce(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ce(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Qe=()=>{const[Xe,Be]=w.useState("name1"),[He,ft]=w.useState([]),[Ae,Ke]=w.useState(""),Ge=Ie=>{const ke=Ie.target.value;Ke(ke);const it=s.filter(bt=>(Xe==="vnNo"?bt.vnNo:bt.label)?.toLowerCase().includes(ke.toLowerCase()));ft(it)},ct=()=>{ft(s),Ke("")},Mt=()=>{ft([]),Ke("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>q(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Xe,onChange:Ie=>Be(Ie.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ae,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:ct,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),He.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:He.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:He.map((Ie,ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ie.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.vnNo})}),a.jsx("td",{children:Ie.city||"-"}),a.jsx("td",{children:Ie.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(Ie.value),y(Ie.label),S(Ie.vnNo||""),q(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Quotation"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:Xe=>{const Be=Xe.target.value;de(Be);const He=e.find(ft=>ft.indentId.toLowerCase()===Be.toLowerCase());h(He||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{oe(G),ce(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:Xe=>p(r.find(Be=>Be.value===Xe.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((Xe,Be)=>a.jsx("option",{value:Xe.value,children:Xe.label},Be))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:Xe=>{const Be=Xe.target.value;y(Be);const He=s.find(ft=>ft.name.toLowerCase()===Be.toLowerCase());ye(He||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{q(!0),ue(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Quotation Reference",value:c,onChange:Xe=>d(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:Xe=>A(Xe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Ne)&&Ne.map((Xe,Be)=>a.jsx("option",{value:Xe.name||Xe._id||Xe,children:Xe.name||Xe.locationName||Xe},Be))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:Xe=>P(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:Xe=>J(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:Xe=>N(Xe.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:xe,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsx("td",{children:Be+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Xe.materialId}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>vt(Be),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.description,onChange:He=>lt(Be,"description",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Xe.qty,onChange:He=>lt(Be,"qty",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.baseUnit,onChange:He=>lt(Be,"baseUnit",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.orderUnit,onChange:He=>lt(Be,"orderUnit",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.materialGroup,onChange:He=>lt(Be,"materialGroup",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Xe.deliveryDate,onChange:He=>lt(Be,"deliveryDate",He.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Xe.price,onChange:He=>{He.target.value=He.target.value.replace(/[^0-9.]/g,""),lt(Be,"price",He.target.value)}})})]},Be))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:Re,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["",B.toFixed(2)]})]})})]})})})]})]}),W&&a.jsx(Ye,{}),X&&a.jsx(jt,{}),M&&a.jsx(Qe,{}),ht&&a.jsx(De,{})]})]})})}function $n(e){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(e)}function qSe(e,t){if($n(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($n(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QH(e){var t=qSe(e,"string");return $n(t)=="symbol"?t:t+""}function Pb(e,t,r){return(t=QH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z6(Object(r),!0).forEach(function(n){Pb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VSe(e){if(Array.isArray(e))return e}function zSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function DD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function JH(e,t){if(e){if(typeof e=="string")return DD(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DD(e,t):void 0}}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yh(e,t){return VSe(e)||zSe(e,t)||JH(e,t)||HSe()}function bf(e,t){if(e==null)return{};var r,n,s=RSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var WSe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function GSe(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,s=n===void 0?!1:n,i=e.defaultValue,o=i===void 0?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,m=e.onMenuOpen,p=e.value,v=bf(e,WSe),g=w.useState(l!==void 0?l:r),b=Yh(g,2),y=b[0],C=b[1],N=w.useState(c!==void 0?c:s),k=Yh(N,2),S=k[0],D=k[1],E=w.useState(p!==void 0?p:o),T=Yh(E,2),A=T[0],L=T[1],P=w.useCallback(function(B,te){typeof d=="function"&&d(B,te),L(B)},[d]),O=w.useCallback(function(B,te){var X;typeof u=="function"&&(X=u(B,te)),C(X!==void 0?X:B)},[u]),J=w.useCallback(function(){typeof m=="function"&&m(),D(!0)},[m]),W=w.useCallback(function(){typeof h=="function"&&h(),D(!1)},[h]),re=l!==void 0?l:y,U=c!==void 0?c:S,Q=p!==void 0?p:A;return Yr(Yr({},v),{},{inputValue:re,menuIsOpen:U,onChange:P,onInputChange:O,onMenuClose:W,onMenuOpen:J,value:Q})}function YSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QH(n.key),n)}}function KSe(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ED(e,t)}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bw(e)}function ZH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZH=function(){return!!e})()}function QSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JSe(e,t){if(t&&($n(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QSe(e)}function ZSe(e){var t=ZH();return function(){var r,n=Bw(e);if(t){var s=Bw(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return JSe(this,r)}}function eCe(e){if(Array.isArray(e))return DD(e)}function tCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eT(e){return eCe(e)||tCe(e)||JH(e)||rCe()}function nCe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function aCe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var sCe=function(){function e(r){var n=this;this._insertTag=function(s){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,i),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(aCe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=nCe(s);try{i.insertRule(n,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},e}(),fo="-ms-",Uw="-moz-",ra="-webkit-",eW="comm",tT="rule",rT="decl",iCe="@import",tW="@keyframes",oCe="@layer",lCe=Math.abs,CS=String.fromCharCode,cCe=Object.assign;function dCe(e,t){return Yi(e,0)^45?(((t<<2^Yi(e,0))<<2^Yi(e,1))<<2^Yi(e,2))<<2^Yi(e,3):0}function rW(e){return e.trim()}function uCe(e,t){return(e=t.exec(e))?e[0]:e}function na(e,t,r){return e.replace(t,r)}function AD(e,t){return e.indexOf(t)}function Yi(e,t){return e.charCodeAt(t)|0}function wy(e,t,r){return e.slice(t,r)}function Su(e){return e.length}function nT(e){return e.length}function Wj(e,t){return t.push(e),e}function hCe(e,t){return e.map(t).join("")}var kS=1,Pv=1,nW=0,pl=0,ei=0,cg="";function _S(e,t,r,n,s,i,o){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:kS,column:Pv,length:o,return:""}}function mb(e,t){return cCe(_S("",null,null,"",null,null,0),e,{length:-e.length},t)}function fCe(){return ei}function mCe(){return ei=pl>0?Yi(cg,--pl):0,Pv--,ei===10&&(Pv=1,kS--),ei}function ec(){return ei=pl<nW?Yi(cg,pl++):0,Pv++,ei===10&&(Pv=1,kS++),ei}function Lu(){return Yi(cg,pl)}function _N(){return pl}function l1(e,t){return wy(cg,e,t)}function Sy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aW(e){return kS=Pv=1,nW=Su(cg=e),pl=0,[]}function sW(e){return cg="",e}function EN(e){return rW(l1(pl-1,TD(e===91?e+2:e===40?e+1:e)))}function pCe(e){for(;(ei=Lu())&&ei<33;)ec();return Sy(e)>2||Sy(ei)>3?"":" "}function xCe(e,t){for(;--t&&ec()&&!(ei<48||ei>102||ei>57&&ei<65||ei>70&&ei<97););return l1(e,_N()+(t<6&&Lu()==32&&ec()==32))}function TD(e){for(;ec();)switch(ei){case e:return pl;case 34:case 39:e!==34&&e!==39&&TD(ei);break;case 40:e===41&&TD(e);break;case 92:ec();break}return pl}function vCe(e,t){for(;ec()&&e+ei!==57;)if(e+ei===84&&Lu()===47)break;return"/*"+l1(t,pl-1)+"*"+CS(e===47?e:ec())}function gCe(e){for(;!Sy(Lu());)ec();return l1(e,pl)}function bCe(e){return sW(DN("",null,null,null,[""],e=aW(e),0,[0],e))}function DN(e,t,r,n,s,i,o,l,c){for(var d=0,u=0,h=o,m=0,p=0,v=0,g=1,b=1,y=1,C=0,N="",k=s,S=i,D=n,E=N;b;)switch(v=C,C=ec()){case 40:if(v!=108&&Yi(E,h-1)==58){AD(E+=na(EN(C),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=EN(C);break;case 9:case 10:case 13:case 32:E+=pCe(v);break;case 92:E+=xCe(_N()-1,7);continue;case 47:switch(Lu()){case 42:case 47:Wj(yCe(vCe(ec(),_N()),t,r),c);break;default:E+="/"}break;case 123*g:l[d++]=Su(E)*y;case 125*g:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:y==-1&&(E=na(E,/\f/g,"")),p>0&&Su(E)-h&&Wj(p>32?r8(E+";",n,r,h-1):r8(na(E," ","")+";",n,r,h-2),c);break;case 59:E+=";";default:if(Wj(D=t8(E,t,r,d,u,s,l,N,k=[],S=[],h),i),C===123)if(u===0)DN(E,t,D,D,k,i,h,l,S);else switch(m===99&&Yi(E,3)===110?100:m){case 100:case 108:case 109:case 115:DN(e,D,D,n&&Wj(t8(e,D,D,0,0,s,l,N,s,k=[],h),S),s,S,h,l,n?k:S);break;default:DN(E,D,D,D,[""],S,0,l,S)}}d=u=p=0,g=y=1,N=E="",h=o;break;case 58:h=1+Su(E),p=v;default:if(g<1){if(C==123)--g;else if(C==125&&g++==0&&mCe()==125)continue}switch(E+=CS(C),C*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(Su(E)-1)*y,y=1;break;case 64:Lu()===45&&(E+=EN(ec())),m=Lu(),u=h=Su(N=E+=gCe(_N())),C++;break;case 45:v===45&&Su(E)==2&&(g=0)}}return i}function t8(e,t,r,n,s,i,o,l,c,d,u){for(var h=s-1,m=s===0?i:[""],p=nT(m),v=0,g=0,b=0;v<n;++v)for(var y=0,C=wy(e,h+1,h=lCe(g=o[v])),N=e;y<p;++y)(N=rW(g>0?m[y]+" "+C:na(C,/&\f/g,m[y])))&&(c[b++]=N);return _S(e,t,r,s===0?tT:l,c,d,u)}function yCe(e,t,r){return _S(e,t,r,eW,CS(fCe()),wy(e,2,-2),0)}function r8(e,t,r,n){return _S(e,t,r,rT,wy(e,0,n),wy(e,n+1,-1),n)}function lv(e,t){for(var r="",n=nT(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function jCe(e,t,r,n){switch(e.type){case oCe:if(e.children.length)break;case iCe:case rT:return e.return=e.return||e.value;case eW:return"";case tW:return e.return=e.value+"{"+lv(e.children,n)+"}";case tT:e.value=e.props.join(",")}return Su(r=lv(e.children,n))?e.return=e.value+"{"+r+"}":""}function NCe(e){var t=nT(e);return function(r,n,s,i){for(var o="",l=0;l<t;l++)o+=e[l](r,n,s,i)||"";return o}}function wCe(e){return function(t){t.root||(t=t.return)&&e(t)}}function SCe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var CCe=function(t,r,n){for(var s=0,i=0;s=i,i=Lu(),s===38&&i===12&&(r[n]=1),!Sy(i);)ec();return l1(t,pl)},kCe=function(t,r){var n=-1,s=44;do switch(Sy(s)){case 0:s===38&&Lu()===12&&(r[n]=1),t[n]+=CCe(pl-1,r,n);break;case 2:t[n]+=EN(s);break;case 4:if(s===44){t[++n]=Lu()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=CS(s)}while(s=ec());return t},_Ce=function(t,r){return sW(kCe(aW(t),r))},n8=new WeakMap,ECe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!n8.get(n))&&!s){n8.set(t,!0);for(var i=[],o=_Ce(r,i),l=n.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},DCe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function iW(e,t){switch(dCe(e,t)){case 5103:return ra+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ra+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ra+e+Uw+e+fo+e+e;case 6828:case 4268:return ra+e+fo+e+e;case 6165:return ra+e+fo+"flex-"+e+e;case 5187:return ra+e+na(e,/(\w+).+(:[^]+)/,ra+"box-$1$2"+fo+"flex-$1$2")+e;case 5443:return ra+e+fo+"flex-item-"+na(e,/flex-|-self/,"")+e;case 4675:return ra+e+fo+"flex-line-pack"+na(e,/align-content|flex-|-self/,"")+e;case 5548:return ra+e+fo+na(e,"shrink","negative")+e;case 5292:return ra+e+fo+na(e,"basis","preferred-size")+e;case 6060:return ra+"box-"+na(e,"-grow","")+ra+e+fo+na(e,"grow","positive")+e;case 4554:return ra+na(e,/([^-])(transform)/g,"$1"+ra+"$2")+e;case 6187:return na(na(na(e,/(zoom-|grab)/,ra+"$1"),/(image-set)/,ra+"$1"),e,"")+e;case 5495:case 3959:return na(e,/(image-set\([^]*)/,ra+"$1$`$1");case 4968:return na(na(e,/(.+:)(flex-)?(.*)/,ra+"box-pack:$3"+fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ra+e+e;case 4095:case 3583:case 4068:case 2532:return na(e,/(.+)-inline(.+)/,ra+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Su(e)-1-t>6)switch(Yi(e,t+1)){case 109:if(Yi(e,t+4)!==45)break;case 102:return na(e,/(.+:)(.+)-([^]+)/,"$1"+ra+"$2-$3$1"+Uw+(Yi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~AD(e,"stretch")?iW(na(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Yi(e,t+1)!==115)break;case 6444:switch(Yi(e,Su(e)-3-(~AD(e,"!important")&&10))){case 107:return na(e,":",":"+ra)+e;case 101:return na(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ra+(Yi(e,14)===45?"inline-":"")+"box$3$1"+ra+"$2$3$1"+fo+"$2box$3")+e}break;case 5936:switch(Yi(e,t+11)){case 114:return ra+e+fo+na(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ra+e+fo+na(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ra+e+fo+na(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ra+e+fo+e+e}return e}var ACe=function(t,r,n,s){if(t.length>-1&&!t.return)switch(t.type){case rT:t.return=iW(t.value,t.length);break;case tW:return lv([mb(t,{value:na(t.value,"@","@"+ra)})],s);case tT:if(t.length)return hCe(t.props,function(i){switch(uCe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lv([mb(t,{props:[na(i,/:(read-\w+)/,":"+Uw+"$1")]})],s);case"::placeholder":return lv([mb(t,{props:[na(i,/:(plac\w+)/,":"+ra+"input-$1")]}),mb(t,{props:[na(i,/:(plac\w+)/,":"+Uw+"$1")]}),mb(t,{props:[na(i,/:(plac\w+)/,fo+"input-$1")]})],s)}return""})}},TCe=[ACe],ICe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||TCe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;l.push(g)});var c,d=[ECe,DCe];{var u,h=[jCe,wCe(function(g){u.insert(g)})],m=NCe(d.concat(s,h)),p=function(b){return lv(bCe(b),m)};c=function(b,y,C,N){u=C,p(b?b+"{"+y.styles+"}":y.styles),N&&(v.inserted[y.name]=!0)}}var v={key:r,sheet:new sCe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},cE={exports:{}},ca={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8;function PCe(){if(a8)return ca;a8=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(S){if(typeof S=="object"&&S!==null){var D=S.$$typeof;switch(D){case t:switch(S=S.type,S){case c:case d:case n:case i:case s:case h:return S;default:switch(S=S&&S.$$typeof,S){case l:case u:case v:case p:case o:return S;default:return D}}case r:return D}}}function k(S){return N(S)===d}return ca.AsyncMode=c,ca.ConcurrentMode=d,ca.ContextConsumer=l,ca.ContextProvider=o,ca.Element=t,ca.ForwardRef=u,ca.Fragment=n,ca.Lazy=v,ca.Memo=p,ca.Portal=r,ca.Profiler=i,ca.StrictMode=s,ca.Suspense=h,ca.isAsyncMode=function(S){return k(S)||N(S)===c},ca.isConcurrentMode=k,ca.isContextConsumer=function(S){return N(S)===l},ca.isContextProvider=function(S){return N(S)===o},ca.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},ca.isForwardRef=function(S){return N(S)===u},ca.isFragment=function(S){return N(S)===n},ca.isLazy=function(S){return N(S)===v},ca.isMemo=function(S){return N(S)===p},ca.isPortal=function(S){return N(S)===r},ca.isProfiler=function(S){return N(S)===i},ca.isStrictMode=function(S){return N(S)===s},ca.isSuspense=function(S){return N(S)===h},ca.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===d||S===i||S===s||S===h||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===v||S.$$typeof===p||S.$$typeof===o||S.$$typeof===l||S.$$typeof===u||S.$$typeof===b||S.$$typeof===y||S.$$typeof===C||S.$$typeof===g)},ca.typeOf=N,ca}var s8;function OCe(){return s8||(s8=1,cE.exports=PCe()),cE.exports}var dE,i8;function MCe(){if(i8)return dE;i8=1;var e=OCe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=s;function o(v){return e.isMemo(v)?s:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function p(v,g,b){if(typeof g!="string"){if(m){var y=h(g);y&&y!==m&&p(v,y,b)}var C=c(g);d&&(C=C.concat(d(g)));for(var N=o(v),k=o(g),S=0;S<C.length;++S){var D=C[S];if(!r[D]&&!(b&&b[D])&&!(k&&k[D])&&!(N&&N[D])){var E=u(g,D);try{l(v,D,E)}catch{}}}}return v}return dE=p,dE}MCe();var RCe=!0;function FCe(e,t,r){var n="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(n+=s+" ")}),n}var oW=function(t,r,n){var s=t.key+"-"+r.name;(n===!1||RCe===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},LCe=function(t,r,n){oW(t,r,n);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function BCe(e){for(var t=0,r,n=0,s=e.length;s>=4;++n,s-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var UCe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$Ce=/[A-Z]|^ms/g,qCe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lW=function(t){return t.charCodeAt(1)===45},o8=function(t){return t!=null&&typeof t!="boolean"},uE=SCe(function(e){return lW(e)?e:e.replace($Ce,"-$&").toLowerCase()}),l8=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(qCe,function(n,s,i){return Cu={name:s,styles:i,next:Cu},s})}return UCe[t]!==1&&!lW(t)&&typeof r=="number"&&r!==0?r+"px":r};function Cy(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Cu={name:s.name,styles:s.styles,next:Cu},s.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Cu={name:o.name,styles:o.styles,next:Cu},o=o.next;var l=i.styles+";";return l}return VCe(e,t,r)}case"function":{if(e!==void 0){var c=Cu,d=r(e);return Cu=c,Cy(e,t,d)}break}}var u=r;return u}function VCe(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=Cy(e,t,r[s])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var l=o;o8(l)&&(n+=uE(i)+":"+l8(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)o8(o[c])&&(n+=uE(i)+":"+l8(i,o[c])+";");else{var d=Cy(e,t,o);switch(i){case"animation":case"animationName":{n+=uE(i)+":"+d+";";break}default:n+=i+"{"+d+"}"}}}return n}var c8=/label:\s*([^\s;{]+)\s*(;|$)/g,Cu;function cW(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,s="";Cu=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,s+=Cy(r,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=Cy(r,t,e[l]),n){var c=i;s+=c[l]}c8.lastIndex=0;for(var d="",u;(u=c8.exec(s))!==null;)d+="-"+u[1];var h=BCe(s)+d;return{name:h,styles:s,next:Cu}}var zCe=function(t){return t()},HCe=qN.useInsertionEffect?qN.useInsertionEffect:!1,WCe=HCe||zCe,dW=w.createContext(typeof HTMLElement<"u"?ICe({key:"css"}):null);dW.Provider;var GCe=function(t){return w.forwardRef(function(r,n){var s=w.useContext(dW);return t(r,s,n)})},YCe=w.createContext({}),aT={}.hasOwnProperty,ID="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KCe=function(t,r){var n={};for(var s in r)aT.call(r,s)&&(n[s]=r[s]);return n[ID]=t,n},XCe=function(t){var r=t.cache,n=t.serialized,s=t.isStringTag;return oW(r,n,s),WCe(function(){return LCe(r,n,s)}),null},QCe=GCe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=e[ID],i=[n],o="";typeof e.className=="string"?o=FCe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=cW(i,void 0,w.useContext(YCe));o+=t.key+"-"+l.name;var c={};for(var d in e)aT.call(e,d)&&d!=="css"&&d!==ID&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),w.createElement(w.Fragment,null,w.createElement(XCe,{cache:t,serialized:l,isStringTag:typeof s=="string"}),w.createElement(s,c))}),JCe=QCe,Hr=function(t,r){var n=arguments;if(r==null||!aT.call(r,"css"))return w.createElement.apply(void 0,n);var s=n.length,i=new Array(s);i[0]=JCe,i[1]=KCe(t,r);for(var o=2;o<s;o++)i[o]=n[o];return w.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Hr||(Hr={}));function sT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return cW(t)}function ZCe(){var e=sT.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function eke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Ov=Math.min,hx=Math.max,$w=Math.round,Gj=Math.floor,Bu=e=>({x:e,y:e}),tke={left:"right",right:"left",bottom:"top",top:"bottom"},rke={start:"end",end:"start"};function nke(e,t,r){return hx(e,Ov(t,r))}function ES(e,t){return typeof e=="function"?e(t):e}function Mv(e){return e.split("-")[0]}function c1(e){return e.split("-")[1]}function ake(e){return e==="x"?"y":"x"}function iT(e){return e==="y"?"height":"width"}const ske=new Set(["top","bottom"]);function Jp(e){return ske.has(Mv(e))?"y":"x"}function oT(e){return ake(Jp(e))}function ike(e,t,r){r===void 0&&(r=!1);const n=c1(e),s=oT(e),i=iT(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=qw(o)),[o,qw(o)]}function oke(e){const t=qw(e);return[PD(e),t,PD(t)]}function PD(e){return e.replace(/start|end/g,t=>rke[t])}const d8=["left","right"],u8=["right","left"],lke=["top","bottom"],cke=["bottom","top"];function dke(e,t,r){switch(e){case"top":case"bottom":return r?t?u8:d8:t?d8:u8;case"left":case"right":return t?lke:cke;default:return[]}}function uke(e,t,r,n){const s=c1(e);let i=dke(Mv(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(PD)))),i}function qw(e){return e.replace(/left|right|bottom|top/g,t=>tke[t])}function hke(e){return{top:0,right:0,bottom:0,left:0,...e}}function uW(e){return typeof e!="number"?hke(e):{top:e,right:e,bottom:e,left:e}}function Vw(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function h8(e,t,r){let{reference:n,floating:s}=e;const i=Jp(t),o=oT(t),l=iT(o),c=Mv(t),d=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(c1(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const fke=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=h8(d,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:C,y:N,data:k,reset:S}=await y({x:u,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=C??u,h=N??h,p={...p,[b]:{...p[b],...k}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:h}=h8(d,m,c)),g=-1)}return{x:u,y:h,placement:m,strategy:s,middlewareData:p}};async function mke(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ES(t,e),v=uW(p),b=l[m?h==="floating"?"reference":"floating":h],y=Vw(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),C=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},S=Vw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:N,strategy:c}):C);return{top:(y.top-S.top+v.top)/k.y,bottom:(S.bottom-y.bottom+v.bottom)/k.y,left:(y.left-S.left+v.left)/k.x,right:(S.right-y.right+v.right)/k.x}}const pke=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ES(e,t)||{};if(d==null)return{};const h=uW(u),m={x:r,y:n},p=oT(s),v=iT(p),g=await o.getDimensions(d),b=p==="y",y=b?"top":"left",C=b?"bottom":"right",N=b?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[p]-m[p]-i.floating[v],S=m[p]-i.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=D?D[N]:0;(!E||!await(o.isElement==null?void 0:o.isElement(D)))&&(E=l.floating[N]||i.floating[v]);const T=k/2-S/2,A=E/2-g[v]/2-1,L=Ov(h[y],A),P=Ov(h[C],A),O=L,J=E-g[v]-P,W=E/2-g[v]/2+T,re=nke(O,W,J),U=!c.arrow&&c1(s)!=null&&W!==re&&i.reference[v]/2-(W<O?L:P)-g[v]/2<0,Q=U?W<O?W-O:W-J:0;return{[p]:m[p]+Q,data:{[p]:re,centerOffset:W-re-Q,...U&&{alignmentOffset:Q}},reset:U}}}),xke=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=ES(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Mv(s),C=Jp(l),N=Mv(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(N||!g?[qw(l)]:oke(l)),D=v!=="none";!m&&D&&S.push(...uke(l,g,v,k));const E=[l,...S],T=await mke(t,b),A=[];let L=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(T[y]),h){const W=ike(s,o,k);A.push(T[W[0]],T[W[1]])}if(L=[...L,{placement:s,overflows:A}],!A.every(W=>W<=0)){var P,O;const W=(((P=i.flip)==null?void 0:P.index)||0)+1,re=E[W];if(re&&(!(h==="alignment"?C!==Jp(re):!1)||L.every(B=>Jp(B.placement)===C?B.overflows[0]>0:!0)))return{data:{index:W,overflows:L},reset:{placement:re}};let U=(O=L.filter(Q=>Q.overflows[0]<=0).sort((Q,B)=>Q.overflows[1]-B.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(p){case"bestFit":{var J;const Q=(J=L.filter(B=>{if(D){const te=Jp(B.placement);return te===C||te==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(te=>te>0).reduce((te,X)=>te+X,0)]).sort((B,te)=>B[1]-te[1])[0])==null?void 0:J[0];Q&&(U=Q);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}},vke=new Set(["left","top"]);async function gke(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Mv(r),l=c1(r),c=Jp(r)==="y",d=vke.has(o)?-1:1,u=i&&c?-1:1,h=ES(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const bke=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await gke(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function DS(){return typeof window<"u"}function dg(e){return hW(e)?(e.nodeName||"").toLowerCase():"#document"}function tc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function eh(e){var t;return(t=(hW(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hW(e){return DS()?e instanceof Node||e instanceof tc(e).Node:!1}function qo(e){return DS()?e instanceof Element||e instanceof tc(e).Element:!1}function Wu(e){return DS()?e instanceof HTMLElement||e instanceof tc(e).HTMLElement:!1}function f8(e){return!DS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tc(e).ShadowRoot}const yke=new Set(["inline","contents"]);function d1(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Yc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!yke.has(s)}const jke=new Set(["table","td","th"]);function Nke(e){return jke.has(dg(e))}const wke=[":popover-open",":modal"];function AS(e){return wke.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ske=["transform","translate","scale","rotate","perspective"],Cke=["transform","translate","scale","rotate","perspective","filter"],kke=["paint","layout","strict","content"];function lT(e){const t=cT(),r=qo(e)?Yc(e):e;return Ske.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Cke.some(n=>(r.willChange||"").includes(n))||kke.some(n=>(r.contain||"").includes(n))}function _ke(e){let t=qm(e);for(;Wu(t)&&!Rv(t);){if(lT(t))return t;if(AS(t))return null;t=qm(t)}return null}function cT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Eke=new Set(["html","body","#document"]);function Rv(e){return Eke.has(dg(e))}function Yc(e){return tc(e).getComputedStyle(e)}function TS(e){return qo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qm(e){if(dg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f8(e)&&e.host||eh(e);return f8(t)?t.host:t}function fW(e){const t=qm(e);return Rv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wu(t)&&d1(t)?t:fW(t)}function ky(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=fW(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=tc(s);if(i){const l=OD(o);return t.concat(o,o.visualViewport||[],d1(s)?s:[],l&&r?ky(l):[])}return t.concat(s,ky(s,[],r))}function OD(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mW(e){const t=Yc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Wu(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=$w(r)!==i||$w(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function dT(e){return qo(e)?e:e.contextElement}function cv(e){const t=dT(e);if(!Wu(t))return Bu(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=mW(t);let o=(i?$w(r.width):r.width)/n,l=(i?$w(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Dke=Bu(0);function pW(e){const t=tc(e);return!cT()||!t.visualViewport?Dke:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ake(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==tc(e)?!1:t}function Ex(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=dT(e);let o=Bu(1);t&&(n?qo(n)&&(o=cv(n)):o=cv(e));const l=Ake(i,r,n)?pW(i):Bu(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const m=tc(i),p=n&&qo(n)?tc(n):n;let v=m,g=OD(v);for(;g&&n&&p!==v;){const b=cv(g),y=g.getBoundingClientRect(),C=Yc(g),N=y.left+(g.clientLeft+parseFloat(C.paddingLeft))*b.x,k=y.top+(g.clientTop+parseFloat(C.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=N,d+=k,v=tc(g),g=OD(v)}}return Vw({width:u,height:h,x:c,y:d})}function uT(e,t){const r=TS(e).scrollLeft;return t?t.left+r:Ex(eh(e)).left+r}function xW(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:uT(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function Tke(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=eh(n),l=t?AS(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Bu(1);const u=Bu(0),h=Wu(n);if((h||!h&&!i)&&((dg(n)!=="body"||d1(o))&&(c=TS(n)),Wu(n))){const p=Ex(n);d=cv(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const m=o&&!h&&!i?xW(o,c,!0):Bu(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function Ike(e){return Array.from(e.getClientRects())}function Pke(e){const t=eh(e),r=TS(e),n=e.ownerDocument.body,s=hx(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=hx(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+uT(e);const l=-r.scrollTop;return Yc(n).direction==="rtl"&&(o+=hx(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Oke(e,t){const r=tc(e),n=eh(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=cT();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const Mke=new Set(["absolute","fixed"]);function Rke(e,t){const r=Ex(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=Wu(e)?cv(e):Bu(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function m8(e,t,r){let n;if(t==="viewport")n=Oke(e,r);else if(t==="document")n=Pke(eh(e));else if(qo(t))n=Rke(t,r);else{const s=pW(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Vw(n)}function vW(e,t){const r=qm(e);return r===t||!qo(r)||Rv(r)?!1:Yc(r).position==="fixed"||vW(r,t)}function Fke(e,t){const r=t.get(e);if(r)return r;let n=ky(e,[],!1).filter(l=>qo(l)&&dg(l)!=="body"),s=null;const i=Yc(e).position==="fixed";let o=i?qm(e):e;for(;qo(o)&&!Rv(o);){const l=Yc(o),c=lT(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&Mke.has(s.position)||d1(o)&&!c&&vW(e,o))?n=n.filter(u=>u!==o):s=l,o=qm(o)}return t.set(e,n),n}function Lke(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?AS(t)?[]:Fke(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=m8(t,u,s);return d.top=hx(h.top,d.top),d.right=Ov(h.right,d.right),d.bottom=Ov(h.bottom,d.bottom),d.left=hx(h.left,d.left),d},m8(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Bke(e){const{width:t,height:r}=mW(e);return{width:t,height:r}}function Uke(e,t,r){const n=Wu(t),s=eh(t),i=r==="fixed",o=Ex(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Bu(0);function d(){c.x=uT(s)}if(n||!n&&!i)if((dg(t)!=="body"||d1(s))&&(l=TS(t)),n){const p=Ex(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();i&&!n&&s&&d();const u=s&&!n&&!i?xW(s,l):Bu(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function hE(e){return Yc(e).position==="static"}function p8(e,t){if(!Wu(e)||Yc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return eh(e)===r&&(r=r.ownerDocument.body),r}function gW(e,t){const r=tc(e);if(AS(e))return r;if(!Wu(e)){let s=qm(e);for(;s&&!Rv(s);){if(qo(s)&&!hE(s))return s;s=qm(s)}return r}let n=p8(e,t);for(;n&&Nke(n)&&hE(n);)n=p8(n,t);return n&&Rv(n)&&hE(n)&&!lT(n)?r:n||_ke(e)||r}const $ke=async function(e){const t=this.getOffsetParent||gW,r=this.getDimensions,n=await r(e.floating);return{reference:Uke(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function qke(e){return Yc(e).direction==="rtl"}const Vke={convertOffsetParentRelativeRectToViewportRelativeRect:Tke,getDocumentElement:eh,getClippingRect:Lke,getOffsetParent:gW,getElementRects:$ke,getClientRects:Ike,getDimensions:Bke,getScale:cv,isElement:qo,isRTL:qke};function bW(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zke(e,t){let r=null,n;const s=eh(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:p}=d;if(l||t(),!m||!p)return;const v=Gj(h),g=Gj(s.clientWidth-(u+m)),b=Gj(s.clientHeight-(h+p)),y=Gj(u),N={rootMargin:-v+"px "+-g+"px "+-b+"px "+-y+"px",threshold:hx(0,Ov(1,c))||1};let k=!0;function S(D){const E=D[0].intersectionRatio;if(E!==c){if(!k)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!bW(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(S,{...N,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,N)}r.observe(e)}return o(!0),i}function yW(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=dT(e),u=s||i?[...d?ky(d):[],...ky(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=d&&l?zke(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[C]=y;C&&C.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let v,g=c?Ex(e):null;c&&b();function b(){const y=Ex(e);g&&!bW(g,y)&&r(),g=y,v=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(C=>{s&&C.removeEventListener("scroll",r),i&&C.removeEventListener("resize",r)}),h?.(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Hke=bke,Wke=xke,x8=pke,Gke=(e,t,r)=>{const n=new Map,s={platform:Vke,...r},i={...s.platform,_c:n};return fke(e,t,{...s,platform:i})};var MD=w.useLayoutEffect,Yke=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],zw=function(){};function Kke(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Xke(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];var i=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(Kke(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var v8=function(t){return s_e(t)?t.filter(Boolean):$n(t)==="object"&&t!==null?[t]:[]},jW=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=bf(t,Yke);return Yr({},r)},ws=function(t,r,n){var s=t.cx,i=t.getStyles,o=t.getClassNames,l=t.className;return{css:i(r,t),className:s(n??{},o(r,t),l)}};function IS(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Qke(e){return IS(e)?window.innerHeight:e.clientHeight}function NW(e){return IS(e)?window.pageYOffset:e.scrollTop}function Hw(e,t){if(IS(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Jke(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function Zke(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Yj(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zw,s=NW(e),i=t-s,o=10,l=0;function c(){l+=o;var d=Zke(l,s,i,r);Hw(e,d),l<r?window.requestAnimationFrame(c):n(e)}c()}function g8(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),s=t.offsetHeight/3;n.bottom+s>r.bottom?Hw(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):n.top-s<r.top&&Hw(e,Math.max(t.offsetTop-s,0))}function e_e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function b8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function t_e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var wW=!1,r_e={get passive(){return wW=!0}},Kj=typeof window<"u"?window:{};Kj.addEventListener&&Kj.removeEventListener&&(Kj.addEventListener("p",zw,r_e),Kj.removeEventListener("p",zw,!1));var n_e=wW;function a_e(e){return e!=null}function s_e(e){return Array.isArray(e)}function Xj(e,t,r){return e?t:r}var i_e=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var i=Object.entries(t).filter(function(o){var l=Yh(o,1),c=l[0];return!n.includes(c)});return i.reduce(function(o,l){var c=Yh(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},o_e=["children","innerProps"],l_e=["children","innerProps"];function c_e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,s=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=Jke(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),h=u.height,m=r.getBoundingClientRect(),p=m.bottom,v=m.height,g=m.top,b=r.offsetParent.getBoundingClientRect(),y=b.top,C=o?window.innerHeight:Qke(c),N=NW(c),k=parseInt(getComputedStyle(r).marginBottom,10),S=parseInt(getComputedStyle(r).marginTop,10),D=y-S,E=C-g,T=D+N,A=h-N-g,L=p-C+N+k,P=N+g-S,O=160;switch(s){case"auto":case"bottom":if(E>=v)return{placement:"bottom",maxHeight:t};if(A>=v&&!o)return i&&Yj(c,L,O),{placement:"bottom",maxHeight:t};if(!o&&A>=n||o&&E>=n){i&&Yj(c,L,O);var J=o?E-k:A-k;return{placement:"bottom",maxHeight:J}}if(s==="auto"||o){var W=t,re=o?D:T;return re>=n&&(W=Math.min(re-k-l,t)),{placement:"top",maxHeight:W}}if(s==="bottom")return i&&Hw(c,L),{placement:"bottom",maxHeight:t};break;case"top":if(D>=v)return{placement:"top",maxHeight:t};if(T>=v&&!o)return i&&Yj(c,P,O),{placement:"top",maxHeight:t};if(!o&&T>=n||o&&D>=n){var U=t;return(!o&&T>=n||o&&D>=n)&&(U=o?D-S:T-S),i&&Yj(c,P,O),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return d}function d_e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var SW=function(t){return t==="auto"?"bottom":t},u_e=function(t,r){var n,s=t.placement,i=t.theme,o=i.borderRadius,l=i.spacing,c=i.colors;return Yr((n={label:"menu"},Pb(n,d_e(s),"100%"),Pb(n,"position","absolute"),Pb(n,"width","100%"),Pb(n,"zIndex",1),n),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},CW=w.createContext(null),h_e=function(t){var r=t.children,n=t.minMenuHeight,s=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=w.useContext(CW)||{},u=d.setPortalPlacement,h=w.useRef(null),m=w.useState(s),p=Yh(m,2),v=p[0],g=p[1],b=w.useState(null),y=Yh(b,2),C=y[0],N=y[1],k=c.spacing.controlHeight;return MD(function(){var S=h.current;if(S){var D=o==="fixed",E=l&&!D,T=c_e({maxHeight:s,menuEl:S,minHeight:n,placement:i,shouldScroll:E,isFixedPosition:D,controlHeight:k});g(T.maxHeight),N(T.placement),u?.(T.placement)}},[s,i,o,l,n,u,k]),r({ref:h,placerProps:Yr(Yr({},t),{},{placement:C||SW(i),maxHeight:v})})},f_e=function(t){var r=t.children,n=t.innerRef,s=t.innerProps;return Hr("div",Zr({},ws(t,"menu",{menu:!0}),{ref:n},s),r)},m_e=f_e,p_e=function(t,r){var n=t.maxHeight,s=t.theme.spacing.baseUnit;return Yr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},x_e=function(t){var r=t.children,n=t.innerProps,s=t.innerRef,i=t.isMulti;return Hr("div",Zr({},ws(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},n),r)},kW=function(t,r){var n=t.theme,s=n.spacing.baseUnit,i=n.colors;return Yr({textAlign:"center"},r?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},v_e=kW,g_e=kW,b_e=function(t){var r=t.children,n=r===void 0?"No options":r,s=t.innerProps,i=bf(t,o_e);return Hr("div",Zr({},ws(Yr(Yr({},i),{},{children:n,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),n)},y_e=function(t){var r=t.children,n=r===void 0?"Loading...":r,s=t.innerProps,i=bf(t,l_e);return Hr("div",Zr({},ws(Yr(Yr({},i),{},{children:n,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),n)},j_e=function(t){var r=t.rect,n=t.offset,s=t.position;return{left:r.left,position:s,top:n,width:r.width,zIndex:1}},N_e=function(t){var r=t.appendTo,n=t.children,s=t.controlElement,i=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=w.useRef(null),d=w.useRef(null),u=w.useState(SW(o)),h=Yh(u,2),m=h[0],p=h[1],v=w.useMemo(function(){return{setPortalPlacement:p}},[]),g=w.useState(null),b=Yh(g,2),y=b[0],C=b[1],N=w.useCallback(function(){if(s){var E=e_e(s),T=l==="fixed"?0:window.pageYOffset,A=E[m]+T;(A!==y?.offset||E.left!==y?.rect.left||E.width!==y?.rect.width)&&C({offset:A,rect:E})}},[s,l,m,y?.offset,y?.rect.left,y?.rect.width]);MD(function(){N()},[N]);var k=w.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),s&&c.current&&(d.current=yW(s,c.current,N,{elementResize:"ResizeObserver"in window}))},[s,N]);MD(function(){k()},[k]);var S=w.useCallback(function(E){c.current=E,k()},[k]);if(!r&&l!=="fixed"||!y)return null;var D=Hr("div",Zr({ref:S},ws(Yr(Yr({},t),{},{offset:y.offset,position:l,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),n);return Hr(CW.Provider,{value:v},r?Ly.createPortal(D,r):D)},w_e=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},S_e=function(t){var r=t.children,n=t.innerProps,s=t.isDisabled,i=t.isRtl;return Hr("div",Zr({},ws(t,"container",{"--is-disabled":s,"--is-rtl":i}),n),r)},C_e=function(t,r){var n=t.theme.spacing,s=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Yr({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},k_e=function(t){var r=t.children,n=t.innerProps,s=t.isMulti,i=t.hasValue;return Hr("div",Zr({},ws(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),n),r)},__e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},E_e=function(t){var r=t.children,n=t.innerProps;return Hr("div",Zr({},ws(t,"indicatorsContainer",{indicators:!0}),n),r)},y8,D_e=["size"],A_e=["innerProps","isRtl","size"],T_e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},_W=function(t){var r=t.size,n=bf(t,D_e);return Hr("svg",Zr({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:T_e},n))},hT=function(t){return Hr(_W,Zr({size:20},t),Hr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},EW=function(t){return Hr(_W,Zr({size:20},t),Hr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},DW=function(t,r){var n=t.isFocused,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Yr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?o.neutral60:o.neutral20,padding:i*2,":hover":{color:n?o.neutral80:o.neutral40}})},I_e=DW,P_e=function(t){var r=t.children,n=t.innerProps;return Hr("div",Zr({},ws(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||Hr(EW,null))},O_e=DW,M_e=function(t){var r=t.children,n=t.innerProps;return Hr("div",Zr({},ws(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||Hr(hT,null))},R_e=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Yr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},F_e=function(t){var r=t.innerProps;return Hr("span",Zr({},r,ws(t,"indicatorSeparator",{"indicator-separator":!0})))},L_e=ZCe(y8||(y8=eke([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),B_e=function(t,r){var n=t.isFocused,s=t.size,i=t.theme,o=i.colors,l=i.spacing.baseUnit;return Yr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?o.neutral60:o.neutral20,padding:l*2})},fE=function(t){var r=t.delay,n=t.offset;return Hr("span",{css:sT({animation:"".concat(L_e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},U_e=function(t){var r=t.innerProps,n=t.isRtl,s=t.size,i=s===void 0?4:s,o=bf(t,A_e);return Hr("div",Zr({},ws(Yr(Yr({},o),{},{innerProps:r,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Hr(fE,{delay:0,offset:n}),Hr(fE,{delay:160,offset:!0}),Hr(fE,{delay:320,offset:!n}))},$_e=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.theme,o=i.colors,l=i.borderRadius,c=i.spacing;return Yr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:s?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},q_e=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return Hr("div",Zr({ref:i},ws(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":s,"control--menu-is-open":l}),o,{"aria-disabled":n||void 0}),r)},V_e=q_e,z_e=["data"],H_e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},W_e=function(t){var r=t.children,n=t.cx,s=t.getStyles,i=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,h=t.selectProps;return Hr("div",Zr({},ws(t,"group",{group:!0}),c),Hr(o,Zr({},l,{selectProps:h,theme:u,getStyles:s,getClassNames:i,cx:n}),d),Hr("div",null,r))},G_e=function(t,r){var n=t.theme,s=n.colors,i=n.spacing;return Yr({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},Y_e=function(t){var r=jW(t);r.data;var n=bf(r,z_e);return Hr("div",Zr({},ws(t,"groupHeading",{"group-heading":!0}),n))},K_e=W_e,X_e=["innerRef","isDisabled","isHidden","inputClassName"],Q_e=function(t,r){var n=t.isDisabled,s=t.value,i=t.theme,o=i.spacing,l=i.colors;return Yr(Yr({visibility:n?"hidden":"visible",transform:s?"translateZ(0)":""},J_e),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},AW={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},J_e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AW)},Z_e=function(t){return Yr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},AW)},eEe=function(t){var r=t.cx,n=t.value,s=jW(t),i=s.innerRef,o=s.isDisabled,l=s.isHidden,c=s.inputClassName,d=bf(s,X_e);return Hr("div",Zr({},ws(t,"input",{"input-container":!0}),{"data-value":n||""}),Hr("input",Zr({className:r({input:!0},c),ref:i,style:Z_e(l),disabled:o},d)))},tEe=eEe,rEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors;return Yr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},nEe=function(t,r){var n=t.theme,s=n.borderRadius,i=n.colors,o=t.cropWithEllipsis;return Yr({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},aEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors,l=t.isFocused;return Yr({alignItems:"center",display:"flex"},r?{}:{borderRadius:i/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},TW=function(t){var r=t.children,n=t.innerProps;return Hr("div",n,r)},sEe=TW,iEe=TW;function oEe(e){var t=e.children,r=e.innerProps;return Hr("div",Zr({role:"button"},r),t||Hr(hT,{size:14}))}var lEe=function(t){var r=t.children,n=t.components,s=t.data,i=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=n.Container,u=n.Label,h=n.Remove;return Hr(d,{data:s,innerProps:Yr(Yr({},ws(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},Hr(u,{data:s,innerProps:Yr({},ws(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),Hr(h,{data:s,innerProps:Yr(Yr({},ws(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},cEe=lEe,dEe=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Yr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:n?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:i?c.primary:c.primary50}})},uEe=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.innerRef,l=t.innerProps;return Hr("div",Zr({},ws(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":n},l),r)},hEe=uEe,fEe=function(t,r){var n=t.theme,s=n.spacing,i=n.colors;return Yr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},mEe=function(t){var r=t.children,n=t.innerProps;return Hr("div",Zr({},ws(t,"placeholder",{placeholder:!0}),n),r)},pEe=mEe,xEe=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing,o=s.colors;return Yr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},vEe=function(t){var r=t.children,n=t.isDisabled,s=t.innerProps;return Hr("div",Zr({},ws(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),s),r)},gEe=vEe,bEe={ClearIndicator:M_e,Control:V_e,DropdownIndicator:P_e,DownChevron:EW,CrossIcon:hT,Group:K_e,GroupHeading:Y_e,IndicatorsContainer:E_e,IndicatorSeparator:F_e,Input:tEe,LoadingIndicator:U_e,Menu:m_e,MenuList:x_e,MenuPortal:N_e,LoadingMessage:y_e,NoOptionsMessage:b_e,MultiValue:cEe,MultiValueContainer:sEe,MultiValueLabel:iEe,MultiValueRemove:oEe,Option:hEe,Placeholder:pEe,SelectContainer:S_e,SingleValue:gEe,ValueContainer:k_e},yEe=function(t){return Yr(Yr({},bEe),t.components)},j8=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jEe(e,t){return!!(e===t||j8(e)&&j8(t))}function NEe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!jEe(e[r],t[r]))return!1;return!0}function wEe(e,t){t===void 0&&(t=NEe);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}var SEe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},CEe=function(t){return Hr("span",Zr({css:SEe},t))},N8=CEe,kEe={guidance:function(t){var r=t.isSearchable,n=t.isMulti,s=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,s=n===void 0?"":n,i=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,s=t.options,i=t.label,o=i===void 0?"":i,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,h=function(g,b){return g&&g.length?"".concat(g.indexOf(b)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(h(l,n),".");if(r==="menu"&&u){var m=c?" disabled":"",p="".concat(d?" selected":"").concat(m);return"".concat(o).concat(p,", ").concat(h(s,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},_Ee=function(t){var r=t.ariaSelection,n=t.focusedOption,s=t.focusedValue,i=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,h=c.ariaLiveMessages,m=c.getOptionLabel,p=c.inputValue,v=c.isMulti,g=c.isOptionDisabled,b=c.isSearchable,y=c.menuIsOpen,C=c.options,N=c.screenReaderStatus,k=c.tabSelectsValue,S=c.isLoading,D=c["aria-label"],E=c["aria-live"],T=w.useMemo(function(){return Yr(Yr({},kEe),h||{})},[h]),A=w.useMemo(function(){var re="";if(r&&T.onChange){var U=r.option,Q=r.options,B=r.removedValue,te=r.removedValues,X=r.value,ce=function(ae){return Array.isArray(ae)?null:ae},M=B||U||ce(X),q=M?m(M):"",z=Q||te||void 0,K=z?z.map(m):[],ee=Yr({isDisabled:M&&g(M,l),label:q,labels:K},r);re=T.onChange(ee)}return re},[r,T,g,l,m]),L=w.useMemo(function(){var re="",U=n||s,Q=!!(n&&l&&l.includes(n));if(U&&T.onFocus){var B={focused:U,label:m(U),isDisabled:g(U,l),isSelected:Q,options:i,context:U===n?"menu":"value",selectValue:l,isAppleDevice:u};re=T.onFocus(B)}return re},[n,s,m,g,T,i,l,u]),P=w.useMemo(function(){var re="";if(y&&C.length&&!S&&T.onFilter){var U=N({count:i.length});re=T.onFilter({inputValue:p,resultsMessage:U})}return re},[i,p,y,T,C,N,S]),O=r?.action==="initial-input-focus",J=w.useMemo(function(){var re="";if(T.guidance){var U=s?"value":y?"menu":"input";re=T.guidance({"aria-label":D,context:U,isDisabled:n&&g(n,l),isMulti:v,isSearchable:b,tabSelectsValue:k,isInitialFocus:O})}return re},[D,n,s,v,g,b,y,T,l,k,O]),W=Hr(w.Fragment,null,Hr("span",{id:"aria-selection"},A),Hr("span",{id:"aria-focused"},L),Hr("span",{id:"aria-results"},P),Hr("span",{id:"aria-guidance"},J));return Hr(w.Fragment,null,Hr(N8,{id:d},O&&W),Hr(N8,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!O&&W))},EEe=_Ee,RD=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],DEe=new RegExp("["+RD.map(function(e){return e.letters}).join("")+"]","g"),IW={};for(var mE=0;mE<RD.length;mE++)for(var pE=RD[mE],xE=0;xE<pE.letters.length;xE++)IW[pE.letters[xE]]=pE.base;var PW=function(t){return t.replace(DEe,function(r){return IW[r]})},AEe=wEe(PW),w8=function(t){return t.replace(/^\s+|\s+$/g,"")},TEe=function(t){return"".concat(t.label," ").concat(t.value)},IEe=function(t){return function(r,n){if(r.data.__isNew__)return!0;var s=Yr({ignoreCase:!0,ignoreAccents:!0,stringify:TEe,trim:!0,matchFrom:"any"},t),i=s.ignoreCase,o=s.ignoreAccents,l=s.stringify,c=s.trim,d=s.matchFrom,u=c?w8(n):n,h=c?w8(l(r)):l(r);return i&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=AEe(u),h=PW(h)),d==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},PEe=["innerRef"];function OEe(e){var t=e.innerRef,r=bf(e,PEe),n=i_e(r,"onExited","in","enter","exit","appear");return Hr("input",Zr({ref:t},n,{css:sT({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var MEe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function REe(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,s=e.onTopArrive,i=e.onTopLeave,o=w.useRef(!1),l=w.useRef(!1),c=w.useRef(0),d=w.useRef(null),u=w.useCallback(function(b,y){if(d.current!==null){var C=d.current,N=C.scrollTop,k=C.scrollHeight,S=C.clientHeight,D=d.current,E=y>0,T=k-S-N,A=!1;T>y&&o.current&&(n&&n(b),o.current=!1),E&&l.current&&(i&&i(b),l.current=!1),E&&y>T?(r&&!o.current&&r(b),D.scrollTop=k,A=!0,o.current=!0):!E&&-y>N&&(s&&!l.current&&s(b),D.scrollTop=0,A=!0,l.current=!0),A&&MEe(b)}},[r,n,s,i]),h=w.useCallback(function(b){u(b,b.deltaY)},[u]),m=w.useCallback(function(b){c.current=b.changedTouches[0].clientY},[]),p=w.useCallback(function(b){var y=c.current-b.changedTouches[0].clientY;u(b,y)},[u]),v=w.useCallback(function(b){if(b){var y=n_e?{passive:!1}:!1;b.addEventListener("wheel",h,y),b.addEventListener("touchstart",m,y),b.addEventListener("touchmove",p,y)}},[p,m,h]),g=w.useCallback(function(b){b&&(b.removeEventListener("wheel",h,!1),b.removeEventListener("touchstart",m,!1),b.removeEventListener("touchmove",p,!1))},[p,m,h]);return w.useEffect(function(){if(t){var b=d.current;return v(b),function(){g(b)}}},[t,v,g]),function(b){d.current=b}}var S8=["boxSizing","height","overflow","paddingRight","position"],C8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function k8(e){e.cancelable&&e.preventDefault()}function _8(e){e.stopPropagation()}function E8(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function D8(){return"ontouchstart"in window||navigator.maxTouchPoints}var A8=!!(typeof window<"u"&&window.document&&window.document.createElement),pb=0,P0={capture:!1,passive:!1};function FEe(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,s=w.useRef({}),i=w.useRef(null),o=w.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;if(n&&S8.forEach(function(v){var g=u&&u[v];s.current[v]=g}),n&&pb<1){var h=parseInt(s.current.paddingRight,10)||0,m=document.body?document.body.clientWidth:0,p=window.innerWidth-m+h||0;Object.keys(C8).forEach(function(v){var g=C8[v];u&&(u[v]=g)}),u&&(u.paddingRight="".concat(p,"px"))}d&&D8()&&(d.addEventListener("touchmove",k8,P0),c&&(c.addEventListener("touchstart",E8,P0),c.addEventListener("touchmove",_8,P0))),pb+=1}},[n]),l=w.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;pb=Math.max(pb-1,0),n&&pb<1&&S8.forEach(function(h){var m=s.current[h];u&&(u[h]=m)}),d&&D8()&&(d.removeEventListener("touchmove",k8,P0),c&&(c.removeEventListener("touchstart",E8,P0),c.removeEventListener("touchmove",_8,P0)))}},[n]);return w.useEffect(function(){if(t){var c=i.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){i.current=c}}var LEe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},BEe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function UEe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,s=n===void 0?!0:n,i=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=REe({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=FEe({isEnabled:r}),h=function(p){d(p),u(p)};return Hr(w.Fragment,null,r&&Hr("div",{onClick:LEe,css:BEe}),t(h))}var $Ee={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},qEe=function(t){var r=t.name,n=t.onFocus;return Hr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:$Ee,value:"",onChange:function(){}})},VEe=qEe;function fT(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function zEe(){return fT(/^iPhone/i)}function OW(){return fT(/^Mac/i)}function HEe(){return fT(/^iPad/i)||OW()&&navigator.maxTouchPoints>1}function WEe(){return zEe()||HEe()}function GEe(){return OW()||WEe()}var YEe=function(t){return t.label},KEe=function(t){return t.label},XEe=function(t){return t.value},QEe=function(t){return!!t.isDisabled},JEe={clearIndicator:O_e,container:w_e,control:$_e,dropdownIndicator:I_e,group:H_e,groupHeading:G_e,indicatorsContainer:__e,indicatorSeparator:R_e,input:Q_e,loadingIndicator:B_e,loadingMessage:g_e,menu:u_e,menuList:p_e,menuPortal:j_e,multiValue:rEe,multiValueLabel:nEe,multiValueRemove:aEe,noOptionsMessage:v_e,option:dEe,placeholder:fEe,singleValue:xEe,valueContainer:C_e},ZEe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},e5e=4,MW=4,t5e=38,r5e=MW*2,n5e={baseUnit:MW,controlHeight:t5e,menuGutter:r5e},vE={borderRadius:e5e,colors:ZEe,spacing:n5e},a5e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:b8(),captureMenuScroll:!b8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:IEe(),formatGroupLabel:YEe,getOptionLabel:KEe,getOptionValue:XEe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:QEe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!t_e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function T8(e,t,r,n){var s=LW(e,t,r),i=BW(e,t,r),o=FW(e,t),l=Ww(e,t);return{type:"option",data:t,isDisabled:s,isSelected:i,label:o,value:l,index:n}}function AN(e,t){return e.options.map(function(r,n){if("options"in r){var s=r.options.map(function(o,l){return T8(e,o,t,l)}).filter(function(o){return P8(e,o)});return s.length>0?{type:"group",data:r,options:s,index:n}:void 0}var i=T8(e,r,t,n);return P8(e,i)?i:void 0}).filter(a_e)}function RW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,eT(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function I8(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,eT(n.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(n.index,"-").concat(s.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function s5e(e,t){return RW(AN(e,t))}function P8(e,t){var r=e.inputValue,n=r===void 0?"":r,s=t.data,i=t.isSelected,o=t.label,l=t.value;return(!$W(e)||!i)&&UW(e,{label:o,value:l,data:s},n)}function i5e(e,t){var r=e.focusedValue,n=e.selectValue,s=n.indexOf(r);if(s>-1){var i=t.indexOf(r);if(i>-1)return r;if(s<t.length)return t[s]}return null}function o5e(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var gE=function(t,r){var n,s=(n=t.find(function(i){return i.data===r}))===null||n===void 0?void 0:n.id;return s||null},FW=function(t,r){return t.getOptionLabel(r)},Ww=function(t,r){return t.getOptionValue(r)};function LW(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function BW(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=Ww(e,t);return r.some(function(s){return Ww(e,s)===n})}function UW(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var $W=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},l5e=1,qW=function(e){XSe(r,e);var t=ZSe(r);function r(n){var s;if(YSe(this,r),s=t.call(this,n),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,d){var u=s.props,h=u.onChange,m=u.name;d.name=m,s.ariaOnChange(c,d),h(c,d)},s.setValue=function(c,d,u){var h=s.props,m=h.closeMenuOnSelect,p=h.isMulti,v=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:v}),m&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:d,option:u})},s.selectOption=function(c){var d=s.props,u=d.blurInputOnSelect,h=d.isMulti,m=d.name,p=s.state.selectValue,v=h&&s.isOptionSelected(c,p),g=s.isOptionDisabled(c,p);if(v){var b=s.getOptionValue(c);s.setValue(p.filter(function(y){return s.getOptionValue(y)!==b}),"deselect-option",c)}else if(!g)h?s.setValue([].concat(eT(p),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:m});return}u&&s.blurInput()},s.removeValue=function(c){var d=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(c),m=u.filter(function(v){return s.getOptionValue(v)!==h}),p=Xj(d,m,m[0]||null);s.onChange(p,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(Xj(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,d=s.state.selectValue,u=d[d.length-1],h=d.slice(0,d.length-1),m=Xj(c,h,h[0]||null);u&&s.onChange(m,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(c){return gE(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return I8(AN(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return Xke.apply(void 0,[s.props.classNamePrefix].concat(d))},s.getOptionLabel=function(c){return FW(s.props,c)},s.getOptionValue=function(c){return Ww(s.props,c)},s.getStyles=function(c,d){var u=s.props.unstyled,h=JEe[c](d,u);h.boxSizing="border-box";var m=s.props.styles[c];return m?m(h,d):h},s.getClassNames=function(c,d){var u,h;return(u=(h=s.props.classNames)[c])===null||u===void 0?void 0:u.call(h,d)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return yEe(s.props)},s.buildCategorizedOptions=function(){return AN(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return RW(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,d){s.setState({ariaSelection:Yr({value:c},d)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():d&&s.openMenu("first"):(d&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var d=s.props,u=d.isMulti,h=d.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&IS(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),m=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||m>p}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var d=s.props.inputValue,u=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:d}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var d=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:d}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var d=s.getFocusableOptions(),u=d.indexOf(c);s.setState({focusedOption:c,focusedOptionId:u>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return $W(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var d=s.props,u=d.isMulti,h=d.backspaceRemovesValue,m=d.escapeClearsValue,p=d.inputValue,v=d.isClearable,g=d.isDisabled,b=d.menuIsOpen,y=d.onKeyDown,C=d.tabSelectsValue,N=d.openMenuOnFocus,k=s.state,S=k.focusedOption,D=k.focusedValue,E=k.selectValue;if(!g&&!(typeof y=="function"&&(y(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(D)s.removeValue(D);else{if(!h)return;u?s.popValue():v&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!b||!C||!S||N&&s.isOptionSelected(S,E))return;s.selectOption(S);break;case"Enter":if(c.keyCode===229)break;if(b){if(!S||s.isComposing)return;s.selectOption(S);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):v&&m&&s.clearValue();break;case" ":if(p)return;if(!b){s.openMenu("first");break}if(!S)return;s.selectOption(S);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++l5e),s.state.selectValue=v8(n.value),n.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),l=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[l],s.state.focusedOptionId=gE(i,o[l])}return s}return KSe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&g8(this.menuListRef,this.focusedOptionRef),GEe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,l=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&l&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(g8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=s==="first"?0:d.length-1;if(!this.props.isMulti){var h=d.indexOf(l[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,l=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(s){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),s==="up"?c=d>0?d-1:l.length-1:s==="down"?c=(d+1)%l.length:s==="pageup"?(c=d-i,c<0&&(c=0)):s==="pagedown"?(c=d+i,c>l.length-1&&(c=l.length-1)):s==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(vE):Yr(Yr({},vE),this.props.theme):vE}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,h=this.props,m=h.isMulti,p=h.isRtl,v=h.options,g=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:m,isRtl:p,options:v,selectOption:d,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return LW(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return BW(this.props,s,i)}},{key:"filterOption",value:function(s,i){return UW(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:l})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,l=s.inputId,c=s.inputValue,d=s.tabIndex,u=s.form,h=s.menuIsOpen,m=s.required,p=this.getComponents(),v=p.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,C=this.commonProps,N=l||this.getElementId("input"),k=Yr(Yr(Yr({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":m,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?y?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?w.createElement(v,Zr({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:N,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},k)):w.createElement(OEe,Zr({id:N,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:zw,onFocus:this.onInputFocus,disabled:i,tabIndex:d,inputMode:"none",form:u,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,l=i.MultiValueContainer,c=i.MultiValueLabel,d=i.MultiValueRemove,u=i.SingleValue,h=i.Placeholder,m=this.commonProps,p=this.props,v=p.controlShouldRenderValue,g=p.isDisabled,b=p.isMulti,y=p.inputValue,C=p.placeholder,N=this.state,k=N.selectValue,S=N.focusedValue,D=N.isFocused;if(!this.hasValue()||!v)return y?null:w.createElement(h,Zr({},m,{key:"placeholder",isDisabled:g,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),C);if(b)return k.map(function(T,A){var L=T===S,P="".concat(s.getOptionLabel(T),"-").concat(s.getOptionValue(T));return w.createElement(o,Zr({},m,{components:{Container:l,Label:c,Remove:d},isFocused:L,isDisabled:g,key:P,index:A,removeProps:{onClick:function(){return s.removeValue(T)},onTouchEnd:function(){return s.removeValue(T)},onMouseDown:function(J){J.preventDefault()}},data:T}),s.formatOptionLabel(T,"value"))});if(y)return null;var E=k[0];return w.createElement(u,Zr({},m,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(i,Zr({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!i||!d)return null;var h={"aria-hidden":"true"};return w.createElement(i,Zr({},o,{innerProps:h,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return w.createElement(o,Zr({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(i,Zr({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,l=i.GroupHeading,c=i.Menu,d=i.MenuList,u=i.MenuPortal,h=i.LoadingMessage,m=i.NoOptionsMessage,p=i.Option,v=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,C=b.inputValue,N=b.isLoading,k=b.loadingMessage,S=b.minMenuHeight,D=b.maxMenuHeight,E=b.menuIsOpen,T=b.menuPlacement,A=b.menuPosition,L=b.menuPortalTarget,P=b.menuShouldBlockScroll,O=b.menuShouldScrollIntoView,J=b.noOptionsMessage,W=b.onMenuScrollToTop,re=b.onMenuScrollToBottom;if(!E)return null;var U=function(q,z){var K=q.type,ee=q.data,ne=q.isDisabled,ae=q.isSelected,ie=q.label,G=q.value,de=g===ee,Y=ne?void 0:function(){return s.onOptionHover(ee)},oe=ne?void 0:function(){return s.selectOption(ee)},Se="".concat(s.getElementId("option"),"-").concat(z),ue={id:Se,onClick:oe,onMouseMove:Y,onMouseOver:Y,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:ae};return w.createElement(p,Zr({},v,{innerProps:ue,data:ee,isDisabled:ne,isSelected:ae,key:Se,label:ie,type:K,value:G,isFocused:de,innerRef:de?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(q.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var q=M.data,z=M.options,K=M.index,ee="".concat(s.getElementId("group"),"-").concat(K),ne="".concat(ee,"-heading");return w.createElement(o,Zr({},v,{key:ee,data:q,options:z,Heading:l,headingProps:{id:ne,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(ae){return U(ae,"".concat(K,"-").concat(ae.index))}))}else if(M.type==="option")return U(M,"".concat(M.index))});else if(N){var B=k({inputValue:C});if(B===null)return null;Q=w.createElement(h,v,B)}else{var te=J({inputValue:C});if(te===null)return null;Q=w.createElement(m,v,te)}var X={minMenuHeight:S,maxMenuHeight:D,menuPlacement:T,menuPosition:A,menuShouldScrollIntoView:O},ce=w.createElement(h_e,Zr({},v,X),function(M){var q=M.ref,z=M.placerProps,K=z.placement,ee=z.maxHeight;return w.createElement(c,Zr({},v,X,{innerRef:q,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:N,placement:K}),w.createElement(UEe,{captureEnabled:y,onTopArrive:W,onBottomArrive:re,lockEnabled:P},function(ne){return w.createElement(d,Zr({},v,{innerRef:function(ie){s.getMenuListRef(ie),ne(ie)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:s.getElementId("listbox")},isLoading:N,maxHeight:ee,focusedOption:g}),Q)}))});return L||A==="fixed"?w.createElement(u,Zr({},v,{appendTo:L,controlElement:this.controlRef,menuPlacement:T,menuPosition:A}),ce):ce}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,l=i.isDisabled,c=i.isMulti,d=i.name,u=i.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!l)return w.createElement(VEe,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var m=h.map(function(g){return s.getOptionValue(g)}).join(o);return w.createElement("input",{name:d,type:"hidden",value:m})}else{var p=h.length>0?h.map(function(g,b){return w.createElement("input",{key:"i-".concat(b),name:d,type:"hidden",value:s.getOptionValue(g)})}):w.createElement("input",{name:d,type:"hidden",value:""});return w.createElement("div",null,p)}else{var v=h[0]?this.getOptionValue(h[0]):"";return w.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,l=i.focusedOption,c=i.focusedValue,d=i.isFocused,u=i.selectValue,h=this.getFocusableOptions();return w.createElement(EEe,Zr({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,l=s.SelectContainer,c=s.ValueContainer,d=this.props,u=d.className,h=d.id,m=d.isDisabled,p=d.menuIsOpen,v=this.state.isFocused,g=this.commonProps=this.getCommonProps();return w.createElement(l,Zr({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:m,isFocused:v}),this.renderLiveRegion(),w.createElement(i,Zr({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:m,isFocused:v,menuIsOpen:p}),w.createElement(c,Zr({},g,{isDisabled:m}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(o,Zr({},g,{isDisabled:m}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,l=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,d=i.ariaSelection,u=i.isFocused,h=i.prevWasFocused,m=i.instancePrefix,p=s.options,v=s.value,g=s.menuIsOpen,b=s.inputValue,y=s.isMulti,C=v8(v),N={};if(o&&(v!==o.value||p!==o.options||g!==o.menuIsOpen||b!==o.inputValue)){var k=g?s5e(s,C):[],S=g?I8(AN(s,C),"".concat(m,"-option")):[],D=l?i5e(i,C):null,E=o5e(i,k),T=gE(S,E);N={selectValue:C,focusedOption:E,focusedOptionId:T,focusableOptionsWithIds:S,focusedValue:D,clearFocusValueOnUpdate:!1}}var A=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},L=d,P=u&&h;return u&&!P&&(L={value:Xj(y,C,C[0]||null),options:C,action:"initial-input-focus"},P=!h),d?.action==="initial-input-focus"&&(L=null),Yr(Yr(Yr({},N),A),{},{prevProps:s,ariaSelection:L,prevWasFocused:P})}}]),r}(w.Component);qW.defaultProps=a5e;var c5e=w.forwardRef(function(e,t){var r=GSe(e);return w.createElement(qW,Zr({ref:t},r))}),Gw=c5e;const bE=10;function d5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState([]),[k,S]=w.useState([]),D=async()=>{try{const de=(await Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(Y=>({label:`${Y.categoryName} (${Y.prefix})`,value:Y._id}));h(de),y(de)}catch(G){console.error("Failed to fetch categories:",G)}},E=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),Se=(await Oe.get("/api/vendors",{params:{companyId:G,financialYear:de}})).data.filter(ue=>!ue.isDeleted&&!ue.isBlocked).map(ue=>({label:`${ue.name1} ${ue.name2||""}`,value:ue._id,vnNo:ue.vnNo||""}));d(Se),N(Se)}catch(G){console.error("Failed to fetch vendors:",G)}},T=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),Y=await Oe.get("/api/locations",{params:{companyId:G,financialYear:de}});Array.isArray(Y.data)?S(Y.data):Y.data&&Array.isArray(Y.data.locations)?S(Y.data.locations):S([])}catch(G){console.error("Failed to fetch locations:",G),S([])}};w.useEffect(()=>{P(),E(),D(),T()},[]);const A=async G=>{try{const Y=(await Oe.get(`/api/quotations/${G}`)).data;l({...Y,validityDate:Y.validityDate?new Date(Y.validityDate).toISOString().split("T")[0]:"",items:Y.items.map(oe=>({...oe,deliveryDate:oe.deliveryDate?new Date(oe.deliveryDate).toISOString().split("T")[0]:""}))})}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},L=async()=>{try{const G=o.items.reduce((Y,oe)=>Y+(parseFloat(oe.price)||0),0),de={...o,totalPrice:G,items:o.items.map(Y=>({...Y,deliveryDate:Y.deliveryDate||null}))};await Oe.put(`/api/quotations/${o._id}`,de),alert("Quotation updated successfully!"),l(null),P()}catch(G){console.error("Failed to update quotation:",G),alert("Failed to update quotation")}};w.useEffect(()=>{P(),E(),D()},[]);const P=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear");n(!0);const oe=(await Oe.get("/api/quotations/get",{params:{companyId:G,financialYear:de}})).data.sort((Se,ue)=>new Date(ue.createdAt)-new Date(Se.createdAt));t(oe),i(null)}catch(G){console.error("Failed to fetch quotations:",G),i("Failed to load quotations. Please try again.")}finally{n(!1)}},O=()=>{l(null)},J=(G,de)=>{l(Y=>({...Y,[G]:de}))},W=(G,de,Y)=>{const oe=[...o.items];oe[G][de]=Y,l(Se=>({...Se,items:oe}))},re=G=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Quotation - ${G._id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div className="header">
          <h1>QUOTATION</h1>
          <h3>Quotation ID: ${G._id}</h3>
        </div>
        
        <div className="info-grid">
          <div>
            <div className="info-item"><strong>Indent ID:</strong> ${G.indentId}</div>
            <div className="info-item"><strong>Category ID:</strong> ${G.categoryId}</div>
            <div className="info-item"><strong>RFQ Category:</strong> ${G.rfqCategoryId}</div>
          </div>
          <div>
            <div className="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div className="info-item"><strong>Date:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div className="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((oe,Se)=>`
              <tr>
                <td>${Se+1}</td>
                <td>${oe.materialId}</td>
                <td>${oe.description}</td>
                <td>${oe.qty}</td>
                <td>${oe.unit||oe.baseUnit}</td>
                <td>${oe.price?parseFloat(oe.price).toFixed(2):"0.00"}</td>
                <td>${oe.price&&oe.qty?(parseFloat(oe.price)*parseFloat(oe.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr className="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${G.items.reduce((oe,Se)=>{const ue=Se.price&&Se.qty?parseFloat(Se.price)*parseFloat(Se.qty):0;return oe+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div className="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,Y=window.open("","_blank");Y.document.write(de),Y.document.close(),Y.focus(),Y.print()},[U,Q]=w.useState(""),[B,te]=w.useState(1),[X,ce]=w.useState(null),M=w.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(de=>{const Y=new Date(de.createdAt),oe=m?new Date(m):null,Se=v?new Date(v):null;return oe&&Se?Y>=oe&&Y<=Se:oe?Y>=oe:Se?Y<=Se:!0})),U&&(G=G.filter(de=>[de.quotationNumber,de.indentId,de.vendorName,de.vnNo,de.note,de.vendor,de.location,de.quotationReference].join(" ").toLowerCase().includes(U.toLowerCase())),G=G.sort((de,Y)=>{const oe=parseFloat(de.totalPrice)||0,Se=parseFloat(Y.totalPrice)||0;return oe-Se})),G},[U,e,m,v]),q=()=>{Q(""),p(""),g(""),te(1)},z=async G=>{try{const de=await Oe.get(`/api/quotations/${G}`);ce(de.data)}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},K=(G,de)=>{if(!de)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},ee=Math.ceil(M.length/bE),ne=w.useMemo(()=>{const G=(B-1)*bE;return M.slice(G,G+bE)},[M,B]),ae=G=>{Q(G.target.value),te(1)},ie=G=>{G<1||G>ee||te(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px",marginLeft:"300px"},children:[a.jsx("h2",{children:"Quotations"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:P,style:{padding:"10px 20px"},children:"Retry"})]}):X?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Quotation Preview - ",X.quotationNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>ce(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Indent ID"}),a.jsx("div",{className:"fw-bold",children:X.indentId})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:X.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor No"}),a.jsx("div",{className:"fw-bold",children:X.vnNo||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Quotation Reference"}),a.jsx("div",{className:"fw-bold",children:X.quotationReference||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Validity Date"}),a.jsx("div",{className:"fw-bold",children:X.validityDate?new Date(X.validityDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:X.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Buyer Group"}),a.jsx("div",{className:"fw-bold",children:X.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(X.createdAt).toLocaleDateString()})]})})})]}),X.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",X.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:X.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsx("td",{children:G.deliveryDate?new Date(G.deliveryDate).toLocaleDateString():"-"}),a.jsxs("td",{children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"7",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",X.items.reduce((G,de)=>{const Y=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+Y},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Quotation - ",o.quotationNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:L,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Indent ID"}),a.jsx("input",{type:"text",className:"form-control",value:o.indentId||"",onChange:G=>J("indentId",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"RFQ Category"}),a.jsx(Gw,{options:b,value:b.find(G=>G.value===o.rfqCategoryId),onChange:G=>J("rfqCategoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(Gw,{options:C,value:C.find(G=>G.value===o.vendor),onChange:G=>{o.vendor||(J("vendor",G?.value),J("vendorName",G?.label),J("vnNo",G?.vnNo||""))},placeholder:"Select Vendor",isDisabled:!!o.vendor})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Quotation Reference"}),a.jsx("input",{type:"text",className:"form-control",value:o.quotationReference||"",onChange:G=>J("quotationReference",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityDate||"",onChange:G=>J("validityDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>J("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),k.map((G,de)=>a.jsx("option",{value:G.name||G,children:G.name||G},de))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Buyer Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>J("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>J("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:Y=>W(de,"materialId",Y.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:Y=>W(de,"description",Y.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:Y=>W(de,"qty",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:Y=>W(de,"baseUnit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:Y=>W(de,"orderUnit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:Y=>W(de,"unit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialgroup||"",onChange:Y=>W(de,"materialgroup",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:G.deliveryDate||"",onChange:Y=>W(de,"deliveryDate",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:Y=>W(de,"price",Y.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"10",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((G,de)=>{const Y=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+Y},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Quotations"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Quotation Reference etc.......",value:U,onChange:ae,className:"form-control",style:{width:250,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),te(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),te(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:q,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:P,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",id:"DataTables_Table_0","aria-describedby":"DataTables_Table_0_info",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Quotation ID"}),a.jsx("th",{children:"Quotation Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),"              ",a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"TotalPrice"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.quotationNumber}),a.jsx("td",{children:G.quotationReference}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location}),a.jsx("td",{children:new Date(G.validityDate).toLocaleDateString()}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsx("td",{style:{backgroundColor:K(de,!!U)},children:G.totalPrice}),a.jsx("td",{className:"text-wrap",children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>z(G._id),className:"btn btn-sm ",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>A(G._id),className:"btn btn-sm ",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>re(G),className:"btn btn-sm ",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||de))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end mt-2",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${B===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(B-1),disabled:B===1,children:a.jsx("i",{className:"fas fa-angle-left"})})}),(()=>{const G=[];let de=[1,2],Y=[ee-1,ee].filter(ue=>ue>2),oe=[];B<=4?(de=[1,2,3,4,5].filter(ue=>ue<=ee),Y=[ee-1,ee].filter(ue=>ue>5)):B>=ee-3?(de=[1,2].filter(ue=>ue<ee-4),Y=[ee-4,ee-3,ee-2,ee-1,ee].filter(ue=>ue>2&&ue<=ee)):(de=[1,2],oe=[B-1,B,B+1],Y=[ee-1,ee]);const Se=ue=>ue.map(se=>a.jsx("li",{className:`page-item${B===se?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(se),children:se})},se));return G.push(...Se(de)),(oe.length>0&&oe[0]>de[de.length-1]+1||oe.length===0&&Y[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),G.push(...Se(oe)),Y.length>0&&(oe.length>0&&Y[0]>oe[oe.length-1]+1||oe.length===0&&Y[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),G.push(...Se(Y)),G})(),a.jsx("li",{className:`page-item${B===ee?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(B+1),disabled:B===ee,children:a.jsx("i",{className:"fas fa-angle-right"})})})]})})})]})}function u5e(){const[e,t]=w.useState("enquiry"),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(new Date().toISOString().substring(0,10)),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState(0),[O,J]=w.useState([]),[W,re]=w.useState([]),[U,Q]=w.useState(!1),[B,te]=w.useState(""),[X,ce]=w.useState([]),[M,q]=w.useState(""),[z,K]=w.useState([]),[ee,ne]=w.useState(""),[ae,ie]=w.useState([]);console.log("enquirySearchResults",X);const[G,de]=w.useState(!1),[Y,oe]=w.useState(""),[Se,ue]=w.useState([]),[se,ye]=w.useState(""),[Ne,Le]=w.useState(""),[Je,lt]=w.useState(""),[vt,Re]=w.useState(""),[ht,At]=w.useState(""),[Tt,Ht]=w.useState(0),[pe,he]=w.useState(0),[xe,me]=w.useState(0),[De,Ye]=w.useState(),[jt,Qe]=w.useState(),[Xe,Be]=w.useState(),[He,ft]=w.useState([]),[Ae,Ke]=w.useState(null),[Ge,ct]=w.useState(0),[Mt,Ie]=w.useState(0),[ke,it]=w.useState(0),[bt,Kt]=w.useState(0),[Rt,tr]=w.useState(0),[mr,jr]=w.useState([]),[fn,hr]=w.useState(!1),[ge,Ue]=w.useState(""),[Pe,Ee]=w.useState(null),[Fe,Ve]=w.useState([]),[xt,wt]=w.useState([]),[at,Nt]=w.useState([]),[St,Xt]=w.useState([]),[ar,pr]=w.useState([]);w.useEffect(()=>{const rt=localStorage.getItem("selectedCompanyId"),dr=localStorage.getItem("financialYear"),er={params:{companyId:rt,financialYear:dr}};Oe.get("/api/po-categories",{params:{companyId:rt,financialYear:dr}}).then(_r=>n(_r.data)),Oe.get("/api/indent/get",er).then(_r=>{l(_r.data)}),Oe.get("/api/quotations/get",er).then(_r=>{i(_r.data);const Cr=[];_r.data.forEach(ka=>{ka.items.forEach(Yo=>{Yo.buyerGroup&&!Cr.includes(Yo.buyerGroup)&&Cr.push(Yo.buyerGroup)})}),re(Cr)}),Oe.get("/api/contracts/get",er).then(_r=>{d(_r.data)}).catch(_r=>{console.error("Error fetching contracts:",_r),d([])}),Oe.get("/api/general-conditions",er).then(_r=>{const Cr=_r.data.filter(ka=>!ka.isDeleted).map(ka=>({_id:ka._id,name:ka.name,description:ka.description}));wt(Cr)}),Oe.get("/api/processes",er).then(_r=>{const Cr=_r.data.filter(ka=>!ka.isDeleted).map(ka=>({_id:ka._id,processId:ka.processId,processDescription:ka.processDescription}));Nt(Cr)}),Oe.get("/api/locations",er).then(_r=>Ve(_r.data)),Oe.get("/api/tax",er).then(_r=>ft(_r.data)),Oe.get("/api/material",er).then(_r=>jr(_r.data)),Oe.get("/api/vendors",er).then(_r=>J(_r.data)),A([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]);const sr=(rt,dr,er)=>{dr.includes(rt)?er(dr.filter(_r=>_r!==rt)):er([...dr,rt])},qe=rt=>{if(te(rt),rt.trim()){const dr=s.filter(er=>er.quotationNumber.toLowerCase().includes(rt.toLowerCase()));ce(dr)}else ce([])},or=()=>{ce(s)},lr=rt=>{if(q(rt),rt.trim()){const dr=o.filter(er=>er.quotationNumber?.toLowerCase().includes(rt.toLowerCase())||er.indentId?.toLowerCase().includes(rt.toLowerCase()));K(dr)}else K([])},$r=()=>{K(o)},gn=rt=>{if(ne(rt),rt.trim()){const dr=c.filter(er=>er.contractNumber?.toLowerCase().includes(rt.toLowerCase())||er.contractId?.toLowerCase().includes(rt.toLowerCase()));ie(dr)}else ie([])},ta=()=>{ie(c)},zs=rt=>{p(rt.quotationNumber),ai(rt.quotationNumber),Q(!1),te(""),ce([])},za=rt=>{p(rt.indentId),Wo(rt.indentId),Q(!1),te(""),ce([])},fs=rt=>{p(rt.contractNumber||rt.contractId),Go(rt.contractNumber||rt.contractId),Q(!1),ne(""),ie([])},ks=()=>{Q(!1),te(""),ce([]),q(""),K([]),ne(""),ie([])},gt=rt=>{if(oe(rt),rt.trim()){const dr=O.filter(er=>er.vendorName?.toLowerCase().includes(rt.toLowerCase())||er.vendorCode?.toLowerCase().includes(rt.toLowerCase()));ue(dr)}else ue([])},fr=()=>{ue(O)},cr=rt=>{N(rt.name1||rt.vendorName),de(!1),oe(""),ue([])},Gr=()=>{de(!1),oe(""),ue([])},Rr=(rt,dr,er,_r,Cr)=>{const ka=rt.reduce((Df,rd)=>Df+(rd.quantity||0)*(rd.price||0),0);P(ka.toFixed(2));const Yo=dr!==void 0?dr:Ge,Ef=er!==void 0?er:Mt,uc=_r!==void 0?_r:ke,Ko=Cr!==void 0?Cr:bt,Xo=ka*(parseFloat(Yo)||0)/100,Es=ka*(parseFloat(Ef)||0)/100,vi=ka*(parseFloat(uc)||0)/100,hc=parseFloat(Ko)||0;Ht(Xo.toFixed(2)),he(Es.toFixed(2)),me(vi.toFixed(2));const Qo=ka+Xo+Es+vi-hc;tr(Qo.toFixed(2))},oa=rt=>{ct(rt),Rr(T,rt,Mt,ke,bt)},Ho=rt=>{Ie(rt),Rr(T,Ge,rt,ke,bt)},es=rt=>{it(rt),Rr(T,Ge,Mt,rt,bt)},Io=rt=>{Kt(rt),Rr(T,Ge,Mt,ke,rt)},vn=(rt,dr,er)=>{const _r=[...T];_r[rt][dr]=dr==="quantity"||dr==="price"?parseFloat(er)||0:er,A(_r),Rr(_r,Ge,Mt,ke,bt)},ai=rt=>{p(rt);const dr=s.find(er=>er.quotationNumber===rt);if(dr){N(dr.name1||dr.vendorName),S(dr.items[0]?.location||"");const er=dr.items.find(Cr=>Cr.buyerGroup);er&&ye(er.buyerGroup);const _r=dr.items.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(_r),Rr(_r)}},Wo=rt=>{p(rt);const dr=o.find(er=>er.indentId===rt);if(dr){N(dr.name1||dr.vendorName),S(dr.items[0]?.location||"");const er=dr.items.find(Cr=>Cr.buyerGroup);er&&ye(er.buyerGroup);const _r=dr.items.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(_r),Rr(_r)}},Go=rt=>{p(rt);const dr=c.find(er=>er.contractNumber===rt||er.contractId===rt);if(dr){N(dr.vendorName||dr.name1),S(dr.items?.[0]?.location||"");const er=dr.items?.find(Cr=>Cr.buyerGroup);er&&ye(er.buyerGroup);const _r=dr.items?.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty||Cr.quantity,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}))||[];A(_r),Rr(_r)}},Oi=()=>{A([...T,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},Vn=rt=>{const dr=[...T];dr.splice(rt,1),A(dr),Rr(dr)},[Mi,_s]=w.useState(!1),[oc,ed]=w.useState(""),[yl,td]=w.useState(""),[jl,lc]=w.useState(null),Nl=async rt=>{if(rt.preventDefault(),!u||!m)return alert("Please select both category and quotation");const er={quotationId:s.find(_r=>_r.quotationNumber===m)?._id,quotationNumber:m,categoryId:u._id,category:u.categoryName,date:b,vendor:C,notes:vt,contactPerson:Ne,generalConditions:xt,processes:at,preparedby:Xe,approvedby:jt,remarks:De,validityDate:ht,buyerGroup:se,deliveryLocation:k,deliveryAddress:D,items:T,total:parseFloat(L)||0,taxName:Ae?.taxName||"",cgst:parseFloat(Ge)||0,sgst:parseFloat(Mt)||0,igst:parseFloat(ke)||0,taxDiscount:parseFloat(bt)||0,finalTotal:parseFloat(Rt)||0};lc(er),_s(!0)},cc=async()=>{try{const rt=localStorage.getItem("selectedCompanyId"),dr=localStorage.getItem("financialYear");let er={...jl,companyId:rt,financialYear:dr};if(oc==="internal")er.poGenerationType="internal";else if(oc==="external"){if(!yl.trim())return alert("Please enter external PO number");er.poGenerationType="external",er.poNumber=yl.trim()}const _r=await Oe.post("/api/purchase-orders",er);console.log("Saved PO:",_r.data),ms(),_s(!1),ed(""),td(""),lc(null),alert("PO Created Successfully!")}catch(rt){console.error("Error during PO creation:",rt),alert("Failed to create PO")}},ms=()=>{h(null),p(""),y(new Date().toISOString().substring(0,10)),N(""),S(""),E(""),A([]),P(""),Ke(null),ct(""),Ie(""),it(""),Kt(""),tr(""),lt(""),Re(""),ye(""),Le(""),At("")},dc=()=>{_s(!1),ed(""),td(""),lc(null)},wl=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-cog me-2"}),"PO Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:dc,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the PO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{ed("internal"),cc()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ed("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),oc==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom PO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"External PO Number (max 50 characters)",value:yl,onChange:rt=>td(rt.target.value),onKeyPress:rt=>{rt.key==="Enter"&&yl.trim()&&cc()},maxLength:50,autoComplete:"off",spellCheck:"false",autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[yl.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:cc,disabled:!yl.trim(),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Create PO"]})})]}),oc==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("strong",{children:"System Generated Number"}),a.jsx("br",{}),"Format: ",u?.prefix,"-XXXXXX"]})})]})]})})})]}),Qr=()=>{const rt=mr.filter(er=>er.materialId.toLowerCase().includes(ge.toLowerCase())||er.description.toLowerCase().includes(ge.toLowerCase())),dr=er=>{const _r=[...T];_r[Pe]={..._r[Pe],materialId:er.materialId,description:er.description,baseUnit:er.baseUnit,unit:er.unit,price:er.price,buyerGroup:er.buyerGroup,materialgroup:er.materialgroup},A(_r),Rr(_r),hr(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:ge,onChange:er=>Ue(er.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:rt.map((er,_r)=>a.jsxs("tr",{children:[a.jsx("td",{children:er.materialId}),a.jsx("td",{children:er.description}),a.jsx("td",{children:er.baseUnit}),a.jsx("td",{children:er.unit}),a.jsx("td",{children:er.price}),a.jsx("td",{children:er.priceUnit}),a.jsx("td",{children:er.buyerGroup}),a.jsx("td",{children:er.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>dr(er),children:"Select"})})]},_r))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>hr(!1),style:{marginTop:10},children:"Close"})]})})},ih=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header text-white",children:[a.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="enquiry"?"active":""}`,onClick:()=>t("enquiry"),href:"#",children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="quotation"?"active":""}`,onClick:()=>t("quotation"),href:"#",children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="contract"?"active":""}`,onClick:()=>t("contract"),href:"#",children:"Contract"})})]}),a.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:ks})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"tab-content",children:[e==="enquiry"&&a.jsxs("div",{className:`tab-pane ${e==="enquiry"?"show active":""}`,id:"bottom-tab1",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Enquiry Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Enquiry number...",value:M,onChange:rt=>lr(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:$r,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:z.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Enquiry Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:z.map((rt,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.indentId}),a.jsx("td",{children:new Date(rt.documentDate).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>za(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:M?`No enquiries found matching "${M}"`:'Enter search term or click "View All"'})]})})]}),e==="quotation"&&a.jsxs("div",{className:`tab-pane ${e==="quotation"?"show active":""}`,id:"bottom-tab2",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Quotation Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter quotation number...",value:B,onChange:rt=>qe(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:or,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:X.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:X.map((rt,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.quotationNumber}),a.jsx("td",{className:"text-flex",children:rt.vendorName}),a.jsx("td",{children:new Date(rt.validityDate).toLocaleDateString()}),a.jsxs("td",{children:["",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>zs(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:B?`No quotations found matching "${B}"`:'Enter search term or click "View All"'})]})})]}),e==="contract"&&a.jsxs("div",{className:`tab-pane ${e==="contract"?"show active":""}`,id:"bottom-tab3",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Contract Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter contract number...",value:ee,onChange:rt=>gn(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:ta,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ae.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ae.map((rt,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:rt.contractNumber||rt.contractId})}),a.jsx("td",{children:rt.vendorName||rt.name1}),a.jsx("td",{children:new Date(rt.validityFDate).toLocaleDateString()}),a.jsx("td",{children:new Date(rt.validityTDate).toLocaleDateString()}),a.jsxs("td",{children:["",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fs(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ee?`No contracts found matching "${ee}"`:'Enter search term or click "View All"'})]})})]})]})})})})]})})}),_f=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Gr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:Y,onChange:rt=>gt(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:fr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Se.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Se.map((rt,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:rt.vnNo})}),a.jsx("td",{children:rt.name1}),a.jsx("td",{children:rt.email}),a.jsx("td",{children:rt.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>cr(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Y?`No vendors found matching "${Y}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Gr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Order Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Ref_Document:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference document number",value:m,onChange:rt=>{p(rt.target.value),rt.target.value&&ai(rt.target.value)},required:!0}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),style:{border:"0px solid"},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"PO_Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",onChange:rt=>{const dr=r.find(er=>er._id===rt.target.value);h(dr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),r.map(rt=>a.jsx("option",{value:rt._id,children:rt.categoryName},rt._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:C,onChange:rt=>N(rt.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>de(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:v,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:rt=>y(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:k,onChange:rt=>S(rt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),Fe.map(rt=>a.jsx("option",{value:rt.name||rt.locationName||rt._id,children:rt.name||rt.locationName||rt._id},rt._id||rt.id||rt.name))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:se,onChange:rt=>ye(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:rt=>Le(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:ht,onChange:rt=>At(rt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:St.length===0?"Select...":`${St.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:xt.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:St.includes(rt._id),onChange:()=>sr(rt._id,St,Xt)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.name})]})},rt._id))})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Processes"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:ar.length===0?"Select...":`${ar.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:at.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ar.includes(rt._id),onChange:()=>sr(rt._id,ar,pr)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.processId})]})},rt._id))})]})})]}),a.jsxs("div",{className:"col-lg-3  row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Header Note:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Je,onChange:rt=>lt(rt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:De,onChange:rt=>Ye(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:Xe,onChange:rt=>Be(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:jt,onChange:rt=>Qe(rt.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((rt,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:dr+1}),a.jsx("td",{children:a.jsx("input",{value:rt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{Ee(dr),hr(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.description,onChange:er=>vn(dr,"description",er.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.quantity,onChange:er=>vn(dr,"quantity",er.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.baseUnit,onChange:er=>vn(dr,"baseUnit",er.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.orderUnit,onChange:er=>vn(dr,"orderUnit",er.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.materialgroup,onChange:er=>vn(dr,"materialgroup",er.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.price,onChange:er=>vn(dr,"price",er.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:rt.priceUnit,onChange:er=>vn(dr,"priceUnit",er.target.value),required:!0,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(rt.quantity*rt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:rt.deliveryDate,onChange:er=>vn(dr,"deliveryDate",er.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:rt.note,onChange:er=>vn(dr,"note",er.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>Vn(dr),children:a.jsx("i",{className:"ti ti-trash"})})})]},dr))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",className:"btn btn-link",onClick:Oi,children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Nl,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:D,onChange:rt=>E(rt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{className:"",children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-12  row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-sm",onChange:rt=>{const dr=He.find(er=>er.taxName===rt.target.value);if(Ke(dr),dr){const er=dr.cgst||0,_r=dr.sgst||0,Cr=dr.igst||0;ct(er),Ie(_r),it(Cr),Rr(T,er,_r,Cr,bt)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),He.map(rt=>a.jsx("option",{value:rt.taxName,children:rt.taxName},rt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ge,onChange:rt=>oa(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Mt,onChange:rt=>Ho(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:ke,onChange:rt=>es(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:bt,onChange:rt=>Io(rt.target.value)})})]})]}),a.jsx("div",{className:"border-top ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["",L]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["",Tt]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["",pe]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["",xe]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ",bt]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["",Rt]})]})]})})})]})]})})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit PO"})})]})})})})})]}),fn&&a.jsx(Qr,{}),U&&a.jsx(ih,{}),G&&a.jsx(_f,{}),Mi&&a.jsx(wl,{})]})})]})}function h5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),o=localStorage.getItem("activeRole"),[l,c]=w.useState(""),[d,u]=w.useState({fromDate:"",toDate:""}),[h,m]=w.useState(!1),[p,v]=w.useState("poNumber"),[g,b]=w.useState([]),[y,C]=w.useState(1),[N]=w.useState(10),[k,S]=w.useState(!1),[D,E]=w.useState(null),[T,A]=w.useState({approvedBy:"",approvalDate:"",approvalComments:""}),[L,P]=w.useState(!1),[O,J]=w.useState({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0}),[W,re]=w.useState([]),[U,Q]=w.useState([]);w.useEffect(()=>{X(),B(),te()},[]);const B=async()=>{try{const pe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),xe=await Oe.get("/api/vendors",{params:{companyId:pe,financialYear:he}});re(xe.data)}catch(pe){console.error("Error fetching vendors:",pe)}},te=async()=>{try{const pe=localStorage.getItem("selectedCompanyId"),he=await Oe.get("/api/po-categories",{params:{companyId:pe}});Q(he.data)}catch(pe){console.error("Error fetching categories:",pe)}},X=()=>{i(!0);const pe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear");Oe.get("/api/purchase-orders",{params:{companyId:pe,financialYear:he}}).then(xe=>{const me=xe.data.slice().sort((De,Ye)=>{const jt=De.createdAt?new Date(De.createdAt):new Date(De.date||0),Qe=Ye.createdAt?new Date(Ye.createdAt):new Date(Ye.date||0);return isNaN(jt)&&isNaN(Qe)?0:isNaN(jt)?1:isNaN(Qe)?-1:Qe-jt});t(me),n(me),i(!1)}).catch(xe=>{console.error("Error fetching POs:",xe),alert("Failed to fetch POs"),i(!1)})},ce=()=>{let pe=e;l.trim()&&(pe=pe.filter(he=>[he.poNumber,he.vendor,he.category,he.quotationNumber,he.deliveryLocation,he.deliveryAddress,he.date].some(me=>me&&me.toString().toLowerCase().includes(l.toLowerCase())))),(d.fromDate||d.toDate)&&(pe=pe.filter(he=>{const xe=new Date(he.date),me=d.fromDate?new Date(d.fromDate):null,De=d.toDate?new Date(d.toDate):null;De&&De.setHours(23,59,59,999);let Ye=!0;return me&&xe<me&&(Ye=!1),De&&xe>De&&(Ye=!1),Ye})),n(pe),C(1)},M=pe=>{c(pe.target.value)},q=(pe,he)=>{u(xe=>({...xe,[pe]:he}))},z=()=>{c(""),u({fromDate:"",toDate:""}),n(e),C(1)};w.useEffect(()=>{ce()},[l,d,e]);const K=pe=>{const he=pe.target.value;if(c(he),he.trim()===""){b([]);return}const xe=e.filter(me=>{switch(p){case"poNumber":return me.poNumber?.toLowerCase().includes(he.toLowerCase());case"vendor":return me.vendor?.toLowerCase().includes(he.toLowerCase());case"category":return me.category?.toLowerCase().includes(he.toLowerCase());case"quotationNumber":return me.quotationNumber?.toLowerCase().includes(he.toLowerCase());default:return me.poNumber?.toLowerCase().includes(he.toLowerCase())}});b(xe)},ee=()=>{b(e),c("")},ne=()=>{b([]),c("")},ae=pe=>{n([pe]),C(1),ie()},ie=()=>{m(!1),b([]),c("")},G=pe=>{J({_id:pe._id,poNumber:pe.poNumber||"",category:pe.category||"",date:pe.date||"",vendor:pe.vendor||"",deliveryLocation:pe.deliveryLocation||"",deliveryAddress:pe.deliveryAddress||"",quotationNumber:pe.quotationNumber||"",items:pe.items||[],remarks:pe.remarks||"",notes:pe.notes||"",preparedby:pe.preparedby||"",cgst:pe.cgst||0,sgst:pe.sgst||0,igst:pe.igst||0,taxDiscount:pe.taxDiscount||0,total:pe.total||0,finalTotal:pe.finalTotal||0}),P(!0)},de=()=>{P(!1),J({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0})},Y=(pe,he)=>{J(xe=>({...xe,[pe]:he}))},oe=(pe,he,xe)=>{const me=[...O.items];if(me[pe]={...me[pe],[he]:xe},he==="price"||he==="quantity"){const De=he==="price"?parseFloat(xe)||0:parseFloat(me[pe].price)||0,Ye=he==="quantity"?parseFloat(xe)||0:parseFloat(me[pe].quantity)||0;me[pe].total=De*Ye}J(De=>({...De,items:me})),se(me)},Se=()=>{const pe={materialId:"",description:"",quantity:0,unit:"",price:0,deliveryDate:"",total:0};J(he=>({...he,items:[...he.items,pe]}))},ue=pe=>{const he=O.items.filter((xe,me)=>me!==pe);J(xe=>({...xe,items:he})),se(he)},se=(pe=O.items)=>{const he=pe.reduce((Qe,Xe)=>Qe+(parseFloat(Xe.price)||0)*(parseFloat(Xe.quantity)||0),0),xe=he*(parseFloat(O.cgst)||0)/100,me=he*(parseFloat(O.sgst)||0)/100,De=he*(parseFloat(O.igst)||0)/100,Ye=parseFloat(O.taxDiscount)||0,jt=he+xe+me+De-Ye;J(Qe=>({...Qe,total:he,finalTotal:jt}))};w.useEffect(()=>{O.items.length>0&&se()},[O.cgst,O.sgst,O.igst,O.taxDiscount]);const ye=async()=>{try{if(!O.poNumber||!O.vendor){alert("Please fill in all required fields (PO Number and Vendor)");return}const pe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),xe={...O,companyId:pe,financialYear:he,updatedAt:new Date().toISOString()},me=await Oe.put(`/api/purchase-orders/${O._id}`,xe),De=e.map(Ye=>Ye._id===O._id?me.data:Ye);t(De),n(De.filter(Ye=>r.some(jt=>jt._id===Ye._id))),de(),alert("Purchase Order updated successfully!")}catch(pe){console.error("Error updating PO:",pe),alert(`Failed to update Purchase Order: ${pe.response?.data?.error||pe.message}`)}},Ne=pe=>{E(pe),A({approvedBy:"",approvalDate:"",approvalComments:""}),S(!0)},Le=async()=>{try{if(!T.approvedBy||!T.approvalDate){alert("Please fill in all required approval fields");return}const pe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),xe={status:"approved",approvedBy:T.approvedBy,approvalDate:T.approvalDate,approvalComments:T.approvalComments,companyId:pe,financialYear:he},me=await Oe.put(`/api/purchase-orders/${D._id}/approve`,xe),De=e.map(Ye=>Ye._id===D._id?me.data.purchaseOrder||me.data:Ye);t(De),n(De.filter(Ye=>r.some(jt=>jt._id===Ye._id))),S(!1),E(null),alert("Purchase Order approved successfully!")}catch(pe){console.error("Error approving PO:",pe),alert(`Failed to approve Purchase Order: ${pe.response?.data?.error||pe.message}`)}},Je=()=>{S(!1),E(null),A({approvedBy:"",approvalDate:"2025-01-02",approvalComments:""})},lt=y*N,vt=lt-N,Re=r.slice(vt,lt),ht=Math.ceil(r.length/N),At=pe=>C(pe),Tt=async pe=>{try{const he=localStorage.getItem("selectedCompanyId"),xe=localStorage.getItem("financialYear"),[me,De]=await Promise.all([Oe.get(`/api/vendors/${pe.vendor}`,{params:{companyId:he,financialYear:xe}}),Oe.get(`/api/companies/${he}`)]),Ye=me.data,jt=De.data,Qe=async ct=>{try{const Ie=`/api/image/${ct.includes("/")?ct.split("/").pop():ct}`,ke=await Oe.get(Ie,{responseType:"arraybuffer"});return`data:image/jpeg;base64,${btoa(new Uint8Array(ke.data).reduce((bt,Kt)=>bt+String.fromCharCode(Kt),""))}`}catch(Mt){return console.error("Error fetching image:",Mt),null}};let Xe=null;jt.logo&&(Xe=await Qe(jt.logo));const Be=pe.items.map((ct,Mt)=>`
     <tr>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${Mt+1}</td>
       <td style="border: 1px solid #000; padding: 4px;">${ct.materialId||""}</td>
       <td style="border: 1px solid #000; padding: 4px;">${ct.description||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${ct.deliveryDate||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${ct.quantity||""} ${ct.unit||""}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${ct.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${ct.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((ct.price||0)*(ct.quantity||0)).toFixed(2)}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((ct.price||0)*(ct.quantity||0)).toFixed(2)}</td>
     </tr>
   `).join(""),He=(()=>{if(pe.notes){if(typeof pe.notes=="string"){const ct=pe.notes.split(`
`).filter(Mt=>Mt.trim()!=="");if(ct.length>0)return ct.map((Mt,Ie)=>`
           <tr>
             <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Ie+1}.</td>
             <td style="border: 1px solid #000; padding: 4px;">${Mt.trim()}</td>
           </tr>
         `).join("")}else if(Array.isArray(pe.notes)&&pe.notes.length>0)return pe.notes.map((ct,Mt)=>`
         <tr>
           <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Mt+1}.</td>
           <td style="border: 1px solid #000; padding: 4px;">${ct}</td>
         </tr>
       `).join("")}return`
     <tr>
       <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">-</td>
       <td style="border: 1px solid #000; padding: 4px; color: #666; font-style: italic;">No notes available</td>
     </tr>
   `})(),ft=pe.generalConditions&&pe.generalConditions.length>0?pe.generalConditions.map((ct,Mt)=>`
           <div style="margin-bottom: 8px;">
             <strong>${Mt+1}. ${ct.name}:</strong><br>
             ${ct.description}
           </div>
         `).join(""):"",Ae=ct=>{const Mt=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],Ie=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],ke=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return ct===0?"Zero":ct<10?Mt[ct]:ct<20?Ie[ct-10]:ct<100?ke[Math.floor(ct/10)]+(ct%10?" "+Mt[ct%10]:""):ct<1e3?Mt[Math.floor(ct/100)]+" Hundred"+(ct%100?" "+Ae(ct%100):""):ct<1e5?Ae(Math.floor(ct/1e3))+" Thousand"+(ct%1e3?" "+Ae(ct%1e3):""):ct<1e7?Ae(Math.floor(ct/1e5))+" Lakh"+(ct%1e5?" "+Ae(ct%1e5):""):Ae(Math.floor(ct/1e7))+" Crore"+(ct%1e7?" "+Ae(ct%1e7):"")},Ke=`
     <!DOCTYPE html>
     <html>
     <head>
       <title>Purchase Order - ${pe.poNumber}</title>
       <style>
         @page {
           size: A4;
           margin: 0.5in;
         }
         body {
           font-family: Arial, sans-serif;
           font-size: 11px;
           line-height: 1.2;
           margin: 0;
           padding: 0;
           color: #000;
         }
         .header-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-bottom: 0;
         }
         .header-table td {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .main-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-top: 0;
         }
         .main-table td, .main-table th {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .center {
           text-align: center;
         }
         .bold {
           font-weight: bold;
         }
         .section-header {
           background-color: #f0f0f0;
           font-weight: bold;
           text-align: center;
           padding: 6px;
         }
         .amount-cell {
           text-align: right;
           padding-right: 8px;
         }
         .print-note {
           font-size: 10px;
           color: #666;
           text-align: center;
           margin-top: 10px;
         }
         .no-border {
           border: none !important;
         }
         .logo-img {
           max-width: 100px;
           max-height: 80px;
           object-fit: contain;
         }
         .general-conditions {
           padding: 8px;
           font-size: 10px;
           line-height: 1.3;
         }
       </style>
     </head>
     <body>
       <!-- Header Section -->
       <table class="header-table">
         <tr>
           <td colspan="6" class="section-header">PURCHASE ORDER</td>
         </tr>
         <tr>
           <td class="bold" style="width: 120px;">PO No.:</td>
           <td style="width: 150px;">${pe.poNumber}</td>
           <td rowspan="6" style="text-align: center; vertical-align: middle; width: 200px;">
           ${Xe?`<img src="${Xe}" alt="Company Logo" class="logo-img">`:'<div style="border: 1px dashed #ccc; padding: 20px; color: #999;">No Logo</div>'}
           </td>
         </tr>
         <tr>
           <td class="bold">PO Date:</td>
           <td>${pe.date}</td>
         </tr>
         <tr>
           <td class="bold">Rev. No.:</td>
           <td>${pe.revisionNumber||"1.0"}</td>
         </tr>
         <tr>
           <td class="bold">Rev. Date:</td>
           <td>${pe.revisionDate||pe.date}</td>
         </tr>
         <tr>
           <td class="bold">Ref No.:</td>
           <td>${pe.refNumber||""}</td>
         </tr>
         <tr>
           <td class="bold">Ref Date:</td>
           <td>${pe.refDate||pe.date}</td>
         </tr>
         <tr>
           <td class="bold">Supplier Details:</td>
           <td colspan="2">
             <strong>M/s. ${Ye.name1||Ye.name}</strong><br>
             ${Ye.address1||""}<br>
             ${Ye.address2||""}<br>
             ${Ye.city||""}, ${Ye.region||""}<br>
             ${Ye.country||""}<br>
             ${Ye.pincode||""}<br>
             Contact Details: ${Ye.contactNo||""}<br>
             ${Ye.email||""}
           </td>
         </tr>
         <tr>
           <td class="bold">GSTIN:</td>
           <td>${jt.gstin||""}</td>
           <td></td>
         </tr>
       </table>
 
       <!-- Bill To and Ship To -->
       <table class="main-table">
         <tr>
           <td class="bold section-header">BILL TO:</td>
           <td class="bold section-header">SHIP TO:</td>
         </tr>
         <tr>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${jt.name||""}</strong><br>
             ${jt.address1||""}<br>
             ${jt.address||""}<br>
             ${jt.city||""} ${jt.state||""}<br>
             <strong>Tel:</strong> ${jt.phone||""}<br>
             <strong>Email:</strong> ${jt.email||""}
           </td>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${jt.name||""}</strong><br>
             ${jt.address1||""}<br>
             ${jt.address||""}<br>
             ${jt.city||""} ${jt.state||""}<br>
             <strong>Tel:</strong> ${jt.phone||""}<br>
             <strong>Email:</strong> ${jt.email||""}
           </td>
         </tr>
       </table>
 
       <!-- Items Section -->
       <table class="main-table">
         <tr>
           <td colspan="9" class="section-header">PLEASE SUPPLY THE FOLLOWING ITEMS AS PER THE DETAILS MENTIONED BELOW:</td>
         </tr>
         <tr class="bold" style="background-color: #f0f0f0;">
           <td class="center">SI No</td>
           <td class="center">Part No</td>
           <td class="center">Description</td>
           <td class="center">Schedule</td>
           <td class="center">Quantity & Unit</td>
           <td class="center">Unit Price</td>
           <td class="center">Unit Price ()</td>
           <td class="center">Int ()</td>
           <td class="center">Total</td>
         </tr>
         ${Be}
         <tr>
           <td colspan="6" class="bold">Basic Total:</td>
           <td class="amount-cell bold">${pe.total||0}</td>
           <td colspan="2"></td>
         </tr>
       </table>
 
       <!-- Notes Section -->
       <table class="main-table">
         <tr>
           <td colspan="2" class="section-header">NOTES:</td>
         </tr>
         ${He}
       </table>
 
       <!-- Tax Summary -->
       <table class="main-table">
         <tr>
           <td style="width: 60%;">
             <strong>Total Amount (In Words):</strong><br>
             Rupees ${Ae(Math.floor(pe.finalTotal||pe.total||0))} Only
           </td>
           <td style="width: 40%;">
             <table style="width: 100%; border-collapse: collapse;">
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>SGST(${pe.sgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(pe.total*(pe.sgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>CGST(${pe.cgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(pe.total*(pe.cgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr style="border-top: 1px solid #000;">
                 <td class="no-border" style="padding: 2px;"><strong>Net Total:</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;"><strong>${pe.finalTotal||pe.total||0}</strong></td>
               </tr>
             </table>
           </td>
         </tr>
       </table>
 
       <!-- Remarks -->
       <table class="main-table">
         <tr>
           <td class="bold" style="width: 100px;">REMARKS:</td>
           <td>${pe.remarks||""}</td>
         </tr>
       </table>
 
       <!-- Terms and Conditions -->
       <table class="main-table">
         <tr>
           <td style="width: 50%;">
             <strong>TERMS & CONDITIONS:</strong><br>
             <div class="general-conditions">
               ${ft||pe.termsAndConditions||""}
             </div>
           </td>
           <td style="width: 50%;">
             <strong>PREPARED BY:</strong> ${pe.preparedby||""}<br><br>
             <strong>APPROVED BY:</strong> ${pe.approvedBy||pe.approvedby||""}
           </td>
         </tr>
       </table>
 
       <div class="print-note">
         This is an electronically generated document and does not require signature.
       </div>
     </body>
     </html>
   `,Ge=window.open("","_blank","width=800,height=600");Ge.document.write(Ke),Ge.document.close(),Ge.focus(),Ge.onload=function(){Ge.print()}}catch(he){console.error("Error generating print:",he),alert("Error generating print. Please try again.")}},Ht=pe=>{switch(pe){case"approved":return a.jsx("span",{className:"badge bg-success",children:"Approved"});case"rejected":return a.jsx("span",{className:"badge bg-danger",children:"Rejected"});case"pending":return a.jsx("span",{className:"badge bg-warning",children:"Pending"});default:return a.jsx("span",{className:"badge bg-secondary",children:"Draft"})}};return s?a.jsx("div",{className:"content",children:a.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading Purchase Orders..."})]})})}):a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order Display"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order Display"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search All Fields"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search across all fields...",value:l,onChange:M})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:d.fromDate,onChange:pe=>q("fromDate",pe.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:d.toDate,onChange:pe=>q("toDate",pe.target.value)})]})]}),(l||d.fromDate||d.toDate)&&a.jsx("div",{className:"row mt-2",children:a.jsx("div",{className:"col-12",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:z,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear All Filters"]})})})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Re.length>0?Re.map(pe=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:pe.poNumber})}),a.jsx("td",{children:pe.date}),a.jsx("td",{children:pe.vendor}),a.jsx("td",{children:pe.category}),a.jsx("td",{children:pe.quotationNumber}),a.jsx("td",{children:pe.deliveryLocation}),a.jsx("td",{children:Ht(pe.status)}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>G(pe),title:"Edit Purchase Order",disabled:pe.status==="approved",children:a.jsx("i",{className:"fas fa-edit"})}),pe.status!=="approved"&&o.toLowerCase()==="admin"&&a.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>Ne(pe),title:"Approve Purchase Order",children:a.jsx("i",{className:"fas fa-check"})}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>Tt(pe),title:"Print Purchase Order",children:a.jsx("i",{className:"fas fa-print"})})]})})]},pe._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No purchase orders found"}),(l||d.fromDate||d.toDate)&&a.jsxs("button",{className:"btn btn-outline-primary btn-sm mt-2",onClick:z,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear Filters"]})]})})})]})})})]}),ht>1&&a.jsx("nav",{"aria-label":"Purchase Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>At(y-1),disabled:y===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:ht},(pe,he)=>he+1).map(pe=>a.jsx("li",{className:`page-item ${y===pe?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>At(pe),children:pe})},pe)),a.jsx("li",{className:`page-item ${y===ht?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>At(y+1),disabled:y===ht,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})}),L&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-edit me-2"}),"Edit Purchase Order - ",O.poNumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:de})]}),a.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[a.jsxs("div",{className:"row mb-4",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"Basic Information"]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["PO Number ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:O.poNumber,onChange:pe=>Y("poNumber",pe.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Date ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"date",className:"form-control",value:O.date,onChange:pe=>Y("date",pe.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:O.category,onChange:pe=>Y("category",pe.target.value),children:[a.jsx("option",{value:"",children:"Select Category"}),U.map(pe=>a.jsx("option",{value:pe.name,children:pe.name},pe._id))]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Delivery Information"]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Vendor ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{className:"form-select",value:O.vendor,onChange:pe=>Y("vendor",pe.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Vendor"}),W.map(pe=>a.jsx("option",{value:pe.name,children:pe.name},pe._id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Location"}),a.jsx("input",{type:"text",className:"form-control",value:O.deliveryLocation,onChange:pe=>Y("deliveryLocation",pe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Address"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.deliveryAddress,onChange:pe=>Y("deliveryAddress",pe.target.value)})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsxs("h6",{className:"text-primary mb-0",children:[a.jsx("i",{className:"fas fa-list me-2"}),"Items (",O.items.length,")"]}),a.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Se,children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:O.items.map((pe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:pe.materialId||"",onChange:xe=>oe(he,"materialId",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:pe.description||"",onChange:xe=>oe(he,"description",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:pe.quantity||"",onChange:xe=>oe(he,"quantity",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:pe.unit||"",onChange:xe=>oe(he,"unit",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",step:"0.01",className:"form-control form-control-sm",value:pe.price||"",onChange:xe=>oe(he,"price",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:pe.deliveryDate||"",onChange:xe=>oe(he,"deliveryDate",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:((parseFloat(pe.price)||0)*(parseFloat(pe.quantity)||0)).toFixed(2),readOnly:!0})}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>ue(he),disabled:O.items.length<=1,children:a.jsx("i",{className:"fas fa-trash"})})})]},he))})]})})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-percentage me-2"}),"Tax Information"]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"CGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.cgst,onChange:pe=>Y("cgst",pe.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"SGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.sgst,onChange:pe=>Y("sgst",pe.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"IGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.igst,onChange:pe=>Y("igst",pe.target.value)})]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Totals"]}),a.jsx("div",{className:"card bg-light",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Subtotal:"}),a.jsxs("span",{children:["",O.total.toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["CGST (",O.cgst,"%):"]}),a.jsxs("span",{children:["",(O.total*O.cgst/100).toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["SGST (",O.sgst,"%):"]}),a.jsxs("span",{children:["",(O.total*O.sgst/100).toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["IGST (",O.igst,"%):"]}),a.jsxs("span",{children:["",(O.total*O.igst/100).toFixed(2)]})]}),a.jsx("hr",{}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{children:["",O.finalTotal.toFixed(2)]})]})]})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",value:O.quotationNumber,onChange:pe=>Y("quotationNumber",pe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Prepared By"}),a.jsx("input",{type:"text",className:"form-control",value:O.preparedby,onChange:pe=>Y("preparedby",pe.target.value)})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Remarks"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.remarks,onChange:pe=>Y("remarks",pe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Notes"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.notes,onChange:pe=>Y("notes",pe.target.value)})]})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:de,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:ye,disabled:!O.poNumber||!O.vendor,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Update Purchase Order"]})]})]})})}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-success text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-check me-2"}),"Approve Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Je})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"PO Number:"})," ",D?.poNumber]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Vendor:"})," ",D?.vendor]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Total Amount:"})," ",(D?.finalTotal||D?.total||0).toLocaleString("en-IN")]}),a.jsx("hr",{}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Approved By ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:T.approvedBy,onChange:pe=>A(he=>({...he,approvedBy:pe.target.value})),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Approval Date ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"date",className:"form-control",value:T.approvalDate,onChange:pe=>A(he=>({...he,approvalDate:pe.target.value})),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Comments (Optional)"}),a.jsx("textarea",{className:"form-control",rows:"3",value:T.approvalComments,onChange:pe=>A(he=>({...he,approvalComments:pe.target.value})),placeholder:"Enter approval comments..."})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),a.jsxs("button",{type:"button",className:"btn btn-success",onClick:Le,disabled:!T.approvedBy||!T.approvalDate,children:[a.jsx("i",{className:"fas fa-check me-1"}),"Approve Purchase Order"]})]})]})})}),h&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ie})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search By"}),a.jsxs("select",{className:"form-select",value:p,onChange:pe=>v(pe.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"category",children:"Category"}),a.jsx("option",{value:"quotationNumber",children:"Quotation Number"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${p==="poNumber"?"PO Number":p}...`,value:l,onChange:K})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ee,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ne,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:g.map((pe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:pe.poNumber})}),a.jsx("td",{children:pe.date}),a.jsx("td",{children:pe.vendor}),a.jsx("td",{children:pe.category}),a.jsx("td",{children:Ht(pe.status)}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(pe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No purchase orders loaded from API":l?`No purchase orders found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const O8=["Piece","Box","Kg","Ltr"],f5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(!1),[o,l]=w.useState([]),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(new Date().toISOString().split("T")[0]),[L,P]=w.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}]),[O,J]=w.useState(!1),[W,re]=w.useState(""),[U,Q]=w.useState([]),[B,te]=w.useState("materialId"),[X,ce]=w.useState(null),[M,q]=w.useState(1),[z]=w.useState(5),K="MMNR-",ee=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),ae=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:ee,financialYear:ne}}).then(pe=>{const he=pe.data.filter(xe=>!xe.isDeleted&&!xe.isBlocked);console.log("Filtered materials:",he),t(he)}).catch(pe=>console.error(pe)),Oe.get("/api/locations",{params:{companyId:ee,financialYear:ne}}).then(pe=>l(pe.data))},[]),w.useEffect(()=>{Oe.get("/api/salecategory",{params:{companyId:ee,financialYear:ne}}).then(pe=>y(pe.data)).catch(pe=>console.error(pe))},[]);const ie=()=>{P(pe=>[...pe,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}])},G=pe=>{P(xe=>xe.filter((me,De)=>De!==pe));const he=Math.ceil((L.length-1)/z);M>he&&he>0&&q(he)},de=async(pe,he,xe)=>{const me=[...L];if(me[pe][he]=xe,he==="materialId"&&me[pe].isManual)try{const Ye=(await Oe.get(`/api/material/byId/${xe}`)).data;Ye&&(me[pe]={...me[pe],materialId:Ye.materialId,description:Ye.description,baseUnit:Ye.baseUnit,orderUnit:Ye.orderUnit,location:Ye.location,materialgroup:Ye.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",xe)}P(me)},Y=()=>{if(!W.trim()){Q([]);return}if(console.log("Searching with query:",W,"Type:",B),console.log("Available materials:",e),B==="materialId"){let pe=W;/^\d+$/.test(W)&&(pe=K+W);const he=e.filter(xe=>(xe.materialId||"").toLowerCase().includes(pe.toLowerCase()));console.log("Filtered results for materialId:",he),Q(he)}else{const pe=e.filter(he=>(he.description||"").toLowerCase().includes(W.toLowerCase()));console.log("Filtered results for description:",pe),Q(pe)}};w.useEffect(()=>{const pe=setTimeout(()=>{W.trim()?Y():Q([])},300);return()=>clearTimeout(pe)},[W,B,e]);const oe=pe=>{const he=pe.target.value;re(he)},Se=()=>{Q(e),re("")},ue=()=>{Q([]),re("")},se=pe=>{ce(pe),J(!0),re(""),Q([])},ye=()=>{J(!1),ce(null),re(""),Q([])},Ne=pe=>{if(X!==null){const he=[...L];he[X]={...he[X],materialId:pe.materialId,description:pe.description,baseUnit:pe.baseUnit,orderUnit:pe.orderUnit,location:pe.location,materialgroup:pe.materialgroup,isManual:!0},P(he)}ye()},Le=async()=>{if(!C){alert("Please select a purchase category");return}if(!k||!D){alert("Please fill in Location and Buyer Group");return}const pe=L.filter(xe=>xe.materialId&&xe.materialId.trim()!==""&&xe.description&&xe.description.trim()!==""&&xe.qty&&xe.qty>0);if(pe.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const he=b.find(xe=>xe.name===C||xe.categoryName===C||xe._id===C);try{const xe={indentIdType:m,externalIndentId:v,categoryId:he._id,categoryName:he.name||he.categoryName,location:k,salesGroup:D,documentDate:T,items:pe,companyId:ae,financialYear:ne};if(m==="")h(xe),d(!1),i(!0);else{if(m==="internal"){const me=await Oe.post("/api/salerequest/create",xe);alert(`Indent saved successfully with ID: ${me.data.indentId}`)}else if(m==="external"){if(!v||v.trim()===""){alert("Please enter an External Indent ID");return}xe.indentId=v;const me=await Oe.post("/api/indent/create",xe);alert(`Indent saved successfully with External ID: ${me.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);i(!1),P([]),S(""),E(""),A(new Date().toISOString().split("T")[0]),q(1)}}catch(xe){console.error(xe),alert("Failed to save indent")}},Je=M*z,lt=Je-z,vt=L.slice(lt,Je),Re=Math.ceil(L.length/z),ht=pe=>q(pe),At=({currentPage:pe,totalPages:he,onPageChange:xe,size:me="normal"})=>{if(he<=1)return null;const De=[],Ye=5;let jt=Math.max(1,pe-Math.floor(Ye/2)),Qe=Math.min(he,jt+Ye-1);Qe-jt+1<Ye&&(jt=Math.max(1,Qe-Ye+1));for(let Be=jt;Be<=Qe;Be++)De.push(Be);const Xe=me==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${pe===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>xe(pe-1),disabled:pe===1,children:"Previous"})}),jt>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>xe(1),children:"1"})}),jt>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Xe}`,children:"..."})})]}),De.map(Be=>a.jsx("li",{className:`page-item ${pe===Be?"active":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>xe(Be),children:Be})},Be)),Qe<he&&a.jsxs(a.Fragment,{children:[Qe<he-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Xe}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>xe(he),children:he})})]}),a.jsx("li",{className:`page-item ${pe===he?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>xe(pe+1),disabled:pe===he,children:"Next"})})]})})},Tt=()=>{i(!1),p(""),g(""),h(null),d(!0)},Ht=pe=>{p(pe),pe==="internal"&&Le()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-lg",value:C,onChange:pe=>N(pe.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),b.map((pe,he)=>a.jsx("option",{value:pe.name||pe.categoryName||pe._id,children:pe.name||pe.categoryName||`Category ${he+1}`},he))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Doc Date ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:pe=>A(pe.target.value)})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Location ",a.jsx("span",{className:"text-danger",children:"*"})]})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-control-sm",value:k,onChange:pe=>S(pe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),o.map((pe,he)=>a.jsx("option",{value:pe.name||pe._id,children:pe.name||pe._id},he))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Group ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:pe=>E(pe.target.value),placeholder:"Buyer Group"})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",L.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-body p-0",children:L.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:"table-sm table-bordered table-striped mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:vt.map((pe,he)=>{const xe=lt+he;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:xe+1}),a.jsx("td",{children:pe.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",value:pe.materialId,onChange:me=>de(xe,"materialId",me.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>se(xe),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:pe.materialId})}),a.jsx("td",{children:pe.isManual?a.jsx("input",{className:"form-control form-control-sm",value:pe.description,onChange:me=>de(xe,"description",me.target.value),placeholder:"Description",readOnly:!!pe.materialId}):a.jsx("span",{title:pe.description,children:pe.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:pe.qty,onChange:me=>de(xe,"qty",me.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:pe.baseUnit,onChange:me=>de(xe,"baseUnit",me.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(me=>a.jsx("option",{value:me,children:me},me))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:pe.deliveryDate,onChange:me=>de(xe,"deliveryDate",me.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:pe.orderUnit,onChange:me=>de(xe,"orderUnit",me.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(me=>a.jsx("option",{value:me,children:me},me))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:pe.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>G(xe),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},xe)})})]})}),a.jsx("div",{className:"card-footer bg-light",children:a.jsx(At,{currentPage:M,totalPages:Re,onPageChange:ht,size:"small"})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]})}),a.jsx("div",{className:"col-md-6 d-flex align-items-end",children:a.jsxs("button",{onClick:ie,className:"btn btn-outline-primary me-2 btn-sm",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})]})]}),a.jsxs("button",{onClick:Le,className:"btn btn-success btn-sm",disabled:!C||L.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]}),O&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ye})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:B,onChange:pe=>te(pe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:B==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:W,onChange:oe})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Se,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),U.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ue,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:U.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:U.map((pe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge ",children:pe.materialId})}),a.jsx("td",{children:pe.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:pe.baseUnit})}),a.jsx("td",{children:pe.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:pe.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(pe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":W?`No materials found matching "${W}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ye,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Tt,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),m==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:pe=>g(pe.target.value),maxLength:50,required:!0,placeholder:"Enter custom Indent ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[v.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:Le,disabled:!v.trim(),children:"Create Indent"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>p(""),children:"Back"})]})]}):a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>Ht("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]}),a.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>Ht("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External(Custom ID)"]})]})})]})]})})})]})]})},m5e=()=>{const[e,t]=w.useState(1),[r]=w.useState(10),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(""),[d,u]=w.useState("indentId"),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState([]),[y,C]=w.useState(null),[N,k]=w.useState(null),S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear");w.useEffect(()=>{E()},[]);const E=()=>{m(!0),Oe.get("/api/salerequest/get",{params:{companyId:S,financialYear:D}}).then(q=>{const z=q.data.sort((K,ee)=>new Date(ee.createdAt||ee.documentDate)-new Date(K.createdAt||K.documentDate));s(z),o(z)}).catch(q=>console.error("Failed to fetch saved indents",q)).finally(()=>m(!1))},T=async(q,z,K)=>{try{const ee={[z]:K};await Oe.put(`/api/salerequest/status/${q}`,ee);const ne=ae=>ae.map(ie=>ie._id===q?{...ie,[z]:K}:ie);s(ne),o(ae=>ne(ae)),alert("Status updated successfully!")}catch(ee){console.error("Error updating status:",ee),alert("Failed to update status!")}},A=()=>{v(!0),b(n)},L=()=>{v(!1),c(""),b([])},P=q=>{const z=q.target.value;if(c(z),z.trim()===""){b(n);return}const K=n.filter(ee=>{if(d==="indentId"){const ne=z.toLowerCase(),ae=ee.indentId.toLowerCase();return ae.includes(ne)||ae.replace(/[^0-9]/g,"").includes(ne.replace(/[^0-9]/g,""))}else{if(d==="location")return ee.location.toLowerCase().includes(z.toLowerCase());if(d==="buyerGroup")return ee.buyerGroup.toLowerCase().includes(z.toLowerCase());if(d==="categoryName")return ee.categoryName.toLowerCase().includes(z.toLowerCase())}return!1});b(K)};w.useEffect(()=>{const q=n.find(z=>z._id===y);k(q)},[y,n]);const O=()=>{b(n),c("")},J=()=>{b([]),c("")},W=q=>{o([q]),t(1),L()},re=()=>{o(n),t(1)},U=q=>{const z=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${q.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(q.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${q.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${q.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${q.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${q.items.map((ee,ne)=>`
                                <tr style="${ne%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ne+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ee.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${ee.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,K=window.open("","","width=900,height=700");K.document.write("<html><head><title>Indent Print - "+q.indentId+"</title></head><body>"),K.document.write(z),K.document.write("</body></html>"),K.document.close(),K.print()},Q=e*r,B=Q-r,te=i.slice(B,Q),X=Math.ceil(i.length/r),ce=q=>t(q),M=({currentPage:q,totalPages:z,onPageChange:K})=>{if(z<=1)return null;const ee=[],ne=5;let ae=Math.max(1,q-Math.floor(ne/2)),ie=Math.min(z,ae+ne-1);ie-ae+1<ne&&(ae=Math.max(1,ie-ne+1));for(let G=ae;G<=ie;G++)ee.push(G);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${q===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>K(q-1),disabled:q===1,children:"Previous"})}),ae>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>K(1),children:"1"})}),ae>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),ee.map(G=>a.jsx("li",{className:`page-item ${q===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>K(G),children:G})},G)),ie<z&&a.jsxs(a.Fragment,{children:[ie<z-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>K(z),children:z})})]}),a.jsx("li",{className:`page-item ${q===z?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>K(q+1),disabled:q===z,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("div",{}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-light btn-sm",onClick:A,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:re,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):te.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table-sm table table-bordered align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:te.map((q,z)=>{const K=B+z;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:K+1}),a.jsx("td",{children:q.indentId}),a.jsx("td",{children:new Date(q.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),q.location]}),a.jsx("td",{children:q.salesGroup}),a.jsx("td",{children:q.categoryName}),a.jsxs("td",{className:"text-center",children:[q.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:q.isDeleted||!1,onChange:ee=>T(q._id,"isDeleted",ee.target.checked)}),a.jsx("label",{className:"form-check-label",children:q.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:q.isBlocked||!1,onChange:ee=>T(q._id,"isBlocked",ee.target.checked)}),a.jsx("label",{className:"form-check-label",children:q.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>U(q),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>C(q._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},q._id)})})]})}),X>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(M,{currentPage:e,totalPages:X,onPageChange:ce})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:re,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:L})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:q=>u(q.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:P})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:O,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:J,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:g.map((q,z)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:q.indentId})}),a.jsx("td",{children:new Date(q.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),q.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:q.buyerGroup})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:q.categoryName})}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[q.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>W(q),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},z))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:L,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:N?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:N?.items.map((q,z)=>a.jsxs("tr",{children:[a.jsx("td",{children:z+1}),a.jsx("td",{children:q.materialId}),a.jsx("td",{children:q.description}),a.jsx("td",{children:q.qty}),a.jsx("td",{children:q.baseUnit}),a.jsx("td",{children:q.orderUnit}),a.jsx("td",{children:q.location}),a.jsx("td",{children:new Date(q.deliveryDate).toLocaleDateString()})]},q._id))})]})})})]})})})]})};function p5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,J]=w.useState(""),[W,re]=w.useState(!1),[U,Q]=w.useState(!1),[B,te]=w.useState(!1),[X,ce]=w.useState(null),[M,q]=w.useState(""),[z,K]=w.useState([]),ee=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),ae=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:ee,financialYear:ne}}).then(he=>{const xe=he.data.filter(me=>!me.isBlocked&&!me.isDeleted);t(xe)}).catch(console.error),Oe.get("/api/sale-quotation-categories",{params:{companyId:ee,financialYear:ne}}).then(he=>n(he.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:ee,financialYear:ne}}).then(he=>{console.log("Locations API response:",he.data),Array.isArray(he.data)?K(he.data):he.data&&Array.isArray(he.data.locations)?K(he.data.locations):K([])}).catch(he=>{console.error("Failed to fetch locations:",he),K([])}),console.log("location",M),Oe.get("/api/customers",{params:{companyId:ee,financialYear:ne}}).then(he=>{const xe=he.data.filter(me=>!me.isBlocked&&!me.isDeleted);i(xe)}).catch(console.error),Oe.get("/api/material").then(he=>l(he.data)).catch(console.error),ie()},[]);const ie=()=>{Oe.get("/api/salesquotations").then(he=>h(he.data)).catch(console.error)},G=he=>{p({label:he.indentId,value:he._id}),d(he.salesGroup||""),E(he.items.map(xe=>({...xe,customerName:b?.name1||"",price:"",unit:""}))),te(!1)},de=he=>{y({label:`${he.name1} ${he.name2}`,value:he._id}),E(xe=>xe.map(me=>({...me,customerName:he.name1}))),Q(!1)},Y=he=>{const xe=[...D];xe[X]={...xe[X],materialId:he.materialId,description:he.description,baseUnit:he.baseUnit,unit:he.unit,price:he.price},E(xe),re(!1)},oe=(he,xe,me)=>{const De=[...D];De[he][xe]=me,E(De)},Se=()=>{E(he=>[...he,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ue,se]=w.useState(!1),[ye,Ne]=w.useState("internal"),[Le,Je]=w.useState(""),lt=he=>{he.preventDefault(),se(!0)},vt=()=>{const he={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:ae,financialYear:ne,validityDate:k,salesGroup:c,location:M,items:D,quotationNumberType:ye,externalQuotationNumber:ye==="external"?Le:null};Oe.post("/api/salesquotations",he).then(()=>{alert("Quotation saved successfully!"),ie(),ht(),se(!1),Ne("internal"),Je("")}).catch(xe=>{console.error(xe),alert("Error saving quotation")})},Re=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Quotation Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>se(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ne("internal"),vt()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ne("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ye==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Le,onChange:he=>{he.target.value.length<=50&&Je(he.target.value)},onKeyPress:he=>{he.key==="Enter"&&Le.trim()&&vt()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[Le.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:vt,disabled:!Le.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Quotation"]})})]})]})]})})})]}),ht=()=>{p(null),g(null),y(null),N(""),S(""),E([])},At=({children:he,onClose:xe})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:xe})]}),a.jsx("div",{className:"modal-body",children:he})]})})}),Tt=()=>{const[he,xe]=w.useState([]),[me,De]=w.useState("materialId"),Ye=Xe=>{const Be=Xe.target.value;A(Be);const He=o.filter(ft=>(me==="materialId"?ft.materialId:ft.description)?.toLowerCase().includes(Be.toLowerCase()));xe(He)},jt=()=>{xe(o),A("")},Qe=()=>{xe([]),A("")};return a.jsxs(At,{onClose:()=>re(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:me,onChange:Xe=>De(Xe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:me==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:T,onChange:Ye})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:jt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Xe.materialId})}),a.jsx("td",{children:Xe.description}),a.jsx("td",{children:Xe.baseUnit}),a.jsx("td",{children:Xe.unit}),a.jsx("td",{children:Xe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Y(Xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":T?`No materials found matching "${T}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},Ht=()=>{const[he,xe]=w.useState("name1"),[me,De]=w.useState([]),Ye=Xe=>{const Be=Xe.target.value;P(Be);const He=s.filter(ft=>(he==="name1"?ft.name1:he==="city"?ft.city:he==="region"?ft.region:`${ft.name1} ${ft.name2}`)?.toLowerCase().includes(Be.toLowerCase()));De(He)},jt=()=>{De(s),P("")},Qe=()=>{De([]),P("")};return a.jsxs(At,{onClose:()=>Q(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:he,onChange:Xe=>xe(Xe.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:L,onChange:Ye})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:jt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),me.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:me.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:me.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[Xe.name1," ",Xe.name2]}),a.jsx("td",{children:Xe.city}),a.jsx("td",{children:Xe.region}),a.jsx("td",{children:Xe.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(Xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":L?`No match found for "${L}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},pe=()=>{const[he,xe]=w.useState([]),[me,De]=w.useState("indentId"),[Ye,jt]=w.useState(""),Qe=He=>{const ft=He.target.value;jt(ft);const Ae=e.filter(Ke=>(me==="indentId"?Ke.indentId:me==="categoryName"?Ke.categoryName:Ke.location)?.toLowerCase().includes(ft.toLowerCase()));xe(Ae)},Xe=()=>{xe(e),jt("")},Be=()=>{xe([]),jt("")};return a.jsxs(At,{onClose:()=>te(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:me,onChange:He=>De(He.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Ye,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((He,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:He.indentId}),a.jsx("td",{children:He.categoryName}),a.jsx("td",{children:He.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>G(He),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Ye?`No match for "${Ye}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>te(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:he=>{const xe=he.target.value;p({label:xe,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>te(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:he=>{const xe=he.target.value;y({label:xe,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:M,onChange:he=>q(he.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(z)&&z.map((he,xe)=>a.jsx("option",{value:he.name||he._id||he,children:he.name||he.locationName||he},xe))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category:"})}),"  ",a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:he=>{const xe=he.target.value,me=r.find(De=>De._id===xe);g(me?{label:me.categoryName,value:me._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(he=>a.jsxs("option",{value:he._id,children:[he.categoryName," (",he.prefix,")"]},he._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:he=>S(he.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:he=>d(he.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})})," ",a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:he=>N(he.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:lt,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((he,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:xe+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:he.materialId,onChange:me=>oe(xe,"materialId",me.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{ce(xe),re(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.description,onChange:me=>oe(xe,"description",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:he.qty,onChange:me=>oe(xe,"qty",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.baseUnit,onChange:me=>oe(xe,"baseUnit",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.orderUnit,onChange:me=>oe(xe,"orderUnit",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.location,onChange:me=>oe(xe,"location",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.customerName,onChange:me=>oe(xe,"customerName",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.unit,onChange:me=>oe(xe,"unit",me.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:he.price,onChange:me=>oe(xe,"price",me.target.value)})})]},xe))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:Se,children:"+ Add Quotation Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})})})})})]}),W&&a.jsx(Tt,{}),U&&a.jsx(Ht,{}),B&&a.jsx(pe,{}),ue&&a.jsx(Re,{})]})]})}function x5e(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),o=10,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/salesquotations",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch quotations",k),alert("Error loading quotations")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Quotation</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Quotation: ${k.quotationNumber}</h2>
          <p><strong>Indent ID:</strong> ${k.indentId}</p>
          <p><strong>Customer Name:</strong> ${k.customerName}</p>
          <p><strong>Validity Date:</strong> ${k.validityDate}</p>
          <p><strong>Note:</strong> ${k.note}</p>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId}</td>
                      <td>${E.description}</td>
                      <td>${E.qty}</td>
                      <td>${E.baseUnit}</td>
                      <td>${E.orderUnit}</td>
                      <td>${E.location}</td>
                      <td>${E.unit}</td>
                      <td>${E.price}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=w.useState(""),[m,p]=w.useState(""),v=e.filter(k=>{const S=k.quotationNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),N=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item",children:"Sales Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6"}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Quotation No, Indent ID or Customer Name",value:r,onChange:k=>{n(k.target.value),i(1)}})]})}),a.jsxs("div",{className:" col-xl-3  d-flex gap-2",children:[a.jsx("label",{children:"From:"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}}),a.jsx("label",{children:"To:"}),a.jsx("input",{type:"date",className:"form-control",value:m,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-flex",children:k.quotationNumber}),a.jsx("td",{className:"text-flex",children:k.indentId}),a.jsx("td",{className:"text-flex",children:k.customerName}),a.jsx("td",{className:"text-flex",children:k.location}),a.jsx("td",{className:"text-flex",children:k.validityDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>d(k),children:[a.jsx("i",{className:"fas fa-print"})," Print"]})})]},S))})]})})]}),C>1&&a.jsx("nav",{className:"ms-auto",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>N(s-1),className:"page-link",disabled:s===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>N(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>N(s+1),className:"page-link",disabled:s===C,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})}function v5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(new Date().toISOString().substring(0,10)),[m,p]=w.useState([]),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState(0),[T,A]=w.useState([]),[L,P]=w.useState([]),[O,J]=w.useState([]),[W,re]=w.useState(""),[U,Q]=w.useState(!1),[B,te]=w.useState(""),[X,ce]=w.useState([]),[M,q]=w.useState(!1),[z,K]=w.useState(""),[ee,ne]=w.useState([]),[ae,ie]=w.useState(""),[G,de]=w.useState(""),[Y,oe]=w.useState(""),[Se,ue]=w.useState(""),[se,ye]=w.useState(0),[Ne,Le]=w.useState(0),[Je,lt]=w.useState(0),[vt,Re]=w.useState([]),[ht,At]=w.useState([]),[Tt,Ht]=w.useState(null),[pe,he]=w.useState(0),[xe,me]=w.useState(0),[De,Ye]=w.useState(0),[jt,Qe]=w.useState(0),[Xe,Be]=w.useState(0),[He,ft]=w.useState([]),[Ae,Ke]=w.useState([]),[Ge,ct]=w.useState(!1),[Mt,Ie]=w.useState(""),[ke,it]=w.useState(null),bt=localStorage.getItem("selectedCompanyId"),Kt=localStorage.getItem("financialYear"),Rt=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:bt,financialYear:Kt}}).then(gt=>t(gt.data)),Oe.get("/api/salesquotations",{params:{companyId:bt,financialYear:Kt}}).then(gt=>{n(gt.data),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Kt}}).then(cr=>{const Gr=cr.data.filter(Rr=>!Rr.isDeleted).map(Rr=>({_id:Rr._id,name:Rr.name,description:Rr.description}));Re(Gr)});const fr=[];gt.data.forEach(cr=>{cr.items.forEach(Gr=>{Gr.salesGroup&&!fr.includes(Gr.salesGroup)&&fr.push(Gr.salesGroup)})}),J(fr)}),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Kt}}).then(gt=>p(gt.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Kt}}).then(gt=>At(gt.data)),Oe.get("/api/material",{params:{companyId:bt,financialYear:Kt}}).then(gt=>Ke(gt.data)),Oe.get("/api/customers",{params:{companyId:bt,financialYear:Kt}}).then(gt=>A(gt.data)),S([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]),console.log("customers",T);const tr=gt=>{console.log("Selected Quotation/Contract/Enquiry:",gt);const fr=cr=>cr?.map(Gr=>({...Gr,quantity:Gr.qty||Gr.quantity||0}))||[];gt.contractNumber?(l(gt.contractNumber),P(gt.customerName||""),y(gt.location||""),S(fr(gt.items)),ie(gt.salesGroup||"")):gt.quotationNumber?(l(gt.quotationNumber),P(gt.customerName||""),y(gt.location||""),S(fr(gt.items)),ie(gt.salesGroup||"")):gt.indentId&&(l(gt.indentId),y(gt.location||""),S(fr(gt.items)),ie(gt.salesGroup||"")),Q(!1)},mr=()=>{Q(!1),te(""),ce([])},jr=(gt,fr,cr)=>{fr.includes(gt)?cr(fr.filter(Gr=>Gr!==gt)):cr([...fr,gt])},fn=gt=>{if(K(gt),gt.trim()){const fr=T.filter(cr=>cr.name1?.toLowerCase().includes(gt.toLowerCase())||cr.cnNo?.toLowerCase().includes(gt.toLowerCase()));ne(fr)}else ne([])},hr=()=>{ne(T)},ge=gt=>{P(gt.name1||gt.customerName),q(!1),K(""),ne([])},Ue=gt=>{l(gt);const fr=r.find(cr=>cr.quotationNumber===gt);if(fr){P(fr.name1||fr.customerName),y(fr.items[0]?.location||"");const cr=fr.items.find(Rr=>Rr.salesGroup);cr&&setSalesGroup(cr.salesGroup);const Gr=fr.items.map(Rr=>({materialId:Rr.materialId,description:Rr.description,quantity:Rr.qty,baseUnit:Rr.baseUnit,unit:Rr.unit,orderUnit:Rr.orderUnit,price:Rr.price,priceUnit:Rr.priceUnit,materialgroup:Rr.materialgroup,deliveryDate:Rr.deliveryDate?String(Rr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));S(Gr),Ee(Gr)}},Pe=()=>{q(!1),K(""),ne([])},Ee=(gt,fr,cr,Gr,Rr)=>{const oa=gt.reduce((Mi,_s)=>Mi+(_s.quantity||0)*(_s.price||0),0);E(oa.toFixed(2));const Ho=fr!==void 0?fr:pe,es=cr!==void 0?cr:xe,Io=Gr!==void 0?Gr:De,vn=Rr!==void 0?Rr:jt,ai=oa*(parseFloat(Ho)||0)/100,Wo=oa*(parseFloat(es)||0)/100,Go=oa*(parseFloat(Io)||0)/100,Oi=parseFloat(vn)||0;ye(ai.toFixed(2)),Le(Wo.toFixed(2)),lt(Go.toFixed(2));const Vn=oa+ai+Wo+Go-Oi;Be(Vn.toFixed(2))},Fe=gt=>{he(gt),Ee(k,gt,xe,De,jt)},Ve=gt=>{me(gt),Ee(k,pe,gt,De,jt)},xt=gt=>{Ye(gt),Ee(k,pe,xe,gt,jt)},wt=gt=>{Qe(gt),Ee(k,pe,xe,De,gt)},at=(gt,fr,cr)=>{const Gr=[...k];Gr[gt][fr]=fr==="quantity"||fr==="price"?parseFloat(cr)||0:cr,S(Gr),Ee(Gr,pe,xe,De,jt)},Nt=()=>{S([...k,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},St=gt=>{const fr=[...k];fr.splice(gt,1),S(fr),Ee(fr)},[Xt,ar]=w.useState(!1),[pr,sr]=w.useState("internal"),[qe,or]=w.useState(""),[lr,$r]=w.useState(""),gn=async gt=>{if(gt.preventDefault(),!s||!o)return alert("Please select both category and quotation");ar(!0)},ta=async(gt=null)=>{const fr=r.find(Gr=>Gr.quotationNumber===o),cr={soNumber:W,quotationId:fr?._id,quotationNumber:o,categoryId:s._id,category:s.categoryName,date:u,customerName:L,contactPerson:G,salesGroup:ae,payTerms:Y,validityDate:Se,deliveryLocation:b,deliveryAddress:C,items:k,selectedConditions:He,companyId:Rt,financialYear:Kt,total:parseFloat(D)||0,taxName:Tt?.taxName||"",cgst:parseFloat(pe)||0,sgst:parseFloat(xe)||0,igst:parseFloat(De)||0,taxDiscount:parseFloat(jt)||0,finalTotal:parseFloat(Xe)||0,soNumberType:gt?"external":"internal",customSONumber:gt};try{const Gr=await Oe.post("/api/sales-orders",cr);console.log("Saved SO:",Gr.data),i(null),l(""),h(new Date().toISOString().substring(0,10)),A(""),y(""),N(""),S([]),E(""),Ht(null),he(""),me(""),Ye(""),Qe(""),Be(""),oe(""),ie(""),de(""),ar(!1),sr("internal"),or(""),$r(""),alert("Sales Order Created Successfully with SO Number: "+Gr.data.soNumber)}catch(Gr){console.error("Error during SO creation:",Gr),alert("Failed to create Sales Order")}},zs=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Generate Sales Order Number"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{ar(!1),sr("internal"),or("")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the SO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{sr("internal"),ta(null)},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>sr("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),pr==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom SO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number (max 50 characters)",value:qe,onChange:gt=>or(gt.target.value),onKeyPress:gt=>{gt.key==="Enter"&&qe.trim()&&ta(qe)},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[qe.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>ta(qe),disabled:!qe.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save SO"]})})]}),pr==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"SO number will be auto-generated based on category: ",a.jsx("strong",{children:s?.categoryName}),a.jsx("br",{}),a.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]}),za=()=>{const gt=Ae.filter(cr=>cr.materialId.toLowerCase().includes(Mt.toLowerCase())||cr.description.toLowerCase().includes(Mt.toLowerCase())),fr=cr=>{const Gr=[...k];Gr[ke]={...Gr[ke],materialId:cr.materialId,description:cr.description,baseUnit:cr.baseUnit,unit:cr.unit,price:cr.price,salesGroup:cr.salesGroup,materialgroup:cr.materialgroup},S(Gr),Ee(Gr),ct(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:Mt,onChange:cr=>Ie(cr.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:gt.map((cr,Gr)=>a.jsxs("tr",{children:[a.jsx("td",{children:cr.materialId}),a.jsx("td",{children:cr.description}),a.jsx("td",{children:cr.baseUnit}),a.jsx("td",{children:cr.unit}),a.jsx("td",{children:cr.price}),a.jsx("td",{children:cr.priceUnit}),a.jsx("td",{children:cr.salesGroup}),a.jsx("td",{children:cr.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>fr(cr),children:"Select"})})]},Gr))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>ct(!1),style:{marginTop:10},children:"Close"})]})})};function fs({show:gt,onClose:fr,onSelect:cr,selectedTab:Gr="enquiry"}){const[Rr,oa]=w.useState(Gr),[Ho,es]=w.useState(""),[Io,vn]=w.useState([]);w.useEffect(()=>{es(""),vn([]),ai()},[Rr]);const ai=async()=>{let Vn="";Rr==="enquiry"?Vn="/api/salerequest/get":Rr==="quotation"?Vn="/api/salesquotations":Rr==="contract"&&(Vn="/api/salescontracts");const Mi=await Oe.get(`${Vn}`,{params:{companyId:bt,financialYear:Kt}});vn(Mi.data)},Wo=async Vn=>{if(es(Vn),!Vn){ai();return}vn(Mi=>Mi.filter(_s=>(_s.quotationNumber||_s.enquiryNumber||_s.contractNumber||"").toLowerCase().includes(Vn.toLowerCase())))},Go=Vn=>Vn.quotationNumber||Vn.indentId||Vn.contractNumber||"",Oi=Vn=>new Date(Vn.date||Vn.validityDate||Vn.createdAt||"").toLocaleDateString();return gt?a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),Rr==="enquiry"?"Search Enquiries":Rr==="quotation"?"Search Quotations":"Search Contracts"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:fr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Rr==="enquiry"?"active":""}`,onClick:()=>oa("enquiry"),children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Rr==="quotation"?"active":""}`,onClick:()=>oa("quotation"),children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Rr==="contract"?"active":""}`,onClick:()=>oa("contract"),children:"Contract"})})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${Rr} number...`,value:Ho,onChange:Vn=>Wo(Vn.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:ai,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Io.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Io.map((Vn,Mi)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Go(Vn)})}),a.jsx("td",{children:Oi(Vn)}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{cr(Vn),fr()},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Mi))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Ho?`No ${Rr}s found matching "${Ho}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:fr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const ks=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Pe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Custmore"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:z,onChange:gt=>fn(gt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:hr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ee.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer Code"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"address1"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ee.map((gt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:gt.cnNo})}),a.jsx("td",{children:gt.name1}),a.jsx("td",{children:gt.email}),a.jsx("td",{children:gt.address1}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ge(gt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:z?`No vendors found matching "${z}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Pe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Sales Order Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Reference No:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference number",value:o,onChange:gt=>{l(gt.target.value),gt.target.value&&Ue(gt.target.value)},required:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Q(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Category:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",onChange:gt=>{const fr=e.find(cr=>cr._id===gt.target.value);i(fr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),e.map(gt=>a.jsx("option",{value:gt._id,children:gt.categoryName},gt._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:W,readOnly:!0})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:gt=>h(gt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:L,onChange:gt=>P(gt.target.value),placeholder:"Enter customer name"}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>q(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:b,onChange:gt=>y(gt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),m.map(gt=>a.jsx("option",{value:gt.name||gt.locationName||gt._id,children:gt.name||gt.locationName||gt._id},gt._id||gt.id||gt.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:ae,onChange:gt=>ie(gt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:G,onChange:gt=>de(gt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Payment Terms:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Y,onChange:gt=>oe(gt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Se,onChange:gt=>ue(gt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:He.length===0?"Select...":`${He.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:vt.map(gt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:He.includes(gt._id),onChange:()=>jr(gt._id,He,ft)}),a.jsx("label",{className:"form-check-label ms-1",children:gt.name})]})},gt._id))})]})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",style:{width:"100%",tableLayout:"fixed"},children:a.jsxs("table",{className:" table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.map((gt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:fr+1}),a.jsx("td",{children:a.jsx("input",{value:gt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{it(fr),ct(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:gt.description,onChange:cr=>at(fr,"description",cr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.quantity,onChange:cr=>at(fr,"quantity",cr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:gt.baseUnit,onChange:cr=>at(fr,"baseUnit",cr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:gt.orderUnit,onChange:cr=>at(fr,"orderUnit",cr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:gt.materialgroup,onChange:cr=>at(fr,"materialgroup",cr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:gt.price,onChange:cr=>at(fr,"price",cr.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:gt.priceUnit,onChange:cr=>at(fr,"priceUnit",cr.target.value),required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(gt.quantity*gt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:gt.deliveryDate,onChange:cr=>at(fr,"deliveryDate",cr.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:gt.note,onChange:cr=>at(fr,"note",cr.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>St(fr),children:a.jsx("i",{className:"ti ti-trash"})})})]},fr))})]})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:Nt,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:gn,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:C,onChange:gt=>N(gt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-6 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",onChange:gt=>{const fr=ht.find(cr=>cr.taxName===gt.target.value);if(Ht(fr),fr){const cr=fr.cgst||0,Gr=fr.sgst||0,Rr=fr.igst||0;he(cr),me(Gr),Ye(Rr),Ee(k,cr,Gr,Rr,jt)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),ht.map(gt=>a.jsx("option",{value:gt.taxName,children:gt.taxName},gt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:pe,onChange:gt=>Fe(gt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe,onChange:gt=>Ve(gt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:De,onChange:gt=>xt(gt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Tax Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:jt,onChange:gt=>wt(gt.target.value),step:"0.01"})})]})]}),a.jsx("div",{className:"border-top pt-3 ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["",D]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["",se]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["",Ne]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["",Je]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ",jt]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["",Xe]})]})]})})})]})]})})]}),a.jsx("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:"Submit SO"})]})})})})})]}),Ge&&a.jsx(za,{}),U&&a.jsx(fs,{show:U,onClose:mr,onSelect:tr}),M&&a.jsx(ks,{}),Xt&&a.jsx(zs,{})]})})]})})}function g5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=w.useState(""),[u,h]=w.useState(""),[m,p]=w.useState("");w.useEffect(()=>{const T=e.filter(A=>{const L=A.soNumber?.toLowerCase().includes(c.toLowerCase())||A.poNumber?.toLowerCase().includes(c.toLowerCase())||A.vendor?.toLowerCase().includes(c.toLowerCase())||A.customer?.toLowerCase().includes(c.toLowerCase())||A.category?.toLowerCase().includes(c.toLowerCase())||A.quotationNumber?.toLowerCase().includes(c.toLowerCase())||A.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||A.deliveryAddress?.toLowerCase().includes(c.toLowerCase()),P=new Date(A.createdAt),O=u?new Date(u):null,J=m?new Date(m):null,W=(!O||P>=O)&&(!J||P<=J);return L&&W});n(T)},[c,u,m,e]);const[v,g]=w.useState(1),[b]=w.useState(10);w.useEffect(()=>{y()},[]);const y=()=>{i(!0),Oe.get("/api/sales-orders",{params:{companyId:o,financialYear:l}}).then(T=>{const A=T.data.sort((L,P)=>new Date(P.createdAt)-new Date(L.createdAt));t(A),n(A),i(!1)}).catch(T=>{console.error("Error fetching POs:",T),alert("Failed to fetch POs"),i(!1)})},C=v*b,N=C-b,k=r.slice(N,C),S=Math.ceil(r.length/b),D=T=>g(T),E=T=>{const A=T.items.map((O,J)=>`
      <tr>
        <td>${J+1}</td>
        <td>${O.materialId}</td>
        <td>${O.description}</td>
        <td>${O.quantity}</td>
        <td>${O.baseUnit}</td>
        <td>${O.unit}</td>
        <td>${O.orderUnit}</td>
        <td>${O.price}</td>
        <td>${O.salesGroup}</td>
        <td>${O.materialgroup}</td>
        <td>${O.deliveryDate}</td>
      </tr>
    `).join(""),L=`
      <html>
      <head>
        <title>Sales Order - ${T.soNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; }
          th { background-color: #f0f0f0; }
        </style>
      </head>
      <body>
        <h2>sales Order Details</h2>
        <p><strong>PO Number:</strong> ${T.poNumber}</p>
        <p><strong>Date:</strong> ${T.date}</p>
        <p><strong>Vendor:</strong> ${T.vendor}</p>
        <p><strong>Category:</strong> ${T.category}</p>
        <p><strong>Quotation Number:</strong> ${T.quotationNumber}</p>
        <p><strong>Delivery Location:</strong> ${T.deliveryLocation}</p>
        <p><strong>Delivery Address:</strong> ${T.deliveryAddress}</p>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Base Unit</th>
              <th>Unit</th>
              <th>Order Unit</th>
              <th>Price</th>
              <th>Buyer Group</th>
              <th>Material Group</th>
              <th>Delivery Date</th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>

        <h3>Tax Summary</h3>
        <p><strong>Total:</strong> ${T.total}</p>
        <p><strong>Tax Name:</strong> ${T.taxName}</p>
        <p><strong>CGST:</strong> ${T.cgst}%</p>
        <p><strong>SGST:</strong> ${T.sgst}%</p>
        <p><strong>IGST:</strong> ${T.igst}%</p>
        <p><strong>Tax Discount:</strong> ${T.taxDiscount}</p>
        <p><strong>Final Total:</strong> ${T.finalTotal}</p>
      </body>
      </html>
    `,P=window.open("","","width=800,height=600");P.document.write(L),P.document.close(),P.print()};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsx("h2",{children:"Sales Order Display"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search PO Number, Vendor, Category, etc.",value:c,onChange:T=>{d(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:u,onChange:T=>{h(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:m,onChange:T=>{p(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-2 mb-1",children:a.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(1)},children:"Reset Filters"})})]})]}),s?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Delivery Address"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.length>0?k.map(T=>a.jsxs("tr",{children:[a.jsx("td",{children:T.soNumber}),a.jsx("td",{children:T.date}),a.jsx("td",{children:T.customerName}),a.jsx("td",{children:T.category}),a.jsx("td",{children:T.quotationNumber}),a.jsx("td",{children:T.deliveryLocation}),a.jsx("td",{children:T.deliveryAddress}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>E(T),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})]},T._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No sales orders found"})]})})})]})})})}),S>1&&a.jsx("nav",{"aria-label":"sales Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v-1),disabled:v===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const A=[],L=[];A.push(1);for(let J=Math.max(2,v-2);J<=Math.min(S-1,v+2);J++)A.push(J);S>1&&A.push(S);const P=[...new Set(A)].sort((J,W)=>J-W);let O;for(let J of P)O&&(J-O===2?L.push(O+1):J-O!==1&&L.push("...")),L.push(J),O=J;return L.map((J,W)=>J==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${W}`):a.jsx("li",{className:`page-item ${v===J?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(J),children:J})},J))})(),a.jsx("li",{className:`page-item ${v===S?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v+1),disabled:v===S,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}const b5e=()=>{const[e,t]=w.useState({name:"",address:"",pincode:"",country:"",phone:"",email:""}),r=l=>{t(c=>({...c,[l.target.name]:l.target.value}))},[n,s]=w.useState(null),i=l=>{s(l.target.files[0])},o=async l=>{l.preventDefault();const c=new FormData;Object.entries(e).forEach(([d,u])=>{c.append(d,u)}),n&&c.append("logo",n);try{await Oe.post("/api/companies/create",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Company added successfully!"),t({name:"",address:"",pincode:"",country:"",phone:"",email:""}),s(null),document.getElementById("logoInput").value=""}catch(d){alert("Error adding company. Please try again."),console.error("Error:",d)}};return a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8 col-lg-6",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-primary text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Create Company"]})}),a.jsx("div",{className:"card-body",children:a.jsx("form",{onSubmit:o,children:a.jsxs("div",{className:"row",children:[[{label:"Company Name",name:"name",icon:"fas fa-building"},{label:"Address",name:"address",icon:"fas fa-map-marker-alt"},{label:"Pincode",name:"pincode",icon:"fas fa-map-pin"},{label:"Country",name:"country",icon:"fas fa-globe"},{label:"Phone",name:"phone",icon:"fas fa-phone"},{label:"Email",name:"email",type:"email",icon:"fas fa-envelope"}].map(({label:l,name:c,type:d="text",icon:u})=>a.jsxs("div",{className:"col-xl-4 mb-3",children:[a.jsxs("label",{htmlFor:c,className:"form-label",children:[a.jsx("i",{className:`${u} me-2`}),l,c==="name"&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:d,id:c,name:c,value:e[c],onChange:r,placeholder:`Enter ${l.toLowerCase()}`,className:"form-control",required:c==="name"})]},c)),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"logoInput",className:"form-label",children:[a.jsx("i",{className:"fas fa-image me-2"}),"Company Logo"]}),a.jsx("input",{type:"file",id:"logoInput",accept:"image/*",onChange:i,className:"form-control form-control-sm"}),a.jsx("div",{className:"form-text",children:"Upload your company logo (PNG, JPG, or GIF format)"})]}),a.jsx("div",{className:"d-grid",children:a.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Company"]})})]})})})]})})})})};function y5e(){const[e,t]=w.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState({}),[v,g]=w.useState([]),[b,y]=w.useState(!1),[C,N]=w.useState(!1),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(!1),L=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","West Bengal","Odisha","Bihar","Jharkhand","Madhya Pradesh","Chhattisgarh","Uttar Pradesh"],P=["India","USA","Germany","France","UK"];w.useEffect(()=>{O(),J()},[]);const O=async()=>{try{const Re=await Oe.get("/api/customer-categories",{params:{companyId:r,financialYear:n}});i(Re.data)}catch(Re){console.error("Error fetching categories:",Re)}},J=async()=>{try{const ht=(await Oe.get("/api/customers",{params:{companyId:r,financialYear:n}})).data.sort((At,Tt)=>new Date(Tt.createdAt)-new Date(At.createdAt));l(ht)}catch(Re){console.error("Error fetching customers:",Re)}},W=Re=>{const{name:ht,value:At}=Re.target;ht==="email"&&At&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(At)?Re.target.setCustomValidity(""):Re.target.setCustomValidity("Please enter a valid email address")),t(Tt=>({...Tt,[ht]:At})),m[ht]&&p(Tt=>({...Tt,[ht]:""}))},re=()=>{const Re={};return e.categoryId||(Re.categoryId="Category is required."),e.name1.trim()||(Re.name1="Name 1 is required."),e.search.trim()||(Re.search="Search term is required."),e.address1.trim()||(Re.address1="Address 1 is required."),e.region||(Re.region="Region is required."),e.country||(Re.country="Country is required."),e.contactNo.trim()?/^[0-9]{10}$/.test(e.contactNo.trim())||(Re.contactNo="Contact No must be exactly 10 digits."):Re.contactNo="Contact No is required.",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())&&(Re.email="Please enter a valid email address."),e.pincode.trim()&&!/^[0-9]{6}$/.test(e.pincode.trim())&&(Re.pincode="Pincode must be exactly 6 digits."),k==="external"&&!D.trim()&&(Re.externalCustomerId="External Customer ID is required."),k==="external"&&D.length>50&&(Re.externalCustomerId="External Customer ID cannot exceed 50 characters."),p(Re),Object.keys(Re).length===0},U=async Re=>{if(Re.preventDefault(),!re()){const ht=Object.values(m).filter(At=>At);alert(ht.join(`
`));return}N(!0),A(!1)},Q=async(Re=k)=>{try{const ht={...e,customerType:Re,companyId:r,financialYear:n,externalCustomerId:Re==="external"?D:null};if(u)await Oe.put(`/api/customers/${u}`,ht),alert("Customer updated successfully!");else{const At=await Oe.post("/api/customers",ht);d(At.data.cnNo),alert(`Customer saved successfully! CNNo: ${At.data.cnNo}`)}J(),B(),A(!1),N(!1)}catch(ht){console.error("Error saving customer:",ht),alert("Error saving customer. Please try again.")}},B=()=>{t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),h(null),p({}),d(""),S(""),E("")},te=Re=>{t({categoryId:Re.categoryId?._id||"",name1:Re.name1||"",name2:Re.name2||"",search:Re.search||"",address1:Re.address1||"",address2:Re.address2||"",city:Re.city||"",pincode:Re.pincode||"",region:Re.region||"",country:Re.country||"",contactNo:Re.contactNo||"",name:Re.name||"",email:Re.email||""}),h(Re._id),d(Re.cnNo),S(Re.customerType||"internal"),E(Re.externalCustomerId||""),p({}),A(!0)},X=()=>{N(!1),S(""),E("")},ce=Re=>{S(Re),Re==="internal"&&Q("internal")},M=()=>{if(!D.trim()){alert("Please enter External Customer ID");return}if(D.length>50){alert("External Customer ID cannot exceed 50 characters");return}Q("external")},[q,z]=w.useState(""),[K,ee]=w.useState(1),ne=10,ae=o.filter(Re=>{const ht=q.toLowerCase();return Re.cnNo?.toLowerCase().includes(ht)||Re.name1?.toLowerCase().includes(ht)||Re.categoryId?.categoryName?.toLowerCase().includes(ht)||Re.search?.toLowerCase().includes(ht)||Re.address1?.toLowerCase().includes(ht)||Re.city?.toLowerCase().includes(ht)||Re.pincode?.toLowerCase().includes(ht)||Re.region?.toLowerCase().includes(ht)||Re.country?.toLowerCase().includes(ht)||Re.contactNo?.includes(ht)||Re.email?.toLowerCase().includes(ht)}).sort((Re,ht)=>new Date(ht.createdAt)-new Date(Re.createdAt)),ie=K*ne,G=ie-ne,de=ae.slice(G,ie),Y=Math.ceil(ae.length/ne),oe=()=>{A(!1),B()},[Se,ue]=w.useState(!1),se=()=>ue(!1),ye=()=>{const Re=ae.map(me=>({"Customer No":me.cnNo||"","Name 1":me.name1||"","Name 2":me.name2||"",Category:me.categoryId?.categoryName||"","Search Term":me.search||"","Address 1":me.address1||"","Address 2":me.address2||"","Extra Addresses":me.extraAddresses?me.extraAddresses.join(", "):"",City:me.city||"",Pincode:me.pincode||"",Region:me.region||"",Country:me.country||"","Contact No":me.contactNo||"",Email:me.email||"","Contact Person":me.name||"","Customer Type":me.customerType||"internal","External Customer ID":me.externalCustomerId||"","Is Deleted":me.isDeleted?"Yes":"No","Is Blocked":me.isBlocked?"Yes":"No","Created Date":me.createdAt?new Date(me.createdAt).toLocaleDateString():"","Updated Date":me.updatedAt?new Date(me.updatedAt).toLocaleDateString():""})),ht=sa.book_new(),At=sa.json_to_sheet(Re),Tt=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];At["!cols"]=Tt,sa.book_append_sheet(ht,At,"Customers");const Ht=new Date,pe=Ht.toLocaleDateString("en-GB").replace(/\//g,"-"),he=Ht.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),xe=`Customer-Master-${pe}-${he}.xlsx`;Zu(ht,xe),se(),alert(`Excel file exported successfully as: ${xe}`)},Ne=()=>{t(Re=>({...Re,extraAddresses:[...Re.extraAddresses,""]}))},Le=(Re,ht)=>{const At=[...e.extraAddresses];At[Re]=ht,t(Tt=>({...Tt,extraAddresses:At}))},Je=Re=>{const ht=[...e.extraAddresses];ht.splice(Re,1),t(At=>({...At,extraAddresses:ht}))},lt=async(Re,ht,At)=>{try{const Tt={[ht]:At};await Oe.put(`/api/customers/status/${Re}`,Tt),l(o.map(Ht=>Ht._id===Re?{...Ht,[ht]:At}:Ht)),alert("Status updated successfully!")}catch(Tt){console.error("Error updating status:",Tt),alert("Failed to update status!")}},vt=Re=>{console.log("Import successful:",Re),J()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search customers...",value:q,onChange:Re=>z(Re.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ye,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("a",{onClick:()=>A(!0),className:"btn btn-primary btn-sm",children:"New Customer"})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"CNNo"}),a.jsx("th",{children:"Name 1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address 1"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Pincode"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact No"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:de.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"13",children:"No customers found"})}):de.map(Re=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Re.cnNo}),a.jsx("td",{className:"text-wrap",children:Re.name1}),a.jsx("td",{className:"text-wrap",children:Re.categoryId?.categoryName||"N/A"}),a.jsx("td",{className:"text-wrap",children:Re.search}),a.jsx("td",{className:"text-wrap",children:Re.address1}),a.jsx("td",{className:"text-wrap",children:Re.city}),a.jsx("td",{className:"text-wrap",children:Re.pincode}),a.jsx("td",{className:"text-wrap",children:Re.region}),a.jsx("td",{className:"text-wrap",children:Re.contactNo}),a.jsx("td",{className:"text-wrap",children:Re.email}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Re.isDeleted||!1,onChange:ht=>lt(Re._id,"isDeleted",ht.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Re.isBlocked||!1,onChange:ht=>lt(Re._id,"isBlocked",ht.target.checked)})})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>te(Re),className:"btn btn-primary btn-sm",children:"Edit"})})]},Re._id))})]})})})]}),a.jsx("div",{className:"d-flex justify-content-end align-items-center mt-3",children:Y>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item ${K===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(Re=>Math.max(Re-1,1)),disabled:K===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const ht=[],At=[];ht.push(1);for(let pe=Math.max(2,K-2);pe<=Math.min(Y-1,K+2);pe++)ht.push(pe);Y>1&&ht.push(Y);const Tt=[...new Set(ht)].sort((pe,he)=>pe-he);let Ht;for(let pe of Tt)Ht&&(pe-Ht===2?At.push(Ht+1):pe-Ht!==1&&At.push("...")),At.push(pe),Ht=pe;return At.map((pe,he)=>pe==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${he}`):a.jsx("li",{className:`page-item ${K===pe?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(pe),children:pe})},pe))})(),a.jsx("li",{className:`page-item ${K===Y?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(Re=>Math.min(Re+1,Y)),disabled:K===Y,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),C&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Customer Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:X,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the ID:"}),k==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Customer ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:Re=>E(Re.target.value),maxLength:50,required:!0,placeholder:"Enter External Customer ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[D.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:M,disabled:!D.trim(),children:"Continue"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>S(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>ce("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ce("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]})]})]})})})]}),T&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[u?"Edit Customer":"Add New Customer",k&&a.jsx("span",{className:"badge bg-info ms-2",children:k==="internal"?"Internal":"External"})]}),a.jsx("button",{type:"button",className:"btn-close",onClick:oe,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:U,children:[k==="external"&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("strong",{children:"External Customer ID:"})," ",D]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:e.categoryId,onChange:W,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(Re=>a.jsx("option",{value:Re._id,children:Re.categoryName},Re._id))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Name1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",placeholder:"Enter Name 1",value:e.name1,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2 (Optional)",value:e.name2,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["SearchTerm ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",value:e.search,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Address1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:W,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Ne,children:"+"})})]}),e?.extraAddresses?.map((Re,ht)=>a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:`Address ${ht+3}`})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",placeholder:`Enter Address ${ht+3}`,value:Re,onChange:At=>Le(ht,At.target.value),className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>Je(ht),children:a.jsx("i",{className:"ti ti-x"})})})]},ht)),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",value:e.city,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit Pincode",value:e.pincode,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Region ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",value:e.region,onChange:W,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Region"}),L.map(Re=>a.jsx("option",{value:Re,children:Re},Re))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Country ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",value:e.country,onChange:W,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Country"}),P.map(Re=>a.jsx("option",{value:Re,children:Re},Re))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Contact No ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter 10-digit Contact No",value:e.contactNo,onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email (Optional)",value:e.email,pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",onChange:W,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name",placeholder:"Enter name (Optional)",value:e.name,onChange:W,className:"form-control"})})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("button",{type:"submit",className:"btn btn-success",children:u?"Update Customer":"Save Customer"}),u&&a.jsx("button",{type:"button",onClick:B,className:"btn btn-danger ms-2",children:"Cancel"})]})]})})]})})})]}),a.jsx(gf,{show:b,onClose:()=>y(!1),onImport:vt,masterDataType:"customer",apiEndpoint:"/api/customers/import"})]})}function j5e(){const e="MMNR-",[t,r]=w.useState([]),[n,s]=w.useState(!1),[i,o]=w.useState({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear"),[d,u]=w.useState(1),[h,m]=w.useState([]),[p,v]=w.useState([]),[g,b]=w.useState([]),[y,C]=w.useState([]),[N,k]=w.useState([]),[S,D]=w.useState(!1),[E,T]=w.useState([]),[A,L]=w.useState("materialId"),[P,O]=w.useState(null),[J,W]=w.useState(!1),[re,U]=w.useState(1),Q=10,[B,te]=w.useState(""),[X,ce]=w.useState(!1),[M,q]=w.useState([]),[z,K]=w.useState("customerId"),[ee,ne]=w.useState(""),ae=Be=>{s(!1),Se()},ie=()=>{const Be=Ne.map(Ie=>({"Customer Name":Ie.customerId?.name1||"","Customer ID":Ie.customerId?.cnNo||"",Category:Ie.categoryId?.categoryName||"","Material ID":Ie.materialId?.materialId||"","Material Description":Ie.materialId?.description||"",Unit:Ie.unit||"","BUM (Base Unit Measure)":Ie.bum||"","Order Unit":Ie.orderUnit||"",Price:Ie.price||"","Sales Group":Ie.salesGroup||"","Tax Name":Ie.taxId?.taxName||"","CGST %":Ie.taxId?.cgst||"","SGST %":Ie.taxId?.sgst||"","IGST %":Ie.taxId?.igst||"","Terms & Conditions":Ie.tandc||"","Company ID":Ie.companyId||"","Financial Year":Ie.financialYear||"","Created Date":Ie.createdAt?new Date(Ie.createdAt).toLocaleDateString():"","Updated Date":Ie.updatedAt?new Date(Ie.updatedAt).toLocaleDateString():""})),He=sa.book_new(),ft=sa.json_to_sheet(Be),Ae=[{wch:25},{wch:15},{wch:20},{wch:20},{wch:35},{wch:10},{wch:15},{wch:15},{wch:12},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];ft["!cols"]=Ae,sa.book_append_sheet(He,ft,"Customer Price List");const Ke=new Date,Ge=Ke.toLocaleDateString("en-GB").replace(/\//g,"-"),ct=Ke.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Mt=`Customer-Price-List-${Ge}-${ct}.xlsx`;Zu(He,Mt),alert(`Excel file exported successfully as: ${Mt}`)};w.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:l,financialYear:c}}).then(Be=>r(Be.data))},[]),w.useEffect(()=>{G(),de(),Y(),oe(),Se()},[]);const G=async()=>{try{const Be=await Oe.get("/api/customer-categories",{params:{companyId:l,financialYear:c}});m(Be.data)}catch(Be){console.error("Error fetching categories:",Be),alert("Error loading categories")}},de=async()=>{try{const Be=await Oe.get("/api/customers",{params:{companyId:l,financialYear:c}});v(Be.data),console.log("customers",Be.data)}catch(Be){console.error("Error fetching customers:",Be),alert("Error loading customers")}},Y=async()=>{try{const Be=await Oe.get("/api/material",{params:{companyId:l,financialYear:c}});b(Be.data)}catch(Be){console.error("Error fetching materials:",Be),alert("Error loading materials")}},oe=async()=>{try{const Be=await Oe.get("/api/tax",{params:{companyId:l,financialYear:c}});C(Be.data)}catch(Be){console.error("Error fetching taxes:",Be),alert("Error loading taxes")}},Se=async()=>{try{const Be=await Oe.get("/api/customer-price-lists",{params:{companyId:l,financialYear:c}});k(Be.data)}catch(Be){console.error("Error fetching price lists:",Be),alert("Error loading price lists")}},ue=async Be=>{const{name:He,value:ft}=Be.target;let Ae={...i,[He]:ft};if(He==="materialId")try{const Ge=(await Oe.get(`/api/material/${ft}`)).data.conversionValue||1;u(Ge)}catch(Ke){console.error("Error fetching material conversion:",Ke),u(1)}o(Ae)},se=async Be=>{Be.preventDefault();const He={...i,companyId:l,financialYear:c};try{i._id?(await Oe.put(`/api/customer-price-lists/${i._id}`,He),alert("Updated successfully")):(await Oe.post("/api/customer-price-lists",He),alert("Saved successfully")),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),u(1),Re(),Se()}catch(ft){alert("Error saving data"),console.error("Submit error:",ft)}},ye=Be=>{const He=Ie=>Ie?typeof Ie=="object"&&Ie._id?Ie._id:typeof Ie=="string"?Ie:"":"",ft=He(Be.categoryId),Ae=He(Be.customerId),Ke=He(Be.materialId),Ge=He(Be.taxId),ct=He(Be.tandc),Mt={_id:Be._id,categoryId:ft,customerId:Ae,materialId:Ke,unit:Be.unit||"",bum:Be.bum||"",orderUnit:Be.orderUnit||"",salesGroup:Be.salesGroup||"",taxId:Ge,tandc:ct,price:Be.price||""};o(Mt),W(!0),Ke&&Oe.get(`/api/material/${Ke}`).then(Ie=>{const ke=Ie.data.conversionValue||1;u(ke),console.log("Conversion value set to:",ke)}).catch(Ie=>{console.error("Error fetching material conversion:",Ie),u(1)})},Ne=N.filter(Be=>{const He=Be.customerId?.name1?.toLowerCase()||"",ft=Be.categoryId?.categoryName?.toLowerCase()||"",Ae=Be.materialId?.description?.toLowerCase()||"";return He.includes(B.toLowerCase())||ft.includes(B.toLowerCase())||Ae.includes(B.toLowerCase())}),Le=Ne.slice((re-1)*Q,re*Q),Je=Math.ceil(Ne.length/Q),lt=Be=>{Be>=1&&Be<=Je&&U(Be)},vt=()=>W(!0),Re=()=>{W(!1),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",orderUnit:"",price:"",salesGroup:"",taxId:"",tandc:""})},ht=()=>{O(null),D(!0),T([])},At=()=>{D(!1),O(null),T([])},Tt=Be=>{console.log("Selected material:",Be),ue({target:{name:"materialId",value:Be._id}}),At()},Ht=()=>{const Be=B.trim();if(!Be){T([]);return}if(console.log("Searching with query:",Be,"Type:",A),console.log("Available materials:",g),A==="materialId"){let He=Be;/^\d+$/.test(Be)&&(He=e+Be);const ft=g.filter(Ae=>(Ae.materialId||"").toLowerCase().includes(He.toLowerCase()));console.log("Filtered results for materialId:",ft),T(ft)}else{const He=g.filter(ft=>(ft.description||"").toLowerCase().includes(Be.toLowerCase()));console.log("Filtered results for description:",He),T(He)}};w.useEffect(()=>{const Be=setTimeout(()=>{B.trim()?Ht():T([])},300);return()=>clearTimeout(Be)},[B,A]);const pe=()=>{T(g),te("")},he=()=>{T([]),te("")},xe=()=>{ce(!0),ne(""),q([])},me=()=>{ce(!1),ne(""),q([])},De=Be=>{const He=Be.target.value;ne(He)},Ye=()=>{if(!ee.trim()){q([]);return}if(z==="customerId"){const Be=p.filter(He=>(He.customerId||"").toLowerCase().includes(ee.toLowerCase()));q(Be)}else{const Be=p.filter(He=>(He.name1||"").toLowerCase().includes(ee.toLowerCase()));q(Be)}},jt=()=>{q(p),ne("")},Qe=()=>{q([]),ne("")},Xe=Be=>{ue({target:{name:"customerId",value:Be._id}}),me()};return w.useEffect(()=>{const Be=setTimeout(()=>{ee.trim()?Ye():q([])},300);return()=>clearTimeout(Be)},[ee,z]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:B,onChange:Be=>te(Be.target.value)})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsx("div",{children:a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>s(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]})}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ie,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("div",{children:a.jsxs("a",{onClick:vt,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Customer Price List"]})})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Le.map(Be=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("div",{children:a.jsx("h6",{className:"fs-14 fw-medium mb-0",children:a.jsx("a",{href:"#",children:Be.customerId?.name1})})})})}),a.jsx("td",{children:Be.categoryId?.categoryName}),a.jsx("td",{children:Be.materialId?.description}),a.jsx("td",{className:"text-dark",children:Be.unit}),a.jsx("td",{className:"text-dark",children:Be.bum}),a.jsx("td",{className:"text-dark",children:Be.orderUnit}),a.jsxs("td",{className:"text-dark",children:["Rs",Be.price]})," ",a.jsx("td",{className:"text-dark",children:Be.salesGroup}),a.jsx("td",{className:"text-dark",children:Be.taxId?.taxName}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{ye(Be)},children:"Edit"})})]},Be._id))})]})})]}),Je>1&&a.jsx("nav",{"aria-label":"Page navigation",className:"",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${re===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Be=>{Be.preventDefault(),re>1&&lt(re-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Be=[];if(Je<=5)for(let ft=1;ft<=Je;ft++)Be.push(a.jsx("li",{className:`page-item ${re===ft?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ae=>{Ae.preventDefault(),lt(ft)},children:ft})},ft));else{Be.push(a.jsx("li",{className:`page-item ${re===1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ke=>{Ke.preventDefault(),lt(1)},children:"1"})},1)),re>3&&Be.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis1"));const ft=Math.max(2,re-1),Ae=Math.min(Je-1,re+1);for(let Ke=ft;Ke<=Ae;Ke++)Ke!==1&&Ke!==Je&&Be.push(a.jsx("li",{className:`page-item ${re===Ke?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ge=>{Ge.preventDefault(),lt(Ke)},children:Ke})},Ke));re<Je-2&&Be.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis2")),Je>1&&Be.push(a.jsx("li",{className:`page-item ${re===Je?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ke=>{Ke.preventDefault(),lt(Je)},children:Je})},Je))}return Be})(),a.jsx("li",{className:`page-item ${re===Je?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Be=>{Be.preventDefault(),re<Je&&lt(re+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),J&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:"Customer Price"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Re,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:se,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),h.map(Be=>a.jsx("option",{value:Be._id,children:Be.categoryName},Be._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"customerId",className:"form-select me-2",value:i.customerId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),p.map(Be=>a.jsx("option",{value:Be._id,children:Be.name1},Be._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:xe,title:"Search Customer",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:i.materialId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),g.map(Be=>a.jsx("option",{value:Be._id,children:Be.description},Be._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ht,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:i.unit,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),t.map(Be=>a.jsx("option",{value:Be.name,children:Be.name},Be.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"BUM (Base Unit):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter BUM",value:i.bum,onChange:Be=>{Be.target.value=Be.target.value.replace(/[^0-9.]/g,""),ue(Be)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Enter Order Unit",value:i.orderUnit,onChange:Be=>{Be.target.value=Be.target.value.replace(/[^0-9.]/g,""),ue(Be)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter price",value:i.price,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"salesGroup",className:"form-control",placeholder:"Enter Sales Group",value:i.salesGroup,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"T&C:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"tandc",className:"form-control",placeholder:"Enter T&C",value:i.tandc,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:i.taxId,onChange:ue,children:[a.jsx("option",{value:"",children:"Select"}),y.map(Be=>a.jsxs("option",{value:Be._id,children:[Be.taxName," (CGST: ",Be.cgst,"%, SGST: ",Be.sgst,"%, IGST: ",Be.igst,"%)"]},Be._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Re,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:i._id?"Update":"Save"})]})]})})]})})})]}),S&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:At})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Be=>L(Be.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:A==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:B,onChange:Be=>te(Be.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:pe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),E.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:he,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:E.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.map((Be,He)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Be.materialId}),a.jsx("td",{className:"text-wrap",children:Be.description}),a.jsx("td",{className:"text-wrap",children:Be.baseUnit}),a.jsx("td",{className:"text-wrap",children:Be.location}),a.jsx("td",{className:"text-wrap",children:Be.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Tt(Be),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},He))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g.length===0?"No materials loaded from API":B?`No materials found matching "${B}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:At,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),X&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customers"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:me})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:z,onChange:Be=>K(Be.target.value),children:[a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"name",children:"Customer Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:z==="customerId"?"Enter Customer ID...":"Search by Customer Name...",value:ee,onChange:De})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:jt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),M.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:M.map((Be,He)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Be.cnNo}),a.jsx("td",{className:"text-wrap",children:Be.name1}),a.jsx("td",{className:"text-wrap",children:Be.city}),a.jsx("td",{className:"text-wrap",children:Be.email}),a.jsx("td",{className:"text-wrap",children:Be.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Xe(Be),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},He))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:p.length===0?"No customers loaded from API":ee?`No customers found matching "${ee}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:me,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(gf,{show:n,onClose:()=>s(!1),onImportSuccess:ae,masterDataType:"customerPriceList"})]})}const xb={code:"",name:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactNumber:""},N5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(xb),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),b=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),A()},y=e.filter(U=>{if(!v)return!0;const Q=v.toLowerCase();return U.code?.toLowerCase().includes(Q)||U.name?.toLowerCase().includes(Q)||U.address?.toLowerCase().includes(Q)||U.city?.toLowerCase().includes(Q)||U.state?.toLowerCase().includes(Q)||U.country?.toLowerCase().includes(Q)||U.postalCode?.toLowerCase().includes(Q)||U.contactPerson?.toLowerCase().includes(Q)||U.contactNumber?.toLowerCase().includes(Q)}),C=Math.ceil(y.length/m),N=(u-1)*m,k=N+m,S=y.slice(N,k),D=U=>{g(U.target.value),h(1)},E=U=>{h(U)},T=()=>{const Q=(v?y:e).map((ne,ae)=>({"S.No":ae+1,"Location Name":ne.name||"",Address:ne.address||"",City:ne.city||"",State:ne.state||"",Country:ne.country||"","Postal Code":ne.postalCode||"","Contact Person":ne.contactPerson||"","Contact Number":ne.contactNumber||"","Company ID":ne.companyId||"","Financial Year":ne.financialYear||"","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=sa.book_new(),te=sa.json_to_sheet(Q),X=[{wch:8},{wch:25},{wch:40},{wch:20},{wch:20},{wch:15},{wch:12},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];te["!cols"]=X,sa.book_append_sheet(B,te,"Location Master");const ce=new Date,M=ce.toLocaleDateString("en-GB").replace(/\//g,"-"),q=ce.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),K=`Location-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${q}.xlsx`;Zu(B,K);const ee=v?y.length:e.length;alert(`Excel file exported successfully: ${ee} records exported as ${K}`)},A=async()=>{try{const U=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear"),B=await Oe.get("/api/locations",{params:{companyId:U,financialYear:Q}});t(B.data),h(1)}catch(U){console.error("Error fetching locations:",U),alert("Error loading locations")}};w.useEffect(()=>{A()},[]);const L=U=>{n({...r,[U.target.name]:U.target.value})},P=async U=>{U.preventDefault();try{const Q=localStorage.getItem("selectedCompanyId"),B=localStorage.getItem("financialYear"),te={...r,companyId:Q,financialYear:B};o?(await Oe.put(`/api/locations/${o}`,te),alert("Location updated successfully!")):(await Oe.post("/api/locations",te),alert("Location created successfully!")),n(xb),l(null),i(!1),A()}catch(Q){console.error("Error saving location:",Q),alert("Error saving location. Please try again.")}},O=U=>{n({name:U.name||"",address:U.address||"",city:U.city||"",state:U.state||"",country:U.country||"",postalCode:U.postalCode||"",contactPerson:U.contactPerson||"",contactNumber:U.contactNumber||""}),l(U._id),i(!0)},J=()=>{n(xb),l(null),i(!0)},W=()=>{i(!1),n(xb),l(null)},re=U=>({code:"Location Code",name:"Location Name",address:"Address",city:"City",state:"State",country:"Country",postalCode:"Postal Code",contactPerson:"Contact Person",contactNumber:"Contact Number"})[U]||U.charAt(0).toUpperCase()+U.slice(1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Location Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Location Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search locations...",value:v,onChange:D})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>d(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:T,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:y.length})]}),a.jsx("div",{children:a.jsxs("button",{onClick:J,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Location"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Location Name"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"State"}),a.jsx("th",{children:"Country"}),a.jsx("th",{children:"Postal Code"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Contact Number"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:S.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:v?"No locations found matching your search criteria":"No locations found"})}):S.map((U,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:N+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:U.name})}),a.jsx("td",{children:U.address}),a.jsx("td",{children:U.city}),a.jsx("td",{children:U.state}),a.jsx("td",{children:U.country}),a.jsx("td",{children:U.postalCode}),a.jsx("td",{children:U.contactPerson}),a.jsx("td",{children:U.contactNumber}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),C>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&E(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:C},(U,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),E(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===C?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<C&&E(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:b,masterDataType:"location"}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:o?"Edit Location":"Add New Location"}),a.jsx("button",{type:"button",className:"btn-close",onClick:W})]}),a.jsxs("form",{onSubmit:P,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:Object.keys(xb).map(U=>a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-md-3":"col-md-4"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-5":"col-4"}`,children:a.jsx("label",{className:"form-label",children:re(U)})}),a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-7":"col-8"} `,children:a.jsx("input",{type:U==="contactNumber"?"tel":"text",name:U,className:"form-control",placeholder:`Enter ${re(U)}`,value:r[U],onChange:L,required:U==="name"})})]})},U))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:W,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Location":"Create Location"})]})]})]})})})]})]})},w5e=()=>{const[e,t]=w.useState({}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState("");w.useEffect(()=>{N()},[]);const[b,y]=w.useState({taxCode:"",taxName:"",cgst:"",sgst:"",igst:"",companyId:c,financialYear:d}),C=ce=>{alert(`Import completed: ${ce.results.imported} records imported`),l(!1),N()},N=async()=>{const ce=await Oe.get("/api/tax",{params:{companyId:c,financialYear:d}});n(ce.data),h(1)},k=r.filter(ce=>{if(!v)return!0;const M=v.toLowerCase();return ce.taxCode?.toLowerCase().includes(M)||ce.taxName?.toLowerCase().includes(M)||ce.cgst?.toString().includes(M)||ce.sgst?.toString().includes(M)||ce.igst?.toString().includes(M)||((parseFloat(ce.cgst)||0)+(parseFloat(ce.sgst)||0)+(parseFloat(ce.igst)||0)).toString().includes(M)}),S=Math.ceil(k.length/m),D=(u-1)*m,E=D+m,T=k.slice(D,E),A=ce=>{g(ce.target.value),h(1)},L=ce=>{h(ce)},P=()=>{const M=(v?k:r).map(Y=>({"Tax Code":Y.taxCode||"","Tax Name":Y.taxName||"","CGST %":Y.cgst||"","SGST %":Y.sgst||"","IGST %":Y.igst||"","Total Tax %":(parseFloat(Y.cgst)||0)+(parseFloat(Y.sgst)||0)+(parseFloat(Y.igst)||0),"Tax Type":parseFloat(Y.igst)>0?"IGST":"CGST + SGST","Created Date":Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"","Updated Date":Y.updatedAt?new Date(Y.updatedAt).toLocaleDateString():""})),q=sa.book_new(),z=sa.json_to_sheet(M),K=[{wch:12},{wch:25},{wch:10},{wch:10},{wch:10},{wch:12},{wch:15},{wch:15},{wch:15}];z["!cols"]=K,sa.book_append_sheet(q,z,"Tax Master");const ee=new Date,ne=ee.toLocaleDateString("en-GB").replace(/\//g,"-"),ae=ee.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),G=`Tax-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${ne}-${ae}.xlsx`;Zu(q,G);const de=v?k.length:r.length;alert(`Excel file exported successfully: ${de} records exported as ${G}`)},O=(ce,M)=>{switch(ce){case"taxCode":if(!M)return"Required";if(M.length>4)return"Max 4 characters";break;case"taxName":if(!M)return"Required";if(M.length>25)return"Max 25 characters";break;case"cgst":case"igst":if(!M)return"Required";if(M.length>2)return"Max 2 digits";break;default:return""}return""},J=ce=>{const{name:M,value:q}=ce.target;let z=q;switch(M){case"taxCode":z=q.replace(/[^A-Za-z0-9 ]/g,"").slice(0,4);break;case"taxName":z=q.replace(/[^A-Za-z0-9 ]/g,"").slice(0,25);break;case"cgst":case"sgst":case"igst":z=q.replace(/[^0-9]/g,"").slice(0,2);break}const K=O(M,z);y({...b,[M]:z}),t({...e,[M]:K})},W=()=>{y({taxCode:"",taxName:"",cgst:"",sgst:"",igst:""}),t({}),i(null)},re=async ce=>{ce.preventDefault();const M={};if(Object.entries(b).forEach(([z,K])=>{const ee=O(z,K);ee&&(M[z]=ee)}),Object.keys(M).length>0){t(M);return}const q={...b,companyId:c,financialYear:d};try{s?(await Oe.put(`/api/tax/${s}`,q),alert("Tax updated!")):(await Oe.post("/api/tax",q),alert("Tax added!")),W(),N(),X()}catch(z){console.error(z),alert("Failed to save")}},U=ce=>{y({taxCode:ce.taxCode,taxName:ce.taxName,cgst:ce.cgst,sgst:ce.sgst,igst:ce.igst}),i(ce._id)},[Q,B]=w.useState(!1),te=()=>B(!0),X=()=>{B(!1),s||W()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Taxes Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Taxes Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code, name, or percentage...",value:v,onChange:A})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>l(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:P,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:k.length})]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{W(),te()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Tax"]})})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Code"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"CGST %"}),a.jsx("th",{children:"SGST %"}),a.jsx("th",{children:"IGST %"}),a.jsx("th",{children:"Total %"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No taxes found matching your search criteria":"No taxes found"})}):T.map(ce=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:ce.taxCode})}),a.jsx("td",{children:ce.taxName}),a.jsxs("td",{className:"text-center",children:[ce.cgst,"%"]}),a.jsxs("td",{className:"text-center",children:[ce.sgst,"%"]}),a.jsxs("td",{className:"text-center",children:[ce.igst,"%"]}),a.jsx("td",{className:"text-center",children:a.jsxs("strong",{children:[(parseFloat(ce.cgst)||0)+(parseFloat(ce.sgst)||0)+(parseFloat(ce.igst)||0),"%"]})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{U(ce),te()},children:"Edit"})})]},ce._id))})]})}),S>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Page ",u," of ",S]}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ce=>{ce.preventDefault(),u>1&&L(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:S},(ce,M)=>a.jsx("li",{className:`page-item ${u===M+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:q=>{q.preventDefault(),L(M+1)},children:M+1})},M)),a.jsx("li",{className:`page-item ${u===S?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ce=>{ce.preventDefault(),u<S&&L(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})]})]}),Q&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," Tax Code"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:X,"aria-label":"Close"})]}),a.jsxs("form",{onSubmit:re,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:["taxCode","taxName","cgst","sgst","igst"].map(ce=>a.jsx("div",{className:` ${ce==="taxName"?"col-md-4":"col-md-2"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${ce==="taxName"?"col-3":"col-6"}`,children:a.jsx("label",{className:"form-label ",children:ce==="taxCode"?"Tax Code":ce==="taxName"?"Tax Name":ce==="sgst"?"SGST/UGST%":`${ce.toUpperCase()}%`})}),a.jsxs("div",{className:`${ce==="taxName"?"col-9":"col-6"}`,children:[a.jsx("input",{type:"text",name:ce,value:b[ce],onChange:J,className:`form-control ${e[ce]?"is-invalid":""}`,placeholder:ce==="taxCode"?"Enter tax code (max 4 chars)":ce==="taxName"?"Enter tax name (max 25 chars)":"Enter percentage (max 2 digits)"}),e[ce]&&a.jsx("div",{className:"invalid-feedback",children:e[ce]})]})]})},ce))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:X,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",type:"submit",children:s?"Update Tax":"Save Tax"})]})]})]})})})]}),a.jsx(gf,{show:o,onClose:()=>l(!1),onImportSuccess:C,masterDataType:"tax"})]})};function S5e(){const[e,t]=w.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState([]),[v,g]=w.useState(!1),[b,y]=w.useState(!1),[C,N]=w.useState("internal"),[k,S]=w.useState(""),[D,E]=w.useState(""),T=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","Maharashtra","Gujarat","Rajasthan","Punjab","Haryana"],A=["India","USA","Germany","France","UK"],[L,P]=w.useState(!1),[O,J]=w.useState(1),[W,re]=w.useState(""),U=10;w.useEffect(()=>{Q(),B()},[]),w.useEffect(()=>{J(1)},[W]);const Q=async()=>{const ue=await Oe.get("/api/vendor-categories",{params:{companyId:r,financialYear:n}});i(ue.data)},B=async()=>{const se=(await Oe.get("/api/vendors",{params:{companyId:r,financialYear:n}})).data.sort((ye,Ne)=>new Date(Ne.createdAt)-new Date(ye.createdAt));l(se)},te=o.filter(ue=>{const se=ue.vnNo?.toLowerCase()||"",ye=ue.name1?.toLowerCase()||"",Ne=ue.categoryId?.categoryName?.toLowerCase()||"",Le=W.toLowerCase();return se.includes(Le)||ye.includes(Le)||Ne.includes(Le)}),X=Math.ceil(te.length/U),ce=O*U,M=ce-U,q=te.slice(M,ce),z=ue=>{ue>=1&&ue<=X&&J(ue)},K=ue=>{const{name:se,value:ye}=ue.target;se==="email"&&ye&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(ye)?ue.target.setCustomValidity(""):ue.target.setCustomValidity("Please enter a valid email address")),t(Ne=>({...Ne,[se]:ye}))},ee=()=>{const ue=te.map(Re=>({"Vendor No":Re.vnNo||"","Name 1":Re.name1||"","Name 2":Re.name2||"",Category:Re.categoryId?.categoryName||"","Search Term":Re.search||"","Address 1":Re.address1||"","Address 2":Re.address2||"","Extra Addresses":Re.extraAddresses?Re.extraAddresses.join(", "):"",City:Re.city||"",Pincode:Re.pincode||"",Region:Re.region||"",Country:Re.country||"","Contact No":Re.contactNo||"","Contact Person":Re.contactname||"",Email:Re.email||"","Vendor Type":Re.vendorIdType||"internal","External Vendor ID":Re.externalVendorId||"","Is Deleted":Re.isDeleted?"Yes":"No","Is Blocked":Re.isBlocked?"Yes":"No","Created Date":Re.createdAt?new Date(Re.createdAt).toLocaleDateString():"","Updated Date":Re.updatedAt?new Date(Re.updatedAt).toLocaleDateString():""})),se=sa.book_new(),ye=sa.json_to_sheet(ue),Ne=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:25},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];ye["!cols"]=Ne,sa.book_append_sheet(se,ye,"Vendors");const Le=new Date,Je=Le.toLocaleDateString("en-GB").replace(/\//g,"-"),lt=Le.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),vt=`Vendor-Master-${Je}-${lt}.xlsx`;Zu(se,vt),alert(`Excel file exported successfully as: ${vt}`)},ne=async()=>{try{const ue={...e,companyId:r,financialYear:n,vendorIdType:C,externalVendorId:C==="external"?k:null};if(u)await Oe.put(`/api/vendors/${u}`,ue),alert("Vendor updated!");else{const se=await Oe.post("/api/vendors",ue);d(se.data.vnNo),alert(`Vendor saved! VNNo: ${se.data.vnNo}`)}B(),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null),y(!1),P(!1),S(""),N("internal")}catch(ue){console.error(ue),alert("Error saving vendor")}},ae=async ue=>{if(ue.preventDefault(),!e.categoryId||!e.name1){alert("Please fill in required fields");return}y(!0)},ie=ue=>{t({categoryId:ue.categoryId?._id,name1:ue.name1,name2:ue.name2,search:ue.search,address1:ue.address1,address2:ue.address2,city:ue.city,pincode:ue.pincode,region:ue.region,country:ue.country,contactNo:ue.contactNo,contactname:ue.contactname,email:ue.email}),h(ue._id),d(ue.vnNo),P(!0)},G=()=>{t(ue=>({...ue,extraAddresses:[...ue.extraAddresses,""]}))},de=(ue,se)=>{const ye=[...e.extraAddresses];ye[ue]=se,t(Ne=>({...Ne,extraAddresses:ye}))},Y=ue=>{const se=[...e.extraAddresses];se.splice(ue,1),t(ye=>({...ye,extraAddresses:se}))},oe=async(ue,se,ye)=>{try{const Ne=await Oe.put(`/api/vendors/status/${ue}`,{[se]:ye});l(Le=>Le.map(Je=>Je._id===ue?{...Je,[se]:ye}:Je)),alert(`${se} updated successfully!`)}catch(Ne){console.error(Ne),alert("Failed to update vendor status")}},Se=ue=>{alert(`Import completed: ${ue.results.imported} records imported`),g(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb ",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search Vendors...",value:W,onChange:ue=>re(ue.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>g(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ee,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"#",className:"btn btn-primary btn-sm",onClick:()=>{P(!0),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null)},children:[a.jsx("i",{className:"ti ti-add-circle5 me-1"}),"New Vendor"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"VNNo"}),a.jsx("th",{children:"Name1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:q.length>0?q.map(ue=>a.jsxs("tr",{children:[a.jsx("td",{children:ue.vnNo}),a.jsx("td",{className:"text-wrap",children:ue.name1}),a.jsx("td",{children:ue.categoryId?.categoryName}),a.jsx("td",{className:"text-wrap",children:ue.contactNo}),a.jsx("td",{className:"text-wrap",children:ue.email}),a.jsx("td",{className:"text-wrap",children:ue.search}),a.jsx("td",{className:"text-wrap",children:ue.address1}),a.jsx("td",{className:"text-wrap",children:ue.city}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:ue.isDeleted||!1,onChange:se=>oe(ue._id,"isDeleted",se.target.checked)})}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:ue.isBlocked||!1,onChange:se=>oe(ue._id,"isBlocked",se.target.checked)})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>ie(ue),children:"Edit"})})]},ue._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center text-muted py-4",children:W?"No vendors found matching your search criteria":"No vendors available"})})})]})})})]}),te.length>0&&X>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${O===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ue=>{ue.preventDefault(),z(O-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const se=[],ye=[];se.push(1);for(let Je=Math.max(2,O-2);Je<=Math.min(X-1,O+2);Je++)se.push(Je);X>1&&se.push(X);const Ne=[...new Set(se)].sort((Je,lt)=>Je-lt);let Le;for(let Je of Ne)Le&&(Je-Le===2?ye.push(Le+1):Je-Le!==1&&ye.push("...")),ye.push(Je),Le=Je;return ye.map((Je,lt)=>Je==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${lt}`):a.jsx("li",{className:`page-item ${O===Je?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:vt=>{vt.preventDefault(),z(Je)},children:Je})},Je))})(),a.jsx("li",{className:`page-item ${O===X?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ue=>{ue.preventDefault(),z(O+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),L&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:u?"Edit Vendor":"Add New Vendor"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal",onClick:()=>P(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:ae,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:K,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(ue=>a.jsx("option",{value:ue._id,children:ue.categoryName},ue._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",className:"form-control",placeholder:"Enter Name 1",value:e.name1,onChange:K,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2",className:"form-control",value:e.name2,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Search Term:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",className:"form-control",value:e.search,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2:"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:K,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:G,children:"+"})})]})}),e.extraAddresses?.map((ue,se)=>a.jsx("div",{className:"col-md-4 mb-2 position-relative",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:[`Address${se+3}`,":"]})}),a.jsxs("div",{className:"col-8 d-flex align-items-center",children:[a.jsx("input",{type:"text",placeholder:`Enter Address ${se+3}`,value:ue,onChange:ye=>de(se,ye.target.value),className:"form-control me-2"}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>Y(se),children:a.jsx("i",{className:"ti ti-x"})})]})]})},se)),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",className:"form-control",value:e.city,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter Pincode",className:"form-control",value:e.pincode,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Region:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",className:"form-select",placeholder:"Select Region",value:e.region,onChange:K,children:[a.jsx("option",{value:"",children:"Select Region"}),T.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Country:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",className:"form-select",value:e.country,onChange:K,children:[a.jsx("option",{value:"",children:"Select Country"}),A.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"ContactNo:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter Contact No",className:"form-control",value:e.contactNo,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactname",placeholder:"Enter Contact Person Name",className:"form-control",value:e.contactname,onChange:K})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",className:"form-control",value:e.email,onChange:K})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>P(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Save"})]})]})]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Vendor ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(!1),E(""),S(""),N("internal")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Vendor ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-primary btn-md",onClick:()=>{N("internal"),ne()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-md",onClick:()=>N("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),C==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Vendor ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Vendor ID (max 50 characters)",value:k,onChange:ue=>{ue.target.value.length<=50&&(S(ue.target.value),E(""))},onKeyPress:ue=>{ue.key==="Enter"&&k&&ne()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[k.length,"/50 characters"]}),D&&a.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:D}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:ne,disabled:!k,children:"Confirm & Save Vendor"})})]})]})]})})})]}),a.jsx(gf,{show:v,onClose:()=>g(!1),onSuccess:Se,masterDataType:"vendor"})]})}function C5e(){const[e,t]=w.useState({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState("vendorId"),[v,g]=w.useState("materialId"),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState([]),[L,P]=w.useState([]),[O,J]=w.useState([]),[W,re]=w.useState(1),[U,Q]=w.useState(null),[B,te]=w.useState(!1),X=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear"),[M,q]=w.useState(!1);w.useEffect(()=>{K(),ee(),ne(),ae(),ie(),Oe.get("/api/locations",{params:{companyId:X,financialYear:ce}}).then(Ie=>n(Ie.data))},[]);const z=()=>{const Ie=O.map(jr=>({Category:ue(jr.categoryId),"Vendor Name":se(jr.vendorId),"Vendor ID":ye(jr.vendorId),"Material ID":Le(jr.materialId),"Material Description":Ne(jr.materialId),"Unit (Location)":jr.unit||"","BUM (Base Unit Measure)":jr.bum||"","Order Unit":jr.orderUnit||"",Price:jr.price||"",Buyer:jr.buyer||"","Tax Name":Je(jr.taxId),"Tax Details":lt(jr.taxId),"Company ID":jr.companyId||"","Financial Year":jr.financialYear||"","Created Date":jr.createdAt?new Date(jr.createdAt).toLocaleDateString():"","Updated Date":jr.updatedAt?new Date(jr.updatedAt).toLocaleDateString():""})),ke=sa.book_new(),it=sa.json_to_sheet(Ie),bt=[{wch:20},{wch:25},{wch:15},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:12},{wch:20},{wch:15},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];it["!cols"]=bt,sa.book_append_sheet(ke,it,"Vendor Price List");const Kt=new Date,Rt=Kt.toLocaleDateString("en-GB").replace(/\//g,"-"),tr=Kt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),mr=`Vendor-Price-List-${Rt}-${tr}.xlsx`;Zu(ke,mr)},K=async()=>{try{const Ie=await Oe.get("/api/vendor-categories",{params:{companyId:X,financialYear:ce}});S(Ie.data)}catch(Ie){console.error("Error fetching categories:",Ie)}},ee=async()=>{try{const Ie=await Oe.get("/api/vendors",{params:{companyId:X,financialYear:ce}});E(Ie.data)}catch(Ie){console.error("Error fetching vendors:",Ie)}},ne=async()=>{try{const Ie=await Oe.get("/api/material",{params:{companyId:X,financialYear:ce}});A(Ie.data)}catch(Ie){console.error("Error fetching materials:",Ie)}},ae=async()=>{try{const ke=await(await fetch("/api/tax",{params:{companyId:X,financialYear:ce}})).json();P(ke)}catch(Ie){console.error("Error fetching taxes:",Ie)}},ie=async()=>{try{const Ie=localStorage.getItem("selectedCompanyId"),ke=localStorage.getItem("financialYear");console.log("comanyvendorpl",Ie,ke);const it=new URLSearchParams({companyId:Ie,financialYear:ke}).toString(),Kt=await(await fetch(`/api/vendor-price-lists?${it}`)).json();J(Kt)}catch(Ie){console.error("Error fetching price list:",Ie)}},G=async Ie=>{const{name:ke,value:it}=Ie.target;let bt={...e,[ke]:it};if(ke==="materialId")try{const tr=(await(await fetch(`/api/material/${it}`)).json()).conversionValue||1;re(tr)}catch(Kt){console.error("Error fetching material:",Kt),re(1)}t(bt)},de=async Ie=>{Ie.preventDefault();const ke=[];e.unit.trim()||ke.push("Unit (Location) is required."),e.categoryId||ke.push("Category is required."),e.vendorId||ke.push("Vendor is required."),e.materialId||ke.push("Material is required."),e.bum||ke.push("BUM (Base Unit Multiplier) is required."),e.buyer.trim()||ke.push("Buyer is required.");const it={...e,companyId:X,financialYear:ce};if(ke.length>0){alert(ke.join(`
`));return}try{if(U){console.log("Updating with ID:",U),console.log("Form data:",e);const bt=await fetch(`/api/vendor-price-lists/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(console.log("Update response status:",bt.status),bt.ok)alert("Vendor Price List Updated Successfully!"),Q(null);else{const Kt=await bt.text();throw console.error("Update failed:",Kt),new Error(`Update failed: ${bt.status} - ${Kt}`)}}else{const bt=await fetch("/api/vendor-price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(bt.ok)alert("Vendor Price List Saved Successfully!");else{const Kt=await bt.text();throw console.error("Save failed:",Kt),new Error(`Save failed: ${bt.status} - ${Kt}`)}}Y(),te(!1),Re(!1),ie()}catch(bt){console.error("Error saving data:",bt),alert("Failed to save Vendor Price List: "+bt.message)}},Y=()=>{t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),re(1),Q(null)},oe=async Ie=>{try{console.log("Editing ID:",Ie);const ke=await fetch(`/api/vendor-price-lists/${Ie}`);if(!ke.ok)throw new Error(`Failed to fetch: ${ke.status} - ${ke.statusText}`);const it=await ke.json(),bt=Kt=>Kt?typeof Kt=="string"?Kt:typeof Kt=="object"&&(Kt.$oid||Kt._id)||Kt.toString():"";t({categoryId:bt(it.categoryId),vendorId:bt(it.vendorId),materialId:bt(it.materialId),unit:it.unit,bum:it.bum,orderUnit:it.orderUnit,price:it.price,buyer:it.buyer,taxId:bt(it.taxId)}),Q(Ie),te(!0),Re(!0)}catch(ke){console.error("Error fetching record for edit:",ke),alert("Failed to load record for editing: "+ke.message)}},Se=Ie=>Ie?typeof Ie=="string"?Ie:typeof Ie=="object"&&(Ie.$oid||Ie._id)||Ie.toString():null,ue=Ie=>{const ke=Se(Ie),it=k.find(bt=>bt._id===ke);return it?it.categoryName:"Unknown"},se=Ie=>{const ke=Se(Ie),it=D.find(bt=>bt._id===ke);return it?it.name1:"Unknown"},ye=Ie=>{const ke=Se(Ie),it=D.find(bt=>bt._id===ke);return it?it.vnNo||it.vendorId:"Unknown"},Ne=Ie=>{const ke=Se(Ie),it=T.find(bt=>bt._id===ke);return it?it.description:"Unknown"},Le=Ie=>{const ke=Se(Ie),it=T.find(bt=>bt._id===ke);return it?it.materialId:"Unknown"},Je=Ie=>{if(!Ie)return"No Tax";const ke=Se(Ie),it=L.find(bt=>bt._id===ke);return it?it.taxName:"Unknown"},lt=Ie=>{if(!Ie)return"No Tax";const ke=Se(Ie),it=L.find(bt=>bt._id===ke);return it?`CGST: ${it.cgst}%, SGST: ${it.sgst}%, IGST: ${it.igst}%`:"Unknown"},[vt,Re]=w.useState(!1),[ht,At]=w.useState(1),Tt=10,Ht=O.slice((ht-1)*Tt,ht*Tt),pe=Math.ceil(O.length/Tt),he=Ie=>{Ie>=1&&Ie<=pe&&At(Ie)},xe=()=>{i(!0),y(""),d([])},me=()=>{i(!1),y(""),d([])},De=Ie=>{y(Ie.target.value)},Ye=()=>{if(!b.trim()){d([]);return}if(m==="vendorId"){const Ie=D.filter(ke=>(ke.vendorId||"").toLowerCase().includes(b.toLowerCase()));d(Ie)}else{const Ie=D.filter(ke=>(ke.name1||"").toLowerCase().includes(b.toLowerCase()));d(Ie)}},jt=()=>{d(D),y("")},Qe=()=>{d([]),y("")},Xe=Ie=>{G({target:{name:"vendorId",value:Ie._id}}),me()},Be=()=>{l(!0),N(""),h([])},He=()=>{l(!1),N(""),h([])},ft=Ie=>{N(Ie.target.value)},Ae=()=>{if(!C.trim()){h([]);return}if(v==="materialId"){const Ie=T.filter(ke=>(ke.materialId||"").toLowerCase().includes(C.toLowerCase()));h(Ie)}else{const Ie=T.filter(ke=>(ke.description||"").toLowerCase().includes(C.toLowerCase()));h(Ie)}},Ke=()=>{h(T),N("")},Ge=()=>{h([]),N("")},ct=Ie=>{G({target:{name:"materialId",value:Ie._id}}),He()};w.useEffect(()=>{const Ie=setTimeout(()=>{b.trim()?Ye():d([])},300);return()=>clearTimeout(Ie)},[b,m,D]),w.useEffect(()=>{const Ie=setTimeout(()=>{C.trim()?Ae():h([])},300);return()=>clearTimeout(Ie)},[C,v,T]);const Mt=Ie=>{q(!1),ie()};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search"})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>q(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:z,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:()=>{Re(!0),t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),Q(null)},children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Vendor Price List"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered datatable",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Buyer"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ht.map(Ie=>a.jsxs("tr",{children:[a.jsx("td",{children:se(Ie.vendorId)}),a.jsx("td",{children:ue(Ie.categoryId)}),a.jsx("td",{children:Ne(Ie.materialId)}),a.jsx("td",{className:"text-wrap",children:Ie.unit}),a.jsx("td",{className:"text-wrap",children:Ie.bum}),a.jsx("td",{className:"text-wrap",children:Ie.orderUnit}),a.jsxs("td",{className:"text-wrap",children:["Rs",Ie.price||0]}),a.jsx("td",{className:"text-wrap",children:Ie.buyer}),a.jsx("td",{className:"text-wrap",children:Je(Ie.taxId)}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>oe(Se(Ie._id)),children:"Edit"})})]},Se(Ie._id)))})]})})})]}),pe>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${ht===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ie=>{Ie.preventDefault(),he(ht-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:pe},(Ie,ke)=>a.jsx("li",{className:`page-item ${ht===ke+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:it=>{it.preventDefault(),he(ke+1)},children:ke+1})},ke)),a.jsx("li",{className:`page-item ${ht===pe?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ie=>{Ie.preventDefault(),he(ht+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),vt&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:U?"Edit Entry":"Add New Entry"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>Re(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:de,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Unit (Location):"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:e.unit,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),r.map(Ie=>a.jsx("option",{value:Ie.name,children:Ie.name},Ie.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),k.map(Ie=>a.jsx("option",{value:Ie._id,children:Ie.categoryName},Ie._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"vendorId",className:"form-select me-2",value:e.vendorId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Vendor"}),D.map(Ie=>a.jsx("option",{value:Ie._id,children:Ie.name1},Ie._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:xe,title:"Search Vendor",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:e.materialId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Material"}),T.map(Ie=>a.jsx("option",{value:Ie._id,children:Ie.description},Ie._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Be,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"Base Unit (BUM):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter Base Unit (BUM)",value:e.bum,onChange:Ie=>{Ie.target.value=Math.max(0,Ie.target.value),G(Ie)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter Price",value:e.price,onChange:G})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Buyer:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"buyer",className:"form-control",placeholder:"Enter Buyer",value:e.buyer,onChange:G,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Auto-calculated",value:e.orderUnit,onChange:Ie=>{Ie.target.value=Math.max(0,Ie.target.value),G(Ie)}})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:e.taxId,onChange:G,children:[a.jsx("option",{value:"",children:"Select Tax"}),L.map(Ie=>a.jsx("option",{value:Ie._id,children:Ie.taxName},Ie._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>Re(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:U?"Update":"Save"})]})]})]})})})]}),s&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:me})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:m,onChange:Ie=>p(Ie.target.value),children:[a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"name",children:"Vendor Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:m==="vendorId"?"Enter Vendor ID...":"Search by Vendor Name...",value:b,onChange:De})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:jt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),c.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:c.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((Ie,ke)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ie.vnNo}),a.jsx("td",{className:"text-wrap",children:Ie.name1}),a.jsx("td",{className:"text-wrap",children:Ie.contactNo}),a.jsx("td",{className:"text-wrap",children:Ie.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Xe(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:D.length===0?"No vendors loaded from API":b?`No vendors found matching "${b}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:me,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:He})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:v,onChange:Ie=>g(Ie.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:v==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:C,onChange:ft})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ke,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),u.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ge,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:u.map((Ie,ke)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ie.materialId}),a.jsx("td",{className:"text-wrap",children:Ie.description}),a.jsx("td",{className:"text-wrap",children:Ie.baseUnit}),a.jsx("td",{className:"text-wrap",children:Ie.location}),a.jsx("td",{className:"text-wrap",children:Ie.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ct(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:T.length===0?"No materials loaded from API":C?`No materials found matching "${C}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:He,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(gf,{show:M,onClose:()=>q(!1),onImportSuccess:Mt,masterDataType:"vendorPriceList"})]})})}function M8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(!1),[d,u]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState([]),[g,b]=w.useState(null),[y,C]=w.useState([]),[N,k]=w.useState(!1),[S,D]=w.useState("materialId"),[E,T]=w.useState(""),[A,L]=w.useState(!1),P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:P,financialYear:O}}).then(Ge=>{v(Ge.data),console.log("Materials loaded:",Ge.data)}).catch(Ge=>console.error("Error fetching materials:",Ge))},[]),w.useEffect(()=>{if(!A&&!E){C([]);return}const Ge=p.filter(ct=>{if(A&&!E)return!0;const Mt=E.toLowerCase();return(ct[S]?.toString().toLowerCase()||"").includes(Mt)});C(Ge)},[p,E,S,A]);const J=Ge=>{if(W!==null&&i?.items){const ct=[...i.items];ct[W]&&(ct[W]={...ct[W],materialId:Ge.materialId,description:Ge.description,baseUnit:Ge.baseUnit,price:Ge.price},o({...i,items:ct}))}k(!1),re(null)},[W,re]=w.useState(null),[U,Q]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0,isdelete:!1}),[B,te]=w.useState(""),[X,ce]=w.useState("soNumber"),[M,q]=w.useState(!1),[z,K]=w.useState([]),[ee,ne]=w.useState(null),[ae,ie]=w.useState("name1"),[G,de]=w.useState(""),[Y,oe]=w.useState(!1),[Se,ue]=w.useState([]),[se,ye]=w.useState(""),[Ne,Le]=w.useState(!1),[Je,lt]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:P,financialYear:O}}).then(Ge=>r(Ge.data)).catch(Ge=>console.error("Error fetching sales orders",Ge)),Oe.get("/api/goodsissuecategory",{params:{companyId:P,financialYear:O}}).then(Ge=>s(Ge.data)).catch(Ge=>console.error("Error fetching categories",Ge)),Oe.get("/api/customers",{params:{companyId:P,financialYear:O}}).then(Ge=>K(Ge.data)).catch(Ge=>console.error("Error fetching customers",Ge))},[]);const vt=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsissue",{params:{companyId:P,financialYear:O}}).then(Ge=>{console.log("Documents fetched:",Ge.data),ue(Ge.data)}).catch(Ge=>{console.error("Error fetching documents",Ge)})};w.useEffect(()=>{console.log("Categories loaded:",n),n.forEach(Ge=>{console.log(`Category: "${Ge.categoryName}" (length: ${Ge.categoryName.length})`)})},[n]);const Re=Ge=>{o(Ge),Q(ct=>({...ct,customer:Ge.sales||Ge.customer||Ge.customerName,location:Ge.deliveryLocation||""})),c(!1)},ht=Ge=>{Q(ct=>({...ct,customer:Ge.name1})),u(!1)},At=Ge=>{if(Q(ct=>({...ct,docnumber:Ge.docnumber,documentDate:Ge.documentDate||Ge.issueDate||e,postingDate:Ge.postingDate||e,reference:Ge.reference||"",customer:Ge.customer||"",location:Ge.location||""})),ne(Ge),Ge.salesOrderId){const ct=t.find(Mt=>Mt._id===Ge.salesOrderId);ct&&o(ct)}else Ge.items&&o({soNumber:Ge.docnumber,items:Ge.items,sales:Ge.customer,deliveryLocation:Ge.location});m(!1)},[Tt,Ht]=w.useState(!1),pe=Ge=>{const ct=Ge.target.value;console.log(`Selected category: "${ct}" (length: ${ct.length})`);let Mt="",Ie=!1;const ke=ct.trim().toLowerCase();ke==="cancel"?(Ie=!0,Ht(!0),console.log("Cancel category selected - enabling document search"),vt()):ke==="demo"?Mt=`DMP-${Date.now()}`:ke==="display"&&(Ie=!0,console.log("Display category selected - enabling document search"),vt());const it=n.find(bt=>bt.categoryName.trim().toLowerCase()===ke);console.log("Selected category object:",it),console.log("Document number enabled:",Ie),Q(bt=>({...bt,category:ct,catdesc:it?.description||"",docnumber:Ie?"":Mt})),lt(Ie)},he=Ge=>{const ct=Ge.target.value;if(Q(Mt=>({...Mt,docnumber:ct})),ct.length>2){const Mt=Se.find(Ie=>Ie.docnumber&&Ie.docnumber.toLowerCase().includes(ct.toLowerCase()));Mt&&At(Mt)}},xe=(Ge,ct,Mt)=>{const Ie=[...i.items];Ie[Ge][ct]=Mt,o({...i,items:Ie})},me=async Ge=>{if(Ge.preventDefault(),!i)return alert("Please select a Sales Order.");const ct={...U,salesOrderId:i._id,items:i.items,issueDate:e};try{if(Tt){await Oe.patch(`/api/goodsissue/${ee._id}`,{isdelete:!0}),alert("Goods Issue cancelled successfully!");return}else await Oe.post("/api/goodsissue",ct),alert("Goods Issue saved successfully!"),Q({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0}),o(null),lt(!1)}catch(Mt){console.error("Error saving goods issue",Mt),alert("Failed to save goods issue")}},De=t.filter(Ge=>!M&&!B?!1:(Ge[X]?.toLowerCase()||"").includes(B.toLowerCase())),Ye=z.filter(Ge=>!Y&&!G?!1:(Ge[ae]?.toLowerCase()||"").includes(G.toLowerCase())),jt=Se.filter(Ge=>!Ne&&!se?!1:(Ge.docnumber?.toLowerCase()||"").includes(se.toLowerCase())),Qe=()=>{te(""),q(!0)},Xe=()=>{te(""),q(!1)},Be=()=>{de(""),oe(!0)},He=()=>{de(""),oe(!1)},ft=()=>{ye(""),Le(!0),vt()},Ae=()=>{ye(""),Le(!1)},Ke=U.category.trim().toLowerCase()==="display";return a.jsxs("div",{className:"content p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Issue"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Issue"})]})})]})}),a.jsxs("form",{onSubmit:me,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header p-2",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"category",className:"form-select form-select-sm",value:U.category,onChange:pe,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Ge=>a.jsx("option",{value:Ge.categoryName,children:Ge.categoryName},Ge._id))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"catdesc",className:"form-control form-control-sm",value:U.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Sales Order"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",value:i?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"docnumber",className:"form-control form-control-sm",value:U.docnumber,onChange:he,readOnly:!Je,placeholder:Je?"Enter document number...":""}),Je&&a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>m(!0),children:"Search"})]})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:U.documentDate,onChange:Ge=>Q(ct=>({...ct,documentDate:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Post Date"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:U.postingDate,onChange:Ge=>Q(ct=>({...ct,postingDate:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"DC/LLR/REF"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.reference,onChange:Ge=>Q(ct=>({...ct,reference:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Customer"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.location,readOnly:!0})})]})})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Available Qty"}),Tt&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:i?.items?.map((Ge,ct)=>a.jsxs("tr",{children:[a.jsx("td",{children:ct+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control",value:Ge.materialId||"",readOnly:!0}),!Ke&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{re(ct),k(!0)},children:""})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:`form-control ${Ke?"bg-light":""}`,value:Ge.quantity,onChange:Ke?void 0:Mt=>xe(ct,"quantity",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:`form-control ${Ke?"bg-light":""}`,value:Ge.deliveryDate,onChange:Ke?void 0:Mt=>xe(ct,"deliveryDate",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${Ke?"bg-light":""}`,value:Ge.lotNo||"",onChange:Ke?void 0:Mt=>xe(ct,"lotNo",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ge.price,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${Ke?"bg-light":""}`,value:Ge.availableQty||"",onChange:Ke?void 0:Mt=>xe(ct,"availableQty",Mt.target.value),readOnly:Ke,disabled:Ke})}),Tt&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:Ge.isCancelled,onChange:Mt=>xe(ct,"isCancelled",Mt.target.checked)})})]},ct))})]})})})]}),!Ke&&a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),N&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:S,onChange:Ge=>D(Ge.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${S}`,value:E,onChange:Ge=>T(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>L(!0),children:"View All"}),(E||A)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),L(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:y.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((Ge,ct)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.materialId})}),a.jsx("td",{children:Ge.description}),a.jsx("td",{children:Ge.baseUnit}),a.jsx("td",{children:Ge.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>J(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ct))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No materials found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),l&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>c(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:X,onChange:Ge=>ce(Ge.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${X}`,value:B,onChange:Ge=>te(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Qe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(B||M)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Xe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:De.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:De.map((Ge,ct)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.soNumber})}),a.jsx("td",{children:Ge.sales||Ge.customer||Ge.customerName}),a.jsx("td",{children:Ge.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Re(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ct))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:B?`No sales orders found for "${B}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),d&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ae,onChange:Ge=>ie(Ge.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ae}`,value:G,onChange:Ge=>de(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Be,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(G||Y)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:He,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ye.map((Ge,ct)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.customerId})}),a.jsx("td",{children:Ge.name1}),a.jsx("td",{children:Ge.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ht(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ct))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:G?`No customers found for "${G}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),h&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>m(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:se,onChange:Ge=>ye(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(se||Ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ae,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:jt.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:jt.map((Ge,ct)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ge.category})}),a.jsx("td",{children:Ge.customer}),a.jsx("td",{children:Ge.documentDate||Ge.issueDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>At(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ct))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:se?`No documents found for "${se}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const k5e=({show:e,onClose:t,issue:r})=>r?a.jsx("div",{className:`modal fade${e?" show d-block":""}`,tabIndex:"-1",style:e?{background:"rgba(0,0,0,0.5)"}:{display:"none"},children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview: Goods Issue - ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:t})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Category:"})," ",r.category,a.jsx("br",{}),a.jsx("strong",{children:"Category Desc:"})," ",r.catdesc,a.jsx("br",{}),a.jsx("strong",{children:"Document Date:"})," ",r.documentDate,a.jsx("br",{}),a.jsx("strong",{children:"Posting Date:"})," ",r.postingDate,a.jsx("br",{}),a.jsx("strong",{children:"Reference:"})," ",r.reference,a.jsx("br",{}),a.jsx("strong",{children:"Customer:"})," ",r.customer,a.jsx("br",{})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Location:"})," ",r.location,a.jsx("br",{}),a.jsx("strong",{children:"Issue Date:"})," ",r.issueDate,a.jsx("br",{}),a.jsx("strong",{children:"Sales Order ID:"})," ",r.salesOrderId,a.jsx("br",{}),a.jsx("strong",{children:"Company ID:"})," ",r.companyId,a.jsx("br",{}),a.jsx("strong",{children:"Financial Year:"})," ",r.financialYear,a.jsx("br",{}),a.jsx("strong",{children:"Deleted:"})," ",r.isdelete?"Yes":"No",a.jsx("br",{})]})]}),a.jsx("h6",{className:"mt-3",children:"Items"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Available Qty"}),a.jsx("th",{children:"Total (Qty  Price)"})]})}),a.jsx("tbody",{children:r.items.map((n,s)=>{const i=n.quantity*n.price;return a.jsxs("tr",{children:[a.jsx("td",{children:s+1}),a.jsx("td",{children:n.materialId}),a.jsx("td",{children:n.description}),a.jsx("td",{children:n.quantity}),a.jsx("td",{children:n.baseUnit}),a.jsx("td",{children:n.deliveryDate}),a.jsx("td",{children:n.lotNo}),a.jsx("td",{children:n.price}),a.jsx("td",{children:n.availableQty}),a.jsx("td",{children:i})]},s)})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null,O0=10,R8=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(0),[o,l]=w.useState(1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=w.useState(!1);w.useEffect(()=>{m()},[o]);const m=async()=>{h(!0);try{const S=await Oe.get("/api/goodsissue",{params:{companyId:c,financialYear:d,skip:(o-1)*O0,limit:O0}});t(S.data.items||S.data),i(S.data.totalCount||S.data.total||S.data.length||0)}catch(S){console.error("Error fetching Goods Issues:",S)}h(!1)},p=S=>{const D=window.open("","","height=700,width=1000");D.document.write("<html><head><title>Print Goods Issue</title>"),D.document.write(`<style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
        body { font-family: sans-serif; }
        h5, h6 { margin-top: 10px; }
      </style>`),D.document.write("</head><body>"),D.document.write(`<h5>Preview: Goods Issue - ${S.docnumber}</h5>
      <div>
        <div style="display:flex;gap:40px;margin-bottom:16px;">
          <div>
            <strong>Category:</strong> ${S.category||""}<br/>
            <strong>Category Desc:</strong> ${S.catdesc||""}<br/>
            <strong>Document Date:</strong> ${S.documentDate||""}<br/>
            <strong>Posting Date:</strong> ${S.postingDate||""}<br/>
            <strong>Reference:</strong> ${S.reference||""}<br/>
            <strong>Customer:</strong> ${S.customer||""}<br/>
          </div>
          <div>
            <strong>Location:</strong> ${S.location||""}<br/>
            <strong>Issue Date:</strong> ${S.issueDate||""}<br/>
            <strong>Sales Order ID:</strong> ${S.salesOrderId||""}<br/>
            <strong>Company ID:</strong> ${S.companyId||""}<br/>
            <strong>Financial Year:</strong> ${S.financialYear||""}<br/>
            <strong>Deleted:</strong> ${S.isdelete?"Yes":"No"}<br/>
          </div>
        </div>
        <h6>Items</h6>
        <table style="width:100%;border:1px solid black;">
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Base Unit</th>
              <th>Delivery Date</th>
              <th>Lot No</th>
              <th>Price</th>
              <th>Available Qty</th>
              <th>Total (Qty  Price)</th>
            </tr>
          </thead>
          <tbody>
            ${S.items&&S.items.length>0?S.items.map((E,T)=>{const A=E.quantity*E.price;return`
                      <tr>
                        <td>${T+1}</td>
                        <td>${E.materialId||""}</td>
                        <td>${E.description||""}</td>
                        <td>${E.quantity}</td>
                        <td>${E.baseUnit||""}</td>
                        <td>${E.deliveryDate||""}</td>
                        <td>${E.lotNo||""}</td>
                        <td>${E.price}</td>
                        <td>${E.availableQty}</td>
                        <td>${A}</td>
                      </tr>
                    `}).join(""):'<tr><td colSpan="10">No items</td></tr>'}
          </tbody>
        </table>
      </div>`),D.document.write("</body></html>"),D.document.close(),D.focus(),D.print(),D.close()},[v,g]=w.useState(1),b=v*O0,y=b-O0,C=e.slice(y,b),N=Math.ceil(e.length/O0),k=S=>{S<1||S>N||g(S)};return a.jsxs("div",{className:"container mt-4",children:[a.jsx("h2",{className:"mb-3",children:"Goods Issue Records"}),u?a.jsx("p",{children:"Loading..."}):e.length===0?a.jsx("p",{children:"No records found."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Issue Date"}),a.jsx("th",{children:"Preview Items"}),a.jsx("th",{children:"Print"})]})}),a.jsx("tbody",{children:C.map((S,D)=>{const E=S._id?.$oid||S._id||D;return a.jsxs("tr",{children:[a.jsx("td",{children:(v-1)*O0+D+1}),a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.category}),a.jsx("td",{children:S.documentDate}),a.jsx("td",{children:S.postingDate}),a.jsx("td",{children:S.reference}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:S.issueDate}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>n(S),children:"Preview"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(S),children:"Print"})})]},E)})})]})})})}),N>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const D=[],E=[];D.push(1);for(let L=Math.max(2,v-2);L<=Math.min(N-1,v+2);L++)D.push(L);N>1&&D.push(N);const T=[...new Set(D)].sort((L,P)=>L-P);let A;for(let L of T)A&&(L-A===2?E.push(A+1):L-A!==1&&E.push("...")),E.push(L),A=L;return E.map((L,P)=>L==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${P}`):a.jsx("li",{className:`page-item ${v===L?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>k(L),children:L})},L))})(),a.jsx("li",{className:`page-item ${v===N?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v+1),disabled:v===N,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]}),a.jsx(k5e,{show:!!r,onClose:()=>n(null),issue:r})]})};function F8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),d=localStorage.getItem("selectedCompanyId"),u=localStorage.getItem("financialYear"),[h,m]=w.useState(null),[p,v]=w.useState(!1),[g,b]=w.useState(!1),[y,C]=w.useState(!1),[N,k]=w.useState(null),[S,D]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),[E,T]=w.useState(""),[A,L]=w.useState("poNumber"),[P,O]=w.useState(!1),[J,W]=w.useState(""),[re,U]=w.useState("name1"),[Q,B]=w.useState(!1),[te,X]=w.useState(!1),[ce,M]=w.useState("materialId"),[q,z]=w.useState(""),[K,ee]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:d,financialYear:u}}).then(xe=>r(xe.data)).catch(xe=>console.error("Error fetching POs:",xe)),Oe.get("/api/vendors",{params:{companyId:d}}).then(xe=>s(xe.data)).catch(xe=>console.error("Error fetching vendors:",xe)),Oe.get("/api/material",{params:{companyId:d}}).then(xe=>o(xe.data)).catch(xe=>console.error("Error fetching materials:",xe)),Oe.get("/api/goodsreceiptcategory",{params:{companyId:d}}).then(xe=>c(xe.data)).catch(xe=>console.error("Error fetching categories:",xe))},[]);const ne=xe=>{m(xe),D(me=>({...me,vendor:xe.vendor||"",location:xe.deliveryLocation||""})),v(!1)},ae=xe=>{D(me=>({...me,vendor:xe.name1})),C(!1)},ie=xe=>{if(N!==null&&h?.items){const me=[...h.items];me[N]&&(me[N]={...me[N],materialId:xe.materialId,description:xe.description,baseUnit:xe.baseUnit,price:xe.price},m(De=>({...De,items:me})))}X(!1)},[G,de]=w.useState(!1),[Y,oe]=w.useState(!1),Se=xe=>{const me=xe.target.value,De=l.find(jt=>jt.categoryName===me);D(jt=>({...jt,category:me,catdesc:De?.categoryName||""}));const Ye=De?.categoryName?.toLowerCase();oe(Ye==="cancel"),de(Ye==="display")},ue=(xe,me,De)=>{const Ye=[...h.items];Ye[xe][me]=De,m({...h,items:Ye})},se=async xe=>{if(xe.preventDefault(),!h)return alert("Please select a Purchase Order.");const me={...S,purchaseOrderId:h._id,items:h.items,receiptDate:e,companyId:d,financialYear:u};try{l.find(De=>De.categoryName===S.category)?.categoryName.toLowerCase()==="cancel"?await Oe.patch(`/api/goodsreceipt/${h._id}`,{isdelete:!0}):await Oe.post("/api/goodsreceipt",me),alert("Goods Receipt saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),m(null)}catch(De){console.error("Error saving goods receipt",De),alert("Failed to save goods receipt")}},ye=t.filter(xe=>!P&&!E?!1:(xe[A]?.toLowerCase()||"").includes(E.toLowerCase())),Ne=n.filter(xe=>!Q&&!J?!1:(xe[re]?.toLowerCase()||"").includes(J.toLowerCase())),Le=i.filter(xe=>!K&&!q?!1:(xe[ce]?.toLowerCase()||"").includes(q.toLowerCase())),[Je,lt]=w.useState([]),[vt,Re]=w.useState("grNumber"),[ht,At]=w.useState(""),[Tt,Ht]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/goodsreceipt",{params:{companyId:d,financialYear:u}}).then(xe=>lt(xe.data)).catch(xe=>console.error("Error fetching goods receipts:",xe))},[]);const pe=Je.filter(xe=>!Tt&&!ht?!1:(xe[vt]?.toLowerCase()||"").includes(ht.toLowerCase())),he=xe=>{const De=xe.category?.toLowerCase()==="cancel";D(Xe=>({...Xe,docnumber:xe.docnumber,vendor:xe.vendor,location:xe.location,reference:xe.reference,documentDate:xe.documentDate,postingDate:xe.postingDate}));const{category:Ye,catdesc:jt,...Qe}=xe;m(Qe),console.log("select ",xe.items),oe(!De),b(!1)};return console.log("selectedPO",h),console.log("isReadOnlyMode",Y),a.jsxs("div",{className:"content p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Receipt"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Receipt"})]})})]})}),a.jsxs("form",{onSubmit:se,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:S.category,onChange:Se,children:[a.jsx("option",{value:"",children:"Select"}),l.map(xe=>a.jsx("option",{value:xe.categoryName,children:xe.categoryName},xe._id))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"PO Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:h?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:Y||G,onClick:()=>v(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.docnumber,onChange:xe=>D(me=>({...me,docnumber:xe.target.value})),readOnly:!Y}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:"Search"})]})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-7",children:a.jsx("label",{className:"form-label mb-0",children:"Document_Date"})}),a.jsx("div",{className:"col-12 col-lg-5",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:S.documentDate,readOnly:Y,onChange:xe=>D(me=>({...me,documentDate:xe.target.value}))})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-6",children:a.jsx("label",{className:"form-label mb-0",children:"Posting_Date"})}),a.jsx("div",{className:"col-12 col-lg-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:S.postingDate,readOnly:Y,onChange:xe=>D(me=>({...me,postingDate:xe.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-4",children:a.jsx("label",{className:"form-label mb-0",children:"Reference"})}),a.jsx("div",{className:"col-12 col-lg-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.reference,onChange:xe=>D(me=>({...me,reference:xe.target.value})),readOnly:G})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-3",children:a.jsx("label",{className:"form-label mb-0",children:"Vendor"})}),a.jsx("div",{className:"col-12 col-lg-9",children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.vendor,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:Y||G,onClick:()=>C(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-5",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-12 col-lg-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.location,readOnly:!0})})]})})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),Y&&!G&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:(h?.items?.length?h.items:[{}]).map((xe,me)=>a.jsxs("tr",{children:[a.jsx("td",{children:me+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:xe.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{k(me),X(!0)},disabled:Y||G,children:""})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:xe.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:xe.quantity||"",onChange:De=>ue(me,"quantity",De.target.value),readOnly:Y||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:xe.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:xe.deliveryDate||e,onChange:De=>ue(me,"deliveryDate",De.target.value),readOnly:Y||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:xe.lotNo||"",onChange:De=>ue(me,"lotNo",De.target.value),readOnly:Y||G})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:xe.price||"",readOnly:!0})}),Y&&!G&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",onChange:De=>ue(me,"cancel",De.target.checked)})})]},me))})]})})})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:re,onChange:xe=>U(xe.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${re}`,value:J,onChange:xe=>W(xe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>B(!0),children:"View All"}),(J||Q)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),B(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ne.map((xe,me)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:xe.vendorId})}),a.jsx("td",{children:xe.name1}),a.jsx("td",{children:xe.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},me))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:J?`No vendors found for "${J}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:xe=>L(xe.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:xe=>T(xe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>O(!0),children:"View All"}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),O(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ye.map((xe,me)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),a.jsx("td",{children:xe.vendor}),a.jsx("td",{children:xe.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ne(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},me))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No purchase orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),te&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>X(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ce,onChange:xe=>M(xe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ce}`,value:q,onChange:xe=>z(xe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ee(!0),children:"View All"}),(q||K)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{z(""),ee(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Le.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Le.map((xe,me)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:xe.materialId})}),a.jsx("td",{children:xe.description}),a.jsx("td",{children:xe.baseUnit}),a.jsx("td",{children:xe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ie(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},me))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:q?`No materials found for "${q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>X(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Goods Receipt"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:vt,onChange:xe=>Re(xe.target.value),children:[a.jsx("option",{value:"docnumber",children:"GR Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${vt}`,value:ht,onChange:xe=>At(xe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>Ht(!0),children:"View All"}),(ht||Tt)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{At(""),Ht(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"GR Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((xe,me)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:xe.docnumber})}),a.jsx("td",{children:xe.vendor}),a.jsx("td",{children:xe.location}),a.jsx("td",{children:xe.reference}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>he(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},me))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ht?`No receipts found for "${ht}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const vb=10,L8=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{try{const T=await Oe.get("/api/goodsreceipt",{params:{companyId:m,financialYear:p}});t(T.data)}catch(T){console.error("Error fetching Goods Receipts:",T)}},g=T=>{const A=window.open("","","height=600,width=900");A.document.write("<html><head><title>Print Goods Receipt</title>"),A.document.write("<style>table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; } h4 { margin-bottom: 10px; }</style>"),A.document.write("</head><body>"),A.document.write("<h4>Goods Receipt</h4>"),A.document.write('<table style="margin-bottom:10px;">'),A.document.write("<tbody>"),A.document.write(`<tr><td><strong>Document No:</strong></td><td>${T.docnumber}</td></tr>`),A.document.write(`<tr><td><strong>Document Date:</strong></td><td>${T.documentDate}</td></tr>`),A.document.write(`<tr><td><strong>Posting Date:</strong></td><td>${T.postingDate}</td></tr>`),A.document.write(`<tr><td><strong>Reference:</strong></td><td>${T.reference}</td></tr>`),A.document.write(`<tr><td><strong>Vendor:</strong></td><td>${T.vendor}</td></tr>`),A.document.write(`<tr><td><strong>Location:</strong></td><td>${T.location}</td></tr>`),A.document.write(`<tr><td><strong>Receipt Date:</strong></td><td>${T.receiptDate}</td></tr>`),A.document.write("</tbody></table>"),A.document.write("<h5>Items</h5>"),A.document.write('<table style="width:100%;">'),A.document.write("<thead><tr>"),A.document.write("<th>#</th>"),A.document.write("<th>Material ID</th>"),A.document.write("<th>Description</th>"),A.document.write("<th>Quantity</th>"),A.document.write("<th>Base Unit</th>"),A.document.write("<th>Delivery Date</th>"),A.document.write("<th>Lot No</th>"),A.document.write("<th>Price</th>"),A.document.write("<th>Total</th>"),A.document.write("</tr></thead><tbody>"),T.items&&T.items.length>0?T.items.forEach((L,P)=>{A.document.write("<tr>"),A.document.write(`<td>${P+1}</td>`),A.document.write(`<td>${L.materialId}</td>`),A.document.write(`<td>${L.description}</td>`),A.document.write(`<td>${L.quantity}</td>`),A.document.write(`<td>${L.baseUnit}</td>`),A.document.write(`<td>${L.deliveryDate}</td>`),A.document.write(`<td>${L.lotNo}</td>`),A.document.write(`<td>${L.price}</td>`),A.document.write(`<td>${(L.quantity*L.price).toFixed(2)}</td>`),A.document.write("</tr>")}):A.document.write('<tr><td colspan="9" style="text-align:center;">No items found</td></tr>'),A.document.write("</tbody></table>"),A.document.write("</body></html>"),A.document.close(),A.focus(),A.print(),A.close()},b=T=>{n(T)},y=()=>{n(null)},N=e.filter(T=>{if(o&&(T.postingDate?T.postingDate.slice(0,10):"")<o||c&&(T.postingDate?T.postingDate.slice(0,10):"")>c)return!1;if(s.trim()!==""){const A=s.trim().toLowerCase();if(![T.docnumber,T.reference,T.vendor,T.location].some(O=>O&&O.toLowerCase().includes(A)))return!1}return!0}),k=Math.ceil(N.length/vb)||1,S=T=>{T<1||T>k||h(T)},D=()=>{i(""),l(""),d(""),h(1)},E=N.slice((u-1)*vb,u*vb);return w.useEffect(()=>{u>k&&h(k)},[N,k]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Goods Receipt List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Goods Receipt List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-sm-12",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row ",children:[a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search (Doc No, Reference, Vendor, Location)...",value:s,onChange:T=>i(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date From"}),a.jsx("input",{type:"date",className:"form-control",value:o,onChange:T=>l(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date To"}),a.jsx("input",{type:"date",className:"form-control",value:c,onChange:T=>d(T.target.value)})]}),a.jsx("div",{className:"col-md-3 mb-2 d-flex align-items-end",children:a.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:D,children:"Reset"})})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive table-nowrap",children:a.jsxs("table",{className:"table table-sm mb-0 border",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Receipt Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No goods receipt records found."})}):E.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:(u-1)*vb+A+1}),a.jsx("td",{children:T.docnumber}),a.jsx("td",{children:T.documentDate}),a.jsx("td",{children:T.postingDate}),a.jsx("td",{children:T.reference}),a.jsx("td",{children:T.vendor}),a.jsx("td",{children:T.location}),a.jsx("td",{children:T.receiptDate}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>g(T),children:"Print"}),a.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>b(T),children:"Preview"})]})]},T._id?.$oid||(u-1)*vb+A))})]})})})]}),k>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u-1),disabled:u===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const A=[],L=[];A.push(1);for(let J=Math.max(2,u-2);J<=Math.min(k-1,u+2);J++)A.push(J);k>1&&A.push(k);const P=[...new Set(A)].sort((J,W)=>J-W);let O;for(let J of P)O&&(J-O===2?L.push(O+1):J-O!==1&&L.push("...")),L.push(J),O=J;return L.map((J,W)=>J==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${W}`):a.jsx("li",{className:`page-item ${u===J?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>S(J),children:J})},J))})(),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u+1),disabled:u===k,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]})})]}),r&&a.jsx("div",{className:"modal show",tabIndex:"-1",style:{display:"block",background:"rgba(0,0,0,0.3)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:y,children:a.jsx("div",{className:"modal-dialog modal-xl",style:{pointerEvents:"auto",marginTop:"5vh"},onClick:T=>T.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview - Document No: ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:y})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("table",{className:"table table-borderless mb-3",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Document Date:"})}),a.jsx("td",{children:r.documentDate}),a.jsx("td",{children:a.jsx("strong",{children:"Posting Date:"})}),a.jsx("td",{children:r.postingDate})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Reference:"})}),a.jsx("td",{children:r.reference}),a.jsx("td",{children:a.jsx("strong",{children:"Vendor:"})}),a.jsx("td",{children:r.vendor})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Location:"})}),a.jsx("td",{children:r.location}),a.jsx("td",{children:a.jsx("strong",{children:"Receipt Date:"})}),a.jsx("td",{children:r.receiptDate})]})]})}),a.jsx("h6",{children:"Items"}),a.jsxs("table",{className:"table border",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:r.items&&r.items.length>0?r.items.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:A+1}),a.jsx("td",{children:T.materialId}),a.jsx("td",{children:T.description}),a.jsx("td",{children:T.quantity}),a.jsx("td",{children:T.baseUnit}),a.jsx("td",{children:T.deliveryDate}),a.jsx("td",{children:T.lotNo}),a.jsx("td",{children:T.price}),a.jsx("td",{children:(T.quantity*T.price).toFixed(2)})]},T._id?.$oid||A)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No items found"})})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Close"})})]})})})]})};function B8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),[h,m]=w.useState([]),[p,v]=w.useState(!1),[g,b]=w.useState(""),[y,C]=w.useState(!1),[N,k]=w.useState(!1),[S,D]=w.useState(null),[E,T]=w.useState(!1),[A,L]=w.useState("materialId"),[P,O]=w.useState(""),[J,W]=w.useState([]),re=t.category.trim().toLowerCase()==="display",U=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:U,financialYear:Q}}).then(se=>c(se.data)).catch(se=>console.error("Error fetching materials:",se)),Oe.get("/api/locations",{params:{companyId:U,financialYear:Q}}).then(se=>s(se.data)),Oe.get("/api/goodsTransferCategory",{params:{companyId:U,financialYear:Q}}).then(se=>o(se.data)).catch(se=>console.error("Error fetching categories:",se))},[]),w.useEffect(()=>{console.log("Categories loaded:",i),i.forEach(se=>{console.log(`Category: "${se.categoryName}" (length: ${se.categoryName.length})`)})},[i]);const B=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsTransfer",{params:{companyId:U,financialYear:Q}}).then(se=>{console.log("Documents fetched:",se.data),m(se.data)}).catch(se=>{console.error("Error fetching documents",se)})},te=se=>{const ye=se.target.value;console.log(`Selected category: "${ye}" (length: ${ye.length})`);let Ne="",Le=!1;const Je=ye.trim().toLowerCase();Je==="cancel"?Ne=`CNL-${Date.now()}`:Je==="demo"?Ne=`DMP-${Date.now()}`:Je==="display"&&(Le=!0,console.log("Display category selected - enabling document search"),B());const lt=i.find(vt=>vt.categoryName.trim().toLowerCase()===Je);console.log("Selected category object:",lt),console.log("Document number enabled:",Le),r(vt=>({...vt,category:ye,catdesc:lt?.description||"",docnumber:Le?"":Ne})),k(Le)},X=(se,ye)=>{r(Ne=>({...Ne,[se]:ye}))},ce=se=>{const ye=se.target.value;if(r(Ne=>({...Ne,docnumber:ye})),ye.length>=2){const Ne=h.find(Le=>Le.docnumber&&Le.docnumber.toLowerCase().includes(ye.toLowerCase()));Ne&&q(Ne)}},M=()=>{N&&h.length===0&&(console.log("Input field clicked - fetching documents"),B())},q=se=>{console.log("Selected document:",se),r(ye=>({...ye,docnumber:se.docnumber||"",docDate:se.docDate||e,postDate:se.postDate||e,reference:se.reference||"",location:se.location||""})),se.items&&se.items.length>0&&u(se.items),v(!1)},z=(se,ye,Ne)=>{const Le=[...d];Le[se][ye]=Ne,u(Le)},K=()=>{u([...d,{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}])},ee=async se=>{se.preventDefault();const ye={...t,companyId:U,financialYear:Q,items:d,date:e};try{await Oe.post("/api/goodsTransfer",ye),alert("Goods Transfer Saved Successfully!"),r({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),u([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),k(!1),m([])}catch(Ne){alert("Failed to save. See console for error."),console.error(Ne)}},ne=se=>{O(se.target.value);const ye=l.filter(Ne=>Ne[A]?.toLowerCase().includes(se.target.value.toLowerCase()));W(ye)},ae=()=>{W(l)},ie=()=>{O(""),W([])},G=()=>{T(!1),O(""),W([])},de=se=>{const ye=[...d];ye[S]={...ye[S],materialId:se.materialId,description:se.description,baseUnit:se.baseUnit,price:se.price},u(ye),G()},Y=h.filter(se=>!y&&!g?!1:(se.docnumber?.toLowerCase()||"").includes(g.toLowerCase())),oe=()=>{b(""),C(!0),h.length===0&&B()},Se=()=>{b(""),C(!1)},ue=se=>{b(se.target.value),C(!1)};return a.jsxs("div",{className:"container p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Delivery Challan"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Delivery Challan"})]})})]})}),a.jsxs("form",{onSubmit:ee,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:t.category,onChange:te,children:[a.jsx("option",{value:"",children:"Select"}),i.map((se,ye)=>a.jsx("option",{value:se.categoryName,children:se.categoryName},ye))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{className:"form-control form-control-sm",value:t.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Document No"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:t.docnumber,onChange:ce,onClick:M,readOnly:!N,placeholder:N?"Enter document number...":""}),N&&a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{h.length===0&&B(),v(!0)},children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.docDate,onChange:se=>X("docDate",se.target.value)})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Posting Date"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.postDate,onChange:se=>X("postDate",se.target.value)})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"REF"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{className:"form-control form-control-sm",value:t.reference,onChange:se=>X("reference",se.target.value)})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:t.location,onChange:se=>X("location",se.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),n.map(se=>a.jsx("option",{value:se.name||se.locationName||se._id,children:se.name||se.locationName||se._id},se._id||se.id||se.name))]})})]})})]})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:d.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:ye+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:se.materialId,readOnly:!0}),!re&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{D(ye),T(!0)},children:""})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:se.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:se.quantity,onChange:re?void 0:Ne=>z(ye,"quantity",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:se.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,type:"date",value:se.deliveryDate,onChange:re?void 0:Ne=>z(ye,"deliveryDate",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:se.lotNo,onChange:re?void 0:Ne=>z(ye,"lotNo",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:se.price,onChange:re?void 0:Ne=>z(ye,"price",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:se.text,onChange:re?void 0:Ne=>z(ye,"text",Ne.target.value),readOnly:re,disabled:re})})]},ye))})]})}),!re&&a.jsx("button",{type:"button",className:"btn btn-sm btn-secondary mb-2 mt-2",onClick:K,children:"+ Add Row"})]})]}),!re&&a.jsx("div",{className:"text-end",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),E&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:G})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:se=>L(se.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:P,onChange:ne})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ae,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),J.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:J.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:J.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:se.materialId})}),a.jsx("td",{children:se.description}),a.jsx("td",{children:se.baseUnit}),a.jsx("td",{children:se.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(se),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:P?`No materials found for "${P}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:G,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:g,onChange:ue})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:oe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(g||y)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Se,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Y.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Y.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:se.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:se.category})}),a.jsx("td",{children:se.location}),a.jsx("td",{children:se.docDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>q(se),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g?`No documents found for "${g}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function U8(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState([]),u=e.filter(h=>{const m=h.description.toLowerCase().includes(r.toLowerCase())||h.materialId.toLowerCase().includes(r.toLowerCase());console.log("matchesSearch",s);const p=s?h.categoryId?._id===s:!0;return m&&p});return w.useEffect(()=>{(async()=>{try{const p=await Oe.get("/api/category",{params:{companyId:o}});d(p.data),console.log("Categories fetched:",p.data)}catch(p){console.error("Failed to fetch categories:",p)}})(),(async()=>{try{console.log("Fetching stock for companyId:",o,"and financialYear:",l);const p=await Oe.get("/api/stock/data",{params:{companyId:o,financialYear:l}});console.log("Stock data fetched:",p.data),t(p.data),console.log("Stock data fetched:",p.data)}catch(p){console.error("Failed to fetch stock:",p)}})()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Stock Inventory"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Stock Inventory"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:" Search by Description or Material No",value:r,onChange:h=>n(h.target.value)})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",value:s,onChange:h=>i(h.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),c.map(h=>a.jsx("option",{value:h._id,children:h.categoryName},h._id))]})})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[a.jsx("thead",{className:"table-primary text-center",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Lot Number"}),a.jsx("th",{children:"Updated At"})]})}),a.jsx("tbody",{children:u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:"No stock found."})}):u.map((h,m)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:m+1}),a.jsx("td",{children:h.materialId||h.matno}),a.jsx("td",{children:h.description||h.matdesc}),a.jsx("td",{children:h.categoryId?.categoryName}),a.jsx("td",{className:"text-center",children:h.baseUnit||h.uom}),a.jsx("td",{className:"text-end",children:h.quantityAvailable??h.quantity}),a.jsx("td",{className:"text-center",children:a.jsx("span",{className:`badge ${(h.status||(h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="In Stock"?"bg-success":(h.status||(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="Low Stock"?"bg-warning text-dark":"bg-danger"}`,children:h.status||((h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")})}),a.jsx("td",{children:h.location||"-"}),a.jsx("td",{children:h.lotNumber||"-"}),a.jsx("td",{children:h.updatedAt?new Date(h.updatedAt).toLocaleString():"-"})]},m))})]})})})]})]})}const yE=10,_5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),[o,l]=w.useState(!0),[c,d]=w.useState(null),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),w.useEffect(()=>{m()},[]);const m=async()=>{try{const k=(await Oe.get("/api/invoiceform",{params:{companyId:u,financialYear:h}})).data.sort((S,D)=>new Date(D.createdAt)-new Date(S.createdAt));t(k),d(null)}catch(N){d("Failed to fetch invoices"),console.error(N)}finally{l(!1)}},p=N=>{n(N.target.value),i(1)},v=w.useMemo(()=>r?e.filter(N=>[N.docnumber,N.vendor,N.location,N.invoiceRef,N.reference].join(" ").toLowerCase().includes(r.toLowerCase())):e,[r,e]),g=Math.ceil(v.length/yE),b=w.useMemo(()=>{const N=(s-1)*yE;return v.slice(N,N+yE)},[v,s]),y=N=>{N<1||N>g||i(N)},C=N=>{const k=`
    <html>
      <head>
        <title>Invoice - ${N.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Invoice Document</h2>
        <p><strong>Document No:</strong> ${N.docnumber}</p>
        <p><strong>Vendor:</strong> ${N.vendor}</p>
        <p><strong>Location:</strong> ${N.location}</p>
        <p><strong>Reference:</strong> ${N.reference||"-"}</p>
        <p><strong>Invoice Ref:</strong> ${N.invoiceRef||"-"}</p>
        <p><strong>Date:</strong> ${new Date(N.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${N.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId||"DEMO"}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${N.totalAmount?.toFixed(2)||"-"}</p>
          <p>Discount: ${N.discount?.toFixed(2)||"0.00"}</p>
          <p>Net Amount: ${N.netAmount?.toFixed(2)||"-"}</p>
          <p>CGST (%): ${N.cgst}%</p>
          <p>SGST (%): ${N.sgst}%</p>
          <p>IGST (%): ${N.igst}%</p>
          <p><strong>Final Total: ${N.finalTotal?.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):c?a.jsx("div",{className:"alert alert-danger",children:c}):a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between ",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Search invoices...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Invoice Ref"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.docnumber}),a.jsx("td",{children:N.vendor}),a.jsx("td",{children:N.location}),a.jsx("td",{children:N.reference||"-"}),a.jsx("td",{children:N.invoiceRef||"-"}),a.jsx("td",{children:new Date(N.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["",N.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(N),className:"btn btn-sm btn-primary",children:"Print"})})]},N._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s-1),children:""})}),Array.from({length:g},(N,k)=>a.jsx("li",{className:`page-item ${s===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${s===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s+1),children:""})})]})})]})};function E5e(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState([]),[h,m]=w.useState({}),[p,v]=w.useState(0),g=Xu(),[b,y]=w.useState(null),[C,N]=w.useState(!1),[k,S]=w.useState(!1),[D,E]=w.useState(null),[T,A]=w.useState("po"),[L,P]=w.useState([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),O=localStorage.getItem("selectedCompanyId"),J=localStorage.getItem("financialYear"),W=localStorage.getItem("selectedCompanyId"),[re,U]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[Q,B]=w.useState(""),[te,X]=w.useState("poNumber"),[ce,M]=w.useState(!1),[q,z]=w.useState(""),[K,ee]=w.useState("name1"),[ne,ae]=w.useState(!1),[ie,G]=w.useState(!1),[de,Y]=w.useState("materialId"),[oe,Se]=w.useState(""),[ue,se]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:O,financialYear:J}}).then(Ae=>r(Ae.data)).catch(Ae=>console.error("Error fetching POs:",Ae)),Oe.get("/api/vendors",{params:{companyId:O,financialYear:J}}).then(Ae=>s(Ae.data)).catch(Ae=>console.error("Error fetching vendors:",Ae)),Oe.get("/api/material",{params:{companyId:O,financialYear:J}}).then(Ae=>o(Ae.data)).catch(Ae=>console.error("Error fetching materials:",Ae)),Oe.get("/api/invoicecategory").then(Ae=>c(Ae.data)).catch(Ae=>console.error("Error fetching categories:",Ae)),Oe.get("/api/tax").then(Ae=>u(Ae.data)).catch(Ae=>console.error("Error fetching tax:",Ae))},[]);const ye=Ae=>{console.log("Selected PO:",Ae),y(Ae),U(Ke=>({...Ke,vendor:Ae.vendor||"",location:Ae.deliveryLocation||"",priceUnit:Ae.priceUnit||""})),N(!1)},Ne=Ae=>{U(Ke=>({...Ke,vendor:Ae.name1})),S(!1)},Le=Ae=>{if(D!==null&&b?.items){const Ke=[...b.items];Ke[D]&&(Ke[D]={...Ke[D],materialId:Ae.materialId,description:Ae.description,baseUnit:Ae.baseUnit,price:Ae.price,priceUnit:Ae.priceUnit||re.priceUnit},y(Ge=>({...Ge,items:Ke})))}G(!1)},Je=Ae=>{const Ke=Ae.target.value,Ge=l.find(ct=>ct.categoryName===Ke);U(ct=>({...ct,category:Ke,catdesc:Ge?.description||""}))},lt=(Ae,Ke,Ge)=>{const ct=[...b.items];ct[Ae][Ke]=Ge,y({...b,items:ct})},vt=(Ae,Ke,Ge)=>{const ct=[...L];if(ct[Ae][Ke]=Ge,Ke==="quantity"||Ke==="price"){const Mt=parseFloat(ct[Ae].quantity||0),Ie=parseFloat(ct[Ae].price||0);ct[Ae].amount=Mt*Ie}P(ct)},Re=()=>{P([...L,{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}])},ht=Ae=>{if(L.length>1){const Ke=L.filter((Ge,ct)=>ct!==Ae);P(Ke)}},At=Ae=>{A(Ae),Ae==="misc"&&(y(null),U(Ke=>({...Ke,vendor:"",location:""})))},Tt=async Ae=>{if(Ae.preventDefault(),T==="po"&&!b)return alert("Please select a Purchase Order.");if(T==="misc"&&!re.vendor)return alert("Please select a vendor for miscellaneous invoice.");const Ke={...re,invoiceType:T,purchaseOrderId:T==="po"?b._id:null,items:T==="po"?b.items:L,receiptDate:e,taxCode:h.taxCode,taxName:h.taxName,cgst:Xe,sgst:Be,igst:He,companyId:W,financialYear:J,totalAmount:xe,discount:p,netAmount:De,finalTotal:ft,balance:ft};try{await Oe.post("/api/invoiceform",Ke),alert("Invoice saved successfully!"),g("/InvoiceList"),U({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",priceUnit:"",balance:""}),y(null),m({}),v(0),P([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),A("po")}catch(Ge){console.error("Error saving invoice:",Ge),alert("Failed to save invoice")}},Ht=t.filter(Ae=>!ce&&!Q?!1:(Ae[te]?.toLowerCase()||"").includes(Q.toLowerCase())),pe=n.filter(Ae=>!ne&&!q?!1:(Ae[K]?.toLowerCase()||"").includes(q.toLowerCase())),he=i.filter(Ae=>!ue&&!oe?!1:(Ae[de]?.toLowerCase()||"").includes(oe.toLowerCase())),xe=T==="po"?b?.items?.reduce((Ae,Ke)=>Ae+parseFloat(Ke.quantity||0)*parseFloat(Ke.price||0),0)||0:L.reduce((Ae,Ke)=>Ae+parseFloat(Ke.amount||0),0)||0,me=parseFloat(p||0),De=xe-me,Ye=parseFloat(h.cgst||0),jt=parseFloat(h.sgst||0),Qe=parseFloat(h.igst||0),Xe=parseFloat((Ye/100*De).toFixed(2)),Be=parseFloat((jt/100*De).toFixed(2)),He=parseFloat((Qe/100*De).toFixed(2)),ft=parseFloat((De+Xe+Be+He).toFixed(2));return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:Tt,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"row mb-3",children:a.jsxs("div",{className:"col-md-12",children:[a.jsx("label",{className:"form-label",children:"Invoice Type:"}),a.jsxs("div",{className:"d-flex gap-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"poInvoice",value:"po",checked:T==="po",onChange:Ae=>At(Ae.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"poInvoice",children:"Purchase Order Invoice"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"miscInvoice",value:"misc",checked:T==="misc",onChange:Ae=>At(Ae.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"miscInvoice",children:"Miscellaneous Invoice"})]})]})]})}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("select",{className:"form-select",value:re.category,onChange:Je,children:[a.jsx("option",{value:"",children:"Select"}),l.map(Ae=>a.jsx("option",{value:Ae.categoryName,children:Ae.categoryName},Ae._id))]})})]})}),T==="po"&&a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",placeholder:"Enter PO Number",className:"form-control form-control-sm",value:b?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>N(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Vendor :"})}),a.jsx("div",{className:"col-md-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Vendor Name",value:re.vendor,readOnly:T==="po"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>S(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Tax Code :"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("select",{className:"form-select",value:h.taxCode||"",onChange:Ae=>{const Ke=d.find(Ge=>Ge.taxCode===Ae.target.value);m(Ke||{})},children:[a.jsx("option",{value:"",children:"Select"}),d.map(Ae=>a.jsxs("option",{value:Ae.taxCode,children:[Ae.taxCode," - ",Ae.taxName]},Ae._id))]})})]})})," ",a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Tax Name :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Tax Name",value:h.taxName||"",onChange:Ae=>m(Ke=>({...Ke,taxName:Ae.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-5",children:a.jsx("label",{className:"form-label",children:"Document Date :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:re.documentDate,onChange:Ae=>U(Ke=>({...Ke,documentDate:Ae.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Posting_Date:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:re.postingDate,onChange:Ae=>U(Ke=>({...Ke,postingDate:Ae.target.value}))})})]})}),a.jsxs("div",{className:"col-md-3",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Reference:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Reference",value:re.reference,onChange:Ae=>U(Ke=>({...Ke,reference:Ae.target.value}))})})]}),"       "]}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",placeholder:"Enter Location",className:"form-control",value:re.location,onChange:Ae=>U(Ke=>({...Ke,location:Ae.target.value})),readOnly:T==="po"})})]})})," ",a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Invoice Ref :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Invoice Reference",value:re.invoiceRef,onChange:Ae=>U(Ke=>({...Ke,invoiceRef:Ae.target.value}))})})]})})]})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:T==="po"?a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(b?.items?.length?b.items:[{}]).map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ke+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Ae.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(Ke),G(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.hsnNo||"",onChange:Ge=>lt(Ke,"hsnNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ae.quantity||"",onChange:Ge=>lt(Ke,"quantity",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Ae.deliveryDate,onChange:Ge=>lt(Ke,"deliveryDate",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.lotNo||"",onChange:Ge=>lt(Ke,"lotNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ae.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.priceUnit||"",readOnly:!0})})]},Ke))})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h6",{children:"Miscellaneous Items"}),a.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Re,children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:L.map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ke+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.description,onChange:Ge=>vt(Ke,"description",Ge.target.value),placeholder:"Enter description"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.hsnNo,onChange:Ge=>vt(Ke,"hsnNo",Ge.target.value),placeholder:"HSN Code"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ae.quantity,onChange:Ge=>vt(Ke,"quantity",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ae.baseUnit,onChange:Ge=>vt(Ke,"baseUnit",Ge.target.value),placeholder:"Unit"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ae.price,onChange:Ge=>vt(Ke,"price",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ae.amount.toFixed(2),readOnly:!0})}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>ht(Ke),disabled:L.length===1,children:a.jsx("i",{className:"fas fa-trash"})})})]},Ke))})]})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card  p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:xe.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:p,onChange:Ae=>v(parseFloat(Ae.target.value)||0)})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:De.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.cgst||"",onChange:Ae=>m(Ke=>({...Ke,cgst:Ae.target.value}))})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.sgst||"",onChange:Ae=>m(Ke=>({...Ke,sgst:Ae.target.value}))})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.igst||"",onChange:Ae=>m(Ke=>({...Ke,igst:Ae.target.value}))})]})]}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{className:"form-label",children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:ft.toFixed(2),readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save Invoice"})})]}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:K,onChange:Ae=>ee(Ae.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:q,onChange:Ae=>z(Ae.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ae(!0),children:"View All"}),(q||ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{z(""),ae(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ae.vendorId})}),a.jsx("td",{children:Ae.name1}),a.jsx("td",{children:Ae.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:q?`No vendors found for "${q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&C&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>N(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:te,onChange:Ae=>X(Ae.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${te}`,value:Q,onChange:Ae=>B(Ae.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>M(!0),children:"View All"}),(Q||ce)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{B(""),M(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ht.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ht.map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ae.poNumber})}),a.jsx("td",{children:Ae.vendor}),a.jsx("td",{children:Ae.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ye(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Q?`No purchase orders found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&ie&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>G(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:de,onChange:Ae=>Y(Ae.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${de}`,value:oe,onChange:Ae=>Se(Ae.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>se(!0),children:"View All"}),(oe||ue)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Se(""),se(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ae.materialId})}),a.jsx("td",{children:Ae.description}),a.jsx("td",{children:Ae.baseUnit}),a.jsx("td",{children:Ae.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Le(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:oe?`No materials found for "${oe}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function D5e(){const e=new Date().toISOString().split("T")[0];Xu();const[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState({}),[d,u]=w.useState(0),[h,m]=w.useState([]),[p,v]=w.useState(null),[g,b]=w.useState(!1),[y,C]=w.useState(!1),[N,k]=w.useState(null),[S,D]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[E,T]=w.useState(""),[A,L]=w.useState("soNumber"),[P,O]=w.useState(!1),[J,W]=w.useState([]),[re,U]=w.useState("name1"),[Q,B]=w.useState(""),[te,X]=w.useState(!1),[ce,M]=w.useState(!1),[q,z]=w.useState("materialId"),[K,ee]=w.useState(""),[ne,ae]=w.useState(!1),ie=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear"),de=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:ie,financialYear:G}}).then(Qe=>m(Qe.data)).catch(Qe=>console.error("Error fetching sales orders",Qe)),Oe.get("/api/customers",{params:{companyId:ie,financialYear:G}}).then(Qe=>W(Qe.data)).catch(Qe=>console.error("Error fetching customers",Qe)),Oe.get("/api/material",{params:{companyId:ie,financialYear:G}}).then(Qe=>r(Qe.data)).catch(Qe=>console.error("Error fetching materials:",Qe)),Oe.get("/api/billingcategory",{params:{companyId:ie,financialYear:G}}).then(Qe=>s(Qe.data)).catch(Qe=>console.error("Error fetching categories:",Qe)),Oe.get("/api/tax",{params:{companyId:ie,financialYear:G}}).then(Qe=>o(Qe.data)).catch(Qe=>console.error("Error fetching tax:",Qe))},[]);const Y=Qe=>{v(Qe),D(Xe=>({...Xe,customer:Qe.sales||Qe.customer||Qe.customerName,location:Qe.deliveryLocation||""})),b(!1)},oe=Qe=>{D(Xe=>({...Xe,customer:Qe.name1})),C(!1)},Se=Qe=>{if(N!==null&&p?.items){const Xe=[...p.items];Xe[N]&&(Xe[N]={...Xe[N],materialId:Qe.materialId,description:Qe.description,baseUnit:Qe.baseUnit,price:Qe.price,priceUnit:Qe.priceUnit||S.priceUnit},v(Be=>({...Be,items:Xe})))}M(!1)},ue=Qe=>{const Xe=Qe.target.value,Be=n.find(He=>He.categoryName===Xe);D(He=>({...He,category:Xe,catdesc:Be?.description||""}))},se=(Qe,Xe,Be)=>{const He=[...p.items];He[Qe][Xe]=Be,v({...p,items:He})},ye=p?.items?.reduce((Qe,Xe)=>Qe+parseFloat(Xe.quantity||0)*parseFloat(Xe.price||0),0)||0,Ne=parseFloat(d||0),Le=ye-Ne,Je=parseFloat(l.cgst||0),lt=parseFloat(l.sgst||0),vt=parseFloat(l.igst||0),Re=Je/100*Le,ht=lt/100*Le,At=vt/100*Le,Tt=parseFloat((Le+Re+ht+At).toFixed(2)),Ht=async Qe=>{if(Qe.preventDefault(),!p)return alert("Please select a Purchase Order.");const Xe={...S,salesOrderId:p._id,items:p.items,receiptDate:e,taxCode:l.taxCode,taxName:l.taxName,companyId:de,financialYear:G,cgst:Re,sgst:ht,igst:At,totalAmount:ye,discount:d,netAmount:Le,finalTotal:Tt,balance:Tt};console.log(Xe.finalTotal);try{await Oe.post("/api/billingform",Xe),alert("billing saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",priceUnit:"",balance:""}),v(null),c({}),u(0)}catch(Be){console.error("Error saving biiling:",Be),alert("Failed to save billing")}},pe=h.filter(Qe=>!P&&!E?!1:(Qe[A]?.toLowerCase()||"").includes(E.toLowerCase())),he=J.filter(Qe=>!te&&!Q?!1:(Qe[re]?.toLowerCase()||"").includes(Q.toLowerCase())),xe=t.filter(Qe=>!ne&&!K?!1:(Qe[q]?.toLowerCase()||"").includes(K.toLowerCase())),me=()=>{T(""),O(!0)},De=()=>{T(""),O(!1)},Ye=()=>{B(""),X(!0)},jt=()=>{B(""),X(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:Ht,children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("div",{className:"row ",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Category :"}),a.jsxs("select",{className:"form-select",value:S.category,onChange:ue,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Qe=>a.jsx("option",{value:Qe.categoryName,children:Qe.categoryName},Qe._id))]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Sales Order :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",placeholder:"Search Sales Order",value:p?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Customer :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search Customer",value:S.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>C(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Code :"}),a.jsxs("select",{className:"form-select",value:l.taxCode||"",onChange:Qe=>{const Xe=i.find(Be=>Be.taxCode===Qe.target.value);c(Xe||{})},children:[a.jsx("option",{value:"",children:"Select"}),i.map(Qe=>a.jsxs("option",{value:Qe.taxCode,children:[Qe.taxCode," - ",Qe.taxName]},Qe._id))]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"180px"},children:"Document Date :"}),a.jsx("input",{type:"date",className:"form-control",value:S.documentDate,onChange:Qe=>D(Xe=>({...Xe,documentDate:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"180px"},children:"Posting Date:"}),a.jsx("input",{type:"date",className:"form-control",value:S.postingDate,onChange:Qe=>D(Xe=>({...Xe,postingDate:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Reference :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Reference",value:S.reference,onChange:Qe=>D(Xe=>({...Xe,reference:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Location :"}),a.jsx("input",{type:"text",placeholder:"Location",className:"form-control",value:S.location,readOnly:!0})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Billing Ref :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Billing Reference",value:S.BillingRef,onChange:Qe=>D(Xe=>({...Xe,BillingRef:Qe.target.value}))})]})})]})})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(p?.items?.length?p.items:[{}]).map((Qe,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:Xe+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Qe.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{k(Xe),M(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.hsnNo||"",onChange:Be=>se(Xe,"hsnNo",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Qe.quantity||"",onChange:Be=>se(Xe,"quantity",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Qe.deliveryDate,onChange:Be=>se(Xe,"deliveryDate",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.lotNo||"",onChange:Be=>se(Xe,"lotNo",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Qe.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.priceUnit||"",readOnly:!0})})]},Xe))})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 mb-2",children:[a.jsx("label",{children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:ye.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:d,onChange:Qe=>u(parseFloat(Qe.target.value)||0)})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:Le.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.cgst||"",onChange:Qe=>c(Xe=>({...Xe,cgst:Qe.target.value}))})]}),a.jsxs("div",{className:"col-xl-6 mb-2",children:[a.jsx("label",{children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.sgst||"",onChange:Qe=>c(Xe=>({...Xe,sgst:Qe.target.value}))})]}),a.jsxs("div",{className:"col-xl-6 mb-2",children:[a.jsx("label",{children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.igst||"",onChange:Qe=>c(Xe=>({...Xe,igst:Qe.target.value}))})]})]}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:Tt,readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Qe=>L(Qe.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:Qe=>T(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:me,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:De,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((Qe,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Qe.soNumber})}),a.jsx("td",{children:Qe.sales||Qe.customer||Qe.customerName}),a.jsx("td",{children:Qe.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Y(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No sales orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:re,onChange:Qe=>U(Qe.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${re}`,value:Q,onChange:Qe=>B(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(Q||te)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:jt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Qe,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Qe.customerId})}),a.jsx("td",{children:Qe.name1}),a.jsx("td",{children:Qe.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>oe(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Q?`No customers found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),ce&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:q,onChange:Qe=>z(Qe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${q}`,value:K,onChange:Qe=>ee(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ae(!0),children:"View All"}),(K||ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{ee(""),ae(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((Qe,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Qe.materialId})}),a.jsx("td",{children:Qe.description}),a.jsx("td",{children:Qe.baseUnit}),a.jsx("td",{children:Qe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Se(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:K?`No materials found for "${K}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const jE=10,A5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(""),[c,d]=w.useState(1),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),w.useEffect(()=>{m()},[]);const m=async()=>{try{const N=await Oe.get("/api/billingform",{params:{companyId:u,financialYear:h}});t(N.data),i(null)}catch(N){i("Failed to fetch billing data"),console.error(N)}finally{n(!1)}},p=N=>{l(N.target.value),d(1)},v=w.useMemo(()=>o?e.filter(N=>[N.docnumber,N.customer,N.reference,N.BillingRef,N.location].join(" ").toLowerCase().includes(o.toLowerCase())):e,[o,e]),g=Math.ceil(v.length/jE),b=w.useMemo(()=>{const N=(c-1)*jE;return v.slice(N,N+jE)},[v,c]),y=N=>{N<1||N>g||d(N)},C=N=>{const k=`
    <html>
      <head>
        <title>Billing - ${N.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Billing Document</h2>
        <p><strong>Document No:</strong> ${N.docnumber}</p>
        <p><strong>Customer:</strong> ${N.customer}</p>
        <p><strong>Location:</strong> ${N.location}</p>
        <p><strong>Reference:</strong> ${N.reference}</p>
        <p><strong>Invoice Ref:</strong> ${N.BillingRef}</p>
        <p><strong>Date:</strong> ${new Date(N.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${N.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${N.totalAmount.toFixed(2)}</p>
          <p>Discount: ${N.discount.toFixed(2)}</p>
          <p>Net Amount: ${N.netAmount.toFixed(2)}</p>
          <p>CGST (%): ${N.cgst}%</p>
          <p>SGST (%): ${N.sgst}%</p>
          <p>IGST (%): ${N.igst}%</p>
          <p><strong>Final Total: ${N.finalTotal.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsx("div",{className:"alert alert-danger",children:s}):a.jsxs("div",{className:"content mt-4",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:o,onChange:p,placeholder:"Search billing...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Ref"}),a.jsx("th",{children:"BillingRef"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.docnumber}),a.jsx("td",{children:N.customer}),a.jsx("td",{children:N.location}),a.jsx("td",{children:N.reference}),a.jsx("td",{children:N.BillingRef}),a.jsx("td",{children:new Date(N.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["",N.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(N),className:"btn btn-sm btn-primary",children:"Print"})})]},N._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c-1),children:""})}),Array.from({length:g},(N,k)=>a.jsx("li",{className:`page-item ${c===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${c===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c+1),children:""})})]})})]})},$8={productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",taxRate:""};function T5e(){const[e,t]=w.useState("Outward"),[r,n]=w.useState({type:"",number:"",date:""}),[s,i]=w.useState({name:"",gstin:"",address:"",state:""}),[o,l]=w.useState({name:"",gstin:"",address:"",state:""}),[c,d]=w.useState([{...$8}]),[u,h]=w.useState({mode:"",transporterId:"",vehicleNo:"",distance:""}),[m,p]=w.useState(!1),[v,g]=w.useState([]);w.useEffect(()=>{const S=JSON.parse(localStorage.getItem("invoices"))||[];g(S)},[]);const b=(S,D,E)=>{const T=[...c];T[S][D]=E,d(T)},y=()=>d([...c,{...$8}]),C=S=>d(c.filter((D,E)=>E!==S)),N=S=>{S.preventDefault(),console.log("e-Way Bill Data:",{transactionType:e,document:r,consignor:s,consignee:o,items:c,transport:u}),alert("e-Way Bill data logged to console.")},k=S=>{n({type:S.category,number:S.docnumber,date:S.docdate}),i({name:"Your Company",gstin:"",address:"",state:""}),l({name:S.customer,gstin:"",address:S.location,state:""});const D=S.items.map(E=>({productName:E.matdesc,hsnCode:"",quantity:E.matqty,unit:E.unit,taxableValue:E.price*E.matqty,taxRate:18}));d(D),p(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("h3",{className:"mb-4",children:"e-Way Bill Entry"}),a.jsx("button",{className:"btn btn-outline-primary mb-3",onClick:()=>p(!0),children:"Search Billing"}),a.jsxs("form",{onSubmit:N,children:[a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Transaction Type"}),a.jsxs("div",{className:"col-sm-9 d-flex align-items-center",children:[a.jsxs("div",{className:"form-check me-3",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"outward",checked:e==="Outward",onChange:()=>t("Outward")}),a.jsx("label",{className:"form-check-label",htmlFor:"outward",children:"Outward"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"inward",checked:e==="Inward",onChange:()=>t("Inward")}),a.jsx("label",{className:"form-check-label",htmlFor:"inward",children:"Inward"})]})]})]}),a.jsx("h5",{children:"Document Details"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentType",className:"col-sm-3 col-form-label",children:"Document Type"}),a.jsx("input",{type:"text",className:"form-control",id:"documentType",placeholder:"Invoice, Bill of Supply, etc.",value:r.type,onChange:S=>n({...r,type:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentNumber",className:"col-sm-3 col-form-label",children:"Document Number"}),a.jsx("input",{type:"text",className:"form-control",id:"documentNumber",value:r.number,onChange:S=>n({...r,number:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentDate",className:"col-sm-3 col-form-label",children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",id:"documentDate",value:r.date,onChange:S=>n({...r,date:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignor (From)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorName",value:s.name,onChange:S=>i({...s,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:s.gstin,onChange:S=>i({...s,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorAddress",value:s.address,onChange:S=>i({...s,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consignorState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorState",placeholder:"State name or code",value:s.state,onChange:S=>i({...s,state:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignee (To)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeName",value:o.name,onChange:S=>l({...o,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:o.gstin,onChange:S=>l({...o,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeAddress",value:o.address,onChange:S=>l({...o,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consigneeState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeState",placeholder:"State name or code",value:o.state,onChange:S=>l({...o,state:S.target.value}),required:!0})]})]})]}),a.jsx("h5",{children:"Item Details"}),a.jsxs("table",{className:"table table-bordered table-hover table-sm mb-3",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Product Name"}),a.jsx("th",{children:"HSN Code"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Taxable Value"}),a.jsx("th",{children:"Tax Rate (%)"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.productName,onChange:E=>b(D,"productName",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.hsnCode,onChange:E=>b(D,"hsnCode",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.quantity,onChange:E=>b(D,"quantity",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.unit,onChange:E=>b(D,"unit",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.taxableValue,onChange:E=>b(D,"taxableValue",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",max:"100",className:"form-control",value:S.taxRate,onChange:E=>b(D,"taxRate",E.target.value),required:!0})}),a.jsx("td",{children:c.length>1&&a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>C(D),children:"Remove"})})]},D))})]}),a.jsx("button",{type:"button",className:"btn btn-secondary mb-4",onClick:y,children:"Add Item"}),a.jsx("h5",{children:"Transport Details"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transportMode",className:"col-sm-3 col-form-label",children:"Mode of Transport"}),a.jsx("div",{className:"col-sm-9",children:a.jsxs("select",{id:"transportMode",className:"form-select",value:u.mode,onChange:S=>h({...u,mode:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select mode"}),a.jsx("option",{value:"Road",children:"Road"}),a.jsx("option",{value:"Rail",children:"Rail"}),a.jsx("option",{value:"Air",children:"Air"}),a.jsx("option",{value:"Ship",children:"Ship"})]})})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transporterId",className:"col-sm-3 col-form-label",children:"Transporter ID / Vehicle No."}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"text",id:"transporterId",className:"form-control",placeholder:"Transporter ID or Vehicle Number",value:u.transporterId,onChange:S=>h({...u,transporterId:S.target.value}),required:!0})})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"distance",className:"col-sm-3 col-form-label",children:"Distance (km)"}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"number",min:"0",id:"distance",className:"form-control",value:u.distance,onChange:S=>h({...u,distance:S.target.value}),required:!0})})]}),a.jsx("button",{type:"submit",className:"btn btn-primary mt-4",children:"Generate e-Way Bill"})]}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Select Billing Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:v.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>k(S),children:"Select"})})]},D))})]})})]})})})]})]})}const I5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState(!1),[m,p]=w.useState(""),[v,g]=w.useState({}),[b,y]=w.useState(""),[C,N]=w.useState([]),[k,S]=w.useState(1),[D]=w.useState(5),[E,T]=w.useState(!1),[A,L]=w.useState(!1);w.useEffect(()=>{if(e.length>0){const ye=e.filter(Ne=>Ne.roleId.toLowerCase().includes(b.toLowerCase())||Ne.roleName.toLowerCase().includes(b.toLowerCase()));N(ye),S(1)}},[b,e]);const P={Dashboard:["Dashboard"],"Master Data":["Material Master","Customer Master","Vendor Master","Customer Price List","Vendor Price List","Tax List","Location Master","Process List Master","General Condition Master"],MRP:["MRP"],Category:["Material Category","Customer Category","Vendor Category","Purchase Indent Category","Sales Indent Category","PO Category","Sales RFQ Category","Sales Order Category","Goods Receipt Category","Goods Issue Category","Purchase Contract Category","Billing Category","Invoice Category","Purchase Quotation Category","Sale Contract Category","Transfer Category"],Purchase:["Purchase Indent","Purchase Quotation","Purchase Contract","Purchase Order","Purchase Indent List","Purchase Quotations List","Purchase Contract List","Purchase Order List"],Sales:["Sales Indent","Sales Quotation Form","Sales Contract","Sales Order","Sales Indent List","Sales Quotations List","Sales Contract List","Sales Order List"],Inventory:["Material Receipt","Material Receipt List","Material Issue","Material Transfer","Material Issue List","Stock List"],Invoice:["Invoice Form","Invoice List"],Billing:["Billing Form","Billing List"],Accounts:["GST","Ledger","Payments"],CRM:["Contacts List","Leads","Proposals","Sources","Lost Reason","Contact Stage","Industry","Calls"],"Project Management":["Projects","Tasks","Milestones","Time Entries"],Campaigns:["Campaigns","Analytics"],HRMS:["Designation","Department","Employee","LeaveRequests","LeaveRequestManagement","Payroll","AttendanceRegister","AttendanceReports","AttendanceTaking"]},O=Object.keys(P);w.useEffect(()=>{J(),W()},[]);const J=async()=>{try{const ye=await Oe.get("/api/roles");t(ye.data)}catch(ye){console.error("Error fetching roles:",ye)}},W=async()=>{try{const ye=await Oe.get("/api/roles/next-id");p(ye.data.nextId),c||n(ye.data.nextId)}catch(ye){console.error("Error fetching next role ID:",ye),p("R-XX")}},re=()=>{const ye={};return/^[A-Za-z\s]+$/.test(s)||(ye.roleName="Role name should contain only alphabets and spaces"),o.length===0&&(ye.permissions="At least one permission is required"),g(ye),Object.keys(ye).length===0},U=async ye=>{if(ye.preventDefault(),!re())return;if(E){g({...v,roleName:"Role name already exists"}),alert("Role name already exists so choose another name");return}const Ne={roleId:r,roleName:s,permissions:o};try{c?(await Oe.put(`/api/roles/${c}`,Ne),alert("Role updated successfully!")):(await Oe.post("/api/roles",Ne),alert("Role created successfully!")),J(),ee(),ae()}catch(Le){console.error("Error saving role:",Le)}},Q=ye=>{d(ye._id),n(ye.roleId),i(ye.roleName),l(ye.permissions||[]),ne()},B=ye=>["SuperAdmin","Telecaller","Faculty","Student"].includes(ye),te=async(ye,Ne)=>{if(B(Ne)){alert(`The role "${Ne}" is a system role and cannot be deleted.`);return}if(window.confirm(`Are you sure you want to delete the role "${Ne}"?`))try{await Oe.delete(`/api/roles/${ye}`),J()}catch(Le){console.error("Error deleting role:",Le)}},X=k*D,ce=X-D,M=C.slice(ce,X),q=Math.ceil(C.length/D),z=ye=>S(ye),K=ye=>{y(ye.target.value)},ee=()=>{g({}),c?n(""):W(),i(""),l([]),d(null),T(!1)},ne=()=>{c||W(),L(!0)},ae=()=>{h(!1),L(!1),ee()},ie=ye=>{const Ne=[...o],Le=P[ye]||[];if(Ne.includes(ye)){const Je=Ne.filter(lt=>lt!==ye&&!Le.includes(lt));l(Je)}else Ne.includes(ye)||Ne.push(ye),Le.forEach(Je=>{Ne.includes(Je)||Ne.push(Je)}),l(Ne);Ne.length>0&&v.permissions&&g({...v,permissions:null})},G=(ye,Ne)=>{const Le=[...o];if(Le.includes(Ne)){const Je=Le.indexOf(Ne);if(Je>-1&&Le.splice(Je,1),!(P[ye]||[]).some(Re=>Le.includes(Re))&&Le.includes(ye)){const Re=Le.indexOf(ye);Re>-1&&Le.splice(Re,1)}}else Le.includes(ye)||Le.push(ye),Le.push(Ne);l(Le),Le.length>0&&v.permissions&&g({...v,permissions:null})},de=ye=>{if(P[ye]){const Ne=P[ye]||[],Le=o.filter(Je=>Je!==ye&&!Ne.includes(Je));l(Le)}else{const Ne=o.filter(Le=>Le!==ye);for(const[Le,Je]of Object.entries(P))if(Je.includes(ye)){if(!Je.some(vt=>vt!==ye&&Ne.includes(vt))&&Ne.includes(Le)){const vt=Ne.indexOf(Le);vt>-1&&Ne.splice(vt,1)}break}l(Ne)}o.length===0&&g({...v,permissions:"At least one permission is required"})},Y=ye=>o.includes(ye),oe=ye=>(P[ye]||[]).every(Le=>o.includes(Le)),Se=ye=>{if(!ye||ye.length===0)return"None";const Ne={};return ye.forEach(Le=>{P[Le]&&(Ne[Le]||(Ne[Le]=[]))}),ye.forEach(Le=>{if(!P[Le]){for(const[Je,lt]of Object.entries(P))if(lt.includes(Le)){Ne[Je]||(Ne[Je]=[]),Ne[Je].push(Le);break}}}),Object.entries(Ne).map(([Le,Je])=>a.jsxs("div",{className:"permission-group mb-1",children:[a.jsx("span",{className:"fw-bold",children:Le}),Je.length>0&&a.jsx("div",{className:"sub-permissions ms-2 small",children:Je.join(", ")})]},Le))},ue=async ye=>{if(!ye){T(!1);return}try{if(c){const Le=e.find(Je=>Je._id===c);if(Le&&Le.roleName===ye){T(!1);return}}const Ne=await Oe.get(`/api/roles/check-name?name=${encodeURIComponent(ye)}`);if(T(Ne.data.exists),Ne.data.exists)g({...v,roleName:"Role name already exists"});else{const Le={...v};Le.roleName==="Role name already exists"&&(delete Le.roleName,g(Le))}}catch(Ne){console.error("Error checking role name:",Ne)}},se=ye=>{const Ne=ye.target.value;if(i(Ne),!/^[A-Za-z\s]*$/.test(Ne))g({...v,roleName:"Role name should contain only alphabets and spaces"});else{const Le={...v};delete Le.roleName,g(Le),Ne.trim()&&ue(Ne)}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"",children:a.jsx("div",{className:"page-wrapper cardhead",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("h4",{children:"Access Control"})}),a.jsx("div",{className:"col-xl-5 float-end ms-auto",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"head-icons",children:[a.jsx("a",{href:"/AccessControl","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Refresh",children:a.jsx("i",{className:"ti ti-refresh-dot"})}),a.jsx("a",{href:"javascript:void(0);","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Collapse",id:"collapse-header",children:a.jsx("i",{className:"ti ti-chevrons-up"})})]})})})})]})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"input-group",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Role ID or Role Name",value:b,onChange:K})})}),a.jsx("div",{className:"col-md-3"}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"head-icons",children:a.jsx("button",{className:"btn btn-primary mt-2",type:"button",onClick:()=>{ee(),ne()},children:"Add Role"})})})})})]})}),a.jsx("div",{className:"table-responsive mt-3",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"15%"},children:"Role ID"}),a.jsx("th",{style:{width:"15%"},children:"Role Name"}),a.jsx("th",{style:{width:"40%"},children:"Permissions"}),a.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),a.jsx("tbody",{children:M.length>0?M.map(ye=>a.jsxs("tr",{children:[a.jsx("td",{children:ye.roleId}),a.jsx("td",{children:ye.roleName}),a.jsx("td",{style:{width:"100%"},children:a.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",fontSize:"0.85rem",textWrap:"wrap"},children:Se(ye.permissions)})}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{onClick:()=>Q(ye),className:"btn btn-icon btn-sm btn-soft-info rounded-pill",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>te(ye._id,ye.roleName),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",disabled:B(ye.roleName),style:{opacity:B(ye.roleName)?"0.5":"1",cursor:B(ye.roleName)?"not-allowed":"pointer"},children:a.jsx("i",{className:"feather-trash"})})]})})]},ye._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center",children:"No roles found."})})})]})}),C.length>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",style:{gap:"0px"},children:[a.jsx("li",{className:`page-item ${k===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>z(k-1),disabled:k===1,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})}),a.jsx("li",{className:`page-item ${k===q?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>z(k+1),disabled:k===q,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})})]})})})]})})})}),A&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:c?"Edit Role":"Add New Role"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ae})]}),a.jsx("div",{className:"modal-body p-4",children:a.jsxs("form",{onSubmit:U,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role ID"}),a.jsx("input",{type:"text",className:"form-control",value:c?r:m,disabled:!0}),a.jsx("small",{className:"text-muted",children:"Role ID is automatically generated"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role Name"}),a.jsx("input",{type:"text",className:`form-control ${v.roleName||E?"is-invalid":""}`,value:s,onChange:se,disabled:!!c,placeholder:"Enter role name",required:!0}),v.roleName&&a.jsx("div",{className:"invalid-feedback",children:v.roleName}),!v.roleName&&E&&a.jsx("div",{className:"invalid-feedback",children:"Role name already exists"}),!v.roleName&&!E&&s.trim()&&a.jsx("div",{className:"text-success small mt-1",children:"Role name is available"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Permissions"}),a.jsx("div",{className:`permissions-container p-3 border rounded ${v.permissions?"border-danger":""}`,style:{maxHeight:"400px",overflowY:"auto"},children:O.map(ye=>a.jsxs("div",{className:"permission-item mb-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`perm-${ye}`,checked:o.includes(ye),onChange:()=>ie(ye)}),a.jsx("label",{className:"form-check-label fw-bold",htmlFor:`perm-${ye}`,children:ye}),o.includes(ye)&&a.jsx("span",{className:"ms-2 small",children:oe(ye)?"(All selected)":"(Some selected)"})]}),P[ye]?.length>0&&a.jsx("div",{className:"sub-permissions ms-4 mt-2",children:P[ye].map(Ne=>a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`subperm-${Ne}`,checked:Y(Ne),onChange:()=>G(ye,Ne)}),a.jsx("label",{className:"form-check-label",htmlFor:`subperm-${Ne}`,children:Ne})]},Ne))})]},ye))}),v.permissions&&a.jsx("div",{className:"text-danger small mt-1",children:v.permissions}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Selected Permissions:"}),a.jsx("div",{className:"selected-permissions mt-2",children:o.length>0?o.map(ye=>a.jsxs("span",{className:"badge bg-soft-primary mb-1 m-1",children:[ye," ",a.jsx("button",{type:"button",className:"btn-close btn-close-primary rounded-pill",onClick:()=>de(ye)})]},ye)):a.jsx("span",{className:"text-muted",children:"No permissions selected"})})]})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Role"})]})})]})})})]})})})})};function P5e(){const[e,t]=w.useState(null),[r,n]=w.useState(0),[s,i]=w.useState(0),[o,l]=w.useState("input"),[c,d]=w.useState(0),[u,h]=w.useState(0),[m,p]=w.useState([]),[v,g]=w.useState([]),[b,y]=w.useState([]),[C,N]=w.useState(!0),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(null),[O,J]=w.useState([]),[W,re]=w.useState([]),[U,Q]=w.useState([]),B=localStorage.getItem("selectedCompanyId"),te=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId");const X=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"];w.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:B,financialYear:te}}).then(z=>g(z.data)).catch(z=>console.error("Error fetching locations",z)),Oe.get("/api/billingform",{params:{companyId:B,financialYear:te}}).then(z=>E(z.data)).catch(z=>console.error("Error fetching customer invoices",z)),y(X)},[]),w.useEffect(()=>{if(!te){Q([]);return}const[z,K]=te.split(" - ");if(!z||!K){Q(X.map(ue=>({key:ue,label:ue})));return}const[ee,ne,ae]=z.split("/"),[ie,G,de]=K.split("/"),Y=Number(ae),oe=Number(de);let Se=[];for(let ue=0;ue<X.length;ue++){let se="";ue<9?se=`${X[ue]} ${Y}`:se=`${X[ue]} ${oe}`,Se.push({key:`${X[ue]}-${ue<9?Y:oe}`,month:X[ue],year:ue<9?Y:oe,label:se})}Q(Se)},[te]);const ce=z=>{if(!te)return!0;const[K,ee]=te.split(" - ");if(!K||!ee)return!0;const[ne,ae,ie]=K.split("/"),[G,de,Y]=ee.split("/"),oe=new Date(`${ie}-${ae}-${ne}T00:00:00`),Se=new Date(`${Y}-${de}-${G}T23:59:59`),ue=new Date(z);return ue>=oe&&ue<=Se};w.useEffect(()=>{const z=()=>{const K={};U.forEach(ne=>{K[ne.label]={month:ne.label,input:0,output:0,balance:0}}),k.forEach(ne=>{if(!ce(ne.createdAt))return;const ae=new Date(ne.createdAt),ie=ae.toLocaleString("en-US",{month:"short"}),G=(ae.getMonth()<3,ae.getFullYear()),de=U.find(oe=>oe.month===ie&&oe.year===G)?.label,Y=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);de&&K[de]&&(K[de].input+=Y)}),D.forEach(ne=>{if(!ce(ne.createdAt))return;const ae=new Date(ne.createdAt),ie=ae.toLocaleString("en-US",{month:"short"}),G=(ae.getMonth()<3,ae.getFullYear()),de=U.find(oe=>oe.month===ie&&oe.year===G)?.label,Y=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);de&&K[de]&&(K[de].output+=Y)});const ee=Object.values(K).map(ne=>({...ne,balance:ne.output-ne.input}));p(ee)};(k.length||D.length)&&z()},[k,D,te,b,U]),w.useEffect(()=>{(async()=>{try{const K=await Oe.get("/api/invoiceform",{params:{companyId:B,financialYear:te}}),ee=K.data.filter(ie=>{if(!ce(ie.createdAt))return!1;const G=!L||ie.location===L,de=new Date(ie.createdAt),Y=de.toLocaleString("en-US",{month:"short"}),oe=(de.getMonth()<3,de.getFullYear()),Se=!T||`${Y} ${oe}`===T;return G&&Se}),ne=ee?.sort((ie,G)=>new Date(G.createdAt)-new Date(ie.createdAt)),ae=ee.reduce((ie,G)=>ie+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);n(ae),d(ae),S(K.data),J(ne),t(null)}catch(K){t("Failed to fetch invoices"),console.error(K)}finally{N(!1)}})()},[T,L,te,U]),w.useEffect(()=>{(async()=>{try{const K=await Oe.get("/api/billingform",{params:{companyId:B,financialYear:te}}),ee=K.data.filter(ie=>{if(!ce(ie.createdAt))return!1;const G=!L||ie.location===L,de=new Date(ie.createdAt),Y=de.toLocaleString("en-US",{month:"short"}),oe=(de.getMonth()<3,de.getFullYear()),Se=!T||`${Y} ${oe}`===T;return G&&Se}),ne=ee.reduce((ie,G)=>ie+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);i(ne);const ae=ee?.sort((ie,G)=>new Date(G.createdAt)-new Date(ie.createdAt));E(K.data),re(ae),t(null)}catch(K){t("Failed to fetch invoices"),console.error(K)}finally{N(!1)}})()},[T,L,te,U]);const M=s-r,q=M>0?"You need to pay GST":M<0?"You will get a GST refund":"No GST to pay or refund";return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"GST List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"GST List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-xl-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:"Month"}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{name:"month",className:"form-select",id:"month-select",onChange:z=>A(z.target.value),children:[a.jsx("option",{value:"",children:"Select Month"}),U.map((z,K)=>a.jsx("option",{value:z.label,children:z.label},K))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:"Location"}),a.jsx("div",{className:"col-xl-8",children:a.jsxs("select",{name:"location",className:"form-select",id:"location-select",onChange:z=>P(z.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),v.map((z,K)=>a.jsx("option",{value:z.name,children:z.name},K))]})})]}),a.jsxs("div",{className:"col-xl-3 ms-auto ",children:[o==="input"&&a.jsxs("h5",{style:{color:"blue"},children:["Total Input GST: ",r.toFixed(2)]}),o==="output"&&a.jsxs("h5",{style:{color:"orange"},children:["Total Output GST: ",s.toFixed(2)]}),o==="gstr"&&a.jsxs("h5",{style:{color:M>0?"red":M<0?"green":"black"},children:[q,"  ",Math.abs(M).toFixed(2)]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("ul",{className:"nav nav-tabs tab-style-6",id:"myTab-3",role:"tablist",children:[a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="input"?"active":""}`,id:"products-tab","data-bs-toggle":"tab","data-bs-target":"#products-tab-pane",type:"button",role:"tab","aria-controls":"products-tab-pane","aria-selected":o==="input",onClick:()=>l("input"),children:[a.jsx("i",{className:"feather-gift me-1 align-middle d-inline-block"}),"Input Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="output"?"active":""}`,id:"sales-tab","data-bs-toggle":"tab","data-bs-target":"#sales-tab-pane",type:"button",role:"tab","aria-controls":"sales-tab-pane","aria-selected":o==="output",onClick:()=>l("output"),children:[a.jsx("i",{className:"feather-file me-1 align-middle d-inline-block"}),"Output Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="gstr"?"active":""}`,id:"profit-tab","data-bs-toggle":"tab","data-bs-target":"#profit-tab-pane",type:"button",role:"tab","aria-controls":"profit-tab-pane","aria-selected":o==="gstr",onClick:()=>l("gstr"),children:[a.jsx("i",{className:"feather-file-text me-1 align-middle d-inline-block"}),"GSTR"]})})]}),a.jsxs("div",{className:"tab-content",id:"myTabContent2",children:[a.jsx("div",{className:`tab-pane fade ${o==="input"?"show active":""} p-0 border-bottom-0`,id:"products-tab-pane",role:"tabpanel","aria-labelledby":"products-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:O.map((z,K)=>a.jsxs("tr",{children:[a.jsx("td",{children:z.docnumber}),a.jsx("td",{children:new Date(z.createdAt).toLocaleDateString()}),a.jsx("td",{children:z.finalTotal}),a.jsx("td",{children:z.cgst}),a.jsx("td",{children:z.sgst}),a.jsx("td",{children:z.igst}),a.jsx("td",{children:(z.cgst||0)+(z.sgst||0)+(z.igst||0)})]},K))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="output"?"show active":""}`,id:"sales-tab-pane",role:"tabpanel","aria-labelledby":"sales-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:W.map((z,K)=>a.jsxs("tr",{children:[a.jsx("td",{children:z.docnumber}),a.jsx("td",{children:new Date(z.createdAt).toLocaleDateString()}),a.jsx("td",{children:z.finalTotal}),a.jsx("td",{children:z.cgst}),a.jsx("td",{children:z.sgst}),a.jsx("td",{children:z.igst}),a.jsx("td",{children:((z.cgst||0)+(z.sgst||0)+(z.igst||0)).toFixed(2)})]},K))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="gstr"?"show active":""}`,id:"profit-tab-pane",role:"tabpanel","aria-labelledby":"profit-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Month"}),a.jsx("th",{scope:"col",children:"Input"}),a.jsx("th",{scope:"col",children:"Output"}),a.jsx("th",{scope:"col",children:"Balance"})]})}),a.jsx("tbody",{children:m.map((z,K)=>a.jsxs("tr",{children:[a.jsx("td",{children:z.month}),a.jsx("td",{children:z.input.toFixed(2)}),a.jsx("td",{children:z.output.toFixed(2)}),a.jsx("td",{children:z.balance.toFixed(2)})]},K))})]})})})]})]})]})})})]})}const NE=10;function O5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState([]),[k,S]=w.useState(""),[D,E]=w.useState(1),[T,A]=w.useState(null),L=async()=>{try{const de=(await Oe.get("/api/purchase-contract-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(Y=>({label:`${Y.categoryName} (${Y.prefix})`,value:Y._id}));h(de)}catch(G){console.error("Failed to fetch categories:",G)}},P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear"),J=async()=>{try{const Y=(await Oe.get("/api/vendors",{params:{companyId:P,financialYear:O}})).data.filter(oe=>!oe.isDeleted&&!oe.isBlocked).map(oe=>({label:`${oe.name1} ${oe.name2||""}`,value:oe.vendorName,vnNo:oe.vnNo||""}));d(Y),y(Y)}catch(G){console.error("Failed to fetch vendors:",G)}},W=async()=>{try{const G=await Oe.get("/api/locations",{params:{companyId:P,financialYear:O}});Array.isArray(G.data)?N(G.data):G.data&&Array.isArray(G.data.locations)?N(G.data.locations):N([])}catch(G){console.error("Failed to fetch locations:",G),N([])}},re=async()=>{try{n(!0);const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),oe=(await Oe.get("/api/contracts/get",{params:{companyId:G,financialYear:de}})).data.sort((Se,ue)=>new Date(ue.createdAt)-new Date(Se.createdAt));t(oe),i(null)}catch(G){console.error("Failed to fetch contracts:",G),i("Failed to load contracts. Please try again.")}finally{n(!1)}};w.useEffect(()=>{re(),J(),L(),W()},[]);const U=async G=>{try{const Y=(await Oe.get(`/api/contracts/${G}`)).data;l({...Y,validityFDate:Y.validityFDate?new Date(Y.validityFDate).toISOString().split("T")[0]:"",validityTDate:Y.validityTDate?new Date(Y.validityTDate).toISOString().split("T")[0]:"",items:Y.items.map(oe=>({...oe}))})}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},Q=async()=>{try{const G=o.items.reduce((Y,oe)=>Y+(parseFloat(oe.price)*parseFloat(oe.qty)||0),0),de={...o,totalPrice:G};await Oe.put(`/api/contracts/${o._id}`,de),alert("Contract updated successfully!"),l(null),re()}catch(G){console.error("Failed to update contract:",G),alert("Failed to update contract")}},B=()=>{l(null)},te=(G,de)=>{l(Y=>({...Y,[G]:de}))},X=(G,de,Y)=>{const oe=[...o.items];oe[G][de]=Y,l(Se=>({...Se,items:oe}))},ce=async G=>{try{const de=await Oe.get(`/api/contracts/${G}`);A(de.data)}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},M=G=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Contract - ${G.contractNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PURCHASE CONTRACT</h1>
          <h3>Contract Number: ${G.contractNumber}</h3>
        </div>
        
        <div class="info-grid">
          <div>
            <div class="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div class="info-item"><strong>Location:</strong> ${G.location||"-"}</div>
            <div class="info-item"><strong>Purchase Group:</strong> ${G.buyerGroup||"-"}</div>
          </div>
          <div>
            <div class="info-item"><strong>Valid From:</strong> ${G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Valid To:</strong> ${G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Created:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div class="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((oe,Se)=>`
              <tr>
                <td>${Se+1}</td>
                <td>${oe.materialId}</td>
                <td>${oe.description}</td>
                <td>${oe.qty}</td>
                <td>${oe.unit||oe.baseUnit}</td>
                <td>${oe.price?parseFloat(oe.price).toFixed(2):"0.00"}</td>
                <td>${oe.price&&oe.qty?(parseFloat(oe.price)*parseFloat(oe.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${G.items.reduce((oe,Se)=>{const ue=Se.price&&Se.qty?parseFloat(Se.price)*parseFloat(Se.qty):0;return oe+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div class="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,Y=window.open("","_blank");Y.document.write(de),Y.document.close(),Y.focus(),Y.print()},q=w.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(de=>{const Y=new Date(de.createdAt),oe=m?new Date(m):null,Se=v?new Date(v):null;return oe&&Se?Y>=oe&&Y<=Se:oe?Y>=oe:Se?Y<=Se:!0})),k&&(G=G.filter(de=>[de.contractNumber,de.vendorName,de.note,de.location,de.buyerGroup].join(" ").toLowerCase().includes(k.toLowerCase())),G=G.sort((de,Y)=>{const oe=contract.items?.reduce((ue,se)=>{const ye=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return ue+ye},0)||0,Se=contract.items?.reduce((ue,se)=>{const ye=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return ue+ye},0)||0;return oe-Se})),G},[k,e,m,v]),z=()=>{S(""),p(""),g(""),E(1)},K=(G,de)=>{if(!de)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},ee=Math.ceil(q.length/NE),ne=w.useMemo(()=>{const G=(D-1)*NE;return q.slice(G,G+NE)},[q,D]),ae=G=>{S(G.target.value),E(1)},ie=G=>{G<1||G>ee||E(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px"},children:[a.jsx("h2",{children:"Purchase Contracts"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:re,style:{padding:"10px 20px"},children:"Retry"})]}):T?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Purchase Contract Preview - ",T.contractNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>A(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Contract Number"}),a.jsx("div",{className:"fw-bold",children:T.contractNumber})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:T.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:T.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Purchase Group"}),a.jsx("div",{className:"fw-bold",children:T.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid From"}),a.jsx("div",{className:"fw-bold",children:T.validityFDate?new Date(T.validityFDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid To"}),a.jsx("div",{className:"fw-bold",children:T.validityTDate?new Date(T.validityTDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Financial Year"}),a.jsx("div",{className:"fw-bold",children:T.financialYear||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(T.createdAt).toLocaleDateString()})]})})})]}),T.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",T.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:T.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsxs("td",{children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"6",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",T.items.reduce((G,de)=>{const Y=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+Y},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Purchase Contract - ",o.contractNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:Q,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:B,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Contract Number"}),a.jsx("input",{type:"text",className:"form-control",value:o.contractNumber||"",onChange:G=>te("contractNumber",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsx(Gw,{options:u,value:u.find(G=>G.value===o.categoryId),onChange:G=>te("categoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(Gw,{options:b,value:b.find(G=>G.value===o.vendorName),onChange:G=>{te("vendorId",G?.value),te("vendorName",G?.label)},placeholder:"Select Vendor"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid From Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityFDate||"",onChange:G=>te("validityFDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid To Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityTDate||"",onChange:G=>te("validityTDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>te("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),C.map((G,de)=>a.jsx("option",{value:G.name||G,children:G.name||G},de))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Purchase Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>te("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>te("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:Y=>X(de,"materialId",Y.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:Y=>X(de,"description",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:Y=>X(de,"qty",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:Y=>X(de,"baseUnit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:Y=>X(de,"orderUnit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:Y=>X(de,"unit",Y.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:Y=>X(de,"price",Y.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"8",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((G,de)=>{const Y=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+Y},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Purchase Contracts"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Contract Number, Vendor, etc...",value:k,onChange:ae,className:"form-control",style:{width:300,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:z,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:re,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Valid From"}),a.jsx("th",{children:"Valid To"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Total Price"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{className:"text-wrap",children:G.contractNumber}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location||"-"}),a.jsx("td",{children:G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}),a.jsx("td",{children:G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsxs("td",{style:{backgroundColor:K(de,!!k)},children:["",G.items?.reduce((Y,oe)=>{const Se=oe.price&&oe.qty?parseFloat(oe.price)*parseFloat(oe.qty):0;return Y+Se},0).toFixed(2)||"0.00"]}),a.jsx("td",{children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>ce(G._id),className:"btn btn-sm",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>U(G._id),className:"btn btn-sm",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>M(G),className:"btn btn-sm",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||de))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end ms-auto",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${D===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(D-1),disabled:D===1,children:a.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const G=[];let de=[1,2],Y=[ee-1,ee].filter(ue=>ue>2),oe=[];D<=4?(de=[1,2,3,4,5].filter(ue=>ue<=ee),Y=[ee-1,ee].filter(ue=>ue>5)):D>=ee-3?(de=[1,2].filter(ue=>ue<ee-4),Y=[ee-4,ee-3,ee-2,ee-1,ee].filter(ue=>ue>2&&ue<=ee)):(de=[1,2],oe=[D-1,D,D+1],Y=[ee-1,ee]);const Se=ue=>ue.map(se=>a.jsx("li",{className:`page-item${D===se?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(se),children:se})},se));return G.push(...Se(de)),(oe.length>0&&oe[0]>de[de.length-1]+1||oe.length===0&&Y[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),G.push(...Se(oe)),Y.length>0&&(oe.length>0&&Y[0]>oe[oe.length-1]+1||oe.length===0&&Y[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),G.push(...Se(Y)),G})(),a.jsx("li",{className:`page-item${D===ee?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(D+1),disabled:D===ee,children:a.jsx("i",{className:"bi bi-chevron-double-right"})})})]})})})]})}function M5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]);Xu();const[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,J]=w.useState(""),[W,re]=w.useState(""),[U,Q]=w.useState(!1),[B,te]=w.useState(null),[X,ce]=w.useState(0),[M,q]=w.useState(!1),[z,K]=w.useState(!1),[ee,ne]=w.useState(""),[ae,ie]=w.useState(""),[G,de]=w.useState(""),[Y,oe]=w.useState(""),[Se,ue]=w.useState(""),[se,ye]=w.useState(""),[Ne,Le]=w.useState(null);w.useEffect(()=>{if(Se){const He=e.filter(ft=>ft.indentId.toLowerCase().includes(Se.toLowerCase()));setFilteredIndents(He)}},[Se]);const[Je,lt]=w.useState([]);w.useEffect(()=>{const He=localStorage.getItem("selectedCompanyId"),ft=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:He,financialYear:ft}}).then(Ae=>{const Ke=Ae.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);t(Ke.map(Ge=>({label:`${Ge.indentId} (${Ge.categoryName})`,value:Ge})))}),Oe.get("/api/purchase-contract-categories",{params:{companyId:He,financialYear:ft}}).then(Ae=>{n(Ae.data.map(Ke=>({label:`${Ke.categoryName}`,value:Ke._id})))}),Oe.get("/api/vendors",{params:{companyId:He,financialYear:ft}}).then(Ae=>{const Ke=Ae.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);i(Ke.map(Ge=>({label:`${Ge.name1} ${Ge.name2||""}`,value:Ge._id,vnNo:Ge.vnNo||""})))}),Oe.get("/api/locations",{params:{companyId:He,financialYear:ft}}).then(Ae=>{console.log("Locations API response:",Ae.data),Array.isArray(Ae.data)?lt(Ae.data):Ae.data&&Array.isArray(Ae.data.locations)?lt(Ae.data.locations):lt([])}).catch(Ae=>{console.error("Failed to fetch locations:",Ae),lt([])}),console.log("location",T),Oe.get("/api/material",{params:{companyId:He,financialYear:ft}}).then(Ae=>{console.log("Fetched materials:",Ae.data);const Ke=Ae.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);l(Ke),console.log("Filtered materials:",Ke)}).catch(Ae=>console.error("Failed to fetch materials:",Ae))},[]);const vt=He=>{h(He);const{buyerGroup:ft,materialGroup:Ae,deliveryDate:Ke,location:Ge}=He.value;A(Ge||""),P(ft||"");const ct=He.value.items.map(Mt=>({...Mt,unit:Mt.unit||"",price:Mt.price||"",materialGroup:Mt.materialGroup||Ae||"",deliveryDate:Mt.deliveryDate||Ke||""}));E(ct)},Re=(He,ft,Ae)=>{const Ke=[...D];Ke[He][ft]=Ae,E(Ke)},ht=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date(new Date().setDate(new Date().getDate()+5)).toISOString().slice(0,10),price:0}])},[At,Tt]=w.useState(!1),[Ht,pe]=w.useState("internal"),[he,xe]=w.useState(""),me=async He=>{He.preventDefault(),Tt(!0)};w.useEffect(()=>{const He=D.reduce((ft,Ae)=>{const Ke=parseFloat(Ae.price)||0,Ge=parseFloat(Ae.qty)||0;return ft+Ke*Ge},0);ce(He)},[D]);const De=async()=>{const He=localStorage.getItem("selectedCompanyId"),ft=localStorage.getItem("financialYear"),Ae={indentId:u?.value?.indentId,categoryId:m?.value,rfqCategoryId:m?.value,vendor:v,vendorName:b,contractReference:c,validityFDate:O,validityTDate:W,companyId:He,financialYear:ft,vnNo:k,note:C,buyerGroup:L,location:T,totalPrice:X,items:D,contractGenType:Ht,externalContractNumber:Ht==="external"?he:null};console.log("Payload for submission:",Ae);try{const Ke=await Oe.post("/api/contracts/create",Ae);alert("Contract Created Successfully"),console.log(Ke.data),Tt(!1)}catch(Ke){console.error(Ke),alert("Failed to create contract")}},Ye=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Contract Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>Tt(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{pe("internal"),De()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>pe("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Ht==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:he,onChange:He=>{He.target.value.length<=50&&xe(He.target.value)},onKeyPress:He=>{He.key==="Enter"&&he.trim()&&De()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[he.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:De,disabled:!he.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Contract"]})})]}),Ht==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Contract number will be auto-generated based on category and range count."})})]})]})})})]}),jt=He=>{console.log("Opening modal for item at index:",He),te(He),Q(!0)},Qe=()=>{const[He,ft]=w.useState([]),[Ae,Ke]=w.useState("materialId"),[Ge,ct]=w.useState(""),Mt=bt=>{const Kt=bt.target.value;ct(Kt);const Rt=o.filter(tr=>(Ae==="materialId"?tr.materialId:tr.description)?.toLowerCase().includes(Kt.toLowerCase()));ft(Rt)},Ie=()=>{ft(o),ct("")},ke=()=>{ft([]),ct("")},it=bt=>{if(console.log("selectedItemIndex when selecting:",B),B==null){console.error("No item selected for update");return}E(Kt=>{console.log("Previous items:",Kt);const Rt=[...Kt];return Rt[B]={...Rt[B],materialId:bt.materialId,description:bt.description,materialGroup:bt.materialgroup||"",baseUnit:bt.baseUnit,orderUnit:bt.orderUnit},console.log("Updated items:",Rt),Rt}),Q(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Q(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ae,onChange:bt=>Ke(bt.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Ae==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ge,onChange:Mt})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ie,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),He.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:He.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:He.map((bt,Kt)=>a.jsxs("tr",{children:[a.jsx("td",{children:bt.materialId}),a.jsx("td",{children:bt.description}),a.jsx("td",{children:bt.baseUnit}),a.jsx("td",{children:bt.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>it(bt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Kt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ge?`No materials found matching "${Ge}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Xe=()=>{const[He,ft]=w.useState("indentId"),[Ae,Ke]=w.useState([]),[Ge,ct]=w.useState(""),Mt=it=>{const bt=it.target.value;ct(bt);const Kt=e.filter(Rt=>(He==="indentId"?Rt?.value?.indentId:Rt?.value?.categoryName)?.toLowerCase().includes(bt.toLowerCase()));Ke(Kt)},Ie=()=>{Ke(e),ct("")},ke=()=>{Ke([]),ct("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>q(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:He,onChange:it=>ft(it.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ge,onChange:Mt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ie,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ae.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ae.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ae.map((it,bt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:it.value.indentId})}),a.jsx("td",{children:it.value.categoryName}),a.jsx("td",{children:it.value.buyerGroup}),a.jsx("td",{children:it.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{vt(it),q(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Be=()=>{const[He,ft]=w.useState("name1"),[Ae,Ke]=w.useState([]),[Ge,ct]=w.useState(""),Mt=it=>{const bt=it.target.value;ct(bt);const Kt=s.filter(Rt=>(He==="vnNo"?Rt.vnNo:Rt.label)?.toLowerCase().includes(bt.toLowerCase()));Ke(Kt)},Ie=()=>{Ke(s),ct("")},ke=()=>{Ke([]),ct("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:He,onChange:it=>ft(it.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ge,onChange:Mt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ie,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ae.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ae.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ae.map((it,bt)=>a.jsxs("tr",{children:[a.jsx("td",{children:it.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:it.vnNo})}),a.jsx("td",{children:it.city||"-"}),a.jsx("td",{children:it.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(it.value),y(it.label),S(it.vnNo||""),K(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>K(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Contract"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:He=>{const ft=He.target.value;oe(ft);const Ae=e.find(Ke=>Ke.indentId.toLowerCase()===ft.toLowerCase());h(Ae||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ue(Y),q(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Category"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:He=>p(r.find(ft=>ft.value===He.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((He,ft)=>a.jsx("option",{value:He.value,children:He.label},ft))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:He=>{const ft=He.target.value;y(ft);const Ae=s.find(Ke=>Ke.name.toLowerCase()===ft.toLowerCase());Le(Ae||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{K(!0),ye(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Contract Reference",value:c,onChange:He=>d(He.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:He=>A(He.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Je)&&Je.map((He,ft)=>a.jsx("option",{value:He.name||He._id||He,children:He.name||He.locationName||He},ft))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:He=>P(He.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity From"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:He=>J(He.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Till"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:W,onChange:He=>re(He.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:He=>N(He.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("form",{onSubmit:me,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((He,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:ft+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:He.materialId,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>jt(ft),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:He.description,onChange:Ae=>Re(ft,"description",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:He.qty,onChange:Ae=>Re(ft,"qty",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:He.baseUnit,onChange:Ae=>Re(ft,"baseUnit",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:He.orderUnit,onChange:Ae=>Re(ft,"orderUnit",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:He.materialGroup,onChange:Ae=>Re(ft,"materialGroup",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:He.deliveryDate,onChange:Ae=>Re(ft,"deliveryDate",Ae.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:He.price,onChange:Ae=>Re(ft,"price",Ae.target.value)})})]},ft))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:ht,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]}),U&&a.jsx(Qe,{})]}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["",X.toFixed(2)]})]})})]})})})]})]}),M&&a.jsx(Xe,{}),z&&a.jsx(Be,{}),At&&a.jsx(Ye,{})]})]})})}function R5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState(""),[O,J]=w.useState(""),[W,re]=w.useState(""),[U,Q]=w.useState(!1),[B,te]=w.useState(!1),[X,ce]=w.useState(!1),[M,q]=w.useState(null),[z,K]=w.useState(""),[ee,ne]=w.useState([]),ae=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),G=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:ae,financialYear:ie}}).then(me=>{const De=me.data.filter(Ye=>!Ye.isBlocked&&!Ye.isDeleted);t(De)}).catch(console.error),Oe.get("/api/sale-contract-categories",{params:{companyId:ae,financialYear:ie}}).then(me=>n(me.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:ae,financialYear:ie}}).then(me=>{console.log("Locations API response:",me.data),Array.isArray(me.data)?ne(me.data):me.data&&Array.isArray(me.data.locations)?ne(me.data.locations):ne([])}).catch(me=>{console.error("Failed to fetch locations:",me),ne([])}),Oe.get("/api/customers").then(me=>{const De=me.data.filter(Ye=>!Ye.isBlocked&&!Ye.isDeleted);i(De)}).catch(console.error),Oe.get("/api/material").then(me=>l(me.data)).catch(console.error),de()},[]);const de=()=>{Oe.get("/api/salescontracts",{params:{companyId:ae,financialYear:ie}}).then(me=>h(me.data)).catch(console.error)},Y=me=>{p({label:me.indentId,value:me._id}),d(me.salesGroup||""),K(me.location),A(me.items.map(De=>({...De,customerName:b?.name1||"",price:"",unit:""}))),ce(!1)},oe=me=>{y({label:`${me.name1} ${me.name2}`,value:me._id}),A(De=>De.map(Ye=>({...Ye,customerName:me.name1}))),te(!1)},Se=me=>{const De=[...T];De[M]={...De[M],materialId:me.materialId,description:me.description,baseUnit:me.baseUnit,unit:me.unit,price:me.price},A(De),Q(!1)},ue=(me,De,Ye)=>{const jt=[...T];jt[me][De]=Ye,A(jt)},se=()=>{A(me=>[...me,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ye,Ne]=w.useState(!1),[Le,Je]=w.useState("internal"),[lt,vt]=w.useState(""),Re=me=>{if(me.preventDefault(),k&&D&&k>D){alert("Validity From date cannot be later than Validity To date");return}Ne(!0)},ht=()=>{const me={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:G,financialYear:ie,validityFromDate:k,validityToDate:D,salesGroup:c,location:z,items:T,contractNumberType:Le,externalContractNumber:Le==="external"?lt:null};Oe.post("/api/salescontracts",me).then(()=>{alert("Contract saved successfully!"),de(),Tt(),Ne(!1),Je("internal"),vt("")}).catch(De=>{console.error(De),alert("Error saving contract")})},At=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Contract Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>Ne(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Je("internal"),ht()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Je("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Le==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:lt,onChange:me=>{me.target.value.length<=50&&vt(me.target.value)},onKeyPress:me=>{me.key==="Enter"&&lt.trim()&&ht()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[lt.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:ht,disabled:!lt.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Contract"]})})]})]})]})})})]}),Tt=()=>{p(null),g(null),y(null),N(""),S(""),E(""),A([])},Ht=({children:me,onClose:De})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:De})]}),a.jsx("div",{className:"modal-body",children:me})]})})}),pe=()=>{const[me,De]=w.useState([]),[Ye,jt]=w.useState("materialId"),Qe=He=>{const ft=He.target.value;P(ft);const Ae=o.filter(Ke=>(Ye==="materialId"?Ke.materialId:Ke.description)?.toLowerCase().includes(ft.toLowerCase()));De(Ae)},Xe=()=>{De(o),P("")},Be=()=>{De([]),P("")};return a.jsxs(Ht,{onClose:()=>Q(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:He=>jt(He.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Ye==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:L,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),me.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:me.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:me.map((He,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:He.materialId})}),a.jsx("td",{children:He.description}),a.jsx("td",{children:He.baseUnit}),a.jsx("td",{children:He.unit}),a.jsx("td",{children:He.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Se(He),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":L?`No materials found matching "${L}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},he=()=>{const[me,De]=w.useState("name1"),[Ye,jt]=w.useState([]),Qe=He=>{const ft=He.target.value;J(ft),jt(filtered)},Xe=()=>{jt(s),J("")},Be=()=>{jt([]),J("")};return a.jsxs(Ht,{onClose:()=>te(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:me,onChange:He=>De(He.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:O,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ye.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ye.map((He,ft)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[He.name1," ",He.name2]}),a.jsx("td",{children:He.city}),a.jsx("td",{children:He.region}),a.jsx("td",{children:He.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>oe(He),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":O?`No match found for "${O}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>te(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},xe=()=>{const[me,De]=w.useState([]),[Ye,jt]=w.useState("indentId"),[Qe,Xe]=w.useState(""),Be=Ae=>{const Ke=Ae.target.value;Xe(Ke);const Ge=e.filter(ct=>(Ye==="indentId"?ct.indentId:Ye==="categoryName"?ct.categoryName:ct.location)?.toLowerCase().includes(Ke.toLowerCase()));De(Ge)},He=()=>{De(e),Xe("")},ft=()=>{De([]),Xe("")};return a.jsxs(Ht,{onClose:()=>ce(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:Ae=>jt(Ae.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Qe,onChange:Be})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:He,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),me.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ft,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:me.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:me.map((Ae,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ae.indentId}),a.jsx("td",{children:Ae.categoryName}),a.jsx("td",{children:Ae.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Y(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Qe?`No match for "${Qe}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ce(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Contract"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-file-contract me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:me=>{const De=me.target.value;p({label:De,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>ce(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:me=>{const De=me.target.value;y({label:De,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>te(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:z,onChange:me=>K(me.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(ee)&&ee.map((me,De)=>a.jsx("option",{value:me.name,children:me.name},De))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Contract Category:"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:me=>{const De=me.target.value,Ye=r.find(jt=>jt._id===De);g(Ye?{label:Ye.categoryName,value:Ye._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(me=>a.jsxs("option",{value:me._id,children:[me.categoryName," (",me.prefix,")"]},me._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity From Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:me=>S(me.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity To Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:me=>E(me.target.value),min:k})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:me=>d(me.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:me=>N(me.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Re,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:T.map((me,De)=>a.jsxs("tr",{children:[a.jsx("td",{children:De+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:me.materialId,onChange:Ye=>ue(De,"materialId",Ye.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{q(De),Q(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.description,onChange:Ye=>ue(De,"description",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:me.qty,onChange:Ye=>ue(De,"qty",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.baseUnit,onChange:Ye=>ue(De,"baseUnit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.orderUnit,onChange:Ye=>ue(De,"orderUnit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.location,onChange:Ye=>ue(De,"location",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.customerName,onChange:Ye=>ue(De,"customerName",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.unit,onChange:Ye=>ue(De,"unit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:me.price,onChange:Ye=>ue(De,"price",Ye.target.value)})})]},De))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:se,children:"+ Add Contract Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Contract"})})]})})})})})]}),U&&a.jsx(pe,{}),B&&a.jsx(he,{}),X&&a.jsx(xe,{}),ye&&a.jsx(At,{})]})]})})}function F5e(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),o=5,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/salescontracts",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch contracts",k),alert("Error loading contracts")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Contract</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
            .contract-header { margin-bottom: 20px; }
            .validity-dates { display: flex; gap: 20px; margin: 10px 0; }
          </style>
        </head>
        <body>
          <div class="contract-header">
            <h2>Sales Contract: ${k.contractNumber}</h2>
            <p><strong>Indent ID:</strong> ${k.indentId}</p>
            <p><strong>Customer Name:</strong> ${k.customerName}</p>
            <div class="validity-dates">
              <p><strong>Validity From:</strong> ${k.validityFromDate||"N/A"}</p>
              <p><strong>Validity To:</strong> ${k.validityToDate||"N/A"}</p>
            </div>
            <p><strong>Location:</strong> ${k.location||"N/A"}</p>
            <p><strong>Sales Group:</strong> ${k.salesGroup||"N/A"}</p>
            <p><strong>Note:</strong> ${k.note||"N/A"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId||"N/A"}</td>
                      <td>${E.description||"N/A"}</td>
                      <td>${E.qty||0}</td>
                      <td>${E.baseUnit||"N/A"}</td>
                      <td>${E.orderUnit||"N/A"}</td>
                      <td>${E.location||"N/A"}</td>
                      <td>${E.unit||"N/A"}</td>
                      <td>${E.price||0}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=w.useState(""),[m,p]=w.useState(""),v=e.filter(k=>{const S=k.contractNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),N=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contracts"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Contract No, Indent ID, Customer Name, or Location",value:r,onChange:k=>{n(k.target.value),i(1)}})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:m,min:u,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:y.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-contract fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No contracts found. Create your first contract!":"No contracts match your search criteria."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity From"}),a.jsx("th",{children:"Validity To"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:k.contractNumber}),a.jsx("td",{children:k.indentId}),a.jsx("td",{children:k.customerName}),a.jsx("td",{children:k.location||"N/A"}),a.jsx("td",{children:k.validityFromDate?new Date(k.validityFromDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.validityToDate?new Date(k.validityToDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d(k),title:"Print Contract",children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})})]},S))})]})})})})]}),C>=1&&a.jsx("nav",{className:"mt-1",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>s>1&&N(s-1),className:"page-link",disabled:s===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>N(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>s<C&&N(s+1),className:"page-link",disabled:s===C,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})}function L5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10}),[o,l]=w.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[c,d]=w.useState({byType:[],byMethod:[]}),[u,h]=w.useState(null),[m,p]=w.useState(!1),[v,g]=w.useState(!1),[b,y]=w.useState(null),[C,N]=w.useState({type:"",text:""}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{E(),T()},[s.page]),w.useEffect(()=>{const M=setTimeout(()=>{i(q=>({...q,page:1})),E()},500);return()=>clearTimeout(M)},[s.recordType,s.status,s.paymentMethod,s.entityName,s.startDate,s.endDate,s.limit]);const E=async()=>{n(!0);try{const M=new URLSearchParams;Object.entries(s).forEach(([z,K])=>{K&&M.append(z,K)}),console.log("Fetching payments with filters:",k,S);const q=await Oe.get(`/api/payment?${M}`,{params:{companyId:k,financialYear:S}});t(q.data.payments||[]),l(q.data.pagination||{})}catch(M){console.error("Error fetching payments:",M)}finally{n(!1)}},T=async()=>{try{console.log("Fetching summary for:",{companyId:k,financialYear:S});const M=await Oe.get("/api/payment-summary",{params:{companyId:k,financialYear:S}});console.log("Summary response:",M.data),d({byType:M.data.byType||[],byMethod:M.data.byMethod||[],today:M.data.today||{totalAmount:0,count:0}})}catch(M){console.error("Error fetching summary:",M),N({type:"error",text:"Failed to fetch payment summary."})}},A=M=>{const{name:q,value:z}=M.target;i(K=>({...K,[q]:z}))},L=()=>{i({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10})},P=M=>{i(q=>({...q,page:M}))},O=M=>{h(M),p(!0)},J=M=>{y({...M,paymentDate:new Date(M.paymentDate).toISOString().split("T")[0]}),g(!0)},W=M=>{const{name:q,value:z}=M.target;y(K=>({...K,[q]:z}))},re=async M=>{M.preventDefault();try{const q={paymentAmount:parseFloat(b.paymentAmount),paymentMethod:b.paymentMethod,status:b.status,description:b.description,companyId:D,financialYear:S,paymentDate:b.paymentDate,paymentDetails:b.paymentDetails||{}};await Oe.put(`/api/payment/${b._id}`,q),N({type:"success",text:"Payment updated successfully!"}),g(!1),E(),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(q){console.error("Error updating payment:",q),N({type:"error",text:"Failed to update payment. Please try again."})}},U=M=>{const q=window.open("","_blank"),z=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt - ${M.paymentDocNumber}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .company-name { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 5px;
          }
          .receipt-title { 
            font-size: 18px; 
            color: #666;
          }
          .details { 
            margin: 20px 0; 
          }
          .detail-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
          }
          .detail-label { 
            font-weight: bold; 
            width: 40%;
          }
          .detail-value { 
            width: 60%;
            text-align: right;
          }
          .amount { 
            font-size: 20px; 
            font-weight: bold; 
            color: #28a745;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
          }
          .footer { 
            margin-top: 40px; 
            text-align: center; 
            font-size: 12px; 
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 20px;
          }
          .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .status-cleared { background: #d4edda; color: #155724; }
          .status-pending { background: #fff3cd; color: #856404; }
          .status-bounced { background: #f8d7da; color: #721c24; }
          .status-cancelled { background: #e2e3e5; color: #383d41; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">Your Company Name</div>
          <div class="receipt-title">PAYMENT RECEIPT</div>
        </div>
        
        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Receipt Number:</span>
            <span class="detail-value">${M.paymentDocNumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date & Time:</span>
            <span class="detail-value">${Q(M.paymentDate)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Type:</span>
            <span class="detail-value">${M.recordType.toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">${M.recordType==="vendor"?"Vendor":"Customer"} Name:</span>
            <span class="detail-value">${M.entityName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Original Document:</span>
            <span class="detail-value">${M.docnumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value">${M.paymentMethod.replace("_"," ").toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="status-badge status-${M.status}">${M.status.toUpperCase()}</span>
            </span>
          </div>
        </div>

        <div class="amount">
          AMOUNT PAID: ${B(M.paymentAmount)}
        </div>

        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Previous Balance:</span>
            <span class="detail-value">${B(M.previousBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">New Balance:</span>
            <span class="detail-value">${B(M.newBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Balance Reduction:</span>
            <span class="detail-value">${B(M.previousBalance-M.newBalance)}</span>
          </div>
        </div>

        ${M.description?`
          <div class="details">
            <div class="detail-row">
              <span class="detail-label">Description:</span>
              <span class="detail-value">${M.description}</span>
            </div>
          </div>
        `:""}

        ${M.paymentDetails?`
          <div class="details">
            <h4>Payment Details:</h4>
            ${M.paymentMethod==="cheque"&&M.paymentDetails.chequeNumber?`
              <div class="detail-row">
                <span class="detail-label">Cheque Number:</span>
                <span class="detail-value">${M.paymentDetails.chequeNumber}</span>
              </div>
            `:""}
            ${M.paymentMethod==="bank_transfer"&&M.paymentDetails.transactionId?`
              <div class="detail-row">
                <span class="detail-label">Transaction ID:</span>
                <span class="detail-value">${M.paymentDetails.transactionId}</span>
              </div>
            `:""}
          </div>
        `:""}

        <div class="footer">
          <p>Thank you for your payment!</p>
          <p>This is a computer-generated receipt. No signature required.</p>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>

        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>
        </div>
      </body>
      </html>
    `;q.document.write(z),q.document.close(),q.focus()},Q=M=>new Date(M).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),B=M=>`${parseFloat(M).toFixed(2)}`,te=M=>`badge bg-${{pending:"warning",cleared:"success",bounced:"danger",cancelled:"secondary"}[M]||"secondary"}`,X=M=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[M]||"ti-payment",ce=()=>{if(e.length===0){alert("No data to export");return}const M=e.map(ne=>({"Payment Doc":ne.paymentDocNumber,Date:Q(ne.paymentDate),Type:ne.recordType,Entity:ne.entityName,"Doc Number":ne.docnumber,Amount:ne.paymentAmount,Method:ne.paymentMethod,Status:ne.status,"Previous Balance":ne.previousBalance,"New Balance":ne.newBalance})),q=[Object.keys(M[0]).join(","),...M.map(ne=>Object.values(ne).join(","))].join(`
`),z=new Blob([q],{type:"text/csv"}),K=window.URL.createObjectURL(z),ee=document.createElement("a");ee.href=K,ee.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,ee.click(),window.URL.revokeObjectURL(K)};return console.log("Payment summary state:",c),a.jsxs("div",{className:"content",children:[C.text&&a.jsxs("div",{className:`alert alert-${C.type==="success"?"success":"danger"} alert-dismissible fade show`,children:[C.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>N({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Payment Records"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payments"})]})})]}),a.jsxs("div",{className:"",children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("button",{onClick:ce,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-download"})," Export"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-primary-light rounded",children:a.jsx("i",{className:"ti ti-receipt text-primary"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Total Payments"}),a.jsx("h4",{className:"mb-0",children:o.totalCount})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-success-light rounded",children:a.jsx("i",{className:"ti ti-building-store text-success"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Vendor Payments"}),a.jsx("h4",{className:"mb-0",children:B(c.byType.find(M=>M._id==="vendor")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-info-light rounded",children:a.jsx("i",{className:"ti ti-users text-info"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Customer Payments"}),a.jsx("h4",{className:"mb-0",children:B(c.byType.find(M=>M._id==="customer")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-warning-light rounded",children:a.jsx("i",{className:"ti ti-cash text-warning"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Today's Total"}),a.jsx("h4",{className:"mb-0",children:B(e.filter(M=>new Date(M.paymentDate).toDateString()===new Date().toDateString()).reduce((M,q)=>M+q.paymentAmount,0))})]})]})})})})]}),a.jsxs("div",{className:"card mb-4",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Filters"})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Type"}),a.jsxs("select",{className:"form-select",name:"recordType",value:s.recordType,onChange:A,children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"customer",children:"Customer"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",name:"status",value:s.status,onChange:A,children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Method"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:s.paymentMethod,onChange:A,children:[a.jsx("option",{value:"",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Entity Name"}),a.jsx("input",{type:"text",className:"form-control",name:"entityName",placeholder:"Search entity...",value:s.entityName,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",name:"startDate",value:s.startDate,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",name:"endDate",value:s.endDate,onChange:A})]})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("button",{className:"btn btn-outline-secondary",onClick:L,children:[a.jsx("i",{className:"ti ti-refresh"})," Clear Filters"]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label me-2 mb-0",children:"Show:"}),a.jsxs("select",{className:"form-select",name:"limit",value:s.limit,onChange:A,style:{width:"auto"},children:[a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"25",children:"25"}),a.jsx("option",{value:"50",children:"50"}),a.jsx("option",{value:"100",children:"100"})]})]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Payment Records"})}),a.jsx("div",{className:"card-body",children:r?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"ti ti-receipt-off text-muted",style:{fontSize:"3rem"}}),a.jsx("h5",{className:"text-muted mt-2",children:"No payments found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or record a new payment."}),a.jsxs("a",{href:"/payments",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Payment Doc"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Entity"}),a.jsx("th",{children:"Original Doc"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Method"}),a.jsx("th",{children:"Balance Change"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((M,q)=>a.jsxs("tr",{children:[a.jsx("td",{children:(o.currentPage-1)*s.limit+q+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:M.paymentDocNumber})}),a.jsx("td",{children:a.jsx("small",{children:Q(M.paymentDate)})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${M.recordType==="vendor"?"success":"info"}`,children:M.recordType})}),a.jsx("td",{children:a.jsx("div",{children:a.jsx("strong",{children:M.entityName})})}),a.jsx("td",{children:a.jsx("span",{className:"text-muted",children:M.docnumber})}),a.jsx("td",{children:a.jsx("strong",{className:"text-success",children:B(M.paymentAmount)})}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${X(M.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:M.paymentMethod.replace("_"," ")})]})}),a.jsx("td",{children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"From:"})," ",B(M.previousBalance)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"To:"})," ",B(M.newBalance)]})]})}),a.jsx("td",{children:a.jsx("span",{className:te(M.status),children:M.status})}),a.jsx("td",{children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Actions"}),a.jsxs("ul",{className:"dropdown-menu",children:[a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>O(M),children:[a.jsx("i",{className:"ti ti-eye me-2"}),"View Details"]})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>U(M),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})}),a.jsx("li",{children:a.jsx("hr",{className:"dropdown-divider"})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item text-primary",onClick:()=>J(M),disabled:M.status==="cancelled",children:[a.jsx("i",{className:"ti ti-edit me-2"}),"Edit"]})})]})]})})]},M._id))})]})}),o.totalPages>1&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Showing ",(o.currentPage-1)*s.limit+1," to"," ",Math.min(o.currentPage*s.limit,o.totalCount)," of"," ",o.totalCount," entries"]}),a.jsx("nav",{children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${o.hasPrev?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage-1),disabled:!o.hasPrev,children:a.jsx("i",{className:"ti ti-chevron-left"})})}),[...Array(Math.min(5,o.totalPages))].map((M,q)=>{const z=Math.max(1,o.currentPage-2)+q;return z<=o.totalPages?a.jsx("li",{className:`page-item ${z===o.currentPage?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(z),children:z})},z):null}),a.jsx("li",{className:`page-item ${o.hasNext?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage+1),disabled:!o.hasNext,children:a.jsx("i",{className:"ti ti-chevron-right"})})})]})})]})]})})]}),m&&u&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Payment Details"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Payment Information"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Document:"}),a.jsx("div",{children:u.paymentDocNumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Date & Time:"}),a.jsx("div",{children:Q(u.paymentDate)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Amount:"}),a.jsx("div",{className:"text-success",children:B(u.paymentAmount)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Method:"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${X(u.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:u.paymentMethod.replace("_"," ")})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Status:"}),a.jsx("div",{children:a.jsx("span",{className:te(u.status),children:u.status})})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Entity & Transaction Details"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Type:"}),a.jsx("div",{className:"text-capitalize",children:u.recordType})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Name:"}),a.jsx("div",{children:u.entityName})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Original Document:"}),a.jsx("div",{children:u.docnumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Balance Changes:"}),a.jsxs("div",{children:[a.jsxs("div",{children:["Previous: ",B(u.previousBalance)]}),a.jsxs("div",{children:["New: ",B(u.newBalance)]}),a.jsxs("div",{className:"text-success",children:["Reduction: ",B(u.previousBalance-u.newBalance)]})]})]})]})]}),u.description&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Description"}),a.jsx("p",{className:"bg-light p-3 rounded",children:u.description})]}),u.paymentDetails&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Payment Method Details"}),a.jsxs("div",{className:"bg-light p-3 rounded",children:[u.paymentMethod==="cheque"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.chequeNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Cheque Number:"})," ",u.paymentDetails.chequeNumber]}),u.paymentDetails.bankName&&a.jsxs("div",{children:[a.jsx("strong",{children:"Bank:"})," ",u.paymentDetails.bankName]})]}),u.paymentMethod==="bank_transfer"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.accountNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Account Number:"})," ",u.paymentDetails.accountNumber]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]}),u.paymentMethod==="upi"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.upiId&&a.jsxs("div",{children:[a.jsx("strong",{children:"UPI ID:"})," ",u.paymentDetails.upiId]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Close"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>U(u),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})]})]})})}),v&&b&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Payment - ",b.paymentDocNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1)})]}),a.jsxs("form",{onSubmit:re,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:""}),a.jsx("input",{type:"number",className:"form-control",name:"paymentAmount",value:b.paymentAmount,onChange:W,min:"0",step:"0.01",required:!0})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:b.paymentMethod,onChange:W,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Date *"}),a.jsx("input",{type:"date",className:"form-control",name:"paymentDate",value:b.paymentDate,onChange:W,required:!0})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status *"}),a.jsxs("select",{className:"form-select",name:"status",value:b.status,onChange:W,required:!0,children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-12 mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:b.description||"",onChange:W,rows:"3",placeholder:"Payment description or notes..."})]})]}),a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("i",{className:"ti ti-alert-triangle me-2"}),a.jsx("strong",{children:"Note:"})," Editing payment details will not automatically update the balance in the original invoice/billing record. You may need to manually adjust balances if necessary."]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-check me-2"}),"Update Payment"]})]})]})]})})})]})}function B5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(1),[o,l]=w.useState(1),[c,d]=w.useState(!1),[u,h]=w.useState([]),[m,p]=w.useState(Date.now()),[v,g]=w.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[b,y]=w.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,J]=w.useState(""),[W,re]=w.useState(!1),[U,Q]=w.useState(""),[B,te]=w.useState(""),[X,ce]=w.useState(""),[M,q]=w.useState(""),[z,K]=w.useState(!1),[ee,ne]=w.useState(null),[ae,ie]=w.useState(null),[G,de]=w.useState(null),[Y,oe]=w.useState(new Date),[Se,ue]=w.useState({type:"",text:""}),se=localStorage.getItem("selectedCompanyId"),ye=localStorage.getItem("financialYear"),Ne=10;w.useEffect(()=>{Je();const ke=it=>{it.key==="paymentUpdated"&&(ue({type:"info",text:"Payment updated in another tab. Refreshing ledger..."}),Je(),setTimeout(()=>ue({type:"",text:""}),3e3))};return window.addEventListener("storage",ke),()=>{window.removeEventListener("storage",ke),G&&clearInterval(G)}},[]);const Le=async()=>{try{return(await Oe.get("/api/payment",{params:{companyId:se,financialYear:ye,limit:1e3}})).data.payments||[]}catch(ke){return console.error("Error fetching payments:",ke),[]}},Je=async()=>{d(!0);try{const[ke,it,bt]=await Promise.all([Oe.get("/api/invoiceform",{params:{companyId:se,financialYear:ye}}),Oe.get("/api/billingform",{params:{companyId:se,financialYear:ye}}),Le()]);t(ke.data||[]),n(it.data||[]),h(bt||[]),p(Date.now()),lt(ke.data||[],it.data||[]),oe(new Date)}catch(ke){console.error("Error fetching data",ke),ue({type:"error",text:"Failed to fetch data. Please refresh the page."})}finally{d(!1)}},lt=(ke,it)=>{const bt=ke.reduce((Rt,tr)=>{const mr=tr.category?.toLowerCase()==="debit"&&(tr.finalTotal||tr.netAmount)||0,jr=tr.category?.toLowerCase()==="credit"&&(tr.finalTotal||tr.netAmount)||0,fn=tr.balance||0;let hr=mr,ge=jr;return mr>0&&jr===0?ge=-fn:jr>0&&mr===0&&(hr=-fn),{totalDebit:Rt.totalDebit+hr,totalCredit:Rt.totalCredit+ge,totalBalance:Rt.totalBalance+(ge-hr),outstandingBalance:Rt.outstandingBalance+fn}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Kt=it.reduce((Rt,tr)=>{const mr=tr.category?.toLowerCase()==="debit"&&tr.finalTotal||0,jr=tr.category?.toLowerCase()==="credit"&&tr.finalTotal||0,fn=tr.balance||0;let hr=mr,ge=jr;return mr>0&&jr===0?ge=-fn:jr>0&&mr===0&&(hr=-fn),{totalDebit:Rt.totalDebit+hr,totalCredit:Rt.totalCredit+ge,totalBalance:Rt.totalBalance+(hr-ge),outstandingBalance:Rt.outstandingBalance+fn}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0});g(bt),y(Kt)},vt=(ke,it,bt)=>{let Kt=ke,Rt=it;return ke>0&&it===0?Rt=ke-bt:it>0&&ke===0&&(Kt=it-bt),{adjustedDebit:Kt,adjustedCredit:Rt}},Re=(ke,it,bt)=>!u||u.length===0?[]:u.filter(Kt=>{const Rt=Kt.docnumber===ke||Kt.invoiceNumber===ke||Kt.originalDocNumber===ke;return Kt.recordType===bt&&Rt}),ht=(ke,it)=>{ie(ke),ne(it),K(!0)},At=e.map((ke,it)=>{const bt=ke.category?.toLowerCase()==="debit"&&(ke.finalTotal||ke.netAmount)||0,Kt=ke.category?.toLowerCase()==="credit"&&(ke.finalTotal||ke.netAmount)||0,Rt=ke?.vendor||"Unknown Vendor",tr=ke?.docnumber||"_",mr=Re(tr,Rt,"vendor"),jr=mr.filter(Ee=>Ee.status==="cleared"),fn=jr.reduce((Ee,Fe)=>Ee+(Fe.paymentAmount||0),0),hr=jr.sort((Ee,Fe)=>new Date(Fe.paymentDate)-new Date(Ee.paymentDate))[0];let ge=ke.balance||0;ge<0&&(ge=0);const{adjustedDebit:Ue,adjustedCredit:Pe}=vt(bt,Kt,ge);return{id:ke._id||it,name:Rt,docnumber:tr,debit:Ue,credit:Pe,balance:ge,originalAmount:ke.finalTotal||ke.netAmount||0,lastPaymentAmount:hr?.paymentAmount||0,lastPaymentDate:hr?.paymentDate||null,lastPaymentMethod:hr?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Kt,totalPayments:fn,paymentCount:jr.length,pendingPayments:mr.filter(Ee=>Ee.status==="pending").length,specificInvoicePayments:mr,allPaymentStatuses:mr.map(Ee=>Ee.status),paymentMethods:[...new Set(mr.map(Ee=>Ee.paymentMethod))],firstPaymentDate:mr.length>0?mr.sort((Ee,Fe)=>new Date(Ee.paymentDate)-new Date(Fe.paymentDate))[0].paymentDate:null}}),Tt=r.map((ke,it)=>{const bt=ke.category?.toLowerCase()==="debit"&&ke.finalTotal||0,Kt=ke.category?.toLowerCase()==="credit"&&ke.finalTotal||0,Rt=ke?.customer||"Unknown Customer",tr=ke.docnumber||"_",mr=Re(tr,Rt,"customer"),jr=mr.filter(Ee=>Ee.status==="cleared"),fn=jr.reduce((Ee,Fe)=>Ee+(Fe.paymentAmount||0),0),hr=jr.sort((Ee,Fe)=>new Date(Fe.paymentDate)-new Date(Ee.paymentDate))[0];let ge=ke.balance||0;ge<0&&(ge=0);const{adjustedDebit:Ue,adjustedCredit:Pe}=vt(bt,Kt,ge);return{id:ke._id||it,docnumber:tr,name:Rt,debit:Ue,credit:Pe,balance:ge,originalAmount:ke.finalTotal||0,lastPaymentAmount:hr?.paymentAmount||0,lastPaymentDate:hr?.paymentDate||null,lastPaymentMethod:hr?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Kt,totalPayments:fn,paymentCount:jr.length,pendingPayments:mr.filter(Ee=>Ee.status==="pending").length,specificInvoicePayments:mr,allPaymentStatuses:mr.map(Ee=>Ee.status),paymentMethods:[...new Set(mr.map(Ee=>Ee.paymentMethod))],firstPaymentDate:mr.length>0?mr.sort((Ee,Fe)=>new Date(Ee.paymentDate)-new Date(Fe.paymentDate))[0].paymentDate:null}}),Ht=[...new Set(At.map(ke=>ke.name))],pe=[...new Set(Tt.map(ke=>ke.name))],he=(ke,it,bt)=>!it&&!bt?ke:ke.filter(Kt=>{const Rt=new Date(Kt.createdAt),tr=it?new Date(it):null,mr=bt?new Date(bt):null;return!(tr&&Rt<tr||mr&&Rt>mr)});let xe=C?At.filter(ke=>ke.name===C):At;xe=he(xe,D,T);let me=k?Tt.filter(ke=>ke.name===k):Tt;me=he(me,L,O),console.log("filteredCustomerData",me);const De=xe.reduce((ke,it)=>({totalDebit:ke.totalDebit+it.debit,totalCredit:ke.totalCredit+it.credit,totalBalance:ke.totalBalance+(it.credit-it.debit),outstandingBalance:ke.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Ye=me.reduce((ke,it)=>({totalDebit:ke.totalDebit+it.debit,totalCredit:ke.totalCredit+it.credit,totalBalance:ke.totalBalance+(it.debit-it.credit),outstandingBalance:ke.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),jt=(ke,it="")=>{Q(ke),te(it),ce(""),q(""),re(!0)},Qe=(ke,it,bt)=>{const Kt=["S.No","Invoice/Doc Number",bt==="vendor"?"Vendor Name":"Customer Name","Invoice Original Amount","Current Debit","Current Credit","Outstanding Balance","Payment Status","Total Payments Made (This Invoice)","Payment Count (This Invoice)","Cleared Payments Count","Pending Payments Count","Payment Methods Used","First Payment Date","Last Payment Date","Last Payment Amount","Last Payment Method","Invoice Created Date","Detailed Payment History","Payment Status Breakdown","Balance Calculation Details"],Rt=[];Rt.push(Kt.join(",")),ke.forEach((hr,ge)=>{const Ue=hr.specificInvoicePayments||[],Pe=Ue.map(wt=>{const at=Ge(wt.paymentDate),Nt=(wt.paymentAmount||0).toFixed(2),St=wt.paymentMethod||"N/A",Xt=wt.status||"N/A",ar=wt.paymentDocNumber||"N/A",pr=wt.description||"N/A";return`[${at}] Amount: ${Nt} | Method: ${St} | Status: ${Xt.toUpperCase()} | Reference: ${ar} | Description: ${pr} `}).join(` 
 `),Ee=hr.allPaymentStatuses.reduce((wt,at)=>(wt[at]=(wt[at]||0)+1,wt),{}),Fe=Object.entries(Ee).map(([wt,at])=>`${wt.toUpperCase()}: ${at}`).join(", "),Ve=`Original: ${hr.originalAmount.toFixed(2)} | Total Paid: ${hr.totalPayments.toFixed(2)} | Outstanding: ${hr.balance.toFixed(2)} | Calculation: ${hr.originalAmount.toFixed(2)} - ${hr.totalPayments.toFixed(2)} = ${hr.balance.toFixed(2)}`,xt=[ge+1,`"${hr.docnumber}"`,`"${hr.name}"`,hr.originalAmount.toFixed(2),hr.debit.toFixed(2),hr.credit.toFixed(2),hr.balance.toFixed(2),ct(hr.balance,hr.originalAmount).status,hr.totalPayments.toFixed(2),hr.paymentCount,Ue.filter(wt=>wt.status==="cleared").length,Ue.filter(wt=>wt.status==="pending").length,`"${hr.paymentMethods.join(", ")||"No payments"}"`,hr.firstPaymentDate?Ke(hr.firstPaymentDate):"N/A",hr.lastPaymentDate?Ke(hr.lastPaymentDate):"N/A",hr.lastPaymentAmount.toFixed(2),`"${hr.lastPaymentMethod||"N/A"}"`,Ke(hr.createdAt),`"${Pe||"No payment history for this invoice"}"`,`"${Fe||"No payment status available"}"`,`"${Ve}"`];Rt.push(xt.join(","))}),Rt.push(""),Rt.push("Invoice Number,Entity Name,Invoice Amount,Payments Received,Outstanding,Payment Efficiency %,First Payment,Last Payment,Payment Methods,Status"),ke.forEach(hr=>{const ge=hr.originalAmount>0?(hr.totalPayments/hr.originalAmount*100).toFixed(1):0;Rt.push([`"${hr.docnumber}"`,`"${hr.name}"`,hr.originalAmount.toFixed(2),hr.totalPayments.toFixed(2),hr.balance.toFixed(2),`${ge}%`,hr.firstPaymentDate?Ke(hr.firstPaymentDate):"No payments",hr.lastPaymentDate?Ke(hr.lastPaymentDate):"No payments",`"${hr.paymentMethods.join(", ")||"None"}"`,ct(hr.balance,hr.originalAmount).status].join(","))}),Rt.push(""),Rt.push(`"Financial Year","${ye}"`),Rt.push(`"Total Invoices","${ke.length}"`),Rt.push(`"Total Payment Records","${ke.reduce((hr,ge)=>hr+ge.paymentCount,0)}"`);const tr=Rt.join(`
`),mr=new Blob([tr],{type:"text/csv;charset=utf-8;"}),jr=document.createElement("a"),fn=URL.createObjectURL(mr);jr.setAttribute("href",fn),jr.setAttribute("download",it),jr.style.visibility="hidden",document.body.appendChild(jr),jr.click(),document.body.removeChild(jr)},Xe=()=>{let ke=[],it="";U==="vendor"?(ke=B?At.filter(Kt=>Kt.name===B):At,it=B?`${B}_vendor_detailed_invoice_payments`:"all_vendor_detailed_invoice_payments"):(ke=B?Tt.filter(Kt=>Kt.name===B):Tt,it=B?`${B}_customer_detailed_invoice_payments`:"all_customer_detailed_invoice_payments"),ke=he(ke,X,M),(X||M)&&(it+=`_${X||"start"}_to_${M||"end"}`);const bt=new Date().toISOString().slice(0,19).replace(/:/g,"-");it+=`_${bt}.csv`,Qe(ke,it,U),re(!1)},Be=(ke,it)=>ke.slice((it-1)*Ne,it*Ne),He=Math.ceil(xe.length/Ne)||1,ft=Math.ceil(me.length/Ne)||1,Ae=ke=>{const it=parseFloat(ke||0),Kt=`${Math.abs(it).toFixed(2)}`;return it<0?`(${Kt})`:Kt},Ke=ke=>ke?new Date(ke).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",Ge=ke=>ke?new Date(ke).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",ct=(ke,it)=>ke<=0?{status:"Paid",class:"success"}:ke===it?{status:"Unpaid",class:"danger"}:{status:"Partial",class:"warning"},Mt=ke=>ke>0?"text-success":ke<0?"text-danger":"text-muted",Ie=ke=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[ke]||"ti ti-payment";return a.jsxs("div",{className:"content",children:[Se.text&&a.jsxs("div",{className:`alert alert-${Se.type==="success"?"success":Se.type==="info"?"info":"danger"} alert-dismissible fade show`,children:[Se.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>ue({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Ledger"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active",children:"Ledger"})]})})]}),a.jsxs("div",{children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("a",{href:"/paymentdisplay",className:"btn btn-outline-primary me-2",children:[a.jsx("i",{className:"ti ti-eye"})," View Payments"]}),a.jsxs("button",{onClick:Je,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-refresh"})," Refresh Now"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Vendor Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>jt("vendor"),title:"Download Detailed Vendor Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Vendor: "}),a.jsxs("select",{value:C,onChange:ke=>{N(ke.target.value),i(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Vendors"}),Ht.map(ke=>a.jsx("option",{value:ke,children:ke},ke))]}),C&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>N(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>jt("vendor",C),title:`Download detailed ${C} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:ke=>{E(ke.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:ke=>{A(ke.target.value),i(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Ae(De.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Ae(De.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:De.totalBalance>=0?"text-success":"text-danger",children:Ae(De.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Ae(De.outstandingBalance)})]})]})]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Customer Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>jt("customer"),title:"Download Detailed Customer Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Customer: "}),a.jsxs("select",{value:k,onChange:ke=>{S(ke.target.value),l(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Customers"}),pe.map(ke=>a.jsx("option",{value:ke,children:ke},ke))]}),k&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>S(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>jt("customer",k),title:`Download detailed ${k} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:L,onChange:ke=>{P(ke.target.value),l(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:ke=>{J(ke.target.value),l(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Ae(Ye.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Ae(Ye.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:Ye.totalBalance>=0?"text-success":"text-danger",children:Ae(Ye.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Ae(Ye.outstandingBalance)})]})]})]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-12 mb-4",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Vendor Ledger"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("small",{className:"me-3",children:["Total Records: ",xe.length]}),a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>jt("vendor",C),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Be(xe,s).map((ke,it)=>{const bt=ct(Number(ke.balance),ke.originalAmount),Kt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(s-1)*Ne+it+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:ke.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:ke.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Ae(ke.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ae(ke.totalPayments)}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ae(ke.balance)}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ae(ke.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[Kt,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["",ke.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",Ke(ke.createdAt)]}),ke.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",Ke(ke.firstPaymentDate)]}),ke.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",Ke(ke.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>ht(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),He>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Vendor pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.max(ke-1,1)),disabled:s===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],bt=[];it.push(1);for(let tr=Math.max(2,s-2);tr<=Math.min(He-1,s+2);tr++)it.push(tr);He>1&&it.push(He);const Kt=[...new Set(it)].sort((tr,mr)=>tr-mr);let Rt;for(let tr of Kt)Rt&&(tr-Rt===2?bt.push(Rt+1):tr-Rt!==1&&bt.push("...")),bt.push(tr),Rt=tr;return bt.map((tr,mr)=>tr==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`vendor-ellipsis-${mr}`):a.jsx("li",{className:`page-item ${s===tr?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>i(tr),title:`Go to page ${tr}`,children:tr})},`vendor-page-${tr}`))})(),a.jsx("li",{className:`page-item ${s===He?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.min(ke+1,He)),disabled:s===He,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})}),a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Customer Ledger"}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>jt("customer",k),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Be(me,o).map((ke,it)=>{const bt=ct(ke.balance,ke.originalAmount),Kt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(o-1)*Ne+it+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:ke.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:ke.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Ae(ke.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ae(ke.balance)}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ae(ke.totalPayments.toFixed(0))}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ae(ke.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[Kt,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["",ke.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",Ke(ke.createdAt)]}),ke.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",Ke(ke.firstPaymentDate)]}),ke.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",Ke(ke.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>ht(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),ft>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Customer pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.max(ke-1,1)),disabled:o===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],bt=[];it.push(1);for(let tr=Math.max(2,o-2);tr<=Math.min(ft-1,o+2);tr++)it.push(tr);ft>1&&it.push(ft);const Kt=[...new Set(it)].sort((tr,mr)=>tr-mr);let Rt;for(let tr of Kt)Rt&&(tr-Rt===2?bt.push(Rt+1):tr-Rt!==1&&bt.push("...")),bt.push(tr),Rt=tr;return bt.map((tr,mr)=>tr==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`customer-ellipsis-${mr}`):a.jsx("li",{className:`page-item ${o===tr?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>l(tr),title:`Go to page ${tr}`,children:tr})},`customer-page-${tr}`))})(),a.jsx("li",{className:`page-item ${o===ft?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.min(ke+1,ft)),disabled:o===ft,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})})]}),z&&ee&&ae&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"ti ti-file-invoice me-2"}),"Payment Analysis - Invoice ",ae.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close",onClick:()=>K(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card ",children:[a.jsx("div",{className:"card-header ",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-clipboard-data me-2"}),"Invoice Summary & Payment Overview"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-primary",children:"Invoice Number"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-dark",children:ae.docnumber})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-info",children:"Entity"}),a.jsx("br",{}),a.jsx("span",{className:"h6 text-dark",children:ae.name})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-success",children:"Original Amount"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-success",children:Ae(ae.originalAmount)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:ae.balance>0?"text-danger":"text-success",children:"Outstanding Balance"}),a.jsx("br",{}),a.jsx("span",{className:`h5 ${ae.balance>0?"text-danger":"text-success"}`,children:Ae(ae.balance)})]})})]}),a.jsxs("div",{className:"row mt-3",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-info text-white rounded",children:[a.jsx("strong",{children:"Total Payments"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:Ae(ae.totalPayments)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-primary text-white rounded",children:[a.jsx("strong",{children:"Payment Count"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:ae.paymentCount})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:`text-center p-2 text-white rounded bg-${ct(ae.balance,ae.originalAmount).class}`,children:[a.jsx("strong",{children:"Status"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:ct(ae.balance,ae.originalAmount).status})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-secondary text-white rounded",children:[a.jsx("strong",{children:"Invoice Age"}),a.jsx("br",{}),a.jsxs("span",{className:"h6",children:[Math.floor((new Date-new Date(ae.createdAt))/(1e3*60*60*24))," days"]})]})})]})]})]})})}),ee.length>0&&a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-dark",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-chart-bar me-2"}),"Payment Analytics & Summary"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-primary",children:"Payment Status Breakdown:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(ee.reduce((ke,it)=>(ke[it.status]=(ke[it.status]||0)+1,ke),{})).map(([ke,it])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("span",{className:`badge bg-${ke==="cleared"?"success":ke==="pending"?"warning":ke==="bounced"?"danger":"secondary"}`,children:ke.toUpperCase()}),a.jsxs("span",{className:"ms-2",children:[it," transaction(s)"]})]},ke))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-success",children:"Payment Method Summary:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(ee.reduce((ke,it)=>{const bt=it.paymentMethod||"Unknown";return ke[bt]=(ke[bt]||0)+(it.paymentAmount||0),ke},{})).map(([ke,it])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("i",{className:`${Ie(ke)} me-2 text-primary`}),a.jsx("span",{className:"text-capitalize",children:ke.replace("_"," ")}),a.jsx("span",{className:"ms-2 text-success",children:Ae(it)})]},ke))})]})]})})]})})})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[a.jsx("i",{className:"ti ti-x me-1"})," Close"]}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{const ke=ee.map((mr,jr)=>[jr+1,ae.docnumber,ae.name,Ke(mr.paymentDate),mr.paymentDocNumber||"N/A",mr.paymentAmount||0,mr.paymentMethod||"N/A",mr.status||"N/A",mr.previousBalance||0,mr.newBalance||0,mr.description||"N/A",Ge(mr.createdAt||mr.paymentDate)]),bt=[["S.No","Invoice Number","Entity Name","Payment Date","Payment Doc Number","Payment Amount","Payment Method","Status","Balance Before","Balance After","Description","Created At"].join(","),...ke.map(mr=>mr.map(jr=>`"${jr}"`).join(","))].join(`
`),Kt=new Blob([bt],{type:"text/csv;charset=utf-8;"}),Rt=document.createElement("a"),tr=URL.createObjectURL(Kt);Rt.setAttribute("href",tr),Rt.setAttribute("download",`invoice_${ae.docnumber}_payment_details_${new Date().toISOString().slice(0,10)}.csv`),Rt.style.visibility="hidden",document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt)},children:[a.jsx("i",{className:"ti ti-download me-1"})," Export to CSV"]})]})]})})}),W&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Download ",U==="vendor"?"Vendor":"Customer"," Payment Details"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>re(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"mb-3",children:a.jsx("strong",{children:B?`${U==="vendor"?"Vendor":"Customer"}: ${B}`:`All ${U==="vendor"?"Vendors":"Customers"}`})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:X,onChange:ke=>ce(ke.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:M,onChange:ke=>q(ke.target.value)})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:"Cancel"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:Xe,children:[a.jsx("i",{className:"ti ti-download"})," Download Report"]})]})]})})})]})}function U5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState({}),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState(""),[m,p]=w.useState([]),[v,g]=w.useState([]),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState(!1),[L,P]=w.useState(""),[O,J]=w.useState([]),[W,re]=w.useState(""),[U,Q]=w.useState(""),[B,te]=w.useState("internal"),[X,ce]=w.useState(""),[M,q]=w.useState(""),[z,K]=w.useState(""),[ee,ne]=w.useState(""),[ae,ie]=w.useState([]),[G,de]=w.useState(null),[Y,oe]=w.useState(0),[Se,ue]=w.useState(""),[se,ye]=w.useState([]),[Ne,Le]=w.useState([]),[Je,lt]=w.useState(""),[vt,Re]=w.useState(""),[ht,At]=w.useState(""),[Tt,Ht]=w.useState([]),[pe,he]=w.useState(1),[xe,me]=w.useState(10),[De,Ye]=w.useState(0),[jt,Qe]=w.useState(""),[Xe,Be]=w.useState([]),[He,ft]=w.useState([]),[Ae,Ke]=w.useState(""),[Ge,ct]=w.useState(""),[Mt,Ie]=w.useState(""),[ke,it]=w.useState(""),bt=localStorage.getItem("selectedCompanyId"),Kt=localStorage.getItem("financialYear"),Rt=async()=>{try{const or=(await Oe.get("/api/material",{params:{companyId:bt,financialYear:Kt}})).data.sort((lr,$r)=>new Date($r.createdAt)-new Date(lr.createdAt));t(or),Ye(or.length),he(1)}catch(qe){console.error("Failed to fetch materials:",qe)}},tr=async()=>{try{const qe=await Oe.get("/api/stock/data",{params:{companyId:bt,financialYear:Kt}});n(qe.data),console.log("Stock data fetched:",qe.data)}catch(qe){console.error("Failed to fetch stock:",qe)}},mr=(qe,or,lr)=>{or.includes(qe)?lr(or.filter($r=>$r!==qe)):lr([...or,qe])},jr=qe=>{Qe(qe.target.value),he(1)};w.useEffect(()=>{Rt(),tr(),Oe.get("/api/vendors",{params:{companyId:bt,financialYear:Kt}}).then(qe=>S(qe.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Kt}}).then(qe=>ie(qe.data)),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Kt}}).then(qe=>Ht(qe.data)),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Kt}}).then(qe=>{const or=qe.data.filter(lr=>!lr.isDeleted).map(lr=>({_id:lr._id,name:lr.name,description:lr.description}));Be(or)}),Oe.get("/api/processes",{params:{companyId:bt,financialYear:Kt}}).then(qe=>{const or=qe.data.filter(lr=>!lr.isDeleted).map(lr=>({_id:lr._id,processId:lr.processId,processDescription:lr.processDescription}));ft(or)})},[]);const hr=e.map(qe=>{const lr=r.find(zs=>zs.materialId===qe.materialId)?.quantityAvailable||0;qe.safetyStock;const $r=qe.maxstock||0,gn=Math.abs($r-lr),ta=Math.abs($r-lr);return{...qe,inventoryStock:lr,reorderPoint:gn,reorderQuantity:ta}}).filter(qe=>{if(!jt)return!0;const or=jt.toLowerCase();return qe.materialId?.toLowerCase().includes(or)||qe.description?.toLowerCase().includes(or)||qe.minstock?.toString().includes(or)||qe.maxstock?.toString().includes(or)||qe.safetyStock?.toString().includes(or)||qe.inventoryStock?.toString().includes(or)||qe.reorderQuantity?.toString().includes(or)}),ge=Math.ceil(hr.length/xe),Ue=(pe-1)*xe,Pe=Ue+xe,Ee=hr.slice(Ue,Pe),Fe=qe=>{qe>=1&&qe<=ge&&he(qe)},Ve=()=>{const qe=[];if(ge<=5)for(let lr=1;lr<=ge;lr++)qe.push(lr);else if(pe<=3)for(let lr=1;lr<=5;lr++)qe.push(lr);else if(pe>=ge-2)for(let lr=ge-5+1;lr<=ge;lr++)qe.push(lr);else for(let lr=pe-2;lr<=pe+2;lr++)qe.push(lr);return qe},xt=async()=>{if(u==="PO"){if(!D){alert("Please select a vendor for Purchase Order");return}if(!G){alert("Please select tax for Purchase Order");return}}console.log("modalMaterial",c);const qe=parseFloat(c.unitPrice)||0,or=parseFloat(c.reorderQuantity)||0;if(u==="PE"){const lr=m.find(ta=>ta._id===M),$r={materialId:c.materialId,description:c.description,qty:or,baseUnit:c.baseUnit,orderUnit:c.orderUnit},gn={indentIdType:B,categoryId:lr._id,categoryName:lr.name||lr.categoryName,location:z,buyerGroup:ee,companyId:bt,financialYear:Kt,deliveryDate:b,documentDate:new Date().toISOString().split("T")[0],items:[$r]};if(B==="external"){if(!X.trim()){alert("Please enter External Indent ID");return}gn.indentId=X.trim()}try{const ta=await Oe.post("/api/indent/create",gn);alert(`Indent created with ID: ${ta.data.indentId}`),wt()}catch(ta){console.error("Indent creation failed",ta),alert("Failed to create indent")}}else if(u==="PO"){const lr=v.find(oa=>oa._id===M._id),$r=or*qe;if(isNaN($r)){alert("Please enter valid quantity and unit price");return}const gn=parseFloat(G?.cgst)||0,ta=parseFloat(G?.sgst)||0,zs=parseFloat(G?.igst)||0,za=$r*gn/100,fs=$r*ta/100,ks=$r*zs/100,gt=za+fs+ks,fr=parseFloat(Y)||0,cr=$r+gt-fr,Gr={materialId:c.materialId,description:c.description,quantity:or,price:qe,baseUnit:c.baseUnit,orderUnit:c.orderUnit},Rr={companyId:bt,financialYear:Kt,categoryId:lr._id,category:lr.name||lr.categoryName,date:new Date().toISOString().split("T")[0],vendor:D,deliveryLocation:W||"",deliveryAddress:U||"",items:[Gr],notes:C||"",remarks:Je||"",preparedby:ht||"",approvedby:vt||"",taxName:G?.taxName||"",cgst:za,sgst:fs,igst:ks,taxDiscount:fr,finalTotal:cr,processes:Ne||[],generalConditions:se||[],poGenerationType:B};if(B==="external"){if(!X.trim()){alert("Please enter External PO ID");return}Rr.poNumber=X.trim()}console.log("PO Payload:",Rr);try{const oa=await Oe.post("/api/purchase-orders",Rr);alert(`Purchase Order created with ID: ${oa.data.poNumber}`),wt()}catch(oa){console.error("Purchase Order creation failed",oa),alert(`Failed to create Purchase Order: ${oa.response?.data?.error||oa.message}`)}}},wt=()=>{l(!1),d(null),q(""),K(""),ne(""),y(""),ce(""),E(""),de(null),N(""),ue(""),lt(""),At(""),Re(""),re(""),Q(""),oe(0)},at=(qe,or)=>{i(lr=>{const $r={...lr};return $r[`${qe}_PE`]=!1,$r[`${qe}_PO`]=!1,$r[`${qe}_${or}`]=!0,$r})};w.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:bt,financialYear:Kt}}).then(qe=>p(qe.data)),Oe.get("/api/po-categories",{params:{companyId:bt,financialYear:Kt}}).then(qe=>g(qe.data))},[]);const Nt=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:L,onChange:qe=>St(qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Xt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:O.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:O.map((qe,or)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:qe.vnNo})}),a.jsx("td",{children:qe.name1}),a.jsx("td",{children:qe.email}),a.jsx("td",{children:qe.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ar(qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},or))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:L?`No vendors found matching "${L}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),St=qe=>{if(P(qe),qe.trim()){const or=k.filter(lr=>lr.vendorName.toLowerCase().includes(qe.toLowerCase())||lr.vendorCode.toLowerCase().includes(qe.toLowerCase()));J(or)}else J([])},Xt=()=>{J(k)},ar=qe=>{E(qe.name1||qe.vendorName),A(!1),P(""),J([])},pr=()=>{A(!1),P(""),J([])};return a.jsxs("div",{className:"content",children:[a.jsx("style",{children:`
.checkbox-radio {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background-color: white;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
}

.checkbox-radio:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.checkbox-radio:checked::after {
    content: '';
    position: absolute;
    top: -2px;
    left: 2px;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.checkbox-radio:hover {
    border-color: #007bff;
}

.checkbox-radio:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.pagination-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    flex-wrap: wrap;
    gap: 10px;
}

.pagination-info {
    color: #6c757d;
    font-size: 14px;
}

.pagination-controls .form-select {
    width: auto;
    min-width: 80px;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-link {
    color: #007bff;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.75rem;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
`}),a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Requirements Planning"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Requirements Planning"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:jt,onChange:jr})]})}),a.jsx("div",{})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered text-wrap",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"Safety Stock"}),a.jsx("th",{children:"INV Stock"}),a.jsx("th",{children:"ROP"}),a.jsx("th",{className:"wrap-header",children:"PE"}),a.jsx("th",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:"PO"}),a.jsx("th",{children:"Action"})]})}),a.jsxs("tbody",{children:[Ee.map((qe,or)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ue+or+1}),a.jsx("td",{children:qe.materialId||"-"}),a.jsx("td",{children:qe.description||"-"}),a.jsx("td",{children:qe.minstock||0}),a.jsx("td",{children:qe.maxstock||0}),a.jsx("td",{children:qe.safetyStock||0}),a.jsx("td",{children:qe.inventoryStock}),a.jsx("td",{style:{backgroundColor:qe.inventoryStock<qe.safetyStock?qe.inventoryStock<qe.minstock?"red":"orange":"green",fontWeight:qe.reorderQuantity<qe.safetyStock?"bold":"normal"},children:qe.reorderQuantity}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${qe.materialId}`,value:"PE",className:"checkbox-radio",checked:!!s[`${qe.materialId}_PE`],onChange:()=>at(qe.materialId,"PE")})}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${qe.materialId}`,value:"PO",className:"checkbox-radio",checked:!!s[`${qe.materialId}_PO`],onChange:()=>at(qe.materialId,"PO")})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{const lr=s[`${qe.materialId}_PE`],$r=s[`${qe.materialId}_PO`];if(!lr&&!$r){alert("Please select PE or PO before creating.");return}h(lr?"PE":"PO"),d(qe),l(!0)},children:"Create"})})]},qe._id||or)),Ee.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"11",style:{textAlign:"center"},children:jt?"No materials found matching your search criteria":"No materials found."})})]})]})})})]}),ge>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${pe===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:qe=>{qe.preventDefault(),pe>1&&Fe(pe-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Ve().map(qe=>a.jsx("li",{className:`page-item ${pe===qe?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:or=>{or.preventDefault(),Fe(qe)},children:qe})},qe)),a.jsx("li",{className:`page-item ${pe===ge?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:qe=>{qe.preventDefault(),pe<ge&&Fe(pe+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),o&&c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"," for ",c.description]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"ID Type"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:B,onChange:qe=>te(qe.target.value),children:[a.jsx("option",{value:"internal",children:"Internal"}),a.jsx("option",{value:"external",children:"External"})]})})]}),B==="external"&&a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{children:["External ",u," ID"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control",value:X,onChange:qe=>ce(qe.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{children:"Buyer Group *"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:ee,onChange:qe=>ne(qe.target.value),placeholder:"Enter buyer group",required:!0})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Delivery Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control",value:b,onChange:qe=>y(qe.target.value)})})]})]})]}),u==="PE"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-success mb-3",children:"Purchase Enquiry Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"PE Category"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:M,onChange:qe=>q(qe.target.value),children:[a.jsx("option",{value:"",children:"Select"}),m.map(qe=>a.jsx("option",{value:qe._id,children:qe.name||qe.categoryName},qe._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:z,onChange:qe=>K(qe.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),Tt.map(qe=>a.jsx("option",{value:qe.name||qe.locationName||qe._id,children:qe.name||qe.locationName||qe._id},qe._id||qe.id||qe.name))]})})]})]})]})}),u==="PO"&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-info mb-3",children:"Purchase Order Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:M?._id||"",onChange:qe=>{const or=v.find(lr=>lr._id===qe.target.value);q(or)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),v.map(qe=>a.jsx("option",{value:qe._id,children:qe.categoryName||qe.name},qe._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:Mt,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:ke,onChange:qe=>it(qe.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Unit Price *"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:c?.unitPrice||0,onChange:qe=>{const or=parseFloat(qe.target.value)||0;d(lr=>({...lr,unitPrice:or}))},placeholder:"Enter unit price",required:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor *"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:D,onChange:qe=>E(qe.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>A(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Tax *"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:G?._id||"",onChange:qe=>{const or=ae.find(lr=>lr._id===qe.target.value);de(or)},children:[a.jsx("option",{value:"",children:"Select Tax"}),ae.map(qe=>a.jsx("option",{value:qe._id,children:qe.taxName},qe._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Discount"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",className:"form-control",value:Y,onChange:qe=>oe(parseFloat(qe.target.value)||0),placeholder:"Enter discount amount"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ae,onChange:qe=>Ke(qe.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Conditions & Processes"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select General Conditions"}),Xe.map(qe=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:se.includes(qe._id),onChange:()=>mr(qe._id,se,ye)}),a.jsx("label",{children:qe.name})]},qe._id))]}),a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select Processes"}),He.map(qe=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:Ne.includes(qe._id),onChange:()=>mr(qe._id,Ne,Le)}),a.jsx("label",{children:qe.processDescription})]},qe._id))]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Delivery Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:W,onChange:qe=>re(qe.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),Tt.map(qe=>a.jsx("option",{value:qe.name||qe.locationName||qe._id,children:qe.name||qe.locationName||qe._id},qe._id||qe.id||qe.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Delivery Address"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control",rows:"2",value:U,onChange:qe=>Q(qe.target.value),placeholder:"Enter delivery address"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Se,onChange:qe=>ue(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:ee,onChange:qe=>ne(qe.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Authorization"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:ht,onChange:qe=>At(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:vt,onChange:qe=>Re(qe.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Additional Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-4 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Payment:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Ge,onChange:qe=>ct(qe.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:Je,onChange:qe=>lt(qe.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control",rows:"2",value:C,onChange:qe=>N(qe.target.value),placeholder:"Enter notes"})})]})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:xt,children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"]})]})]})})})]}),T&&a.jsx(Nt,{})]})}function $5e(){const[e,t]=w.useState({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),s=localStorage.getItem("selectedCompanyId"),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState(!1),[h,m]=w.useState({type:"",text:""}),[p,v]=w.useState("");w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/invoiceform",{params:{companyId:r,financialYear:n}}),T=await Oe.get("/api/billingform",{params:{companyId:r,financialYear:n}});o(E.data||[]),c(T.data||[])}catch(E){console.error("Error fetching invoices",E)}},b=()=>(e.type==="vendor"?i:l).filter(T=>{const A=e.type==="vendor"?T.vendor||"":T.salesOrderId?.customer||"",L=T.docnumber||"",P=A.toLowerCase().includes(p.toLowerCase())||L.toLowerCase().includes(p.toLowerCase()),O=(T.balance||0)>0;return P&&O}),y=E=>{t(T=>({...T,recordId:E._id||E.id,selectedRecord:E,docnumber:E.docnumber||""}))},C=E=>{const{name:T,value:A}=E.target;T==="type"?(t(L=>({...L,[T]:A,recordId:"",selectedRecord:null,docnumber:""})),v("")):t(L=>({...L,[T]:A}))},N=()=>{if(!e.selectedRecord||!e.paymentAmount)return null;const E=e.selectedRecord.balance||0,T=parseFloat(e.paymentAmount);return E.toFixed(2)-T.toFixed(2)},k=async E=>{E.preventDefault(),u(!0),m({type:"",text:""});try{if(!e.selectedRecord)throw new Error("Please select a record to update");const T=parseFloat(e.paymentAmount),A=e.selectedRecord.balance||0,L=A-T,P={balance:L,lastPaymentAmount:T,companyId:s,financialYear:n,lastPaymentDocNumber:e.docnumber||"",lastPaymentMethod:e.paymentMethod,paymentDescription:e.description||`Payment via ${e.paymentMethod}`},O=e.type==="vendor"?`/api/invoiceform/${e.recordId}`:`/api/billingform/${e.recordId}`;await Oe.put(O,P);const J=e.type==="vendor"?e.selectedRecord.vendor||"Unknown Vendor":e.selectedRecord.salesOrderId?.customer||e.selectedRecord.customer||"Unknown Customer",W={recordType:e.type,recordId:e.recordId,docnumber:e.docnumber,entityName:J,paymentAmount:T,companyId:s,financialYear:n,previousBalance:A,newBalance:L,paymentMethod:e.paymentMethod,description:e.description,paymentDate:new Date().toISOString()};console.log("Payment History Payload:",W);try{const re=await Oe.post("/api/payment",W);console.log("Payment history saved successfully:",re.data)}catch(re){console.error("Payment history save failed:",re),console.error("Error details:",re.response?.data),m({type:"warning",text:`Payment updated successfully, but payment history could not be saved. Error: ${re.response?.data?.message||re.message}`})}h.text||m({type:"success",text:`Payment of ${T} recorded successfully for ${J}. New balance: ${L.toFixed(2)}`}),await g(),t({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),v("")}catch(T){console.error("Error recording payment",T),m({type:"error",text:T.response?.data?.message||T.message||"Failed to record payment. Please try again."})}finally{u(!1)}},S=b(),D=N();return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Record Payment"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payment"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-white",children:a.jsx("h5",{className:"mb-0",children:"Update Balance with Payment"})}),a.jsxs("div",{className:"card-body",children:[h.text&&a.jsxs("div",{className:`alert alert-${h.type==="success"?"success":"danger"} alert-dismissible`,children:[h.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>m({type:"",text:""})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Type *"}),a.jsxs("select",{className:"form-select",name:"type",value:e.type,onChange:C,children:[a.jsx("option",{value:"vendor",children:"Vendor Payment"}),a.jsx("option",{value:"customer",children:"Customer Payment"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Search Records"}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${e.type} name or document number...`,value:p,onChange:E=>v(E.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Select Record to Update *"}),a.jsx("div",{className:"border rounded",style:{maxHeight:"300px",overflowY:"auto"},children:S.length===0?a.jsx("div",{className:"p-3 text-muted text-center",children:"No records found"}):S.map(E=>{const T=e.type==="vendor"?E.vendor:E?.customer,A=e.recordId===(E._id||E.id);return a.jsx("div",{className:`p-3 border-bottom cursor-pointer ${A?"bg-primary text-white":"bg-light"}`,onClick:()=>y(E),style:{cursor:"pointer"},children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("strong",{children:T||"Unknown"}),a.jsx("br",{}),a.jsxs("small",{children:["Doc: ",E.docnumber||"N/A"]})]}),a.jsxs("div",{className:"text-end",children:[a.jsxs("strong",{children:["",(E.balance||0).toFixed(2)]}),a.jsx("br",{}),a.jsx("small",{children:"Balance"})]})]})},E._id||E.id)})})]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("form",{onSubmit:k,children:[e.selectedRecord&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("h6",{children:"Selected Record:"}),a.jsx("p",{className:"mb-1",children:a.jsxs("strong",{children:[e.type==="vendor"?e.selectedRecord.vendor:e.selectedRecord.customer,console.log(e.selectedRecord.customer)]})}),a.jsxs("p",{className:"mb-1",children:["Document: ",e.selectedRecord.docnumber]}),a.jsxs("p",{className:"mb-0",children:["Current Balance: ",a.jsxs("strong",{children:["",(e.selectedRecord.balance||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"paymentAmount",className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-currency-rupee"})}),a.jsx("input",{type:"number",id:"paymentAmount",className:`form-control ${parseFloat(e?.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)?"is-invalid":""}`,name:"paymentAmount",value:e.paymentAmount,onChange:C,placeholder:"0.00",min:"0",step:"0.01",required:!0,max:e?.selectedRecord?.balance,disabled:!e.selectedRecord}),parseFloat(e.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)&&a.jsxs("div",{className:"invalid-feedback",children:["Amount cannot exceed current balance of ",(e?.selectedRecord?.balance||0).toFixed(2)]})]}),D!==null&&a.jsxs("small",{className:"text-muted mt-1 d-block",children:["New balance will be: ",a.jsxs("strong",{children:["",D.toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:e.paymentMethod,onChange:C,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:e.description,onChange:C,rows:"3",placeholder:"Payment description or notes..."})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!e.selectedRecord||!e.paymentAmount,children:d?"Updating...":"Update Balance"})]})]})})]})]})]})})})]})}function q5e(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),u=()=>{let D={};const E=/^\d{6}$/;return D.categoryName=e.categoryName?"":"Required",D.rangeFrom=e.rangeFrom?E.test(e.rangeFrom)?"":"Must be 6 digits":"Required",D.rangeTo=e.rangeTo?E.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(D),Object.values(D).every(T=>T==="")},h=D=>{t({...e,[D.target.name]:D.target.value})},m=async D=>{if(D.preventDefault(),!!u())try{s?(await Oe.put(`/api/purchase-contract-categories/${s}`,e),alert("Purchase contract category updated successfully!")):(await Oe.post("/api/purchase-contract-categories",e),alert("Purchase contract category added successfully!")),p(),g()}catch(E){console.error("Error saving purchase contract category:",E),alert("Error saving purchase contract category. Please try again.")}},p=async()=>{try{const D=await Oe.get("/api/purchase-contract-categories",{params:{companyId:c,financialYear:d}});n(D.data)}catch(D){console.error("Error fetching purchase contract categories:",D)}},v=D=>{t(D),i(D._id),l({})},g=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{p()},[]);const[b,y]=w.useState(!1),C=()=>y(!0),N=()=>y(!1),[k,S]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-1",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"",children:"Purchase Contract Categories"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract Categories"})]})})]})}),a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[s?"Edit":"Create"," Purchase Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{N(),g()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:m,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:h,className:`form-control ${o.categoryName?"is-invalid":""}`,placeholder:"Enter category name (e.g., Procurement Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},className:`form-control ${o.rangeFrom?"is-invalid":""}`,placeholder:"Enter start range (6 digits)",min:"100000",maxLength:6,max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:`form-control ${o.rangeTo?"is-invalid":""}`,value:e.rangeTo,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-end",children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((D,E)=>a.jsxs("tr",{children:[a.jsx("td",{children:E+1}),a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeFrom?.toLocaleString()}),a.jsx("td",{children:D.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(D),C()},title:"Edit Category",children:"Edit"})})})]},D._id))})]})})})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var VW=function(e,t){return(VW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])})(e,t)};function Ud(e,t){function r(){this.constructor=e}VW(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Ir(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(d){try{c(n.next(d))}catch(u){i(u)}}function l(d){try{c(n.throw(d))}catch(u){i(u)}}function c(d){d.done?s(d.value):new r(function(u){u(d.value)}).then(o,l)}c((n=n.apply(e,[])).next())})}function Pr(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&u[0]?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(h){u=[6,h],n=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}var V5e=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,r){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+r+"."),this.platformName=t,this.platform=r},e.prototype.registerFlag=function(t,r,n){if(this.flagRegistry[t]={evaluationFn:r,setHook:n},this.urlFlags[t]!=null){var s=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+s+"."),this.set(t,s)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var r,n,s=(r=this.global.location.search,n={},r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return z5e(n,o[0],o[1]),o.join("=")}),n);"tfjsflags"in s&&s.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),l=o[0],c=o[1];t.urlFlags[l]=function(d,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+d+".")}(l,c)})}},e}();function z5e(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function $t(){return zW}var zW=null,Yw=new Map,FD=new Map;function HW(e,t){var r=GW(e,t);return Yw.get(r)}function H5e(e){return FD.get(e)}function q8(e){for(var t=Yw.entries(),r=[];;){var n=t.next(),s=n.done,i=n.value;if(s)break;var o=i[0],l=i[1];o.split("_")[0]===e&&r.push(l)}return r}function WW(e){var t=e.kernelName,r=e.backendName,n=GW(t,r);if(Yw.has(n))throw new Error("The kernel '"+t+"' for backend '"+r+"' is already registered");Yw.set(n,e)}function W5e(e){var t=e.kernelName;FD.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),FD.set(t,e)}function GW(e,t){return t+"_"+e}function LD(e,t,r){return Math.max(e,Math.min(t,r))}function YW(e){return e%2==0?e:e+1}function G5e(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function ze(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ua(e,t,r){r===void 0&&(r=""),ze(Ei(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})}function ug(e){ze(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Fv(e,t,r){if(t===void 0&&(t=[]),r===void 0&&(r=!1),t==null&&(t=[]),Array.isArray(e)||Uu(e)&&!r)for(var n=0;n<e.length;++n)Fv(e[n],t,r);else t.push(e);return t}function Mr(e){if(e.length===0)return 1;for(var t=e[0],r=1;r<e.length;r++)t*=e[r];return t}function Ei(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function qs(e){return e%1==0}function Y5e(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function BD(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function dv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function V8(e,t,r){return t===void 0&&(t=function(n){return 0}),new Promise(function(n,s){var i=0,o=function(){if(e())n();else{i++;var l=t(i);r!=null&&i>=r?s():setTimeout(o,l)}};o()})}function K5e(e,t){for(var r=1,n=-1,s=0;s<e.length;++s)if(e[s]>=0)r*=e[s];else if(e[s]===-1){if(n!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+n+" and dim "+s);n=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(n===-1){if(t>0&&t!==r)throw Error("Size("+t+") must match the product of shape "+e);return e}if(r===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+r);var i=e.slice();return i[n]=t/r,i}function xi(e,t){var r=t.length;return ze((e=e==null?t.map(function(n,s){return s}):[].concat(e)).every(function(n){return n>=-r&&n<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e}),ze(e.every(function(n){return qs(n)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(n){return n<0?r+n:n})}function $p(e,t){for(var r=[],n=[],s=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||s?null:xi(t,e).sort(),o=0,l=0;l<e.length;++l){if(i!=null){if(i[o]===l&&e[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+e[l]+"' is not 1");(i[o]==null||i[o]>l)&&e[l]===1&&(r.push(e[l]),n.push(l)),i[o]<=l&&o++}e[l]!==1&&(r.push(e[l]),n.push(l))}return{newShape:r,keptDims:n}}function _y(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);r=new Uint8Array(t)}return r}function Kw(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);r=new Array(t)}return r}function X5e(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+t+" being uploaded contains "+n+".")}}function Q5e(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function J5e(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Uu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function KW(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function Z5e(e){if(e==null)return 0;var t=0;return e.forEach(function(r){return t+=r.length}),t}function mT(e){return typeof e=="string"||e instanceof String}function eDe(e){return typeof e=="boolean"}function tDe(e){return typeof e=="number"}function u1(e){return Array.isArray(e)?u1(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":tDe(e)?"float32":mT(e)?"string":eDe(e)?"bool":"float32"}function UD(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $D(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}function $u(e){var t=e.length;if(t<2)return[];var r=new Array(t-1);r[t-2]=e[t-1];for(var n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}function XW(e,t,r){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Fv(e)),r&&X5e(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}throw new Error("Unknown data type "+t)}function z8(e,t){if(e.length===0)return t[0];var r=e.reduce(function(n,s){return n*s});if(r===0)return[];if(r!==t.length)throw new Error("["+e+"] does not match the input size.");return function n(s,i,o){var l=new Array;if(i.length===1)for(var c=i[0],d=0;d<c;d++)l[d]=o[s+d];else{c=i[0];var u=i.slice(1),h=u.reduce(function(m,p){return m*p});for(d=0;d<c;d++)l[d]=n(s+d*h,u,o)}return l}(0,e,t)}function QW(e,t){for(var r=h1(e,t),n=0;n<r.length;n++)r[n]=1;return r}function h1(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function ku(){return $t().platform.now()}function JW(e){e.forEach(function(t){ze(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function rDe(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",$t().platform.encode(e,t)}function Xw(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",$t().platform.decode(e,t)}function H8(e,t,r){if(t===0)return 0;if(t===1)return e[0];for(var n=e[e.length-1],s=0;s<e.length-1;++s)n+=r[s]*e[s];return n}function nDe(e,t,r){if(t===0)return[];if(t===1)return[e];for(var n=new Array(t),s=0;s<n.length-1;++s)n[s]=Math.floor(e/r[s]),e-=n[s]*r[s];return n[n.length-1]=e,n}var aDe=function(){function e(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new sDe)}return e.prototype.profileKernel=function(t,r,n){var s,i=this,o=this.backendTimer.time(function(){s=n()});return s.forEach(function(l){l.data().then(function(c){(function(d,u,h){if(u!=="float32")return!1;for(var m=0;m<d.length;m++){var p=d[m];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+h+"'"),!0}})(c,l.dtype,t),o.then(function(d){var u="";d.getExtraProfileInfo!=null&&(u=d.getExtraProfileInfo()),i.logger.logKernelProfile(t,l,c,d.kernelMs,r,u)})})}),s},e}(),sDe=function(){function e(){}return e.prototype.logKernelProfile=function(t,r,n,s,i,o){var l=typeof s=="number"?dv(s+"ms",9):s.error,c=dv(t,25),d=r.rank,u=r.size,h=dv(r.shape.toString(),14),m="";for(var p in i){var v=i[p].shape||r.shape,g=v.length;m+=p+": "+g+"D "+(g>0?v:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+h+"	%c"+u+"	%c"+m+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),W8=20,gb=3,wE=7;function iDe(e,t,r,n){var s=$u(t),i=function(d,u,h,m){var p=Mr(u),v=m[m.length-1],g=new Array(v).fill(0),b=u.length,y=h==="complex64"?yb(d):d;if(b>1)for(var C=0;C<p/v;C++)for(var N=C*v,k=0;k<v;k++)g[k]=Math.max(g[k],bb(y[N+k],0,h).length);return g}(e,t,r,s),o=t.length,l=function d(u,h,m,p,v,g){g===void 0&&(g=!0);var b=m==="complex64"?2:1,y=h[0],C=h.length;if(C===0)return m==="complex64"?[bb(yb(u)[0],0,m)]:m==="bool"?[ZW(u[0])]:[u[0].toString()];if(C===1){if(y>W8){var N=gb*b,k=Array.from(u.slice(0,N)),S=Array.from(u.slice((y-gb)*b,y*b));return m==="complex64"&&(k=yb(k),S=yb(S)),["["+k.map(function(re,U){return bb(re,v[U],m)}).join(", ")+", ..., "+S.map(function(re,U){return bb(re,v[y-gb+U],m)}).join(", ")+"]"]}return["["+(m==="complex64"?yb(u):Array.from(u)).map(function(re,U){return bb(re,v[U],m)}).join(", ")+"]"]}var D=h.slice(1),E=p.slice(1),T=p[0]*b,A=[];if(y>W8){for(var L=0;L<gb;L++){var P=(O=L*T)+T;A.push.apply(A,d(u.slice(O,P),D,m,E,v,!1))}for(A.push("..."),L=y-gb;L<y;L++)P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}else for(L=0;L<y;L++){var O;P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}var J=C===2?",":"";for(A[0]="["+A[0]+J,L=1;L<A.length-1;L++)A[L]=" "+A[L]+J;var W=`,
`;for(L=2;L<C;L++)W+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(g?"":W),A}(e,t,r,s,i),c=["Tensor"];return n&&(c.push("  dtype: "+r),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(l.map(function(d){return"    "+d}).join(`
`)),c.join(`
`)}function bb(e,t,r){return dv(Array.isArray(e)?parseFloat(e[0].toFixed(wE))+" + "+parseFloat(e[1].toFixed(wE))+"j":mT(e)?"'"+e+"'":r==="bool"?ZW(e):parseFloat(e.toFixed(wE)).toString(),t)}function ZW(e){return e===0?"false":"true"}function yb(e){for(var t=[],r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var Ey=function(){function e(t,r,n){var s=this;if(this.dtype=r,this.shape=t.slice(),this.size=Mr(t),n!=null){var i=n.length;ze(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+s.size+"'."})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Kw(r,this.size),this.strides=$u(t)}return e.prototype.set=function(t){for(var r=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];n.length===0&&(n=[0]),ze(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+r.rank+")"});var i=this.locToIndex(n);this.values[i]=t},e.prototype.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.length===0&&(t=[0]);for(var n=0,s=0,i=t;s<i.length;s++){var o=i[s];if(o<0||o>=this.shape[n]){var l="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(l)}n++}for(var c=t[t.length-1],d=0;d<t.length-1;++d)c+=this.strides[d]*t[d];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var r=t[t.length-1],n=0;n<t.length-1;++n)r+=this.strides[n]*t[n];return r},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var r=new Array(this.shape.length),n=0;n<r.length-1;++n)r[n]=Math.floor(t/this.strides[n]),t-=r[n]*this.strides[n];return r[r.length-1]=t,r},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Eu().makeTensor(this.values,this.shape,this.dtype)},e}(),Eu=null,Ft=null,eG=null,os=function(){function e(t,r,n,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=Mr(t),this.strides=$u(t),this.dataId=n,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),ze(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,r){return this.throwIfDisposed(),this.reshape([t,r])},e.prototype.as3D=function(t,r,n){return this.throwIfDisposed(),this.reshape([t,r,n])},e.prototype.as4D=function(t,r,n,s){return this.throwIfDisposed(),this.reshape([t,r,n,s])},e.prototype.as5D=function(t,r,n,s,i){return this.throwIfDisposed(),this.reshape([t,r,n,s,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),Ft.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,Ft.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Ft.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,z8(this.shape,t)]}})})},e.prototype.arraySync=function(){return z8(this.shape,this.dataSync())},e.prototype.data=function(){return Ir(this,void 0,void 0,function(){var t,r;return Pr(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=Eu().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:r=n.sent();try{return[2,r.map(function(s){return Xw(s)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Eu().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(r){return Xw(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Eu().read(this.dataId)];case 1:return t=r.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Eu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),Ft.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),Ft.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),Ft.expandDims(this,t)},e.prototype.cumsum=function(t,r,n){return t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1),Ft.cumsum(this,t,r,n)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),Ft.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Ft.clone(this)},e.prototype.oneHot=function(t,r,n){return this.throwIfDisposed(),Ft.oneHot(this,t,r,n)},e.prototype.toString=function(t){return t===void 0&&(t=!1),iDe(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),Ft.tile(this,t)},e.prototype.gather=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Ft.gather(this,t,r)},e.prototype.matMul=function(t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!1),this.throwIfDisposed(),Ft.matMul(this,t,r,n)},e.prototype.dot=function(t){return this.throwIfDisposed(),Ft.dot(this,t)},e.prototype.norm=function(t,r,n){return t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ft.norm(this,t,r,n)},e.prototype.slice=function(t,r){return this.throwIfDisposed(),Ft.slice(this,t,r)},e.prototype.reverse=function(t){return this.throwIfDisposed(),Ft.reverse(this,t)},e.prototype.concat=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ft.concat([this].concat(t),r)},e.prototype.split=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Ft.split(this,t,r)},e.prototype.stack=function(t,r){return r===void 0&&(r=0),Ft.stack([this,t],r)},e.prototype.unstack=function(t){return t===void 0&&(t=0),Ft.unstack(this,t)},e.prototype.pad=function(t,r){return r===void 0&&(r=0),Ft.pad(this,t,r)},e.prototype.batchNormalization=function(t,r,n,s,i){return n===void 0&&(n=.001),eG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,r,i,s,n)},e.prototype.batchNorm=function(t,r,n,s,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Ft.batchNorm(this,t,r,n,s,i)},e.prototype.all=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.all(this,t,r)},e.prototype.any=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.any(this,t,r)},e.prototype.logSumExp=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.logSumExp(this,t,r)},e.prototype.sum=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.sum(this,t,r)},e.prototype.prod=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.prod(this,t,r)},e.prototype.mean=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.mean(this,t,r)},e.prototype.min=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.min(this,t,r)},e.prototype.max=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ft.max(this,t,r)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Ft.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Ft.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Ft.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),Ft.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),Ft.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),Ft.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),Ft.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),Ft.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),Ft.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),Ft.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),Ft.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),Ft.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),Ft.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),Ft.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ft.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),Ft.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),Ft.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Ft.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),Ft.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Ft.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),Ft.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),Ft.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Ft.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),Ft.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),Ft.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Ft.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),Ft.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),Ft.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),Ft.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),Ft.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),Ft.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Ft.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),Ft.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Ft.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ft.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Ft.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ft.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),Ft.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ft.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),Ft.logicalXor(this,t)},e.prototype.where=function(t,r){return this.throwIfDisposed(),Ft.where(t,this,r)},e.prototype.neg=function(){return this.throwIfDisposed(),Ft.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ft.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ft.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ft.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ft.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ft.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ft.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ft.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ft.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ft.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ft.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ft.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ft.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ft.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ft.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ft.abs(this)},e.prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Ft.clipByValue(this,t,r)},e.prototype.relu=function(){return this.throwIfDisposed(),Ft.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ft.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ft.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ft.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Ft.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),Ft.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ft.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ft.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ft.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ft.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ft.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ft.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ft.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ft.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ft.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ft.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ft.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ft.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ft.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ft.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ft.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ft.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ft.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ft.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ft.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Ft.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Ft.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Ft.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Ft.image.resizeBilinear(this,t,r)},e.prototype.resizeNearestNeighbor=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Ft.image.resizeNearestNeighbor(this,t,r)},e.prototype.conv1d=function(t,r,n,s,i,o){return s===void 0&&(s="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Ft.conv1d(this,t,r,n,s,i,o)},e.prototype.conv2d=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ft.conv2d(this,t,r,n,s,i,o)},e.prototype.conv2dTranspose=function(t,r,n,s,i){return this.throwIfDisposed(),Ft.conv2dTranspose(this,t,r,n,s,i)},e.prototype.depthwiseConv2D=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Ft.depthwiseConv2d(this,t,r,n,s,i,o)},e.prototype.separableConv2d=function(t,r,n,s,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),Ft.separableConv2d(this,t,r,n,s,i,o)},e.prototype.avgPool=function(t,r,n,s){return this.throwIfDisposed(),Ft.avgPool(this,t,r,n,s)},e.prototype.maxPool=function(t,r,n,s){return this.throwIfDisposed(),Ft.maxPool(this,t,r,n,s)},e.prototype.localResponseNormalization=function(t,r,n,s){return t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5),Ft.localResponseNormalization(this,t,r,n,s)},e.prototype.pool=function(t,r,n,s,i){return this.throwIfDisposed(),Ft.pool(this,t,r,n,s,i)},e.prototype.variable=function(t,r,n){return t===void 0&&(t=!0),this.throwIfDisposed(),Eu().makeVariable(this,t,r,n)},e.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),Ft.unsortedSegmentSum(this,t,r)},e.prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),Ft.batchToSpaceND(this,t,r)},e.prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),Ft.spaceToBatchND(this,t,r)},e.prototype.topk=function(t,r){return t===void 0&&(t=1),r===void 0&&(r=!0),this.throwIfDisposed(),Ft.topk(this,t,r)},e.prototype.stridedSlice=function(t,r,n,s,i,o,l,c){return s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),Ft.stridedSlice(this,t,r,n,s,i,o,l,c)},e.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),Ft.depthToSpace(this,t,r)},e.prototype.fft=function(){return this.throwIfDisposed(),Ft.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ft.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ft.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ft.spectral.irfft(this)},e}();Object.defineProperty(os,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var G8,qD,VD,zD,HD,Lv=function(e){function t(r,n,s,i){var o=e.call(this,r.shape,r.dtype,r.dataId,i)||this;return o.trainable=n,o.name=s,o}return Ud(t,e),t.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and previous value ("+this.dtype+") must match");if(!Ei(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and previous value ("+this.shape+") must match");Eu().disposeTensor(this),this.dataId=r.dataId,Eu().incRef(this,null)},t.prototype.dispose=function(){Eu().disposeVariable(this),this.isDisposedInternal=!0},t}(os);Object.defineProperty(Lv,Symbol.hasInstance,{value:function(e){return e instanceof os&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(G8||(G8={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(qD||(qD={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(VD||(VD={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(zD||(zD={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(HD||(HD={}));var oDe={float32:zD,int32:qD,bool:VD,complex64:HD};function Wi(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return oDe[e][t]}function SE(e){return Wi(e,"int32")}function hs(e,t){if(e.dtype===t.dtype)return[e,t];var r=Wi(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function lDe(e,t){ze(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function tG(e){var t=[];return function r(n,s,i){if(n!=null){if(n instanceof os)return void s.push(n);if(o=n,!(!Array.isArray(o)&&typeof o!="object")){var o,l=n;for(var c in l){var d=l[c];i.has(d)||(i.add(d),r(d,s,i))}}}}(e,t,new Set),t}var CE,Y8=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),cDe=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Y8}return e.prototype.ready=function(){return Ir(this,void 0,void 0,function(){var t,r,n;return Pr(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),r=0,s.label=1;case 1:return r<t.length?(n=t[r],[4,this.initializeBackend(n).success]):[3,5];case 2:return s.sent()?[4,this.setBackend(n)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),r=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,r,n){return n===void 0&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:r,priority:n},!0)},e.prototype.setBackend=function(t){return Ir(this,void 0,void 0,function(){var r,n,s;return Pr(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(t),n=r.success,r.asyncInit?[4,n]:[3,2]);case 1:return s=i.sent(),[3,3];case 2:s=n,i.label=3;case 3:if(!s)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new aDe(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;q8(this.backendName).forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var r=this;q8(t).forEach(function(n){n.disposeFunc!=null&&n.disposeFunc(r.registry[t])})},e.prototype.initializeBackend=function(t){var r=this,n=this.registryFactory[t];if(n==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var s=n.factory();if(Promise.resolve(s)===s){var i=++this.pendingBackendInitId,o=s.then(function(l){return!(i<r.pendingBackendInitId)&&(r.registry[t]=l,r.pendingBackendInit=null,!0)}).catch(function(l){return!(i<r.pendingBackendInitId)&&(r.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,n){return t.registryFactory[n].priority-t.registryFactory[r].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),r=0;r<t.length;r++){var n=t[r],s=this.initializeBackend(n),i=s.success,o=s.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,r){var n=this.state.tensorInfo.get(r),s=n.backend,i=this.readSync(r);s.disposeData(r),n.backend=t,t.move(r,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,r){var n,s=this,i=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return s.startScope(i)},function(){return s.endScope(n)},function(){return(n=r())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(t,r,n){t();try{var s=n();return r(),s}catch(i){throw r(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[r],function(s){return{x:function(){return s.toFloat()}}},[]),r},e.prototype.runKernel=function(t,r,n,s,i){return this.runKernelFunc(null,r,null,t,n,s,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,r,n){var s=this.backend.numDataIds(),i=0;n.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-o;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,r,n,s,i,o,l){var c,d=this;o===void 0&&(o=[]),l===void 0&&(l=[]);var u=[],h=this.isTapeOn();s==null&&(s=this.state.activeScope!=null?this.state.activeScope.name:"");var m,p=function(C){h&&(u=C.map(function(N){return d.keep(d.clone(N))}))},v=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,y=HW(s,this.backendName);return m=y!=null?function(){var C=d.backend.numDataIds();b=y.kernelFunc({inputs:r,attrs:i,backend:d.backend});var N=Array.isArray(b)?b:[b];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,N);var k=N.map(function(D){var E=D.dataId,T=D.shape,A=D.dtype;return d.makeTensorFromDataId(E,T,A)}),S=k.filter(function(D,E){return l[E]});return p((o||[]).slice().concat(S)),k}:function(){var C=d.backend.numDataIds();b=d.tidy(function(){return t(d.backend,p)});var N=Array.isArray(b)?b:[b];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,N),N},this.scopedRun(function(){return d.state.kernelDepth++},function(){return d.state.kernelDepth--},function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(s,r,function(){return m()}):m()}),h&&this.addTapeNode(s,r,c,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(function(C){return r[C].shape}),outputShapes:c.map(function(C){return C.shape})}),Array.isArray(b)?c:c[0]},e.prototype.makeTensor=function(t,r,n,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",s=s||this.backend;var i=t;n==="string"&&mT(t[0])&&(i=t.map(function(u){return rDe(u)}));var o=s.write(i,r,n),l=new os(r,n,o,this.nextTensorId());if(this.incRef(l,s),n==="string"){var c=this.state.tensorInfo.get(o),d=Z5e(i);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},e.prototype.makeTensorFromDataId=function(t,r,n,s){var i=new os(r,n=n||"float32",t,this.nextTensorId());return this.incRef(i,s),i},e.prototype.makeVariable=function(t,r,n,s){r===void 0&&(r=!0),n=n||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.asType(s));var i=new Lv(t,r,n,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,r){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,n===0){this.state.numDataBuffers++;var s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*KW(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Lv||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var r=this.state.registeredVariables[t];this.disposeVariable(r)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){return this.state.profiling=!0,r=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,r,n,s,i){var o=this,l={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:n,saved:i},c=H5e(t);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=function(d){return d=d.map(function(u,h){if(u==null){var m=n[h],p=h1(m.size,m.dtype);return o.makeTensor(p,m.shape,m.dtype)}return u}),s(d.length>1?d:d[0],i)}),this.state.activeTape.push(l)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r},e.prototype.endScope=function(t){for(var r=this,n=tG(t),s=new Set(n.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||s.has(o.id)||o.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(c){c.kept||c.scopeId!==l.id||r.track(c)})},e.prototype.gradients=function(t,r,n,s){var i=this;if(s===void 0&&(s=!1),ze(r.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});ze(o instanceof os,function(){return"The result y returned by f() must be a tensor."});var l=function(c,d,u){for(var h={},m={},p=0;p<d.length;p++)h[d[p].id]=!0;for(p=0;p<c.length;p++){var v=(D=c[p]).inputs;for(var g in v){for(var b=v[g],y=!1,C=0;C<d.length;C++)if(h[b.id]){D.outputs.forEach(function(L){return h[L.id]=!0}),y=!0,m[D.id]=!0;break}if(y)break}}var N={};N[u.id]=!0;var k={};for(p=c.length-1;p>=0;p--)for(v=(D=c[p]).inputs,C=0;C<D.outputs.length;C++)if(N[D.outputs[C].id]){for(var g in v)N[v[g].id]=!0,k[D.id]=!0;break}var S=[];for(p=0;p<c.length;p++){var D;if(m[(D=c[p]).id]&&k[D.id]){var E={};for(var g in D.inputs){var T=D.inputs[g];h[T.id]&&(E[g]=T)}var A=Object.assign({},D);A.inputs=E,A.outputs=D.outputs,S.push(A)}}return S}(this.state.activeTape,r,o);if(!s&&l.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,d,u={};u[o.id]=n??(c=o.shape,d=QW(Mr(c),"float32"),ut.makeTensor(d,c,"float32")),function(m,p,v){for(var g=function(y){var C=p[y],N=[];if(C.outputs.forEach(function(E){var T=m[E.id];T!=null?N.push(T):N.push(null)}),C.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+C.kernelName+".");var k=C.gradient(N),S=function(E){if(!(E in k))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(k)+".");var T=v(function(){return k[E]()});if(T.dtype!=="float32")throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+T.dtype+"'");var A=C.inputs[E];if(!Ei(T.shape,A.shape))throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input '"+E+"' has shape '"+T.shape+"', which does not match the shape of the input '"+A.shape+"'");if(m[A.id]==null)m[A.id]=T;else{var L=m[A.id];m[A.id]=L.add(T),L.dispose()}};for(var D in C.inputs)S(D)},b=p.length-1;b>=0;b--)g(b)}(u,l,function(m){return i.tidy(m)});var h=r.map(function(m){return u[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var p=0,v=m.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:o,grads:h}})},e.prototype.customGrad=function(t){var r=this;return ze(UD(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];ze(s.every(function(l){return l instanceof os}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return s.forEach(function(l,c){o[c]=l}),r.runKernelFunc(function(l,c){return ze((n=t.apply(void 0,s.concat([c]))).value instanceof os,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ze(UD(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(l,c){var d=n.gradFunc(l,c),u=Array.isArray(d)?d:[d];ze(u.length===s.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ze(u.every(function(m){return m instanceof os}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return u.forEach(function(m,p){h[p]=function(){return m}}),h})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){switch(s.label){case 0:return r=ku(),[4,this.backend.time(t)];case 1:return(n=s.sent()).wallMs=ku()-r,[2,n]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Y8,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ut=function(){var e=function(){if(CE==null){var r=void 0;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else{if(typeof self>"u")throw new Error("Could not find a global object");r=self}CE=r}return CE}();if(e._tfengine==null){var t=new V5e(e);e._tfengine=new cDe(t)}return function(r){zW=r}(e._tfengine.ENV),Eu=function(){return e._tfengine},e._tfengine}();function rG(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ph=$t();Ph.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ph.registerFlag("IS_BROWSER",function(){return rG()}),Ph.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ph.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ph.registerFlag("PROD",function(){return!1}),Ph.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ph.getBool("DEBUG")}),Ph.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ph.registerFlag("IS_TEST",function(){return!1});var Dy,Yl,zl,Rp={},kE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dDe(e,t){Rp[e]=t}function th(e){e in Rp||(Rp[e]=function(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=function(s){if(typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(r);return n.addEventListener("webglcontextlost",function(s){s.preventDefault(),delete Rp[r]},!1),r===1?n.getContext("webgl",kE)||n.getContext("experimental-webgl",kE):n.getContext("webgl2",kE)}(e));var t=Rp[e];return t.isContextLost()?(delete Rp[e],th(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Rp[e])}function PS(e,t){return[t,e]}function Wb(e){var t=Mr(e);return BD(Math.ceil(t/4))}function f1(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function pT(e,t){var r,n,s,i,o,l,c,d,u,h=e;return $t().getNumber("WEBGL_VERSION")===2?(r=h.R32F,n=h.R16F,s=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,c=1,d=h.HALF_FLOAT,u=h.FLOAT):(r=e.RGBA,n=e.RGBA,s=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:u}}function Fr(e,t,r){var n=r();return t&&function(s){var i=s.getError();if(i!==s.NO_ERROR)throw new Error("WebGL Error: "+mDe(s,i))}(e),n}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Dy||(Dy={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Yl||(Yl={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(zl||(zl={}));var uDe=596e-10,hDe=65504;function fDe(e){return!!($t().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||uDe<Math.abs(e)&&Math.abs(e)<hDe)}function mDe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Qj(e,t,r){return yf(e,t,function(){return e.getExtension(r)},'Extension "'+r+'" not supported on this browser.')}function pDe(e,t,r){var n=yf(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Fr(e,t,function(){return e.shaderSource(n,r)}),Fr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function xDe(e,t,r){var n=yf(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Fr(e,t,function(){return e.shaderSource(n,r)}),Fr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw function(s,i){var o=vDe.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(s);for(var l=+o[1],c=s.split(`
`),d=c.length.toString().length+2,u=c.map(function(b,y){return dv((y+1).toString(),d)+b}),h=0,m=0;m<u.length;m++)h=Math.max(u[m].length,h);var p=u.slice(0,l-1),v=u.slice(l-1,l),g=u.slice(l);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+dv(v[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(r,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var _E,EE,vDe=/ERROR: [0-9]+:([0-9]+):/g;function gDe(e,t){return yf(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function bDe(e,t,r){if(Fr(e,t,function(){return e.linkProgram(r)}),e.getProgramParameter(r,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function DE(e,t,r){if(Fr(e,t,function(){return e.validateProgram(r)}),e.getProgramParameter(r,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function yDe(e,t,r){var n=yf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),Fr(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function jDe(e,t,r){var n=yf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Fr(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),Fr(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function NDe(e,t){return yf(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function wDe(e,t){var r=$t().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var n="["+e+"x"+t+"]";throw new Error("Requested texture size "+n+" is invalid.")}if(e>r||t>r)throw n="["+e+"x"+t+"]",new Error("Requested texture size "+n+" greater than WebGL maximum on this browser / GPU "+("["+r+"x"+r+"]")+".")}function SDe(e,t){return yf(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function K8(e,t,r,n,s,i,o,l){var c=e.getAttribLocation(r,n);return c!==-1&&(Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Fr(e,t,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,l)}),Fr(e,t,function(){return e.enableVertexAttribArray(c)}),!0)}function CDe(e,t,r,n){ADe(e,n),Fr(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)})}function kDe(e,t,r,n){return yf(e,t,function(){return e.getUniformLocation(r,n)},'uniform "'+n+'" not present in program.')}function _De(e,t,r){return e.getUniformLocation(t,r)}function EDe(e,t,r,n,s,i){Fr(e,t,function(){return CDe(e,t,n,i)}),Fr(e,t,function(){return e.uniform1i(s,i)})}function AE(e,t,r,n){Fr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Fr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)})}function X8(e,t,r){Fr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Fr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Jj(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+DDe(e,t))}function DDe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function yf(e,t,r,n){var s=Fr(e,t,function(){return r()});if(s==null)throw new Error(n);return s}function ADe(e,t){var r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=t+e.TEXTURE0;if(n<e.TEXTURE0||n>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}function Qw(e,t){return t===void 0&&(t=2),Mr(e.slice(0,e.length-t))}function Jw(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function TE(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Qw(e)].concat(Jw(e))),t}function TDe(e,t){var r;t===void 0&&(t=!1);var n=$t().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,(e=e.map(function(d,u){return u>=e.length-2?YW(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var s=$p(e);e=s.newShape}var i=Mr(e);if(e.length<=1&&i<=n)return[1,i];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Qw(e),l=2,c=2;return e.length&&(l=(r=Jw(e))[0],c=r[1]),BD(i=o*(l/2)*(c/2)).map(function(d){return 2*d})}return BD(i)}function Zj(e){return e%2==0}function eN(e,t){if(Ei(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var r=e.slice(-1)[0],n=t.slice(-1)[0];if(r===n||Zj(r)&&Zj(n)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Zj(e[0])&&Zj(t[0])}function IDe(e){if(_E==null){var t=th(e);_E=t.getParameter(t.MAX_TEXTURE_SIZE)}return _E}function PDe(e){if(EE==null){var t=th(e);EE=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EE)}function ODe(e){if(e===0)return 0;var t=th(e);return Vc(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Vc(t,"EXT_disjoint_timer_query")?1:0}function Vc(e,t){return e.getExtension(t)!=null}function Q8(e){try{if(th(e)!=null)return!0}catch{return!1}return!1}function MDe(e){if(e===0)return!1;var t=th(e);if(e===1){if(!Vc(t,"OES_texture_float"))return!1}else if(!Vc(t,"EXT_color_buffer_float"))return!1;return WD(t)}function RDe(e){if(e===0)return!1;var t=th(e);if(e!==1){if(Vc(t,"EXT_color_buffer_float"))return WD(t);if(Vc(t,"EXT_color_buffer_half_float")){var r=t.getExtension("EXT_color_buffer_half_float");return function(n,s){var i=pT(n,s),o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,l),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var c=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(o),n.deleteFramebuffer(l),c}(t,r)}return!1}return!!Vc(t,"OES_texture_float")&&!!Vc(t,"WEBGL_color_buffer_float")&&WD(t)}function WD(e){var t=pT(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),s}function FDe(e){return e===2&&th(e).fenceSync!=null}var cn=$t();function nG(e){$t().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function kr(e,t){return ut.tidy(e,t)}function fl(e){tG(e).forEach(function(t){return t.dispose()})}function LDe(e){return ut.keep(e)}function Zw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$t().getBool("IS_TEST")||console.warn.apply(console,e)}function rp(e,t){var r=e;if(Uu(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var n=[];Array.isArray(r)||Uu(r)&&t!=="string";)n.push(r.length),r=r[0];return Array.isArray(e)&&$t().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function s(i,o,l){if(l=l||[],!Array.isArray(i)&&!Uu(i))return void ze(o.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});ze(o.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),ze(i.length===o[0],function(){return"Element arr["+l.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),d=0;d<i.length;++d)s(i[d],c,l.concat(d))}(e,n,[]),n}function J8(e,t,r,n){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+r+"' passed to '"+n+"' must be "+e+" tensor, but got "+t+" tensor")}function Me(e,t,r,n){if(n===void 0&&(n="numeric"),e instanceof os)return J8(n,e.dtype,t,r),e;var s=u1(e);if(s!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(s=n),J8(n,s,t,r),e==null||!Uu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+r+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=rp(e,s);Uu(e)||Array.isArray(e)||(e=[e]);var l=s!=="string"?XW(e,s,$t().getBool("DEBUG")):Fv(e,[],!0);return ut.makeTensor(l,o,s)}function e2(e,t,r,n){if(n===void 0&&(n="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(s,i){return Me(s,t+"["+i+"]",r)},n)}function aG(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function BDe(e,t,r){for(var n=e.length+t.length,s=[],i=0,o=0,l=0;l<n;l++)r.indexOf(l)===-1?s.push(e[i++]):s.push(t[o++]);return s}function xo(e,t){for(var r=[],n=e.length,s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);return[r,t.map(function(i){return e[i]})]}function xl(e,t){return BDe(e,t.map(function(r){return 1}),t)}function Ul(e,t,r){ze(aG(t,r),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input."})}function rh(e,t){if(aG(e,t))return null;for(var r=[],n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);return e.forEach(function(s){return r.push(s)}),r}function xT(e){return e.map(function(t,r){return[r,t]}).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]})}function nh(e,t){for(var r=[],n=t-e;n<t;++n)r.push(n);return r}function UDe(e,t){var r=e[0].length;e.forEach(function(s,i){ze(s.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+r+")"})}),ze(t>=0&&t<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var n=e[0];e.forEach(function(s,i){for(var o=0;o<r;o++)ze(o===t||s[o]===n[o],function(){return"Error in concat"+r+"D: Shape of tensors["+i+"] ("+s+") does not match the shape of the rest ("+n+") along the non-concatenated axis "+i+"."})})}function Bv(e,t){for(var r=e[0].slice(),n=1;n<e.length;n++)r[t]+=e[n][t];return r}function et(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var r=t[0],n=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));var s=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ut.startScope(r);try{var l=n.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ut.endScope(l),l}catch(c){throw ut.endScope(null),c}};return Object.defineProperty(s,"name",{value:r,configurable:!0}),s}cn.registerFlag("HAS_WEBGL",function(){return cn.getNumber("WEBGL_VERSION")>0}),cn.registerFlag("WEBGL_VERSION",function(){return Q8(2)?2:Q8(1)?1:0}),cn.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return cn.get("WEBGL_VERSION")===2}),cn.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),cn.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),cn.registerFlag("WEBGL_PACK",function(){return cn.getBool("HAS_WEBGL")}),cn.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_CLIP",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),cn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_PACK_REDUCE",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_LAZILY_UNPACK",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_CONV_IM2COL",function(){return cn.getBool("WEBGL_PACK")}),cn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return IDe(cn.getNumber("WEBGL_VERSION"))}),cn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return PDe(cn.getNumber("WEBGL_VERSION"))}),cn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=cn.getNumber("WEBGL_VERSION");return e===0?0:ODe(e)}),cn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return cn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),cn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return MDe(cn.getNumber("WEBGL_VERSION"))}),cn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!cn.getBool("WEBGL_FORCE_F16_TEXTURES")&&cn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),cn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return RDe(cn.getNumber("WEBGL_VERSION"))}),cn.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return FDe(cn.getNumber("WEBGL_VERSION"))}),cn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return cn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),eG=nG;var zi=et({complex_:function(e,t){var r=Me(e,"real","complex"),n=Me(t,"imag","complex");return ua(r.shape,n.shape,"real and imag shapes, "+r.shape+" and "+n.shape+", must match in call to tf.complex()."),ut.runKernelFunc(function(s){return s.complex(r,n)},{$real:r,$imag:n})}}),Uc=et({real_:function(e){var t=Me(e,"input","real");return ut.runKernelFunc(function(r){return r.real(t)},{$input:t})}}),Du=et({imag_:function(e){var t=Me(e,"input","imag");return ut.runKernelFunc(function(r){return r.imag(t)},{$input:t})}});function Ki(e,t,r){return np(e,t,rp(e,r),r)}function np(e,t,r,n){if(n==null&&(n=u1(e)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Uu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){JW(t);var s=Mr(t),i=Mr(r);ze(s===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+i});for(var o=0;o<r.length;++o){var l=r[o],c=o!==r.length-1||l!==Mr(t.slice(o));ze(r[o]===t[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "})}}return Uu(e)||Array.isArray(e)||(e=[e]),t=t||r,e=n!=="string"?XW(e,n,$t().getBool("DEBUG")):Fv(e,[],!0),ut.makeTensor(e,t,n)}function yr(e,t){if((Uu(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Uu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return np(e,[],[],t)}function ti(e,t){ug(e);var r=rp(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return np(e,null,r,t)}function Im(e,t,r){if(ug(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=rp(e,r);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return np(e,t,n,r)}function vT(e,t,r){if(ug(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=rp(e,r);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function ol(e,t,r){if(ug(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=rp(e,r);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function $De(e,t,r){if(ug(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=rp(e,r);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function qDe(e,t,r){if(ug(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=rp(e,r);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return np(e,t=t||n,n,r)}function VDe(e,t,r,n){return t===void 0&&(t=!0),ut.makeVariable(e,t,r,n)}function hg(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=hg(e,"float32"),n=La(e,"float32");return zi(r,n)}var s=QW(Mr(e),t);return ut.makeTensor(s,e,t)}function La(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=La(e,"float32"),n=La(e,"float32");return zi(r,n)}var s=h1(Mr(e),t);return ut.makeTensor(s,e,t)}function qu(e,t,r){return ut.runKernelFunc(function(n){return n.fill(e,t,r)},{})}function zDe(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");return ut.runKernelFunc(function(n){return n.linspace(e,t,r)},{})}function t2(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&r<0||t<e&&r>1)return La([0],n);var s=h1(Math.abs(Math.ceil((t-e)/r)),n);t<e&&r===1&&(r=-1),s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+r;return ti(s,n)}var sG=et({onesLike_:function(e){var t=Me(e,"x","onesLike");if(t.dtype==="complex64"){var r=sG(Uc(t)),n=qn(Du(t));return zi(r,n)}return ut.runKernelFunc(function(s){return s.onesLike(t)},{$x:t},function(s,i){return{$x:function(){return qn(s)}}})}}),qn=et({zerosLike_:function(e){var t=Me(e,"x","zerosLike");return ut.runKernelFunc(function(r){return r.zerosLike(t)},{$x:t},function(r,n){return{$x:function(){return qn(r)}}})}}),di=et({concat_:function(e,t){t===void 0&&(t=0),ze(e.length>=1,function(){return"Pass at least one tensor to concat"});var r=e2(e,"tensors","concat");r[0].dtype==="complex64"&&r.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),t=xi(t,r[0].shape)[0];var n=Bv(r.map(function(l){return l.shape}),t);if(Mr(n)===0)return Ki([],n);if((r=r.filter(function(l){return l.size>0})).length===1)return r[0];var s=r.map(function(l){return l.shape});UDe(s,t);var i=r,o={axis:t};return ut.runKernelFunc(function(l){return l.concat(r,t)},i,function(l){var c=s.map(function(d){return d[t]});return gT(l,c,t).map(function(d){return function(){return d}})},"Concat",o)}}),HDe=et({concat1d_:function(e){return di(e,0)}}),WDe=et({concat2d_:function(e,t){return di(e,t)}}),GDe=et({concat3d_:function(e,t){return di(e,t)}}),YDe=et({concat4d_:function(e,t){return di(e,t)}}),gT=et({split_:function(e,t,r){r===void 0&&(r=0);var n,s=Me(e,"x","split");return r=xi(r,s.shape)[0],typeof t=="number"?(ze(s.shape[r]%t==0,function(){return"Number of splits must evenly divide the axis."}),n=new Array(t).fill(s.shape[r]/t)):(ze(s.shape[r]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),n=t),ut.runKernelFunc(function(i){return i.split(s,n,r)},{$x:s},function(i){return{$x:function(){return di(i,r)}}})}});function zx(e,t){return e(t={exports:{}},t.exports),t.exports}var KDe=zx(function(e){(function(t,r,n){function s(l){var c,d=this,u=(c=4022871197,function(h){h=h.toString();for(var m=0;m<h.length;m++){var p=.02519603282416938*(c+=h.charCodeAt(m));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var h=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=h-(d.c=0|h)},d.c=1,d.s0=u(" "),d.s1=u(" "),d.s2=u(" "),d.s0-=u(l),d.s0<0&&(d.s0+=1),d.s1-=u(l),d.s1<0&&(d.s1+=1),d.s2-=u(l),d.s2<0&&(d.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var d=new s(l),u=c&&c.state,h=d.next;return h.int32=function(){return 4294967296*d.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.alea=o})(0,e)}),XDe=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor128=o})(0,e)}),QDe=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^h^h<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),u==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorwow=o})(0,e)}),JDe=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.x,m=c.i;return d=h[m],u=(d^=d>>>7)^d<<24,u^=(d=h[m+1&7])^d>>>10,u^=(d=h[m+3&7])^d>>>3,u^=(d=h[m+4&7])^d<<7,d=h[m+7&7],u^=(d^=d<<13)^d<<9,h[m]=u,c.i=m+1&7,u},function(d,u){var h,m=[];if(u===(0|u))m[0]=u;else for(u=""+u,h=0;h<u.length;++h)m[7&h]=m[7&h]<<15^u.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],d.x=m,d.i=0,h=256;h>0;--h)d.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.x&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorshift7=o})(0,e)}),ZDe=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.w,m=c.X,p=c.i;return c.w=h=h+1640531527|0,u=m[p+34&127],d=m[p=p+1&127],u^=u<<13,d^=d<<17,u^=u>>>15,d^=d>>>12,u=m[p]=u^d,c.i=p,u+(h^h>>>16)|0},function(d,u){var h,m,p,v,g,b=[],y=128;for(u===(0|u)?(m=u,u=null):(u+="\0",m=0,y=Math.max(y,u.length)),p=0,v=-32;v<y;++v)u&&(m^=u.charCodeAt((v+32)%u.length)),v===0&&(g=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,v>=0&&(g=g+1640531527|0,p=(h=b[127&v]^=m+g)==0?p+1:0);for(p>=128&&(b[127&(u&&u.length||0)]=-1),p=127,v=512;v>0;--v)m=b[p+34&127],h=b[p=p+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,b[p]=m^h;d.w=g,d.X=b,d.i=p}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.X&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor4096=o})(0,e)}),e3e=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.b,m=c.c,p=c.d,v=c.a;return h=h<<25^h>>>7^m,m=m-p|0,p=p<<24^p>>>8^v,v=v-h|0,c.b=h=h<<20^h>>>12^m,c.c=m=m-p|0,c.d=p<<16^m>>>16^v,c.a=v-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var u=0;u<d.length+20;u++)c.b^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.tychei=o})(0,e)}),Fp=zx(function(e){(function(t,r){var n,s=this,i=256,o=6,l="random",c=r.pow(i,o),d=r.pow(2,52),u=2*d,h=i-1;function m(y,C,N){var k=[],S=g(function T(A,L){var P,O=[],J=typeof A;if(L&&J=="object")for(P in A)try{O.push(T(A[P],L-1))}catch{}return O.length?O:J=="string"?A:A+"\0"}((C=C==1?{entropy:!0}:C||{}).entropy?[y,b(t)]:y??function(){try{var T;return n&&(T=n.randomBytes)?T=T(i):(T=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(T)),b(T)}catch{var A=s.navigator,L=A&&A.plugins;return[+new Date,s,L,s.screen,b(t)]}}(),3),k),D=new p(k),E=function(){for(var T=D.g(o),A=c,L=0;T<d;)T=(T+L)*i,A*=i,L=D.g(1);for(;T>=u;)T/=2,A/=2,L>>>=1;return(T+L)/A};return E.int32=function(){return 0|D.g(4)},E.quick=function(){return D.g(4)/4294967296},E.double=E,g(b(D.S),t),(C.pass||N||function(T,A,L,P){return P&&(P.S&&v(P,D),T.state=function(){return v(D,{})}),L?(r[l]=T,A):T})(E,S,"global"in C?C.global:this==r,C.state)}function p(y){var C,N=y.length,k=this,S=0,D=k.i=k.j=0,E=k.S=[];for(N||(y=[N++]);S<i;)E[S]=S++;for(S=0;S<i;S++)E[S]=E[D=h&D+y[S%N]+(C=E[S])],E[D]=C;(k.g=function(T){for(var A,L=0,P=k.i,O=k.j,J=k.S;T--;)A=J[P=h&P+1],L=L*i+J[h&(J[P]=J[O=h&O+A])+(J[O]=A)];return k.i=P,k.j=O,L})(i)}function v(y,C){return C.i=y.i,C.j=y.j,C.S=y.S.slice(),C}function g(y,C){for(var N,k=y+"",S=0;S<k.length;)C[h&S]=h&(N^=19*C[h&S])+k.charCodeAt(S++);return b(C)}function b(y){return String.fromCharCode.apply(0,y)}if(r["seed"+l]=m,g(r.random(),t),e.exports){e.exports=m;try{n=require("crypto")}catch{}}})([],Math)});Fp.alea=KDe,Fp.xor128=XDe,Fp.xorwow=QDe,Fp.xorshift7=JDe,Fp.xor4096=ZDe,Fp.tychei=e3e;var OS=Fp.alea,bT=function(){function e(t,r,n,s,i){this.mean=t,this.stdDev=r,this.dtype=n,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=OS(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var r,n,s=!1;!s;){var i=void 0,o=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);r=this.mean+this.stdDev*i*c,n=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(r)||(s=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(r)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),t3e=function(){function e(t,r,n,s){this.alpha=t,this.beta=1/r,this.dtype=n;var i=s||Math.random();this.randu=OS(i.toString()),this.randn=new bT(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,r,n,s,i,o;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,r=1-.331*(t=s*s)*t,n=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<r||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),r3e=function(){function e(t,r,n,s){var i=this;if(t===void 0&&(t=0),r===void 0&&(r=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=r-t,this.dtype=n,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+r+" <= 1 and dtype is not float");this.random=OS(s)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function mn(e,t,r){return t===void 0&&(t="float32"),t=t||"float32",JW(e),new Ey(e,t,r)}function n3e(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var iG=et({batchToSpaceND_:function(e,t,r){var n=Me(e,"x","batchToSpaceND"),s=t.reduce(function(i,o){return i*o});return ze(n.rank>=1+t.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+t.length}),ze(r.length===t.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+t.length}),ze(n.shape[0]%s==0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),ut.runKernelFunc(function(i){return i.batchToSpaceND(n,t,r)},{$x:n},function(i){return{$x:function(){return i.spaceToBatchND(t,r)}}})}}),a3e=et({broadcastTo_:function(e,t){var r=Me(e,"broadcastTo","x"),n=r.shape;if(t.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<r.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+r.rank+".");if(t.length>r.rank){for(var s=r.shape.slice();s.length<t.length;)s.unshift(1);r=r.reshape(s)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(r.shape[o]===t[o])i[o]=1;else if(r.shape[o]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+t+"].");var l=i.map(function(c,d){return c>1?d:-1}).filter(function(c){return c>=0});return l.length===0?r.clone():ut.runKernelFunc(function(c){return c.tile(r,i)},{input:r},function(c){return{input:function(){return c.sum(l,!0)}}})}}),s3e=et({cast_:function(e,t){var r=Me(e,"x","cast");if(!Q5e(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var n={dtype:t};return ut.runKernelFunc(function(s){return s.cast(r,t)},{x:r},function(s){return{x:function(){return s.clone()}}},"Cast",n)}}),i3e=et({clone_:function(e){var t=Me(e,"x","clone",null);return ut.runKernelFunc(function(){return ut.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(r){return{$x:function(){return r.toFloat()}}})}}),o3e=et({cumsum_:function(e,t,r,n){t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var s=Me(e,"x","cumsum"),i=rh([t|=0],s.rank),o=s;i!=null&&(o=s.transpose(i));var l=nh(1,s.rank)[0],c=ut.runKernelFunc(function(d){return d.cumsum(o,l,r,n)},{permutedX:o},function(d){return{permutedX:function(){return d.cumsum(t,r,!n)}}});return i!=null&&(c=c.transpose(i)),c}}),l3e=et({depthToSpace_:function(e,t,r){r===void 0&&(r="NHWC");var n=Me(e,"x","depthToSpace"),s=r==="NHWC"?n.shape[1]:n.shape[2],i=r==="NHWC"?n.shape[2]:n.shape[3],o=r==="NHWC"?n.shape[3]:n.shape[1];return ze(s*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+t+`  for depthToSpace with input shape
      `+n.shape}),ze(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+n.shape}),ze(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+n.shape}),ut.runKernelFunc(function(l){return l.depthToSpace(n,t,r)},{$x:n})}}),Lc=et({expandDims_:function(e,t){t===void 0&&(t=0);var r=Me(e,"x","expandDims",null);ze(t<=r.rank,function(){return"Axis must be <= rank of the tensor"});var n=r.shape.slice();return t<0&&(ze(-(r.rank+1)<=t,function(){return"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"}),t=r.rank+t+1),n.splice(t,0,1),Ad(r,n)}}),oG=et({eye_:function(e,t,r,n){n===void 0&&(n="float32"),t==null&&(t=e);for(var s=mn([e,t],n),i=e<=t?e:t,o=0;o<i;++o)s.set(1,o,o);var l=s.toTensor().as2D(e,t);if(r==null)return l;if(r.length===1)return uv(Lc(l,0),[r[0],1,1]);if(r.length===2)return uv(Lc(Lc(l,0),0),[r[0],r[1],1,1]);if(r.length===3)return uv(Lc(Lc(Lc(l,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")}}),c3e=et({multinomial_:function(e,t,r,n){n===void 0&&(n=!1);var s=Me(e,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var l=o===1?s.as2D(1,-1):s,c=ut.runKernelFunc(function(d){return d.multinomial(l,n,t,r)},{logits2D:l});return o===1?c.as1D():c}}),GD=et({oneHot_:function(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=Me(e,"indices","oneHot","int32"),i=s.shape.concat([t]);return s=s.flatten(),ut.runKernelFunc(function(o){return o.oneHot(s,t,r,n)},{$indices:s},function(o){return{$indices:function(){return La(s.shape,"float32")}}}).reshape(i)}}),Hx=et({pad_:function(e,t,r){r===void 0&&(r=0);var n=Me(e,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:r};return ut.runKernelFunc(function(i){return i.pad(n,t,r)},{x:n},function(i){var o=t.map(function(l){return l[0]});return{x:function(){return i.slice(o,n.shape)}}},"PadV2",s)}}),d3e=et({pad1d_:function(e,t,r){return r===void 0&&(r=0),ze(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Hx(e,[t],r)}}),u3e=et({pad2d_:function(e,t,r){return r===void 0&&(r=0),ze(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),h3e=et({pad3d_:function(e,t,r){return r===void 0&&(r=0),ze(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),f3e=et({pad4d_:function(e,t,r){return r===void 0&&(r=0),ze(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),m3e=et({rand_:function(e,t,r){var n=Mr(e),s=null;if(r==null||r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else{if(r!=="bool")throw new Error("Unknown data type "+r);s=new Uint8Array(n)}for(var i=0;i<n;i++)s[i]=t();return ut.makeTensor(s,e,r)}}),p3e=et({randomNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new bT(t,r,n,!1,s),o=mn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),x3e=et({randomGamma_:function(e,t,r,n,s){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r==null&&(r=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var i=new t3e(t,r,n,s),o=mn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),lG=et({randomUniform_:function(e,t,r,n,s){t===void 0&&(t=0),r===void 0&&(r=1),n===void 0&&(n="float32");for(var i=mn(e,n),o=new r3e(t,r,null,s),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}}),Ad=et({reshape_:function(e,t){var r=Me(e,"x","reshape",null);t=K5e(t,r.size),ze(r.size===Mr(t),function(){return"new shape and old shape must have the same number of elements."});var n={shape:t};return ut.runKernelFunc(function(s){return s.reshape(r,t)},{x:r},function(s){return{x:function(){return s.reshape(r.shape)}}},"Reshape",n)}}),cG=et({spaceToBatchND_:function(e,t,r){var n=Me(e,"x","spaceToBatchND");return ze(n.rank>=1+t.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+t.length}),ze(r.length===t.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+t.length}),ze(n.shape.reduce(function(s,i,o){return o>0&&o<=t.length?s&&(i+r[o-1][0]+r[o-1][1])%t[o-1]==0:s},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+t.toString()}),ut.runKernelFunc(function(s){return s.spaceToBatchND(n,t,r)},{$x:n},function(s){return{$x:function(){return s.batchToSpaceND(t,r)}}})}}),dG=et({squeeze_:function(e,t){var r=Me(e,"x","squeeze");return Ad(r,$p(r.shape,t).newShape)}}),rc=et({stack_:function(e,t){t===void 0&&(t=0);var r=e2(e,"tensors","stack");if(ze(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length===1)return r[0].expandDims(t);var n=r[0].rank,s=r[0].shape,i=r[0].dtype;ze(t<=n,function(){return"Axis must be <= rank of the tensor"}),r.forEach(function(l){ua(s,l.shape,"All tensors passed to stack must have matching shapes")}),r.forEach(function(l){ze(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=r.map(function(l){return l.expandDims(t)});return di(o,t)}}),uv=et({tile_:function(e,t){var r=Me(e,"x","tile",null);ze(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of reps "+t+"."});var n=[r],s={reps:t};return ut.runKernelFunc(function(i,o){var l=i.tile(r,t);return o([r]),l},{x:r},function(i,o){var l=o[0];return{x:function(){var c=qn(l);if(l.rank===1)for(var d=0;d<t[0];++d)c=c.add(i.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<t[0];++d)for(var u=0;u<t[1];++u)c=c.add(i.slice([d*l.shape[0],u*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(var h=0;h<t[2];++h)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(h=0;h<t[2];++h)for(var m=0;m<t[3];++m)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",s,n)}}),v3e=et({truncatedNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new bT(t,r,n,!0,s),o=mn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),ui=et({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var r=Me(e,"x","unstack");ze(t>=-r.shape.length&&t<r.shape.length,function(){return"Axis = "+t+" is not in [-"+r.shape.length+", "+r.shape.length+")"}),t<0&&(t+=r.shape.length);var n={axis:t};return ut.runKernelFunc(function(s){return s.unstack(r,t)},{x:r},function(s){return{x:function(){return rc(s,t)}}},"Unpack",n)}}),g3e=function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return r=Me(e,"x","setdiff1d"),n=Me(t,"y","setdiff1d"),ze(r.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+n.dtype+")."}),ze(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),ze(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,r.data()];case 1:return s=m.sent(),[4,n.data()];case 2:for(i=m.sent(),o=new Set(i),l=0,u=0;u<s.length;u++)o.has(s[u])||l++;for(c=new Ey([l],r.dtype),d=new Ey([l],"int32"),u=0,h=0;u<s.length;u++)o.has(s[u])||(c.values[h]=s[u],d.values[h]=u,h++);return[2,[c.toTensor(),d.toTensor()]]}})})};function r2(e,t,r,n){n===void 0&&(n=!0);var s=[];if(n)(s=s.concat(t.slice(0))).push(e[0]/r),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var i=t.length,o=0;o<i;++o)s=s.concat([e[o+1]/t[o],t[o]]);s=s.concat(e.slice(i+1))}return s}function n2(e,t,r){r===void 0&&(r=!0);var n=[];if(r){n.push(t);for(var s=t+1;s<e;++s)s<=2*t?(n.push(s),n.push(s-(t+1))):n.push(s)}else{var i=[],o=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);n.push.apply(n,i),n.push(0),n.push.apply(n,o)}return n}function a2(e,t,r,n){n===void 0&&(n=!0);var s=[];n?s.push(e[0]/r):s.push(e[0]*r);for(var i=1;i<e.length;++i)i<=t.length?n?s.push(t[i-1]*e[i]):s.push(e[i]/t[i-1]):s.push(e[i]);return s}function uG(e,t){for(var r=[0],n=0;n<t;++n)r.push(e[n][0]);return r}function hG(e,t,r){for(var n=e.slice(0,1),s=0;s<r;++s)n.push(e[s+1]-t[s][0]-t[s][1]);return n}function fG(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var r=t.shape,n=r[r.length-1],s=1,i=0;i<r.length-1;++i)s*=r[i];var o=e.shape,l=r.slice();l.pop();var c=1;for(i=n;i<e.rank;++i)c*=o[i],l.push(o[i]);var d=$u(e.shape).map(function(u){return u/c}).concat([1]).slice(0,n);return[l,s,c,d]}var mG=30;function IE(e){return e<=mG?e:$D(e,Math.floor(Math.sqrt(e)))}function b3e(e,t,r){var n=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+r.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+n+", and batchDim: "+s+".";if(r.rank<s)throw new Error(i+" update.rank < "+s+". ");if(e.length<n+(r.rank-s))throw new Error(i+" Output shape length < "+(n+(r.rank-s)));if(r.rank!==s+e.length-n)throw new Error(i+" update.rank != "+(s+e.length-n));for(var o=0;o<s;++o)if(r.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<r.rank-s;++o)if(r.shape[o+s]!==e[o+n])throw new Error(i+" updates.shape["+(o+s)+"] ("+r.shape[o+s]+") != shape["+(o+s)+"] ("+e[o+s]+")")}function y3e(e,t,r){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}b3e(r,t,e)}function s2(e,t,r){for(var n=t.shape.length,s=n>1?t.shape[n-1]:1,i=r.length,o=1,l=s;l<i;++l)o*=r[l];var c=s<1?1:s;return{sliceRank:s,numUpdates:Mr(t.shape)/c,sliceSize:o,strides:$u(r.slice(0,s)).concat([1]),outputSize:Mr(r)}}function j3e(e,t,r){ze(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),ze(e.rank===r.length,function(){return"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+")."});for(var n=function(i){ze(t[i]+r[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+r[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},s=0;s<e.rank;++s)n(s)}function Z8(e){for(var t=[],r=0;e>0;)1&e&&t.push(r),e/=2,r++;return t}function yT(e,t,r){for(var n=[],s=0;s<e.length;s++)n[s]=Math.ceil((t[s]-e[s])/r[s]);return n}function N3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=LD(0,i,l-1)}function w3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=o>0?LD(0,i,l):LD(-1,i,l-1)}function pG(e,t,r){for(var n=r.length,s=0;s<r.length;s++)if(r[s]>1){n=s;break}for(s=n+1;s<r.length;s++)if(t[s]>0||r[s]!==e[s])return!1;return!0}function xG(e,t){for(var r=e.length>0?e[e.length-1]:1,n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function S3e(e,t){ze(UD(e),function(){return"The f passed in variableGrads(f) must be a function"}),ze(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof Lv}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=t!=null;if(!r)for(var n in t=[],ut.registeredVariables)t.push(ut.registeredVariables[n]);var s=r?t.filter(function(u){return!u.trainable}):null,i=t.length;ze((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=ut.gradients(e,t,null,!0),l=o.value,c=o.grads;ze(c.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ze(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var d={};return t.forEach(function(u,h){c[h]!=null&&(d[u.name]=c[h])}),s?.forEach(function(u){return d[u.name]=null}),{value:l,grads:d}}function MS(e){return ut.customGrad(e)}var jf=et({softmax_:function(e,t){t===void 0&&(t=-1);var r=Me(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and dim was "+t);return ut.runKernelFunc(function(n,s){var i=n.softmax(r,t);return s([i]),i},{logits:r},function(n,s){var i=s[0],o=n.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),C3e=et({logSoftmax_:function(e,t){t===void 0&&(t=-1);var r=Me(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and axis was "+t);return MS(function(n,s){var i=n.max(t,!0),o=n.sub(i),l=o.toFloat().sub(o.exp().sum(t,!0).log());return s([l]),{value:l,gradFunc:function(c,d){var u=d[0].exp();return c.sub(c.sum(t,!0).mul(u))}}})(r)}}),vG=function(){function e(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,r){this.dataIdsCount++,this.data.set(t,r)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),gG=function(){function e(){}return e.prototype.time=function(t){return Pt("time")},e.prototype.read=function(t){return Pt("read")},e.prototype.readSync=function(t){return Pt("readSync")},e.prototype.numDataIds=function(){return Pt("numDataIds")},e.prototype.disposeData=function(t){return Pt("disposeData")},e.prototype.write=function(t,r,n){return Pt("write")},e.prototype.move=function(t,r,n,s){return Pt("move")},e.prototype.memory=function(){return Pt("memory")},e.prototype.floatPrecision=function(){return Pt("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,r,n,s){return Pt("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Pt("fusedBatchMatMul")},e.prototype.slice=function(t,r,n){return Pt("slice")},e.prototype.stridedSlice=function(t,r,n,s){return Pt("stridedSlice")},e.prototype.unstack=function(t,r){return Pt("unstack")},e.prototype.reverse=function(t,r){return Pt("reverse")},e.prototype.concat=function(t,r){return Pt("concat")},e.prototype.neg=function(t){return Pt("neg")},e.prototype.add=function(t,r){return Pt("add")},e.prototype.addN=function(t){return Pt("addN")},e.prototype.subtract=function(t,r){return Pt("subtract")},e.prototype.multiply=function(t,r){return Pt("multiply")},e.prototype.realDivide=function(t,r){return Pt("realDivide")},e.prototype.floorDiv=function(t,r){return Pt("floorDiv")},e.prototype.sum=function(t,r){return Pt("sum")},e.prototype.prod=function(t,r){return Pt("prod")},e.prototype.unsortedSegmentSum=function(t,r,n){return Pt("unsortedSegmentSum")},e.prototype.argMin=function(t,r){return Pt("argMin")},e.prototype.argMax=function(t,r){return Pt("argMax")},e.prototype.equal=function(t,r){return Pt("equal")},e.prototype.notEqual=function(t,r){return Pt("notEqual")},e.prototype.less=function(t,r){return Pt("less")},e.prototype.lessEqual=function(t,r){return Pt("lessEqual")},e.prototype.greater=function(t,r){return Pt("greater")},e.prototype.greaterEqual=function(t,r){return Pt("greaterEqual")},e.prototype.logicalNot=function(t){return Pt("logicalNot")},e.prototype.logicalAnd=function(t,r){return Pt("logicalAnd")},e.prototype.logicalOr=function(t,r){return Pt("logicalOr")},e.prototype.where=function(t){return Pt("where")},e.prototype.select=function(t,r,n){return Pt("select")},e.prototype.topk=function(t,r,n){return Pt("topk")},e.prototype.min=function(t,r){return Pt("min")},e.prototype.minimum=function(t,r){return Pt("minimum")},e.prototype.mod=function(t,r){return Pt("mod")},e.prototype.max=function(t,r){return Pt("max")},e.prototype.maximum=function(t,r){return Pt("maximum")},e.prototype.all=function(t,r){return Pt("all")},e.prototype.any=function(t,r){return Pt("any")},e.prototype.squaredDifference=function(t,r){return Pt("squaredDifference")},e.prototype.ceil=function(t){return Pt("ceil")},e.prototype.floor=function(t){return Pt("floor")},e.prototype.round=function(t){return Pt("round")},e.prototype.sign=function(t){return Pt("sign")},e.prototype.isNaN=function(t){return Pt("isNaN")},e.prototype.isInf=function(t){return Pt("isInf")},e.prototype.isFinite=function(t){return Pt("isFinite")},e.prototype.pow=function(t,r){return Pt("pow")},e.prototype.exp=function(t){return Pt("exp")},e.prototype.expm1=function(t){return Pt("expm1")},e.prototype.softmax=function(t,r){return Pt("softmax")},e.prototype.log=function(t){return Pt("log")},e.prototype.log1p=function(t){return Pt("log1p")},e.prototype.sqrt=function(t){return Pt("sqrt")},e.prototype.rsqrt=function(t){return Pt("rsqrt")},e.prototype.square=function(t){return Pt("square")},e.prototype.reciprocal=function(t){return Pt("reciprocal")},e.prototype.relu=function(t){return Pt("relu")},e.prototype.relu6=function(t){return Pt("relu6")},e.prototype.prelu=function(t,r){return Pt("prelu")},e.prototype.elu=function(t){return Pt("elu")},e.prototype.eluDer=function(t,r){return Pt("eluDer")},e.prototype.selu=function(t){return Pt("selu")},e.prototype.int=function(t){return Pt("int")},e.prototype.clip=function(t,r,n){return Pt("clip")},e.prototype.abs=function(t){return Pt("abs")},e.prototype.complexAbs=function(t){return Pt("complexAbs")},e.prototype.sigmoid=function(t){return Pt("sigmoid")},e.prototype.softplus=function(t){return Pt("softplus")},e.prototype.sin=function(t){return Pt("sin")},e.prototype.cos=function(t){return Pt("cos")},e.prototype.tan=function(t){return Pt("tan")},e.prototype.asin=function(t){return Pt("asin")},e.prototype.acos=function(t){return Pt("acos")},e.prototype.atan=function(t){return Pt("atan")},e.prototype.atan2=function(t,r){return Pt("atan2")},e.prototype.sinh=function(t){return Pt("sinh")},e.prototype.cosh=function(t){return Pt("cosh")},e.prototype.tanh=function(t){return Pt("tanh")},e.prototype.asinh=function(t){return Pt("asinh")},e.prototype.acosh=function(t){return Pt("acosh")},e.prototype.atanh=function(t){return Pt("atanh")},e.prototype.erf=function(t){return Pt("erf")},e.prototype.step=function(t,r){return Pt("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Pt("fusedConv2d")},e.prototype.conv2d=function(t,r,n){return Pt("conv2d")},e.prototype.conv2dDerInput=function(t,r,n){return Pt("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,r,n){return Pt("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Pt("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,r,n){return Pt("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,r,n){return Pt("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,r,n){return Pt("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,r,n){return Pt("conv3d")},e.prototype.conv3dDerInput=function(t,r,n){return Pt("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,r,n){return Pt("conv3dDerFilter")},e.prototype.maxPool=function(t,r){return Pt("maxPool")},e.prototype.maxPoolBackprop=function(t,r,n,s){return Pt("maxPoolBackprop")},e.prototype.avgPool=function(t,r){return Pt("avgPool")},e.prototype.avgPoolBackprop=function(t,r,n){return Pt("avgPoolBackprop")},e.prototype.avgPool3d=function(t,r){return Pt("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,r,n){return Pt("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,r){return Pt("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,r,n,s){return Pt("maxPool3dBackprop")},e.prototype.reshape=function(t,r){return Pt("reshape")},e.prototype.cast=function(t,r){return Pt("cast")},e.prototype.tile=function(t,r){return Pt("tile")},e.prototype.pad=function(t,r,n){return Pt("pad")},e.prototype.transpose=function(t,r){return Pt("transpose")},e.prototype.gather=function(t,r,n){return Pt("gather")},e.prototype.gatherND=function(t,r){return Pt("gatherND")},e.prototype.scatterND=function(t,r,n){return Pt("scatterND")},e.prototype.batchToSpaceND=function(t,r,n){return Pt("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,r,n){return Pt("spaceToBatchND")},e.prototype.resizeBilinear=function(t,r,n,s){return Pt("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,r,n){return Pt("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,r,n,s){return Pt("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,r,n){return Pt("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,r,n,s,i,o){return Pt("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,r,n,s,i){return Pt("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,r,n,s,i,o,l){return Pt("LRNGrad")},e.prototype.multinomial=function(t,r,n,s){return Pt("multinomial")},e.prototype.oneHot=function(t,r,n,s){return Pt("oneHot")},e.prototype.cumsum=function(t,r,n,s){return Pt("cumsum")},e.prototype.nonMaxSuppression=function(t,r,n,s,i){return Pt("nonMaxSuppression")},e.prototype.fft=function(t){return Pt("fft")},e.prototype.ifft=function(t){return Pt("ifft")},e.prototype.complex=function(t,r){return Pt("complex")},e.prototype.real=function(t){return Pt("real")},e.prototype.imag=function(t){return Pt("imag")},e.prototype.cropAndResize=function(t,r,n,s,i,o){return Pt("cropAndResize")},e.prototype.depthToSpace=function(t,r,n){return Pt("depthToSpace")},e.prototype.split=function(t,r,n){return Pt("split")},e.prototype.sparseToDense=function(t,r,n,s){return Pt("sparseToDense")},e.prototype.diag=function(t){return Pt("diag")},e.prototype.fill=function(t,r,n){return Pt("fill")},e.prototype.onesLike=function(t){return Pt("onesLike")},e.prototype.zerosLike=function(t){return Pt("zerosLike")},e.prototype.linspace=function(t,r,n){return Pt("linspace")},e.prototype.dispose=function(){return Pt("dispose")},e}();function Pt(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function km(e,t){for(var r=e.length,n=[],s=0;s<r;s++){var i=r-1-s,o=e[i]||1;(t[t.length-1-s]||1)>1&&o===1&&n.unshift(i)}return n}function fi(e,t){for(var r=[],n=0;n<t.length;n++){var s=e[e.length-n-1],i=t.length-n-1,o=t[i];(s==null||s===1&&o>1)&&r.unshift(i)}return r}function Rn(e,t){for(var r=[],n=Math.max(e.length,t.length),s=0;s<n;s++){var i=e[e.length-s-1];i==null&&(i=1);var o=t[t.length-s-1];if(o==null&&(o=1),i===1)r.unshift(o);else if(o===1)r.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");r.unshift(i)}}return r}function Ay(e,t,r,n,s,i,o){o===void 0&&(o="channelsLast");var l,c=l2(t),d=c[0],u=c[1];if(o==="channelsLast")l=[d,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=[d,u,e[1],e[1]]}return Wx(e,l,r,n,s,i,!1,o)}function i2(e,t,r,n,s,i,o){o===void 0&&(o="NDHWC");var l,c,d=YD(t),u=d[0],h=d[1],m=d[2];if(o==="NDHWC")c="channelsLast",l=[u,h,m,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",l=[u,h,m,e[1],e[1]]}return o2(e,l,r,n,s,!1,c,i)}function Wx(e,t,r,n,s,i,o,l){o===void 0&&(o=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3];if(l==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=e[0],m=e[1],u=e[2],h=e[3]}var p,v=t[0],g=t[1],b=t[3],y=l2(r),C=y[0],N=y[1],k=l2(n),S=k[0],D=k[1],E=hv(v,S),T=hv(g,D),A=function(W,re,U,Q,B,te,X,ce){var M,q,z;if(typeof W=="number"){M={top:W,bottom:W,left:W,right:W,type:W===0?"VALID":"NUMBER"};var K=function(de,Y,oe,Se,ue){Se==null&&(Se=bG(de,Y,oe));var se=de[0],ye=de[1],Ne=Gb((se-Y+2*Se)/oe+1,ue);ze(qs(Ne),function(){return"The output # of rows ("+Ne+") must be an integer. Change the stride and/or zero pad parameters"});var Le=Gb((ye-Y+2*Se)/oe+1,ue);return ze(qs(Le),function(){return"The output # of columns ("+Le+") must be an integer. Change the stride and/or zero pad parameters"}),[Ne,Le]}([re,U],te,Q,W,ce);q=K[0],z=K[1]}else if(W==="same"){q=Math.ceil(re/Q),z=Math.ceil(U/B);var ee=Math.max(0,(q-1)*Q+te-re),ne=Math.max(0,(z-1)*B+X-U),ae=Math.floor(ee/2),ie=ee-ae,G=Math.floor(ne/2);M={top:ae,bottom:ie,left:G,right:ne-G,type:"SAME"}}else{if(W!=="valid")throw Error("Unknown padding parameter: "+W);M={top:0,bottom:0,left:0,right:0,type:"VALID"},q=Math.ceil((re-te+1)/Q),z=Math.ceil((U-X+1)/B)}return{padInfo:M,outHeight:q,outWidth:z}}(s,u,h,C,N,E,T,i),L=A.padInfo,P=A.outHeight,O=A.outWidth,J=o?b*m:b;return l==="channelsFirst"?p=[d,J,P,O]:l==="channelsLast"&&(p=[d,P,O,J]),{batchSize:d,dataFormat:l,inHeight:u,inWidth:h,inChannels:m,outHeight:P,outWidth:O,outChannels:J,padInfo:L,strideHeight:C,strideWidth:N,filterHeight:v,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:S,dilationWidth:D,inShape:e,outShape:p,filterShape:t}}function o2(e,t,r,n,s,i,o,l){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3],p=c[4];if(o==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);d=e[0],p=e[1],u=e[2],h=e[3],m=e[4]}var v,g=t[0],b=t[1],y=t[2],C=t[4],N=YD(r),k=N[0],S=N[1],D=N[2],E=YD(n),T=E[0],A=E[1],L=E[2],P=hv(g,T),O=hv(b,A),J=hv(y,L),W=function(X,ce,M,q,z,K,ee,ne,ae,ie,G){var de,Y,oe,Se;if(typeof X=="number"){de={top:X,bottom:X,left:X,right:X,front:X,back:X,type:X===0?"VALID":"NUMBER"};var ue=function(ht,At,Tt,Ht,pe,he){pe==null&&(pe=bG(ht,At,Ht));var xe=ht[0],me=ht[1],De=ht[2],Ye=Gb((xe-At+2*pe)/Ht+1,he);ze(qs(Ye),function(){return"The output # of depths ("+Ye+") must be an integer. Change the stride and/or zero pad parameters"});var jt=Gb((me-At+2*pe)/Ht+1,he);ze(qs(jt),function(){return"The output # of rows ("+jt+") must be an integer. Change the stride and/or zero pad parameters"});var Qe=Gb((De-At+2*pe)/Ht+1,he);return ze(qs(Qe),function(){return"The output # of columns ("+Qe+") must be an integer. Change the stride and/or zero pad parameters"}),[Ye,jt,Qe,Tt]}([ce,M,q,1],ne,1,z,X,G);Y=ue[0],oe=ue[1],Se=ue[2]}else if(X==="same"){Y=Math.ceil(ce/z),oe=Math.ceil(M/K),Se=Math.ceil(q/ee);var se=(Y-1)*z+ne-ce,ye=(oe-1)*K+ae-M,Ne=(Se-1)*ee+ie-q,Le=Math.floor(se/2),Je=se-Le,lt=Math.floor(ye/2),vt=ye-lt,Re=Math.floor(Ne/2);de={top:lt,bottom:vt,left:Re,right:Ne-Re,front:Le,back:Je,type:"SAME"}}else{if(X!=="valid")throw Error("Unknown padding parameter: "+X);de={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Y=Math.ceil((ce-ne+1)/z),oe=Math.ceil((M-ae+1)/K),Se=Math.ceil((q-ie+1)/ee)}return{padInfo:de,outDepth:Y,outHeight:oe,outWidth:Se}}(s,u,h,m,k,S,D,P,O,J,l),re=W.padInfo,U=W.outDepth,Q=W.outHeight,B=W.outWidth,te=i?C*p:C;return o==="channelsFirst"?v=[d,te,U,Q,B]:o==="channelsLast"&&(v=[d,U,Q,B,te]),{batchSize:d,dataFormat:o,inDepth:u,inHeight:h,inWidth:m,inChannels:p,outDepth:U,outHeight:Q,outWidth:B,outChannels:te,padInfo:re,strideDepth:k,strideHeight:S,strideWidth:D,filterDepth:g,filterHeight:b,filterWidth:y,effectiveFilterDepth:P,effectiveFilterHeight:O,effectiveFilterWidth:J,dilationDepth:T,dilationHeight:A,dilationWidth:L,inShape:e,outShape:v,filterShape:t}}function bG(e,t,r,n){n===void 0&&(n=1);var s=hv(t,n);return Math.floor((e[0]*(r-1)-r+s)/2)}function l2(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function YD(e){return typeof e=="number"?[e,e,e]:e}function hv(e,t){return t<=1?e:e+(e-1)*(t-1)}function Gb(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Uv(e){var t=l2(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function vl(e,t){return Uv(e)||Uv(t)}function jT(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function yG(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var n=La(e.shape),s=e.toFloat(),i=r.complex(s,n);return n.dispose(),s.dispose(),i}if(!J5e(e.dtype,t))return ut.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=r.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return r.int(e);if(t==="bool"){var l=yr(0,e.dtype);return i=r.notEqual(e,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function KD(e,t){return ut.makeTensorFromDataId(e.dataId,t,e.dtype)}function jG(e,t,r){var n=(t-e)/(r-1),s=h1(r,"float32");s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+n;return ti(s,"float32")}function XD(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var r=new Float32Array(2*e.length),n=0;n<r.length;n+=2)r[n]=e[n/2],r[n+1]=t[n/2];return r}function eB(e,t){return{real:e[2*t],imag:e[2*t+1]}}function k3e(e,t,r,n){e[2*n]=t,e[2*n+1]=r}function _3e(e,t,r){var n=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(n),imag:Math.sin(n)}}function E3e(e,t,r){var n=function(i,o,l){return function(c,d,u){for(var h=0,m=c.length,p=0,v=!1;h<m;){var g=u(d,c[p=h+(m-h>>>1)]);g>0?h=p+1:(m=p,v=!g)}return v?h:-h-1}(i,o,l||D3e)}(e,t,r),s=n<0?-(n+1):n;e.splice(s,0,t)}function D3e(e,t){return e>t?1:e<t?-1:0}function NT(e,t,r,n,s){return NG(e,t,r,n,s,0).selectedIndices}function wT(e,t,r,n,s,i){var o=NG(e,t,r,n,s,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function NG(e,t,r,n,s,i,o,l){l===void 0&&(l=!1);for(var c=Array.from(t).map(function(k,S){return{score:k,boxIndex:S,suppressBeginIndex:0}}).filter(function(k){return k.score>s}).sort(tB),d=i>0?-.5/i:0,u=[],h=[];u.length<r&&c.length>0;){var m=c.pop(),p=m.score,v=m.boxIndex,g=m.suppressBeginIndex;if(p<s)break;for(var b=!1,y=u.length-1;y>=g;--y){var C=A3e(e,v,u[y]);if(C>=n){b=!0;break}if(m.score=m.score*T3e(n,d,C),m.score<=s)break}m.suppressBeginIndex=u.length,b||(m.score===p?(u.push(v),h.push(m.score)):m.score>s&&E3e(c,m,tB))}var N=u.length;return l&&(u.fill(0,N),h.fill(0,N)),{selectedIndices:ti(u,"int32"),selectedScores:ti(h,"float32"),numValidOutputs:yr(N,"int32")}}function A3e(e,t,r){var n=e.subarray(4*t,4*t+4),s=e.subarray(4*r,4*r+4),i=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),l=Math.max(n[0],n[2]),c=Math.max(n[1],n[3]),d=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),m=Math.max(s[1],s[3]),p=(l-i)*(c-o),v=(h-d)*(m-u);if(p<=0||v<=0)return 0;var g=Math.max(i,d),b=Math.max(o,u),y=Math.min(l,h),C=Math.min(c,m),N=Math.max(y-g,0)*Math.max(C-b,0);return N/(p+v-N)}function T3e(e,t,r){var n=Math.exp(t*r*r);return r<=e?n:0}function tB(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function wG(e,t,r){var n=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(i){s[r]=i;var o=e.slice(n,s);return n[r]+=i,o})}function SG(e,t){for(var r=new Array(e.rank),n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];var s=mn(r,e.dtype);for(n=0;n<s.values.length;++n){for(var i=s.indexToLoc(n),o=new Array(e.rank),l=0;l<o.length;l++)o[l]=i[l]%e.shape[l];var c=e.locToIndex(o);s.values[n]=e.values[c]}return s.toTensor()}function CG(e,t,r,n,s){for(var i=t[t.length-1],o=[e.length/i,i],l=o[0],c=o[1],d=_y(r,l*n),u=_y("int32",l*n),h=0;h<l;h++){for(var m=h*c,p=e.subarray(m,m+c),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});v.sort(function(k,S){return S.value-k.value});var b=h*n,y=d.subarray(b,b+n),C=u.subarray(b,b+n);for(g=0;g<n;g++)y[g]=v[g].value,C[g]=v[g].index}var N=t.slice();return N[N.length-1]=n,[Ki(d,N,r),Ki(u,N,"int32")]}function ST(e,t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(n);var s=mn(e,"int32"),i=mn([r.length,e.length],"int32");for(n=0;n<r.length;n++){var o=s.indexToLoc(r[n]),l=n*e.length;i.values.set(o,l)}return i.toTensor()}var I3e=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("float v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        float result = `+n+`;
        setOutput(result);
      }
    `},P3e=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("vec4 v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        vec4 result = `+n+`;
        setOutput(result);
      }
    `},O3e=function(e,t,r){this.variableNames=["A"];var n=e.windowSize,s=e.batchSize,i=e.inSize,o=Math.ceil(i/n);r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];var l=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+n+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function kG(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(r){return e+"."+r})}function ll(e,t){return t===1?[e]:kG(e,t)}function wo(){var e,t,r,n,s,i,o,l,c,d;return $t().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",n="in",s="texture",i="outputColor",o="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",n="varying",s="texture2D",i="gl_FragColor",o="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:n,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function Zp(e,t,r){r===void 0&&(r="index");var n=$u(t);return n.map(function(s,i){return"int "+e[i]+" = "+r+" / "+s+"; "+(i===n.length-1?"int "+e[i+1]+" = "+r+" - "+e[i]+" * "+s:"index -= "+e[i]+" * "+s)+";"}).join("")}function CT(e){var t=$u(e).map(function(r){return r.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var _G=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function M3e(e,t,r,n){var s=[];e.forEach(function(p){var v=Mr(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?s.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(s.push("uniform sampler2D "+p.name+";"),s.push("uniform int offset"+p.name+";"))});var i,o,l=s.join(`
`),c=e.map(function(p){return function(v,g,b){b===void 0&&(b=!1);var y="";y+=b?EG(v):V0(v);var C=v.shapeInfo.logicalShape,N=g.logicalShape;return C.length<=N.length&&(y+=b?function(k,S){var D,E=k.name,T=E.charAt(0).toUpperCase()+E.slice(1),A="get"+T+"AtOutCoords",L=k.shapeInfo.logicalShape.length,P=S.logicalShape.length,O=km(k.shapeInfo.logicalShape,S.logicalShape),J=Ma(P),W=P-L,re=["x","y","z","w","u","v"];D=L===0?"":P<2&&O.length>=1?"coords = 0;":O.map(function(M){return"coords."+re[M+W]+" = 0;"}).join(`
`);var U="";U=P<2&&L>0?"coords":k.shapeInfo.logicalShape.map(function(M,q){return"coords."+re[q+W]}).join(", ");var Q="return outputValue;",B=Mr(k.shapeInfo.logicalShape)===1,te=Mr(S.logicalShape)===1;if(L!==1||B||te){if(B&&!te)Q=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(O.length){var X=L-2,ce=L-1;O.indexOf(X)>-1&&O.indexOf(ce)>-1?Q="return vec4(outputValue.x);":O.indexOf(X)>-1?Q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":O.indexOf(ce)>-1&&(Q="return vec4(outputValue.xx, outputValue.zz);")}}else Q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+J+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+T+"("+U+`);
      `+Q+`
    }
  `}(v,g):function(k,S){var D=k.name,E=D.charAt(0).toUpperCase()+D.slice(1),T="get"+E+"AtOutCoords",A=S.texShape,L=k.shapeInfo.texShape,P=k.shapeInfo.logicalShape.length,O=S.logicalShape.length;if(!k.shapeInfo.isUniform&&P===O&&k.shapeInfo.flatOffset==null&&Ei(L,A))return`
      float `+T+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var J,W=Ma(O),re=km(k.shapeInfo.logicalShape,S.logicalShape),U=O-P,Q=["x","y","z","w","u","v"];J=P===0?"":O<2&&re.length>=1?"coords = 0;":re.map(function(te){return"coords."+Q[te+U]+" = 0;"}).join(`
`);var B="";return B=O<2&&P>0?"coords":k.shapeInfo.logicalShape.map(function(te,X){return"coords."+Q[X+U]}).join(", "),`
    float `+T+`() {
      `+W+` coords = getOutputCoords();
      `+J+`
      return get`+E+"("+B+`);
    }
  `}(v,g)),y}(p,t,n)}).join(`
`),d=t.texShape,u=wo(),h=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),m=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+R3e+`
    `+F3e+`
    `+L3e+`
  `}(u);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];if(Ei(k,S))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var E=Math.ceil(k[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=p,b=v,y=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],C=Math.ceil(g[2]/2),N=C*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+N+`;
      index -= b * `+N+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(k,S){for(var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],E=Math.ceil(k[k.length-1]/2),T=E*Math.ceil(k[k.length-2]/2),A=T,L="",P="b, r, c",O=2;O<k.length-1;O++)A*=k[k.length-O-1],L=`
      int b`+O+" = index / "+A+`;
      index -= b`+O+" * "+A+`;
    `+L,P="b"+O+", "+P;return`
    ivec`+k.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+L+`

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+k.length+"("+P+`);
    }
  `}(p,v)}var g,b,y,C,N}(t.logicalShape,d),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,C){return C[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return resTexRC.x * `+C[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,C){return Ei(y,C)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=v,b=Zp(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,C){var N=Zp(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      `+N+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,C){var N=Zp(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+C[0]+`,
                             `+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+N+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,C){var N=Zp(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+N+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var g,b}(t.logicalShape,d),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),n&&(m+=B3e),[m,h,o,l,i,c,r].join(`
`)}function V0(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return"float "+s+"() {return "+n+";}";var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(o===1&&l===1)return`
      float `+s+`() {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=r.shapeInfo.texShape,d=c[0],u=c[1],h=Ip(n);return`
    float `+s+`() {
      vec2 uv = uvFromFlat(`+d+", "+u+", "+h+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 1:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return`
      float `+s+`(int index) {
        `+M0(r)+`
      }
    `;var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(l===1&&o===1)return`
      float `+s+`(int index) {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=Ip(n);return l===1?`
      float `+s+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:o===1?`
      float `+s+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+s+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+l+", index + "+c+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 2:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=r.shapeInfo.texShape;if(o!=null&&Ei(n,o)){var l=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `}var d=$p(n),u=d.newShape,h=d.keptDims,m=u;if(m.length<n.length){var p=z0(r,m);return`
      `+V0(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+H0(["row","col"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+n[1]+`, 1)));
        `+M0(r)+`
      }
    `;var v=o[0],g=o[1],b=Ip(s);return g===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+s+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+n[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+v+", "+g+`, index);
    return sampleTexture(`+s+`, uv);
  }
`}(e);case 3:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[1]*n[2],l=n[2],c=$p(n),d=c.newShape,u=c.keptDims,h=d;if(h.length<n.length){var m=z0(r,h);return`
        `+V0(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+H0(["row","col","depth"],u)+`);
        }
      `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+l+`, 1)));
        `+M0(r)+`
      }
    `;var p=r.shapeInfo.texShape,v=p[0],g=p[1],b=r.shapeInfo.flatOffset;if(g===o&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+v+`.0);
          return sampleTexture(`+s+`, uv);
        }
      `;if(g===l&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+n[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `;var y=Ip(s);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+l+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+g+`, index);
        return sampleTexture(`+s+`, uv);
      }
  `}(e);case 4:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[3],l=n[2]*o,c=n[1]*l,d=$p(n),u=d.newShape,h=d.keptDims;if(u.length<n.length){var m=z0(r,u);return`
      `+V0(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+H0(["row","col","depth","depth2"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+o+`, 1)));
        `+M0(r)+`
      }
    `;var p=r.shapeInfo.flatOffset,v=r.shapeInfo.texShape,g=v[0],b=v[1];if(b===c&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(b===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+n[1]*n[2]+", "+n[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var y=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+b+", index + "+y+`);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 5:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[4],l=n[3]*o,c=n[2]*l,d=n[1]*c,u=$p(n),h=u.newShape,m=u.keptDims;if(h.length<n.length){var p=z0(r,h);return`
      `+V0(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+H0(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+o+`)) +
          depth3;
        `+M0(r)+`
      }
    `;var v=r.shapeInfo.flatOffset,g=r.shapeInfo.texShape,b=g[0],y=g[1];if(y===d&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(y===o&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]+`,
               `+n[2]*n[3]+", "+n[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var C=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+o+" + depth3 + "+C+`;
      vec2 uv = uvFromFlat(`+b+", "+y+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 6:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=$p(n),l=o.newShape,c=o.keptDims;if(l.length<n.length){var d=z0(r,l);return`
      `+V0(d)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+H0(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var u=n[5],h=n[4]*u,m=n[3]*h,p=n[2]*m,v=n[1]*p;if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+m+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+M0(r)+`
      }
    `;var g=r.shapeInfo.flatOffset,b=r.shapeInfo.texShape,y=b[0],C=b[1];if(C===v&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+m+", "+h+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(C===u&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]*n[4]+`,
               `+n[2]*n[3]*n[4]+`,
               `+n[3]*n[4]+`,
               `+n[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var N=Ip(s);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+m+` +
          depth2 * `+h+" + depth3 * "+u+" + depth4 + "+N+`;
      vec2 uv = uvFromFlat(`+y+", "+C+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function EG(e){var t,r,n;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),n=wo(),`
    vec4 `+r+`() {
      return `+n.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(s){var i=s.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),l=s.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=wo();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=c[0],u=c[1],h=wo();if(c!=null&&Ei(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+d+`.0);

        return `+h.texture2D+"("+o+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+m[0]+", "+m[1]+`, row, col);
      return `+h.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var u=i.slice(1),h=z0(s,u);return`
        `+EG(h)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+H0(["b","row","col"],[1,2])+`);
        }
      `}var m=d[0],p=d[1],v=Math.ceil(i[2]/2),g=v*Math.ceil(i[1]/2),b=wo();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+p+", "+g+", "+v+`, b, row, col);
      return `+b.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(s){for(var i=s.shapeInfo.logicalShape,o=i.length,l=s.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=s.shapeInfo.texShape,u=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],h=u[0],m=u[1],p=Math.ceil(i[o-1]/2),v=p*Math.ceil(i[o-2]/2),g="int b, int row, int col",b="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)g="int b"+y+", "+g,v*=i[o-y-1],b="b"+y+" * "+v+" + "+b;var C=wo();return`
    vec4 `+c+"("+g+`) {
      int index = `+b+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+h+`);
      return `+C.texture2D+"("+l+`, uv);
    }
  `}(e)}}var R3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,F3e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L3e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,B3e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ip(e){return"offset"+e}function M0(e){var t=e.name,r=Mr(e.shapeInfo.logicalShape);return r<2?"return "+t+";":`
    for (int i = 0; i < `+r+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Ma(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function z0(e,t){var r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function H0(e,t){return t.map(function(r){return e[r]}).join(", ")}var U3e=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ze(e.length>2,function(){return"Packed arg"+(r.charAt(0).toUpperCase()+r.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],i=Math.ceil(s/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),n||this.variableNames.push("bestIndicesA");var o,l,c=this.outputShape,d=c.length,u=Ma(d),h=ll("coords",d);if(i===1){var m=Ma(l=d+1);o=`
        `+m+" sourceLocR = "+m+"("+h.join()+`, 0);
        ++`+h[d-1]+`;
        `+m+" sourceLocG = "+m+"("+h.join()+`, 0);
        ++`+h[d-2]+`;
        `+m+" sourceLocA = "+m+"("+h.join()+`, 0);
        --`+h[d-1]+`;
        `+m+" sourceLocB = "+m+"("+h.join()+`, 0);
        --`+h[d-2]+";"}else l=d,o=`
        `+u+` sourceLocR = coords;
        ++`+h[d-1]+`;
        `+u+` sourceLocG = coords;
        ++`+h[d-2]+`;
        `+u+` sourceLocA = coords;
        --`+h[d-1]+`;
        `+u+` sourceLocB = coords;
        --`+h[d-2]+";";var p=["x","y","z","w","u","v"].slice(0,l),v="."+p[l-1],g=p.map(function(T){return"int "+T}),b=ll("sourceLocR",l-1).concat("inIdx.r"),y=ll("sourceLocG",l-1).concat("inIdx.g"),C=ll("sourceLocB",l-1).concat("inIdx.b"),N=ll("sourceLocA",l-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",S=n?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+N.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+N.join()+") : 0.)",E=n?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+h[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+h[d-2]+" < "+(c[d-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+S+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+k+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},$3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},q3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=u-1-e.padInfo.front,v=h-1-e.padInfo.top,g=m-1-e.padInfo.left,b=1/(t*r*n);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+s+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},V3e=function(e,t,r,n,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Rn(e,t),Rn(e,r);var o="0.0";n!=null&&(Rn(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="1.0";s!=null&&(Rn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},z3e=function(e,t,r,n,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Rn(e,t),Rn(e,r);var o="vec4(0.0)";n!=null&&(Rn(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="vec4(1.0)";s!=null&&(Rn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},H3e="return areal * breal - aimag * bimag;",W3e="return areal * bimag + aimag * breal;",rB=function(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Rn(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},PE="return a + b;",OE="return a - b;",nB="return a * b;",DG="return (a < 0.) ? b * a : a;",bs=function(e,t,r){this.variableNames=["A","B"],this.outputShape=Rn(t,r),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},AG=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Mh=function(e,t,r,n){n===void 0&&(n=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Rn(t,r);var s=this.outputShape.length,i="";if(n)if(s===0||Mr(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Ma(s)+` coords = getOutputCoords();
        `,s===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=ll("coords",s);i+=`
            bool nextRowOutOfBounds =
              (`+o[s-2]+" + 1) >= "+this.outputShape[s-2]+`;
            bool nextColOutOfBounds =
              (`+o[s-1]+" + 1) >= "+this.outputShape[s-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},G3e=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),Y3e=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),K3e=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},X3e=function(e){this.outputShape=[],this.outputShape=Bv(e,1),this.variableNames=e.map(function(l,c){return"T"+c});var t=new Array(e.length-1);t[0]=e[0][1];for(var r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];var n=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(r=1;r<t.length;r++){var s=t[r-1];n.push("else if (yC < "+t[r]+") setOutput(getT"+r+"(yR, yC-"+s+"));")}var i=t.length,o=t[t.length-1];n.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+n.join(`
        `)+`
      }
    `},Q3e=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Bv(e,t);var r=this.outputShape,n=r.length,s=Ma(n),i=ll("coords",n),o=["x","y","z","w","u","v"].slice(0,n);this.variableNames=e.map(function(b,y){return"T"+y});var l=new Array(e.length-1);l[0]=e[0][t];for(var c=1;c<l.length;c++)l[c]=l[c-1]+e[c][t];var d=o[t],u=o.slice(-2),h=o.join(),m="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+u.join()+`));
        }`;for(c=1;c<l.length;c++){var p=l[c-1];m+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+tN(o,d,p)+`),
            vec2(`+tN(u,d,p)+`));
        }`}var v=l.length,g=l[l.length-1];m+=`
        return getChannel(
          getT`+v+"("+tN(o,d,g)+`),
          vec2(`+tN(u,d,g)+"));",this.userCode=`
      float getValue(`+o.map(function(b){return"int "+b})+`) {
        `+m+`
      }

      void main() {
        `+s+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[n-1]+" = "+i[n-1]+` + 1;
        if (`+i[n-1]+" < "+r[n-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[n-2]+" = "+i[n-2]+` + 1;
        if (`+i[n-2]+" < "+r[n-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[n-1]+" = "+i[n-1]+` - 1;
        if (`+i[n-2]+" < "+r[n-2]+` &&
            `+i[n-1]+" < "+r[n-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function tN(e,t,r){var n=e.indexOf(t);return e.map(function(s,i){return i===n?s+" - "+r:s}).join()}var J3e=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Z3e=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},eAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+s+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+r+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+n+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=n-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+s+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+r+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+r+` - 1 - wR;

            for (int wC = 0; wC < `+n+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+n+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},rAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},nAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},aB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,m=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,y=v?3:1,C="",N="";r&&(C=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,N="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+o+", "+l+`);
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+k+`
        `+N+`
        setOutput(result);
      }
    `},aAe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,r=e.padInfo.top,n=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,m=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+r+", "+n+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},sB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,g="",b="";r&&(g=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,b="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+s+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+b+`
        setOutput(result);
      }
    `},iB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=p,g="int xR; int xC; int xCOffset;",b=0;b<m;b++)for(var y=0;y<p;y++)g+=`
          vec4 xTexelR`+b+"C"+2*y+` = vec4(0.);
          vec4 wR`+b+"C"+y+` = vec4(0.);
          vec4 xR`+b+"C"+y+" = vec4(0.);";for(b=0;b<m;b++)for(var C=0;C<v;C++){if(g+=`
          xR = xRCorner + `+b*u+`;
          xC = xCCorner + `+(y=2*C)*h+`;
        `,d===1){if(y<p&&(g+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+y+" = vec4(previous.zw, xTexelR"+b+"C"+y+`.xy);
                } else {
                  xR`+b+"C"+y+" = vec4(0, 0, xTexelR"+b+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+s+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xR`+b+"C"+y+" = xTexelR"+b+"C"+y+`;
              `,y+1<p)){var N=l%2==0?YW(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(g+=`
                  xCOffset = xC + `+l%2+" + "+N+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+s+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+y+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+N+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(y+1)+" = xTexelR"+b+"C"+(y+2)+`;
                `}}else y<p&&(g+=`
              if(xR >= 0 && xR < `+s+`) {
            `,l%2==1?(g+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
              `,y+1<p&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(y+1)+" = vec4(xTexelR"+b+"C"+(y+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".xy, xTexelR"+b+"C"+(y+2)+`.xy);
              `,y+1<p&&(g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
                `)),g+="}");y<p&&(g+=`
            vec4 wTexelR`+b+"C"+y+" = getW("+b+", "+y+`, d1, q);
            wR`+b+"C"+y+" = vec4(wTexelR"+b+"C"+y+".xz, wTexelR"+b+"C"+y+`.xz);
          `,y+1<p&&(g+=`
              vec4 wTexelR`+b+"C"+(y+1)+" = getW("+b+", "+(y+1)+`, d1, q);
              wR`+b+"C"+(y+1)+` =
                vec4(wTexelR`+b+"C"+(y+1)+".xz, wTexelR"+b+"C"+(y+1)+".xz);"))}for(b=0;b<m;b++)for(y=0;y<p;y++)g+="dotProd += xR"+b+"C"+y+" * wR"+b+"C"+y+";";var k="",S="";r&&(k=n?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`vec4 activation(vec4 x) {
          `+r+`
        }`,S="result = activation(result);");var D=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+k+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+D+`
        `+S+`
        setOutput(result);
      }
    `},sAe=function(e,t,r,n,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],l=e[2],c=e[3],d=t[0],u=r[0],h=r[1];this.outputShape=[d,u,h,c];var m=n==="bilinear"?1:0,p=[o-1+".0",l-1+".0"],v=p[0],g=p[1],b=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=b[0],C=b[1],N=b[2],k=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],S=k[0],D=k[1],E=k[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+S+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+C+`;
        float width_scale = `+D+`;

        float in_y = `+N+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+s+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+s+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},iAe=function(e,t,r){this.variableNames=["x"],this.outputShape=e;var n=e.length,s=e[e.length-1],i=r?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(r?"return "+s+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ma(n)+` coords = getOutputCoords();
        int end = `+oB(n,"coords")+`;
        float val = 0.0;
        for (int i = `+s+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+oB(n,"coords")+` = idx;
          val += getX(`+function(o,l){if(o===1)return""+l;if(o===2)return l+".x, "+l+".y";if(o===3)return l+".x, "+l+".y, "+l+".z";if(o===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(n,"coords")+`);
        }
        setOutput(val);
      }
    `};function oB(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var oAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=wo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+r.output+` = result;
      }
    `},lAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=wo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+r.output+` = result;
      }
    `},cAe=function(){function e(t,r,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+r+`;
      int offset_h = imod(h, `+r+`);
      int in_w = w / `+r+`;
      int offset_w = imod(w, `+r+`);
      int offset_d = (offset_h * `+r+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),dAe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},uAe=function(e){this.variableNames=["A"],this.outTexUsage=Yl.DOWNLOAD;var t=wo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},hAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yl.DOWNLOAD;var t=wo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},fAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"];var n=wo(),s=t[0],i=t[1];this.outputShape=e;var o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+CT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
        vec4 values = `+n.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+n.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},mAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=wo(),s=t[0],i=t[1];this.outputShape=e;var o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var u=2*c+d;o+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+e[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
              values = `+n.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+CT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+n.output+" = "+l+`;
      }
    `},pAe="return real * expR - imag * expI;",xAe="return real * expI + imag * expR;",lB=function(e,t,r){this.variableNames=["real","imag"];var n=t[1];this.outputShape=t;var s=r?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=r?n+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+s+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+n+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+n+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},vAe=function(){function e(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.valueLoc==null&&(r.valueLoc=n.getUniformLocationNoThrow(s,"value")),n.gl.uniform1f(r.valueLoc,t)}},e}(),gAe=function(e,t,r){this.variableNames=["A","indices"];var n=e.slice();n[r]=t,this.outputShape=n,this.rank=n.length;var s=Ma(this.rank),i=function(o,l){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],h=0;h<o.length;h++)h===l?u.push("int(getIndices("+d[h]+"))"):u.push(""+d[h]);return u.join()}(e,r);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},bAe=function(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;var n=Ma(t.length),s=Ma(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+n+" strides = "+n+"("+this.strides+`);
         void main() {
          `+s+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function yAe(e,t){var r=wo();return pDe(e,t,r.version+`
    precision highp float;
    `+r.attribute+` vec3 clipSpacePos;
    `+r.attribute+` vec2 uv;
    `+r.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function jAe(e,t){return yDe(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function NAe(e,t){return jDe(e,t,new Uint16Array([0,1,2,2,1,3]))}function m1(e,t,r,n,s,i,o){wDe(r,n);var l=NDe(e,t),c=e.TEXTURE_2D;return Fr(e,t,function(){return e.bindTexture(c,l)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Fr(e,t,function(){return e.texImage2D(c,0,s,r,n,0,i,o,null)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),l}function wAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function SAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function CAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function kAe(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function _Ae(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function EAe(e,t,r,n){return Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),K8(e,t,r,"clipSpacePos",n,3,20,0)&&K8(e,t,r,"uv",n,2,20,12)}function DAe(e,t,r,n,s,i,o){var l,c,d;Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),i instanceof Uint8Array?(l=new Uint8Array(n*s*4),c=e.UNSIGNED_BYTE,d=e.RGBA):(l=new Float32Array(n*s*4),c=e.FLOAT,d=o.internalFormatPackedFloat),l.set(i),Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,d,n,s,0,e.RGBA,c,l)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function AAe(e,t,r,n){Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),n.data instanceof Uint8Array?Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)}):Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function TAe(e,t,r,n,s){var i=e.createBuffer();Fr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*r*n;return Fr(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Fr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,0)}),Fr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function IAe(e,t,r){var n=e,s=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,s),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),s}function PAe(e,t,r,n,s){var i=PS(r,n),o=i[0],l=i[1],c=new Uint8Array(r*n*4);return Fr(e,t,function(){return e.readPixels(0,0,o,l,s.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function OAe(e,t,r,n,s,i,o,l){var c=e,d=new Float32Array(function(u,h){var m=f1(u,h);return m[0]*m[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function MAe(e,t,r,n){var s=new Float32Array(r*n*4);return Fr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,s)}),s}var RAe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var r=$t().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,dDe(r,t)):this.gl=th(r);var n="WEBGL_color_buffer_float";if($t().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Qj(this.gl,this.debug,"OES_texture_float"),Vc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Qj(this.gl,this.debug,"OES_texture_half_float");else if($t().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Vc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Qj(this.gl,this.debug,"EXT_color_buffer_half_float");else if($t().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Vc(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Vc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=jAe(this.gl,this.debug),this.indexBuffer=NAe(this.gl,this.debug),this.framebuffer=SDe(this.gl,this.debug),this.textureConfig=pT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return $t().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var r=this.gl;Fr(r,this.debug,function(){return r.finish()}),Fr(r,this.debug,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),Fr(r,this.debug,function(){return r.deleteFramebuffer(t.framebuffer)}),Fr(r,this.debug,function(){return r.bindBuffer(r.ARRAY_BUFFER,null)}),Fr(r,this.debug,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}),Fr(r,this.debug,function(){return r.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,r){return this.throwIfDisposed(),wAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,r){return this.throwIfDisposed(),SAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,r){return this.throwIfDisposed(),CAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,r){this.throwIfDisposed(),AAe(this.gl,this.debug,t,r)},e.prototype.uploadDenseMatrixToTexture=function(t,r,n,s){this.throwIfDisposed(),DAe(this.gl,this.debug,t,r,n,s,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,r){return this.throwIfDisposed(),_Ae(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,r){return this.throwIfDisposed(),kAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var r=this;this.throwIfDisposed(),this.outputTexture===t&&(X8(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Fr(this.gl,this.debug,function(){return r.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return PAe(s.gl,s.debug,r,n,s.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,r,n,s,i,o){return OAe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,r){return IAe(this.gl,t,r)},e.prototype.createBufferFromTexture=function(t,r,n){this.bindTextureToFrameBuffer(t);var s=TAe(this.gl,this.debug,r,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),s},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var r,n,s=this;if($t().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var l=i.clientWaitSync(o,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},r=o}else $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),n=function(){return s.isQueryAvailable(r,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:r,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return MAe(s.gl,s.debug,r,n)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var r=this.gl,n=xDe(r,this.debug,t),s=yAe(r,this.debug),i=gDe(r,this.debug);return Fr(r,this.debug,function(){return r.attachShader(i,s)}),Fr(r,this.debug,function(){return r.attachShader(i,n)}),bDe(r,this.debug,i),this.debug&&DE(r,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=EAe(r,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var r=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Fr(this.gl,this.debug,function(){return r.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var r=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&DE(this.gl,this.debug,this.program),Fr(this.gl,this.debug,function(){return r.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,r,n){return n===void 0&&(n=!0),this.throwIfDisposed(),n?kDe(this.gl,this.debug,t,r):_De(this.gl,t,r)},e.prototype.getAttributeLocation=function(t,r){var n=this;return this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,r)})},e.prototype.getUniformLocationNoThrow=function(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)},e.prototype.setInputMatrixTexture=function(t,r,n){this.throwIfDisposed(),this.throwIfNoProgram(),EDe(this.gl,this.debug,this.program,t,r,n)},e.prototype.setOutputMatrixTexture=function(t,r,n){this.setOutputMatrixTextureDriver(t,n,r)},e.prototype.setOutputPackedMatrixTexture=function(t,r,n){this.throwIfDisposed();var s=f1(r,n),i=s[0],o=s[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,r,n,s){this.setOutputMatrixWriteRegionDriver(n,t,s,r)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,r,n,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&DE(this.gl,this.debug,this.program),Jj(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Fr(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qj(this.gl,this.debug,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if($t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,r=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,n),n}var s=this.getQueryTimerExtensionWebGL1(),i=s.createQueryEXT();return s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if($t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var r=this.gl,n=this.getQueryTimerExtensionWebGL2();r.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Ir(this,void 0,void 0,function(){var r=this;return Pr(this,function(n){switch(n.label){case 0:return[4,V8(function(){return r.disposed||r.isQueryAvailable(t,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,r){if(r===0)return null;if(r===2){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,r){if(r===0)return!0;if(r===2){var n=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(s=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var r=this;return new Promise(function(n){r.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var t=function(n){for(var s=0;s<n.length&&n[s]();++s);return s-1}(this.itemsToPoll.map(function(n){return n.isDoneFn})),r=0;r<=t;++r)(0,this.itemsToPoll[r].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,r){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||V8(function(){return n.pollItems(),n.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),AE(this.gl,this.debug,t,this.framebuffer),this.debug&&Jj(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(AE(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Jj(this.gl)):X8(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,r){this.bindTextureToFrameBuffer(t);var n=r();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(t,r,n){this.throwIfDisposed();var s=this.gl;AE(s,this.debug,t,this.framebuffer),this.debug&&Jj(s),this.outputTexture=t,Fr(s,this.debug,function(){return s.viewport(0,0,r,n)}),Fr(s,this.debug,function(){return s.scissor(0,0,r,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,r,n,s){var i=this;this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return i.gl.scissor(t,r,n,s)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function cB(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(r,n){var s=r.logicalShape,i=t[n],o=i.shape;if(!Ei(s,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+s+" and "+o+" must match");if(!r.isUniform||!i.isUniform){var l=r.texShape,c=i.isUniform?null:i.texData.texShape;if(!Ei(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var FAe=function(e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n=r.filterWidth,s=r.inChannels,i=r.strideWidth,o=r.strideHeight,l=r.padInfo,c=r.outWidth,d=r.dilationWidth,u=r.dilationHeight,h=r.dataFormat,m=l.left,p=l.top,v=s*n,g=wo(),b=h==="channelsLast",y=b?0:1,C=b?1:2,N="",k=0;k<=1;k++)for(var S=0;S<=1;S++)N+=`
          blockIndex = rc.y + `+S+`;
          pos = rc.x + `+k+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+v+".) / "+s+`.));

              if(d1 < `+t[C]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+s+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+N+`

        `+g.output+` = result;
      }
    `},LAe=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[];var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},BAe=function(e,t,r,n,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=n,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+n+") * norm + float("+r+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+n+`)
                * float(`+s+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+s+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},UAe=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},$Ae=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,r=e.strideWidth,n=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
          wR += `+n+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},qAe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=l-1-e.padInfo.front,h=c-1-e.padInfo.top,m=d-1-e.padInfo.left,p=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+h+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+r+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+n+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ME=function(e,t,r,n,s,i,o){r===void 0&&(r=!1),n===void 0&&(n=!1),s===void 0&&(s=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",u=n?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=n?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+m[0]+`);
          result += (`+h[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+v+`

        setOutput(result);
      }
    `},VAe=function(){function e(t,r,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(r-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(r-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.seedLoc==null&&(r.seedLoc=n.getUniformLocation(s,"seed")),n.gl.uniform1f(r.seedLoc,t)}},e}(),zAe=function(e,t,r,n){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+n+"), float("+r+`),
                      float(index == coords.y)));
      }
    `},HAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var r=ll("rc",t),n=Ma(t),s=function(l,c,d){if(l===1)return"rc > "+c[0];for(var u="",h=l-2;h<l;h++)u+=d[h]+" >= "+c[h],h<l-1&&(u+="||");return u}(t,e,r),i=function(l,c,d,u){if(l===1)return"";var h=u.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `}(t,e[e.length-1],e[e.length-2],r),o=function(l,c){var d=l.length,u=function(h,m){for(var p=[],v=0;v<=1;v++)for(var g=0;g<=1;g++){for(var b=(v===0?"r":"rp1")+", "+(g===0?"c":"cp1"),y=2;y<h;y++)b=m[m.length-1-y]+","+b;p.push(b)}return p}(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,r);this.userCode=`
        void main() {
          `+n+` rc = getOutputCoords();

          if(`+s+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},WAe=function(e,t,r){this.variableNames=["x"],this.outputShape=t.map(function(c,d){return c[0]+e[d]+c[1]});var n=e.length,s=Ma(n),i=t.map(function(c){return c[0]}).join(","),o=t.map(function(c,d){return c[0]+e[d]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n);this.userCode=n!==1?`
      `+s+" start = "+s+"("+i+`);
      `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+r+`));
        } else {
          `+s+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+r+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},GAe=function(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(b,y){return b[0]+e[y]+b[1]});for(var n=e.length,s=Ma(n),i=t.map(function(b){return b[0]}).join(","),o=t.map(function(b,y){return b[0]+e[y]}).join(","),l=ll("rc",n),c=ll("source",n),d=l[n-1]+" < "+this.outputShape[n-1],u=n===1?"source":"vec2("+c.slice(-2).join()+")",h=[s+" rc = outputLoc;",l[n-1]+` += 1;
       if(`+d+`) {
      `,n===1?"":`}
       rc = outputLoc;
       `+l[n-2]+` += 1;
       if(`+l[n-2]+" < "+this.outputShape[n-2]+") {",n===1?"":"  "+l[n-1]+` += 1;
         if(`+d+") {"],m=n===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=n===1?2:4;v<g;v++)p+=`
        `+h[v]+`
        if (`+m+`) {
          result[`+v+"] = float("+r+`);
        } else {
          `+s+` source = rc - start;
          result[`+v+"] = getChannel(getX("+c.join()+"), "+u+`);
        }
      `;p+=n===1?"} ":"}}",this.userCode=`
      const `+s+" start = "+s+"("+i+`);
      const `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},RE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var m=t==="avg",p="0.0";if(m||(p="-1.0 / 1e-20"),r)this.userCode=`
        const ivec2 strides = ivec2(`+s+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var g=4*Math.floor(n/4),b=n%4,y=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+s+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+h+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},FE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r)this.userCode=`
        const ivec3 strides =
            ivec3(`+s+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var C=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(C="avgValue / count");var N=4*Math.floor(n/4),k=n%4,S=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+N+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+S+`
            }

            int xC = xCCorner + `+N+`;
            if (`+(k===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+S+`
            }
          }
          setOutput(`+C+`);
        }
      }
    `}},YAe=function(e,t){this.variableNames=["x"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=Math.ceil(s/r);this.outputShape=[n,i];var o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var d=4*Math.floor(r/4),u=r%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(u===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+c+`);
      }
    `},KAe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",n=0;n<4;n++){var s="thisRC = rc;";n%2==1&&(s+="thisRC.z += 1;"),n>1&&(s+="thisRC.y += 1;"),r+=`
        `+s+`
        `+(n>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+n+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(n>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Zp(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+CT(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+r+`

        setOutput(result);
      }
    `},XAe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(s-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},QAe=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},JAe=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(r-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},ZAe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+s+`) - 1),
                `+r+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+r+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},e4e=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r],u=n?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},t4e=function(e,t){this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");if(this.outputShape=e,r!==1){var n=e.map(function(i,o){return function(l){return t.indexOf(l)!==-1&&e[l]!==1?e[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(o)}).join(","),s=Ma(r);this.userCode=`
      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+n+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},r4e=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=e;var n=ll("rc",r),s=n[r-1]+" + 1 < "+this.outputShape[r-1],i=n[r-2]+" + 1 < "+this.outputShape[r-2],o=Ma(r);function l(c){var d=e.map(function(u,h){return function(m,p){return t.indexOf(m)!==-1&&e[m]!==1?e[m]+" - "+p[m]+" - 1":""+p[m]}(h,c)});return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=r===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+s+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(n.slice())+`;
          if(`+s+`){
            result.g = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",l(c)}(n.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            if(`+s+`) {
              result.a = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            }
          }
          setOutput(result);
        }
    `},dB=function(e,t,r,n,s,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Ma(s.length),c=Ma(i.length),d="";r===1?d="i":r===2&&(d="i, j");var u="getIndices("+d+")",h="";n===1?h="i":n===2&&(h="i, coords[1]");var m="getUpdates("+h+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+s+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},n4e=function(e,t){this.variableNames=["x","segmentIds"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[n,o];var l=4*Math.floor(r/4),c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `);var h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+r+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},a4e=function(e,t,r){var n,s;if(this.variableNames=["c","a","b"],this.outputShape=t,r>4)throw Error("Where for rank "+r+" is not yet supported");if(r===1)s="resRC",n="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[],c=0;c<t.length;c++)l.push(""+i[c]),c<e&&o.push(""+i[c]);n=o.join(),s=l.join()}var d=Ma(r);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+n+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+s+`));
        } else {
          setOutput(getB(`+s+`));
        }
      }
    `},s4e=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var r,n=Ma(this.rank),s="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return LE.slice(0,o).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);r=`
        `+n+` sourceLoc;
        `+n+` coords = getOutputCoords();
        `+t.map(function(o,l){return"sourceLoc."+LE[l]+" = start["+l+"] + coords."+LE[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+s+`
      void main() {
        `+r+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),LE=["x","y","z","w","u","v"],i4e=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var r=Ma(this.rank),n=ll("coords",this.rank),s=ll("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+s.slice(-2).join()+")",o="getChannel(getSource("+s.join()+"), "+i+")",l=`
      result.x = `+o+`;
      if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+s[this.rank-1]+`;
        result.y = `+o+`;
        --`+s[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+n[this.rank-1]+`;
      if (++`+n[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+s[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+s[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+r+"("+t.map(function(u,h){return"start["+h+"]"}).join()+");":t.map(function(u,h){return s[h]+" = "+n[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+r+` coords = getOutputCoords();
        `+r+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),o4e=function(e,t,r){this.variableNames=["x"],this.outputShape=r;var n=r.length,s=Ma(r.length),i=Ma(r.length),o="";if(n===1)o="coords * strides + begin";else{var l=0;o=r.map(function(c,d){return l++,r.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"}).join(",")}this.userCode=`
      `+s+" begin = "+s+"("+e+`);
      `+s+" strides = "+s+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},l4e=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,r,n){var s,i=uB(r,n),o=hB(t,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[o].shift();return this.usedTextures[o].push(l),l}return this.numUsedTextures++,this.log(),i===zl.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===zl.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===zl.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===zl.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===zl.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(s),s},e.prototype.releaseTexture=function(t,r,n,s){if(this.freeTextures!=null){var i=hB(r,uB(n,s),s);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],l=o.indexOf(t);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var r in this.freeTextures)this.freeTextures[r].forEach(function(n){t.gpgpu.deleteMatrixTexture(n)});for(var r in this.usedTextures)this.usedTextures[r].forEach(function(s){t.gpgpu.deleteMatrixTexture(s)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function uB(e,t){if(e===Yl.UPLOAD)return zl.PACKED_2X2_FLOAT32;if(e===Yl.RENDER||e==null)return function(r){return $t().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?zl.PACKED_2X2_FLOAT32:zl.UNPACKED_FLOAT32:r?zl.PACKED_2X2_FLOAT16:zl.UNPACKED_FLOAT16}(t);if(e===Yl.DOWNLOAD||e===Yl.PIXELS)return zl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function hB(e,t,r){return e[0]+"_"+e[1]+"_"+t+"_"+r}var c4e=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[n]*t[n];this.outputShape=r,this.rank=r.length;var s=Ma(this.rank),i=function(o){var l=o.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],u=0;u<o.length;u++)d.push("imod("+c[u]+", "+o[u]+")");return d.join()}(e);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},d4e=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];this.outputShape=r,this.rank=r.length;var s=Ma(this.rank),i=function(o){var l=o.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),u=0;u<o.length;u++)d[o[u]]=c[u];return d.join()}(t);this.userCode=`
    void main() {
      `+s+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},u4e=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=Ma(this.rank),i=kG("rc",this.rank),o=new Array(this.rank);for(n=0;n<t.length;n++)o[t[n]]=i[n];var l="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+r[this.rank-1],d="getChannel(getA("+o.join()+"), "+l+")";this.userCode=`
    void main() {
      `+s+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+r[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},kT=1.7580993408473768,_T=1.0507009873554805,wn=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},$d="if (isnan(x)) return x;",h4e="return x;",fB="return abs(x);",TG=$d+`
  return (x < 0.0) ? 0.0 : x;
`,IG=$d+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,PG="return (x >= 0.0) ? x : (exp(x) - 1.0);",f4e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+kT+`;
  float scale = `+_T+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mB="return -x;",pB="return ceil(x);",xB="return floor(x);",vB="return exp(x);",gB="return exp(x) - 1.0;",m4e=$d+`
  return sin(x);
`,p4e=$d+`
  return cos(x);
`,x4e=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,v4e=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,g4e=$d+`
  return atan(x);
`,b4e=$d+"return log(x + sqrt(x * x + 1.0));",y4e=$d+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,j4e=$d+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,rN="return x;",N4e="return x;",OG=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MG=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RG=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,jb=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},w4e=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,r=ll("rc",t),n=Ma(t),s=function(l,c){if(l===1)return"rc";for(var d="",u=0;u<l;u++)d+=c[u],u<l-1&&(d+=",");return d}(t,r),i=r.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+n+` rc = getOutputCoords();
        vec4 packedInput = getA(`+s+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},nN={};function aN(e,t){if(t===void 0&&(t=!1),e==="linear")return t?N4e:h4e;if(e==="relu")return t?OG:TG;if(e==="elu")return t?RG:PG;if(e==="relu6")return t?MG:IG;if(e==="prelu")return t?AG:DG;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var S4e=600,C4e=function(e){function t(r){var n,s=e.call(this)||this;if(s.pendingRead=new WeakMap,s.pendingDisposal=new WeakSet,s.dataRefCount=new WeakMap,s.numBytesInGPU=0,s.uploadWaitMs=0,s.downloadWaitMs=0,s.warnedAboutMemory=!1,s.pendingDeletes=0,s.disposed=!1,!$t().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(r==null){var i=th($t().getNumber("WEBGL_VERSION"));s.binaryCache=((n=$t().getNumber("WEBGL_VERSION"))in nN||(nN[n]={}),nN[n]),s.gpgpu=new RAe(i),s.canvas=i.canvas,s.gpgpuCreatedLocally=!0}else s.gpgpu=r,s.binaryCache={},s.gpgpuCreatedLocally=!1,s.canvas=r.gl.canvas;return s.textureManager=new l4e(s.gpgpu),s.numMBBeforeWarning=$t().global.screen==null?1024:$t().global.screen.height*$t().global.screen.width*window.devicePixelRatio*S4e/1024/1024,s.texData=new vG(s,ut),s}return Ud(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(r,n,s){if($t().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64"&&r!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:n,dtype:s,values:r,usage:Yl.UPLOAD}),i},t.prototype.move=function(r,n,s,i){if($t().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(r,{shape:s,dtype:i,values:n,usage:Yl.UPLOAD})},t.prototype.readSync=function(r){var n=this.texData.get(r),s=n.values,i=n.dtype,o=n.complexTensors,l=n.slice,c=n.shape,d=n.isPacked;if(l!=null){var u=void 0;u=d?new jb(c,rN):new wn(c,rN);var h=this.runWebGLProgram(u,[{dataId:r,shape:c,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeData(h.dataId),m}if(s!=null)return this.convertAndCacheOnCPU(r);if(i==="string")return s;var p,v,g=this.activeTimers!=null;return g&&(p=ku()),i==="complex64"?v=XD(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(r),g&&(this.downloadWaitMs+=ku()-p),this.convertAndCacheOnCPU(r,v)},t.prototype.read=function(r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Pr(this,function(A){switch(A.label){case 0:if(this.pendingRead.has(r))return n=this.pendingRead.get(r),[2,new Promise(function(L){return n.push(L)})];if(s=this.texData.get(r),i=s.values,o=s.shape,l=s.slice,c=s.dtype,d=s.complexTensors,u=s.isPacked,l!=null)return h=void 0,h=u?new jb(o,rN):new wn(o,rN),m=this.runWebGLProgram(h,[{dataId:r,shape:o,dtype:c}],c),p=this.read(m.dataId),this.disposeData(m.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(r)];if(!$t().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&$t().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,c!=="complex64"&&$t().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(r),b=this.texData.get(g.dataId),v=(T=this.gpgpu).createBufferFromTexture.apply(T,[b.texture].concat(Wb(o)))),this.pendingRead.set(r,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return C=A.sent(),N=C[0],k=C[1],y=XD(N,k),[3,5];case 4:v==null?y=this.getValuesFromTexture(r):(S=Mr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,S)),A.label=5;case 5:return g!=null&&this.disposeData(g.dataId),D=this.convertAndCacheOnCPU(r,y),E=this.pendingRead.get(r),this.pendingRead.delete(r),E.forEach(function(L){return L(D)}),this.pendingDisposal.has(r)&&(this.pendingDisposal.delete(r),this.disposeData(r),this.pendingDeletes--),[2,D]}})})},t.prototype.checkNumericalProblems=function(r){if(r!=null)for(var n=0;n<r.length;n++){var s=r[n];if(!fDe(s))throw $t().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+s+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+s+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.isPacked,c=Mr(i);if($t().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(r),u=this.texData.get(d.dataId),h=(n=this.gpgpu).downloadMatrixFromPackedTexture.apply(n,[u.texture].concat(Wb(i))).subarray(0,c);return this.disposeData(d.dataId),h}var m=$t().getBool("WEBGL_PACK")&&l===!0,p=m?TE(i):i,v=m?new hAe(p):new uAe(p),g=this.runWebGLProgram(v,[{shape:p,dtype:o,dataId:r}],"float32"),b=this.texData.get(g.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,c);return this.disposeData(g.dataId),y},t.prototype.time=function(r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d;return Pr(this,function(u){switch(u.label){case 0:return n=this.activeTimers,s=[],i=!1,this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,r(),o=Fv(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),l=Fv(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=n,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return d=u.sent(),c.kernelMs=G5e(d),c.getExtraProfileInfo=function(){return d.map(function(h,m){return{name:l[m],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ku(),endMs:null}},t.prototype.endTimer=function(r){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),r):(r.endMs=ku(),r)},t.prototype.getQueryTime=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(r)]:[2,(n=r).endMs-n.startMs]})})},t.prototype.disposeData=function(r){if(!this.pendingDisposal.has(r)){if(this.pendingRead.has(r))return this.pendingDisposal.add(r),void this.pendingDeletes++;if(this.texData.has(r)){this.releaseGPUData(r);var n=this.texData.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.texData.delete(r)}}},t.prototype.releaseGPUData=function(r){var n=this.texData.get(r),s=n.texture,i=n.dtype,o=n.texShape,l=n.usage,c=n.isPacked,d=n.slice,u=d&&d.origDataId||r,h=this.dataRefCount.get(u);h>1?this.dataRefCount.set(u,h-1):(this.dataRefCount.delete(u),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,l,c)));var m=this.texData.get(r);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},t.prototype.getTexture=function(r){return this.uploadToGPU(r),this.texData.get(r).texture},t.prototype.getDataInfo=function(r){return this.texData.get(r)},t.prototype.getCPUBackend=function(){return $t().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ut.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(r,n){var s=this;return n===void 0&&(n=128),this.getCPUBackend()!=null&&r.every(function(i){return s.texData.get(i.dataId).texture==null&&i.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(r,n){var s=this.makeOutput(r.shape,"complex64");return this.texData.get(s.dataId).complexTensors={real:ut.keep(r.clone()),imag:ut.keep(n.clone())},s},t.prototype.real=function(r){return this.texData.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.texData.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.slice(r,n,s);if(Mr(s)===0)return Ki([],s,r.dtype);var i=this.texData.get(r.dataId).isPacked,o=pG(r.shape,n,s);if(i||!o){var l=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i4e(s):new s4e(s),c=l.getCustomSetupFunc(n);return this.compileAndRun(l,[r],null,c)}return this.uploadToGPU(r.dataId),this.shallowSlice(r,n,s)},t.prototype.shallowSlice=function(r,n,s){var i=this.texData.get(r.dataId),o=this.makeOutput(s,r.dtype),l=this.texData.get(o.dataId);Object.assign(l,i),l.shape=s,l.dtype=r.dtype;var c=xG(n,r.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||r.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),o},t.prototype.stridedSlice=function(r,n,s,i){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.stridedSlice(r,n,s,i);var o=yT(n,s,i);if(o.some(function(c){return c===0}))return Ki([],o);var l=new o4e(n,i,o);return this.compileAndRun(l,[r])},t.prototype.reverse=function(r,n){var s=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new r4e(r.shape,n):new t4e(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.concat=function(r,n){if(r[0].dtype==="complex64"){var s=r.map(function(p){return Uc(p)}),i=r.map(function(p){return Du(p)});return zi(this.concat(s,n),this.concat(i,n))}if(this.shouldExecuteOnCPU(r))return this.cpuBackend.concat(r,n);if(r.length===1)return r[0];if(r.length>$t().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(r.length/2),l=this.concat(r.slice(0,o),n),c=this.concat(r.slice(o),n);return this.concat([l,c],n)}if($t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].rank>1){var d=new Q3e(r.map(function(p){return p.shape}),n);return this.compileAndRun(d,r)}var u=Bv(r.map(function(p){return p.shape}),n),h=r.map(function(p){return p.as2D(-1,Mr(p.shape.slice(n)))}),m=new X3e(h.map(function(p){return p.shape}));return this.compileAndRun(m,h).reshape(u)},t.prototype.neg=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.neg(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,mB,r.dtype);var n=new wn(r.shape,mB);return this.compileAndRun(n,[r])},t.prototype.batchMatMul=function(r,n,s,i){var o=s?r.shape[2]:r.shape[1],l=i?n.shape[1]:n.shape[2],c=s?r.shape[1]:r.shape[2],d=r.shape[0];if((o===1||l===1)&&c>1e3){s&&(r=r.transpose([0,2,1])),i&&(n=n.transpose([0,2,1]));var u=l===1?r:r.as3D(d,c,1),h=l===1?2:1,m=l===1?n.as3D(d,1,c):n;return this.multiply(u,m).sum(h,!0)}var p=Wi(r.dtype,n.dtype),v=new ME(r.shape,[d,o,l],s,i);return this.compileAndRun(v,[r,n],p)},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=i?n.shape[2]:n.shape[1],h=o?s.shape[1]:s.shape[2],m=n.shape[0],p=Wi(n.dtype,s.dtype),v=l!=null,g=d!=null,b=c?aN(c,!0):null,y=new ME(n.shape,[m,u,h],i,o,v,b,g),C=[n,s];return l&&C.push(l),d&&C.push(d),this.compileAndRun(y,C,p)},t.prototype.multiply=function(r,n){if(r.dtype==="complex64"){var s=this.texData.get(r.dataId),i=this.texData.get(n.dataId),o=new rB(H3e,r.shape,n.shape),l=new rB(W3e,r.shape,n.shape),c=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag),this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],d=this.compileAndRun(o,c),u=this.compileAndRun(l,c),h=this.complex(d,u);return d.dispose(),u.dispose(),h}if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.multiply(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,nB,r.dtype);var m=new bs(nB,r.shape,n.shape);return this.compileAndRun(m,[r,n],r.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){var c=[r,n,s],d=null;l!=null&&(d=l.shape,c.push(l));var u=null;if(o!=null&&(u=o.shape,c.push(o)),$t().getBool("WEBGL_PACK_NORMALIZATION")){var h=new z3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(h,c)}var m=new V3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(m,c)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){var l=$t().getBool("WEBGL_PACK_NORMALIZATION")?new UAe(r.shape,n,s,i,o):new LAe(r.shape,n,s,i,o);return this.compileAndRun(l,[r])},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){var d=new BAe(n.shape,i,o,l,c);return this.compileAndRun(d,[n,s,r])},t.prototype.tile=function(r,n){if(r.dtype==="string"){var s=this.readSync(r.dataId).map(function(o){return Xw(o)});return SG(mn(r.shape,r.dtype,s),n)}var i=new c4e(r.shape,n);return this.compileAndRun(i,[r])},t.prototype.pad=function(r,n,s){var i=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GAe(r.shape,n,s):new WAe(r.shape,n,s);return this.compileAndRun(i,[r])},t.prototype.transpose=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.transpose(r,n);var s=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new u4e(r.shape,n):new d4e(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.gather=function(r,n,s){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.gather(r,n,s);var i=new gAe(r.shape,n.size,s);return this.compileAndRun(i,[r,n])},t.prototype.batchToSpaceND=function(r,n,s){ze(r.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(h,m){return h*m}),o=r2(r.shape,n,i),l=n2(o.length,n.length),c=a2(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){ze(r.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=r2(c.shape,n,i,!1),u=n2(d.length,n.length,!1),h=a2(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.reduce=function(r,n,s){var i=r.shape[0],o=r.shape[1],l=IE(o),c=new YAe({windowSize:l,inSize:o,batchSize:i},n),d=this.compileAndRun(c,[r],s);return d.shape[1]===1?d:this.reduce(d,n,s)},t.prototype.argReduce=function(r,n,s){s===void 0&&(s=null);var i=r.shape[0],o=r.shape[1];s!=null&&(i=s.shape[0],o=s.shape[1]);var l=IE(o),c=new O3e({windowSize:l,inSize:o,batchSize:i},n,s==null),d=[r];s!=null&&d.push(s);var u=this.compileAndRun(c,d,"int32");return u.shape[1]===1?u:this.argReduce(r,n,u)},t.prototype.argReducePacked=function(r,n,s){s===void 0&&(s=null);var i=s!=null?s.shape:r.shape,o=IE(i[i.length-1]),l=new U3e(i,o,n,s==null),c=s==null?[r]:[r,s],d=this.compileAndRun(l,c,"int32");return d.rank===r.rank?this.argReducePacked(r,n,d):d},t.prototype.sum=function(r,n){Ul("sum",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"sum",c).reshape(i)},t.prototype.prod=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.prod(r,n);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(r,n,s){var i=0,o=rh([i],r.rank),l=r;o!=null&&(l=r.transpose(o),i=nh(1,r.rank)[0]);var c=function(p,v,g){for(var b=[],y=p.length,C=0;C<y;C++)C!==v?b.push(p[C]):b.push(g);return b}(l.shape,i,s),d=Mr([l.shape[i]]),u=l.as2D(-1,d),h=SE(r.dtype),m=this.segOpCompute(u,"unsortedSegmentSum",n,h,s).reshape(c);return o!=null&&(m=m.transpose(xT(o))),m},t.prototype.segOpCompute=function(r,n,s,i,o){var l=r.shape[0],c=r.shape[1],d=function(m,p){var v,g=!1;for(m<=mG?(v=m,g=!0):v=$D(m,Math.floor(Math.sqrt(m)));!g;)v>p||v===m?g=!0:v=$D(m,v+1);return v}(c,o),u=new n4e({windowSize:d,inSize:c,batchSize:l,numSegments:o}),h=this.compileAndRun(u,[r,s],i);return h.shape[1]===o?h:(s=t2(0,o).tile([c/d]),this.segOpCompute(h,n,s,i,o))},t.prototype.argMinMaxReduce=function(r,n,s){var i=[n];if(Ul("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,r.rank),!$t().getBool("WEBGL_PACK_REDUCE")||r.rank<=2){var o=xo(r.shape,i),l=o[0],c=Mr(o[1]),d=r.as2D(-1,c);return this.argReduce(d,s).reshape(l)}return this.argReducePacked(r,s)},t.prototype.argMin=function(r,n){return this.argMinMaxReduce(r,n,"min")},t.prototype.argMax=function(r,n){return this.argMinMaxReduce(r,n,"max")},t.prototype.cumsum=function(r,n,s,i){if(n!==r.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(r.rank-1)+" but got axis="+n);var o=new iAe(r.shape,s,i);return this.compileAndRun(o,[r])},t.prototype.equal=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(equal(a, b));
`,"bool");var s=new bs("return float(a == b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.notEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(notEqual(a, b));
`,"bool");var s=new bs("return float(a != b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.less=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.less(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThan(a, b));
`,"bool");var s=new bs("return float(a < b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.lessEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThanEqual(a, b));
`,"bool");var s=new bs("return float(a <= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greater=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.greater(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThan(a, b));
`,"bool");var s=new bs("return float(a > b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greaterEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var s=new bs("return float(a >= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalNot=function(r){var n=new wn(r.shape,"return float(!(x >= 1.0));");return this.compileAndRun(n,[r])},t.prototype.logicalAnd=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var s=new bs("return float(a >= 1.0 && b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalOr=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var s=new bs("return float(a >= 1.0 || b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.select=function(r,n,s){var i=new a4e(r.rank,n.shape,n.rank);return this.compileAndRun(i,[r,n,s],Wi(n.dtype,s.dtype))},t.prototype.where=function(r){Zw("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=r.dataSync();return ST(r.shape,n)},t.prototype.topk=function(r,n,s){return CG(r.dataSync(),r.shape,r.dtype,n)},t.prototype.min=function(r,n){Ul("min",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"min",l.dtype).reshape(i)},t.prototype.minimum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.minimum(r,n);var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.mod=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`if (b == 0.0) return NAN;
  return mod(a, b);`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.max=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.max(r,n);Ul("max",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"max",l.dtype).reshape(i)},t.prototype.maximum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.maximum(r,n);var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.all=function(r,n){Ul("all",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"all",l.dtype).reshape(i)},t.prototype.any=function(r,n){Ul("any",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Mr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"any",l.dtype).reshape(i)},t.prototype.realDivide=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var s=new bs(`
if (a == b) {
  return 1.0;
};
return a / b;`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"float32")},t.prototype.floorDiv=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var s=new bs(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"int32")},t.prototype.add=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,PE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.add(r,n);var s=Wi(r.dtype,n.dtype);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,PE,s);var i=new bs(PE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.packedUnaryOp=function(r,n,s){var i=new jb(r.shape,n);return this.compileAndRun(i,[r],s)},t.prototype.packedBinaryOp=function(r,n,s,i,o){o===void 0&&(o=!1);var l=new Mh(s,r.shape,n.shape,o);return this.compileAndRun(l,[r,n],i)},t.prototype.complexSeparableBinaryOp=function(r,n,s){var i=this,o=this.texData.get(r.dataId),l=this.texData.get(n.dataId),c=[[o.complexTensors.real,l.complexTensors.real],[o.complexTensors.imag,l.complexTensors.imag]].map(function(m){var p=m[0],v=m[1],g=i.makeComplexComponentTensorInfo(r,p),b=i.makeComplexComponentTensorInfo(n,v),y=new bs(s,r.shape,n.shape);return i.compileAndRun(y,[g,b],Wi(p.dtype,v.dtype))}),d=c[0],u=c[1],h=this.complex(d,u);return d.dispose(),u.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(r,n){return{dataId:n.dataId,dtype:n.dtype,shape:r.shape}},t.prototype.addN=function(r){if(r.length===1)return r[0];if(r.length>$t().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(r.length/2),s=this.addN(r.slice(0,n)),i=this.addN(r.slice(n));return this.addN([s,i])}var o=r.map(function(d){return d.dtype}).reduce(function(d,u){return Wi(d,u)}),l=r.map(function(d){return d.shape}),c=$t().getBool("WEBGL_PACK")?new P3e(r[0].shape,l):new I3e(r[0].shape,l);return this.compileAndRun(c,r,o)},t.prototype.subtract=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,OE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.subtract(r,n);var s=Wi(r.dtype,n.dtype);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,OE,r.dtype);var i=new bs(OE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.pow=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,r.shape,n.shape),i=Wi(r.dtype,n.dtype);return this.compileAndRun(s,[r,n],i)},t.prototype.ceil=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.ceil(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,pB,r.dtype);var n=new wn(r.shape,pB);return this.compileAndRun(n,[r])},t.prototype.floor=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.floor(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,xB,r.dtype);var n=new wn(r.shape,xB);return this.compileAndRun(n,[r])},t.prototype.sign=function(r){var n=new wn(r.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(n,[r])},t.prototype.isNaN=function(r){var n=new wn(r.shape,"return float(isnan(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isInf=function(r){var n=new wn(r.shape,"return float(isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isFinite=function(r){var n=new wn(r.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.round=function(r){var n=new wn(r.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(n,[r])},t.prototype.exp=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.exp(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,vB,r.dtype);var n=new wn(r.shape,vB);return this.compileAndRun(n,[r])},t.prototype.expm1=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.expm1(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,gB,r.dtype);var n=new wn(r.shape,gB);return this.compileAndRun(n,[r])},t.prototype.softmax=function(r,n){var s=xi([n],r.shape),i=this.max(r,s),o=xl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.log=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.log(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,r.dtype);var n=new wn(r.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(n,[r])},t.prototype.log1p=function(r){var n=new wn(r.shape,"return log(1.0 + x);");return this.compileAndRun(n,[r])},t.prototype.sqrt=function(r){var n=new wn(r.shape,"return sqrt(x);");return this.compileAndRun(n,[r])},t.prototype.rsqrt=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.rsqrt(r);var n=new wn(r.shape,"return inversesqrt(x);");return this.compileAndRun(n,[r])},t.prototype.reciprocal=function(r){var n=new wn(r.shape,"return 1.0 / x;");return this.compileAndRun(n,[r])},t.prototype.relu=function(r){var n;return n=$t().getBool("WEBGL_PACK")?new jb(r.shape,OG):new wn(r.shape,TG),this.compileAndRun(n,[r])},t.prototype.relu6=function(r){var n;return n=$t().getBool("WEBGL_PACK")?new jb(r.shape,MG):new wn(r.shape,IG),this.compileAndRun(n,[r])},t.prototype.prelu=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(AG,r.shape,n.shape):new bs(DG,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.elu=function(r){if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,RG,r.dtype);var n=new wn(r.shape,PG);return this.compileAndRun(n,[r])},t.prototype.eluDer=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,n.shape):new bs("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.selu=function(r){var n=new wn(r.shape,f4e);return this.compileAndRun(n,[r])},t.prototype.int=function(r){var n=new wn(r.shape,"return float(int(x));");return this.compileAndRun(n,[r],"int32")},t.prototype.clip=function(r,n,s){var i,o=(i=$t().getBool("WEBGL_PACK_CLIP")?new Y3e(r.shape):new G3e(r.shape)).getCustomSetupFunc(n,s);return this.compileAndRun(i,[r],null,o)},t.prototype.abs=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.abs(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,fB,r.dtype);var n=new wn(r.shape,fB);return this.compileAndRun(n,[r])},t.prototype.complexAbs=function(r){var n=this.texData.get(r.dataId),s=new K3e(r.shape),i=[this.makeComplexComponentTensorInfo(r,n.complexTensors.real),this.makeComplexComponentTensorInfo(r,n.complexTensors.imag)];return this.compileAndRun(s,i)},t.prototype.sigmoid=function(r){var n=new wn(r.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(n,[r])},t.prototype.softplus=function(r){var n=new wn(r.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(n,[r])},t.prototype.sin=function(r){var n=new wn(r.shape,m4e);return this.compileAndRun(n,[r])},t.prototype.cos=function(r){var n=new wn(r.shape,p4e);return this.compileAndRun(n,[r])},t.prototype.tan=function(r){var n=new wn(r.shape,"return tan(x);");return this.compileAndRun(n,[r])},t.prototype.asin=function(r){var n=new wn(r.shape,x4e);return this.compileAndRun(n,[r])},t.prototype.acos=function(r){var n=new wn(r.shape,v4e);return this.compileAndRun(n,[r])},t.prototype.atan=function(r){var n=new wn(r.shape,g4e);return this.compileAndRun(n,[r])},t.prototype.atan2=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.sinh=function(r){var n=new wn(r.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.cosh=function(r){var n=new wn(r.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.tanh=function(r){var n=new wn(r.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(n,[r])},t.prototype.asinh=function(r){var n=new wn(r.shape,b4e);return this.compileAndRun(n,[r])},t.prototype.acosh=function(r){var n=new wn(r.shape,y4e);return this.compileAndRun(n,[r])},t.prototype.atanh=function(r){var n=new wn(r.shape,j4e);return this.compileAndRun(n,[r])},t.prototype.erf=function(r){var n=new wn(r.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(n,[r])},t.prototype.step=function(r,n){var s=new wn(r.shape,function(i){return i===void 0&&(i=0),$d+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(n));return this.compileAndRun(s,[r])},t.prototype.conv2dByMatMul=function(r,n,s,i,o,l){var c=r.shape,d=this.texData.get(r.dataId),u=s.inChannels,h=c[0]*c[1]*c[2],m=s.outChannels,p=s.dataFormat==="channelsLast",v=(h===1||m===1)&&u>1e3,g=c[2]%2!=0&&!!d.isPacked;if(v||!$t().getBool("WEBGL_LAZILY_UNPACK")||!$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var b=p?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],y=this.reshape(r,[1,b,s.inChannels]),C=this.reshape(n,[1,s.inChannels,s.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:C,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),s.outShape)}var N=p?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),k={dataId:r.dataId,shape:[1,N,s.inChannels],dtype:r.dtype},S=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,ze(eN(d.shape,k.shape),function(){return"packed reshape "+d.shape+" to "+k.shape+" isn't free"});var D=this.reshape(n,[1,s.inChannels,s.outChannels]),E=this.fusedBatchMatMul({a:k,b:D,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),T=this.texData.get(E.dataId);return ze(T.isPacked,function(){return"batchMatMul result is expected to be packed"}),d.shape=S,T.shape=s.outShape,ut.makeTensorFromDataId(E.dataId,s.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(r,n,s,i,o,l){var c=s.filterWidth,d=s.filterHeight,u=s.inChannels,h=s.outWidth,m=s.outHeight,p=s.dataFormat==="channelsLast",v=c*d*u,g=m*h,b=[v,g],y=r.squeeze([0]),C=n.reshape([1,v,-1]),N=new FAe(b,y.shape,s),k=this.compileAndRun(N,[y]).reshape([1,b[0],b[1]]),S=i!=null,D=l!=null,E=o?aN(o,!0):null,T=new ME(k.shape,[1,g,s.outChannels],!0,!1,S,E,D),A=[k,C];i&&A.push(i),D&&A.push(l);var L=this.compileAndRun(T,A);return p?L.reshape([1,m,h,s.outChannels]):L.reshape([1,s.outChannels,m,h])},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,s,i,o,l,c);if($t().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,s,i,o,l,c);var d=o!=null,u=c!=null,h=l?aN(l,!1):null,m=new aB(i,d,h,u),p=[n,s];return o&&p.push(o),c&&p.push(c),this.compileAndRun(m,p)},t.prototype.conv2d=function(r,n,s){if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,n,s);if($t().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,n,s);var i=new aB(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerInput=function(r,n,s){var i=new Z3e(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerFilter=function(r,n,s){var i=new J3e(s);return this.compileAndRun(i,[r,n])},t.prototype.fusedDepthwiseConv2D=function(r){var n,s=r.input,i=r.filter,o=r.convInfo,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=$t().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,h=c?aN(c,u):null,m=[s,i],p=l!=null,v=d!=null;return p&&m.push(l),v&&m.push(d),u?(n=new iB(o,p,h,v),this.compileAndRun(n,m)):(n=new sB(o,p,h,v),this.compileAndRun(n,m))},t.prototype.depthwiseConv2D=function(r,n,s){var i;return $t().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1?(i=new iB(s),this.compileAndRun(i,[r,n])):(i=new sB(s),this.compileAndRun(i,[r,n]))},t.prototype.depthwiseConv2DDerInput=function(r,n,s){var i=new nAe(s);return this.compileAndRun(i,[r,n])},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){var i=new rAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3d=function(r,n,s){var i=new aAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerInput=function(r,n,s){var i=new tAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerFilter=function(r,n,s){var i=new eAe(s);return this.compileAndRun(i,[r,n])},t.prototype.maxPool=function(r,n){var s=new RE(n,"max",!1);return this.compileAndRun(s,[r])},t.prototype.avgPool=function(r,n){var s=new RE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPoolBackprop=function(r,n,s,i){var o=new RE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new $Ae(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.avgPoolBackprop=function(r,n,s){var i=new $3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.avgPool3d=function(r,n){var s=new FE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.avgPool3dBackprop=function(r,n,s){var i=new q3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.maxPool3d=function(r,n){var s=new FE(n,"max",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPool3dBackprop=function(r,n,s,i){var o=new FE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new qAe(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.reshape=function(r,n){var s=this.texData.get(r.dataId);if(s.isPacked&&!eN(r.shape,n)&&(s.texture===null||!eN(s.shape,n))){var i=this.packedReshape(r,n);return ut.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return KD(r,n)},t.prototype.resizeBilinear=function(r,n,s,i){var o=$t().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new JAe(r.shape,n,s,i):new QAe(r.shape,n,s,i);return this.compileAndRun(o,[r],"float32")},t.prototype.resizeBilinearBackprop=function(r,n,s){var i=new XAe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.resizeNearestNeighbor=function(r,n,s,i){var o=new e4e(r.shape,n,s,i);return this.compileAndRun(o,[r])},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){var i=new ZAe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.multinomial=function(r,n,s,i){var o=n?r:jf(r),l=o.shape[0],c=o.shape[1],d=new VAe(l,c,s),u=d.getCustomSetupFunc(i);return this.compileAndRun(d,[o],"int32",u)},t.prototype.oneHot=function(r,n,s,i){var o=new zAe(r.size,n,s,i);return this.compileAndRun(o,[r])},t.prototype.diag=function(r){var n=new dAe(r.size);return this.compileAndRun(n,[r])},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return Zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),NT(r.dataSync(),n.dataSync(),s,i,o)},t.prototype.cropAndResize=function(r,n,s,i,o,l){var c=new sAe(r.shape,n.shape,i,o,l);return this.compileAndRun(c,[r,n,s],"float32")},t.prototype.depthToSpace=function(r,n,s){ze(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var i=r.shape[0],o=s==="NHWC"?r.shape[1]:r.shape[2],l=s==="NHWC"?r.shape[2]:r.shape[3],c=s==="NHWC"?r.shape[3]:r.shape[1],d=o*n,u=l*n,h=c/(n*n),m=new cAe(s==="NHWC"?[i,d,u,h]:[i,h,d,u],n,s);return this.compileAndRun(m,[r])},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.scatterND=function(r,n,s){var i=s2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=[u/c,c],m=r.reshape([l,o]),p=n.reshape([l,c]);if(u===0)return KD(Ki([]),s);var v=yr(0),g=new dB(l,o,m.rank,p.rank,d,h);return this.compileAndRun(g,[p,m,v]).reshape(s)},t.prototype.sparseToDense=function(r,n,s,i){var o=s2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.strides,u=o.outputSize,h=new dB(c,l,r.rank,n.rank,d,[u,1]);return this.compileAndRun(h,[n,r,i]).reshape(s)},t.prototype.fft=function(r){return this.fftImpl(r,!1)},t.prototype.ifft=function(r){return this.fftImpl(r,!0)},t.prototype.fftImpl=function(r,n){var s=this.texData.get(r.dataId),i=new lB(pAe,r.shape,n),o=new lB(xAe,r.shape,n),l=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],c=this.compileAndRun(i,l),d=this.compileAndRun(o,l),u=this.complex(c,d).as2D(r.shape[0],r.shape[1]);return c.dispose(),d.dispose(),u},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3],h=n.reshape([c,i]),m=r.reshape([r.size/d,d]),p=new bAe(i,u,[c,d]);return this.compileAndRun(p,[m,h]).reshape(l)},t.prototype.fill=function(r,n,s){if((s=s||u1(n))==="string"){var i=Kw(s,Mr(r));return i.fill(n),ut.makeTensor(i,r,s,this)}var o=new vAe(r,n),l=o.getCustomSetupFunc(n);return this.compileAndRun(o,[],s,l)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){return this.fill(r.shape,r.dtype==="string"?"":0,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.makeTensorInfo=function(r,n){var s=this.write(null,r,n);return this.texData.get(s).usage=null,{dataId:s,shape:r,dtype:n}},t.prototype.makeOutput=function(r,n){var s=this.makeTensorInfo(r,n).dataId;return ut.makeTensorFromDataId(s,r,n,this)},t.prototype.unpackTensor=function(r){var n=new w4e(r.shape);return this.runWebGLProgram(n,[r],r.dtype)},t.prototype.packTensor=function(r){var n=new HAe(r.shape);return this.runWebGLProgram(n,[r],r.dtype,null,!0)},t.prototype.packedReshape=function(r,n){var s=[Qw(r.shape)].concat(Jw(r.shape)),i={dtype:r.dtype,shape:s,dataId:r.dataId},o=[Qw(n)].concat(Jw(n)),l=new KAe(o,s),c=this.runWebGLProgram(l,[i],r.dtype,null,!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}},t.prototype.decode=function(r){var n,s=this.texData.get(r),i=s.isPacked,o=s.shape,l=s.dtype,c=TE(o);return n=i?new lAe(c):new oAe(c),{dtype:l,shape:o,dataId:this.runWebGLProgram(n,[{shape:c,dtype:l,dataId:r}],l,null,!0).dataId}},t.prototype.runWebGLProgram=function(r,n,s,i,o){var l=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(r.outputShape,s),d=this.texData.get(c.dataId);if(r.packedOutput&&(d.isPacked=!0),r.outPackingScheme===Dy.DENSE){var u=Wb(r.outputShape);d.texShape=u.map(function(N){return 2*N})}if(r.outTexUsage!=null&&(d.usage=r.outTexUsage),Mr(c.shape)===0)return d.values=_y(c.dtype,0),c;var h=[],m=n.map(function(N){if(N.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var k=l.texData.get(N.dataId);if(k.texture==null){if(!r.packedInputs&&Mr(N.shape)<=$t().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:N.shape,texData:null,isUniform:!0,uniformValues:k.values};r.packedInputs&&(k.isPacked=!0,k.shape=N.shape)}else if(!!k.isPacked!=!!r.packedInputs)N=k.isPacked?l.unpackTensor(N):l.packTensor(N),h.push(N),k=l.texData.get(N.dataId);else if(k.isPacked&&!eN(k.shape,N.shape)){var S=N,D=N.shape;N.shape=k.shape,N=l.packedReshape(N,D),h.push(N),k=l.texData.get(N.dataId),S.shape=D}return l.uploadToGPU(N.dataId),{shape:N.shape,texData:k,isUniform:!1}});this.uploadToGPU(c.dataId);var p,v={shape:c.shape,texData:d,isUniform:!1},g=function(N,k,S){var D="";k.concat(S).forEach(function(A){var L=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,P=A.isUniform?"uniform":A.texData.texShape;D+=A.shape+"_"+P+"_"+L});var E=N.userCode,T=N.constructor.name;return T+="_"+D+"_"+E}(r,m,v),b=this.getAndSaveBinary(g,function(){return function(N,k,S,D){var E=k.userCode,T=S.map(function(B,te){var X={logicalShape:B.shape,texShape:B.isUniform?null:B.texData.texShape,isUniform:B.isUniform,isPacked:!B.isUniform&&B.texData.isPacked,flatOffset:null};return B.texData!=null&&B.texData.slice!=null&&B.texData.slice.flatOffset>0&&(X.flatOffset=B.texData.slice.flatOffset),{name:k.variableNames[te],shapeInfo:X}}),A=T.map(function(B){return B.shapeInfo}),L={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},P=M3e(T,L,E,k.packedInputs),O=N.createProgram(P),J=null,W=N.getUniformLocation(O,"NAN",!1);$t().getNumber("WEBGL_VERSION")===1&&(J=N.getUniformLocation(O,"INFINITY",!1));for(var re={},U=0;U<k.variableNames.length;U++){var Q=k.variableNames[U];re[Q]=N.getUniformLocation(O,Q,!1),re["offset"+Q]=N.getUniformLocation(O,"offset"+Q,!1)}return{program:k,source:P,webGLProgram:O,uniformLocations:re,inShapeInfos:A,outShapeInfo:L,infLoc:J,nanLoc:W}}(l.gpgpu,r,m,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(N,k,S,D,E){cB(k.inShapeInfos,S),cB([k.outShapeInfo],[D]);var T=D.texData.texture,A=D.texData.texShape;D.texData.isPacked?N.setOutputPackedMatrixTexture(T,A[0],A[1]):N.setOutputMatrixTexture(T,A[0],A[1]),N.setProgram(k.webGLProgram),$t().getNumber("WEBGL_VERSION")===1&&k.infLoc!==null&&N.gl.uniform1f(k.infLoc,1/0),k.nanLoc!==null&&N.gl.uniform1f(k.nanLoc,NaN),S.forEach(function(L,P){var O=k.program.variableNames[P],J=k.uniformLocations[O],W=k.uniformLocations["offset"+O];if(J!=null)if(L.isUniform)if(Mr(L.shape)<2)N.gl.uniform1f(J,L.uniformValues[0]);else{var re=L.uniformValues;re instanceof Float32Array||(re=new Float32Array(re)),N.gl.uniform1fv(J,re)}else L.texData.slice!=null&&W!=null&&N.gl.uniform1i(W,L.texData.slice.flatOffset),N.setInputMatrixTexture(L.texData.texture,J,P)}),E?.(N,k.webGLProgram),N.executeProgram()}(this.gpgpu,b,m,v,i),h.forEach(function(N){return l.disposeData(N.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:r.constructor.name,query:this.getQueryTime(p)})),!$t().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&o===!1){var C=this.unpackTensor(c);return this.disposeData(c.dataId),C}return c},t.prototype.compileAndRun=function(r,n,s,i,o){o===void 0&&(o=!1),s=s||n[0].dtype;var l=this.runWebGLProgram(r,n,s,i,o);return ut.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},t.prototype.getAndSaveBinary=function(r,n){return r in this.binaryCache||(this.binaryCache[r]=n()),this.binaryCache[r]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var r=this;this.disposed||($t().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(n){r.gpgpu.deleteProgram(r.binaryCache[n].webGLProgram),delete r.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var r=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=kr(function(){if(!$t().get("WEBGL_RENDER_FLOAT32_ENABLED")){var n=$t().getBool("DEBUG");$t().set("DEBUG",!1);var s=r.abs(yr(1e-8)).dataSync()[0];if($t().set("DEBUG",n),s>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.values,c=s.texture,d=s.usage,u=s.isPacked;if(c==null){var h,m=this.activeTimers!=null;m&&(h=ku());var p=s.texShape;if(p==null&&(p=TDe(i,u),s.texShape=p),l!=null){var v=TE(i),g=void 0,b=p[1],y=p[0],C=l instanceof Uint8Array;u?(b=(n=f1(p[0],p[1]))[0],y=n[1],g=new mAe(v,[y,b],C)):g=new fAe(v,[y,b],C);var N=this.makeTensorInfo([y,b],o);this.texData.get(N.dataId).usage=C?Yl.PIXELS:Yl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),b,y,l);var k=this.runWebGLProgram(g,[N],o,null,!0),S=this.texData.get(k.dataId);s.texture=S.texture,s.texShape=S.texShape,s.isPacked=S.isPacked,s.usage=S.usage,this.disposeData(N.dataId),this.texData.delete(k.dataId),s.values=null,m&&(this.uploadWaitMs+=ku()-h)}else{var D=this.acquireTexture(p,d,o,u);s.texture=D}}},t.prototype.convertAndCacheOnCPU=function(r,n){var s=this.texData.get(r),i=s.dtype;return this.releaseGPUData(r),n!=null&&(s.values=function(o,l){if(l==="float32"||l==="complex64")return o;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(o.length):new Uint8Array(o.length),d=0;d<c.length;++d)c[d]=Math.round(o[d]);return c}throw new Error("Unknown dtype "+l)}(n,i)),s.values},t.prototype.acquireTexture=function(r,n,s,i){if(this.numBytesInGPU+=this.computeBytes(r,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(r,n,i)},t.prototype.computeBytes=function(r,n){return r[0]*r[1]*KW(n)},t}(gG);rG()&&ut.registerBackend("webgl",function(){return new C4e},2);var k4e=et({square_:function(e){var t=Me(e,"x","square"),r=[t];return ut.runKernelFunc(function(n,s){return s([t]),n.square(t)},{x:t},null,"Square",{},r,[])}}),Ty="SquaredDifference",FG=et({squaredDifference_:function(e,t){var r,n=Me(e,"a","squaredDifference"),s=Me(t,"b","squaredDifference");r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape);var i={a:n,b:s},o=[n,s];return ut.runKernelFunc(function(l,c){var d=l.squaredDifference(n,s);return c([n,s]),d},i,function(l,c){var d=c[0],u=c[1],h=yr(2);return{a:function(){return l.mul(d.sub(u).mul(h))},b:function(){return l.mul(u.sub(d).mul(h))}}},Ty,{},o,[])}}),_4e=et({abs_:function(e){var t=Me(e,"x","abs");return t.dtype==="complex64"?ut.runKernelFunc(function(r){return r.complexAbs(t)},{$x:t}):ut.runKernelFunc(function(r,n){var s=r.abs(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.toFloat().step(-1))}}},"Abs")}}),E4e=et({acos_:function(e){var t=Me(e,"x","acos");return ut.runKernelFunc(function(r,n){var s=r.acos(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(yr(1).sub(s.toFloat().square()).sqrt()).neg()}}})}}),D4e=et({acosh_:function(e){var t=Me(e,"x","acosh");return ut.runKernelFunc(function(r,n){var s=r.acosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(s.toFloat().square().sub(1).sqrt())}}})}}),A4e=et({asin_:function(e){var t=Me(e,"x","asin");return ut.runKernelFunc(function(r,n){var s=r.asin(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(yr(1).sub(s.toFloat().square()).sqrt())}}})}}),T4e=et({asinh_:function(e){var t=Me(e,"x","asinh");return ut.runKernelFunc(function(r,n){var s=r.asinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(yr(1).add(s.toFloat().square()).sqrt())}}})}}),I4e=et({atan_:function(e){var t=Me(e,"x","atan");return ut.runKernelFunc(function(r,n){var s=r.atan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().square().add(1))}}})}}),P4e=et({atanh_:function(e){var t=Me(e,"x","atanh");return ut.runKernelFunc(function(r,n){var s=r.atanh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(yr(1).sub(s.toFloat().square()))}}})}}),O4e=et({ceil_:function(e){var t=Me(e,"x","ceil");return ut.runKernelFunc(function(r){return r.ceil(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),ET=et({clipByValue_:function(e,t,r){var n=Me(e,"x","clipByValue");ze(t<=r,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."});var s=[n],i={min:t,max:r};return ut.runKernelFunc(function(o,l){var c=o.clip(n,t,r);return l([n]),c},{x:n},function(o,l){var c=l[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(r)),qn(o))}}},"ClipByValue",i,s)}}),M4e=et({cos_:function(e){var t=Me(e,"x","cos"),r=[t];return ut.runKernelFunc(function(n,s){var i=n.cos(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().sin().neg().mul(n)}}},"Cos",{},r)}}),R4e=et({cosh_:function(e){var t=Me(e,"x","cosh");return ut.runKernelFunc(function(r,n){var s=r.cosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().sinh().mulStrict(r)}}})}}),F4e=et({erf_:function(e){var t=Me(e,"x","erf");return ze(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),ut.runKernelFunc(function(r,n){var s=r.erf(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),QD=et({exp_:function(e){var t=Me(e,"x","exp");return ut.runKernelFunc(function(r,n){var s=r.exp(t);return n([s]),s},{x:t},function(r,n){return{x:function(){return r.mulStrict(n[0])}}},"Exp",{},[],[!0])}}),L4e=et({expm1_:function(e){var t=Me(e,"x","expm1");return ut.runKernelFunc(function(r,n){var s=r.expm1(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.exp())}}})}}),B4e=et({floor_:function(e){var t=Me(e,"x","floor");return ut.runKernelFunc(function(r){return r.floor(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),U4e=et({log_:function(e){var t=Me(e,"x","log"),r=[t];return ut.runKernelFunc(function(n,s){var i=n.log(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.toFloat())}}},"Log",{},r)}}),$4e=et({log1p_:function(e){var t=Me(e,"x","log1p");return ut.runKernelFunc(function(r,n){var s=r.log1p(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.add(1))}}})}}),q4e=et({logSigmoid_:function(e){var t=Me(e,"x","logSigmoid");return ut.runKernelFunc(function(r,n){var s=r.softplus(t.neg()).neg();return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.neg().sigmoid())}}})}}),c2=et({neg_:function(e){var t=Me(e,"x","neg"),r=[t];return ut.runKernelFunc(function(n){return n.neg(t)},{x:t},function(n){return{x:function(){return n.neg()}}},"Neg",{},r)}}),V4e=et({reciprocal_:function(e){var t=Me(e,"x","reciprocal");return ut.runKernelFunc(function(r,n){var s=r.reciprocal(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.square().neg())}}})}}),z4e=et({round_:function(e){var t=Me(e,"x","round");return ut.runKernelFunc(function(r){return r.round(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),LG=et({rsqrt_:function(e){var t=Me(e,"x","rsqrt"),r=[t];return ut.runKernelFunc(function(n,s){var i=n.rsqrt(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},r)}}),BG=et({sigmoid_:function(e){var t=Me(e,"x","sigmoid");return ut.runKernelFunc(function(r,n){var s=r.sigmoid(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.mul(yr(1).sub(s)))}}},"Sigmoid")}}),H4e=et({sign_:function(e){var t=Me(e,"x","sign");return ut.runKernelFunc(function(r){return r.sign(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),W4e=et({isNaN_:function(e){var t=Me(e,"x","isNaN");return ut.runKernelFunc(function(r){return r.isNaN(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),G4e=et({isInf_:function(e){var t=Me(e,"x","isInf");return ut.runKernelFunc(function(r){return r.isInf(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),Y4e=et({isFinite_:function(e){var t=Me(e,"x","isFinite");return ut.runKernelFunc(function(r){return r.isFinite(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),K4e=et({sin_:function(e){var t=Me(e,"x","sin"),r=[t];return ut.runKernelFunc(function(n,s){var i=n.sin(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().cos().mul(n)}}},"Sin",{},r)}}),X4e=et({sinh_:function(e){var t=Me(e,"x","sinh");return ut.runKernelFunc(function(r,n){var s=r.sinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().cosh().mulStrict(r)}}})}}),Q4e=et({softplus_:function(e){var t=Me(e,"x","softplus");return ut.runKernelFunc(function(r,n){var s=r.softplus(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.sigmoid())}}})}}),J4e=et({sqrt_:function(e){var t=Me(e,"x","sqrt");return ut.runKernelFunc(function(r,n){var s=r.sqrt(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().sqrt().mul(2))}}})}}),Z4e=et({step_:function(e,t){t===void 0&&(t=0);var r=Me(e,"x","step");return ut.runKernelFunc(function(n){return n.step(r,t)},{$x:r},function(n){return{$x:function(){return qn(n)}}})}}),eTe=et({tan_:function(e){var t=Me(e,"x","tan");return ut.runKernelFunc(function(r,n){var s=r.tan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.cos().square())}}})}}),tTe=et({tanh_:function(e){var t=Me(e,"x","tanh");return ut.runKernelFunc(function(r,n){var s=r.tanh(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return yr(1).sub(s.square()).mulStrict(r)}}},"Tanh",{},null,[!0])}});function UG(e,t,r,n,s,i){var o,l,c=Me(e,"x","batchNorm"),d=Me(t,"mean","batchNorm"),u=Me(r,"variance","batchNorm");return s!=null&&(o=Me(s,"scale","batchNorm")),n!=null&&(l=Me(n,"offset","batchNorm")),ze(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),ze(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."}),ze(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&ze(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),l!=null&&ze(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function $G(e,t,r,n,s,i){var o,l,c=Me(e,"x","batchNorm"),d=Me(t,"mean","batchNorm"),u=Me(r,"variance","batchNorm");return s!=null&&(o=Me(s,"scale","batchNorm")),n!=null&&(l=Me(n,"offset","batchNorm")),ze(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),ze(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."}),ze(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&ze(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),l!=null&&ze(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function qG(e,t,r,n,s,i){var o,l,c=Me(e,"x","batchNorm"),d=Me(t,"mean","batchNorm"),u=Me(r,"variance","batchNorm");return s!=null&&(o=Me(s,"scale","batchNorm")),n!=null&&(l=Me(n,"offset","batchNorm")),ze(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),ze(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."}),ze(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&ze(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),l!=null&&ze(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function p1(e,t,r,n,s,i){i==null&&(i=.001);var o,l,c,d=Me(e,"x","batchNorm"),u=Me(t,"mean","batchNorm"),h=Me(r,"variance","batchNorm");s!=null&&(o=Me(s,"scale","batchNorm")),n!=null&&(l=Me(n,"offset","batchNorm")),ze(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ze(l==null||u.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ze(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var m=[d,u,h,o];return ut.runKernelFunc(function(p,v){var g=p.batchNormalization(c,sN(u),sN(h),i,sN(o),sN(l));return v([d,u,h,o]),g},{x:d,mean:u,variance:h,scale:o,offset:l},function(p,v){var g=v,b=g[0],y=g[1],C=g[2],N=g[3],k=N??yr(1),S=fi(y.shape,c.shape),D=[];if(y.rank===1){for(var E=0;E<c.shape.length-1;++E)D.push(c.shape[E]);D.push(1)}var T=b.sub(y),A=p.mul(k),L=LG(C.add(yr(i))),P=L.mul(L).mul(L).mul(yr(-.5));return{x:function(){return y.rank===1?p.mul(uv(L.as4D(1,1,1,y.shape[0]),D)).mul(k).reshape(b.shape):p.mul(L).mul(k).reshape(b.shape)},mean:function(){var O=L.mul(yr(-1)).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},variance:function(){var O=P.mul(T).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},scale:function(){var O=T.mul(L),J=p.mul(O);return y.rank===1&&(J=J.sum(S)),J.reshape(y.shape)},offset:function(){var O=p;return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(d.shape)}function sN(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function RS(){nG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var rTe=et({batchNormalization2d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),UG(e,t,r,i,s,n)}}),nTe=et({batchNormalization3d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),$G(e,t,r,i,s,n)}}),aTe=et({batchNormalization4d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),qG(e,t,r,i,s,n)}}),sTe=et({batchNormalization_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),p1(e,t,r,i,s,n)}}),VG=et({batchNorm_:p1}),iTe=et({batchNorm2d_:UG}),oTe=et({batchNorm3d_:$G}),lTe=et({batchNorm4d_:qG}),FS=et({logicalAnd_:function(e,t){var r=Me(e,"a","logicalAnd","bool"),n=Me(t,"b","logicalAnd","bool");return Rn(r.shape,n.shape),ut.runKernelFunc(function(s){return s.logicalAnd(r,n)},{a:r,b:n},null,"LogicalAnd")}}),cTe=et({logicalNot_:function(e){var t=Me(e,"x","logicalNot","bool");return ut.runKernelFunc(function(r){return r.logicalNot(t)},{$x:t})}}),zG=et({logicalOr_:function(e,t){var r=Me(e,"a","logicalOr","bool"),n=Me(t,"b","logicalOr","bool");return Rn(r.shape,n.shape),ut.runKernelFunc(function(s){return s.logicalOr(r,n)},{$a:r,$b:n})}}),dTe=et({logicalXor_:function(e,t){var r=Me(e,"a","logicalXor","bool"),n=Me(t,"b","logicalXor","bool");return Rn(r.shape,n.shape),zG(e,t).logicalAnd(FS(e,t).logicalNot())}}),Dx=et({where_:function(e,t,r){var n=Me(t,"a","where"),s=Me(r,"b","where"),i=Me(e,"condition","where","bool");return ua(n.shape,s.shape,"Error in where: "),i.rank===1?ze(i.shape[0]===n.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ua(i.shape,s.shape,"Error in where: "),ut.runKernelFunc(function(o,l){var c=o.select(i,n,s);return l([i]),c},{$condition:i,$a:n,$b:s},function(o,l){var c=l[0];return{$condition:function(){return qn(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),HG=function(e){return Ir(this,void 0,void 0,function(){var t,r,n;return Pr(this,function(s){switch(s.label){case 0:return[4,(t=Me(e,"condition","whereAsync","bool")).data()];case 1:return r=s.sent(),n=ST(t.shape,r),e!==t&&t.dispose(),[2,n]}})})},In=et({add_:function(e,t){var r,n=Me(e,"a","add"),s=Me(t,"b","add");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o){return o.add(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=fi(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=fi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Add")}}),uTe=et({addN_:function(e){ze(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ze(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(s,i){return Me(s,"tensors"+i,"addN")}),r=t[0];t.forEach(function(s){if(s.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(s){if(!Ei(s.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=t;return ut.runKernelFunc(function(s){return s.addN(t)},n,function(s){var i={};return t.forEach(function(o,l){i[l]=function(){return s.clone()}}),i},"AddN")}}),hTe=et({addStrict_:function(e,t){var r=Me(e,"a","addStrict"),n=Me(t,"b","addStrict");return ua(r.shape,n.shape,"Error in addStrict: "),r.add(n)}}),fTe=et({atan2_:function(e,t){var r,n=Me(e,"a","atan2"),s=Me(t,"b","atan2");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o,l){var c=o.atan2(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=In(c.square(),d.square()),h=o.mul(d.div(u)),m=fi(c.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(c.shape)},$b:function(){var u=In(c.square(),d.square()),h=c2(o.mul(c.div(u))),m=fi(d.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(d.shape)}}})}}),Cd=et({div_:function(e,t){var r,n=Me(e,"a","div"),s=Me(t,"b","div");if(r=hs(n,s),n=r[0],s=r[1],n.dtype==="int32"&&s.dtype==="int32")return WG(n,s);var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o,l){var c=o.realDivide(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"Div")}}),mTe=et({divNoNan_:function(e,t){var r,n=Me(e,"a","div"),s=Me(t,"b","div");n=(r=hs(n,s))[0],s=r[1];var i=Cd(n,s),o=qn(i),l=s.equal(o);return Dx(l,o,i)}}),pTe=et({divStrict_:function(e,t){var r=Me(e,"a","div"),n=Me(t,"b","div");return ua(r.shape,n.shape,"Error in divideStrict: "),r.div(n)}}),WG=et({floorDiv_:function(e,t){var r,n=Me(e,"a","floorDiv"),s=Me(t,"b","floorDiv");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o,l){var c=o.floorDiv(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"FloorDiv")}}),DT=et({maximum_:function(e,t){var r,n=Me(e,"a","maximum"),s=Me(t,"b","maximum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Rn(n.shape,s.shape),ut.runKernelFunc(function(i,o){var l=i.maximum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),xTe=et({maximumStrict_:function(e,t){var r=Me(e,"a","maximumStrict"),n=Me(t,"b","maximumStrict");return ua(r.shape,n.shape,"Error in maximumStrict: "),r.maximum(n)}}),GG=et({minimum_:function(e,t){var r,n=Me(e,"a","minimum"),s=Me(t,"b","minimum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Rn(n.shape,s.shape),ut.runKernelFunc(function(i,o){var l=i.minimum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),vTe=et({minimumStrict_:function(e,t){var r=Me(e,"a","minimumStrict"),n=Me(t,"b","minimumStrict");return ua(r.shape,n.shape,"Error in minimumStrict: "),r.minimum(n)}}),gTe=et({mod_:function(e,t){var r,n=Me(e,"a","mod"),s=Me(t,"b","mod");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o,l){var c=o.mod(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=fi(c.shape,i);return u.length>0?o.sum(u).reshape(c.shape):o},$b:function(){var u=o.mul(c.div(d).floor().neg()),h=fi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}})}}),bTe=et({modStrict_:function(e,t){var r=Me(e,"a","modStrict"),n=Me(t,"b","modStrict");return ua(r.shape,n.shape,"Error in modStrict: "),r.mod(n)}}),_o=et({mul_:function(e,t){var r,n=Me(e,"a","mul"),s=Me(t,"b","mul");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o,l){var c=o.multiply(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.mul(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}},"Mul")}}),yTe=et({mulStrict_:function(e,t){var r=Me(e,"a","mul"),n=Me(t,"b","mul");return ua(r.shape,n.shape,"Error in multiplyStrict: "),r.mul(n)}}),d2=et({pow_:function(e,t){var r,n=Me(e,"base","pow"),s=Me(t,"exp","pow");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape),o=[n,s];return ut.runKernelFunc(function(l,c){var d=l.pow(n,s);return c([n,s,d]),d},{a:n,b:s},function(l,c){var d=c[0],u=c[1],h=c[2];return{a:function(){var m=u.toFloat(),p=l.mul(m.mul(d.pow(m.sub(yr(1))))),v=fi(d.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(d.shape)},b:function(){var m=d.greater(0),p=d.log().where(m,qn(d)),v=l.mul(h.mul(p)),g=fi(u.shape,i);return g.length>0&&(v=v.sum(g)),v.reshape(u.shape)}}},"Pow",{},o,[!0])}}),jTe=et({powStrict_:function(e,t){return ua(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),NTe=et({squaredDifferenceStrict_:function(e,t){var r=Me(e,"a","squaredDifferenceStrict"),n=Me(t,"b","squaredDifferenceStrict");return ua(r.shape,n.shape,"Error in squaredDifferenceStrict: "),r.squaredDifference(n)}}),mi=et({sub_:function(e,t){var r,n=Me(e,"a","sub"),s=Me(t,"b","sub");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return ut.runKernelFunc(function(o){return o.subtract(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=fi(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=fi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(s.shape)}}},"Sub")}}),wTe=et({subStrict_:function(e,t){var r=Me(e,"a","subStrict"),n=Me(t,"b","subStrict");return ua(r.shape,n.shape,"Error in subStrict: "),r.sub(n)}}),YG=et({equal_:function(e,t){var r,n=Me(e,"a","equal"),s=Me(t,"b","equal");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i){return i.equal(n,s)},{$a:n,$b:s})}}),STe=et({equalStrict_:function(e,t){var r=Me(e,"a","equalStrict"),n=Me(t,"b","equalStrict");return ua(r.shape,n.shape,"Error in equalStrict: "),r.equal(n)}}),CTe=et({greater_:function(e,t){var r,n=Me(e,"a","greater"),s=Me(t,"b","greater");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i){return i.greater(n,s)},{a:n,b:s},null,"Greater")}}),KG=et({greaterEqual_:function(e,t){var r,n=Me(e,"a","greaterEqual"),s=Me(t,"b","greaterEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i,o){var l=i.greaterEqual(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return qn(l)},b:function(){return qn(c)}}},"GreaterEqual")}}),kTe=et({greaterEqualStrict_:function(e,t){var r=Me(e,"a","greaterEqualStrict"),n=Me(t,"b","greaterEqualStrict");return ua(r.shape,n.shape,"Error in greaterEqualStrict: "),r.greaterEqual(n)}}),_Te=et({greaterStrict_:function(e,t){var r=Me(e,"a","greaterStrict"),n=Me(t,"b","greaterStrict");return ua(r.shape,n.shape,"Error in greaterStrict: "),r.greater(n)}}),ETe=et({less_:function(e,t){var r,n=Me(e,"a","less"),s=Me(t,"b","less");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i){return i.less(n,s)},{a:n,b:s},null,"Less")}}),DTe=et({lessEqual_:function(e,t){var r,n=Me(e,"a","lessEqual"),s=Me(t,"b","lessEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i,o){var l=i.lessEqual(n,s);return o([n,s]),l},{a:n,b:s},null,"LessEqual")}}),ATe=et({lessEqualStrict_:function(e,t){var r=Me(e,"a","lessEqualStrict"),n=Me(t,"b","lessEqualStrict");return ua(r.shape,n.shape,"Error in lessEqualStrict: "),r.lessEqual(n)}}),TTe=et({lessStrict_:function(e,t){var r=Me(e,"a","lessStrict"),n=Me(t,"b","lessStrict");return ua(r.shape,n.shape,"Error in lessStrict: "),r.less(n)}}),ITe=et({notEqual_:function(e,t){var r,n=Me(e,"a","notEqual"),s=Me(t,"b","notEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),ut.runKernelFunc(function(i){return i.notEqual(n,s)},{a:n,b:s},null,"NotEqual")}}),PTe=et({notEqualStrict_:function(e,t){var r=Me(e,"a","notEqualStrict"),n=Me(t,"b","notEqualStrict");return ua(r.shape,n.shape,"Error in notEqualStrict: "),r.notEqual(n)}});function bB(e,t){for(var r=[],n=e;n<t;++n)r.push(n);return r}function yB(e){for(var t=[],r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t.push(e[r][n]);return t}var AT=et({gather_:function(e,t,r){r===void 0&&(r=0);var n=Me(e,"x","gather"),s=Me(t,"indices","gather","int32");r=xi(r,n.shape)[0];var i=function(o,l,c){for(var d=o.shape[c],u=[],h=1,m=1,p=0;p<c;p++)u.push(o.shape[p]),h*=o.shape[p];for(p=0;p<l.rank;p++)u.push(l.shape[p]);for(p=c+1;p<o.rank;p++)u.push(o.shape[p]),m*=o.shape[p];return{batchSize:h,sliceSize:m,dimSize:d,outputShape:u}}(n,s,r);return ut.runKernelFunc(function(o,l){var c=o.gather(n,s.flatten(),r);return l([s]),c},{x:n,indices:s},function(o,l){var c=l[0];return{x:function(){var d=n.shape,u=c.size,h=d.slice(0,r),m=h.length,p=d.slice(r,d.length).slice(1),v=p.length,g=bB(0,m),b=bB(m+1,m+1+v),y=yB([h,[u],p]),C=o.reshape(y),N=c.reshape([u]),k=yB([[m],g,b]),S=C.transpose(k),D=XG(S,N,n.shape[r]),E=xT(k);return D=D.transpose(E)},indices:function(){return c}}},"Gather",{axis:r}).reshape(i.outputShape)}}),XG=et({unsortedSegmentSum_:function(e,t,r){var n=Me(e,"x","unsortedSegmentSum"),s=Me(t,"segmentIds","unsortedSegmentSum","int32");return ze(qs(r),function(){return"numSegments must be of dtype int"}),ut.runKernelFunc(function(i,o){var l=i.unsortedSegmentSum(n,s,r);return o([s]),l},{$x:n},function(i,o){var l=o[0];return{$x:function(){return function(c,d){for(var u=DT(d,qn(d)),h=AT(c,u),m=KG(d,yr(0,"int32")),p=h.rank-m.rank,v=0;v<p;++v)m=Lc(m,v+1);m=FS(m,hg(h.shape,"bool"));var g=qn(h);return Dx(m,h,g)}(i,l)}}})}}),OTe=function(e,t,r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g;return Pr(this,function(b){switch(b.label){case 0:for(n=Me(e,"tensor","boolMask"),s=Me(t,"mask","boolMask","bool"),i=r??0,o=s.rank,l=n.shape,ze(o>0,function(){return"mask cannot be scalar"}),ua(l.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=i;d<i+o;d++)c*=l[d];return u=l.slice(0,i).concat([c],l.slice(i+o)),h=n.reshape(u),m=s.reshape([-1]),[4,HG(m)];case 1:return p=b.sent(),v=p.squeeze([1]),g=AT(h,v,i),e!==n&&n.dispose(),t!==s&&s.dispose(),v.dispose(),h.dispose(),m.dispose(),p.dispose(),[2,g]}})})};function QG(e,t,r,n,s,i,o){i===void 0&&(i="NHWC"),ze(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var l=e,c=t,d=!1;t.rank===3&&(d=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=[1,e[0],e[1],e[2]]),ze(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),ze(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),ze(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank});var u=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];ze(u===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+r.shape[2]+"."}),ze(h===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+r.shape[3]+"."}),o!=null&&ze(qs(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var m=jT(i),p=Wx(l,r.shape,n,1,s,o,!1,m),v=ut.runKernelFunc(function(g,b){var y=g.conv2dDerInput(c,r,p);return b([r,c]),y},{dy4D:c,filter:r},function(g,b){var y=b[0],C=b[1];return{dy4D:function(){return Zc(g,y,n,s,i,1,o)},filter:function(){return TT(g,C,y.shape,n,s,i,o)}}});return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function BE(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function JG(e,t,r,n,s){ze(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,l=!1;t.rank===4&&(l=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],d=o.shape[4];ze(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),ze(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),ze(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+r.rank}),ze(c===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+r.shape[3]+"."}),ze(d===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+r.shape[4]+"."});var u=o2(i,r.shape,n,1,s),h=ut.runKernelFunc(function(m){return m.conv3dDerInput(o,r,u)},{dy5D:o});return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var MTe=et({conv1d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NWC"),i===void 0&&(i=1);var l=Me(e,"x","conv1d"),c=Me(t,"filter","conv1d"),d=l,u=!1;l.rank===2&&(u=!0,d=l.as3D(1,l.shape[0],l.shape[1])),ze(d.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."}),ze(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&ze(qs(n),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."}),ze(d.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),ze(vl(r,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+i+"'"}),ze(s==="NWC",function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),p=Zc(m,h,[1,r],n,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Zc=et({conv2d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]);var l=Me(e,"x","conv2d"),c=Me(t,"filter","conv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),ze(d.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."}),ze(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&ze(qs(n),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=s==="NHWC"?d.shape[3]:d.shape[1];ze(h===c.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."}),ze(vl(r,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var m=jT(s),p=Wx(d.shape,c.shape,r,i,n,o,!1,m),v=[c,d],g=ut.runKernelFunc(function(b,y){var C=b.conv2d(d,c,p);return y([c,d]),C},{x:d,filter:c},function(b,y){var C=y,N=C[0],k=C[1];return ze(Uv(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return ZG(k.shape,b,N,r,n,s)},filter:function(){return TT(k,b,N.shape,r,n,s)}}},"Conv2D",p,v);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),RTe=et({conv3d_:function(e,t,r,n,s,i){s===void 0&&(s="NDHWC"),i===void 0&&(i=[1,1,1]);var o=Me(e,"x","conv3d"),l=Me(t,"filter","conv3d"),c=o,d=!1;o.rank===4&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),ze(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),ze(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),ze(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),ze(function(m,p){return BE(m)||BE(p)}(r,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),ze(s==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var u=o2(c.shape,l.shape,r,i,n),h=ut.runKernelFunc(function(m,p){var v=m.conv3d(c,l,u);return p([c,l]),v},{x:c,$filter:l},function(m,p){ze(BE(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],g=p[1];return{x:function(){return JG(v.shape,m,g,r,n)},$filter:function(){return function(b,y,C,N,k){var S=b;b.rank===4&&(S=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=y;D.rank===4&&(D=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),ze(S.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+S.shape+"."}),ze(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),ze(C.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+C+"."}),ze(S.shape[4]===C[3],function(){return"Error in conv3dDerFilter: depth of input "+S.shape[4]+") must match input depth in filter ("+C[3]+"."}),ze(D.shape[4]===C[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+C[4]+")."});var E=o2(S.shape,C,N,1,k);return ut.runKernelFunc(function(T){return T.conv3dDerFilter(S,D,E)},{x5D:S,dy5D:D})}(v,m,g.shape,r,n)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),TT=et({conv2dDerFilter_:function(e,t,r,n,s,i,o){i===void 0&&(i="NHWC");var l=e;e.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ze(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),ze(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),ze(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1],u=i==="NHWC"?c.shape[3]:c.shape[1];ze(d===r[2],function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+r[2]+"."}),ze(u===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+r[3]+")."}),o!=null&&ze(qs(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var h=jT(i),m=Wx(l.shape,r,n,1,s,o,!1,h);return ut.runKernelFunc(function(p){return p.conv2dDerFilter(l,c,m)},{x4D:l,dy4D:c})}}),ZG=et({conv2dDerInput_:QG}),LS=et({depthwiseConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]);var l=Me(e,"x","depthwiseConv2d"),c=Me(t,"filter","depthwiseConv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),ze(d.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."}),ze(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),ze(d.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),ze(vl(r,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),o!=null&&ze(qs(n),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=Wx(d.shape,c.shape,r,i,n,o,!0),m=[d,c],p=ut.runKernelFunc(function(v,g){var b=v.depthwiseConv2D(d,c,h);return g([d,c]),b},{x:d,filter:c},function(v,g){ze(Uv(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=g[0],y=g[1];return{x:function(){return eY(b.shape,v,y,h)},filter:function(){return tY(b,v,y.shape,h)}}},"DepthwiseConv2dNative",h,m);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),eY=et({depthwiseConv2dDerInput_:function(e,t,r,n){var s=t,i=!1;t.rank===3&&(i=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=ut.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(s,r,n)},{dy4D:s});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),tY=et({depthwiseConv2dDerFilter_:function(e,t,r,n){var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ut.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(s,i,n)},{x4D:s,dy4D:i})}}),IT=et({separableConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var l=Me(e,"x","separableConv2d"),c=Me(t,"depthwiseFilter","separableConv2d"),d=Me(r,"pointwiseFilter","separableConv2d"),u=l,h=!1;if(l.rank===3&&(h=!0,u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ze(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),ze(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),ze(d.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),ze(d.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."}),ze(d.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."});var m=c.shape[2],p=c.shape[3];ze(d.shape[2]===m*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*p+", but got "+d.shape[2]+"."});var v=LS(u,c,n,s,o,i),g=Zc(v,d,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),FTe=et({conv2dTranspose_:function(e,t,r,n,s,i){return QG(r,Me(e,"x","conv2dTranspose"),Me(t,"filter","conv2dTranspose"),n,s,"NHWC",i)}}),LTe=et({conv3dTranspose_:function(e,t,r,n,s){return JG(r,Me(e,"x","conv3dTranspose"),Me(t,"filter","conv3dTranspose"),n,s)}}),BS=et({matMul_:function(e,t,r,n){var s;r===void 0&&(r=!1),n===void 0&&(n=!1);var i=Me(e,"a","matMul"),o=Me(t,"b","matMul");s=hs(i,o),i=s[0],o=s[1];var l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=n?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),m=o.shape.slice(0,-2),p=Mr(h),v=Mr(m);ze(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),ze(Ei(h,m),function(){return"Error in matMul: outer dimensions ("+h+") and ("+m+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),ze(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+r+" and transposeB="+n+" must match."});var g=i.shape.slice(0,-2).concat([d,u]),b=r?i.as3D(p,l,d):i.as3D(p,d,l),y=n?o.as3D(v,u,c):o.as3D(v,c,u),C={transposeA:r,transposeB:n};return ut.runKernelFunc(function(N,k){var S=N.batchMatMul(b,y,r,n);return k([b,y]),S},{a:b,b:y},function(N,k){var S=k,D=S[0],E=S[1];return r||n?!r&&n?{a:function(){return N.matMul(E,!1,!1)},b:function(){return N.matMul(D,!0,!1)}}:r&&!n?{a:function(){return E.matMul(N,!1,!0)},b:function(){return D.matMul(N,!1,!1)}}:{a:function(){return E.matMul(N,!0,!0)},b:function(){return N.matMul(D,!0,!0)}}:{a:function(){return N.matMul(E,!1,!0)},b:function(){return D.matMul(N,!0,!1)}}},"BatchMatMul",C).reshape(g)}}),BTe=et({dot_:function(e,t){var r=Me(e,"t1","dot"),n=Me(t,"t2","dot");ze(!(r.rank!==1&&r.rank!==2||n.rank!==1&&n.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+r.rank+" and "+n.rank+"."});var s=r.rank===1?r.size:r.shape[1],i=n.rank===1?n.size:n.shape[0];return ze(s===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+i+"."}),r.rank===1&&n.rank===1?r.as2D(1,-1).matMul(n.as2D(-1,1)).asScalar():r.rank===1&&n.rank===2?r.as2D(1,-1).matMul(n.as2D(n.shape[0],n.shape[1])).as1D():r.rank===2&&n.rank===1?r.matMul(n.as2D(-1,1)).as1D():r.matMul(n.as2D(n.shape[0],n.shape[1]))}}),UTe=et({outerProduct_:function(e,t){var r=Me(e,"v1","outerProduct"),n=Me(t,"v2","outerProduct");return ze(r.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+r.rank+" and "+n.rank+"."}),r.as2D(-1,1).matMul(n.as2D(1,-1))}}),x1=et({reverse_:function(e,t){var r=Me(e,"x","reverse");if(r.rank===0)return r.clone();var n=xi(t,r.shape);return ut.runKernelFunc(function(s){return s.reverse(r,n)},{$x:r},function(s){return{$x:function(){return s.reverse(n)}}}).reshapeAs(r)}}),$Te=et({reverse1d_:function(e){var t=Me(e,"x","reverse");return ze(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),x1(t,0)}}),qTe=et({reverse2d_:function(e,t){var r=Me(e,"x","reverse");return ze(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),x1(r,t)}}),VTe=et({reverse3d_:function(e,t){var r=Me(e,"x","reverse");return ze(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),x1(r,t)}}),zTe=et({reverse4d_:function(e,t){var r=Me(e,"x","reverse");return ze(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),x1(r,t)}});function rY(e,t,r,n,s,i){var o=Me(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ze(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),ze(vl(r,n),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"}),i!=null&&ze(qs(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ei(d.inShape,d.outShape))return o.clone();var u=[l],h=ut.runKernelFunc(function(m,p){var v=m.maxPool(l,d);return p([l,v]),v},{x:l},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,N,k,S,D,E){var T=Me(b,"dy","maxPoolBackprop"),A=Me(y,"input","maxPoolBackprop"),L=Me(C,"output","maxPoolBackprop");ze(A.rank===T.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+T.rank+")"}),ze(vl(k,S),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),ze(T.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),ze(A.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var P=Ay(A.shape,N,k,S,D,E);return ut.runKernelFunc(function(O){return O.maxPoolBackprop(T,A,L,P)},{$dy:T,$input:A})}(m,v,g,t,r,n,s)}}},"MaxPool",d,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function nY(e,t,r,n,s,i){var o=Me(e,"x","avgPool","float32");ze(vl(r,n),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"});var l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ze(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&ze(qs(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ei(d.inShape,d.outShape))return o.clone();var u=ut.runKernelFunc(function(h){return h.avgPool(l,d)},{x:l},function(h){return{x:function(){return function(m,p,v,g,b,y){var C=Me(m,"dy","avgPoolBackprop"),N=Me(p,"input","avgPoolBackprop");ze(N.rank===C.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+C.rank+")"}),ze(vl(g,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+b+"'"});var k=N,S=C,D=!1;N.rank===3&&(D=!0,k=N.as4D(1,N.shape[0],N.shape[1],N.shape[2]),S=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),ze(S.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),ze(k.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var E=Ay(k.shape,v,g,b,y),T=ut.runKernelFunc(function(A){return A.avgPoolBackprop(S,k,E)},{dy4D:S,input4D:k});return D?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}(h,l,t,r,n,s)}}},"AvgPool",d);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Ni=et({maxPool_:function(e,t,r,n,s){return rY(e,t,r,1,n,s)}}),v1=et({avgPool_:function(e,t,r,n,s){return nY(e,t,r,1,n,s)}}),HTe=et({pool_:function(e,t,r,n,s,i){s==null&&(s=[1,1]),i==null&&(i=1),n===0&&(n="valid");var o=Me(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ze(vl(i,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"});var d,u=Ay(l.shape,t,i,s,n),h=[u.dilationHeight,u.dilationWidth];d=n==="same"?function(k,S){var D=k.map(function(A,L){return A+(A-1)*(S[L]-1)}).map(function(A){return A-1}),E=D.map(function(A){return Math.floor(A/2)}),T=D.map(function(A,L){return A-E[L]});return D.map(function(A,L){return[E[L],T[L]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var m=h[0]===1&&h[1]===1,p=function(k,S,D){var E=D.map(function(W){return W[0]}),T=D.map(function(W){return W[1]}),A=k.concat(E,T),L=S.map(function(W,re){return(W-A[re]%W)%W}),P=T.map(function(W,re){return W+L[re]}),O=S.map(function(W,re){return[E[re],P[re]]}),J=S.map(function(W,re){return[0,L[re]]});return[O,J]}([u.inHeight,u.inWidth],h,d),v=p[0],g=p[1],b=m?n:"valid",y=m?l:cG(l,h,v),C=(r==="avg"?function(){return nY(y,t,i,1,b)}:function(){return rY(y,t,i,1,b)})(),N=m?C:iG(C,h,g);return c?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),WTe=et({maxPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Me(e,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),ze(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),ze(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ze(vl(r,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&ze(qs(n),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=i2(c.shape,t,r,o,n,s,i),h=ut.runKernelFunc(function(m,p){var v=m.maxPool3d(c,u);return p([c,v]),v},{x:c},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,N,k,S,D,E){var T=Me(b,"dy","maxPool3dBackprop"),A=Me(y,"input","maxPool3dBackprop"),L=Me(C,"output","maxPool3dBackprop"),P=T,O=A,J=L,W=!1;A.rank===4&&(W=!0,P=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),O=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),J=L.as5D(1,L.shape[0],L.shape[1],L.shape[2],L.shape[3])),ze(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),ze(O.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),ze(J.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+J.rank+"."}),S==null&&(S=[1,1,1]),ze(vl(k,S),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),E!=null&&ze(qs(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+D+"."});var re=i2(O.shape,N,k,S,D,E),U=ut.runKernelFunc(function(Q){return Q.maxPool3dBackprop(P,O,J,re)},{dy5D:P,input5D:O});return W?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U}(m,v,g,t,r,o,n,s)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),GTe=et({avgPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Me(e,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),ze(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),ze(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),ze(vl(r,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&ze(qs(n),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=i2(c.shape,t,r,o,n,s,i),h=ut.runKernelFunc(function(m){return m.avgPool3d(c,u)},{x:c},function(m){return{x:function(){return function(p,v,g,b,y,C,N){var k=Me(p,"dy","avgPool3dBackprop"),S=Me(v,"input","avgPool3dBackprop"),D=k,E=S,T=!1;S.rank===4&&(T=!0,D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),E=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),ze(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),ze(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),ze(vl(b,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+y+"'"}),N!=null&&ze(qs(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+C+"."});var A=i2(E.shape,g,b,y,C,N),L=ut.runKernelFunc(function(P){return P.avgPool3dBackprop(D,E,A)},{dy5D:D,input5D:E});return T?L.as4D(L.shape[1],L.shape[2],L.shape[3],L.shape[4]):L}(m,c,t,r,o,n,s)}}});return h=h.cast(c.dtype),d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Gu=et({slice_:function(e,t,r){var n,s,i=Me(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(n=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(c){ze(c!==-1,function(){return"slice() does not support negative begin indexing."})}),s=(s=r==null?new Array(i.rank).fill(-1):typeof r=="number"?[r].concat(new Array(i.rank-1).fill(-1)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(-1)):r).map(function(c,d){return c>=0?c:(ze(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."}),i.shape[d]-n[d])}),j3e(i,n,s);var o=i.shape,l={begin:n,size:s};return ut.runKernelFunc(function(c){return c.slice(i,n,s)},{x:i},function(c){for(var d=[],u=0;u<c.rank;u++)d.push([n[u],o[u]-n[u]-s[u]]);return{x:function(){return c.pad(d)}}},"Slice",l)}}),YTe=et({slice1d_:function(e,t,r){var n=Me(e,"x","slice1d");return ze(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,[t],[r])}}),KTe=et({slice2d_:function(e,t,r){var n=Me(e,"x","slice2d");return ze(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}}),aY=et({slice3d_:function(e,t,r){var n=Me(e,"x","slice3d");return ze(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}}),XTe=et({slice4d_:function(e,t,r){var n=Me(e,"x","slice4d");return ze(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}});function sY(e,t,r,n,s){return t.rank<r.rank&&(t=t.reshape(xl(t.shape,n))),e.rank<r.rank&&(e=e.reshape(xl(e.shape,n))),{x:function(){var i=e.mul(r.equal(t).cast(e.dtype));return s==null?i:i.transpose(s)}}}var QTe=et({all_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","all","bool"),s=xi(t,n.shape),i=s,o=rh(i,n.rank);o!=null&&(n=n.transpose(o),i=nh(i.length,n.rank));var l=ut.runKernelFunc(function(d){return d.all(n,i)},{$x:n});if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),JTe=et({any_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","any","bool"),s=xi(t,n.shape),i=s,o=rh(i,n.rank);o!=null&&(n=n.transpose(o),i=nh(i.length,n.rank));var l=ut.runKernelFunc(function(d){return d.any(n,i)},{$x:n});if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),ZTe=et({argMax_:function(e,t){t===void 0&&(t=0);var r=Me(e,"x","argMax");t==null&&(t=0);var n=xi(t,r.shape),s=rh(n,r.rank);s!=null&&(r=r.transpose(s),n=nh(n.length,r.rank));var i={axis:n[0]},o=[r];return ut.runKernelFunc(function(l,c){var d=l.argMax(r,n[0]);return c([r]),d},{x:r},function(l,c){var d=c[0];return{x:function(){return qn(d)}}},"ArgMax",i,o)}}),eIe=et({argMin_:function(e,t){t===void 0&&(t=0);var r=Me(e,"x","argMin");t==null&&(t=0);var n=xi(t,r.shape),s=rh(n,r.rank);return s!=null&&(r=r.transpose(s),n=nh(n.length,r.rank)),ut.runKernelFunc(function(i,o){var l=i.argMin(r,n[0]);return o([r]),l},{$x:r},function(i,o){var l=o[0];return{$x:function(){return qn(l)}}})}}),tIe=et({logSumExp_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","logSumExp"),s=xi(t,n.shape),i=n.max(s,!0),o=n.sub(i).exp().sum(s).log(),l=i.reshape(o.shape).add(o);if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),US=et({max_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","max"),s=n,i=xi(t,n.shape),o=i,l=rh(o,n.rank);l!=null&&(n=n.transpose(l),o=nh(o.length,n.rank));var c=[n],d=ut.runKernelFunc(function(h,m){var p=h.max(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Max",{axes:o},c,[!0]);if(r){var u=xl(d.shape,i);d=d.reshape(u)}return d}}),rIe=et({mean_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","mean"),s=xi(t,n.shape),i=Mr(xo(n.shape,s)[1]);return MS(function(o){var l=yr(i);return{value:(l.dtype===o.dtype?o:o.cast(l.dtype)).div(l).sum(t,r),gradFunc:function(c){var d=o.shape.slice();return s.forEach(function(u){d[u]=1}),c.reshape(d).mul(hg(o.shape,"float32")).div(i)}}})(n)}}),nIe=et({min_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","min"),s=n,i=xi(t,n.shape),o=i,l=rh(o,n.rank);l!=null&&(n=n.transpose(l),o=nh(o.length,n.rank));var c=[n],d=ut.runKernelFunc(function(h,m){var p=h.min(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Min",{axes:o},c,[!0]);if(r){var u=xl(d.shape,i);d=d.reshape(u)}return d}}),aIe=et({moments_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=xi(t,(e=Me(e,"x","moments")).shape),s=e.mean(n,r),i=s.shape;r||(i=xl(s.shape,n));var o=e.toFloat().sub(s.reshape(i)).square();return{mean:s,variance:o.mean(n,r)}}}),iY=et({sum_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","sum");n.dtype==="bool"&&(n=n.toInt());var s=xi(t,n.shape);return MS(function(i){var o=rh(s,i.rank),l=s,c=i;o!=null&&(c=i.transpose(o),l=nh(l.length,i.rank));var d=function(p){var v=i.shape.slice();return s.forEach(function(g){v[g]=1}),p.reshape(v).mul(hg(i.shape,"float32"))},u={axes:l},h=ut.runKernelFunc(function(p){return p.sum(c,l)},{x:c},function(p){return{x:function(){return d(p)}}},"Sum",u);if(r){var m=xl(h.shape,s);h=h.reshape(m)}return{value:h,gradFunc:d}})(n)}}),sIe=et({prod_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Me(e,"x","prod");n.dtype==="bool"&&(n=n.toInt());var s=xi(t,n.shape),i=rh(s,n.rank),o=s,l=n;i!=null&&(l=n.transpose(i),o=nh(o.length,n.rank));var c=ut.runKernelFunc(function(u){return u.prod(l,o)},{permutedX:l});if(r){var d=xl(c.shape,s);c=c.reshape(d)}return c}}),oY=et({elu_:function(e){var t=Me(e,"x","elu");return ut.runKernelFunc(function(r,n){var s=r.elu(t);return n([s]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return ut.runKernelFunc(function(i){return i.eluDer(r,s)},{dy:r,y:s})}}})}}),iIe=et({leakyRelu_:function(e,t){t===void 0&&(t=.2);var r=Me(e,"x","leakyRelu");return DT(yr(t).mul(r),r)}}),lY=et({prelu_:function(e,t){var r=Me(e,"x","prelu"),n=Me(t,"alpha","prelu");return ut.runKernelFunc(function(s,i){var o=s.prelu(r,n);return i([r,n]),o},{x:r,alpha:n},function(s,i){var o=i[0],l=i[1],c=o.greater(0);return{x:function(){return Dx(c,s,s.mul(l))},alpha:function(){var d=Dx(c,qn(s),s.mul(o)),u=fi(l.shape,s.shape);return u.length>0&&(d=d.sum(u)),d.reshape(l.shape)}}},"Prelu")}}),us=et({relu_:function(e){var t=Me(e,"x","relu");return t.dtype==="bool"?t.toInt():ut.runKernelFunc(function(r,n){var s=r.relu(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mulStrict(s.step().toFloat())}}},"Relu")}}),cY=et({relu6_:function(e){var t=Me(e,"x","relu6");return t.dtype==="bool"?t.toInt():ut.runKernelFunc(function(r,n){var s=r.relu6(t);return n([t]),s},{x:t},function(r,n){var s=n[0],i=s.lessEqual(6).mul(s.step());return{x:function(){return r.mulStrict(i.toFloat())}}},"Relu6")}}),oIe=et({selu_:function(e){var t=Me(e,"x","selu");return ut.runKernelFunc(function(r,n){var s=r.selu(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){var i=s.greater(yr(0)),o=yr(kT),l=yr(_T),c=r.mul(l),d=r.mul(o).mul(s.toFloat().exp());return Dx(i,c,d)}}})}}),Vm=et({transpose_:function(e,t){var r=Me(e,"x","transpose");if(t==null&&(t=r.shape.map(function(s,i){return i}).reverse()),ze(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of perm "+t+"."}),t.forEach(function(s){ze(s>=0&&s<r.rank,function(){return"All entries in 'perm' must be between 0 and "+(r.rank-1)+" but got "+t})}),r.rank<=1)return r.clone();var n={perm:t};return ut.runKernelFunc(function(s){return s.transpose(r,t)},{x:r},function(s){var i=xT(t);return{x:function(){return s.transpose(i)}}},"Transpose",n)}}),lIe=et({localResponseNormalization_:function(e,t,r,n,s){t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5);var i=Me(e,"x","localResponseNormalization");ze(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),ze(qs(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,l=!1;i.rank===3&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=ut.runKernelFunc(function(d,u){var h=d.localResponseNormalization4D(o,t,r,n,s);return u([o,h]),h},{x4D:o},function(d,u){var h=u[0],m=u[1];return{x4D:function(){return ut.runKernelFunc(function(p){return p.LRNGrad(d,h,m,t,r,n,s)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dY=et({norm_:function(e,t,r,n){t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1);var s=function l(c,d,u){if(u===void 0&&(u=null),c.rank===0)return c.abs();if(c.rank!==1&&u===null)return l(c.reshape([-1]),d,u);if(c.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(d===1)return c.abs().sum(u);if(d===1/0)return c.abs().max(u);if(d===-1/0)return c.abs().min(u);if(d==="euclidean"||d===2)return c.abs().pow(yr(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(u)&&u.length===2){if(d===1)return c.abs().sum(u[0]).max(u[1]-1);if(d===1/0)return c.abs().sum(u[1]).max(u[0]);if(d===-1/0)return c.abs().sum(u[1]).min(u[0]);if(d==="fro"||d==="euclidean")return c.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+u)}(e=Me(e,"x","norm"),t,r),i=s.shape;if(n){var o=xi(r,e.shape);i=xl(s.shape,o)}return s.reshape(i)}}),cIe=et({basicLSTMCell_:function(e,t,r,n,s,i){var o=Me(e,"forgetBias","basicLSTMCell"),l=Me(t,"lstmKernel","basicLSTMCell"),c=Me(r,"lstmBias","basicLSTMCell"),d=Me(n,"data","basicLSTMCell"),u=Me(s,"c","basicLSTMCell"),h=Me(i,"h","basicLSTMCell"),m=d.concat(h,1).matMul(l).add(c),p=m.shape[0],v=m.shape[1]/4,g=[p,v],b=m.slice([0,0],g),y=m.slice([0,v],g),C=m.slice([0,2*v],g),N=m.slice([0,3*v],g),k=b.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(C).sigmoid())),S=k.tanh().mulStrict(N.sigmoid());return[k,S]}}),dIe=et({multiRNNCell_:function(e,t,r,n){for(var s=Me(t,"data","multiRNNCell"),i=e2(r,"c","multiRNNCell"),o=e2(n,"h","multiRNNCell"),l=s,c=[],d=0;d<e.length;d++){var u=e[d](l,i[d],o[d]);c.push(u[0]),c.push(u[1]),l=u[1]}var h=[],m=[];for(d=0;d<c.length;d+=2)h.push(c[d]),m.push(c[d+1]);return[h,m]}}),uIe=et({movingAverage_:function(e,t,r,n,s){s===void 0&&(s=!0);var i=Me(e,"v","movingAverage"),o=Me(t,"x","movingAverage"),l=Me(r,"decay","movingAverage");lDe(i,o),ze(Ei(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=yr(1),d=c.sub(l),u=o.sub(i).mul(d);if(s){ze(n!=null,function(){return"When using zeroDebias: true, step is required."});var h=Me(n,"step","movingAverage");u=u.div(c.sub(d2(l,h)))}return i.add(u)}}),hIe=et({stridedSlice_:function(e,t,r,n,s,i,o,l,c){if(s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),n==null&&(n=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var d=Me(e,"x","stridedSlice"),u=Z8(l),h=d.shape.slice();u.forEach(function(b){t[b]=0,r[b]=1,h.splice(b,0,1)}),d=d.reshape(h);for(var m=0;m<d.rank;m++)t[m]=N3e(s,t,n,d.shape,m),r[m]=w3e(i,r,n,d.shape,m),n[m]=n[m]||1;var p=Z8(c);p.forEach(function(b){r[b]=t[b]+1,n[b]=1});var v=yT(t,r,n),g=v.filter(function(b,y){return p.indexOf(y)===-1});return n.every(function(b){return b===1})?Gu(d,t,v).reshape(g):ut.runKernelFunc(function(b){return b.stridedSlice(d,t,r,n)},{$x:d}).reshape(g)}}),fIe=et({topk_:function(e,t,r){t===void 0&&(t=1),r===void 0&&(r=!0);var n=Me(e,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var s=n.shape[n.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var i=ut.runKernelFunc(function(o){return o.topk(n,t,r)},{$x:n});return{values:i[0],indices:i[1]}}}),mIe=et({scatterND_:function(e,t,r){var n=Me(e,"indices","scatterND","int32"),s=Me(t,"updates","scatterND");return y3e(s,n,r),ut.runKernelFunc(function(i){return i.scatterND(n,s,r)},{indices:n,updates:s},null,"ScatterNd",{shape:r})}}),PT=et({fft_:function(e){ze(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return ut.runKernelFunc(function(s){return s.fft(n)},{input:e}).reshape(e.shape)}}),u2=et({ifft_:function(e){ze(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return ut.runKernelFunc(function(s){return s.ifft(n)},{input:e}).reshape(e.shape)}}),OT=et({rfft_:function(e,t){ze(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var r,n=e.shape[e.shape.length-1],s=e.size/n;if(t!=null&&t<n){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,r=e.slice(i,o),n=t}else if(t!=null&&t>n){var l=e.shape.map(function(y){return y});l[e.shape.length-1]=t-n,r=e.concat(La(l),e.shape.length-1),n=t}else r=e;var c=r.zerosLike(),d=zi(r,c).as2D(s,n),u=PT(d),h=Math.floor(n/2)+1,m=Uc(u),p=Du(u),v=m.split([h,n-h],m.shape.length-1),g=p.split([h,n-h],p.shape.length-1),b=r.shape.slice();return b[r.shape.length-1]=h,zi(v[0],g[0]).reshape(b)}}),uY=et({irfft_:function(e){var t=e.shape[e.shape.length-1],r=e.size/t;if(t<=2){var n=e.as2D(r,t),s=u2(n);return Uc(s)}var i=[r,2*(t-1)],o=Uc(e).as2D(r,t),l=Du(e).as2D(r,t),c=o.slice([0,1],[r,t-2]).reverse(1),d=l.slice([0,1],[r,t-2]).reverse(1).mul(yr(-1)),u=o.concat(c,1),h=l.concat(d,1);return n=zi(u,h).as2D(i[0],i[1]),s=u2(n),Uc(s)}}),pIe=Object.freeze({fft:PT,ifft:u2,rfft:OT,irfft:uY}),xIe=et({sparseToDense_:function(e,t,r,n){n===void 0&&(n=0);var s=Me(e,"sparseIndices","sparseToDense","int32"),i=Me(t,"sparseValues","sparseToDense"),o=Me(n,"defaultValue","sparseToDense",i.dtype);return function(l,c,d,u){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var h=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(d.length!==m)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+m+".");var p=c.size;if(c.rank!==0&&(c.rank!==1||p!==h))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+h+"]");if(c.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,r,o),ut.runKernelFunc(function(l){return l.sparseToDense(s,i,r,o)},{$sparseIndices:s,$sparseValues:i,$defaultValue:o})}}),vIe=et({gatherND_:function(e,t){var r=Me(t,"indices","gatherND","int32"),n=Me(e,"x","gatherND");return ut.runKernelFunc(function(s){return s.gatherND(n,r)},{x:n,indices:r},null,"GatherNd")}}),gIe=et({diag_:function(e){var t=Me(e,"x","diag").flatten(),r=e.shape.concat(e.shape);return ut.runKernelFunc(function(n){return n.diag(t)},{$x:t}).reshape(r)}}),bIe=et({dropout_:function(e,t,r,n){var s=Me(e,"x","dropout");if(ze(s.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),ze(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof os?s.clone():s;var i=function(c,d){if(d==null)return c.shape.slice();if(Ei(c.shape,d))return d;if(c.shape.length===d.length){for(var u=[],h=0;h<c.shape.length;h++)d[h]==null&&c.shape[h]!=null?u.push(c.shape[h]):u.push(d[h]);return u}return d}(s,r),o=1-t,l=lG(i,0,1,"float32",n).add(o).floor().div(o);return s.mul(l)}});function hY(e,t,r){for(var n=1-e%2,s=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+n-1);s[i]=t-r*Math.cos(o)}return ti(s,"float32")}var MT=et({hannWindow_:function(e){return hY(e,.5,.5)}}),fY=et({hammingWindow_:function(e){return hY(e,.54,.46)}}),RT=et({frame_:function(e,t,r,n,s){n===void 0&&(n=!1),s===void 0&&(s=0);for(var i=0,o=[];i+t<=e.size;)o.push(Gu(e,i,t)),i+=r;if(n)for(;i<e.size;){var l=i+t-e.size,c=di([Gu(e,i,t-l),qu([l],s)]);o.push(c),i+=r}return o.length===0?Im([],[0,t]):di(o).as2D(o.length,t)}}),mY=et({stft_:function(e,t,r,n,s){var i;s===void 0&&(s=MT),n==null&&(i=t,n=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=RT(e,t,r),l=_o(o,s(t)),c=[],d=0;d<o.shape[0];d++)c.push(OT(l.slice([d,0],[1,t]),n));return di(c)}}),yIe=Object.freeze({hannWindow:MT,hammingWindow:fY,frame:RT,stft:mY}),So,jIe=function(e,t,r){return r===void 0&&(r=1),Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b;return Pr(this,function(y){switch(y.label){case 0:return n=Me(e,"predictions","inTopK"),s=Me(t,"targets","inTopK"),ze(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+n.rank}),ze(n.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+n.rank+" and targets rank "+s.rank}),ua(n.shape.slice(0,n.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=n.shape[n.shape.length-1],ze(r>0&&r<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+r}),[4,n.data()];case 1:return o=y.sent(),[4,s.data()];case 2:for(l=y.sent(),c=[o.length/i,i],u=c[1],h=_y("bool",d=c[0]),m=0;m<d;m++){for(p=m*u,v=o.subarray(p,p+u),g=[],b=0;b<v.length;b++)g.push({value:v[b],index:b});for(g.sort(function(C,N){return N.value-C.value}),h[m]=0,b=0;b<r;b++)if(g[b].index===l[m]){h[m]=1;break}}return e!==n&&n.dispose(),t!==s&&s.dispose(),[2,Ki(h,s.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(So||(So={}));var NIe=et({absoluteDifference_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Me(e,"labels","absoluteDifference"),i=Me(t,"predictions","absoluteDifference"),o=null;r!=null&&(o=Me(r,"weights","absoluteDifference")),ua(s.shape,i.shape,"Error in absoluteDifference: ");var l=s.sub(i).abs();return Nf(l,o,n)}}),Nf=et({computeWeightedLoss_:function(e,t,r){r===void 0&&(r=So.SUM_BY_NONZERO_WEIGHTS);var n=Me(e,"losses","computeWeightedLoss"),s=null;t!=null&&(s=Me(t,"weights","computeWeightedLoss"));var i=s==null?n:n.mul(s);if(r===So.NONE)return i;if(r===So.SUM)return i.sum();if(r===So.MEAN){if(s==null)return i.mean();var o=n.size/s.size,l=i.sum().div(s.sum());return o>1?l.div(yr(o)):l}if(r===So.SUM_BY_NONZERO_WEIGHTS){if(s==null)return i.sum().div(yr(n.size));var c=s.mul(hg(n.shape)).notEqual(yr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+r)}}),wIe=et({cosineDistance_:function(e,t,r,n,s){s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Me(e,"labels","cosineDistance"),o=Me(t,"predictions","cosineDistance"),l=null;n!=null&&(l=Me(n,"weights","cosineDistance")),ua(i.shape,o.shape,"Error in cosineDistance: ");var c=yr(1).sub(i.mul(o).sum(r,!0));return Nf(c,l,s)}}),SIe=et({hingeLoss_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Me(e,"labels","hingeLoss"),i=Me(t,"predictions","hingeLoss"),o=null;r!=null&&(o=Me(r,"weights","hingeLoss")),ua(s.shape,i.shape,"Error in hingeLoss: ");var l=yr(1);s=yr(2).mul(s).sub(l);var c=l.sub(s.mul(i)).relu();return Nf(c,o,n)}}),CIe=et({huberLoss_:function(e,t,r,n,s){n===void 0&&(n=1),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Me(e,"labels","huberLoss"),o=Me(t,"predictions","huberLoss"),l=null;r!=null&&(l=Me(r,"weights","huberLoss")),ua(i.shape,o.shape,"Error in huberLoss: ");var c=yr(n),d=o.sub(i).abs(),u=GG(d,c),h=d.sub(u),m=yr(.5).mul(u.square()).add(c.mul(h));return Nf(m,l,s)}}),kIe=et({logLoss_:function(e,t,r,n,s){n===void 0&&(n=1e-7),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Me(e,"labels","logLoss"),o=Me(t,"predictions","logLoss"),l=null;r!=null&&(l=Me(r,"weights","logLoss")),ua(i.shape,o.shape,"Error in logLoss: ");var c=yr(1),d=yr(n),u=i.mul(o.add(d).log()).neg().sub(c.sub(i).mul(c.sub(o).add(d).log()));return Nf(u,l,s)}}),_Ie=et({meanSquaredError_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Me(e,"labels","meanSquaredError"),i=Me(t,"predictions","meanSquaredError"),o=null;r!=null&&(o=Me(r,"weights","meanSquaredError")),ua(s.shape,i.shape,"Error in meanSquaredError: ");var l=s.squaredDifference(i);return Nf(l,o,n)}}),EIe=et({sigmoidCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Me(e,"multiClassLabels","sigmoidCrossEntropy"),o=Me(t,"logits","sigmoidCrossEntropy"),l=null;if(r!=null&&(l=Me(r,"weights","sigmoidCrossEntropy")),ua(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),n>0){var c=yr(n),d=yr(1),u=yr(.5);i=i.mul(d.sub(c)).add(u.mul(c))}var h=function(m,p){var v=Me(m,"labels","sigmoidCrossEntropyWithLogits"),g=Me(p,"logits","sigmoidCrossEntropyWithLogits");ua(v.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=g.relu(),y=g.mul(v),C=g.abs().neg().exp().log1p();return b.sub(y).add(C)}(i,o);return Nf(h,l,s)}}),DIe=et({softmaxCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Me(e,"onehotLabels","softmaxCrossEntropy"),o=Me(t,"logits","softmaxCrossEntropy"),l=null;if(r!=null&&(l=Me(r,"weights","softmaxCrossEntropy")),ua(i.shape,o.shape,"Error in softmaxCrossEntropy: "),n>0){var c=yr(n),d=yr(1),u=yr(i.shape[1]);i=i.mul(d.sub(c)).add(c.div(u))}var h=function(m,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return MS(function(g,b,y){var C=b.logSumExp([v],!0),N=b.toFloat().sub(C);return y([g,N]),{value:N.mul(g).neg().sum([v]),gradFunc:function(k,S){var D=S[0],E=S[1],T=xl(k.shape,[v]);return[k.reshape(T).mul(D.toFloat().sub(E.exp())),k.reshape(T).mul(E.exp().sub(D.toFloat()))]}}})(m,p)}(i,o);return Nf(h,l,s)}}),AIe=Object.freeze({get Reduction(){return So},absoluteDifference:NIe,computeWeightedLoss:Nf,cosineDistance:wIe,hingeLoss:SIe,huberLoss:CIe,logLoss:kIe,meanSquaredError:_Ie,sigmoidCrossEntropy:EIe,softmaxCrossEntropy:DIe});function jB(e,t){return t===void 0&&(t=!1),ut.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var r=e.shape[0],n=e.shape[1],s=oG(r),i=e.clone(),o=Im([[1]],[1,1]),l=o.clone(),c=r>=n?n:r,d=function(h){var m,p=i,v=l,g=s;m=ut.tidy(function(){var b=i.slice([h,h],[r-h,1]),y=b.norm(),C=i.slice([h,h],[1,1]),N=Im([[-1]]).where(C.greater(0),Im([[1]])),k=C.sub(N.mul(y)),S=b.div(k);l=S.shape[0]===1?o.clone():o.concat(S.slice([1,0],[S.shape[0]-1,S.shape[1]]),0);var D=N.matMul(k).div(y).neg(),E=i.slice([h,0],[r-h,n]),T=D.mul(l);if(h===0)i=E.sub(T.matMul(l.transpose().matMul(E)));else{var A=E.sub(T.matMul(l.transpose().matMul(E)));i=i.slice([0,0],[h,n]).concat(A,0)}var L=s.slice([0,h],[r,s.shape[1]-h]);if(h===0)s=L.sub(L.matMul(l).matMul(T.transpose()));else{var P=L.sub(L.matMul(l).matMul(T.transpose()));s=s.slice([0,0],[r,h]).concat(P,1)}return[l,i,s]}),l=m[0],i=m[1],s=m[2],fl([p,v,g])},u=0;u<c;++u)d(u);return!t&&r>n&&(s=s.slice([0,0],[r,n]),i=i.slice([0,0],[n,n])),[s,i]})}var TIe=et({bandPart_:function(e,t,r){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(r%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+r+".");var n=Me(e,"a","bandPart");if(n.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+n.rank+".");var s=n.shape,i=n.shape.slice(-2),o=i[0],l=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(r<=l))throw new Error("bandPart(): numUpper ("+r+") must not be greater than the number of columns ("+l+").");t<0&&(t=o),r<0&&(r=l);var c=t2(0,o,1,"int32").reshape([-1,1]),d=t2(0,l,1,"int32"),u=mi(c,d),h=FS(u.lessEqual(yr(+t,"int32")),u.greaterEqual(yr(-r,"int32"))),m=La([o,l],n.dtype);return rc(ui(n.reshape([-1,o,l])).map(function(p){return Dx(h,p,m)})).reshape(s)}}),IIe=et({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,ze(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=e[0].shape[0],n=function(c){ze(e[c].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+r+")"})},s=1;s<e.length;++s)n(s)}else t=!0,e=gT(e,e.shape[0],0).map(function(c){return dG(c,[0])});ze(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,l=function(c){i.push(ut.tidy(function(){var d=o[c];if(c>0)for(var u=0;u<c;++u){var h=iY(i[u].mulStrict(d)).mul(i[u]);d=d.sub(h)}return d.div(dY(d,"euclidean"))}))};for(s=0;s<e.length;++s)l(s);return t?rc(i,0):i}}),PIe=et({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return jB(e,t);var r=e.shape.slice(0,e.shape.length-2).reduce(function(o,l){return o*l}),n=ui(e.reshape([r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],i=[];return n.forEach(function(o){var l=jB(o,t),c=l[0],d=l[1];s.push(c),i.push(d)}),[rc(s,0).reshape(e.shape),rc(i,0).reshape(e.shape)]}}),OIe=Object.freeze({bandPart:TIe,gramSchmidt:IIe,qr:PIe});function $S(e,t,r,n,s,i){n==null&&(n=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return r=Math.min(r,o),ze(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),ze(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),ze(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),ze(t.rank===1,function(){return"scores must be a 1D tensor"}),ze(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),ze(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:r,iouThreshold:n,scoreThreshold:s,softNmsSigma:i}}var MIe=et({resizeBilinear_:function(e,t,r){r===void 0&&(r=!1);var n=Me(e,"images","resizeBilinear");ze(n.rank===3||n.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+n.rank+"."}),ze(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=ut.runKernelFunc(function(d,u){return u([s]),d.resizeBilinear(s,o,l,r)},{x:s},function(d,u){return{x:function(){return ut.runKernelFunc(function(h){return h.resizeBilinearBackprop(d,u[0],r)},{})}}},"ResizeBilinear",{alignCorners:r,newHeight:o,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),RIe=et({resizeNearestNeighbor_:function(e,t,r){r===void 0&&(r=!1);var n=Me(e,"images","resizeNearestNeighbor");ze(n.rank===3||n.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+n.rank+"."}),ze(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),ze(n.dtype==="float32"||n.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=ut.runKernelFunc(function(d,u){return u([s]),d.resizeNearestNeighbor(s,o,l,r)},{batchImages:s},function(d,u){return{batchImages:function(){return ut.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(d,u[0],r)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),FIe=et({nonMaxSuppression_:function(e,t,r,n,s){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY);var i=Me(e,"boxes","nonMaxSuppression"),o=Me(t,"scores","nonMaxSuppression"),l=$S(i,o,r,n,s);r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold;var c={maxOutputSize:r,iouThreshold:n,scoreThreshold:s};return ut.runKernelFunc(function(d){return d.nonMaxSuppression(i,o,r,n,s)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),LIe=function(e,t,r,n,s){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),Ir(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return i=Me(e,"boxes","nonMaxSuppressionAsync"),o=Me(t,"scores","nonMaxSuppressionAsync"),l=$S(i,o,r,n,s),r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=m.sent(),d=c[0],u=c[1],h=NT(d,u,r,n,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},BIe=et({nonMaxSuppressionWithScore_:function(e,t,r,n,s,i){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=Me(e,"boxes","nonMaxSuppression"),l=Me(t,"scores","nonMaxSuppression"),c=$S(o,l,r,n,s,i),d={maxOutputSize:r=c.maxOutputSize,iouThreshold:n=c.iouThreshold,scoreThreshold:s=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=ut.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},d);return{selectedIndices:u[0],selectedScores:u[1]}}}),UIe=function(e,t,r,n,s,i){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Ir(this,void 0,void 0,function(){var o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:return o=Me(e,"boxes","nonMaxSuppressionAsync"),l=Me(t,"scores","nonMaxSuppressionAsync"),c=$S(o,l,r,n,s,i),r=c.maxOutputSize,n=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return d=p.sent(),u=d[0],h=d[1],m=wT(u,h,r,n,s,i),o!==e&&o.dispose(),l!==t&&l.dispose(),[2,m]}})})},$Ie=et({cropAndResize_:function(e,t,r,n,s,i){var o=Me(e,"image","cropAndResize"),l=Me(t,"boxes","cropAndResize","float32"),c=Me(r,"boxInd","cropAndResize","int32");s=s||"bilinear",i=i||0;var d=l.shape[0];return ze(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),ze(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."}),ze(c.rank===1&&c.shape[0]===d,function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."}),ze(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+n.length+"."}),ze(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),ze(s==="bilinear"||s==="nearest",function(){return"method must be bilinear or nearest, but was "+s}),ut.runKernelFunc(function(u,h){return u.cropAndResize(o,l,c,n,s,i)},{images:o,boxes:l,boxInd:c},null,"CropAndResize",{method:s,extrapolationValue:i,cropSize:n})}}),FT=Object.freeze({resizeBilinear:MIe,resizeNearestNeighbor:RIe,nonMaxSuppression:FIe,nonMaxSuppressionAsync:LIe,nonMaxSuppressionWithScore:BIe,nonMaxSuppressionWithScoreAsync:UIe,cropAndResize:$Ie}),LT=function(e,t){return!(e>0)||t==="linear"},BT=function(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+r+" has not been implemented yet.")},UT=function(e,t){var r=t,n=fi(e.shape,t.shape);return n.length>0&&(r=r.sum(n)),r.reshape(e.shape)},$T=function(e,t,r){if(t==="linear")return e;if(t==="relu")return us(e);if(t==="elu")return oY(e);if(t==="relu6")return cY(e);if(t==="prelu")return lY(e,r);throw new Error("Unknown fused activation "+t+".")},qIe=et({fusedMatMul_:function(e){var t,r=e.a,n=e.b,s=e.transposeA,i=s!==void 0&&s,o=e.transposeB,l=o!==void 0&&o,c=e.bias,d=e.activation,u=d===void 0?"linear":d,h=e.preluActivationWeights;if(LT(ut.state.gradientDepth,u)===!1){var m=BS(r,n,i,l);return c!=null&&(m=In(m,c)),$T(m,u,h)}var p=Me(r,"a","fused matMul"),v=Me(n,"b","fused matMul");t=hs(p,v),p=t[0],v=t[1];var g=i?p.shape[p.rank-2]:p.shape[p.rank-1],b=l?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],C=l?v.shape[v.rank-2]:v.shape[v.rank-1],N=p.shape.slice(0,-2),k=v.shape.slice(0,-2),S=Mr(N),D=Mr(k);ze(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),ze(Ei(N,k),function(){return"Error in fused matMul: outer dimensions ("+N+") and ("+k+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),ze(g===b,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+b+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var E,T,A=p.shape.slice(0,-2).concat([y,C]),L=i?p.as3D(S,g,y):p.as3D(S,y,g),P=l?v.as3D(D,C,b):v.as3D(D,b,C);c!=null&&Rn(A,(E=hs(E=Me(c,"bias","fused matMul"),p)[0]).shape),h!=null&&(T=Me(h,"prelu weights","fused matMul"));var O={a:L,b:P};c!=null&&(O.bias=E),h!=null&&(O.preluActivationWeights=T);var J=[L,P];return ut.runKernelFunc(function(W,re){var U=W.fusedBatchMatMul({a:L,b:P,transposeA:i,transposeB:l,bias:E,activation:u,preluActivationWeights:T});return re([L,P,U]),U},O,function(W,re){var U=re[0],Q=re[1],B=re[2],te=BT(W,B,u),X={};return c!=null&&(X={bias:function(){return UT(E,te)}}),Object.assign(i||l?!i&&l?{a:function(){return te.matMul(Q,!1,!1)},b:function(){return te.matMul(U,!0,!1)}}:i&&!l?{a:function(){return Q.matMul(te,!1,!0)},b:function(){return U.matMul(te,!1,!1)}}:{a:function(){return Q.matMul(te,!0,!0)},b:function(){return te.matMul(U,!0,!0)}}:{a:function(){return te.matMul(Q,!1,!0)},b:function(){return U.matMul(te,!0,!1)}},X)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:u},J,[!0]).reshape(A)}}),VIe=et({fusedConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(m=m||"linear",LT(ut.state.gradientDepth,m)===!1){var v=Zc(t,r,n,s,o,c,d);return u!=null&&(v=In(v,u)),$T(v,m,p)}var g=Me(t,"x","conv2d"),b=Me(r,"filter","conv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),ze(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),ze(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),d!=null&&ze(qs(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+s+"."}),ze(y.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),ze(vl(n,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),ze(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var N,k,S=Wx(y.shape,b.shape,n,c,s,d);u!=null&&(N=hs(N=Me(u,"bias","fused conv2d"),g)[0],Rn(S.outShape,N.shape)),p!=null&&(k=Me(p,"prelu weights","fused conv2d"));var D={x:y,filter:b};u!=null&&(D.bias=N),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=ut.runKernelFunc(function(A,L){var P=A.fusedConv2d({input:y,filter:b,convInfo:S,bias:N,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){var P=L,O=P[0],J=P[1],W=P[2],re=BT(A,W,m);ze(Uv(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var U={};return u!=null&&(U={bias:function(){return UT(N,re)}}),Object.assign({x:function(){return ZG(J.shape,re,O,n,s)},filter:function(){return TT(J,re,O.shape,n,s)}},U)},"FusedConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),zIe=et({fusedDepthwiseConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(LT(ut.state.gradientDepth,m)===!1){var v=LS(t,r,n,s,o,c,d);return u!=null&&(v=In(v,u)),$T(v,m,p)}var g=Me(t,"x","depthwiseConv2d"),b=Me(r,"filter","depthwiseConv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),ze(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),ze(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),ze(y.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),c==null&&(c=[1,1]),ze(vl(n,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),d!=null&&ze(qs(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+s+"."});var N,k,S=Wx(y.shape,b.shape,n,c,s,d,!0);u!=null&&(N=hs(N=Me(u,"bias","fused conv2d"),g)[0],Rn(S.outShape,N.shape)),p!=null&&(k=Me(p,"prelu weights","fused depthwiseConv2d"));var D={x:y,filter:b};u!=null&&(D.bias=N),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=ut.runKernelFunc(function(A,L){var P=A.fusedDepthwiseConv2D({input:y,filter:b,convInfo:S,bias:N,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){ze(Uv(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var P=L[0],O=L[1],J=L[2],W=BT(A,J,m),re={};return u!=null&&(re={bias:function(){return UT(N,W)}}),Object.assign({x:function(){return eY(O.shape,W,P,S)},filter:function(){return tY(O,W,P.shape,S)}},re)},"FusedDepthwiseConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),HIe=Object.freeze({matMul:qIe,conv2d:VIe,depthwiseConv2d:zIe}),WIe=Object.freeze({image:FT,linalg:OIe,losses:AIe,spectral:pIe,fused:HIe,signal:yIe,square:k4e,squaredDifference:FG,conv1d:MTe,conv2d:Zc,conv3d:RTe,depthwiseConv2d:LS,separableConv2d:IT,conv2dTranspose:FTe,conv3dTranspose:LTe,op:et,batchNormalization2d:rTe,batchNormalization3d:nTe,batchNormalization4d:aTe,batchNormalization:sTe,batchNorm:VG,batchNorm2d:iTe,batchNorm3d:oTe,batchNorm4d:lTe,booleanMaskAsync:OTe,complex:zi,real:Uc,imag:Du,concat:di,concat1d:HDe,concat2d:WDe,concat3d:GDe,concat4d:YDe,split:gT,matMul:BS,dot:BTe,outerProduct:UTe,reverse:x1,reverse1d:$Te,reverse2d:qTe,reverse3d:VTe,reverse4d:zTe,maxPool:Ni,avgPool:v1,pool:HTe,maxPool3d:WTe,avgPool3d:GTe,slice:Gu,slice1d:YTe,slice2d:KTe,slice3d:aY,slice4d:XTe,abs:_4e,acos:E4e,acosh:D4e,asin:A4e,asinh:T4e,atan:I4e,atanh:P4e,ceil:O4e,clipByValue:ET,cos:M4e,cosh:R4e,erf:F4e,exp:QD,expm1:L4e,floor:B4e,log:U4e,log1p:$4e,logSigmoid:q4e,neg:c2,reciprocal:V4e,round:z4e,rsqrt:LG,sigmoid:BG,sign:H4e,isNaN:W4e,isInf:G4e,isFinite:Y4e,sin:K4e,sinh:X4e,softplus:Q4e,sqrt:J4e,step:Z4e,tan:eTe,tanh:tTe,all:QTe,any:JTe,argMax:ZTe,argMin:eIe,logSumExp:tIe,max:US,mean:rIe,min:nIe,moments:aIe,sum:iY,prod:sIe,equal:YG,equalStrict:STe,greater:CTe,greaterEqual:KG,greaterEqualStrict:kTe,greaterStrict:_Te,less:ETe,lessEqual:DTe,lessEqualStrict:ATe,lessStrict:TTe,notEqual:ITe,notEqualStrict:PTe,add:In,addN:uTe,addStrict:hTe,atan2:fTe,div:Cd,divNoNan:mTe,divStrict:pTe,floorDiv:WG,maximum:DT,maximumStrict:xTe,minimum:GG,minimumStrict:vTe,mod:gTe,modStrict:bTe,mul:_o,mulStrict:yTe,pow:d2,powStrict:jTe,squaredDifferenceStrict:NTe,sub:mi,subStrict:wTe,elu:oY,leakyRelu:iIe,prelu:lY,relu:us,relu6:cY,selu:oIe,logicalAnd:FS,logicalNot:cTe,logicalOr:zG,logicalXor:dTe,where:Dx,whereAsync:HG,buffer:mn,print:n3e,batchToSpaceND:iG,broadcastTo:a3e,cast:s3e,clone:i3e,cumsum:o3e,depthToSpace:l3e,expandDims:Lc,eye:oG,multinomial:c3e,oneHot:GD,pad:Hx,pad1d:d3e,pad2d:u3e,pad3d:h3e,pad4d:f3e,rand:m3e,randomNormal:p3e,randomGamma:x3e,randomUniform:lG,reshape:Ad,spaceToBatchND:cG,squeeze:dG,stack:rc,tile:uv,truncatedNormal:v3e,unstack:ui,setdiff1dAsync:g3e,fill:qu,linspace:zDe,ones:hg,range:t2,scalar:yr,tensor:Ki,tensor1d:ti,tensor2d:Im,tensor3d:vT,tensor4d:ol,tensor5d:$De,tensor6d:qDe,variable:VDe,zeros:La,onesLike:sG,zerosLike:qn,transpose:Vm,softmax:jf,logSoftmax:C3e,localResponseNormalization:lIe,norm:dY,gather:AT,unsortedSegmentSum:XG,basicLSTMCell:cIe,multiRNNCell:dIe,movingAverage:uIe,stridedSlice:hIe,topk:fIe,scatterND:mIe,fft:PT,ifft:u2,rfft:OT,irfft:uY,sparseToDense:xIe,gatherND:vIe,diag:gIe,dropout:bIe,hannWindow:MT,hammingWindow:fY,frame:RT,stft:mY,inTopKAsync:jIe});function rr(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&ze(r.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function UE(e,t,r,n){if(r==="linear")return e.linear(t);if(r==="relu")return e.relu(t);if(r==="elu")return e.elu(t);if(r==="relu6")return e.relu6(t);if(r==="prelu")return e.prelu(t,n);throw new Error("Activation "+r+" has not been implemented for the CPU backend.")}var GIe=function(e){function t(){var r=e.call(this)||this;return r.blockSize=48,r.firstUse=!0,r.data=new vG(r,ut),r}return Ud(t,e),t.prototype.write=function(r,n,s){this.firstUse&&(this.firstUse=!1,$t().get("IS_NODE")&&Zw(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:r,dtype:s}),i},t.prototype.move=function(r,n,s,i){this.data.set(r,{values:n,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){return[2,this.readSync(r)]})})},t.prototype.readSync=function(r){var n=this.data.get(r),s=n.dtype,i=n.complexTensors;return s==="complex64"?XD(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(r).values},t.prototype.bufferSync=function(r){var n=this.readSync(r.dataId),s=n;if(r.dtype==="string")try{s=n.map(function(i){return Xw(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return mn(r.shape,r.dtype,s)},t.prototype.makeOutput=function(r,n,s){var i=this.write(r,n,s);return ut.makeTensorFromDataId(i,n,s,this)},t.prototype.disposeData=function(r){if(this.data.has(r)){var n=this.data.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(r)}},t.prototype.time=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){return n=ku(),r(),[2,{kernelMs:ku()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(r,n){var s=this.makeOutput(null,r.shape,"complex64");return this.data.get(s.dataId).complexTensors={real:ut.keep(r.clone()),imag:ut.keep(n.clone())},s},t.prototype.real=function(r){return this.data.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.data.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(rr(r,"slice"),pG(r.shape,n,s)){var i=xG(n,r.strides),o=Mr(s);return Ki(this.readSync(r.dataId).subarray(i,i+o),s,r.dtype)}for(var l=mn(s,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d).map(function(h,m){return h+n[m]});l.values[d]=c.get.apply(c,u)}return l.toTensor()},t.prototype.stridedSlice=function(r,n,s,i){rr(r,"stridedSlice");var o=yT(n,s,i);if(o.some(function(p){return p===0}))return Ki([],o);for(var l=mn(o,r.dtype),c=this.bufferSync(r),d=0;d<l.size;d++){for(var u=l.indexToLoc(d),h=new Array(u.length),m=0;m<h.length;m++)h[m]=u[m]*i[m]+n[m];l.set.apply(l,[c.get.apply(c,h)].concat(u))}return l.toTensor()},t.prototype.diag=function(r){for(var n=this.readSync(r.dataId),s=mn([r.size,r.size],r.dtype),i=s.values,o=0;o<n.length;o++)i[o*r.size+o]=n[o];return s.toTensor()},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.reverse=function(r,n){rr(r,"reverse");for(var s=mn(r.shape,r.dtype),i=this.bufferSync(r),o=function(c){var d=s.indexToLoc(c),u=d.slice();n.forEach(function(h){return u[h]=r.shape[h]-1-u[h]}),s.set.apply(s,[i.get.apply(i,u)].concat(d))},l=0;l<s.size;l++)o(l);return s.toTensor()},t.prototype.concat=function(r,n){var s=this;if(r[0].dtype==="complex64"){var i=r.map(function(p){return Uc(p)}),o=r.map(function(p){return Du(p)});return zi(this.concat(i,n),this.concat(o,n))}var l=r.map(function(p){var v=Mr(p.shape.slice(n));return p.as2D(-1,v)}),c=Bv(l.map(function(p){return p.shape}),1),d=mn(c,r[0].dtype).values;if(l[0].shape[0]===1){var u=0;l.forEach(function(p){d.set(s.readSync(p.dataId),u),u+=p.size})}else{var h=0;l.forEach(function(p){for(var v=s.readSync(p.dataId),g=0,b=0;b<p.shape[0];++b)for(var y=b*c[1]+h,C=0;C<p.shape[1];++C)d[y+C]=v[g++];h+=p.shape[1]})}var m=Bv(r.map(function(p){return p.shape}),n);return Ki(d,m,r[0].dtype)},t.prototype.neg=function(r){return rr(r,"neg"),this.multiply(yr(-1),r)},t.prototype.add=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s+o,imag:i+l}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s+i})},t.prototype.addN=function(r){var n=this;rr(r,"addN");for(var s=r.map(function(u){return n.readSync(u.dataId)}),i=mn(r[0].shape,r[0].dtype),o=i.values,l=0;l<r.length;l++)for(var c=s[l],d=0;d<o.length;d++)o[d]+=c[d];return i.toTensor()},t.prototype.softmax=function(r,n){var s=xi([n],r.shape),i=this.max(r,s),o=xl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.subtract=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s-o,imag:i-l}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s-i})},t.prototype.pow=function(r,n){return rr([r,n],"pow"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.pow(s,i)})},t.prototype.batchMatMul=function(r,n,s,i){rr([r,n],"matMul");for(var o=s?r.shape[1]:r.shape[2],l=s?r.shape[2]:r.shape[1],c=i?n.shape[1]:n.shape[2],d=r.shape[0],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=s?[r.strides[0],1,r.strides[1]]:[r.strides[0],r.strides[1],1],p=m[0],v=m[1],g=m[2],b=i?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],y=b[0],C=b[1],N=b[2],k=l*c,S=mn([d,l,c],r.dtype),D=S.values,E=this.blockSize,T=0;T<d;T++)for(var A=0;A<l;A+=E)for(var L=0;L<c;L+=E)for(var P=0;P<o;P+=E)for(var O=Math.min(A+E,l),J=Math.min(L+E,c),W=Math.min(P+E,o),re=A;re<O;re++)for(var U=L;U<J;U++){for(var Q=0,B=P;B<W;B++)Q+=u[T*p+re*v+B*g]*h[B*y+U*C+T*N];D[T*k+(re*c+U)]+=Q}return S.toTensor()},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=this.batchMatMul(n,s,i,o);return l&&(u=this.add(u,l)),c&&(u=UE(this,u,c,d)),u},t.prototype.multiply=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s*o-i*l,imag:s*l+i*o}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s*i})},t.prototype.realDivide=function(r,n){return rr([r,n],"realDivide"),this.broadcastedBinaryOp(r,n,"float32",function(s,i){return s/i})},t.prototype.floorDiv=function(r,n){return rr([r,n],"floorDiv"),this.broadcastedBinaryOp(r,n,"int32",function(s,i){return Math.floor(s/i)})},t.prototype.sum=function(r,n){rr(r,"sum"),Ul("sum",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,Wi(r.dtype,"int32")),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=0,v=0;v<c;++v)p+=u[m+v];d[h]=p}return l},t.prototype.prod=function(r,n){rr(r,"sum");for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,Wi(r.dtype,"int32")),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=1,v=0;v<c;++v)p*=u[m+v];d[h]=p}return l},t.prototype.unsortedSegmentSum=function(r,n,s){rr(r,"unsortedSegmentSum");for(var i=[],o=r.rank-n.rank,l=0;l<o;++l)n=n.expandDims(l+1);for(l=0;l<s;++l){var c=yr(l,"int32"),d=YG(c,n).asType("float32").mul(r).sum(0);i.push(d)}return rc(i)},t.prototype.argMin=function(r,n){rr(r,"argMin");var s=[n];Ul("argMin",s,r.rank);for(var i=xo(r.shape,s),o=i[0],l=i[1],c=La(o,"int32"),d=Mr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y<v&&(v=y,g=b)}u[m]=g}return c},t.prototype.argMax=function(r,n){rr(r,"argMax");var s=[n];Ul("argMax",s,r.rank);for(var i=xo(r.shape,s),o=i[0],l=i[1],c=La(o,"int32"),d=Mr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y>v&&(v=y,g=b)}u[m]=g}return c},t.prototype.cumsum=function(r,n,s,i){if(rr(r,"cumsum"),n!==r.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(r.rank-1)+" but got axis="+n);for(var o=Wi(r.dtype,"int32"),l=La(r.shape,o),c=this.readSync(l.dataId),d=this.readSync(r.dataId),u=r.shape[r.rank-1],h=i?function(b,y){return b+u-y-1}:function(b,y){return b+y},m=0;m<d.length;m+=u)for(var p=0;p<u;p++){var v=h(m,p);if(p===0)c[v]=s?0:d[v];else{var g=h(m,p-1);c[v]=s?d[g]+c[g]:d[v]+c[g]}}return l},t.prototype.equal=function(r,n){return rr([r,n],"equal"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s===i?1:0})},t.prototype.notEqual=function(r,n){return rr([r,n],"notEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s!==i?1:0})},t.prototype.less=function(r,n){return rr([r,n],"less"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<i?1:0})},t.prototype.lessEqual=function(r,n){return rr([r,n],"lessEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<=i?1:0})},t.prototype.greater=function(r,n){return rr([r,n],"greater"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>i?1:0})},t.prototype.greaterEqual=function(r,n){return rr([r,n],"greaterEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>=i?1:0})},t.prototype.logicalNot=function(r){rr(r,"logicalNot");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)s[i]=n[i]?0:1;return this.makeOutput(s,r.shape,"bool")},t.prototype.logicalAnd=function(r,n){return rr([r,n],"logicalAnd"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s&&i})},t.prototype.logicalOr=function(r,n){return rr([r,n],"logicalOr"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s||i})},t.prototype.select=function(r,n,s){rr([r,n,s],"select");for(var i=this.readSync(r.dataId),o=this.readSync(n.dataId),l=this.readSync(s.dataId),c=La(n.shape,Wi(n.dtype,s.dtype)),d=this.readSync(c.dataId),u=0,h=r.rank===0||r.rank>1||n.rank===1?1:Mr(n.shape.slice(1)),m=0;m<i.length;m++)for(var p=0;p<h;p++)i[m]===1?d[u++]=o[m]:d[u++]=l[m];return c},t.prototype.where=function(r){rr([r],"where");var n=this.readSync(r.dataId);return ST(r.shape,n)},t.prototype.topk=function(r,n,s){return rr(r,"topk"),CG(this.readSync(r.dataId),r.shape,r.dtype,n)},t.prototype.min=function(r,n){rr(r,"min"),Ul("min",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,r.dtype),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g<p&&(p=g)}d[h]=p}return l},t.prototype.minimum=function(r,n){return rr([r,n],"minimum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.min(s,i)})},t.prototype.mod=function(r,n){return rr([r,n],"mod"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s%i;return s<0&&i<0||s>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(r,n){rr(r,"max"),Ul("max",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,r.dtype),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g>p&&(p=g)}d[h]=p}return l},t.prototype.maximum=function(r,n){return rr([r,n],"maximum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.max(s,i)})},t.prototype.all=function(r,n){rr(r,"all"),Ul("all",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,r.dtype),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p&&g}d[h]=p}return l},t.prototype.any=function(r,n){rr(r,"any"),Ul("any",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=La(i,r.dtype),c=Mr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p||g}d[h]=p}return l},t.prototype.squaredDifference=function(r,n){return rr([r,n],"squaredDifference"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s-i;return o*o})},t.prototype.ceil=function(r){rr(r,"ceil");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.ceil(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.floor=function(r){rr(r,"floor");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.floor(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.sign=function(r){rr(r,"x");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)n[i]<0?s[i]=-1:n[i]>0?s[i]=1:s[i]=0;return this.makeOutput(s,r.shape,"float32")},t.prototype.isNaN=function(r){rr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isNaN(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isInf=function(r){rr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Math.abs(n[i])===1/0&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isFinite=function(r){rr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isFinite(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.round=function(r){rr(r,"round");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=Math.floor(n[i]);n[i]-o<.5?s[i]=Math.floor(n[i]):n[i]-o>.5?s[i]=Math.ceil(n[i]):s[i]=o%2==0?o:o+1}return this.makeOutput(s,r.shape,"float32")},t.prototype.exp=function(r){rr(r,"exp");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.exp(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.expm1=function(r){rr(r,"expm1");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.expm1(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.log=function(r){rr(r,"log");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.log1p=function(r){rr(r,"log1p");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log1p(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.sqrt=function(r){rr(r,"sqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.rsqrt=function(r){rr(r,"rsqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=1/Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.reciprocal=function(r){rr(r,"reciprocal");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=1/n[i];return this.makeOutput(s,r.shape,"float32")},t.prototype.linear=function(r){return r},t.prototype.relu=function(r){rr(r,"relu");for(var n=La(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.max(0,i[o]);return n},t.prototype.relu6=function(r){rr(r,"relu");for(var n=La(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.min(Math.max(0,i[o]),6);return n},t.prototype.prelu=function(r,n){return rr([r,n],"prelu"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return s<0?i*s:s})},t.prototype.elu=function(r){rr(r,"elu");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=s[i];n[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(n,r.shape,"float32")},t.prototype.eluDer=function(r,n){rr([r,n],"eluDer");for(var s=new Float32Array(n.size),i=this.readSync(n.dataId),o=this.readSync(r.dataId),l=0;l<i.length;++l){var c=i[l];s[l]=c>=1?o[l]:o[l]*(c+1)}return this.makeOutput(s,n.shape,"float32")},t.prototype.selu=function(r){rr(r,"selu");for(var n=kT,s=_T,i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>=0?s*c:n*(Math.exp(c)-1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.clip=function(r,n,s){rr(r,"clip");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>s?s:c<n?n:c}return this.makeOutput(i,r.shape,"float32")},t.prototype.abs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.abs(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.complexAbs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<r.size;++i){var o=s[2*i],l=s[2*i+1];n[i]=Math.hypot(o,l)}return this.makeOutput(n,r.shape,"float32")},t.prototype.int=function(r){rr(r,"int");for(var n=new Int32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=s[i];return this.makeOutput(n,r.shape,"int32")},t.prototype.sigmoid=function(r){rr(r,"sigmoid");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=1/(1+Math.exp(-s[i]));return this.makeOutput(n,r.shape,"float32")},t.prototype.softplus=function(r){rr(r,"softplus");for(var n=Math.log(11920928955078125e-23)+2,s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o]>-n,c=i[o]<n,d=Math.exp(i[o]),u=void 0;u=c?d:l?i[o]:Math.log(1+d),s[o]=u}return this.makeOutput(s,r.shape,"float32")},t.prototype.sin=function(r){rr(r,"sin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cos=function(r){rr(r,"cos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tan=function(r){rr(r,"tan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.tan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asin=function(r){rr(r,"asin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acos=function(r){rr(r,"acos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan=function(r){rr(r,"atan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan2=function(r,n){return rr([r,n],"atan2"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.atan2(s,i)})},t.prototype.sinh=function(r){rr(r,"sinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cosh=function(r){rr(r,"cosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tanh=function(r){rr(r,"tanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Y5e(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asinh=function(r){rr(r,"asinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acosh=function(r){rr(r,"acosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atanh=function(r){rr(r,"atanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atanh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.erf=function(r){rr(r,"erf");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=Math.sign(s[i]),l=Math.abs(s[i]),c=1/(1+.3275911*l);n[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(n,r.shape,"float32")},t.prototype.step=function(r,n){n===void 0&&(n=0),rr(r,"step");for(var s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o];isNaN(l)?s[o]=NaN:s[o]=l>0?1:n}return this.makeOutput(s,r.shape,"float32")},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.conv2d(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.conv2d=function(r,n,s){rr([r,n],"conv2d");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.dataFormat==="channelsLast",m=mn(s.outShape,r.dtype),p=r.strides[0],v=h?r.strides[1]:r.strides[2],g=h?r.strides[2]:1,b=h?1:r.strides[1],y=m.strides[0],C=h?m.strides[1]:m.strides[2],N=h?m.strides[2]:1,k=h?1:m.strides[1],S=this.readSync(r.dataId),D=this.readSync(n.dataId),E=m.values,T=0;T<s.batchSize;++T)for(var A=T*p,L=T*y,P=0;P<s.outHeight;++P)for(var O=L+P*C,J=P*s.strideHeight-u,W=0;W<i;W++){var re=J+W*l;if(!(re<0||re>=s.inHeight))for(var U=W*n.strides[0],Q=A+re*v,B=0;B<s.outWidth;++B)for(var te=O+B*N,X=B*s.strideWidth-d,ce=0;ce<o;ce++){var M=X+ce*c;if(!(M<0||M>=s.inWidth))for(var q=Q+M*g,z=U+ce*n.strides[1],K=0;K<s.inChannels;++K){for(var ee=S[q+K*b],ne=0;ne<s.outChannels;++ne)E[te+ne*k]+=ee*D[z+ne];z+=s.outChannels}}}return m.toTensor()},t.prototype.conv3d=function(r,n,s){for(var i=s.filterDepth,o=s.filterHeight,l=s.filterWidth,c=s.dilationDepth,d=s.dilationHeight,u=s.dilationWidth,h=s.padInfo.front,m=s.padInfo.left,p=s.padInfo.top,v=mn(s.outShape,r.dtype),g=this.readSync(r.dataId),b=this.readSync(n.dataId),y=v.values,C=0;C<s.batchSize;++C)for(var N=C*r.strides[0],k=C*v.strides[0],S=0;S<s.outDepth;++S)for(var D=k+S*v.strides[1],E=S*s.strideDepth-h,T=0;T<i;T++){var A=E+T*c;if(!(A<0||A>=s.inDepth))for(var L=T*n.strides[0],P=N+A*r.strides[1],O=0;O<s.outHeight;++O)for(var J=D+O*v.strides[2],W=O*s.strideHeight-p,re=0;re<o;re++){var U=W+re*d;if(!(U<0||U>=s.inHeight))for(var Q=L+re*n.strides[1],B=P+U*r.strides[2],te=0;te<s.outWidth;++te)for(var X=J+te*s.outChannels,ce=te*s.strideWidth-m,M=0;M<l;M++){var q=ce+M*u;if(!(q<0||q>=s.inWidth))for(var z=Q+M*n.strides[2],K=B+q*s.inChannels,ee=z,ne=0;ne<s.inChannels;++ne){for(var ae=g[K+ne],ie=0;ie<s.outChannels;++ie)y[X+ie]+=ae*b[ee+ie];ee+=s.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(r,n,s){rr([r,n],"conv2dDerInput");for(var i=mn(s.inShape,"float32"),o=i.values,l=this.readSync(r.dataId),c=this.readSync(n.dataId),d=n.strides,u=d[0],h=d[1],m=d[2],p=s.batchSize,v=s.filterHeight,g=s.filterWidth,b=s.inChannels,y=s.inHeight,C=s.inWidth,N=s.outChannels,k=s.outHeight,S=s.outWidth,D=s.strideHeight,E=s.strideWidth,T=s.dataFormat,A=v-1-s.padInfo.top,L=g-1-s.padInfo.left,P=T==="channelsLast",O=i.strides[0],J=P?i.strides[1]:i.strides[2],W=P?i.strides[2]:1,re=P?1:i.strides[1],U=r.strides[0],Q=P?r.strides[1]:r.strides[2],B=P?r.strides[2]:1,te=P?1:r.strides[1],X=0;X<p;++X)for(var ce=0;ce<b;++ce)for(var M=0;M<y;++M)for(var q=M-A,z=Math.max(0,Math.ceil(q/D)),K=Math.min(k,(v+q)/D),ee=0;ee<C;++ee){for(var ne=ee-L,ae=Math.max(0,Math.ceil(ne/E)),ie=Math.min(S,(g+ne)/E),G=0,de=z;de<K;++de)for(var Y=de*D-q,oe=ae;oe<ie;++oe)for(var Se=U*X+Q*de+B*oe,ue=u*(v-1-Y)+h*(g-1-(oe*E-ne))+m*ce,se=0;se<N;++se)G+=l[Se+te*se]*c[ue+se];o[O*X+J*M+W*ee+re*ce]=G}return i.toTensor()},t.prototype.conv3dDerInput=function(r,n,s){for(var i=mn(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=l[3],m=this.readSync(r.dataId),p=r.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),N=n.strides,k=N[0],S=N[1],D=N[2],E=N[3],T=s.batchSize,A=s.filterDepth,L=s.filterHeight,P=s.filterWidth,O=s.inChannels,J=s.inDepth,W=s.inHeight,re=s.inWidth,U=s.outChannels,Q=s.outDepth,B=s.outHeight,te=s.outWidth,X=s.strideDepth,ce=s.strideHeight,M=s.strideWidth,q=A-1-s.padInfo.front,z=L-1-s.padInfo.top,K=P-1-s.padInfo.left,ee=0;ee<T;++ee)for(var ne=0;ne<O;++ne)for(var ae=0;ae<J;++ae)for(var ie=ae-q,G=Math.max(0,Math.ceil(ie/X)),de=Math.min(Q,(A+ie)/X),Y=0;Y<W;++Y)for(var oe=Y-z,Se=Math.max(0,Math.ceil(oe/ce)),ue=Math.min(B,(L+oe)/ce),se=0;se<re;++se){for(var ye=se-K,Ne=Math.max(0,Math.ceil(ye/M)),Le=Math.min(te,(P+ye)/M),Je=0,lt=G;lt<de;++lt)for(var vt=lt*X-ie,Re=Se;Re<ue;++Re)for(var ht=Re*ce-oe,At=Ne;At<Le;++At)for(var Tt=v*ee+g*lt+b*Re+y*At,Ht=k*(A-1-vt)+S*(L-1-ht)+D*(P-1-(At*M-ye))+E*ne,pe=0;pe<U;++pe)Je+=m[Tt+pe]*C[Ht+pe];o[c*ee+d*ae+u*Y+h*se+ne]=Je}return i.toTensor()},t.prototype.conv2dDerFilter=function(r,n,s){rr([r,n],"conv2dDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dataFormat==="channelsLast",u=mn(s.filterShape,"float32"),h=s.padInfo.left,m=s.padInfo.top,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((m-g)/i)),y=Math.min(s.outHeight,(s.inHeight+m-g)/i),C=0;C<c;++C)for(var N=Math.max(0,Math.ceil((h-C)/o)),k=Math.min(s.outWidth,(s.inWidth+h-C)/o),S=0;S<s.inChannels;++S)for(var D=0;D<s.outChannels;++D){for(var E=0,T=0;T<s.batchSize;++T)for(var A=b;A<y;++A)for(var L=g+A*i-m,P=N;P<k;++P){var O=C+P*o-h;E+=d?p.get(T,L,O,S)*v.get(T,A,P,D):p.get(T,S,L,O)*v.get(T,D,A,P)}u.set(E,g,C,S,D)}return u.toTensor()},t.prototype.conv3dDerFilter=function(r,n,s){for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=mn(s.filterShape,"float32"),m=h.values,p=h.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),N=n.strides,k=N[0],S=N[1],D=N[2],E=N[3],T=this.readSync(r.dataId),A=r.strides,L=A[0],P=A[1],O=A[2],J=A[3],W=s.padInfo.front,re=s.padInfo.left,U=s.padInfo.top,Q=0;Q<c;++Q)for(var B=Math.max(0,Math.ceil((W-Q)/i)),te=Math.min(s.outDepth,(s.inDepth+W-Q)/i),X=Q*v,ce=0;ce<d;++ce)for(var M=Math.max(0,Math.ceil((U-ce)/o)),q=Math.min(s.outHeight,(s.inHeight+U-ce)/o),z=ce*g+X,K=0;K<u;++K)for(var ee=Math.max(0,Math.ceil((re-K)/l)),ne=Math.min(s.outWidth,(s.inWidth+re-K)/l),ae=K*b+z,ie=0;ie<s.inChannels;++ie)for(var G=ie*y+ae,de=0;de<s.outChannels;++de){for(var Y=0,oe=0;oe<s.batchSize;++oe)for(var Se=oe*L,ue=oe*k,se=B;se<te;++se)for(var ye=(Q+se*i-W)*P+Se,Ne=se*S+ue,Le=M;Le<q;++Le)for(var Je=(ce+Le*o-U)*O+ye,lt=Le*D+Ne,vt=ee;vt<ne;++vt){var Re=vt*E+lt;Y+=T[(K+vt*l-re)*J+Je+ie]*C[Re+de]}m[G+de]=Y}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.depthwiseConv2D(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.depthwiseConv2D=function(r,n,s){rr([r,n],"depthwiseConv2D");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.outChannels/s.inChannels,m=mn(s.outShape,r.dtype),p=this.readSync(r.dataId),v=this.readSync(n.dataId),g=m.values,b=0;b<s.batchSize;++b)for(var y=b*r.strides[0],C=b*m.strides[0],N=0;N<s.outHeight;++N)for(var k=C+N*m.strides[1],S=N*s.strideHeight-d,D=0;D<i;++D){var E=S+D*l;if(!(E<0||E>=s.inHeight))for(var T=D*n.strides[0],A=y+E*r.strides[1],L=0;L<s.outWidth;++L)for(var P=k+L*m.strides[2],O=L*s.strideWidth-u,J=0;J<o;++J){var W=O+J*c;if(!(W<0||W>=s.inWidth))for(var re=T+J*n.strides[1],U=A+W*s.inChannels,Q=P,B=re,te=0;te<s.inChannels;++te){for(var X=p[U+te],ce=0;ce<h;++ce)g[Q+ce]+=X*v[B+ce];Q+=h,B+=h}}}return m.toTensor()},t.prototype.depthwiseConv2DDerInput=function(r,n,s){rr([r,n],"depthwiseConv2DDerInput");for(var i=mn(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=this.readSync(r.dataId),m=r.strides,p=m[0],v=m[1],g=m[2],b=this.readSync(n.dataId),y=n.strides,C=y[0],N=y[1],k=y[2],S=s.batchSize,D=s.filterHeight,E=s.filterWidth,T=s.inChannels,A=s.inHeight,L=s.inWidth,P=s.outChannels,O=s.outHeight,J=s.outWidth,W=s.strideHeight,re=s.strideWidth,U=D-1-s.padInfo.top,Q=E-1-s.padInfo.left,B=P/T,te=0;te<S;++te)for(var X=0;X<T;++X)for(var ce=0;ce<A;++ce)for(var M=ce-U,q=Math.max(0,Math.ceil(M/W)),z=Math.min(O,(D+M)/W),K=0;K<L;++K){for(var ee=K-Q,ne=Math.max(0,Math.ceil(ee/re)),ae=Math.min(J,(E+ee)/re),ie=0,G=q;G<z;++G)for(var de=G*W-M,Y=ne;Y<ae;++Y)for(var oe=p*te+v*G+g*Y,Se=C*(D-1-de)+N*(E-1-(Y*re-ee))+k*X,ue=0;ue<B;++ue)ie+=h[oe+(X*B+ue)]*b[Se+ue];o[c*te+d*ce+u*K+X]=ie}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){rr([r,n],"depthwiseConv2DDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=mn(s.filterShape,"float32"),u=s.padInfo.left,h=s.padInfo.top,m=s.outChannels/s.inChannels,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((h-g)/i)),y=Math.min(s.outHeight,(s.inHeight+h-g)/i),C=0;C<c;++C)for(var N=Math.max(0,Math.ceil((u-C)/o)),k=Math.min(s.outWidth,(s.inWidth+u-C)/o),S=0;S<s.outChannels;++S){for(var D=Math.trunc(S/m),E=S%m,T=0,A=0;A<s.batchSize;++A)for(var L=b;L<y;++L)for(var P=g+L*i-h,O=N;O<k;++O){var J=C+O*o-u;T+=p.get(A,P,J,D)*v.get(A,L,O,S)}d.set(T,g,C,D,E)}return d.toTensor()},t.prototype.tile=function(r,n){return rr(r,"tile"),SG(this.bufferSync(r),n)},t.prototype.pad=function(r,n,s){rr(r,"pad");var i=n.map(function(m,p){return m[0]+r.shape[p]+m[1]}),o=n.map(function(m){return m[0]}),l=this.bufferSync(r),c=mn(i,r.dtype);s!==0&&c.values.fill(s);for(var d=0;d<r.size;d++){var u=l.indexToLoc(d),h=u.map(function(m,p){return m+o[p]});c.set.apply(c,[l.get.apply(l,u)].concat(h))}return c.toTensor()},t.prototype.transpose=function(r,n){rr(r,"transpose");for(var s=new Array(r.rank),i=0;i<s.length;i++)s[i]=r.shape[n[i]];var o=this.readSync(r.dataId),l=mn(s,r.dtype),c=this.bufferSync(r);for(i=0;i<r.size;++i){for(var d=c.indexToLoc(i),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[n[h]];var m=l.locToIndex(u);l.values[m]=o[i]}return l.toTensor()},t.prototype.gather=function(r,n,s){rr([r,n],"gather");var i=r.shape.slice(),o=this.readSync(n.dataId);i[s]=o.length;for(var l=mn(i,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d),h=u.slice();h[s]=o[u[s]];var m=c.locToIndex(h);l.values[d]=c.values[m]}return l.toTensor()},t.prototype.batchToSpaceND=function(r,n,s){rr([r],"batchToSpaceND");var i=n.reduce(function(h,m){return h*m}),o=r2(r.shape,n,i),l=n2(o.length,n.length),c=a2(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){rr([r],"spaceToBatchND");var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=r2(c.shape,n,i,!1),u=n2(d.length,n.length,!1),h=a2(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.pool=function(r,n,s){rr(r,"pool");for(var i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(r.dataId),g=mn(n.outShape,r.dtype),b=g.values,y=n.outShape[1]*n.outShape[2]*n.outShape[3],C=n.outShape[2]*n.outShape[3],N=n.outShape[3],k=0;k<n.batchSize;++k)for(var S=k*y,D=k*r.strides[0],E=0;E<n.inChannels;++E)for(var T=0;T<n.outHeight;++T)for(var A=T*i-h,L=Math.max(0,A),P=Math.min(n.inHeight,d+A),O=S+T*C,J=0;J<n.outWidth;++J){for(var W=J*o-m,re=Math.max(0,W),U=Math.min(n.inWidth,u+W),Q=p,B=0,te=0,X=L;X<P;X+=l){for(var ce=D+X*r.strides[1],M=re;M<U;M+=c){var q=v[ce+M*r.strides[2]+E];s==="max"&&q>Q?Q=q:s==="avg"&&(B+=q,te++)}if(isNaN(Q))break}b[O+J*N+E]=s==="avg"?B/te:Q}return g.toTensor()},t.prototype.maxPool=function(r,n){return this.pool(r,n,"max")},t.prototype.maxPoolPositions=function(r,n){for(var s=mn(n.outShape,"int32"),i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=this.bufferSync(r),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var b=0;b<n.outHeight;++b){for(var y=b*i-h,C=y;C<0;)C+=l;for(var N=Math.min(n.inHeight,d+y),k=0;k<n.outWidth;++k){for(var S=k*o-m,D=S;D<0;)D+=c;for(var E=Math.min(n.inWidth,u+S),T=Number.NEGATIVE_INFINITY,A=-1,L=C;L<N;L+=l)for(var P=L-y,O=D;O<E;O+=c){var J=O-S,W=p.get(v,L,O,g);W>T&&(T=W,A=P*u+J)}s.set(A,v,b,k,g)}}return s.toTensor()},t.prototype.maxPoolBackprop=function(r,n,s,i){rr([n,s],"maxPoolBackprop");for(var o=this.maxPoolPositions(n,i),l=i.strideHeight,c=i.strideWidth,d=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,p=m-1-i.padInfo.left,v=h-1-i.padInfo.top,g=mn(n.shape,"float32"),b=this.bufferSync(o),y=this.bufferSync(r),C=0;C<i.batchSize;++C)for(var N=0;N<i.inChannels;++N)for(var k=0;k<i.inHeight;++k)for(var S=0;S<i.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/l;if(!(L<0||L>=i.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/c;if(!(O<0||O>=i.outWidth||Math.floor(O)!==O)){var J=h*m-1-b.get(C,L,O,N)===A*m+P?1:0;J!==0&&(T+=y.get(C,L,O,N)*J)}}}g.set(T,C,k,S,N)}return g.toTensor()},t.prototype.avgPoolBackprop=function(r,n,s){rr([r,n],"avgPoolBackprop");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dilationHeight,u=s.dilationWidth,h=s.effectiveFilterHeight,m=s.effectiveFilterWidth,p=m-1-s.padInfo.left,v=h-1-s.padInfo.top,g=mn(n.shape,"float32"),b=1/(l*c),y=this.bufferSync(r),C=0;C<s.batchSize;++C)for(var N=0;N<s.inChannels;++N)for(var k=0;k<s.inHeight;++k)for(var S=0;S<s.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/i;if(!(L<0||L>=s.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/o;O<0||O>=s.outWidth||Math.floor(O)!==O||(T+=y.get(C,L,O,N))}}g.set(T*b,C,k,S,N)}return g.toTensor()},t.prototype.pool3d=function(r,n,s){rr(r,"pool3d");for(var i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=this.readSync(r.dataId),N=mn(n.outShape,r.dtype),k=N.values,S=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],D=n.outShape[2]*n.outShape[3]*n.outShape[4],E=n.outShape[3]*n.outShape[4],T=n.outShape[4],A=0;A<n.batchSize;++A)for(var L=A*S,P=A*r.strides[0],O=0;O<n.inChannels;++O)for(var J=0;J<n.outDepth;++J){for(var W=J*i-v,re=W;re<0;)re+=c;for(var U=Math.min(n.inDepth,h+W),Q=L+J*D,B=0;B<n.outHeight;++B){for(var te=B*o-g,X=te;X<0;)X+=d;for(var ce=Math.min(n.inHeight,m+te),M=Q+B*E,q=0;q<n.outWidth;++q){for(var z=q*l-b,K=z;K<0;)K+=u;for(var ee=Math.min(n.inWidth,p+z),ne=M+q*T,ae=y,ie=0,G=0,de=re;de<U;de+=c){for(var Y=P+de*r.strides[1],oe=X;oe<ce;oe+=d){for(var Se=Y+oe*r.strides[2],ue=K;ue<ee;ue+=u){var se=C[Se+ue*r.strides[3]+O];if(s==="max"&&se>ae?ae=se:s==="avg"&&(ie+=se,G++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}k[ne+O]=s==="avg"?ie/G:ae}}}return N.toTensor()},t.prototype.avgPool3d=function(r,n){return rr(r,"avgPool3d"),this.pool3d(r,n,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(r,n,s){rr([r,n],"avgPool3dBackprop");for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=s.dilationDepth,m=s.dilationHeight,p=s.dilationWidth,v=s.effectiveFilterDepth,g=s.effectiveFilterHeight,b=s.effectiveFilterWidth,y=v-1-s.padInfo.front,C=b-1-s.padInfo.left,N=g-1-s.padInfo.top,k=mn(n.shape,"float32"),S=1/(c*d*u),D=this.bufferSync(r),E=0;E<s.batchSize;++E)for(var T=0;T<s.inChannels;++T)for(var A=0;A<s.inDepth;++A)for(var L=0;L<s.inHeight;++L)for(var P=0;P<s.inWidth;++P){for(var O=A-y,J=L-N,W=P-C,re=0,U=0;U<v;U+=h){var Q=(O+U)/i;if(!(Q<0||Q>=s.outDepth||Math.floor(Q)!==Q))for(var B=0;B<g;B+=m){var te=(J+B)/o;if(!(te<0||te>=s.outHeight||Math.floor(te)!==te))for(var X=0;X<b;X+=p){var ce=(W+X)/l;ce<0||ce>=s.outWidth||Math.floor(ce)!==ce||(re+=D.get(E,Q,te,ce,T))}}}k.set(re*S,E,A,L,P,T)}return k.toTensor()},t.prototype.maxPool3d=function(r,n){return rr(r,"maxPool3d"),this.pool3d(r,n,"max").toFloat()},t.prototype.maxPool3dPositions=function(r,n){for(var s=mn(n.outShape,"int32"),i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=this.bufferSync(r),C=0;C<n.batchSize;++C)for(var N=0;N<n.inChannels;++N)for(var k=0;k<n.outDepth;++k){for(var S=k*i-v,D=S;D<0;)D+=c;for(var E=Math.min(n.inDepth,h+S),T=0;T<n.outHeight;++T){for(var A=T*o-g,L=A;L<0;)L+=d;for(var P=Math.min(n.inHeight,m+A),O=0;O<n.outWidth;++O){for(var J=O*l-b,W=J;W<0;)W+=u;for(var re=Math.min(n.inWidth,p+J),U=Number.NEGATIVE_INFINITY,Q=-1,B=D;B<E;B+=c)for(var te=B-S,X=L;X<P;X+=d)for(var ce=X-A,M=W;M<re;M+=u){var q=M-J,z=y.get(C,B,X,M,N);z>=U&&(U=z,Q=te*m*p+ce*m+q)}s.set(Q,C,k,T,O,N)}}}return s.toTensor()},t.prototype.maxPool3dBackprop=function(r,n,s,i){rr([n,s],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(n,i),l=i.strideDepth,c=i.strideHeight,d=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,m=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,g=i.effectiveFilterWidth,b=p-1-i.padInfo.front,y=g-1-i.padInfo.left,C=v-1-i.padInfo.top,N=mn(n.shape,"float32"),k=this.bufferSync(o),S=this.bufferSync(r),D=0;D<i.batchSize;++D)for(var E=0;E<i.inChannels;++E)for(var T=0;T<i.inDepth;++T)for(var A=0;A<i.inHeight;++A)for(var L=0;L<i.inWidth;++L){for(var P=T-b,O=A-C,J=L-y,W=0,re=0;re<p;re+=u){var U=(P+re)/l;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var Q=0;Q<v;Q+=h){var B=(O+Q)/c;if(!(B<0||B>=i.outHeight||Math.floor(B)!==B))for(var te=0;te<g;te+=m){var X=(J+te)/d;if(!(X<0||X>=i.outWidth||Math.floor(X)!==X)){var ce=p*v*g-1-k.get(D,U,B,X,E)===re*v*g+Q*g+te?1:0;ce!==0&&(W+=S.get(D,U,B,X,E)*ce)}}}}N.set(W,D,T,A,L,E)}return N.toTensor()},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.reshape=function(r,n){return KD(r,n)},t.prototype.avgPool=function(r,n){return rr(r,"avgPool"),this.pool(r,n,"avg").toFloat()},t.prototype.resizeBilinear=function(r,n,s,i){rr(r,"resizeBilinear");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(Mr([l,n,s,u])),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=0,b=p[0]/v[0],y=p[1]/v[1],C=0;C<l;C++)for(var N=0;N<n;N++)for(var k=b*N,S=Math.floor(k),D=k-S,E=Math.min(c-1,Math.ceil(k)),T=C*r.strides[0]+S*r.strides[1],A=C*r.strides[0]+E*r.strides[1],L=0;L<s;L++)for(var P=y*L,O=Math.floor(P),J=P-O,W=Math.min(d-1,Math.ceil(P)),re=T+O*r.strides[2],U=A+O*r.strides[2],Q=T+W*r.strides[2],B=A+W*r.strides[2],te=0;te<u;te++){var X=h[re+te],ce=h[U+te],M=X+(h[Q+te]-X)*J,q=M+(ce+(h[B+te]-ce)*J-M)*D;m[g++]=q}return Ki(m,[l,n,s,u])},t.prototype.resizeBilinearBackprop=function(r,n,s){rr([r,n],"resizeBilinearBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=[s&&h>1?l-1:l,s&&m>1?c-1:c],g=[s&&h>1?h-1:h,s&&m>1?m-1:m],b=v[0]/g[0],y=v[1]/g[1],C=this.readSync(r.dataId),N=0,k=0;k<o;k++)for(var S=k*n.strides[0],D=0;D<h;D++)for(var E=D*b,T=Math.floor(E),A=Math.min(Math.ceil(E),l-1),L=S+T*n.strides[1],P=S+A*n.strides[1],O=E-T,J=1-O,W=0;W<m;W++)for(var re=W*y,U=Math.floor(re),Q=Math.min(Math.ceil(re),c-1),B=re-U,te=1-B,X=L+U*n.strides[2],ce=L+Q*n.strides[2],M=P+U*n.strides[2],q=P+Q*n.strides[2],z=J*te,K=J*B,ee=O*te,ne=O*B,ae=0;ae<d;ae++){var ie=C[N++];p[X+ae]+=ie*z,p[ce+ae]+=ie*K,p[M+ae]+=ie*ee,p[q+ae]+=ie*ne}return ol(p,[o,c,l,d],n.dtype)},t.prototype.resizeNearestNeighbor=function(r,n,s,i){rr(r,"resizeNearestNeighbor");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(l*n*s*u),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=p[0]/v[0],b=p[1]/v[1],y=0,C=0;C<l;C++)for(var N=C*r.strides[0],k=0;k<n;k++)for(var S=g*k,D=N+Math.min(c-1,i?Math.round(S):Math.floor(S))*r.strides[1],E=0;E<s;E++)for(var T=b*E,A=D+Math.min(d-1,i?Math.round(T):Math.floor(T))*r.strides[2],L=0;L<u;L++){var P=h[A+L];m[y++]=P}return Ki(m,[l,n,s,u],r.dtype)},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){rr([r,n],"resizeNearestNeighborBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=this.readSync(r.dataId),g=[s&&h>1?l-1:l,s&&m>1?c-1:c],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],y=g[0]/b[0],C=g[1]/b[1],N=1/y,k=1/C,S=2*Math.ceil(N)+2,D=2*Math.ceil(k)+2,E=0;E<o;E++)for(var T=E*n.strides[0],A=0;A<l;A++)for(var L=T+A*n.strides[1],P=Math.floor(A*N),O=Math.floor(P-S/2),J=0;J<c;J++)for(var W=L+J*n.strides[2],re=Math.floor(J*k),U=Math.floor(re-D/2),Q=0;Q<d;Q++){for(var B=0,te=0;te<S;te++){var X=te+O;if(!(X<0||X>=h)){var ce=T+X*r.strides[1],M=X*y;if(A===Math.min(l-1,s?Math.round(M):Math.floor(M)))for(var q=0;q<D;q++){var z=q+U;if(!(z<0||z>=m)){var K=ce+z*r.strides[2],ee=z*C;J===Math.min(c-1,s?Math.round(ee):Math.floor(ee))&&(B+=v[K+Q])}}}}p[W+Q]=B}return ol(p,n.shape,n.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){rr([r,n,s,o,l],"batchNorm");for(var c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=this.readSync(s.dataId),h=o?this.readSync(o.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),p=new Float32Array(c.length),v=m.length,g=h.length,b=u.length,y=d.length,C=0,N=0,k=0,S=0,D=0;D<c.length;++D)p[D]=m[C++]+(c[D]-d[N++])*h[k++]/Math.sqrt(u[S++]+i),C>=v&&(C=0),N>=y&&(N=0),k>=g&&(k=0),S>=b&&(S=0);return ol(p,r.shape)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){rr(r,"localResponseNormalization4D");var l=r.shape[3],c=l-1,d=this.readSync(r.dataId),u=r.size,h=new Float32Array(u);function m(b){for(var y=b%l,C=b-y+Math.max(0,y-n),N=b-y+Math.min(y+n,c),k=0;C<=N;C++){var S=d[C];k+=S*S}return k}for(var p=0;p<u;p++){var v=m(p),g=d[p]*Math.pow(s+i*v,-o);h[p]=g}return ol(h,r.shape)},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){rr(r,"LRNGrad");for(var d=r.shape[3],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=this.readSync(s.dataId),p=new Float32Array(r.size),v=r.size,g=0;g<v;g++){for(var b=g%d,y=g-b+Math.max(0,b-i),C=g-b+Math.min(d,b+i+1),N=0,k=y;k<C;k++)N+=Math.pow(h[k],2);for(N=l*N+o,k=y;k<C;k++){var S=-2*l*c*h[k]*m[g]/N;g===k&&(S+=Math.pow(N,-c)),S*=u[g],p[k]+=S}}return ol(p,r.shape)},t.prototype.multinomial=function(r,n,s,i){rr(r,"multinomial");for(var o=n?r:jf(r),l=o.shape[0],c=o.shape[1],d=La([l,s],"int32"),u=this.readSync(d.dataId),h=this.readSync(o.dataId),m=0;m<l;++m){var p=m*c,v=new Float32Array(c-1);v[0]=h[p];for(var g=1;g<v.length;++g)v[g]=v[g-1]+h[p+g];for(var b=OS(i.toString()),y=m*s,C=0;C<s;++C){var N=b();u[y+C]=v.length;for(var k=0;k<v.length;k++)if(N<v[k]){u[y+C]=k;break}}}return d},t.prototype.oneHot=function(r,n,s,i){rr(r,"oneHot");var o=new Float32Array(r.size*n);o.fill(i);for(var l=this.readSync(r.dataId),c=0;c<r.size;++c)l[c]>=0&&l[c]<n&&(o[c*n+l[c]]=s);return Im(o,[r.size,n],"int32")},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return rr(r,"nonMaxSuppression"),NT(this.readSync(r.dataId),this.readSync(n.dataId),s,i,o)},t.prototype.fft=function(r){return this.fftBatch(r,!1)},t.prototype.ifft=function(r){return this.fftBatch(r,!0)},t.prototype.fftBatch=function(r,n){for(var s=r.shape[0],i=r.shape[1],o=mn(r.shape,"float32"),l=mn(r.shape,"float32"),c=Uc(r).as2D(s,i),d=Du(r).as2D(s,i),u=0;u<s;u++)for(var h=c.slice([u,0],[1,i]),m=d.slice([u,0],[1,i]),p=zi(h,m),v=this.readSync(this.fftImpl(p,n).dataId),g=0;g<i;g++){var b=eB(v,g);o.values[u*i+g]=b.real,l.values[u*i+g]=b.imag}return zi(o.toTensor(),l.toTensor()).as2D(s,i)},t.prototype.fftImpl=function(r,n){var s=r.as1D(),i=s.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(s,i,n).as2D(r.shape[0],r.shape[1]);return n&&(o=zi(Uc(o).div(yr(i)),Du(o).div(yr(i)))),o}var l=this.readSync(r.dataId),c=function(d){for(var u=new Float32Array(d.length/2),h=new Float32Array(d.length/2),m=0;m<d.length;m+=2)u[m/2]=d[m],h[m/2]=d[m+1];return{real:u,imag:h}}(this.fourierTransformByMatmul(l,i,n));return zi(c.real,c.imag).as2D(r.shape[0],r.shape[1])},t.prototype.isExponentOf2=function(r){return(r&r-1)==0},t.prototype.fftRadix2=function(r,n,s){if(n===1)return r;var i=this.readSync(r.dataId),o=n/2,l=function(y){for(var C=Math.ceil(y.length/4),N=new Float32Array(C),k=new Float32Array(C),S=0;S<y.length;S+=4)N[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:N,imag:k}}(i),c=zi(l.real,l.imag).as1D(),d=function(y){for(var C=Math.floor(y.length/4),N=new Float32Array(C),k=new Float32Array(C),S=2;S<y.length;S+=4)N[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:N,imag:k}}(i),u=zi(d.real,d.imag).as1D();c=this.fftRadix2(c,o,s),u=this.fftRadix2(u,o,s);var h=function(y,C){for(var N=new Float32Array(y/2),k=new Float32Array(y/2),S=0;S<Math.ceil(y/2);S++){var D=(C?2:-2)*Math.PI*(S/y);N[S]=Math.cos(D),k[S]=Math.sin(D)}return{real:N,imag:k}}(n,s),m=zi(h.real,h.imag).mul(u),p=c.add(m),v=c.sub(m),g=Uc(p).concat(Uc(v)),b=Du(p).concat(Du(v));return zi(g,b).as1D()},t.prototype.fourierTransformByMatmul=function(r,n,s){for(var i=new Float32Array(2*n),o=0;o<n;o++){for(var l=0,c=0,d=0;d<n;d++){var u=_3e(o*d,n,s),h=eB(r,d);l+=h.real*u.real-h.imag*u.imag,c+=h.real*u.imag+h.imag*u.real}s&&(l/=n,c/=n),k3e(i,l,c,o)}return i},t.prototype.depthToSpace=function(r,n,s){ze(s==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s}),ze(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var i=r.shape[0],o=r.shape[1],l=r.shape[2],c=r.shape[3],d=o*n,u=l*n,h=c/(n*n),m=this.readSync(r.dataId),p=new Float32Array(i*d*u*h),v=0,g=0;g<i;++g)for(var b=0;b<d;++b)for(var y=Math.floor(b/n),C=b%n,N=0;N<u;++N)for(var k=Math.floor(N/n),S=(C*n+N%n)*h,D=0;D<h;++D){var E=D+S+c*(k+l*(y+o*g));p[v++]=m[E]}return ol(p,[i,d,u,h])},t.prototype.broadcastedBinaryOp=function(r,n,s,i){var o=Rn(r.shape,n.shape),l=mn(o,s),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,o),h=km(n.shape,o),m=l.values;if(u.length+h.length===0)for(var p=0;p<m.length;++p)m[p]=i(c[p%c.length],d[p%d.length]);else{var v=this.bufferSync(r),g=this.bufferSync(n),b=function(y){var C=l.indexToLoc(y),N=C.slice(-r.rank);u.forEach(function(E){return N[E]=0});var k=v.locToIndex(N),S=C.slice(-n.rank);h.forEach(function(E){return S[E]=0});var D=g.locToIndex(S);m[y]=i(c[k],d[D])};for(p=0;p<m.length;++p)b(p)}return l.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(r,n,s){var i=Rn(r.shape,n.shape),o=mn(i,"float32"),l=mn(i,"float32"),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,i),h=km(n.shape,i),m=o.values,p=l.values;if(u.length+h.length===0)for(var v=0;v<m.length;v++){var g=v%c.length,b=v%d.length,y=s(c[2*g],c[2*g+1],d[2*b],d[2*b+1]);m[v]=y.real,p[v]=y.imag}else{var C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),N=this.bufferSync(this.data.get(n.dataId).complexTensors.real),k=function(S){var D=o.indexToLoc(S),E=D.slice(-r.rank);u.forEach(function(O){return E[O]=0});var T=C.locToIndex(E),A=D.slice(-n.rank);h.forEach(function(O){return A[O]=0});var L=N.locToIndex(A),P=s(c[2*T],c[2*T+1],d[2*L],d[2*L+1]);m[S]=P.real,p[S]=P.imag};for(v=0;v<m.length;v++)k(v)}return this.complex(o.toTensor(),l.toTensor())},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(r,n,s,i,o,l){for(var c=r.shape,d=c[0],u=c[1],h=c[2],m=c[3],p=n.shape[0],v=i[0],g=i[1],b=mn([p,v,g,m],"float32"),y=this.readSync(n.dataId),C=this.readSync(s.dataId),N=this.readSync(r.dataId),k=r.strides,S=b.strides,D=0;D<p;D++){var E=4*D,T=y[E],A=y[E+1],L=y[E+2],P=y[E+3],O=C[D];if(!(O>=d))for(var J=v>1?(L-T)*(u-1)/(v-1):0,W=g>1?(P-A)*(h-1)/(g-1):0,re=0;re<v;re++){var U=v>1?T*(u-1)+re*J:.5*(T+L)*(u-1);if(U<0||U>u-1)for(var Q=0;Q<g;Q++)for(var B=0;B<m;B++){var te=B+Q*S[2]+re*S[1]+D*S[0];b.values[te]=l}else if(o==="bilinear"){var X=Math.floor(U),ce=Math.ceil(U),M=U-X;for(Q=0;Q<g;Q++)if((de=g>1?A*(h-1)+Q*W:.5*(A+P)*(h-1))<0||de>h-1)for(B=0;B<m;B++)te=B+Q*S[2]+re*S[1]+D*S[0],b.values[te]=l;else{var q=Math.floor(de),z=Math.ceil(de),K=de-q;for(B=0;B<m;B++){var ee=N[te=B+q*k[2]+X*k[1]+O*k[0]],ne=N[te=B+z*k[2]+X*k[1]+O*k[0]],ae=N[te=B+q*k[2]+ce*k[1]+O*k[0]],ie=ee+(ne-ee)*K,G=ae+(N[te=B+z*k[2]+ce*k[1]+O*k[0]]-ae)*K;te=B+Q*S[2]+re*S[1]+D*S[0],b.values[te]=ie+(G-ie)*M}}}else for(Q=0;Q<g;++Q){var de;if((de=g>1?A*(h-1)+Q*W:.5*(A+P)*(h-1))<0||de>h-1)for(B=0;B<m;B++)te=B+Q*S[2]+re*S[1]+D*S[0],b.values[te]=l;else{var Y=Math.round(de),oe=Math.round(U);for(B=0;B<m;B++){var Se=B+Y*k[2]+oe*k[1]+O*k[0],ue=B+Q*S[2]+re*S[1]+D*S[0];b.values[ue]=N[Se]}}}}}return b.toTensor()},t.prototype.sparseToDense=function(r,n,s,i){var o=s2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.sliceSize,u=o.strides,h=o.outputSize;return this.scatter(r,n,s,h,d,c,l,u,i,!1)},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3];if(c===0)return Ki([],l,r.dtype);for(var h=new Ey([c,d],r.dtype),m=this.readSync(n.dataId),p=this.readSync(r.dataId),v=0;v<c;v++){for(var g=[],b=0,y=0;y<i;y++){var C=m[v*i+y];b+=C*u[y],g.push(C)}if(b<0||b>=r.size/d)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var N=0;N<d;N++)h.values[v*d+N]=p[b*d+N]}return h.toTensor().reshape(l)},t.prototype.scatterND=function(r,n,s){var i=s2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=yr(0);return this.scatter(r,n,s,u,c,l,o,d,h,!0)},t.prototype.fill=function(r,n,s){var i=Kw(s=s||u1(n),Mr(r));return i.fill(n),ut.makeTensor(i,r,s,this)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){var n=Kw(r.dtype,Mr(r.shape));return this.makeOutput(n,r.shape,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.scatter=function(r,n,s,i,o,l,c,d,u,h){var m=[i/o,o],p=this.readSync(r.dataId),v=this.readSync(n.dataId);if(i===0)return Ki([],s,n.dtype);var g=new Ey(m,n.dtype);g.values.fill(this.readSync(u.dataId)[0]);for(var b=0;b<l;b++){for(var y=[],C=0,N=0;N<c;N++){var k=p[b*c+N];y.push(k),C+=k*d[N]}if(C<0||C>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+s);for(var S=0;S<o;S++)h?g.values[C*o+S]+=v[b*o+S]:g.values[C*o+S]=n.rank===0?v[0]:v[b*o+S]}return g.toTensor().reshape(s)},t}(gG);ut.registerBackend("cpu",function(){return new GIe},1);for(var $E=0,NB=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r;rr(i,"NonMaxSuppressionWithScore");var p=wT(m.data.get(i.dataId).values,m.data.get(o.dataId).values,c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r;rr(n,"square");for(var i=s.data.get(n.dataId).values,o=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];o[l]=c*c}return{dataId:s.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:Ty,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r;rr([s,i],Ty);var l=o.data.get(s.dataId).values,c=o.data.get(i.dataId).values,d=function(m,p,v,g,b,y){var C=Rn(m,p),N=C.length,k=$u(C),S=_y(b,Mr(C)),D=m.length,E=p.length,T=$u(m),A=$u(p),L=km(m,C),P=km(p,C);if(L.length+P.length===0)for(var O=0;O<S.length;++O)S[O]=y(v[O%v.length],g[O%g.length]);else{var J=function(W){var re=nDe(W,N,k),U=re.slice(-D);L.forEach(function(X){return U[X]=0});var Q=H8(U,D,T),B=re.slice(-E);P.forEach(function(X){return B[X]=0});var te=H8(B,E,A);S[W]=y(v[Q],g[te])};for(O=0;O<S.length;++O)J(O)}return[S,C]}(s.shape,i.shape,l,c,s.dtype,function(m,p){var v=m-p;return v*v}),u=d[0],h=d[1];return{dataId:o.write(u,h,s.dtype),shape:h,dtype:s.dtype}}}];$E<NB.length;$E++)WW(NB[$E]);var R0,YIe=function(e){this.variableNames=["A"];var t=wo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+n+".0, "+r+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},KIe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=wo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+n+".0, "+r+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var qE=0,wB=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t.pixels,i=n.numChannels,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,c=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=c[0],u=c[1],h=[u,d],m=[u,d,i];(l||o)&&(R0==null&&(R0=document.createElement("canvas").getContext("2d")),R0.canvas.width=d,R0.canvas.height=u,R0.drawImage(s,0,0,d,u),s=R0.canvas);var p=r.makeTensorInfo(h,"int32");r.texData.get(p.dataId).usage=Yl.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),s);var v=$t().getBool("WEBGL_PACK")?new KIe(m):new YIe(m),g=r.runWebGLProgram(v,[p],"int32");return r.disposeData(p.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs;Zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r,p=wT(m.readSync(i.dataId),m.readSync(o.dataId),c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r,i=new wn(n.shape,"return x * x;");return s.runWebGLProgram(i,[n],n.dtype)}},{kernelName:Ty,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r,l=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh("return (a - b) * (a - b);",s.shape,i.shape):new bs("return (a - b) * (a - b);",s.shape,i.shape);return o.compileAndRun(l,[s,i])}}];qE<wB.length;qE++)WW(wB[qE]);for(var VE=0,SB=[{kernelName:"Square",gradFunc:function(e,t){var r=t[0];return{x:function(){return e.mul(r.toFloat().mul(2))}}}},{kernelName:Ty,gradFunc:function(e,t){var r=t[0],n=t[1],s=yr(2);return{a:function(){return _o(e,_o(s,mi(r,n)))},b:function(){return _o(e,_o(s,mi(n,r)))}}}}];VE<SB.length;VE++)W5e(SB[VE]);var XIe=function(){function e(){}return e.prototype.fetch=function(t,r){return fetch(t,r)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return new TextDecoder(r).decode(t)},e}();$t().get("IS_BROWSER")&&$t().setPlatform("browser",new XIe);var zE,QIe=function(){return require("node-fetch")},JIe=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,r){return $t().global.fetch!=null?$t().global.fetch(t,r):(zE==null&&(zE=QIe()),zE(t,r))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)},e}();$t().get("IS_NODE")&&$t().setPlatform("node",new JIe);var JD={float32:4,int32:4,uint16:2,uint8:1,bool:1},h2=4;function pY(e,t){for(var r={},n=0,s=function(l){var c=l.name,d=l.dtype,u=l.shape,h=Mr(u),m=void 0;if("quantization"in l){var p=l.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=JD[p.dtype],g=e.slice(n,n+h*v),b=p.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(d==="float32")m=Float32Array.from(b,function(D){return D*p.scale+p.min});else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=Int32Array.from(b,function(D){return Math.round(D*p.scale+p.min)})}n+=h*v}else if(d==="string"){var y=Mr(l.shape);m=[];for(var C=0;C<y;C++){var N=new Uint32Array(e.slice(n,n+h2))[0];n+=h2;var k=new Uint8Array(e.slice(n,n+N));m.push(k),n+=N}}else{var S=JD[d];if(g=e.slice(n,n+h*S),d==="float32")m=new Float32Array(g);else if(d==="int32")m=new Int32Array(g);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=new Uint8Array(g)}n+=h*S}r[c]=Ki(m,u,d)},i=0,o=t;i<o.length;i++)s(o[i]);return r}function ZIe(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,r=[];e.forEach(function(i){if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var n=new Uint8Array(t),s=0;return r.forEach(function(i){n.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),n.buffer}var ZD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function CB(e){return ZD?Buffer.byteLength(e):new Blob([e]).size}function qT(e){var t=0;e.forEach(function(s){t+=s.byteLength});var r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(new Uint8Array(s),n),n+=s.byteLength}),r.buffer}function kB(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function g1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:CB(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:CB(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Kl=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,r){return e.getHandlers(t,"load",r)},e.getHandlers=function(t,r,n){var s=[];return(r==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,n);o!==null&&s.push(o)}),s},e}(),fv="://",Pm=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,r){ze(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(fv)&&(t=t.slice(0,t.indexOf(fv))),ze(t.length>0,function(){return"scheme must not be an empty string."});var n=e.getInstance();ze(n.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),n.managers[t]=r},e.getManager=function(t){var r=this.getInstance().managers[t];if(r==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return r},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function TN(e){if(e.indexOf(fv)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Pm.getSchemes().join(","));return{scheme:e.split(fv)[0],path:e.split(fv)[1]}}function _B(e,t,r){return r===void 0&&(r=!1),Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return ze(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),ze((n=Kl.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),ze(n.length<2,function(){return"Copying failed because more than one ("+n.length+") load handlers for source URL "+e+"."}),s=n[0],ze((i=Kl.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),ze(i.length<2,function(){return"Copying failed because more than one ("+n.length+") save handlers for destination URL "+t+"."}),o=i[0],l=TN(e).scheme,c=TN(e).path,d=l===TN(e).scheme,[4,s.load()];case 1:return u=m.sent(),r&&d?[4,Pm.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,o.save(u)];case 4:return h=m.sent(),!r||d?[3,6]:[4,Pm.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var ex="models_store",_m="model_info_store";function xY(){if(!$t().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function e3(e){var t=e.result;t.createObjectStore(ex,{keyPath:"modelPath"}),t.createObjectStore(_m,{keyPath:"modelPath"})}var mv=function(){function e(t){if(this.indexedDB=xY(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,r){var n=this;return new Promise(function(s,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return e3(o)},o.onsuccess=function(){var l=o.result;if(r==null){var c=l.transaction(ex,"readonly"),d=c.objectStore(ex).get(n.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),i(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));s(d.result.modelArtifacts)},d.onerror=function(g){return l.close(),i(d.error)},c.oncomplete=function(){return l.close()}}else{var u,h=g1(r),m=l.transaction(_m,"readwrite"),p=m.objectStore(_m),v=p.put({modelPath:n.modelPath,modelArtifactsInfo:h});v.onsuccess=function(){var g=(u=l.transaction(ex,"readwrite")).objectStore(ex).put({modelPath:n.modelPath,modelArtifacts:r,modelArtifactsInfo:h});g.onsuccess=function(){return s({modelArtifactsInfo:h})},g.onerror=function(b){var y=(p=m.objectStore(_m)).delete(n.modelPath);y.onsuccess=function(){return l.close(),i(g.error)},y.onerror=function(C){return l.close(),i(g.error)}}},v.onerror=function(g){return l.close(),i(v.error)},m.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}}},o.onerror=function(l){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),EB=function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(mv.URL_SCHEME)?(t=e.slice(mv.URL_SCHEME.length),new mv(t)):null;var t};Kl.registerSaveRouter(EB),Kl.registerLoadRouter(EB);var ePe=function(){function e(){this.indexedDB=xY()}return e.prototype.listModels=function(){return Ir(this,void 0,void 0,function(){var t=this;return Pr(this,function(r){return[2,new Promise(function(n,s){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return e3(i)},i.onsuccess=function(){var o=i.result,l=o.transaction(_m,"readonly"),c=l.objectStore(_m).getAll();c.onsuccess=function(){for(var d={},u=0,h=c.result;u<h.length;u++){var m=h[u];d[m.modelPath]=m.modelArtifactsInfo}n(d)},c.onerror=function(d){return o.close(),s(c.error)},l.oncomplete=function(){return o.close()}},i.onerror=function(o){return s(i.error)}})]})})},e.prototype.removeModel=function(t){return Ir(this,void 0,void 0,function(){var r=this;return Pr(this,function(n){var s;return t=(s=t).startsWith(mv.URL_SCHEME)?s.slice(mv.URL_SCHEME.length):s,[2,new Promise(function(i,o){var l=r.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return e3(l)},l.onsuccess=function(){var c,d=l.result,u=d.transaction(_m,"readwrite"),h=u.objectStore(_m),m=h.get(t);m.onsuccess=function(){if(m.result==null)return d.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=h.delete(t),v=function(){var g=(c=d.transaction(ex,"readwrite")).objectStore(ex).delete(t);g.onsuccess=function(){return i(m.result.modelArtifactsInfo)},g.onerror=function(b){return o(m.error)}};p.onsuccess=v,p.onerror=function(g){return v(),d.close(),o(m.error)}},m.onerror=function(p){return d.close(),o(m.error)},u.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return o(l.error)}})]})})},e}();if($t().getBool("IS_BROWSER"))try{Pm.registerManager(mv.URL_SCHEME,new ePe)}catch{}var Lh="/",W0="tensorflowjs_models",vY="info",tPe="model_topology",rPe="weight_specs",nPe="weight_data",aPe="model_metadata";function gY(e){return{info:[W0,e,vY].join(Lh),topology:[W0,e,tPe].join(Lh),weightSpecs:[W0,e,rPe].join(Lh),weightData:[W0,e,nPe].join(Lh),modelMetadata:[W0,e,aPe].join(Lh)}}function sPe(e){var t=e.split(Lh);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Lh)}var pv=function(){function e(t){if(!$t().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=gY(this.modelPath)}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s;return Pr(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),s=g1(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(o){if(ZD)return Buffer.from(o).toString("base64");for(var l=new Uint8Array(o),c="",d=0,u=l.length;d<u;d++)c+=String.fromCharCode(l[d]);return btoa(c)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:s}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+s.modelTopologyBytes+", weightSpecsBytes="+s.weightSpecsBytes+", weightDataBytes="+s.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o,l;return Pr(this,function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},(n=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=n,(s=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=s,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,r.userDefinedMetadata=o.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return r.weightData=function(d){if(ZD){var u=Buffer.from(d,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var h=atob(d),m=new Uint8Array(h.length),p=0;p<h.length;++p)m.set([h.charCodeAt(p)],p);return m.buffer}(l),[2,r]})})},e.URL_SCHEME="localstorage://",e}(),DB=function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pv.URL_SCHEME)?(t=e.slice(pv.URL_SCHEME.length),new pv(t)):null;var t};Kl.registerSaveRouter(DB),Kl.registerLoadRouter(DB);var iPe=function(){function e(){ze($t().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ze(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o;return Pr(this,function(l){for(t={},r=W0+Lh,n=Lh+vY,s=0;s<this.LS.length;++s)(i=this.LS.key(s)).startsWith(r)&&i.endsWith(n)&&(o=sPe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){var i;if(t=(i=t).startsWith(pv.URL_SCHEME)?i.slice(pv.URL_SCHEME.length):i,r=gY(t),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(r.info)),this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),[2,n]})})},e}();if($t().getBool("IS_BROWSER"))try{Pm.registerManager(pv.URL_SCHEME,new iPe)}catch{}var oPe="model",lPe=".json",cPe=".weights.bin";function AB(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var HE=function(){function e(t){if(!$t().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=oPe),this.modelTopologyFileName=t+lPe,this.weightDataFileName=t+cPe}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l;return Pr(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,AB(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),t.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=r,[4,AB(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:g1(t)}]}})})},e.URL_SCHEME="downloads://",e}(),dPe=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n=this;return Pr(this,function(s){return t=this.files[0],r=this.files.slice(1),[2,new Promise(function(i,o){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),u=d.modelTopology;if(u!=null){r.length===0&&i({modelTopology:u});var h=d.weightsManifest;if(h!=null){var m;try{m=n.checkManifestAndWeightFiles(h,r)}catch(b){return void o(b)}var p=[],v=[],g=[];h.forEach(function(b){b.paths.forEach(function(y){v.push(y),g.push(null)}),p.push.apply(p,b.weights)}),h.forEach(function(b){b.paths.forEach(function(y){var C=new FileReader;C.onload=function(N){var k=N.target.result,S=v.indexOf(y);g[S]=k,g.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:qT(g),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},C.onerror=function(N){return o("Failed to weights data from file of path '"+y+"'.")},C.readAsArrayBuffer(m[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},l.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,r){for(var n=[],s=r.map(function(c){return kB(c.name)}),i={},o=0,l=t;o<l.length;o++)l[o].paths.forEach(function(c){var d=kB(c);if(n.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(n.push(d),s.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");i[c]=r[s.indexOf(d)]});if(n.length!==r.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+r.length+").");return i},e}();function TB(e,t,r,n){(function(i){ze(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){ze(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),ze(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),ze(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(r=r??0,n=n??1);var s=0;return Promise.all(e.map(function(i){return i.then(function(o){var l=r+ ++s/e.length*(n-r);return t(l),o}),i}))}function bY(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u;return Pr(this,function(h){switch(h.label){case 0:return t==null&&(t={}),r=t.fetchFunc==null?$t().platform.fetch:t.fetchFunc,n=e.map(function(m){return r(m,t.requestInit,{isBinary:!0})}),s=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(n)];case 1:return o=h.sent(),[3,4];case 2:return[4,TB(n,t.onProgress,s,i)];case 3:o=h.sent(),h.label=4;case 4:return l=o.map(function(m){return m.arrayBuffer()}),c=.5,d=1,t.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return u=h.sent(),[3,8];case 6:return[4,TB(l,t.onProgress,c,d)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function IB(e){var t=this;return function(r,n,s){return n===void 0&&(n=""),Ir(t,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v;return Pr(this,function(g){switch(g.label){case 0:if(i=r.map(function(){return!1}),o={},l=s!=null?s.map(function(){return!1}):[],c=[],r.forEach(function(b,y){var C=0;b.weights.forEach(function(N){var k="quantization"in N?N.quantization.dtype:N.dtype,S=JD[k]*Mr(N.shape),D=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:N,groupOffset:C,sizeBytes:S})};s!=null?s.forEach(function(E,T){E===N.name&&(D(),l[T]=!0)}):D(),c.push(N.name),C+=S})}),!l.every(function(b){return b}))throw d=s.filter(function(b,y){return!l[y]}),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return u=i.reduce(function(b,y,C){return y&&b.push(C),b},[]),h=[],u.forEach(function(b){r[b].paths.forEach(function(y){var C=n+(n.endsWith("/")?"":"/")+y;h.push(C)})}),[4,e(h)];case 1:return m=g.sent(),p={},v=0,u.forEach(function(b){for(var y=r[b].paths.length,C=0,N=0;N<y;N++)C+=m[v+N].byteLength;for(var k=new ArrayBuffer(C),S=new Uint8Array(k),D=0,E=0;E<y;E++){var T=new Uint8Array(m[v+E]);S.set(T,D),D+=T.byteLength}o[b].forEach(function(A){var L=pY(k.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var P in L)p[P]=L[P]}),v+=y}),[2,p]}})})}}Kl.registerSaveRouter(function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(HE.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new HE(t)}(e.slice(HE.URL_SCHEME.length)):null});var yY=function(){function e(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,r.fetchFunc!=null?(ze(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=$t().platform.fetch,ze(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&ze(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i;return Pr(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n},r.body.append("model.json",new Blob([JSON.stringify(s)],{type:"application/json"}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:g1(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return r=p.sent(),[3,5];case 4:throw p.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(s=r.modelTopology,i=r.weightsManifest,o=r.generatedBy,l=r.convertedBy,c=r.format,d=r.userDefinedMetadata,s==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=p.sent(),u=m[0],h=m[1],p.label=7;case 7:return[2,{modelTopology:s,weightSpecs:u,weightData:h,userDefinedMetadata:d,generatedBy:o,convertedBy:l,format:c}]}})})},e.prototype.loadWeights=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:for(r=Array.isArray(this.path)?this.path[1]:this.path,n=function(v){var g=v.lastIndexOf("/"),b=v.lastIndexOf("?"),y=v.substring(0,g),C=b>g?v.substring(b):"";return[y+"/",C]}(r),s=n[0],i=n[1],o=this.weightPathPrefix||s,l=[],c=0,d=t;c<d.length;c++)u=d[c],l.push.apply(l,u.weights);return h=[],t.forEach(function(v){v.paths.forEach(function(g){h.push(o+g+i)})}),[4,bY(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=p.sent(),[2,[l,qT(m)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function t3(e){return e.match(yY.URL_SCHEME_REGEX)!=null}var PB=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(r){return t3(r)}):t3(e))?r3(e,{onProgress:t}):null};function r3(e,t){return new yY(e,t)}Kl.registerSaveRouter(PB),Kl.registerLoadRouter(PB);var WE=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(t){return[2,this.modelArtifacts]})})},e}(),uPe=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,this.saveHandler(t)]})})},e}(),jY=Object.freeze({browserFiles:function(e){return new dPe(e)},browserHTTPRequest:function(e,t){return r3(e,t)},concatenateArrayBuffers:qT,decodeWeights:pY,encodeWeights:function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Pr(this,function(c){switch(c.label){case 0:for(r=[],n=[],s=Array.isArray(e)?e.map(function(d){return d.name}):Object.keys(e),i=function(d){var u=s[d],h=Array.isArray(e)?e[d].tensor:e[u];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+h.dtype);var m={name:u,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var p=new Promise(function(v){return Ir(l,void 0,void 0,function(){var g,b,y,C,N,k,S;return Pr(this,function(D){switch(D.label){case 0:return[4,h.bytes()];case 1:for(g=D.sent(),b=g.reduce(function(E,T){return E+T.length},0)+h2*g.length,y=new Uint8Array(b),C=0,N=0;N<g.length;N++)k=g[N],S=new Uint8Array(new Uint32Array([k.length]).buffer),y.set(S,C),C+=h2,y.set(k,C),C+=k.length;return v(y),[2]}})})});n.push(p)}else n.push(h.data());t!=null&&(m.group=t),r.push(m)},o=0;o<s.length;++o)i(o);return[4,Promise.all(n)];case 1:return[2,{data:ZIe(c.sent()),specs:r}]}})})},fromMemory:function(e,t,r,n){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new WE(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:n}))},getLoadHandlers:function(e,t){return Kl.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:g1,getSaveHandlers:function(e){return Kl.getSaveHandlers(e)},http:r3,isHTTPScheme:t3,loadWeights:function(e,t,r,n){return t===void 0&&(t=""),Ir(this,void 0,void 0,function(){return Pr(this,function(s){return[2,IB(function(i){return bY(i,{requestInit:n})})(e,t,r)]})})},registerLoadRouter:function(e){return Kl.registerLoadRouter(e)},registerSaveRouter:function(e){return Kl.registerSaveRouter(e)},weightsLoaderFactory:IB,withSaveHandler:function(e){return new uPe(e)},copyModel:function(e,t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,_B(e,t,!1)]})})},listModels:function(){return Ir(this,void 0,void 0,function(){var e,t,r,n,s,i,o;return Pr(this,function(l){switch(l.label){case 0:e=Pm.getSchemes(),t={},r=0,n=e,l.label=1;case 1:return r<n.length?(s=n[r],[4,Pm.getManager(s).listModels()]):[3,4];case 2:for(o in i=l.sent())t[s+fv+o]=i[o];l.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,_B(e,t,!0)]})})},removeModel:function(e){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){return t=TN(e),[2,Pm.getManager(t.scheme).removeModel(t.path)]})})}}),F0;et({confusionMatrix_:function(e,t,r){var n=Me(e,"labels","confusionMatrix"),s=Me(t,"predictions","confusionMatrix");ze(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, but got "+r}),ze(n.rank===1,function(){return"Expected the rank of labels to be 1, but got "+n.rank}),ze(s.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),ze(n.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+n.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),ze(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+r});var i=GD(n.asType("int32"),r),o=GD(s.asType("int32"),r);return i.transpose().matMul(o).asType("int32")}});var hPe=et({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,n=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(HW("FromPixels",ut.backendName)!=null)return ut.runKernel("FromPixels",{pixels:e},{numChannels:t});var l,c,d=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=d[0],h=d[1];if(o?l=e.getContext("2d").getImageData(0,0,u,h).data:n||r?l=e.data:(i||s)&&(F0==null&&(F0=document.createElement("canvas").getContext("2d")),F0.canvas.width=u,F0.canvas.height=h,F0.drawImage(e,0,0,u,h),l=F0.getImageData(0,0,u,h).data),t===4)c=new Int32Array(l);else{var m=u*h;c=new Int32Array(m*t);for(var p=0;p<m;p++)for(var v=0;v<t;++v)c[p*t+v]=l[4*p+v]}return vT(c,[h,u,t],"int32")}}),VT=Object.freeze({toPixels:function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Pr(this,function(A){switch(A.label){case 0:if(r=Me(e,"img","toPixels"),e instanceof os||(r=r.toInt()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(n=r.shape.slice(0,2),s=n[0],i=n[1],(o=r.rank===2?1:r.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,r.data()];case 1:return l=A.sent(),c=r.min(),d=r.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(u=A.sent(),h=u[0],m=u[1],p=h[0],v=m[0],c.dispose(),d.dispose(),r.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(g=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*s*4),y=0;y<s*i;++y)C=void 0,N=void 0,k=void 0,S=void 0,o===1?(C=l[y]*g,N=l[y]*g,k=l[y]*g,S=255):o===3?(C=l[3*y]*g,N=l[3*y+1]*g,k=l[3*y+2]*g,S=255):o===4&&(C=l[4*y]*g,N=l[4*y+1]*g,k=l[4*y+2]*g,S=l[4*y+3]*g),b[(D=4*y)+0]=Math.round(C),b[D+1]=Math.round(N),b[D+2]=Math.round(k),b[D+3]=Math.round(S);return t!=null&&(t.width=i,t.height=s,E=t.getContext("2d"),T=new ImageData(b,i,s),E.putImageData(T,0,0)),r!==e&&r.dispose(),[2,b]}})})},fromPixels:hPe}),fPe=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,r){return new t(r)},e}(),mPe=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Gx(e){ze(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),ze(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),ze(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),mPe.register(e)}var Yx=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ud(t,e),t.prototype.minimize=function(r,n,s){n===void 0&&(n=!1);var i=this.computeGradients(r,s),o=i.value,l=i.grads;if(s!=null){var c=s.map(function(d){return{name:d.name,tensor:l[d.name]}});this.applyGradients(c)}else this.applyGradients(l);return fl(l),n?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(r,n){return S3e(r,n)},t.prototype.dispose=function(){this.iterations_!=null&&fl(this.iterations_)},t.prototype.saveIterations=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:yr(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return n=this,[4,r[0].tensor.data()];case 1:return n.iterations_=s.sent()[0],[2,r.slice(1)]}})})},t}(fPe);Object.defineProperty(Yx,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var pPe=function(e){function t(r,n,s){s===void 0&&(s=null);var i=e.call(this)||this;return i.learningRate=r,i.rho=n,i.epsilon=s,i.accumulatedGrads=[],i.accumulatedUpdates=[],s==null&&(i.epsilon=ut.backend.epsilon()),i}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ut.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accum_grad",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedUpdates[i]==null&&(n.accumulatedUpdates[i]={originalName:s+"/accum_var",variable:kr(function(){return qn(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable,d=n.accumulatedUpdates[i].variable;kr(function(){var u=c.mul(n.rho).add(l.square().mul(1-n.rho)),h=d.add(n.epsilon).sqrt().div(c.add(n.epsilon).sqrt()).mul(l),m=d.mul(n.rho).add(h.square().mul(1-n.rho));c.assign(u),d.assign(m);var p=h.mul(-n.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(fl(this.accumulatedGrads.map(function(r){return r.variable})),fl(this.accumulatedUpdates.map(function(r){return r.variable})))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=r.length/2,this.accumulatedGrads=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.rho,n.epsilon)},t.className="Adadelta",t}(Yx);Gx(pPe);var xPe=function(e){function t(r,n){n===void 0&&(n=.1);var s=e.call(this)||this;return s.learningRate=r,s.initialAccumulatorValue=n,s.accumulatedGrads=[],s}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ut.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accumulator",variable:kr(function(){return qu(o.shape,n.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable;kr(function(){var d=c.add(l.square());c.assign(d);var u=l.div(d.add(ut.backend.epsilon()).sqrt()).mul(-n.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&fl(this.accumulatedGrads.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(r,n){return new r(n.learningRate,n.initialAccumulatorValue)},t.className="Adagrad",t}(Yx);Gx(xPe);var vPe=function(e){function t(r,n,s,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=r,o.beta1=n,o.beta2=s,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],kr(function(){o.accBeta1=yr(n).variable(),o.accBeta2=yr(s).variable()}),i==null&&(o.epsilon=ut.backend.epsilon()),o}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);kr(function(){var i=mi(1,n.accBeta1),o=mi(1,n.accBeta2);s.forEach(function(l,c){var d=ut.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:kr(function(){return qn(d).variable(!1)})}),n.accumulatedSecondMoment[c]==null&&(n.accumulatedSecondMoment[c]={originalName:l+"/v",variable:kr(function(){return qn(d).variable(!1)})});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedSecondMoment[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2).add(u.square().mul(1-n.beta2)),g=p.div(i),b=v.div(o);h.assign(p),m.assign(v);var y=g.div(b.sqrt().add(n.epsilon)).mul(-n.learningRate).add(d);d.assign(y)}}),n.accBeta1.assign(n.accBeta1.mul(n.beta1)),n.accBeta2.assign(n.accBeta2.mul(n.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&fl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&fl(this.accumulatedSecondMoment.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n,s=this;return Pr(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(r)];case 1:return r=i.sent(),kr(function(){s.accBeta1.assign(d2(s.beta1,s.iterations_+1)),s.accBeta2.assign(d2(s.beta2,s.iterations_+1))}),n=r.length/2,this.accumulatedFirstMoment=r.slice(0,n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=r.slice(n,2*n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)},t.className="Adam",t}(Yx);Gx(vPe);var gPe=function(e){function t(r,n,s,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var l=e.call(this)||this;return l.learningRate=r,l.beta1=n,l.beta2=s,l.epsilon=i,l.decay=o,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],kr(function(){l.iteration=yr(0).variable(),l.accBeta1=yr(n).variable()}),i==null&&(l.epsilon=ut.backend.epsilon()),l}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);kr(function(){var i=mi(1,n.accBeta1),o=Cd(-n.learningRate,n.iteration.mul(n.decay).add(1));s.forEach(function(l,c){var d=ut.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:qn(d).variable(!1)}),n.accumulatedWeightedInfNorm[c]==null&&(n.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:qn(d).variable(!1)});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedWeightedInfNorm[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2),g=u.abs(),b=v.maximum(g);h.assign(p),m.assign(b);var y=o.div(i).mul(p.div(b.add(n.epsilon))).add(d);d.assign(y)}}),n.iteration.assign(n.iteration.add(1)),n.accBeta1.assign(n.accBeta1.mul(n.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&fl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&fl(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)},t.className="Adamax",t}(Yx);Gx(gPe);var NY=function(e){function t(r){var n=e.call(this)||this;return n.learningRate=r,n.setLearningRate(r),n}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=Array.isArray(r)?r[i].tensor:r[s];if(o!=null){var l=ut.registeredVariables[s];kr(function(){var c=n.c.mul(o).add(l);l.assign(c)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=LDe(yr(-r))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:if((r=n.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(r,n){return new r(n.learningRate)},t.className="SGD",t}(Yx);Gx(NY);var bPe=function(e){function t(r,n,s){s===void 0&&(s=!1);var i=e.call(this,r)||this;return i.learningRate=r,i.momentum=n,i.useNesterov=s,i.accumulations=[],i.m=yr(i.momentum),i}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ut.registeredVariables[s];n.accumulations[i]==null&&(n.accumulations[i]={originalName:s+"/momentum",variable:kr(function(){return qn(o).variable(!1)})});var l=n.accumulations[i].variable,c=Array.isArray(r)?r[i].tensor:r[s];c!=null&&kr(function(){var d,u=n.m.mul(l).add(c);d=n.useNesterov?n.c.mul(c.add(u.mul(n.m))).add(o):n.c.mul(u).add(o),l.assign(u),o.assign(d)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&fl(this.accumulations.map(function(r){return r.variable}))},t.prototype.setMomentum=function(r){this.momentum=r},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)},t.className="Momentum",t}(NY);Gx(bPe);var yPe=function(e){function t(r,n,s,i,o){n===void 0&&(n=.9),s===void 0&&(s=0),i===void 0&&(i=null),o===void 0&&(o=!1);var l=e.call(this)||this;if(l.learningRate=r,l.decay=n,l.momentum=s,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=o,i==null&&(l.epsilon=ut.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ut.registeredVariables[s];n.accumulatedMeanSquares[i]==null&&(n.accumulatedMeanSquares[i]={originalName:s+"/rms",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedMoments[i]==null&&(n.accumulatedMoments[i]={originalName:s+"/momentum",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedMeanGrads[i]==null&&n.centered&&(n.accumulatedMeanGrads[i]={originalName:s+"/mg",variable:kr(function(){return qn(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedMeanSquares[i].variable,d=n.accumulatedMoments[i].variable;kr(function(){var u=c.mul(n.decay).add(l.square().mul(1-n.decay));if(n.centered){var h=n.accumulatedMeanGrads[i].variable,m=h.mul(n.decay).add(l.mul(1-n.decay)),p=d.mul(n.momentum).add(l.mul(n.learningRate).div(u.sub(m.square().add(n.epsilon)).sqrt()));c.assign(u),h.assign(m),d.assign(p);var v=o.sub(p);o.assign(v)}else{var g=c.mul(n.decay).add(l.square().mul(1-n.decay));p=d.mul(n.momentum).add(l.mul(n.learningRate).div(g.add(n.epsilon).sqrt())),c.assign(g),d.assign(p),v=o.sub(p),o.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&fl(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&fl(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&fl(this.accumulatedMoments.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&r.push.apply(r,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=this.centered?r.length/3:r.length/2,this.accumulatedMeanSquares=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(2*n,3*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)},t.className="RMSProp",t}(Yx);Gx(yPe);os.prototype.squaredDifference=function(e){return FG(this,e)},Ft=WIe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n3=function(e,t){return n3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},n3(e,t)};function hn(e,t){n3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yo=function(){return yo=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},yo.apply(this,arguments)};function Lr(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(e,[])).next())})}function Br(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Yb(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}var xv=function(){function e(t,r){if(!fx(t)||!fx(r))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:r}));this._width=t,this._height=r}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function qS(e,t){return e instanceof os&&e.shape.length===t}function jPe(e){return qS(e,2)}function VS(e){return qS(e,3)}function Om(e){return qS(e,4)}function NPe(e){return e%1!==0}function OB(e){return e%2===0}function wPe(e,t){t===void 0&&(t=2);var r=Math.pow(10,t);return Math.floor(e*r)/r}function MB(e){return e&&e.width&&e.height}function SPe(e,t){var r=e.width,n=e.height,s=t/Math.max(n,r);return new xv(Math.round(r*s),Math.round(n*s))}function zT(e){return e.reduce(function(t,r){return t.add(r)},new aa(0,0)).div(new aa(e.length,e.length))}function Iy(e,t,r){return Array(e).fill(0).map(function(n,s){return t+s*r})}function fx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function RB(e){return fx(e)&&0<=e&&e<=1}var aa=function(){function e(t,r){this._x=t,this._y=r}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),zm=function(){function e(t,r){r===void 0&&(r=!0);var n=t||{},s=[n.left,n.top,n.right,n.bottom].every(fx),i=[n.x,n.y,n.width,n.height].every(fx);if(!i&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));var o=i?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],l=o[0],c=o[1],d=o[2],u=o[3];e.assertIsValidBox({x:l,y:c,width:d,height:u},"Box.constructor",r),this._x=l,this._y=c,this._width=d,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(fx)},e.assertIsValidBox=function(t,r,n){if(n===void 0&&(n=!1),!e.isRect(t))throw new Error(r+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!n&&(t.width<0||t.height<0))throw new Error(r+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new aa(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new aa(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new aa(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new aa(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.toSquare=function(){var t=this,r=t.x,n=t.y,s=t.width,i=t.height,o=Math.abs(s-i);return s<i&&(r-=o/2,s+=o),i<s&&(n-=o/2,i+=o),new e({x:r,y:n,width:s,height:i})},e.prototype.rescale=function(t){var r=MB(t)?t.width:t,n=MB(t)?t.height:t;return new e({x:this.x*r,y:this.y*n,width:this.width*r,height:this.height*n})},e.prototype.pad=function(t,r){var n=[this.x-t/2,this.y-r/2,this.width+t,this.height+r],s=n[0],i=n[1],o=n[2],l=n[3];return new e({x:s,y:i,width:o,height:l})},e.prototype.clipAtImageBorders=function(t,r){var n=this,s=n.x,i=n.y,o=n.right,l=n.bottom,c=Math.max(s,0),d=Math.max(i,0),u=o-c,h=l-d,m=Math.min(u,t-c),p=Math.min(h,r-d);return new e({x:c,y:d,width:m,height:p}).floor()},e.prototype.shift=function(t,r){var n=this,s=n.width,i=n.height,o=this.x+t,l=this.y+r;return new e({x:o,y:l,width:s,height:i})},e.prototype.padAtBorders=function(t,r){var n=this.width+1,s=this.height+1,i=1,o=1,l=n,c=s,d=this.left,u=this.top,h=this.right,m=this.bottom;return h>r&&(l=-h+r+n,h=r),m>t&&(c=-m+t+s,m=t),d<1&&(c=2-d,d=1),u<1&&(c=2-u,u=1),{dy:o,edy:c,dx:i,edx:l,y:u,ey:m,x:d,ex:h,w:n,h:s}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),zS=function(e){hn(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{left:r,top:n,right:s,bottom:i},o)||this}return t}(zm),wY=function(){function e(t,r,n,s,i){this._imageDims=new xv(i.width,i.height),this._score=t,this._classScore=r,this._className=n,this._box=new zm(s).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new zm(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:r})},e}(),ah=function(e){hn(t,e);function t(r,n,s){return e.call(this,r,r,"",n,s)||this}return t.prototype.forSize=function(r,n){var s=e.prototype.forSize.call(this,r,n),i=s.score,o=s.relativeBox,l=s.imageDims;return new t(i,o,l)},t}(wY);function CPe(e,t,r){r===void 0&&(r=!0);var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),s=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=n*s;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function kPe(e){var t=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),n=t.reduce(function(l,c){return c<l?c:l},1/0),s=r.reduce(function(l,c){return c<l?c:l},1/0),i=t.reduce(function(l,c){return l<c?c:l},0),o=r.reduce(function(l,c){return l<c?c:l},0);return new zS(n,s,i,o)}function Py(e,t,r,n){n===void 0&&(n=!0);for(var s=t.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],o=function(){var l=s.pop();i.push(l);for(var c=s,d=[],u=0;u<c.length;u++){var h=c[u],m=e[l],p=e[h];d.push(CPe(m,p,n))}s=s.filter(function(v,g){return d[g]<=r})};s.length>0;)o();return i}function b1(e,t){return kr(function(){var r=t[0],n=t[1],s=t[2],i=qu(Yb(e.shape.slice(0,3),[1]),r),o=qu(Yb(e.shape.slice(0,3),[1]),n),l=qu(Yb(e.shape.slice(0,3),[1]),s),c=di([i,o,l],3);return mi(e,c)})}function _Pe(e,t){return t===void 0&&(t=!1),kr(function(){var r=e.shape.slice(1),n=r[0],s=r[1];if(n===s)return e;var i=Math.abs(n-s),o=Math.round(i*(t?.5:1)),l=n>s?2:1,c=function(p){var v=e.shape.slice();return v[l]=p,qu(v,0)},d=c(o),u=i-d.shape[l],h=t&&u?c(u):null,m=[h,e,d].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return di(m,l)})}function GE(e){return 1/(1+Math.exp(-e))}var HT=function(e){hn(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{x:r,y:n,width:s,height:i},o)||this}return t}(zm),EPe=.5,DPe=.43,APe=.45,f2=function(){function e(t,r,n){n===void 0&&(n=new aa(0,0));var s=r.width,i=r.height;this._imgDims=new xv(s,i),this._shift=n,this._positions=t.map(function(o){return o.mul(new aa(s,i)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new aa(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(r){return r.sub(t._shift).div(new aa(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new this.constructor(this.relativePositions,{width:t,height:r})},e.prototype.shiftBy=function(t,r){return new this.constructor(this.relativePositions,this._imgDims,new aa(t,r))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,r){if(r===void 0&&(r={}),t){var n=t instanceof ah?t.box.floor():new zm(t);return this.shiftBy(n.x,n.y).align(null,r)}var s=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},r),i=s.useDlibAlignment,o=s.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[0],n=t[1],s=t[2],i=function(h){return s.sub(h).magnitude()},o=(i(r)+i(n))/2,l=Math.floor(o/APe),c=zT(t),d=Math.floor(Math.max(0,c.x-EPe*l)),u=Math.floor(Math.max(0,c.y-DPe*l));return new HT(d,u,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var r=kPe(this.positions);return r.pad(r.width*t,r.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),TPe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var r=this.positions;return[r[0],r[1],zT([r[3],r[4]])]},t}(f2),IPe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(zT)},t}(f2),FB=function(){function e(t,r){this._label=t,this._distance=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+wPe(this.distance)+")":"")},e}(),LB=function(e){hn(t,e);function t(r,n){var s=e.call(this,r)||this;return s._label=n,s}return t.assertIsValidLabeledBox=function(r,n){if(zm.assertIsValidBox(r,n),!fx(r.label))throw new Error(n+" - expected property label ("+r.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(zm),ev=function(){function e(t,r){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(r)||r.some(function(n){return!(n instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var r=t.descriptors.map(function(n){return new Float32Array(n)});return new e(t.label,r)},e}();(function(e){hn(t,e);function t(r,n,s,i){var o=e.call(this,r,n)||this;return o._score=s,o._classScore=i,o}return t.assertIsValidPredictedBox=function(r,n){if(LB.assertIsValidLabeledBox(r,n),!RB(r.score)||!RB(r.classScore))throw new Error(n+" - expected properties score ("+r.score+") and ("+r.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(LB);function PPe(e){return e.detection instanceof ah}function WT(e,t){var r={detection:t};return Object.assign({},e,r)}function SY(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function CY(e){var t="";if(!e)try{e=require("fs")}catch(n){t=n.toString()}var r=e?function(n){return new Promise(function(s,i){e.readFile(n,function(o,l){return o?i(o):s(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function kY(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},n=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},s=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=CY();return yo({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:r,createImageElement:n,fetch:s},i)}function _Y(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function EY(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var li;function OPe(){if(!li)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return li}function a3(e){li=e}function GT(){_Y()&&a3(SY()),EY()&&a3(kY())}function MPe(e){if(li||GT(),!li)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,r=t===void 0?li.Canvas:t,n=e.Image,s=n===void 0?li.Image:n;li.Canvas=r,li.Image=s,li.createCanvasElement=e.createCanvasElement||function(){return new r},li.createImageElement=e.createImageElement||function(){return new s},li.ImageData=e.ImageData||li.ImageData,li.Video=e.Video||li.Video,li.fetch=e.fetch||li.fetch,li.readFile=e.readFile||li.readFile}var Ao={getEnv:OPe,setEnv:a3,initialize:GT,createBrowserEnv:SY,createFileSystem:CY,createNodejsEnv:kY,monkeyPatch:MPe,isBrowser:_Y,isNodejs:EY};GT();function DY(e){return!Ao.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Ax(e){var t=Ao.getEnv(),r=t.Canvas,n=t.CanvasRenderingContext2D;if(e instanceof n)return e;var s=DY(e);if(!(s instanceof r))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=s.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var BB;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(BB||(BB={}));function AY(e){var t=Ao.getEnv(),r=t.Image,n=t.Video;return e instanceof r&&e.complete||e instanceof n&&e.readyState>=3}function RPe(e){return new Promise(function(t,r){if(e instanceof Ao.getEnv().Canvas||AY(e))return t();function n(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),t(i))}function s(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),r(i))}e.addEventListener("load",n),e.addEventListener("error",s)})}function TY(e){var t=Ao.getEnv(),r=t.Image,n=t.Video;return e instanceof r?new xv(e.naturalWidth,e.naturalHeight):e instanceof n?new xv(e.videoWidth,e.videoHeight):new xv(e.width,e.height)}function HS(e){var t=e.width,r=e.height,n=Ao.getEnv().createCanvasElement,s=n();return s.width=t,s.height=r,s}function YT(e,t){var r=Ao.getEnv().ImageData;if(!(e instanceof r)&&!AY(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var n=TY(e),s=n.width,i=n.height,o=HS({width:s,height:i});return e instanceof r?Ax(o).putImageData(e,0,0):Ax(o).drawImage(e,0,0,s,i),o}function FPe(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l;return Br(this,function(c){switch(c.label){case 0:return r=Ao.getEnv().createCanvasElement(),n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=kr(function(){return e.as3D(s,i,o).toInt()}),[4,VT.toPixels(l,r)];case 1:return c.sent(),l.dispose(),[2,r]}})})}function UB(e){var t=Ao.getEnv(),r=t.Image,n=t.Canvas,s=t.Video;return e instanceof r||e instanceof n||e instanceof s}function LPe(e,t,r){r===void 0&&(r=!1);var n=Ao.getEnv(),s=n.Image,i=n.Canvas;if(!(e instanceof s||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=TY(e),l=t/Math.max(o.height,o.width),c=l*o.width,d=l*o.height,u=HS({width:t,height:t}),h=e instanceof i?e:YT(e),m=Math.abs(c-d)/2,p=r&&c<d?m:0,v=r&&d<c?m:0;return Ax(u).drawImage(h,p,v,c,d),u}var m2=function(){function e(t,r){var n=this;if(r===void 0&&(r=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach(function(s,i){if(VS(s)){n._imageTensors[i]=s,n._inputDimensions[i]=s.shape;return}if(Om(s)){var o=s.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");n._imageTensors[i]=s,n._inputDimensions[i]=s.shape.slice(1);return}var l=s instanceof Ao.getEnv().Canvas?s:YT(s);n._canvases[i]=l,n._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Iy(this.batchSize,0,1).map(function(r,n){return t.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var r=this.getInputWidth(t),n=this.getInputHeight(t);return SPe({width:r,height:n},this.inputSize)},e.prototype.toBatchTensor=function(t,r){var n=this;return r===void 0&&(r=!0),this._inputSize=t,kr(function(){var s=Iy(n.batchSize,0,1).map(function(o){var l=n.getInput(o);if(l instanceof os){var c=Om(l)?l:l.expandDims();return c=_Pe(c,r),(c.shape[1]!==t||c.shape[2]!==t)&&(c=FT.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(l instanceof Ao.getEnv().Canvas)return VT.fromPixels(LPe(l,t,r));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=rc(s.map(function(o){return o.toFloat()})).as4D(n.batchSize,t,t,3);return i})},e}();function Di(e){return Lr(this,void 0,void 0,function(){var t,r,n;return Br(this,function(s){switch(s.label){case 0:if(e instanceof m2)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return r=function(i){return Array.isArray(e)?" at input index "+i+":":""},n=t.map(DY),n.forEach(function(i,o){if(!UB(i)&&!VS(i)&&!Om(i))throw typeof t[o]=="string"?new Error("toNetInput -"+r(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+r(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Om(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+r(o)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(n.map(function(i){return UB(i)&&RPe(i)}))];case 1:return s.sent(),[2,new m2(n,Array.isArray(e))]}})})}function KT(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l,c;return Br(this,function(d){switch(d.label){case 0:return r=Ao.getEnv().Canvas,n=e,e instanceof r?[3,5]:[4,Di(e)];case 1:if(s=d.sent(),s.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=s.getInput(0),i instanceof r?(o=i,[3,4]):[3,2];case 2:return[4,FPe(i)];case 3:o=d.sent(),d.label=4;case 4:n=o,d.label=5;case 5:return l=Ax(n),c=t.map(function(u){return u instanceof ah?u.forSize(n.width,n.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(n.width,n.height)}),[2,c.map(function(u){var h=u.x,m=u.y,p=u.width,v=u.height,g=HS({width:p,height:v});return Ax(g).putImageData(l.getImageData(h,m,p,v),0,0),g})]}})})}function XT(e,t){return Lr(this,void 0,void 0,function(){return Br(this,function(r){if(!VS(e)&&!Om(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Om(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,kr(function(){var n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=t.map(function(d){return d instanceof ah?d.forSize(i,s).box:d}).map(function(d){return d.clipAtImageBorders(i,s)}),c=l.map(function(d){var u=d.x,h=d.y,m=d.width,p=d.height;return aY(e.as3D(s,i,o),[h,u,0],[p,m,o])});return c})]})})}function BPe(e,t){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return r=Ao.getEnv().fetch,[4,r(e,t)];case 1:if(n=s.sent(),!(n.status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function UPe(e){return Lr(this,void 0,void 0,function(){return Br(this,function(t){switch(t.label){case 0:return[4,BPe(e)];case 1:return[2,t.sent().json()]}})})}function IY(e,t){var r=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+r};var n=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(n,"");var s=e.split("/").filter(function(l){return l}),i=e.endsWith(".json")?s[s.length-1]:r,o=n+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function $Pe(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i;return Br(this,function(o){switch(o.label){case 0:return r=IY(e,t),n=r.manifestUri,s=r.modelBaseUri,[4,UPe(n)];case 1:return i=o.sent(),[2,jY.loadWeights(i,s)]}})})}var wf=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var r=this.traversePropertyPath(t),n=r.obj,s=r.objProp;return n[s]},e.prototype.reassignParamFromPath=function(t,r){var n=this.traversePropertyPath(t),s=n.obj,i=n.objProp;s[i].dispose(),s[i]=r},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(r){var n=r.paramPath;return{path:n,tensor:t.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof Lv})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof Lv)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(r){var n=r.path,s=r.tensor;t.reassignParamFromPath(n,s.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(r){var n=r.path,s=r.tensor,i=Ki(s.dataSync());s.dispose(),t.reassignParamFromPath(n,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(r){if(t&&r.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+r.path);r.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var r=t.tensor;return Array.from(r.dataSync())}).reduce(function(t,r){return t.concat(r)}))},e.prototype.load=function(t){return Lr(this,void 0,void 0,function(){return Br(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Lr(this,void 0,void 0,function(){var r;return Br(this,function(n){switch(n.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,$Pe(t,this.getDefaultModelName())];case 1:return r=n.sent(),this.loadFromWeightMap(r),[2]}})})},e.prototype.loadFromDisk=function(t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Br(this,function(m){switch(m.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return r=Ao.getEnv().readFile,n=IY(t,this.getDefaultModelName()),s=n.manifestUri,i=n.modelBaseUri,o=function(p){return Promise.all(p.map(function(v){return r(v).then(function(g){return g.buffer})}))},l=jY.weightsLoaderFactory(o),u=(d=JSON).parse,[4,r(s)];case 1:return c=u.apply(d,[m.sent().toString()]),[4,l(c,i)];case 2:return h=m.sent(),this.loadFromWeightMap(h),[2]}})})},e.prototype.loadFromWeightMap=function(t){var r=this.extractParamsFromWeigthMap(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.extractWeights=function(t){var r=this.extractParams(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var r=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),n=r.obj,s=r.objProp;if(!n||!s||!(n[s]instanceof os))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:s}},e}();function Xl(e,t,r){return kr(function(){var n=IT(e,t.depthwise_filter,t.pointwise_filter,r,"same");return n=In(n,t.bias),n})}function YE(e,t,r){return r===void 0&&(r=!1),kr(function(){var n=us(r?In(Zc(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Xl(e,t.conv0,[2,2])),s=Xl(n,t.conv1,[1,1]),i=us(In(n,s)),o=Xl(i,t.conv2,[1,1]);return us(In(n,In(s,o)))})}function iN(e,t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!0),kr(function(){var s=us(r?In(Zc(e,t.conv0.filters,n?[2,2]:[1,1],"same"),t.conv0.bias):Xl(e,t.conv0,n?[2,2]:[1,1])),i=Xl(s,t.conv1,[1,1]),o=us(In(s,i)),l=Xl(o,t.conv2,[1,1]),c=us(In(s,In(i,l))),d=Xl(c,t.conv3,[1,1]);return us(In(s,In(i,In(l,d))))})}function Pd(e,t,r,n){return r===void 0&&(r="same"),n===void 0&&(n=!1),kr(function(){var s=In(Zc(e,t.filters,[1,1],r),t.bias);return n?us(s):s})}function Sf(e,t){Object.keys(e).forEach(function(r){t.some(function(n){return n.originalPath===r})||e[r].dispose()})}function WS(e,t){return function(r,n,s,i){var o=ol(e(r*n*s*s),[s,s,r,n]),l=ti(e(n));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:l}}}function QT(e,t){return function(r,n,s){var i=Im(e(r*n),[r,n]),o=ti(e(n));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:i,bias:o}}}var PY=function(){function e(t,r,n){this.depthwise_filter=t,this.pointwise_filter=r,this.bias=n}return e}();function JT(e,t){return function(r,n,s){var i=ol(e(9*r),[3,3,r,1]),o=ol(e(r*n),[1,1,r,n]),l=ti(e(n));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new PY(i,o,l)}}function ZT(e){return function(t){var r=e(t+"/depthwise_filter",4),n=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new PY(r,n,s)}}function ap(e,t){return function(r,n,s){var i=e[r];if(!qS(i,n))throw new Error("expected weightMap["+r+"] to be a Tensor"+n+"D, instead have "+i);return t.push({originalPath:r,paramPath:s||r}),i}}function Cf(e){var t=e;function r(s){var i=t.slice(0,s);return t=t.slice(s),i}function n(){return t}return{extractWeights:r,getRemainingWeights:n}}function OY(e,t){var r=WS(e,t),n=JT(e,t);function s(o,l,c,d){d===void 0&&(d=!1);var u=d?r(o,l,3,c+"/conv0"):n(o,l,c+"/conv0"),h=n(l,l,c+"/conv1"),m=n(l,l,c+"/conv2");return{conv0:u,conv1:h,conv2:m}}function i(o,l,c,d){d===void 0&&(d=!1);var u=s(o,l,c,d),h=u.conv0,m=u.conv1,p=u.conv2,v=n(l,l,c+"/conv3");return{conv0:h,conv1:m,conv2:p,conv3:v}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function qPe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),d=i(128,256,"dense3");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c,dense3:d}}}function MY(e){return function(t){var r=e(t+"/filters",4),n=e(t+"/bias",1);return{filters:r,bias:n}}}function RY(e,t){var r=ap(e,t),n=MY(r),s=ZT(r);function i(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2"),m=s(l+"/conv3");return{conv0:d,conv1:u,conv2:h,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function VPe(e){var t=[],r=RY(e,t).extractDenseBlock4Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return Sf(e,t),{params:n,paramMappings:t}}var FY=function(e){hn(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceFeatureExtractor - load model before inference");return kr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(yr(255)),l=iN(o,n.dense0,!0);return l=iN(l,n.dense1),l=iN(l,n.dense2),l=iN(l,n.dense3),l=v1(l,[7,7],[2,2],"valid"),l})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(r){return VPe(r)},t.prototype.extractParams=function(r){return qPe(r)},t}(wf);function Ou(e,t){return kr(function(){return In(BS(e,t.weights),t.bias)})}function zPe(e,t,r){var n=[],s=Cf(e),i=s.extractWeights,o=s.getRemainingWeights,l=QT(i,n),c=l(t,r,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{fc:c}}}function HPe(e){var t=[],r=ap(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:n("fc")};return Sf(e,t),{params:s,paramMappings:t}}function LY(e){var t={},r={};return Object.keys(e).forEach(function(n){var s=n.startsWith("fc")?r:t;s[n]=e[n]}),{featureExtractorMap:t,classifierMap:r}}var BY=function(e){hn(t,e);function t(r,n){var s=e.call(this,r)||this;return s._faceFeatureExtractor=n,s}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return kr(function(){var i=r instanceof m2?n.faceFeatureExtractor.forwardInput(r):r;return Ou(i.as2D(i.shape[0],-1),s.fc)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return zPe(r,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),HPe(i)},t.prototype.extractParams=function(r){var n=this.getClassifierChannelsIn(),s=this.getClassifierChannelsOut(),i=s*n+s,o=r.slice(0,r.length-i),l=r.slice(r.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(l)},t}(wf),$B=["neutral","happy","sad","angry","fearful","disgusted","surprised"],WPe=function(){function e(t){var r=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);$B.forEach(function(n,s){r[n]=t[s]})}return e.prototype.asSortedArray=function(){var t=this;return $B.map(function(r){return{expression:r,probability:t[r]}}).sort(function(r,n){return n.probability-r.probability})},e}(),GPe=function(e){hn(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceExpressionNet",r)||this}return t.prototype.forwardInput=function(r){var n=this;return kr(function(){return jf(n.runNet(r))})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictExpressions=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o,l=this;return Br(this,function(c){switch(c.label){case 0:return[4,Di(r)];case 1:return n=c.sent(),[4,this.forwardInput(n)];case 2:return s=c.sent(),[4,Promise.all(ui(s).map(function(d){return Lr(l,void 0,void 0,function(){var u;return Br(this,function(h){switch(h.label){case 0:return[4,d.data()];case 1:return u=h.sent(),d.dispose(),[2,u]}})})}))];case 3:return i=c.sent(),s.dispose(),o=i.map(function(d){return new WPe(d)}),[2,n.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(BY);function UY(e,t){var r={expressions:t};return Object.assign({},e,r)}function YPe(e){return PPe(e)&&e.landmarks instanceof f2&&e.unshiftedLandmarks instanceof f2&&e.alignedRect instanceof ah}function eI(e,t){var r=e.detection.box,n=t.shiftBy(r.x,r.y),s=n.align(),i=e.detection.imageDims,o=new ah(e.detection.score,s.rescale(i.reverse()),i),l={landmarks:n,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,l)}function KPe(e,t){var r=WS(e,t),n=JT(e,t);function s(o,l,c){var d=n(o,l,c+"/separable_conv0"),u=n(l,l,c+"/separable_conv1"),h=r(o,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:u,expansion_conv:h}}function i(o,l){var c=n(o,o,l+"/separable_conv0"),d=n(o,o,l+"/separable_conv1"),u=n(o,o,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:n,extractReductionBlockParams:s,extractMainBlockParams:i}}function XPe(e,t){var r=[],n=Cf(e),s=n.extractWeights,i=n.getRemainingWeights,o=KPe(s,r),l=o.extractConvParams,c=o.extractSeparableConvParams,d=o.extractReductionBlockParams,u=o.extractMainBlockParams,h=l(3,32,3,"entry_flow/conv_in"),m=d(32,64,"entry_flow/reduction_block_0"),p=d(64,128,"entry_flow/reduction_block_1"),v={conv_in:h,reduction_block_0:m,reduction_block_1:p},g={};Iy(t,0,1).forEach(function(N){g["main_block_"+N]=u(128,"middle_flow/main_block_"+N)});var b=d(128,256,"exit_flow/reduction_block"),y=c(256,512,"exit_flow/separable_conv"),C={reduction_block:b,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{entry_flow:v,middle_flow:g,exit_flow:C}}}function QPe(e,t){var r=ap(e,t),n=MY(r),s=ZT(r);function i(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=n(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:u}}function o(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=s(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:s,extractReductionBlockParams:i,extractMainBlockParams:o}}function JPe(e,t){var r=[],n=QPe(e,r),s=n.extractConvParams,i=n.extractSeparableConvParams,o=n.extractReductionBlockParams,l=n.extractMainBlockParams,c=s("entry_flow/conv_in"),d=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:d,reduction_block_1:u},m={};Iy(t,0,1).forEach(function(b){m["main_block_"+b]=l("middle_flow/main_block_"+b)});var p=o("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),g={reduction_block:p,separable_conv:v};return Sf(e,r),{params:{entry_flow:h,middle_flow:m,exit_flow:g},paramMappings:r}}function $Y(e,t,r){return In(Zc(e,t.filters,r,"same"),t.bias)}function KE(e,t,r){r===void 0&&(r=!0);var n=r?us(e):e;return n=Xl(n,t.separable_conv0,[1,1]),n=Xl(us(n),t.separable_conv1,[1,1]),n=Ni(n,[3,3],[2,2],"same"),n=In(n,$Y(e,t.expansion_conv,[2,2])),n}function ZPe(e,t){var r=Xl(us(e),t.separable_conv0,[1,1]);return r=Xl(us(r),t.separable_conv1,[1,1]),r=Xl(us(r),t.separable_conv2,[1,1]),r=In(r,e),r}var eOe=function(e){hn(t,e);function t(r){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=r,n}return t.prototype.forwardInput=function(r){var n=this,s=this.params;if(!s)throw new Error("TinyXception - load model before inference");return kr(function(){var i=r.toBatchTensor(112,!0),o=[122.782,117.001,104.298],l=b1(i,o).div(yr(256)),c=us($Y(l,s.entry_flow.conv_in,[2,2]));return c=KE(c,s.entry_flow.reduction_block_0,!1),c=KE(c,s.entry_flow.reduction_block_1),Iy(n._numMainBlocks,0,1).forEach(function(d){c=ZPe(c,s.middle_flow["main_block_"+d])}),c=KE(c,s.exit_flow.reduction_block),c=us(Xl(c,s.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(r){return JPe(r,this._numMainBlocks)},t.prototype.extractParams=function(r){return XPe(r,this._numMainBlocks)},t}(wf);function tOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=QT(n,t),o=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:o,gender:l}}}}function rOe(e){var t=[],r=ap(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:{age:n("fc/age"),gender:n("fc/gender")}};return Sf(e,t),{params:s,paramMappings:t}}var p2;(function(e){e.FEMALE="female",e.MALE="male"})(p2||(p2={}));var nOe=function(e){hn(t,e);function t(r){r===void 0&&(r=new eOe(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=r,n}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return kr(function(){var i=r instanceof m2?n.faceFeatureExtractor.forwardInput(r):r,o=v1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=Ou(o,s.fc.age).as1D(),c=Ou(o,s.fc.gender);return{age:l,gender:c}})},t.prototype.forwardInput=function(r){var n=this;return kr(function(){var s=n.runNet(r),i=s.age,o=s.gender;return{age:i,gender:jf(o)}})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictAgeAndGender=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o,l,c,d=this;return Br(this,function(u){switch(u.label){case 0:return[4,Di(r)];case 1:return n=u.sent(),[4,this.forwardInput(n)];case 2:return s=u.sent(),i=ui(s.age),o=ui(s.gender),l=i.map(function(h,m){return{ageTensor:h,genderTensor:o[m]}}),[4,Promise.all(l.map(function(h){var m=h.ageTensor,p=h.genderTensor;return Lr(d,void 0,void 0,function(){var v,g,b,y,C;return Br(this,function(N){switch(N.label){case 0:return[4,m.data()];case 1:return v=N.sent()[0],[4,p.data()];case 2:return g=N.sent()[0],b=g>.5,y=b?p2.MALE:p2.FEMALE,C=b?g:1-g,m.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:C}]}})})}))];case 3:return c=u.sent(),s.age.dispose(),s.gender.dispose(),[2,n.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return tOe(r)},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),rOe(i)},t.prototype.extractParams=function(r){var n=1539,s=r.slice(0,r.length-n),i=r.slice(r.length-n);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(i)},t}(wf),qY=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(r,n,s){var i=s.map(function(l){var c=l.width,d=l.height,u=n/Math.max(d,c);return{width:c*u,height:d*u}}),o=i.length;return kr(function(){var l=function(m,p){return rc([qu([68],m),qu([68],p)],1).as2D(1,136).as1D()},c=function(m,p){var v=i[m],g=v.width,b=v.height;return p(g,b)?Math.abs(g-b)/2:0},d=function(m){return c(m,function(p,v){return p<v})},u=function(m){return c(m,function(p,v){return v<p})},h=r.mul(qu([o,136],n)).sub(rc(Array.from(Array(o),function(m,p){return l(d(p),u(p))}))).div(rc(Array.from(Array(o),function(m,p){return l(i[p].width,i[p].height)})));return h})},t.prototype.forwardInput=function(r){var n=this;return kr(function(){var s=n.runNet(r);return n.postProcess(s,r.inputSize,r.inputDimensions.map(function(i){var o=i[0],l=i[1];return{height:o,width:l}}))})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.detectLandmarks=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o=this;return Br(this,function(l){switch(l.label){case 0:return[4,Di(r)];case 1:return n=l.sent(),s=kr(function(){return ui(o.forwardInput(n))}),[4,Promise.all(s.map(function(c,d){return Lr(o,void 0,void 0,function(){var u,h,m,p,v;return Br(this,function(g){switch(g.label){case 0:return m=(h=Array).from,[4,c.data()];case 1:return u=m.apply(h,[g.sent()]),p=u.filter(function(b,y){return OB(y)}),v=u.filter(function(b,y){return!OB(y)}),[2,new IPe(Array(68).fill(0).map(function(b,y){return new aa(p[y],v[y])}),{height:n.getInputHeight(d),width:n.getInputWidth(d)})]}})})}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(BY),VY=function(e){hn(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceLandmark68Net",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(qY);function aOe(e){var t=[],r=RY(e,t).extractDenseBlock3Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return Sf(e,t),{params:n,paramMappings:t}}function sOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c}}}var iOe=function(e){hn(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("TinyFaceFeatureExtractor - load model before inference");return kr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(yr(255)),l=YE(o,n.dense0,!0);return l=YE(l,n.dense1),l=YE(l,n.dense2),l=v1(l,[14,14],[2,2],"valid"),l})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(r){return aOe(r)},t.prototype.extractParams=function(r){return sOe(r)},t}(wf),oOe=function(e){hn(t,e);function t(r){return r===void 0&&(r=new iOe),e.call(this,"FaceLandmark68TinyNet",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(qY);(function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(VY);function lOe(e,t){return In(_o(e,t.weights),t.biases)}function tI(e,t,r,n,s){s===void 0&&(s="same");var i=t.conv,o=i.filters,l=i.bias,c=Zc(e,o,r,s);return c=In(c,l),c=lOe(c,t.scale),n?us(c):c}function cOe(e,t){return tI(e,t,[1,1],!0)}function zY(e,t){return tI(e,t,[1,1],!1)}function HY(e,t){return tI(e,t,[2,2],!0,"valid")}function dOe(e,t){function r(l,c,d){var u=e(l),h=u.length/(c*d*d);if(NPe(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+u.length+", numFilters: "+c+", filterSize: "+d);return kr(function(){return Vm(ol(u,[c,h,d,d]),[2,3,1,0])})}function n(l,c,d,u){var h=r(l,c,d),m=ti(e(c));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:h,bias:m}}function s(l,c){var d=ti(e(l)),u=ti(e(l));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:u}}function i(l,c,d,u){var h=n(l,c,d,u+"/conv"),m=s(c,u+"/scale");return{conv:h,scale:m}}function o(l,c,d,u,h){h===void 0&&(h=!1);var m=i((h?.5:1)*l,c,d,u+"/conv1"),p=i(l,c,d,u+"/conv2");return{conv1:m,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function uOe(e){var t=Cf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=dOe(r,s),o=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),u=l(9216,32,3,"conv32_2"),h=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),p=l(36864,64,3,"conv64_1"),v=l(36864,64,3,"conv64_2"),g=l(36864,64,3,"conv64_3"),b=l(147456,128,3,"conv128_down",!0),y=l(147456,128,3,"conv128_1"),C=l(147456,128,3,"conv128_2"),N=l(589824,256,3,"conv256_down",!0),k=l(589824,256,3,"conv256_1"),S=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),E=kr(function(){return Vm(Im(r(256*128),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: "+n().length);var T={conv32_down:c,conv32_1:d,conv32_2:u,conv32_3:h,conv64_down:m,conv64_1:p,conv64_2:v,conv64_3:g,conv128_down:b,conv128_1:y,conv128_2:C,conv256_down:N,conv256_1:k,conv256_2:S,conv256_down_out:D,fc:E};return{params:T,paramMappings:s}}function hOe(e,t){var r=ap(e,t);function n(o){var l=r(o+"/scale/weights",1),c=r(o+"/scale/biases",1);return{weights:l,biases:c}}function s(o){var l=r(o+"/conv/filters",4),c=r(o+"/conv/bias",1),d=n(o);return{conv:{filters:l,bias:c},scale:d}}function i(o){return{conv1:s(o+"/conv1"),conv2:s(o+"/conv2")}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function fOe(e){var t=[],r=hOe(e,t),n=r.extractConvLayerParams,s=r.extractResidualLayerParams,i=n("conv32_down"),o=s("conv32_1"),l=s("conv32_2"),c=s("conv32_3"),d=s("conv64_down"),u=s("conv64_1"),h=s("conv64_2"),m=s("conv64_3"),p=s("conv128_down"),v=s("conv128_1"),g=s("conv128_2"),b=s("conv256_down"),y=s("conv256_1"),C=s("conv256_2"),N=s("conv256_down_out"),k=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!jPe(k))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+k);var S={conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:u,conv64_2:h,conv64_3:m,conv128_down:p,conv128_1:v,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:C,conv256_down_out:N,fc:k};return Sf(e,t),{params:S,paramMappings:t}}function gu(e,t){var r=cOe(e,t.conv1);return r=zY(r,t.conv2),r=In(r,e),r=us(r),r}function oN(e,t){var r=HY(e,t.conv1);r=zY(r,t.conv2);var n=v1(e,2,2,"valid"),s=La(n.shape),i=n.shape[3]!==r.shape[3],o=n.shape[1]!==r.shape[1]||n.shape[2]!==r.shape[2];if(o){var l=Yb(r.shape);l[1]=1;var c=La(l);r=di([r,c],1);var d=Yb(r.shape);d[2]=1;var u=La(d);r=di([r,u],2)}return n=i?di([n,s],3):n,r=In(n,r),r=us(r),r}var mOe=function(e){hn(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceRecognitionNet - load model before inference");return kr(function(){var s=r.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=b1(s,i).div(yr(256)),l=HY(o,n.conv32_down);l=Ni(l,3,2,"valid"),l=gu(l,n.conv32_1),l=gu(l,n.conv32_2),l=gu(l,n.conv32_3),l=oN(l,n.conv64_down),l=gu(l,n.conv64_1),l=gu(l,n.conv64_2),l=gu(l,n.conv64_3),l=oN(l,n.conv128_down),l=gu(l,n.conv128_1),l=gu(l,n.conv128_2),l=oN(l,n.conv256_down),l=gu(l,n.conv256_1),l=gu(l,n.conv256_2),l=oN(l,n.conv256_down_out);var c=l.mean([1,2]),d=BS(c,n.fc);return d})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.computeFaceDescriptor=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o=this;return Br(this,function(l){switch(l.label){case 0:return[4,Di(r)];case 1:return n=l.sent(),s=kr(function(){return ui(o.forwardInput(n))}),[4,Promise.all(s.map(function(c){return c.data()}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(r){return fOe(r)},t.prototype.extractParams=function(r){return uOe(r)},t}(wf);function WY(e,t){var r={descriptor:t};return Object.assign({},e,r)}function GY(e,t){var r={age:t};return Object.assign({},e,r)}function YY(e,t,r){var n={gender:t,genderProbability:r};return Object.assign({},e,n)}var KY=function(){function e(t){var r=t===void 0?{}:t,n=r.minFaceSize,s=r.scaleFactor,i=r.maxNumScales,o=r.scoreThresholds,l=r.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=s||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function pOe(e,t){function r(c,d){var u=ol(e(9*c),[3,3,c,1]),h=ti(e(c)),m=ti(e(c)),p=ti(e(c)),v=ti(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:u,batch_norm_scale:h,batch_norm_offset:m,batch_norm_mean:p,batch_norm_variance:v}}function n(c,d,u,h,m){var p=ol(e(c*d*u*u),[u,u,c,d]),v=ti(e(d));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(m?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function s(c,d,u,h){var m=n(c,d,u,h,!0),p=m.filters,v=m.bias;return{filters:p,batch_norm_offset:v}}function i(c,d,u){var h=r(c,u+"/depthwise_conv"),m=s(c,d,1,u+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:m}}function o(){var c=s(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),g=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),C=i(512,512,"mobilenetv1/conv_10"),N=i(512,512,"mobilenetv1/conv_11"),k=i(512,1024,"mobilenetv1/conv_12"),S=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,conv_8:b,conv_9:y,conv_10:C,conv_11:N,conv_12:k,conv_13:S}}function l(){var c=s(1024,256,1,"prediction_layer/conv_0"),d=s(256,512,3,"prediction_layer/conv_1"),u=s(512,128,1,"prediction_layer/conv_2"),h=s(128,256,3,"prediction_layer/conv_3"),m=s(256,128,1,"prediction_layer/conv_4"),p=s(128,256,3,"prediction_layer/conv_5"),v=s(256,64,1,"prediction_layer/conv_6"),g=s(64,128,3,"prediction_layer/conv_7"),b=n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=n(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),C=n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),N=n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),S=n(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=n(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=n(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),L=n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=n(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),O={box_encoding_predictor:b,class_predictor:y},J={box_encoding_predictor:C,class_predictor:N},W={box_encoding_predictor:k,class_predictor:S},re={box_encoding_predictor:D,class_predictor:E},U={box_encoding_predictor:T,class_predictor:A},Q={box_encoding_predictor:L,class_predictor:P};return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,box_predictor_0:O,box_predictor_1:J,box_predictor_2:W,box_predictor_3:re,box_predictor_4:U,box_predictor_5:Q}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function xOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=pOe(n,t),o=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=o(),d=l(),u=vT(n(5118*4),[1,5118,4]),h={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:h},paramMappings:t}}function vOe(e,t){var r=ap(e,t);function n(d,u,h){var m=r(d+"/Conv2d_"+u+"_pointwise/weights",4,h+"/filters"),p=r(d+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:m,batch_norm_offset:p}}function s(d){var u="mobilenetv1/conv_"+d,h="MobilenetV1/Conv2d_"+d+"_depthwise",m=u+"/depthwise_conv",p=u+"/pointwise_conv",v=r(h+"/depthwise_weights",4,m+"/filters"),g=r(h+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),b=r(h+"/BatchNorm/beta",1,m+"/batch_norm_offset"),y=r(h+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),C=r(h+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:g,batch_norm_offset:b,batch_norm_mean:y,batch_norm_variance:C},pointwise_conv:n("MobilenetV1",d,p)}}function i(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}}function o(d,u){var h=r(d+"/weights",4,u+"/filters"),m=r(d+"/biases",1,u+"/bias");return{filters:h,bias:m}}function l(d){var u=o("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),h=o("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:u,class_predictor:h}}function c(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function gOe(e){var t=[],r=vOe(e,t),n=r.extractMobilenetV1Params,s=r.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!VS(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:n(),prediction_layer:s(),output_layer:{extra_dim:i}};return Sf(e,t),{params:o,paramMappings:t}}function Nu(e,t,r){return kr(function(){var n=Zc(e,t.filters,r,"same");return n=In(n,t.batch_norm_offset),ET(n,0,6)})}var bOe=.0010000000474974513;function yOe(e,t,r){return kr(function(){var n=LS(e,t.filters,r,"same");return n=VG(n,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,bOe),ET(n,0,6)})}function jOe(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function NOe(e,t){return kr(function(){var r=null,n=Nu(e,t.conv_0,[2,2]),s=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(s.forEach(function(i,o){var l=o+1,c=jOe(l);n=yOe(n,i.depthwise_conv,c),n=Nu(n,i.pointwise_conv,[1,1]),l===11&&(r=n)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:n,conv11:r}})}function wOe(e,t,r,n,s){var i=e.shape[0],o=Math.min(r,i),l=t.map(function(u,h){return{score:u,boxIndex:h}}).filter(function(u){return u.score>s}).sort(function(u,h){return h.score-u.score}),c=function(u){return u<=n?1:0},d=[];return l.forEach(function(u){if(!(d.length>=o)){for(var h=u.score,m=d.length-1;m>=0;--m){var p=SOe(e,u.boxIndex,d[m]);if(p!==0&&(u.score*=c(p),u.score<=s))break}h===u.score&&d.push(u.boxIndex)}}),d}function SOe(e,t,r){var n=e.arraySync(),s=Math.min(n[t][0],n[t][2]),i=Math.min(n[t][1],n[t][3]),o=Math.max(n[t][0],n[t][2]),l=Math.max(n[t][1],n[t][3]),c=Math.min(n[r][0],n[r][2]),d=Math.min(n[r][1],n[r][3]),u=Math.max(n[r][0],n[r][2]),h=Math.max(n[r][1],n[r][3]),m=(o-s)*(l-i),p=(u-c)*(h-d);if(m<=0||p<=0)return 0;var v=Math.max(s,c),g=Math.max(i,d),b=Math.min(o,u),y=Math.min(l,h),C=Math.max(b-v,0)*Math.max(y-g,0);return C/(m+p-C)}function COe(e){var t=ui(Vm(e,[1,0])),r=[mi(t[2],t[0]),mi(t[3],t[1])],n=[In(t[0],Cd(r[0],yr(2))),In(t[1],Cd(r[1],yr(2)))];return{sizes:r,centers:n}}function kOe(e,t){var r=COe(e),n=r.sizes,s=r.centers,i=ui(Vm(t,[1,0])),o=Cd(_o(QD(Cd(i[2],yr(5))),n[0]),yr(2)),l=In(_o(Cd(i[0],yr(10)),n[0]),s[0]),c=Cd(_o(QD(Cd(i[3],yr(5))),n[1]),yr(2)),d=In(_o(Cd(i[1],yr(10)),n[1]),s[1]);return Vm(rc([mi(l,o),mi(d,c),In(l,o),In(d,c)]),[1,0])}function _Oe(e,t,r){return kr(function(){var n=e.shape[0],s=kOe(Ad(uv(r.extra_dim,[n,1,1]),[-1,4]),Ad(e,[-1,4]));s=Ad(s,[n,s.shape[0]/n,4]);var i=BG(Gu(t,[0,0,1],[-1,-1,-1])),o=Gu(i,[0,0,0],[-1,-1,1]);o=Ad(o,[n,o.shape[1]]);var l=ui(s),c=ui(o);return{boxes:l,scores:c}})}function L0(e,t){return kr(function(){var r=e.shape[0],n=Ad(Pd(e,t.box_encoding_predictor),[r,-1,1,4]),s=Ad(Pd(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:n,classPrediction:s}})}function EOe(e,t,r){return kr(function(){var n=Nu(e,r.conv_0,[1,1]),s=Nu(n,r.conv_1,[2,2]),i=Nu(s,r.conv_2,[1,1]),o=Nu(i,r.conv_3,[2,2]),l=Nu(o,r.conv_4,[1,1]),c=Nu(l,r.conv_5,[2,2]),d=Nu(c,r.conv_6,[1,1]),u=Nu(d,r.conv_7,[2,2]),h=L0(t,r.box_predictor_0),m=L0(e,r.box_predictor_1),p=L0(s,r.box_predictor_2),v=L0(o,r.box_predictor_3),g=L0(c,r.box_predictor_4),b=L0(u,r.box_predictor_5),y=di([h.boxPredictionEncoding,m.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding],1),C=di([h.classPrediction,m.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction,b.classPrediction],1);return{boxPredictions:y,classPredictions:C}})}var y1=function(){function e(t){var r=t===void 0?{}:t,n=r.minConfidence,s=r.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=s||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),XY=function(e){hn(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("SsdMobilenetv1 - load model before inference");return kr(function(){var s=r.toBatchTensor(512,!1).toFloat(),i=mi(_o(s,yr(.007843137718737125)),yr(1)),o=NOe(i,n.mobilenetv1),l=EOe(o.out,o.conv11,n.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return _Oe(c,d,n.output_layer)})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.locateFaces=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Br(this,function(A){switch(A.label){case 0:return s=new y1(n),i=s.maxResults,o=s.minConfidence,[4,Di(r)];case 1:for(l=A.sent(),c=this.forwardInput(l),d=c.boxes,u=c.scores,h=d[0],m=u[0],p=1;p<d.length;p++)d[p].dispose(),u[p].dispose();return b=(g=Array).from,[4,m.data()];case 2:return v=b.apply(g,[A.sent()]),y=.5,C=wOe(h,v,i,y,o),N=l.getReshapedInputDimensions(0),k=l.inputSize,S=k/N.width,D=k/N.height,E=h.arraySync(),T=C.map(function(L){var P=[Math.max(0,E[L][0]),Math.min(1,E[L][2])].map(function(Q){return Q*D}),O=P[0],J=P[1],W=[Math.max(0,E[L][1]),Math.min(1,E[L][3])].map(function(Q){return Q*S}),re=W[0],U=W[1];return new ah(v[L],new HT(re,O,U-re,J-O),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),h.dispose(),m.dispose(),[2,T]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(r){return gOe(r)},t.prototype.extractParams=function(r){return xOe(r)},t}(wf);(function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(XY);var DOe=.4,AOe=[new aa(.738768,.874946),new aa(2.42204,2.65704),new aa(4.30971,7.04493),new aa(10.246,4.59428),new aa(12.6868,11.8741)],TOe=[new aa(1.603231,2.094468),new aa(6.041143,7.080126),new aa(2.882459,3.518061),new aa(4.266906,5.178857),new aa(9.041765,10.66308)],IOe=[117.001,114.697,97.404],POe="tiny_yolov2_model",OOe="tiny_yolov2_separable_conv_model",lN=function(e){return typeof e=="number"};function MOe(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!lN(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return lN(t.x)&&lN(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(lN)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function rI(e){return kr(function(){var t=_o(e,yr(.10000000149011612));return In(us(mi(e,t)),t)})}function xm(e,t){return kr(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=Zc(r,t.conv.filters,[1,1],"valid"),r=mi(r,t.bn.sub),r=_o(r,t.bn.truediv),r=In(r,t.conv.bias),rI(r)})}function vm(e,t){return kr(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=IT(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=In(r,t.bias),rI(r)})}function ROe(e,t){var r=WS(e,t);function n(o,l){var c=ti(e(o)),d=ti(e(o));return t.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function s(o,l,c){var d=r(o,l,3,c+"/conv"),u=n(l,c+"/bn");return{conv:d,bn:u}}var i=JT(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function FOe(e,t,r,n){var s=Cf(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=ROe(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams,m;if(t.withSeparableConvs){var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],N=n[6],k=n[7],S=n[8],D=t.isFirstLayerConv2d?d(p,v,3,"conv0"):h(p,v,"conv0"),E=h(v,g,"conv1"),T=h(g,b,"conv2"),A=h(b,y,"conv3"),L=h(y,C,"conv4"),P=h(C,N,"conv5"),O=k?h(N,k,"conv6"):void 0,J=S?h(k,S,"conv7"):void 0,W=d(S||k||N,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:J,conv8:W}}else{var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],N=n[6],k=n[7],S=n[8],D=u(p,v,"conv0"),E=u(v,g,"conv1"),T=u(g,b,"conv2"),A=u(b,y,"conv3"),L=u(y,C,"conv4"),P=u(C,N,"conv5"),O=u(N,k,"conv6"),J=u(k,S,"conv7"),W=d(S,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:J,conv8:W}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:m,paramMappings:l}}function LOe(e,t){var r=ap(e,t);function n(l){var c=r(l+"/sub",1),d=r(l+"/truediv",1);return{sub:c,truediv:d}}function s(l){var c=r(l+"/filters",4),d=r(l+"/bias",1);return{filters:c,bias:d}}function i(l){var c=s(l+"/conv"),d=n(l+"/bn");return{conv:c,bn:d}}var o=ZT(r);return{extractConvParams:s,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function BOe(e,t){var r=[],n=LOe(e,r),s=n.extractConvParams,i=n.extractConvWithBatchNormParams,o=n.extractSeparableConvParams,l;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;l={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:s("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return Sf(e,r),{params:l,paramMappings:r}}var qB;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(qB||(qB={}));var nI=function(){function e(t){var r=t===void 0?{}:t,n=r.inputSize,s=r.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=s||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),QY=function(e){hn(t,e);function t(r){var n=e.call(this,"TinyYolov2")||this;return MOe(r),n._config=r,n}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(r,n){var s=xm(r,n.conv0);return s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv1),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv2),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv3),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv4),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv5),s=Ni(s,[2,2],[1,1],"same"),s=xm(s,n.conv6),s=xm(s,n.conv7),Pd(s,n.conv8,"valid",!1)},t.prototype.runMobilenet=function(r,n){var s=this.config.isFirstLayerConv2d?rI(Pd(r,n.conv0,"valid",!1)):vm(r,n.conv0);return s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv1),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv2),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv3),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv4),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv5),s=Ni(s,[2,2],[1,1],"same"),s=n.conv6?vm(s,n.conv6):s,s=n.conv7?vm(s,n.conv7):s,Pd(s,n.conv8,"valid",!1)},t.prototype.forwardInput=function(r,n){var s=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return kr(function(){var o=r.toBatchTensor(n,!1).toFloat();return o=s.config.meanRgb?b1(o,s.config.meanRgb):o,o=o.div(yr(256)),s.config.withSeparableConvs?s.runMobilenet(o,i):s.runTinyYolov2(o,i)})},t.prototype.forward=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C=this;return Br(this,function(N){switch(N.label){case 0:return s=new nI(n),i=s.inputSize,o=s.scoreThreshold,[4,Di(r)];case 1:return l=N.sent(),[4,this.forwardInput(l,i)];case 2:return c=N.sent(),d=kr(function(){return ui(c)[0].expandDims()}),u={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),o)];case 3:return h=N.sent(),c.dispose(),d.dispose(),m=h.map(function(k){return k.box}),p=h.map(function(k){return k.score}),v=h.map(function(k){return k.classScore}),g=h.map(function(k){return C.config.classes[k.label]}),b=Py(m.map(function(k){return k.rescale(i)}),p,this.config.iouThreshold,!0),y=b.map(function(k){return new wY(p[k],v[k],g[k],m[k],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(r){return BOe(r,this.config)},t.prototype.extractParams=function(r){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,s=n?n.length:void 0;if(s!==7&&s!==8&&s!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+s+" filterSizes in config");return FOe(r,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A,L,P,O,J,W,re,U,Q,B=this;return Br(this,function(te){switch(te.label){case 0:return i=n.width,o=n.height,l=Math.max(i,o),c=l/i,d=l/o,u=r.shape[1],h=this.config.anchors.length,m=kr(function(){var X=r.reshape([u,u,h,B.boxEncodingSize]),ce=X.slice([0,0,0,0],[u,u,h,4]),M=X.slice([0,0,0,4],[u,u,h,1]),q=B.withClassScores?jf(X.slice([0,0,0,5],[u,u,h,B.config.classes.length]),3):yr(0);return[ce,M,q]}),p=m[0],v=m[1],g=m[2],b=[],[4,v.array()];case 1:return y=te.sent(),[4,p.array()];case 2:C=te.sent(),N=0,te.label=3;case 3:if(!(N<u))return[3,12];k=0,te.label=4;case 4:if(!(k<u))return[3,11];S=0,te.label=5;case 5:return S<h?(D=GE(y[N][k][S][0]),!s||D>s?(E=(k+GE(C[N][k][S][0]))/u*c,T=(N+GE(C[N][k][S][1]))/u*d,A=Math.exp(C[N][k][S][2])*this.config.anchors[S].x/u*c,L=Math.exp(C[N][k][S][3])*this.config.anchors[S].y/u*d,P=E-A/2,O=T-L/2,J={row:N,col:k,anchor:S},this.withClassScores?[4,this.extractPredictedClass(g,J)]:[3,7]):[3,9]):[3,10];case 6:return Q=te.sent(),[3,8];case 7:Q={classScore:1,label:0},te.label=8;case 8:W=Q,re=W.classScore,U=W.label,b.push(yo({box:new zS(P,O,P+A,O+L),score:D,classScore:D*re,label:U},J)),te.label=9;case 9:return S++,[3,5];case 10:return k++,[3,4];case 11:return N++,[3,3];case 12:return p.dispose(),v.dispose(),g.dispose(),[2,b]}})})},t.prototype.extractPredictedClass=function(r,n){return Lr(this,void 0,void 0,function(){var s,i,o,l;return Br(this,function(c){switch(c.label){case 0:return s=n.row,i=n.col,o=n.anchor,[4,r.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,u){return l[s][i][o][u]}).map(function(d,u){return{classScore:d,label:u}}).reduce(function(d,u){return d.classScore>u.classScore?d:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(wf),UOe=function(e){hn(t,e);function t(r){r===void 0&&(r=!0);var n=this,s=Object.assign({},{withSeparableConvs:r,iouThreshold:DOe,classes:["face"]},r?{anchors:TOe,meanRgb:IOe}:{anchors:AOe,withClassScores:!0});return n=e.call(this,s)||this,n}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new ah(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?OOe:POe},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),aI=function(e){hn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._name="TinyFaceDetectorOptions",r}return t}(nI),j1=function(){function e(){}return e.prototype.then=function(t){return Lr(this,void 0,void 0,function(){var r;return Br(this,function(n){switch(n.label){case 0:return r=t,[4,this.run()];case 1:return[2,r.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return Lr(this,void 0,void 0,function(){return Br(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function GS(e,t,r,n,s){return s===void 0&&(s=function(i){var o=i.alignedRect;return o}),Lr(this,void 0,void 0,function(){var i,o,l,c,d;return Br(this,function(u){switch(u.label){case 0:return i=e.map(function(h){return YPe(h)?s(h):h.detection}),l=n,l?[3,5]:t instanceof os?[4,XT(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,KT(t,i)];case 3:c=u.sent(),u.label=4;case 4:l=c,u.label=5;case 5:return o=l,[4,r(o)];case 6:return d=u.sent(),o.forEach(function(h){return h instanceof os&&h.dispose()}),[2,d]}})})}function sI(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i=this;return Br(this,function(o){return[2,GS([e],t,function(l){return Lr(i,void 0,void 0,function(){return Br(this,function(c){return[2,r(l[0])]})})},n,s)]})})}function $Oe(e){return kr(function(){return rc(ui(e,3).reverse(),3)})}var cN=2,x2=12;function qOe(e,t){var r=WS(e,t),n=QT(e,t);function s(d,u){var h=ti(e(d));return t.push({paramPath:u}),h}function i(d,u,h){h===void 0&&(h=!1);var m=r(d[0],d[1],3,u+"/conv1"),p=s(d[1],u+"/prelu1_alpha"),v=r(d[1],d[2],3,u+"/conv2"),g=s(d[2],u+"/prelu2_alpha"),b=r(d[2],d[3],h?2:3,u+"/conv3"),y=s(d[3],u+"/prelu3_alpha");return{conv1:m,prelu1_alpha:p,conv2:v,prelu2_alpha:g,conv3:b,prelu3_alpha:y}}function o(){var d=i([3,10,16,32],"pnet"),u=r(32,2,1,"pnet/conv4_1"),h=r(32,4,1,"pnet/conv4_2");return yo(yo({},d),{conv4_1:u,conv4_2:h})}function l(){var d=i([3,28,48,64],"rnet",!0),u=n(576,128,"rnet/fc1"),h=s(128,"rnet/prelu4_alpha"),m=n(128,2,"rnet/fc2_1"),p=n(128,4,"rnet/fc2_2");return yo(yo({},d),{fc1:u,prelu4_alpha:h,fc2_1:m,fc2_2:p})}function c(){var d=i([3,32,64,64],"onet"),u=r(64,128,2,"onet/conv4"),h=s(128,"onet/prelu4_alpha"),m=n(1152,256,"onet/fc1"),p=s(256,"onet/prelu5_alpha"),v=n(256,2,"onet/fc2_1"),g=n(256,4,"onet/fc2_2"),b=n(256,10,"onet/fc2_3");return yo(yo({},d),{conv4:u,prelu4_alpha:h,fc1:m,prelu5_alpha:p,fc2_1:v,fc2_2:g,fc2_3:b})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function VOe(e){var t=Cf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=qOe(r,s),o=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,d=o(),u=l(),h=c();if(n().length!==0)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:d,rnet:u,onet:h},paramMappings:s}}function zOe(e,t){var r=ap(e,t);function n(u){var h=r(u+"/weights",4,u+"/filters"),m=r(u+"/bias",1);return{filters:h,bias:m}}function s(u){var h=r(u+"/weights",2),m=r(u+"/bias",1);return{weights:h,bias:m}}function i(u){return r(u,1)}function o(u){var h=n(u+"/conv1"),m=i(u+"/prelu1_alpha"),p=n(u+"/conv2"),v=i(u+"/prelu2_alpha"),g=n(u+"/conv3"),b=i(u+"/prelu3_alpha");return{conv1:h,prelu1_alpha:m,conv2:p,prelu2_alpha:v,conv3:g,prelu3_alpha:b}}function l(){var u=o("pnet"),h=n("pnet/conv4_1"),m=n("pnet/conv4_2");return yo(yo({},u),{conv4_1:h,conv4_2:m})}function c(){var u=o("rnet"),h=s("rnet/fc1"),m=i("rnet/prelu4_alpha"),p=s("rnet/fc2_1"),v=s("rnet/fc2_2");return yo(yo({},u),{fc1:h,prelu4_alpha:m,fc2_1:p,fc2_2:v})}function d(){var u=o("onet"),h=n("onet/conv4"),m=i("onet/prelu4_alpha"),p=s("onet/fc1"),v=i("onet/prelu5_alpha"),g=s("onet/fc2_1"),b=s("onet/fc2_2"),y=s("onet/fc2_3");return yo(yo({},u),{conv4:h,prelu4_alpha:m,fc1:p,prelu5_alpha:v,fc2_1:g,fc2_2:b,fc2_3:y})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function HOe(e){var t=[],r=zOe(e,t),n=r.extractPNetParams,s=r.extractRNetParams,i=r.extractONetParams,o=n(),l=s(),c=i();return Sf(e,t),{params:{pnet:o,rnet:l,onet:c},paramMappings:t}}function s3(e,t){var r=t[0],n=t[1];return{height:Math.floor(r*e),width:Math.floor(n*e)}}function WOe(e,t,r){for(var n=r[0],s=r[1],i=x2/e,o=[],l=Math.min(n,s)*i,c=0;l>=12;)o.push(i*Math.pow(t,c)),l=l*t,c+=1;return o}var iI=function(e){hn(t,e);function t(r,n,s,i){return e.call(this,{left:r,top:n,right:s,bottom:i},!0)||this}return t}(zm);function JY(e){return kr(function(){return _o(mi(e,yr(127.5)),yr(.0078125))})}function vv(e,t){return kr(function(){return In(us(e),_o(t,c2(us(c2(e)))))})}function oI(e,t,r){return r===void 0&&(r=!1),kr(function(){var n=Pd(e,t.conv1,"valid");return n=vv(n,t.prelu1_alpha),n=Ni(n,r?[2,2]:[3,3],[2,2],"same"),n=Pd(n,t.conv2,"valid"),n=vv(n,t.prelu2_alpha),n=r?n:Ni(n,[3,3],[2,2],"valid"),n=Pd(n,t.conv3,"valid"),n=vv(n,t.prelu3_alpha),n})}function GOe(e,t){return kr(function(){var r=oI(e,t,!0),n=Pd(r,t.conv4_1,"valid"),s=Lc(US(n,3),3),i=jf(mi(n,s),3),o=Pd(r,t.conv4_2,"valid");return{prob:i,regions:o}})}function YOe(e,t){return kr(function(){var r=s3(t,e.shape.slice(1)),n=r.height,s=r.width,i=FT.resizeBilinear(e,[n,s]),o=JY(i);return Vm(o,[0,2,1,3])})}function KOe(e,t,r,n){for(var s=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var l=0;l<e.shape[1];l++)i[o][l]>=n&&s.push(new aa(l,o));var c=s.map(function(d){var u=new zS(Math.round((d.y*cN+1)/r),Math.round((d.x*cN+1)/r),Math.round((d.y*cN+x2)/r),Math.round((d.x*cN+x2)/r)),h=i[d.y][d.x],m=t.arraySync(),p=new iI(m[d.y][d.x][0],m[d.y][d.x][1],m[d.y][d.x][2],m[d.y][d.x][3]);return{cell:u,score:h,region:p}});return c}function XOe(e,t,r,n,s){s.stage1=[];var i=t.map(function(m){return kr(function(){var p={scale:m},v=YOe(e,m),g=Date.now(),b=GOe(v,n),y=b.prob,C=b.regions;p.pnet=Date.now()-g;var N=ui(ui(y,3)[1])[0],k=ui(C)[0];return{scoresTensor:N,regionsTensor:k,scale:m,statsForScale:p}})}),o=i.map(function(m){var p=m.scoresTensor,v=m.regionsTensor,g=m.scale,b=m.statsForScale,y=KOe(p,v,g,r);if(p.dispose(),v.dispose(),!y.length)return s.stage1.push(b),[];var C=Date.now(),N=Py(y.map(function(k){return k.cell}),y.map(function(k){return k.score}),.5);return b.nms=Date.now()-C,b.numBoxes=N.length,s.stage1.push(b),N.map(function(k){return y[k]})}),l=o.reduce(function(m,p){return m.concat(p)},[]),c=[],d=[];if(l.length>0){var u=Date.now(),h=Py(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);s.stage1_nms=Date.now()-u,d=h.map(function(m){return l[m].score}),c=h.map(function(m){return l[m]}).map(function(m){var p=m.cell,v=m.region;return new zS(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:c,scores:d}}function ZY(e,t,r){var n=r.width,s=r.height;return Lr(this,void 0,void 0,function(){var i,o,l,c=this;return Br(this,function(d){switch(d.label){case 0:return i=Ax(e),[4,Promise.all(t.map(function(u){return Lr(c,void 0,void 0,function(){var h,m,p,v,g,b,y,C;return Br(this,function(N){return h=u.padAtBorders(e.height,e.width),m=h.y,p=h.ey,v=h.x,g=h.ex,b=v-1,y=m-1,C=i.getImageData(b,y,g-b,p-y),[2,Ao.isNodejs()?YT(C):createImageBitmap(C)]})})}))];case 1:return o=d.sent(),l=[],o.forEach(function(u){var h=HS({width:n,height:s}),m=Ax(h);m.drawImage(u,0,0,n,s);for(var p=m.getImageData(0,0,n,s).data,v=[],g=0;g<p.length;g+=4)v.push(p[g+2]),v.push(p[g+1]),v.push(p[g]);l.push(v)}),[2,l.map(function(u){var h=kr(function(){var m=Vm(ol(u,[1,n,s,3]),[0,2,1,3]).toFloat();return JY(m)});return h})]}})})}function QOe(e,t){return kr(function(){var r=oI(e,t),n=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Ou(n,t.fc1),i=vv(s,t.prelu4_alpha),o=Ou(i,t.fc2_1),l=Lc(US(o,1),1),c=jf(mi(o,l),1),d=Ou(i,t.fc2_2),u=ui(c,1)[1];return{scores:u,regions:d}})}function JOe(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C;return Br(this,function(N){switch(N.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:24,height:24})];case 1:return o=N.sent(),s.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(k){var S=QOe(k,n);return k.dispose(),S}),s.stage2_rnet=Date.now()-i,c=l.length>1?di(l.map(function(k){return k.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[N.sent()]),c.dispose(),m=d.map(function(k,S){return{score:k,idx:S}}).filter(function(k){return k.score>r}).map(function(k){var S=k.idx;return S}),p=m.map(function(k){return t[k]}),v=m.map(function(k){return d[k]}),g=[],b=[],p.length>0&&(i=Date.now(),y=Py(p,v,.7),s.stage2_nms=Date.now()-i,C=y.map(function(k){var S=l[m[k]].regions.arraySync();return new iI(S[0][0],S[0][1],S[0][2],S[0][3])}),b=y.map(function(k){return v[k]}),g=y.map(function(k,S){return p[k].calibrate(C[S])})),l.forEach(function(k){k.regions.dispose(),k.scores.dispose()}),[2,{boxes:g,scores:b}]}})})}function ZOe(e,t){return kr(function(){var r=oI(e,t);r=Ni(r,[2,2],[2,2],"same"),r=Pd(r,t.conv4,"valid"),r=vv(r,t.prelu4_alpha);var n=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Ou(n,t.fc1),i=vv(s,t.prelu5_alpha),o=Ou(i,t.fc2_1),l=Lc(US(o,1),1),c=jf(mi(o,l),1),d=Ou(i,t.fc2_2),u=Ou(i,t.fc2_3),h=ui(c,1)[1];return{scores:h,regions:d,points:u}})}function eMe(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,N;return Br(this,function(k){switch(k.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:48,height:48})];case 1:return o=k.sent(),s.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(S){var D=ZOe(S,n);return S.dispose(),D}),s.stage3_onet=Date.now()-i,c=l.length>1?di(l.map(function(S){return S.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[k.sent()]),c.dispose(),m=d.map(function(S,D){return{score:S,idx:D}}).filter(function(S){return S.score>r}).map(function(S){var D=S.idx;return D}),p=m.map(function(S){var D=l[S].regions.arraySync();return new iI(D[0][0],D[0][1],D[0][2],D[0][3])}),v=m.map(function(S,D){return t[S].calibrate(p[D])}),g=m.map(function(S){return d[S]}),b=[],y=[],C=[],v.length>0&&(i=Date.now(),N=Py(v,g,.7,!1),s.stage3_nms=Date.now()-i,b=N.map(function(S){return v[S]}),y=N.map(function(S){return g[S]}),C=N.map(function(S,D){return Array(5).fill(0).map(function(E,T){var A=l[S].points.arraySync();return new aa(A[0][T]*(b[D].width+1)+b[D].left,A[0][T+5]*(b[D].height+1)+b[D].top)})})),l.forEach(function(S){S.regions.dispose(),S.scores.dispose(),S.points.dispose()}),[2,{boxes:b,scores:y,points:C}]}})})}var tMe=function(e){hn(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(r){return Lr(this,void 0,void 0,function(){return Br(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,r)]})})},t.prototype.loadFromDisk=function(r){return Lr(this,void 0,void 0,function(){return Br(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,r)]})})},t.prototype.forwardInput=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Br(this,function(A){switch(A.label){case 0:if(s=this.params,!s)throw new Error("Mtcnn - load model before inference");if(i=r.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},l=Date.now(),c=kr(function(){return $Oe(Lc(VT.fromPixels(i)).toFloat())}),d=function(L){return c.dispose(),o.total=Date.now()-l,L},u=c.shape.slice(1),h=u[0],m=u[1],p=new KY(n),v=p.minFaceSize,g=p.scaleFactor,b=p.maxNumScales,y=p.scoreThresholds,C=p.scaleSteps,N=(C||WOe(v,g,[h,m])).filter(function(L){var P=s3(L,[h,m]);return Math.min(P.width,P.height)>x2}).slice(0,b),o.scales=N,o.pyramid=N.map(function(L){return s3(L,[h,m])}),k=Date.now(),[4,XOe(c,N,y[0],s.pnet,o)];case 1:return S=A.sent(),o.total_stage1=Date.now()-k,S.boxes.length?(o.stage2_numInputBoxes=S.boxes.length,k=Date.now(),[4,JOe(i,S.boxes,y[1],s.rnet,o)]):[2,d({results:[],stats:o})];case 2:return D=A.sent(),o.total_stage2=Date.now()-k,D.boxes.length?(o.stage3_numInputBoxes=D.boxes.length,k=Date.now(),[4,eMe(i,D.boxes,y[2],s.onet,o)]):[2,d({results:[],stats:o})];case 3:return E=A.sent(),o.total_stage3=Date.now()-k,T=E.boxes.map(function(L,P){return eI(WT({},new ah(E.scores[P],new HT(L.left/m,L.top/h,L.width/m,L.height/h),{height:h,width:m})),new TPe(E.points[P].map(function(O){return O.sub(new aa(L.left,L.top)).div(new aa(L.width,L.height))}),{width:L.width,height:L.height}))}),[2,d({results:T,stats:o})]}})})},t.prototype.forward=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[2,s.apply(this,[i.sent(),n])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(r){return HOe(r)},t.prototype.extractParams=function(r){return VOe(r)},t}(wf),rMe=.4,nMe=[new aa(1.603231,2.094468),new aa(6.041143,7.080126),new aa(2.882459,3.518061),new aa(4.266906,5.178857),new aa(9.041765,10.66308)],aMe=[117.001,114.697,97.404],sMe=function(e){hn(t,e);function t(){var r=this,n={withSeparableConvs:!0,iouThreshold:rMe,classes:["face"],anchors:nMe,meanRgb:aMe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r=e.call(this,n)||this,r}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new ah(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),Ka={ssdMobilenetv1:new XY,tinyFaceDetector:new sMe,tinyYolov2:new UOe,mtcnn:new tMe,faceLandmark68Net:new VY,faceLandmark68TinyNet:new oOe,faceRecognitionNet:new mOe,faceExpressionNet:new GPe,ageGenderNet:new nOe},eK=function(e){hn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),lI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s=this;return Br(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Lr(s,void 0,void 0,function(){return Br(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Ka.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){return UY(o,n[l])})]}})})},t.prototype.withAgeAndGender=function(){return new hI(this,this.input)},t}(eK),cI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Ka.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return n=s.sent(),[2,UY(r,n)]}})})},t.prototype.withAgeAndGender=function(){return new fI(this,this.input)},t}(eK),dI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(lI),uI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(cI),tK=function(e){hn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),hI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s=this;return Br(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Lr(s,void 0,void 0,function(){return Br(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Ka.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){var c=n[l],d=c.age,u=c.gender,h=c.genderProbability;return GY(YY(o,u,h),d)})]}})})},t.prototype.withFaceExpressions=function(){return new lI(this,this.input)},t}(tK),fI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o;return Br(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?[4,sI(r,this.input,function(c){return Ka.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return n=l.sent(),s=n.age,i=n.gender,o=n.genderProbability,[2,GY(YY(r,i,o),s)]}})})},t.prototype.withFaceExpressions=function(){return new cI(this,this.input)},t}(tK),mI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(hI),pI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(fI),rK=function(e){hn(t,e);function t(r,n){var s=e.call(this)||this;return s.parentTask=r,s.input=n,s}return t}(j1),xI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),[4,GS(r,this.input,function(i){return Promise.all(i.map(function(o){return Ka.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return n=s.sent(),[2,n.map(function(i,o){return WY(r[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t}(rK),vI=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Ka.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return n=s.sent(),[2,WY(r,n)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t}(rK),nK=function(e){hn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.useTinyLandmarkNet=s,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Ka.faceLandmark68TinyNet:Ka.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(j1),iMe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Br(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return r=c.sent(),n=r.map(function(d){return d.detection}),this.input instanceof os?[4,XT(this.input,n)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,KT(this.input,n)];case 4:i=c.sent(),c.label=5;case 5:return s=i,[4,Promise.all(s.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return o=c.sent(),s.forEach(function(d){return d instanceof os&&d.dispose()}),[2,r.map(function(d,u){return eI(d,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(nK),oMe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o;return Br(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?(n=r.detection,this.input instanceof os?[4,XT(this.input,[n])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,KT(this.input,[n])];case 4:i=l.sent(),l.label=5;case 5:return s=i,[4,this.landmarkNet.detectLandmarks(s[0])];case 6:return o=l.sent(),s.forEach(function(c){return c instanceof os&&c.dispose()}),[2,eI(r,o)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(nK),aK=function(e){hn(t,e);function t(r,n){n===void 0&&(n=new y1);var s=e.call(this)||this;return s.input=r,s.options=n,s}return t}(j1),sK=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i;return Br(this,function(o){switch(o.label){case 0:return r=this,n=r.input,s=r.options,s instanceof KY?[4,Ka.mtcnn.forward(n,s)]:[3,2];case 1:return[2,o.sent().map(function(l){return l.detection})];case 2:if(i=s instanceof aI?function(l){return Ka.tinyFaceDetector.locateFaces(l,s)}:s instanceof y1?function(l){return Ka.ssdMobilenetv1.locateFaces(l,s)}:s instanceof nI?function(l){return Ka.tinyYolov2.locateFaces(l,s)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(n)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var r=this;return new Promise(function(n){return Lr(r,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s.map(function(o){return WT({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new iMe(this.runAndExtendWithFaceDetections(),this.input,r)},t.prototype.withFaceExpressions=function(){return new lI(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new hI(this.runAndExtendWithFaceDetections(),this.input)},t}(aK),lMe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,new sK(this.input,this.options)];case 1:return r=s.sent(),n=r[0],r.forEach(function(i){i.score>n.score&&(n=i)}),[2,n]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var r=this;return new Promise(function(n){return Lr(r,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s?WT({},s):void 0)]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new oMe(this.runAndExtendWithFaceDetection(),this.input,r)},t.prototype.withFaceExpressions=function(){return new cI(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new fI(this.runAndExtendWithFaceDetection(),this.input)},t}(aK);function cMe(e,t){return t===void 0&&(t=new y1),new lMe(e,t)}function dMe(e,t){return t===void 0&&(t=new y1),new sK(e,t)}function uMe(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var r=Array.from(e),n=Array.from(t);return Math.sqrt(r.map(function(s,i){return s-n[i]}).reduce(function(s,i){return s+Math.pow(i,2)},0))}var iK=function(){function e(t,r){r===void 0&&(r=.6),this._distanceThreshold=r;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var s=1,i=function(){return"person "+s++};this._labeledDescriptors=n.map(function(o){if(o instanceof ev)return o;if(o instanceof Float32Array)return new ev(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new ev(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,r){return r.map(function(n){return uMe(n,t)}).reduce(function(n,s){return n+s},0)/(r.length||1)},e.prototype.matchDescriptor=function(t){var r=this;return this.labeledDescriptors.map(function(n){var s=n.descriptors,i=n.label;return new FB(i,r.computeMeanDistance(t,s))}).reduce(function(n,s){return n.distance<s.distance?n:s})},e.prototype.findBestMatch=function(t){var r=this.matchDescriptor(t);return r.distance<this.distanceThreshold?r:new FB("unknown",r.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var r=t.labeledDescriptors.map(function(n){return ev.fromJSON(n)});return new e(r,t.distanceThreshold)},e}();const hMe=()=>{const e=w.useRef(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState(null),[d,u]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState(null),[y,C]=w.useState(!1),[N,k]=w.useState(0);w.useEffect(()=>{O()},[]);const S=async()=>{try{console.log("Starting camera...");const B={video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}},te=await navigator.mediaDevices.getUserMedia(B);e.current&&(e.current.srcObject=te,e.current.onloadedmetadata=()=>{C(!0),console.log("Camera ready")})}catch(B){console.error("Camera access error:",B),alert("Camera access denied or not available")}},D={local:"/weights",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},E=async(B,te,X)=>{const ce=[{name:"Local Weights",url:D.local},{name:"Primary CDN",url:D.cdn.primary},{name:"Backup CDN",url:D.cdn.backup}];for(const M of ce)try{return console.log(` Loading ${te} from ${M.name}...`),await B.loadFromUri(M.url),console.log(` ${te} loaded successfully from ${M.name}`),X&&X(),{success:!0,source:M.name}}catch(q){console.warn(` Failed to load ${te} from ${M.name}:`,q.message),M.name==="Local Weights"&&console.log(` Falling back to CDN for ${te}...`)}throw new Error(`Failed to load ${te} from all sources (local weights + CDN)`)},T=async()=>{try{console.log(" Loading face-api models (Local Weights + CDN fallback)..."),k(5);const B=[{net:Ka.tinyFaceDetector,name:"Tiny Face Detector",progress:30},{net:Ka.faceLandmark68Net,name:"Face Landmark 68",progress:65},{net:Ka.faceRecognitionNet,name:"Face Recognition",progress:95}];for(const te of B)await E(te.net,te.name,()=>k(te.progress)),await new Promise(X=>setTimeout(X,100));k(100),console.log(" All models loaded successfully!"),u(!0),S()}catch(B){console.error(" Critical: All model loading attempts failed:",B),k(0),A(B)}},A=B=>{const te=`
Face recognition models failed to load:
${B.message}

This might be due to:
- Corrupted local weight files
- Network connectivity issues
- Missing model files

Would you like to:
1. Try again (Recommended)
2. Continue without face recognition
3. Use CDN only
  `;confirm(te+`

Click OK to try again, Cancel to continue without face recognition`)?setTimeout(()=>T(),1e3):(console.log(" Continuing without face recognition..."),u(!1),startBasicCamera())},L=async()=>{try{console.log(" Loading models from CDN only..."),k(10);const B=D.cdn.primary;await Ka.tinyFaceDetector.loadFromUri(B),k(40),await Ka.faceLandmark68Net.loadFromUri(B),k(70),await Ka.faceRecognitionNet.loadFromUri(B),k(100),console.log(" All models loaded from CDN"),u(!0),S()}catch(B){console.error("CDN loading also failed:",B),alert("Unable to load face recognition models. Please check your internet connection.")}},P=async()=>{const B=["/weights/tiny_face_detector_model-weights_manifest.json","/weights/tiny_face_detector_model-shard1","/weights/face_landmark_68_model-weights_manifest.json","/weights/face_landmark_68_model-shard1","/weights/face_recognition_model-weights_manifest.json","/weights/face_recognition_model-shard1","/weights/face_recognition_model-shard2"];console.log(" Checking weight file integrity...");for(const te of B)try{const X=await fetch(te,{method:"HEAD"}),ce=X.headers.get("content-length");if(console.log(`${X.ok?"":""} ${te}: ${ce?ce+" bytes":"Size unknown"}`),!X.ok)return console.warn(` Missing or inaccessible: ${te}`),!1}catch(X){return console.error(` Error checking ${te}:`,X),!1}return console.log(" All weight files validated successfully"),!0},O=async()=>{console.log(" Starting comprehensive model loading..."),await P()?(console.log(" Local weights validated, using hybrid approach"),await T()):(console.log(" Local weights invalid, using CDN only"),await L())},J=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}try{v(!0),console.log("Fetching employee by ID...");const B=await fetch(`/api/attendance/employee/${t.trim()}`);if(!B.ok){if(B.status===404){alert("Employee not found with this ID"),o(""),s("");return}throw new Error(`HTTP error! status: ${B.status}`)}const te=await B.json();o(te.name),s(te.name),alert(`Employee found: ${te.name}`)}catch(B){console.error("Error fetching employee:",B),alert("Error fetching employee details. Please try again."),o(""),s("")}finally{v(!1)}},W=async B=>{try{m(!0),console.log("Checking for duplicate faces...");const X=await(await fetch("/api/attendance/employees")).json();if(X.length===0)return b({isDuplicate:!1,message:"No existing employees to compare with."}),!1;const ce=X.map(z=>{const K=z.descriptor.map(ne=>parseFloat(ne)),ee=new Float32Array(K);return new ev(z._id,[ee])}),q=new iK(ce,.5).findBestMatch(new Float32Array(B));if(console.log("Duplicate check result:",q.label,"Distance:",q.distance),q.label!=="unknown"){const z=X.find(ee=>ee._id===q.label),K=(100-q.distance*100).toFixed(1);return b({isDuplicate:!0,employeeName:z.name,similarity:K,message:` Face matches existing employee: ${z.name} (${K}% similarity)`}),!0}else return b({isDuplicate:!1,message:` No duplicate found. Face is unique (closest match: ${(100-q.distance*100).toFixed(1)}% similarity)`}),!1}catch(te){return console.error("Error checking duplicates:",te),b({isDuplicate:!1,message:" Could not check for duplicates. Proceeding anyway."}),!1}finally{m(!1)}},re=async()=>{if(!d){alert("Models are still loading, please wait...");return}if(!y||!e.current){alert("Camera not ready");return}try{console.log("Capturing face...");const B=await cMe(e.current,new aI).withFaceLandmarks().withFaceDescriptor();if(B){const te=Array.from(B.descriptor);c(te),console.log("Face captured successfully. Checking for duplicates...");const X=await W(te);alert(X?" Warning: This face appears to match an existing employee. Please check the details below.":"Face captured successfully! No duplicate found. You can now register.")}else alert("No face detected. Please make sure your face is clearly visible and try again."),b(null)}catch(B){console.error("Face detection error:",B),alert("Error detecting face. Please try again."),b(null)}},U=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}if(!n.trim()){alert("Please fetch employee name using Employee ID");return}if(!l){alert("Please capture face first");return}if(!(g&&g.isDuplicate&&!window.confirm(` WARNING: This face matches existing employee "${g.employeeName}" with ${g.similarity}% similarity.

Are you sure you want to register this person as a new employee?

Click OK to proceed anyway, or Cancel to stop.`)))try{console.log("Registering employee...");const B=document.createElement("canvas");B.width=e.current.videoWidth,B.height=e.current.videoHeight,B.getContext("2d").drawImage(e.current,0,0);const X=B.toDataURL("image/png"),ce=await fetch("/api/attendance/employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:t.trim(),name:n.trim(),descriptor:l})});if(!ce.ok){const z=await ce.json();throw new Error(z.error||"Registration failed")}const M=await ce.json();alert(` Employee "${n.trim()}" registered successfully!`);const q=e.current.srcObject;q&&(q.getTracks().forEach(K=>K.stop()),e.current.srcObject=null),r(""),s(""),o(""),c(null),b(null),C(!1)}catch(B){console.error("Registration error:",B),alert(`Registration failed: ${B.message}`)}},Q=async()=>{try{e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(X=>X.stop()),c(null),b(null),C(!1),await S()}catch(B){console.error("Error restarting camera:",B),alert("Error restarting camera")}};return a.jsx("div",{className:"content",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-center mb-5",children:[a.jsx("h1",{className:" fw-bold text-dark mb-3",children:"Employee Face Registration"}),a.jsx("p",{className:" text-muted",children:"Register employee faces for attendance tracking"})]}),a.jsx("div",{className:"card shadow-lg border-0 rounded-4 overflow-hidden",children:a.jsxs("div",{className:"card-body p-5",children:[a.jsxs("div",{className:"row g-5",children:[a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Camera Feed"})}),!d&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"progress",style:{height:"8px"},children:a.jsx("div",{className:"progress-bar bg-primary progress-bar-animated progress-bar-striped",style:{width:`${N}%`}})}),a.jsxs("p",{className:"text-center text-muted small mt-2",children:["Loading models... ",N,"%"]})]}),a.jsx("div",{className:"position-relative mb-4",children:a.jsxs("div",{className:"card border-3 border-secondary rounded-3 overflow-hidden shadow",children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100",style:{height:"320px",objectFit:"cover",backgroundColor:"#f8f9fa"}}),!y&&d&&a.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary mb-2",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"text-muted mb-0",children:"Starting camera..."})]})})]})}),a.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[a.jsx("button",{onClick:re,disabled:!d||!y||h,className:`btn btn-lg fw-semibold px-4 ${d&&y&&!h?"btn-primary shadow":"btn-secondary"}`,children:d?y?h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-camera-fill me-2"}),"Capture & Check"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Camera Starting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading Models..."]})}),a.jsxs("button",{onClick:Q,className:"btn btn-outline-info btn-lg fw-semibold px-4",children:[a.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Restart Camera"]})]})]}),a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Employee Details"})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee ID"}),a.jsxs("div",{className:"input-group input-group-lg",children:[a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Employee ID",value:t,onChange:B=>r(B.target.value)}),a.jsx("button",{onClick:J,disabled:p||!t.trim(),className:`btn ${!p&&t.trim()?"btn-success":"btn-secondary"} fw-semibold`,type:"button",children:p?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Fetching..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-search me-2"}),"Fetch"]})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee Name"}),a.jsx("input",{type:"text",className:"form-control form-control-lg bg-light",value:n,readOnly:!0,placeholder:"Name will be fetched automatically"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("button",{onClick:U,disabled:!t.trim()||!n.trim()||!l||h,className:`btn btn-lg w-100 fw-bold py-3 ${t.trim()&&n.trim()&&l&&!h?g&&g.isDuplicate?"btn-danger":"btn-success":"btn-secondary"} shadow`,children:g&&g.isDuplicate?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Register Anyway "]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-person-plus me-2"}),"Register Employee"]})})}),a.jsxs("div",{className:"mb-4",children:[!d&&a.jsxs("div",{className:"alert alert-info d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Loading face recognition models..."})]}),d&&!y&&a.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Starting camera..."})]}),d&&y&&!l&&a.jsxs("div",{className:"alert alert-primary mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-check-circle me-2"}),"Ready - Enter Employee ID and capture face"]}),l&&!g&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking for duplicates..."]}),l&&g&&!g.isDuplicate&&a.jsxs("div",{className:"alert alert-success mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Face verified unique, ready to register"]}),l&&g&&g.isDuplicate&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Potential duplicate detected"]})]})]})]}),g&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:`alert ${g.isDuplicate?"alert-warning border-warning":"alert-success border-success"} border-3`,children:[a.jsxs("h5",{className:`alert-heading fw-bold ${g.isDuplicate?"text-warning":"text-success"}`,children:[a.jsx("i",{className:`bi ${g.isDuplicate?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),"Duplicate Check Result"]}),a.jsx("p",{className:"mb-2 fw-semibold",children:g.message}),g.isDuplicate&&a.jsxs("p",{className:"mb-0 small",children:[a.jsx("i",{className:"bi bi-info-circle me-1"}),"Proceeding will register this person as a separate employee, which may cause recognition issues."]})]})}),a.jsx("div",{className:"mt-5",children:a.jsx("div",{className:"card bg-light border-0",children:a.jsxs("div",{className:"card-body p-4",children:[a.jsxs("h5",{className:"card-title fw-bold text-dark mb-3",children:[a.jsx("i",{className:"bi bi-info-circle me-2"}),"Registration Instructions"]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("ul",{className:"list-unstyled",children:[a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Enter valid Employee ID"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Click Fetch to get employee name"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Position face clearly in camera"]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("ul",{className:"list-unstyled",children:[a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Ensure good lighting"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Capture face and check duplicates"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Register only if no duplicates"]})]})})]})]})})})]})})]})})},fMe=()=>{const e=w.useRef(),t=w.useRef(),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(!1),[C,N]=w.useState(!1),k=w.useRef(),S=w.useRef(),D=w.useRef(!1);w.useEffect(()=>(L().then(()=>{O(),re()}),()=>{E()}),[]),w.useEffect(()=>(u&&o&&s&&m!=="completed"&&!C&&te(),()=>{k.current&&clearInterval(k.current)}),[u,o,s,m,C]);const E=()=>{k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(M=>M.stop()),S.current=null)},T={local:"/facemodels",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},A=async(M,q,z)=>{const K=[{name:"Local FaceModels",url:`${T.local}/${z}`},{name:"Primary CDN",url:T.cdn.primary},{name:"Backup CDN",url:T.cdn.backup}];for(const ee of K)try{return console.log(` Loading ${q} from ${ee.name}...`),await M.loadFromUri(ee.url),console.log(` ${q} loaded successfully from ${ee.name}`),{success:!0,source:ee.name}}catch(ne){console.warn(` Failed to load ${q} from ${ee.name}:`,ne.message),ee.name==="Local FaceModels"&&console.log(` Falling back to CDN for ${q}...`)}throw new Error(`Failed to load ${q} from all sources`)},L=async()=>{try{console.log("Loading face recognition models..."),setLoadingProgress&&setLoadingProgress(10);const M=[{net:Ka.tinyFaceDetector,name:"Tiny Face Detector",path:"tiny_face_detector"},{net:Ka.faceLandmark68Net,name:"Face Landmark 68",path:"face_landmark_68"},{net:Ka.faceRecognitionNet,name:"Face Recognition",path:"face_recognition"}];for(let q=0;q<M.length;q++){const z=M[q];await A(z.net,z.name,z.path),setLoadingProgress&&setLoadingProgress(30+q*20)}setLoadingProgress&&setLoadingProgress(100),console.log(" All models loaded successfully"),l(!0)}catch(M){console.error(" Error loading models:",M);const q=`
Failed to load face recognition models: ${M.message}

This could be due to:
- Corrupted local model files
- Network connectivity issues
- Missing model files

Would you like to try CDN-only mode?
    `;confirm(q)?await P():(alert("Face recognition will be disabled. You can still use basic camera features."),l&&l(!1))}},P=async()=>{try{console.log(" Loading models from CDN only..."),setLoadingProgress&&setLoadingProgress(10);const M=T.cdn.primary;await Ka.tinyFaceDetector.loadFromUri(M),setLoadingProgress&&setLoadingProgress(40),await Ka.faceLandmark68Net.loadFromUri(M),setLoadingProgress&&setLoadingProgress(70),await Ka.faceRecognitionNet.loadFromUri(M),setLoadingProgress&&setLoadingProgress(100),console.log(" All models loaded from CDN"),l(!0)}catch(M){console.error(" CDN loading also failed:",M),alert("Unable to load face recognition models. Please check your internet connection and try again."),setLoadingProgress&&setLoadingProgress(0)}},O=async()=>{try{console.log("Starting camera...");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}}});S.current=M,e.current&&(e.current.srcObject=M,e.current.addEventListener("loadedmetadata",()=>{t.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight,h(!0),N(!1),console.log("Camera ready, starting automatic face recognition..."))}))}catch(M){console.error("Camera access error:",M),alert("Camera access denied or not available")}},J=()=>{console.log("Stopping camera..."),k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(M=>{M.stop(),console.log("Video track stopped")}),S.current=null),e.current&&(e.current.srcObject=null),t.current&&t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),h(!1),N(!0),y(!1),D.current=!1,console.log("Camera stopped successfully")},W=async()=>{console.log("Restarting camera..."),J(),p(null),g(null),y(!1),D.current=!1,setTimeout(()=>{O()},1e3)},re=async()=>{try{d(!0),console.log("Loading registered employees...");const M=await Oe.get("/api/attendance/employees");if(console.log(`Found ${M.data.length} registered employees`),M.data.length===0){d(!1);return}const q=M.data.map(z=>{console.log(`Loading employee: ${z.name}, descriptor length: ${z.descriptor.length}`);const K=z.descriptor.map(ne=>parseFloat(ne)),ee=new Float32Array(K);return new ev(z._id,[ee])});console.log("Created labeled descriptors for",q.length,"employees"),i(new iK(q,.6)),n(M.data),console.log("Face matcher initialized successfully"),d(!1)}catch(M){console.error("Error loading employees:",M),alert("Error loading registered employees"),d(!1)}},U=async(M,q,z)=>{if(!(D.current||b))try{y(!0),D.current=!0,console.log(`Auto-capturing attendance for ${q}...`);const K=await Oe.post("/api/attendance/auto",{employeeId:M});g({...K.data.attendance,confidence:z,type:K.data.type,workingSummary:K.data.workingSummary,employeeName:q}),K.data.type==="IN"?(alert(` Welcome ${q}!
IN time recorded`),p("in"),setTimeout(()=>{D.current=!1,y(!1)},1e4)):K.data.type==="OUT"?(alert(` SEE YOU TOMM${q}!
OUT time recorded`),p("completed"),setTimeout(()=>{J(),console.log("Attendance completed - Camera stopped automatically")},3e3)):K.data.type==="COMPLETED"&&(alert(` Hello ${q}!
Your attendance is already complete for today.
${K.data.workingSummary}`),p("completed"),setTimeout(()=>{J(),console.log("Attendance already completed - Camera stopped automatically")},3e3))}catch(K){console.error("Auto attendance error:",K),K.response&&K.response.data?alert(` Error: ${K.response.data.error}`):alert(` Failed to mark attendance for ${q}. Please try again.`),setTimeout(()=>{D.current=!1,y(!1)},8080)}},Q=(M,q)=>{const z=q.getContext("2d");z.clearRect(0,0,q.width,q.height),M&&M.length>0&&M.forEach(K=>{const{box:ee,label:ne,distance:ae,employeeId:ie}=K;if(ne!=="unknown"&&!D.current&&!b&&m!=="completed"){const Le=(100-ae*100).toFixed(1);Le>60&&U(ie,ne,Le)}const G=.4,de=ee.width*(1-G),Y=ee.height*(1-G),oe=ee.x+(ee.width-de)/2,Se=ee.y+(ee.height-Y)/2;z.strokeStyle=ne==="unknown"?"#ff0000":"#00ff00",z.lineWidth=2,z.strokeRect(oe,Se,de,Y);const ue=ne==="unknown"?"Unknown":ne;`${(100-ae*100).toFixed(1)}`;const ye=`${ue} ${b?" (Capturing...)":""}`;z.font="14px Arial",z.fillStyle=ne==="unknown"?"#ff0000":b?"#ff8c00":"#00ff00";const Ne=z.measureText(ye).width+10;z.fillRect(oe,Se-25,Ne,25),z.fillStyle="#ffffff",z.fillText(ye,oe+5,Se-8)})},B=async()=>{if(!(!e.current||!t.current||!o||!s||C))try{const q=(await dMe(e.current,new aI).withFaceLandmarks().withFaceDescriptors()).map(z=>{const K=s.findBestMatch(z.descriptor),ee=K.label!=="unknown"?r.find(ne=>ne._id===K.label):null;return{box:z.detection.box,label:ee?ee.name:"unknown",employeeId:K.label!=="unknown"?K.label:null,distance:K.distance}});Q(q,t.current)}catch(M){console.error("Real-time detection error:",M)}},te=()=>{k.current&&clearInterval(k.current),k.current=setInterval(B,1e3),console.log("Real-time detection with auto-capture started")},X=()=>C&&m==="completed"?" Attendance Complete - Camera Stopped":C?" Camera Stopped":m==="completed"?" Attendance Complete for Today":m==="in"?" Checked IN - Show your face again to mark OUT time":b?" Capturing attendance...":" Ready for automatic attendance capture",ce=()=>C?"#6c757d":m==="completed"?"#28a745":m==="in"?"#007bff":b?"#ff8c00":"#17a2b8";return a.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[a.jsx("div",{style:{margin:"20px 0",position:"relative",display:"inline-block"},children:C?a.jsx("div",{style:{width:"400px",height:"300px",border:"2px solid #6c757d",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:m==="completed"?"#d4edda":"#f8f9fa",color:m==="completed"?"#155724":"#495057",fontSize:"16px",fontWeight:"bold",textAlign:"center",padding:"20px",boxSizing:"border-box"},children:m==="completed"?a.jsxs(a.Fragment,{children:[a.jsx("div",{children:" Attendance Completed!"}),a.jsx("div",{style:{fontSize:"14px",marginTop:"10px"},children:" Camera Stopped"}),v&&v.workingSummary&&a.jsxs("div",{style:{fontSize:"14px",fontWeight:"normal",marginTop:"10px",lineHeight:"1.4"},children:[" ",v.employeeName,a.jsx("br",{})," ",v.workingSummary]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{children:" Camera Stopped"}),a.jsx("div",{style:{fontSize:"14px",marginTop:"10px",fontWeight:"normal"},children:'Click "Start Camera" to resume'})]})}):a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,width:"400",height:"300",style:{border:"2px solid #ccc",borderRadius:"8px"}}),a.jsx("canvas",{ref:t,width:"400",height:"300",style:{position:"absolute",top:0,left:0,pointerEvents:"none",borderRadius:"8px"}}),b&&a.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",background:"rgba(255, 140, 0, 0.9)",color:"white",padding:"5px 10px",borderRadius:"15px",fontSize:"12px",fontWeight:"bold"},children:" Capturing..."})]})}),a.jsx("div",{style:{margin:"20px 0",padding:"10px",backgroundColor:ce(),color:"white",borderRadius:"6px",fontSize:"16px",fontWeight:"bold"},children:X()}),v&&a.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:[a.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Last Attendance Record"}),a.jsxs("div",{style:{textAlign:"left",fontSize:"14px",color:"#6c757d"},children:[a.jsx("strong",{children:"Employee:"})," ",v.employeeName,a.jsx("br",{}),a.jsx("strong",{children:"Type:"})," ",v.type==="IN"?" Check IN":v.type==="OUT"?" Check OUT":" Already Complete",a.jsx("br",{}),v.inTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"IN Time:"})," ",new Date(v.inTime).toLocaleString(),a.jsx("br",{})]}),v.outTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"OUT Time:"})," ",new Date(v.outTime).toLocaleString(),a.jsx("br",{})]}),v.workingSummary&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Working Hours:"})," ",v.workingSummary,a.jsx("br",{})]})]})]}),a.jsx("div",{style:{margin:"20px 0"},children:C?a.jsxs("div",{children:[a.jsx("button",{onClick:W,style:{padding:"15px 30px",fontSize:"18px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginRight:"10px"},children:" Start Camera"}),a.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"15px 30px",fontSize:"18px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:" New Session"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:re,disabled:c,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer",marginRight:"10px"},children:c?"Loading...":" Refresh Employee List"}),a.jsx("button",{onClick:J,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Stop Camera"})]})}),a.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:C?a.jsx("div",{children:m==="completed"?a.jsx("p",{style:{color:"#28a745",fontSize:"16px",fontWeight:"bold"},children:" Daily attendance completed successfully! Camera stopped for privacy."}):a.jsx("p",{style:{color:"#6c757d",fontSize:"16px"},children:' Camera is stopped. Click "Start Camera" to resume attendance monitoring.'})}):a.jsxs(a.Fragment,{children:[!o&&a.jsx("p",{children:" Loading face recognition models..."}),o&&c&&a.jsx("p",{children:" Loading registered employees..."}),o&&!u&&a.jsx("p",{children:" Starting camera..."}),o&&!c&&r.length===0&&a.jsx("p",{style:{color:"orange"},children:" No employees registered. Please register employees first."})]})})]})},mMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(new Date().toISOString().split("T")[0]),[s,i]=w.useState(!1),[o,l]=w.useState("date");w.useEffect(()=>{d()},[]);const c=async(N=null)=>{i(!0);try{let k="/api/attendance/records";N&&(k+=`?date=${N}`);const S=await Oe.get(k);let D=[];Array.isArray(S.data)&&(D=S.data),t(D),console.log("URL:",k),console.log("Fetched attendance data:",D)}catch(k){console.error("Error fetching attendance:",k),alert("Error fetching attendance records"),t([])}i(!1)},d=async()=>{i(!0);try{const N=await Oe.get("/api/attendance/today");let k=[];N.data&&N.data.employees&&Array.isArray(N.data.employees)&&(k=N.data.employees.map(S=>({...S,date:N.data.date,dateObject:N.data.dateObject}))),t(k),console.log("Today's attendance data:",k),l("today")}catch(N){console.error("Error fetching today's attendance:",N),alert("Error fetching today's attendance"),t([])}i(!1)},u=async N=>{i(!0);try{const k=await Oe.get(`/api/attendance/date/${N}`);let S=[];k.data&&k.data.employees&&Array.isArray(k.data.employees)&&(S=k.data.employees.map(D=>({...D,date:k.data.date,dateObject:k.data.dateObject}))),t(S),console.log(`Attendance data for ${N}:`,S)}catch(k){console.error("Error fetching attendance by date:",k),k.response&&k.response.status===404?alert(`No attendance records found for ${N}`):alert("Error fetching attendance records"),t([])}i(!1)},h=()=>{u(r),l("date")},m=()=>{c(),l("all")},p=N=>N?new Date(N).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",v=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=N=>{if(!N||N===0)return"-";const k=Math.floor(N),S=Math.round(N%1*60);return k===0?`${S}m`:S===0?`${k}h`:`${k}h ${S}m`},b=(N,k)=>N==="OUT"||k?a.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:" OUT"}):a.jsx("span",{style:{backgroundColor:"#28a745",color:"white",padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:" IN"}),y=()=>{const N=e.reduce((k,S)=>k+(S.workingHours||0),0);return g(N)},C=()=>{switch(o){case"today":return"Today's Attendance";case"date":return`Attendance for ${v(r)}`;case"all":return"All Attendance Records";default:return"Attendance Records"}};return a.jsxs("div",{style:{padding:"20px"},children:[a.jsx("h2",{children:" Employee Attendance Dashboard"}),a.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("label",{style:{fontSize:"14px",fontWeight:"bold"},children:" Select Date:"}),a.jsx("input",{type:"date",value:r,onChange:N=>n(N.target.value),style:{padding:"8px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px"}}),a.jsx("button",{onClick:h,disabled:s,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" Filter"})]}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:d,disabled:s,style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" Today"}),a.jsx("button",{onClick:m,disabled:s,style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" All Records"})]})]}),a.jsxs("div",{style:{margin:"20px 0"},children:[a.jsx("h3",{style:{color:"#495057",margin:"10px 0"},children:C()}),e.length>0&&a.jsxs("div",{style:{display:"flex",gap:"20px",padding:"10px 15px",backgroundColor:"#e3f2fd",borderRadius:"6px",fontSize:"14px",color:"#1976d2"},children:[a.jsxs("span",{children:[a.jsx("strong",{children:" Total Records:"})," ",e.length]}),o!=="all"&&a.jsxs("span",{children:[a.jsx("strong",{children:" Total Hours:"})," ",y()]})]})]}),s?a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:a.jsx("p",{style:{fontSize:"16px",color:"#6c757d"},children:" Loading attendance records..."})}):a.jsx("div",{children:e.length===0?a.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7"},children:a.jsx("p",{style:{fontSize:"16px",color:"#856404",margin:0},children:" No attendance records found for the selected criteria."})}):a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #dee2e6",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#495057",color:"white"},children:[a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Employee Name"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Employee ID"}),o==="all"&&a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Date"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" IN Time"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" OUT Time"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Working Hours"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Status"})]})}),a.jsx("tbody",{children:e.map((N,k)=>a.jsxs("tr",{style:{backgroundColor:k%2===0?"#ffffff":"#f8f9fa",transition:"background-color 0.2s"},onMouseEnter:S=>S.target.parentElement.style.backgroundColor="#e8f4f8",onMouseLeave:S=>S.target.parentElement.style.backgroundColor=k%2===0?"#ffffff":"#f8f9fa",children:[a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",fontWeight:"bold",color:"#495057"},children:`${N.firstName||""} ${N.lastName||""}`.trim()||"Unknown Employee"}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",color:"#6c757d",fontSize:"13px"},children:N.employeeId||"N/A"}),o==="all"&&a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",color:"#6c757d"},children:v(N.date)}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:N.inTime?a.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:p(N.inTime)}):a.jsx("span",{style:{color:"#6c757d"},children:"-"})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:N.outTime?a.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:p(N.outTime)}):a.jsx("span",{style:{color:"#ffc107",fontStyle:"italic"},children:"Still Working"})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:a.jsx("span",{style:{color:N.workingHours>0?"#17a2b8":"#6c757d",fontWeight:N.workingHours>0?"bold":"normal"},children:g(N.workingHours)})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:b(N.status,N.outTime)})]},`${N.employeeObjectId}-${N.date}-${k}`))})]})})}),e.length>0&&a.jsxs("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[a.jsx("h4",{style:{margin:"0 0 15px 0",color:"#495057"},children:" Summary Statistics"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#d4edda",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:e.length}),a.jsx("div",{style:{fontSize:"12px",color:"#155724"},children:"Total Records"})]}),a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#d1ecf1",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460"},children:e.filter(N=>N.status==="IN"&&!N.outTime).length}),a.jsx("div",{style:{fontSize:"12px",color:"#0c5460"},children:"Currently Working"})]}),a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#f8d7da",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#721c24"},children:e.filter(N=>N.outTime).length}),a.jsx("div",{style:{fontSize:"12px",color:"#721c24"},children:"Completed Shifts"})]}),o!=="all"&&a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#fff3cd",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#856404"},children:y()}),a.jsx("div",{style:{fontSize:"12px",color:"#856404"},children:"Total Hours"})]})]})]}),a.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#e7f3ff",borderRadius:"6px"},children:[a.jsx("h5",{style:{marginTop:0,color:"#0056b3"},children:" How to Read the Data:"}),a.jsxs("ul",{style:{textAlign:"left",color:"#004085",fontSize:"13px",margin:"10px 0 0 0"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:" Employee Name:"})," Full name from attendance record"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" Employee ID:"})," Unique employee identifier"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" IN Time:"})," When employee checked in"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" OUT Time:"})," When employee checked out"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" Working Hours:"})," Automatically calculated duration between IN and OUT"]}),a.jsxs("li",{children:[a.jsx("strong",{children:'"Still Working":'})," Employee checked IN but hasn't checked OUT yet"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Status Badges:"}),"  = Currently IN,  = Checked OUT"]})]})]})]})},pMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/billingcategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),J=P||O;t(W=>({...W,[T]:L})),n(W=>({...W,[T]:J}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),N=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/billingcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/billingcategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Billing Category"})}),a.jsx("div",{className:"d-flex gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Billing Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})};function xMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=y=>{const{name:C,value:N}=y.target;if(C==="rangeFrom"||C==="rangeTo"){const k=N.replace(/\D/g,"");if(k.length<=6){const S=parseInt(k);k.length===6&&S>=1e5&&S<=999999?t(D=>({...D,[C]:k})):k.length<6&&t(D=>({...D,[C]:k}))}}else t(k=>({...k,[C]:N}))},l=async y=>{y.preventDefault();try{if(s){const C=await Oe.put(`/api/customer-categories/${s}`,e);alert("Customer Category Updated!"),n(N=>N.map(k=>k._id===s?C.data:k)),i(null)}else{const C=await Oe.post("/api/customer-categories",e);alert("Customer Category Added!"),n([...r,C.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),b(),window.location.reload()}catch(C){console.error(C),alert("Error adding/updating category")}},c=async()=>{try{const y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),N=await Oe.get("/api/customer-categories",{params:{companyId:y,financialYear:C}});n(N.data)}catch(y){console.error(y)}};w.useEffect(()=>{c()},[]);const d=y=>{t({categoryName:y.categoryName,rangeFrom:y.rangeFrom,rangeTo:y.rangeTo}),i(y._id)},[u,h]=w.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=w.useState(!1),b=()=>g(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Customer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit Customer Category":"Add Customer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Premium",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",min:"100000",max:"999999",value:e.rangeFrom,onChange:o,required:!0,pattern:"\\d{6}",className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2 ",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",max:e.rangeFrom?e.rangeFrom+9999:1999,placeholder:"e.g., 199999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[" ",a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[r.map(y=>a.jsxs("tr",{children:[a.jsx("td",{children:y.categoryName}),a.jsx("td",{children:y.rangeFrom}),a.jsx("td",{children:y.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{d(y),m()},children:"Edit"})})]},y._id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"text-center",children:"No categories found."})})]})]})})]})})]})]})})})}const vMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;w.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsissuecategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsissuecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsissuecategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),N()},N=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Issue Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:N,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Issue Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Issue Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control"})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},gMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;w.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsreceiptcategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsreceiptcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsreceiptcategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),N()},N=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Receipt Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:N,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Receipt Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Receipt Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control "})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},bMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState(localStorage.getItem("selectedCompanyId")),[s,i]=w.useState(localStorage.getItem("financialYear")),[o,l]=w.useState({}),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(!1),[v,g]=w.useState(!1),b=/^\d{0,6}$/;w.useEffect(()=>{y()},[]);const y=async()=>{try{const A=await Oe.get("/api/invoicecategory",{params:{companyId:r,financialYear:s}});d(A.data)}catch(A){console.error("Failed to fetch categories",A)}},C=(A,L)=>{switch(A){case"categoryName":if(!L)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!L)return`${A} is required`;if(!b.test(L))return"Max 6 digits allowed";break}return""},N=A=>{const{name:L,value:P}=A.target;let O=P,J="";switch(L){case"categoryName":O=P,O.length>100&&(O=O.slice(0,100),J="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":O=P.replace(/[^0-9]/g,""),O.length>6&&(O=O.slice(0,6),J="Maximum 6 digits allowed");break}const W=C(L,O),re=J||W;t(U=>({...U,[L]:O})),l(U=>({...U,[L]:re}))},k=()=>!C("categoryName",e.categoryName)&&!C("rangeStart",e.rangeStart)&&!C("rangeEnd",e.rangeEnd),S=async A=>{A.preventDefault();const L={};if(Object.keys(e).forEach(P=>{L[P]=C(P,e[P])}),l(L),!Object.values(L).some(P=>P))try{u?(await Oe.put(`/api/invoicecategory/${u}`,e),alert("Category updated successfully!")):(await Oe.post("/api/invoicecategory",e),alert("Category saved successfully!")),y(),t({categoryName:"",rangeStart:"",rangeEnd:""}),h(null),T(),window.location.reload()}catch(P){console.error(P),alert("Failed to save category.")}},D=A=>{t({categoryName:A.categoryName,rangeStart:A.rangeStart,rangeEnd:A.rangeEnd}),h(A._id),E()},E=()=>p(!0),T=()=>p(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Invoice Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:E,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add vendor Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:c.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:A.categoryName}),a.jsx("td",{children:A.rangeStart}),a.jsx("td",{children:A.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>D(A),children:"Edit"})})]},A._id))})]})})})}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[u?"Edit":"Create"," Invoice Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{T(),h(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:S,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(A=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:A==="categoryName"?"Category Name":A==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:A,value:e[A],onChange:N,className:"form-control "})]},A))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!k(),children:u?"Update Category":"Add Category"})]})})]})})})]})]})})},VB=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;w.useEffect(()=>{d()},[]);const d=async()=>{try{const E=localStorage.getItem("selectedCompanyId"),T=localStorage.getItem("financialYear"),A=await Oe.get("/api/category",{params:{companyId:E,financialYear:T}});i(A.data)}catch(E){console.error("Failed to fetch categories",E)}},u=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!c.test(T))return"Max 6 digits allowed";break}return""},h=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=u(T,L),J=P||O;t(W=>({...W,[T]:L})),n(W=>({...W,[T]:J}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),[p,v]=w.useState({});w.useEffect(()=>{const E=async()=>{const T={};for(const A of s)try{const L=await Oe.post("/api/material/generate-id",{categoryId:A._id});T[A._id]=L.data.nextNumber}catch(L){console.error("Error generating ID for category:",A._id,L)}v(T)};s.length&&E()},[s]);const g=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=u(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/category/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/category",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},b=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id)},[y,C]=w.useState(!1),N=()=>C(!0),k=()=>C(!1),[S,D]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsx("div",{className:"content",children:a.jsxs("div",{children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Material Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{N()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Material Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.length>0&&s?.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{b(E),N()},children:"Edit"})})]},E._id))})]})})})}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Material Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:g,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:h,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})})})};function yMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({});localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{(k.target.name==="rangeFrom"||k.target.name==="rangeTo")&&(k.target.value=k.target.value.replace(/[^0-9]/g,"")),t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/po-categories/${s}`,e),alert("PO Category updated!")):(await Oe.post("/api/po-categories",e),alert("PO Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving PO Category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/po-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"PO Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:b,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add PO Category"]})})})]}),a.jsx("h2",{}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," PO Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{d(k),k.target.value=k.target.value.replace(/[^0-9]/g,"")},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",value:e.rangeTo,onChange:d,maxLength:6,placeholder:"Range To (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const jMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;w.useEffect(()=>{d()},[]);const d=async()=>{try{const N=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear"),S=await Oe.get("/api/purchasecategory",{params:{companyId:N,financialYear:k}});i(S.data)}catch(N){console.error("Failed to fetch categories",N)}},u=(N,k)=>{switch(N){case"categoryName":if(!k)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!k)return`${N} is required`;if(!c.test(k))return"Max 6 digits allowed";break}return""},h=N=>{const{name:k,value:S}=N.target;let D=S,E="";switch(k){case"categoryName":D=S,D.length>100&&(D=D.slice(0,100),E="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":D=S.replace(/[^0-9]/g,""),D.length>6&&(D=D.slice(0,6),E="Maximum 6 digits allowed");break}const T=u(k,D),A=E||T;t(L=>({...L,[k]:D})),n(L=>({...L,[k]:A}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),p=async N=>{N.preventDefault();const k={};if(Object.keys(e).forEach(S=>{k[S]=u(S,e[S])}),n(k),!Object.values(k).some(S=>S))try{o?(await Oe.put(`/api/purchasecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/purchasecategory",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(S){console.error(S),alert("Failed to save category.")}},v=N=>{t({categoryName:N.categoryName,prefix:N.prefix,rangeStart:N.rangeStart,rangeEnd:N.rangeEnd}),l(N._id)},[g,b]=w.useState(!1),y=()=>b(!0),C=()=>b(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Purchase Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Purchase Request Category"]})})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Purchase Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{C(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:p,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(N=>a.jsxs("div",{className:" col-xl-3 mb-3",children:[a.jsx("label",{className:"form-label",children:N==="categoryName"?"Category Name":N==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:N,value:e[N],onChange:h,className:"form-control "})]},N))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(N=>a.jsxs("tr",{children:[a.jsx("td",{children:N.categoryName}),a.jsx("td",{children:N.rangeStart}),a.jsx("td",{children:N.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(N),y()},children:"Edit"})})]},N._id))})]})})})]})})};function NMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),c=N=>{const{name:k,value:S}=N.target;t(D=>({...D,[k]:S}))},d=async N=>{N.preventDefault();try{s?await Oe.put(`/api/rfq-categories/${s}`,e):await Oe.post("/api/rfq-categories",e),t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),u(),C(),window.location.reload()}catch(k){console.error("Error submitting category:",k)}},u=async()=>{try{const N=await Oe.get("/api/rfq-categories",{params:{companyId:o,financialYear:l}});n(N.data)}catch(N){console.error("Error fetching categories:",N)}},h=N=>{t({categoryName:N.categoryName,rangeFrom:N.rangeFrom,rangeTo:N.rangeTo}),i(N._id)};w.useEffect(()=>{u()},[]);const[m,p]=w.useState(!1),v=()=>p(!0),g=()=>p(!1),[b,y]=w.useState(!1),C=()=>y(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"RFQ Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{v()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"isax isax-add-circle5 me-1"}),"RFQ Category"]})})})]}),a.jsx("h2",{}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit RFQ Category":"Add RFQ Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),g(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"categoryName",children:"Category Name"}),a.jsx("input",{name:"categoryName",placeholder:"Category Name",value:e.categoryName,onChange:c,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeFrom",children:"Range From"}),a.jsx("input",{name:"rangeFrom",placeholder:"Range From",value:e.rangeFrom,onChange:N=>{N.target.value=N.target.value.replace(/[^0-9]/g,""),c(N)},required:!0,type:"text",maxLength:6,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeTo",children:"Range To"}),a.jsx("input",{name:"rangeTo",placeholder:"Range To",value:e.rangeTo,onChange:N=>{N.target.value=N.target.value.replace(/[^0-9]/g,""),c(N)},required:!0,type:"text",maxLength:6,className:"form-control"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.categoryName}),a.jsx("td",{children:N.rangeFrom}),a.jsx("td",{children:N.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{h(N),v()},className:"btn btn-sm btn-primary",children:"Edit"})})]},N._id))})]})})})})]})}function zB(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const d=()=>{let S={};const D=/^\d{6}$/;return S.categoryName=e.categoryName?"":"Required",S.rangeFrom=e.rangeFrom?D.test(e.rangeFrom)?"":"Must be 6 digits":"Required",S.rangeTo=e.rangeTo?D.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(S),Object.values(S).every(E=>E==="")},u=S=>{t({...e,[S.target.name]:S.target.value})},h=async S=>{if(S.preventDefault(),!!d())try{s?(await Oe.put(`/api/sale-contract-categories/${s}`,e),alert("Contract category updated successfully!")):(await Oe.post("/api/sale-contract-categories",e),alert("Contract category added successfully!")),m(),v(),C(),window.location.reload()}catch{alert("Error saving contract category. Please try again.")}},m=async()=>{try{const S=await Oe.get("/api/sale-contract-categories",{params:{companyId:c}});n(S.data)}catch(S){console.error("Error fetching contract categories:",S)}},p=S=>{t(S),i(S._id),l({})},v=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{m()},[]);const[g,b]=w.useState(!1),y=()=>b(!0),C=()=>b(!1),[N,k]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-2",children:[a.jsx("div",{className:"my-auto mb-2",children:a.jsx("h2",{className:"mb-1",children:"Sales Contract Categories"})}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[a.jsx("i",{className:"fas fa-file-contract me-2"}),s?"Edit":"Create"," Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{C(),v()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:u,className:"form-control",placeholder:"Enter category name (e.g., Standard Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},className:"form-control",maxLength:6,placeholder:"Enter start range (6 digits)",min:"100000",max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:"form-control ",value:e.rangeTo,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-start",children:a.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("span",{className:"fw-medium",children:S.categoryName})})}),a.jsx("td",{children:S.rangeFrom?.toLocaleString()}),a.jsx("td",{children:S.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(S),y()},title:"Edit Category",children:"Edit"})})})]},S._id))})]})})})})]})}function wMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sale-quotation-categories/${s}`,e),alert("Category updated!")):(await Oe.post("/api/sale-quotation-categories",e),alert("Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sale-quotation-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Quotation Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Quotation Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Quotation Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,className:"form-control",placeholder:"Category Name"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,className:"form-control",placeholder:"Range From (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const SMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),c=/^[A-Za-z ]{0,100}$/,d=/^\d{0,6}$/;w.useEffect(()=>{u()},[]);const u=async()=>{try{const D=localStorage.getItem("selectedCompanyId"),E=localStorage.getItem("financialYear"),T=await Oe.get("/api/salecategory",{params:{companyId:D,financialYear:E}});i(T.data)}catch(D){console.error("Failed to fetch categories",D)}},h=(D,E)=>{switch(D){case"categoryName":if(!E)return"Category name is required";if(!c.test(E))return"Only alphabets (max 100 characters)";break;case"rangeStart":case"rangeEnd":if(!E)return`${D} is required`;if(!d.test(E))return"Max 6 digits allowed";break}return""},m=D=>{const{name:E,value:T}=D.target;let A=T,L="";switch(E){case"categoryName":A=T,A.length>100&&(A=A.slice(0,100),L="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":A=T.replace(/[^0-9]/g,""),A.length>6&&(A=A.slice(0,6),L="Maximum 6 digits allowed");break}const P=h(E,A),O=L||P;t(J=>({...J,[E]:A})),n(J=>({...J,[E]:O}))},p=()=>!h("categoryName",e.categoryName)&&!h("rangeStart",e.rangeStart)&&!h("rangeEnd",e.rangeEnd),v=async D=>{D.preventDefault();const E={};if(Object.keys(e).forEach(T=>{E[T]=h(T,e[T])}),n(E),!Object.values(E).some(T=>T))try{o?(await Oe.put(`/api/salecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/salecategory",e),alert("Category saved successfully!")),u(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(T){console.error(T),alert("Failed to save category.")}},g=D=>{t({categoryName:D.categoryName,rangeStart:D.rangeStart,rangeEnd:D.rangeEnd}),l(D._id)},[b,y]=w.useState(!1),C=()=>y(!0),N=()=>y(!1),[k,S]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Enquiry Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Sales Indent Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{N(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:v,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(D=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:D==="categoryName"?"Category Name":D==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:D,value:e[D],onChange:m,className:"form-control "})]},D))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!p(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(D=>a.jsxs("tr",{children:[a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeStart}),a.jsx("td",{children:D.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{g(D),C()},children:"Edit"})})]},D._id))})]})})})]})})};function CMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sales-order-categories/${s}`,e),alert("Sales Order Category updated!")):(await Oe.post("/api/sales-order-categories",e),alert("Sales Order Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sales-order-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Order Category  "})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Order Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Sales Order Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("h2",{}),a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"})}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"})})]}),a.jsx("button",{className:"btn btn-sm btn-primary mt-2 mb-2",type:"submit",children:s?"Update Category":"Add Category"})]})]})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const kMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/goodsTransferCategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),J=P||O;t(W=>({...W,[T]:L})),n(W=>({...W,[T]:J}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),N=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/goodsTransferCategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsTransferCategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Transfer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Transfer Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Transfer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"}),r[E]&&a.jsx("div",{className:"invalid-feedback",children:r[E]})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})};function _Me(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=b=>{const{name:y,value:C}=b.target;if(y==="rangeFrom"||y==="rangeTo"){const N=C.replace(/\D/g,"");if(N.length<=6){const k=parseInt(N);N.length===6&&k>=1e5&&k<=999999?t(S=>({...S,[y]:N})):N.length<6&&t(S=>({...S,[y]:N}))}}else t(N=>({...N,[y]:C}))},l=async b=>{b.preventDefault();try{if(s){const y=await Oe.put(`/api/vendor-categories/${s}`,e);alert("Vendor Category Updated!"),n(C=>C.map(N=>N._id===s?y.data:N)),i(null)}else{const y=await Oe.post("/api/vendor-categories",e);alert("Vendor Category Added!"),n([...r,y.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),window.location.reload()}catch(y){console.error(y),alert("Error adding/updating category")}},c=async()=>{try{const b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),C=await Oe.get("/api/vendor-categories",{params:{companyId:b,financialYear:y}});n(C.data)}catch(b){console.error(b)}};w.useEffect(()=>{c()},[]);const d=b=>{t({categoryName:b.categoryName,rangeFrom:b.rangeFrom,rangeTo:b.rangeTo}),i(b._id)},[u,h]=w.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Vendor Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Vendor Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit Vendor Category":"Add Vendor Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Hardware",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",value:e.rangeFrom,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",placeholder:"e.g., 999999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map(b=>a.jsxs("tr",{children:[a.jsx("td",{children:b.categoryName}),a.jsx("td",{children:b.rangeFrom}),a.jsx("td",{children:b.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{d(b),m()},className:"btn btn-sm btn-primary",children:"Edit"})})]},b._id))})]})})})})]})]})})}function EMe(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(""),[c,d]=w.useState({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""}),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState([]),[b,y]=w.useState([]),C=localStorage.getItem("selectedCompanyId"),N=localStorage.getItem("financialYear");w.useEffect(()=>{k(),S()},[]),w.useEffect(()=>{D()},[e,c]);const k=async()=>{try{i(!0);const W=await Oe.get("/api/goodsTransfer",{params:{companyId:C,financialYear:N}});t(W.data),l("")}catch(W){l("Failed to fetch goods transfers"),console.error("Error fetching transfers:",W)}finally{i(!1)}},S=async()=>{try{const W=await Oe.get("/api/goodsTransferCategory",{params:{companyId:C}});g(W.data);const re=await Oe.get("/api/locations",{params:{companyId:C,financialYear:N}});y(re.data)}catch(W){console.error("Error fetching dropdown data:",W)}},D=()=>{let W=[...e];c.category&&(W=W.filter(re=>re.category.toLowerCase().includes(c.category.toLowerCase()))),c.location&&(W=W.filter(re=>re.location.toLowerCase().includes(c.location.toLowerCase()))),c.docnumber&&(W=W.filter(re=>re.docnumber.toLowerCase().includes(c.docnumber.toLowerCase()))),c.dateFrom&&(W=W.filter(re=>new Date(re.docDate)>=new Date(c.dateFrom))),c.dateTo&&(W=W.filter(re=>new Date(re.docDate)<=new Date(c.dateTo))),n(W)},E=(W,re)=>{d(U=>({...U,[W]:re}))},T=()=>{d({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""})},A=W=>{p(W),h(!0)},L=W=>{const re=window.open("","_blank","width=800,height=600"),U=P(W);re.document.write(U),re.document.close(),re.onload=()=>{re.print()}},P=W=>{const re=new Date().toLocaleString(),U=J(W.items);return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Goods Transfer - ${W.docnumber}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 20px;
            }
            .company-name {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .document-title {
              font-size: 20px;
              font-weight: bold;
              color: #666;
            }
            .info-section {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .info-box {
              width: 48%;
            }
            .info-box h4 {
              background-color: #f8f9fa;
              padding: 8px;
              margin: 0 0 10px 0;
              border-left: 4px solid #007bff;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table td {
              padding: 5px;
              border-bottom: 1px solid #eee;
            }
            .info-table td:first-child {
              font-weight: bold;
              width: 40%;
            }
            .items-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            .items-table th,
            .items-table td {
              border: 1px solid #333;
              padding: 8px;
              text-align: left;
            }
            .items-table th {
              background-color: #f8f9fa;
              font-weight: bold;
            }
            .items-table tr:nth-child(even) {
              background-color: #f9f9f9;
            }
            .total-row {
              background-color: #e9ecef !important;
              font-weight: bold;
            }
            .footer {
              margin-top: 30px;
              border-top: 1px solid #333;
              padding-top: 20px;
            }
            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 40px;
            }
            .signature-box {
              width: 200px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              margin-top: 50px;
              padding-top: 5px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Your Company Name</div>
            <div class="document-title">GOODS TRANSFER DOCUMENT</div>
          </div>

          <div class="info-section">
            <div class="info-box">
              <h4>Document Information</h4>
              <table class="info-table">
                <tr>
                  <td>Document No:</td>
                  <td><strong>${W.docnumber}</strong></td>
                </tr>
                <tr>
                  <td>Category:</td>
                  <td>${W.category}</td>
                </tr>
                <tr>
                  <td>Description:</td>
                  <td>${W.catdesc||"N/A"}</td>
                </tr>
                <tr>
                  <td>Location:</td>
                  <td>${W.location}</td>
                </tr>
              </table>
            </div>
            
            <div class="info-box">
              <h4>Dates & Reference</h4>
              <table class="info-table">
                <tr>
                  <td>Document Date:</td>
                  <td>${O(W.docDate)}</td>
                </tr>
                <tr>
                  <td>Posting Date:</td>
                  <td>${O(W.postDate)}</td>
                </tr>
                <tr>
                  <td>Reference:</td>
                  <td>${W.reference||"N/A"}</td>
                </tr>
                <tr>
                  <td>Print Date:</td>
                  <td>${re}</td>
                </tr>
              </table>
            </div>
          </div>

          <h4>Items Details</h4>
          <table class="items-table">
            <thead>
              <tr>
                <th style="width: 5%">#</th>
                <th style="width: 15%">Material ID</th>
                <th style="width: 25%">Description</th>
                <th style="width: 8%">Qty</th>
                <th style="width: 8%">UOM</th>
                <th style="width: 10%">Price</th>
                <th style="width: 10%">Total</th>
                <th style="width: 10%">Del Date</th>
                <th style="width: 9%">Lot No</th>
              </tr>
            </thead>
            <tbody>
              ${W.items?W.items.map((Q,B)=>`
                <tr>
                  <td>${B+1}</td>
                  <td>${Q.materialId||"N/A"}</td>
                  <td>${Q.description||"N/A"}</td>
                  <td>${Q.quantity||"0"}</td>
                  <td>${Q.baseUnit||"N/A"}</td>
                  <td>${Q.price||"0.00"}</td>
                  <td>${(parseFloat(Q.quantity||0)*parseFloat(Q.price||0)).toFixed(2)}</td>
                  <td>${O(Q.deliveryDate)}</td>
                  <td>${Q.lotNo||"N/A"}</td>
                </tr>
              `).join(""):'<tr><td colspan="9" style="text-align: center;">No items found</td></tr>'}
              <tr class="total-row">
                <td colspan="6" style="text-align: right;"><strong>GRAND TOTAL:</strong></td>
                <td><strong>${U}</strong></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>

          <div class="footer">
            <div class="signature-section">
              <div class="signature-box">
                <div class="signature-line">Prepared By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Checked By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Approved By</div>
              </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666;">
              <p>This is a computer generated document. No signature required.</p>
              <p>Generated on: ${re} | User: ${localStorage.getItem("userLogin")||"System"}</p>
            </div>
          </div>
        </body>
      </html>
    `},O=W=>W?new Date(W).toLocaleDateString("en-IN"):"N/A",J=W=>!W||W.length===0?0:W.reduce((re,U)=>re+parseFloat(U.quantity||0)*parseFloat(U.price||0),0).toFixed(2);return s?a.jsx("div",{className:"container p-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading goods transfers..."})]})}):a.jsxs("div",{className:"container-fluid p-3",children:[a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("h4",{children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Goods Transfer List"]})}),o&&a.jsxs("div",{className:"alert alert-danger",role:"alert",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o]}),a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-7",children:a.jsxs("select",{className:"form-select form-select-sm",value:c.category,onChange:W=>E("category",W.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),v.map((W,re)=>a.jsx("option",{value:W.categoryName,children:W.categoryName},re))]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-7",children:a.jsxs("select",{className:"form-select form-select-sm",value:c.location,onChange:W=>E("location",W.target.value),children:[a.jsx("option",{value:"",children:"All Locations"}),b.map((W,re)=>a.jsx("option",{value:W.name||W.locationName,children:W.name||W.locationName},re))]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Doc No"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search...",value:c.docnumber,onChange:W=>E("docnumber",W.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"From"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateFrom,onChange:W=>E("dateFrom",W.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"To"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateTo,onChange:W=>E("dateTo",W.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:""})}),a.jsx("div",{className:"col-7",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:T,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})})]})})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:r.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("h5",{children:"No goods transfers found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or create a new goods transfer."})]}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Items Count"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((W,re)=>a.jsxs("tr",{children:[a.jsx("td",{children:re+1}),a.jsx("td",{children:W.docnumber}),a.jsx("td",{children:W.category}),a.jsx("td",{children:W.location}),a.jsx("td",{children:O(W.docDate)}),a.jsx("td",{children:O(W.postDate)}),a.jsx("td",{children:W.reference}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:W.items?W.items.length:0})}),a.jsx("td",{children:a.jsxs("strong",{children:["",J(W.items)]})}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>A(W),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>L(W),title:"Print Document",children:a.jsx("i",{className:"fas fa-print"})})]})})]},W._id||re))})]})})})}),u&&m&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Goods Transfer Details - ",m.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>h(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Document Information"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document No:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:m.docnumber})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Category:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:m.category})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Description:"}),a.jsx("td",{children:m.catdesc})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Location:"}),a.jsx("td",{children:m.location})]})]})})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Dates & Reference"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document Date:"}),a.jsx("td",{children:O(m.docDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Posting Date:"}),a.jsx("td",{children:O(m.postDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Reference:"}),a.jsx("td",{children:m.reference})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Created Date:"}),a.jsx("td",{children:O(m.date)})]})]})})})]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Items Details"}),a.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})]}),a.jsx("div",{className:"card-body",children:m.items&&m.items.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-striped",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:m.items.map((W,re)=>a.jsxs("tr",{children:[a.jsx("td",{children:re+1}),a.jsx("td",{children:a.jsx("code",{children:W.materialId})}),a.jsx("td",{children:W.description}),a.jsx("td",{children:W.quantity}),a.jsx("td",{children:W.baseUnit}),a.jsxs("td",{children:["",W.price]}),a.jsx("td",{children:a.jsxs("strong",{children:["",(parseFloat(W.quantity||0)*parseFloat(W.price||0)).toFixed(2)]})}),a.jsx("td",{children:O(W.deliveryDate)}),a.jsx("td",{children:W.lotNo}),a.jsx("td",{children:W.text})]},re))}),a.jsx("tfoot",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{colSpan:"6",className:"text-end",children:"Grand Total:"}),a.jsxs("th",{children:["",J(m.items)]}),a.jsx("th",{colSpan:"3"})]})})]})}):a.jsxs("div",{className:"text-center py-3",children:[a.jsx("i",{className:"fas fa-box-open fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted",children:"No items found for this transfer"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print Document"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})]})]})})})]})}const DMe=()=>{const[e,t]=w.useState({contacts:[],loading:!1,totalCount:0,currentPage:1,pageSize:10,searchTerm:"",sortBy:"name",sortOrder:"asc"}),[r,n]=w.useState(!1),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(!1),k="/api",S=512*1024,D=async(ee,ne={})=>{try{const ae=await fetch(`${k}${ee}`,{headers:{"Content-Type":"application/json",...ne.headers},...ne});if(!ae.ok)throw new Error(`API call failed: ${ae.statusText}`);return await ae.json()}catch(ae){throw console.error("API Error:",ae),ae}},E=async ee=>{const ne=new FormData;ne.append("avatar",ee);try{const ae=await fetch(`${k}/contacts/upload/avatar`,{method:"POST",body:ne});if(!ae.ok)throw new Error("Upload failed");return await ae.json()}catch(ae){throw console.error("Upload Error:",ae),ae}};w.useEffect(()=>{T()},[e.currentPage,e.pageSize,e.searchTerm,e.sortBy,e.sortOrder]);const T=async()=>{t(ee=>({...ee,loading:!0}));try{const ee={page:e.currentPage,limit:e.pageSize,search:e.searchTerm,sortBy:e.sortBy,sortOrder:e.sortOrder},ne=new URLSearchParams(ee).toString(),ae=await D(`/contacts?${ne}`);t(ie=>({...ie,contacts:ae.data.contacts,totalCount:ae.data.totalCount,loading:!1}))}catch(ee){console.error("Error fetching contacts:",ee),t(ne=>({...ne,loading:!1}))}},A=ee=>{const ne=ee.target.files[0];if(!ne)return;if(ne.size>S){alert("Image size must be less than 512KB"),ee.target.value="";return}if(!ne.type.startsWith("image/")){alert("Please select a valid image file"),ee.target.value="";return}g(ne);const ae=new FileReader;ae.onload=ie=>{y(ie.target.result)},ae.readAsDataURL(ne)},L=()=>{g(null),y(null);const ee=document.querySelector('input[type="file"]');ee&&(ee.value="")},P=ee=>{t(ne=>({...ne,searchTerm:ee,currentPage:1}))},O=ee=>{t(ne=>({...ne,sortBy:ee,sortOrder:ne.sortBy===ee&&ne.sortOrder==="asc"?"desc":"asc"}))},J=ee=>{h(ee),y(ee.avatar),i(!0)},W=ee=>{p(ee),l(!0)},re=async()=>{try{await D("/contacts",{method:"DELETE",body:JSON.stringify({ids:[m]})}),T(),l(!1),p(null)}catch(ee){console.error("Error deleting contact:",ee)}},U=async ee=>{try{N(!0);let ne=null;v&&(ne=(await E(v)).data.url);const ae={...ee,avatar:ne};await D("/contacts",{method:"POST",body:JSON.stringify(ae)}),T(),n(!1),L()}catch(ne){console.error("Error creating contact:",ne)}finally{N(!1)}},Q=async ee=>{try{N(!0);let ne=u.avatar;v&&(ne=(await E(v)).data.url);const ae={...ee,avatar:ne};await D(`/contacts/${u._id}`,{method:"PUT",body:JSON.stringify(ae)}),T(),i(!1),h(null),L()}catch(ne){console.error("Error updating contact:",ne)}finally{N(!1)}},B=ee=>a.jsxs("span",{className:"rating",children:[[1,2,3,4,5].map(ne=>a.jsx("i",{className:`ti ti-star-filled ${ne<=ee?"text-warning":""}`},ne)),a.jsxs("span",{className:"ms-1",children:[ee,".0"]})]}),te=ee=>a.jsx("div",{className:"d-flex gap-1 flex-wrap",children:ee.map((ne,ae)=>a.jsx("span",{className:"badge badge-soft-primary",children:ne},ae))}),X=ee=>e.sortBy!==ee?a.jsx("i",{className:"ti ti-selector"}):e.sortOrder==="asc"?a.jsx("i",{className:"ti ti-chevron-up"}):a.jsx("i",{className:"ti ti-chevron-down"}),ce=()=>a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Profile Image (Max 512KB)"}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsx("div",{className:"avatar avatar-lg",children:b?a.jsx("img",{src:b,alt:"Preview",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-secondary d-flex align-items-center justify-content-center",children:a.jsx("i",{className:"ti ti-user fs-3"})})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:A}),a.jsx("small",{className:"text-muted",children:"JPG, PNG, GIF (Max 512KB)"}),b&&a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger mt-1",onClick:L,children:"Remove Image"})]})]})]}),M=()=>e.loading?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"",children:a.jsxs("table",{className:"table table-sm",id:"contactslist",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{className:"no-sort"}),a.jsxs("th",{onClick:()=>O("name"),style:{cursor:"pointer"},children:["Name ",X("name")]}),a.jsxs("th",{onClick:()=>O("phone"),style:{cursor:"pointer"},children:["Phone ",X("phone")]}),a.jsx("th",{children:"Tags"}),a.jsxs("th",{onClick:()=>O("location"),style:{cursor:"pointer"},children:["Location ",X("location")]}),a.jsxs("th",{className:"pe-3",onClick:()=>O("rating"),style:{cursor:"pointer"},children:["Rating ",X("rating")]}),a.jsx("th",{children:"Contact"}),a.jsxs("th",{onClick:()=>O("status"),style:{cursor:"pointer"},children:["Status ",X("status")]}),a.jsx("th",{className:"text-end no-sort",children:"Action"})]})}),a.jsx("tbody",{children:e.contacts.map(ee=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"avatar avatar-sm rounded-circle",children:ee.avatar?a.jsx("img",{src:`${ee.avatar}`,className:"flex-shrink-0 rounded-circle",alt:ee.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-primary",children:ee.name.charAt(0).toUpperCase()})})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("h6",{className:"mb-0",children:ee.name}),a.jsx("small",{className:"text-muted",children:ee.email})]})}),a.jsx("td",{children:ee.phone}),a.jsx("td",{children:te(ee.tags)}),a.jsx("td",{children:ee.location}),a.jsx("td",{children:B(ee.rating)}),a.jsx("td",{children:ee.email}),a.jsx("td",{children:a.jsx("span",{className:`badge ${ee.status==="active"?"badge-soft-success":"badge-soft-danger"}`,children:ee.status})}),a.jsx("td",{className:"text-end",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-light btn-sm","data-bs-toggle":"dropdown",children:a.jsx("i",{className:"ti ti-dots-vertical"})}),a.jsxs("div",{className:"dropdown-menu",children:[a.jsxs("a",{className:"dropdown-item",href:"javascript:void(0);",onClick:()=>J(ee),children:[a.jsx("i",{className:"ti ti-edit me-1"}),"Edit"]}),a.jsxs("a",{className:"dropdown-item text-danger",href:"javascript:void(0);",onClick:()=>W(ee._id),children:[a.jsx("i",{className:"ti ti-trash me-1"}),"Delete"]})]})]})})]},ee._id))})]})}),q=()=>r?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:ee=>ee.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Add Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(!1),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:ee=>{ee.preventDefault();const ne=new FormData(ee.target),ae={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(ie=>ie.trim()):[]};U(ae)},children:[ce(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",children:[1,2,3,4,5].map(ee=>a.jsxs("option",{value:ee,selected:ee===3,children:[ee," Star"]},ee))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",children:[a.jsx("option",{value:"active",selected:!0,children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{n(!1),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):"Add Contact"})]})]})})]})})}):null,z=()=>!s||!u?null:a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:ee=>ee.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Edit Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:ee=>{ee.preventDefault();const ne=new FormData(ee.target),ae={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(ie=>ie.trim()):[]};Q(ae)},children:[ce(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",defaultValue:u.name,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",defaultValue:u.phone,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",defaultValue:u.email,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",defaultValue:u.location,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",defaultValue:u.rating,children:[1,2,3,4,5].map(ee=>a.jsxs("option",{value:ee,children:[ee," Star"]},ee))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",defaultValue:u.status,children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",defaultValue:u.tags.join(", "),placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),h(null),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Contact"})]})]})})]})})}),K=()=>{if(!o)return null;const ee=e.contacts.find(ne=>ne._id===m);return a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",onClick:ne=>ne.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{l(!1),p(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-alert-triangle text-warning",style:{fontSize:"48px"}})}),a.jsx("h6",{children:"Are you sure you want to delete this contact?"}),ee&&a.jsxs("p",{className:"text-muted",children:[a.jsx("strong",{children:ee.name}),a.jsx("br",{}),ee.email]}),a.jsx("p",{className:"text-danger small",children:"This action cannot be undone."})]})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),p(null)},children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-danger",onClick:re,children:"Delete Contact"})]})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content pb-0",children:[a.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:a.jsxs("div",{children:[a.jsx("h4",{className:"mb-1",children:"Contacts"}),a.jsx("nav",{"aria-label":"breadcrumb",children:a.jsxs("ol",{className:"breadcrumb mb-0 p-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:"Home"})}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contacts"})]})})]})}),a.jsxs("div",{className:"card border-0 rounded-0",children:[a.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"input-icon input-icon-start position-relative",children:[a.jsx("span",{className:"input-icon-addon text-dark",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:e.searchTerm,onChange:ee=>P(ee.target.value)})]}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[a.jsx("i",{className:"ti ti-square-rounded-plus-filled me-1"}),"Add Contacts"]})]}),a.jsxs("div",{className:"card-body",children:[M(),a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-length",children:["Showing ",(e.currentPage-1)*e.pageSize+1," to ",Math.min(e.currentPage*e.pageSize,e.totalCount)," of ",e.totalCount," entries"]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-paginate text-end",children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:e.currentPage===1,onClick:()=>t(ee=>({...ee,currentPage:ee.currentPage-1})),children:"Previous"}),a.jsxs("span",{className:"me-2",children:["Page ",e.currentPage]}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",disabled:e.currentPage*e.pageSize>=e.totalCount,onClick:()=>t(ee=>({...ee,currentPage:ee.currentPage+1})),children:"Next"})]})})]})]})]}),q(),z(),K()]})})},AMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(""),[u,h]=w.useState(""),[m,p]=w.useState(!1),[v,g]=w.useState(""),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),[C,N]=w.useState({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""}),k=async()=>{try{p(!0);const B=await fetch(`/api/leads?companyId=${b}&financialYear=${y}`);if(!B.ok)throw new Error("Failed to fetch leads");const te=await B.json();console.log("Fetched leads:",te),t(te||[])}catch(B){g(B.message)}finally{p(!1)}},S=async()=>{try{const B=await fetch(`/api/campaigns?companyId=${b}&financialYear=${y}`);if(!B.ok)throw new Error("Failed to fetch campaigns");const te=await B.json();n(te||[])}catch(B){console.error("Failed to fetch campaigns:",B)}},D=async B=>{try{const te=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...B,companyId:b,financialYear:y})});if(!te.ok){const ce=await te.json();throw new Error(ce.message||"Failed to create lead")}const X=await te.json();t([...e,X]),A(),i(!1)}catch(te){g(te.message)}},E=async(B,te)=>{try{const X=await fetch(`/api/leads/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...te,companyId:b,financialYear:y})});if(!X.ok){const M=await X.json();throw new Error(M.message||"Failed to update lead")}const ce=await X.json();t(e.map(M=>M._id===B?ce:M)),A(),i(!1),l(null)}catch(X){g(X.message)}},T=async B=>{if(window.confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${B}`,{method:"DELETE"})).ok)throw new Error("Failed to delete lead");t(e.filter(X=>X._id!==B))}catch(te){g(te.message)}},A=()=>{N({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""})},L=async B=>{B.preventDefault(),o?await E(o._id,C):await D(C)},P=B=>{N({companyName:B.companyName,contactPersonName:B.contactPersonName,email:B.email,phoneNumber:B.phoneNumber,leadSource:B.leadSource,leadStatus:B.leadStatus,industry:B.industry,companySize:B.companySize,annualRevenue:B.annualRevenue||"",leadScore:B.leadScore,assignedSalesRep:B.assignedSalesRep||"",notes:B.notes||"",expectedDealValue:B.expectedDealValue||"",expectedCloseDate:B.expectedCloseDate?B.expectedCloseDate.split("T")[0]:"",campaignId:B.campaignId?._id||B.campaignId||""}),l(B),i(!0)},O=B=>{const{name:te,value:X}=B.target;N(ce=>({...ce,[te]:X}))},J=Array.isArray(e)?e.filter(B=>{const te=B.companyName?.toLowerCase().includes(c.toLowerCase())||B.contactPersonName?.toLowerCase().includes(c.toLowerCase())||B.email?.toLowerCase().includes(c.toLowerCase()),X=u===""||B.leadStatus===u;return te&&X}):[];w.useEffect(()=>{k(),S()},[]);const W=["Website","Social Media","Referral","Cold Call","Advertisement","Email Campaign","Google Ads","Event","Other"],re=["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],U=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Other"],Q=["1-10","11-50","51-200","201-1000","1000+"];return a.jsxs("div",{className:"container-fluid py-4",children:[v&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:v}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:o?"Edit Lead":"Add New Lead"}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{i(!1),l(null),A()},children:""})]}),a.jsxs("form",{onSubmit:L,className:"modal-body",children:[a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Name*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"companyName",className:"form-control form-control-sm",value:C.companyName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"contactPersonName",className:"form-control form-control-sm",value:C.contactPersonName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Email*"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("input",{type:"email",name:"email",className:"form-control form-control-sm",value:C.email,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Phone Number*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control form-control-sm",value:C.phoneNumber,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Campaign"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{name:"campaignId",className:"form-control form-control-sm",value:C.campaignId,onChange:O,children:[a.jsx("option",{value:"",children:"Select Campaign"}),r.map(B=>a.jsx("option",{value:B._id,children:B.campaignName},B._id))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Source"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadSource",className:"form-control form-control-sm",value:C.leadSource,onChange:O,children:W.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Status"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadStatus",className:"form-control form-control-sm",value:C.leadStatus,onChange:O,children:re.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Industry"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"industry",className:"form-control form-control-sm",value:C.industry,onChange:O,children:U.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Size"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"companySize",className:"form-control form-control-sm",value:C.companySize,onChange:O,children:Q.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Annual Revenue"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"annualRevenue",className:"form-control form-control-sm",value:C.annualRevenue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Score (1-100)"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"leadScore",className:"form-control form-control-sm",value:C.leadScore,onChange:O,min:"1",max:"100"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Assigned Sales Rep"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"assignedSalesRep",className:"form-control form-control-sm",value:C.assignedSalesRep,onChange:O})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Deal Value"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"expectedDealValue",className:"form-control form-control-sm",value:C.expectedDealValue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Close Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",name:"expectedCloseDate",className:"form-control form-control-sm",value:C.expectedCloseDate,onChange:O})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{name:"notes",className:"form-control form-control-sm",value:C.notes,onChange:O,rows:"3"})})]})})]}),a.jsx("div",{className:"row mt-3",children:a.jsxs("div",{className:"col-auto",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),l(null),A()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Lead":"Create Lead"})]})})]})]})})}),a.jsxs("div",{className:"card mt-3",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Leads Management"]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:B=>d(B.target.value),className:"form-control form-control-sm",style:{width:"200px"}}),a.jsxs("select",{value:u,onChange:B=>h(B.target.value),className:"form-select form-select-sm",style:{width:"150px"},children:[a.jsx("option",{value:"",children:"All Statuses"}),re.map(B=>a.jsx("option",{value:B,children:B},B))]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{A(),l(null),i(!0)},children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add New Lead"]})]})]}),a.jsx("div",{className:"card-body",children:m?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Campaign"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Source"}),a.jsx("th",{children:"Industry"}),a.jsx("th",{children:"Score"}),a.jsx("th",{children:"Expected Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:J.length>0?J.map(B=>a.jsxs("tr",{children:[a.jsx("td",{children:B.companyName}),a.jsx("td",{children:B.contactPersonName}),a.jsx("td",{children:a.jsx("a",{href:`mailto:${B.email}`,className:"text-decoration-none",children:B.email})}),a.jsx("td",{children:B.phoneNumber&&a.jsx("a",{href:`tel:${B.phoneNumber}`,className:"text-decoration-none",children:B.phoneNumber})}),a.jsx("td",{children:B.campaignId?.campaignName&&a.jsx("span",{className:"badge bg-info",children:B.campaignId.campaignName})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${TMe(B.leadStatus)}`,children:B.leadStatus})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:B.leadSource})}),a.jsx("td",{children:B.industry}),a.jsx("td",{children:a.jsxs("span",{className:`badge bg-${IMe(B.leadScore)}`,children:[B.leadScore,"/100"]})}),a.jsx("td",{children:B.expectedDealValue?`$${Number(B.expectedDealValue).toLocaleString()}`:"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:()=>P(B),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(B._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},B._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center",children:e.length===0?"No leads available":"No leads match your search criteria"})})})]})})})]})]})},TMe=e=>{switch(e){case"New":return"primary";case"Contacted":return"info";case"Qualified":return"success";case"Proposal":return"warning";case"Negotiation":return"secondary";case"Closed Won":return"success";case"Closed Lost":return"danger";default:return"secondary"}},IMe=e=>e>=80?"success":e>=60?"warning":e>=40?"info":"secondary",gm="/api";function PMe(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(null),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(!1),[k,S]=w.useState(""),[D,E]=w.useState("basic"),[T,A]=w.useState({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),L=oe=>{const Se=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposal - ${oe.proposalNumber}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .header h2 {
                        margin: 5px 0;
                        color: #34495e;
                        font-size: 20px;
                    }
                    .section {
                        margin-bottom: 25px;
                    }
                    .section h3 {
                        color: #2c3e50;
                        border-bottom: 2px solid #bdc3c7;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                        font-size: 18px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 20px;
                    }
                    .info-item {
                        margin-bottom: 10px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-left: 4px solid #3498db;
                        margin: 15px 0;
                    }
                    .value-highlight {
                        background-color: #e8f6f3;
                        padding: 15px;
                        border-radius: 5px;
                        text-align: center;
                        margin: 20px 0;
                    }
                    .value-highlight .amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        border-top: 2px solid #bdc3c7;
                        padding-top: 20px;
                        color: #7f8c8d;
                    }
                    .terms-section {
                        background-color: #f8f9fa;
                        padding: 20px;
                        border-radius: 5px;
                        margin: 20px 0;
                    }
                    @media print {
                        body { margin: 0; }
                        .section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>BUSINESS PROPOSAL</h1>
                    <h2>${oe.proposalNumber}</h2>
                    <p>Date: ${Se}</p>
                </div>

                <div class="section">
                    <h3>Client Information</h3>
                    <div class="info-grid">
                        <div>
                            <div class="info-item"><strong>Company:</strong> ${oe.leadId?.companyName||"N/A"}</div>
                            <div class="info-item"><strong>Contact Person:</strong> ${oe.leadId?.contactPersonName||"N/A"}</div>
                        </div>
                        <div>
                            <div class="info-item"><strong>Email:</strong> ${oe.leadId?.email||"N/A"}</div>
                            <div class="info-item"><strong>Phone:</strong> ${oe.leadId?.phoneNumber||"N/A"}</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Proposal Overview</h3>
                    <div class="info-item"><strong>Title:</strong> ${oe.title}</div>
                    <div class="description">
                        <strong>Description:</strong><br>
                        ${oe.description}
                    </div>
                    
                    <div class="value-highlight">
                        <div class="amount">${oe.currency} ${oe.proposalValue?.toLocaleString()}</div>
                        <div>Total Proposal Value</div>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item"><strong>Priority:</strong> ${oe.priority}</div>
                        <div class="info-item"><strong>Validity:</strong> ${oe.validityPeriod} days</div>
                    </div>
                </div>

                ${oe.businessObjective?`
                    <div class="section">
                        <h3>Business Objective</h3>
                        <p>${oe.businessObjective}</p>
                    </div>
                `:""}

                ${oe.proposedSolution?`
                    <div class="section">
                        <h3>Proposed Solution</h3>
                        <p>${oe.proposedSolution}</p>
                    </div>
                `:""}

                ${oe.timeline||oe.projectDuration?`
                    <div class="section">
                        <h3>Project Timeline</h3>
                        ${oe.timeline?`<p>${oe.timeline}</p>`:""}
                        ${oe.projectDuration?`<div class="info-item"><strong>Duration:</strong> ${oe.projectDuration} days</div>`:""}
                    </div>
                `:""}

                ${oe.teamComposition?`
                    <div class="section">
                        <h3>Team Composition</h3>
                        <p>${oe.teamComposition}</p>
                    </div>
                `:""}

                ${oe.technicalRequirements?`
                    <div class="section">
                        <h3>Technical Requirements</h3>
                        <p>${oe.technicalRequirements}</p>
                    </div>
                `:""}

                ${oe.proposedTechnology?`
                    <div class="section">
                        <h3>Proposed Technology</h3>
                        <p>${oe.proposedTechnology}</p>
                    </div>
                `:""}

                ${oe.paymentTerms||oe.deliveryTerms||oe.warrantyTerms?`
                    <div class="terms-section">
                        <h3>Commercial Terms</h3>
                        ${oe.paymentTerms?`
                            <div class="info-item">
                                <strong>Payment Terms:</strong><br>
                                ${oe.paymentTerms}
                            </div>
                        `:""}
                        ${oe.deliveryTerms?`
                            <div class="info-item">
                                <strong>Delivery Terms:</strong><br>
                                ${oe.deliveryTerms}
                            </div>
                        `:""}
                        ${oe.warrantyTerms?`
                            <div class="info-item">
                                <strong>Warranty Terms:</strong><br>
                                ${oe.warrantyTerms}
                            </div>
                        `:""}
                    </div>
                `:""}

                ${oe.riskAssessment?`
                    <div class="section">
                        <h3>Risk Assessment</h3>
                        <p>${oe.riskAssessment}</p>
                    </div>
                `:""}

                ${oe.companyCredentials?`
                    <div class="section">
                        <h3>Company Credentials</h3>
                        <p>${oe.companyCredentials}</p>
                    </div>
                `:""}

                <div class="footer">
                    <p><strong>Valid until:</strong> ${oe.expiryDate?new Date(oe.expiryDate).toLocaleDateString():`${oe.validityPeriod} days from submission`}</p>
                    <br>
                    <p>Thank you for considering our proposal.</p>
                    <p><strong>Prepared by:</strong> ${oe.createdBy||""}</p>
                </div>
            </body>
            </html>
        `},P=oe=>{const Se=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ue=oe.map(se=>`
            <div class="proposal-item">
                <h3>${se.proposalNumber} - ${se.title}</h3>
                <div class="info-grid">
                    <div>
                        <div class="info-item"><strong>Company:</strong> ${se.leadId?.companyName||"N/A"}</div>
                        <div class="info-item"><strong>Contact:</strong> ${se.leadId?.contactPersonName||"N/A"}</div>
                        <div class="info-item"><strong>Value:</strong> ${se.currency} ${se.proposalValue?.toLocaleString()}</div>
                    </div>
                    <div>
                        <div class="info-item"><strong>Status:</strong> ${se.status}</div>
                        <div class="info-item"><strong>Priority:</strong> ${se.priority}</div>
                        <div class="info-item"><strong>Created:</strong> ${new Date(se.createdAt).toLocaleDateString()}</div>
                    </div>
                </div>
                <div class="description">
                    <strong>Description:</strong> ${se.description}
                </div>
            </div>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposals Summary Report</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .proposal-item {
                        margin-bottom: 30px;
                        padding: 20px;
                        border: 1px solid #bdc3c7;
                        border-radius: 5px;
                        page-break-inside: avoid;
                    }
                    .proposal-item h3 {
                        color: #2c3e50;
                        margin-top: 0;
                        border-bottom: 1px solid #bdc3c7;
                        padding-bottom: 10px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 15px;
                    }
                    .info-item {
                        margin-bottom: 8px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 10px;
                        border-left: 4px solid #3498db;
                        margin-top: 10px;
                    }
                    @media print {
                        body { margin: 0; }
                        .proposal-item { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>PROPOSALS SUMMARY REPORT</h1>
                    <p>Generated on: ${Se}</p>
                    <p>Total Proposals: ${oe.length}</p>
                </div>
                ${ue}
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #bdc3c7; padding-top: 20px;">
                    <p><strong>Report generated by:</strong> sreevatsa-B-R</p>
                </div>
            </body>
            </html>
        `},O=async oe=>{try{const Se=await fetch(`${gm}/proposals/${oe._id}`);if(!Se.ok)throw new Error("Failed to fetch proposal details");const ue=await Se.json(),se=L(ue),ye=window.open("","_blank");ye.document.write(se),ye.document.close(),ye.onload=()=>{ye.focus(),ye.print(),ye.close()}}catch(Se){S("Failed to print proposal: "+Se.message)}},J=()=>{if(u.length===0){alert("Please select proposals to print");return}const oe=e.filter(se=>u.includes(se._id)),Se=P(oe),ue=window.open("","_blank");ue.document.write(Se),ue.document.close(),ue.onload=()=>{ue.focus(),ue.print(),ue.close()}},W=oe=>{h(Se=>Se.includes(oe)?Se.filter(ue=>ue!==oe):[...Se,oe])},re=()=>{u.length===ne.length?h([]):h(ne.map(oe=>oe._id))},U=async()=>{try{N(!0);const oe=await fetch(`${gm}/proposals`);if(!oe.ok)throw new Error("Failed to fetch proposals");const Se=await oe.json();t(Se.proposals||Se)}catch(oe){S(oe.message)}finally{N(!1)}},Q=async()=>{try{const oe=await fetch(`${gm}/leads?status=Qualified`);if(!oe.ok)throw new Error("Failed to fetch leads");const Se=await oe.json();n(Se.leads||Se)}catch(oe){console.error("Error fetching leads:",oe)}},B=async oe=>{try{console.log("Sending proposal data:",oe);const Se=await fetch(`${gm}/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)});if(console.log("Response status:",Se.status),!Se.ok){const se=await Se.json();throw console.error("Error response:",se),new Error(se.message||"Failed to create proposal")}const ue=await Se.json();console.log("Created proposal:",ue),t([...e,ue]),M(),i(!1)}catch(Se){console.error("Create proposal error:",Se),S(Se.message)}},te=async(oe,Se)=>{try{const ue=await fetch(`${gm}/proposals/${oe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!ue.ok){const ye=await ue.json();throw new Error(ye.message||"Failed to update proposal")}const se=await ue.json();t(e.map(ye=>ye._id===oe?se:ye)),M(),i(!1),l(null)}catch(ue){S(ue.message)}},X=async oe=>{try{const Se=await fetch(`${gm}/proposals/${oe}/submit`,{method:"PUT"});if(!Se.ok){const se=await Se.json();throw new Error(se.message||"Failed to submit proposal")}const ue=await Se.json();t(e.map(se=>se._id===oe?ue:se))}catch(Se){S(Se.message)}},ce=async oe=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{if(!(await fetch(`${gm}/proposals/${oe}`,{method:"DELETE"})).ok)throw new Error("Failed to delete proposal");t(e.filter(ue=>ue._id!==oe))}catch(Se){S(Se.message)}},M=()=>{A({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),E("basic")},q=async oe=>{oe.preventDefault(),o?await te(o._id,T):await B(T)},z=oe=>{A({leadId:oe.leadId?._id||"",title:oe.title||"",description:oe.description||"",proposalValue:oe.proposalValue||"",currency:oe.currency||"USD",validityPeriod:oe.validityPeriod||30,status:oe.status||"Draft",priority:oe.priority||"Medium",businessObjective:oe.businessObjective||"",proposedSolution:oe.proposedSolution||"",timeline:oe.timeline||"",paymentTerms:oe.paymentTerms||"",deliveryTerms:oe.deliveryTerms||"",warrantyTerms:oe.warrantyTerms||"",projectDuration:oe.projectDuration||"",teamComposition:oe.teamComposition||"",riskAssessment:oe.riskAssessment||"",companyCredentials:oe.companyCredentials||"",technicalRequirements:oe.technicalRequirements||"",proposedTechnology:oe.proposedTechnology||"",internalNotes:oe.internalNotes||""}),l(oe),i(!0)},K=async oe=>{try{const Se=await fetch(`${gm}/proposals/${oe._id}`);if(!Se.ok)throw new Error("Failed to fetch proposal details");const ue=await Se.json();d(ue)}catch(Se){S(Se.message)}},ee=oe=>{const{name:Se,value:ue}=oe.target;A(se=>({...se,[Se]:ue}))},ne=Array.isArray(e)?e.filter(oe=>{const Se=oe.proposalNumber?.toLowerCase().includes(m.toLowerCase())||oe.title?.toLowerCase().includes(m.toLowerCase())||oe.leadId?.companyName?.toLowerCase().includes(m.toLowerCase()),ue=v===""||oe.status===v,se=b===""||oe.priority===b;return Se&&ue&&se}):[];w.useEffect(()=>{U(),Q()},[]);const ae=["Draft","Submitted","Under Review","Approved","Rejected","Expired","Withdrawn"],ie=["Low","Medium","High","Critical"],G=["USD","EUR","INR","GBP","CAD","AUD"],de=oe=>{switch(oe){case"Draft":return"secondary";case"Submitted":return"primary";case"Under Review":return"warning";case"Approved":return"success";case"Rejected":return"danger";case"Expired":return"dark";case"Withdrawn":return"secondary";default:return"secondary"}},Y=oe=>{switch(oe){case"Low":return"success";case"Medium":return"warning";case"High":return"danger";case"Critical":return"dark";default:return"secondary"}};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Proposals"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Proposals"})]})})]}),a.jsx("div",{children:a.jsxs("div",{className:"d-flex gap-2",children:[u.length>0&&a.jsxs("button",{className:"btn btn-info",onClick:J,children:[a.jsx("i",{className:"fas fa-print"})," Print Selected (",u.length,")"]}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{M(),l(null),i(!0)},children:"Create New Proposal"})]})})]}),a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",placeholder:"Search proposals...",value:m,onChange:oe=>p(oe.target.value),className:"form-control"})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:v,onChange:oe=>g(oe.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Statuses"}),ae.map(oe=>a.jsx("option",{value:oe,children:oe},oe))]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:b,onChange:oe=>y(oe.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Priorities"}),ie.map(oe=>a.jsx("option",{value:oe,children:oe},oe))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{p(""),g(""),y("")},children:"Clear Filters"})})]})})}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{className:"modal-title",children:o?"Edit Proposal":"Create New Proposal"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),l(null),M()}})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="basic"?"active":""}`,onClick:()=>E("basic"),children:"Basic Info"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="business"?"active":""}`,onClick:()=>E("business"),children:"Business Details"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="technical"?"active":""}`,onClick:()=>E("technical"),children:"Technical"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="commercial"?"active":""}`,onClick:()=>E("commercial"),children:"Commercial"})})]}),a.jsxs("form",{onSubmit:q,children:[D==="basic"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Select Lead *"}),a.jsxs("select",{name:"leadId",className:"form-select",value:T.leadId,onChange:ee,required:!0,disabled:o,children:[a.jsx("option",{value:"",children:"Select a qualified lead..."}),r.map(oe=>a.jsxs("option",{value:oe._id,children:[oe.companyName," - ",oe.contactPersonName]},oe._id))]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Proposal Title *"}),a.jsx("input",{type:"text",name:"title",className:"form-control",value:T.title,onChange:ee,required:!0,placeholder:"Enter proposal title"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Description *"}),a.jsx("textarea",{name:"description",className:"form-control",value:T.description,onChange:ee,required:!0,rows:"4",placeholder:"Enter proposal description"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Proposal Value *"}),a.jsx("input",{type:"number",name:"proposalValue",className:"form-control",value:T.proposalValue,onChange:ee,required:!0,min:"0",step:"0.01"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Currency"}),a.jsx("select",{name:"currency",className:"form-select",value:T.currency,onChange:ee,children:G.map(oe=>a.jsx("option",{value:oe,children:oe},oe))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Period (Days)"}),a.jsx("input",{type:"number",name:"validityPeriod",className:"form-control",value:T.validityPeriod,onChange:ee,min:"1",max:"365"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{name:"status",className:"form-select",value:T.status,onChange:ee,children:ae.map(oe=>a.jsx("option",{value:oe,children:oe},oe))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{name:"priority",className:"form-select",value:T.priority,onChange:ee,children:ie.map(oe=>a.jsx("option",{value:oe,children:oe},oe))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Created By"}),a.jsx("input",{type:"text",name:"createdBy",className:"form-control",value:T.createdBy,onChange:ee})]})]}),D==="business"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Business Objective"}),a.jsx("textarea",{name:"businessObjective",className:"form-control",value:T.businessObjective,onChange:ee,rows:"3",placeholder:"Describe the business objective"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Solution"}),a.jsx("textarea",{name:"proposedSolution",className:"form-control",value:T.proposedSolution,onChange:ee,rows:"4",placeholder:"Describe the proposed solution"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Timeline"}),a.jsx("textarea",{name:"timeline",className:"form-control",value:T.timeline,onChange:ee,rows:"3",placeholder:"Project timeline and milestones"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Duration (Days)"}),a.jsx("input",{type:"number",name:"projectDuration",className:"form-control",value:T.projectDuration,onChange:ee,min:"1"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Team Composition"}),a.jsx("textarea",{name:"teamComposition",className:"form-control",value:T.teamComposition,onChange:ee,rows:"3",placeholder:"Describe the project team composition"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Risk Assessment"}),a.jsx("textarea",{name:"riskAssessment",className:"form-control",value:T.riskAssessment,onChange:ee,rows:"3",placeholder:"Risk assessment and mitigation strategies"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Company Credentials"}),a.jsx("textarea",{name:"companyCredentials",className:"form-control",value:T.companyCredentials,onChange:ee,rows:"4",placeholder:"Company credentials and past experience"})]})]}),D==="technical"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Technical Requirements"}),a.jsx("textarea",{name:"technicalRequirements",className:"form-control",value:T.technicalRequirements,onChange:ee,rows:"5",placeholder:"Detailed technical requirements"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Technology"}),a.jsx("textarea",{name:"proposedTechnology",className:"form-control",value:T.proposedTechnology,onChange:ee,rows:"4",placeholder:"Technology stack and tools to be used"})]})]}),D==="commercial"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Payment Terms"}),a.jsx("textarea",{name:"paymentTerms",className:"form-control",value:T.paymentTerms,onChange:ee,rows:"3",placeholder:"Payment terms and conditions"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Delivery Terms"}),a.jsx("textarea",{name:"deliveryTerms",className:"form-control",value:T.deliveryTerms,onChange:ee,rows:"3",placeholder:"Delivery terms and conditions"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Warranty Terms"}),a.jsx("textarea",{name:"warrantyTerms",className:"form-control",value:T.warrantyTerms,onChange:ee,rows:"3",placeholder:"Warranty and support terms"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Internal Notes"}),a.jsx("textarea",{name:"internalNotes",className:"form-control",value:T.internalNotes,onChange:ee,rows:"3",placeholder:"Internal notes (not visible to client)"})]})]}),a.jsx("div",{className:"row mt-4",children:a.jsxs("div",{className:"col-12 d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),l(null),M()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Proposal":"Create Proposal"})]})})]})]})]})})}),c&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{className:"modal-title",children:["Proposal Details - ",c.proposalNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(null)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Company:"})," ",c.leadId?.companyName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Contact:"})," ",c.leadId?.contactPersonName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Title:"})," ",c.title]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Value:"})," ",c.currency," ",c.proposalValue?.toLocaleString()]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Status:"}),a.jsx("span",{className:`badge bg-${de(c.status)} ms-2`,children:c.status})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Priority:"}),a.jsx("span",{className:`badge bg-${Y(c.priority)} ms-2`,children:c.priority})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Description:"}),a.jsx("p",{children:c.description})]}),c.businessObjective&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Business Objective:"}),a.jsx("p",{children:c.businessObjective})]}),c.proposedSolution&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Proposed Solution:"}),a.jsx("p",{children:c.proposedSolution})]})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(null),children:"Close"})})]})})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Proposals"})}),a.jsx("div",{className:"card-body p-0",children:a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered mb-2 mt-2",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx("input",{type:"checkbox",checked:u.length===ne.length&&ne.length>0,onChange:re})}),a.jsx("th",{children:"Proposal #"}),a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.length>0?ne.map(oe=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:u.includes(oe._id),onChange:()=>W(oe._id)})}),a.jsx("td",{children:a.jsx("strong",{children:oe.proposalNumber})}),a.jsx("td",{children:oe.leadId?.companyName||"N/A"}),a.jsx("td",{children:oe.title}),a.jsxs("td",{children:[oe.currency," ",oe.proposalValue?.toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${de(oe.status)}`,children:oe.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${Y(oe.priority)}`,children:oe.priority})}),a.jsx("td",{children:new Date(oe.createdAt).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-primary",onClick:()=>K(oe),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-outline-info",onClick:()=>O(oe),title:"Print",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{className:"btn btn-outline-warning",onClick:()=>z(oe),title:"Edit",children:a.jsx("i",{className:"fas fa-edit"})}),oe.status==="Draft"&&a.jsx("button",{className:"btn btn-outline-success",onClick:()=>X(oe._id),title:"Submit",children:a.jsx("i",{className:"fas fa-paper-plane"})}),a.jsx("button",{className:"btn btn-outline-danger",onClick:()=>ce(oe._id),title:"Delete",children:a.jsx("i",{className:"fas fa-trash"})})]})})]},oe._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center py-4",children:e.length===0?"No proposals available":"No proposals match your search criteria"})})})]})})})]})]})}const OMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({name:"",description:""}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const k=await(await fetch(`/api/crm/sources?companyId=${m}&financialYear=${p}`)).json();t(k),i("")}catch{i("Failed to load sources")}finally{n(!1)}},g=()=>{d(null),h({name:"",description:""}),l(!0)},b=N=>{d(N),h({name:N.name,description:N.description}),l(!0)},y=async N=>{N.preventDefault();try{const k=c?`/api/crm/sources/${c._id}`:"/api/crm/sources";(await fetch(k,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p})})).ok?(await v(),l(!1),i("")):i("Failed to save source")}catch{i("Failed to save source")}},C=async N=>{if(window.confirm("Are you sure you want to delete this source?"))try{(await fetch(`/api/crm/sources/${N}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete source")}catch{i("Failed to delete source")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Sources Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Source"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(N=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:N.name}),a.jsx("td",{children:N.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${N.isActive?"bg-success":"bg-secondary"}`,children:N.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(N.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(N),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(N._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},N._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Source":"Add Source"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Source Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.name,onChange:N=>h({...u,name:N.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:N=>h({...u,description:N.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},MMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({reason:"",category:"",description:""}),m=["Price","Competition","Timeline","Budget","Feature","Service","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");w.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/lost-reasons?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load lost reasons")}finally{n(!1)}},b=()=>{d(null),h({reason:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({reason:S.reason,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/lost-reasons/${c._id}`:"/api/crm/lost-reasons";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save lost reason")}catch{i("Failed to save lost reason")}},N=async S=>{if(window.confirm("Are you sure you want to delete this lost reason?"))try{(await fetch(`/api/crm/lost-reasons/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete lost reason")}catch{i("Failed to delete lost reason")}},k=S=>({Price:"bg-danger",Competition:"bg-warning",Timeline:"bg-info",Budget:"bg-danger",Feature:"bg-primary",Service:"bg-secondary",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Lost Reasons Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Lost Reason"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.reason}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>N(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Lost Reason":"Add Lost Reason"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Lost Reason"}),a.jsx("input",{type:"text",className:"form-control",value:u.reason,onChange:S=>h({...u,reason:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},RMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({stageName:"",description:"",probability:0,color:"#007bff"}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const S=await(await fetch(`/api/crm/contact-stages?companyId=${m}&financialYear=${p}`)).json();t(S.sort((D,E)=>D.order-E.order)),i("")}catch{i("Failed to load contact stages")}finally{n(!1)}},g=()=>{d(null),h({stageName:"",description:"",probability:0,color:"#007bff"}),l(!0)},b=k=>{d(k),h({stageName:k.stageName,description:k.description,probability:k.probability,color:k.color}),l(!0)},y=async k=>{k.preventDefault();try{const S=c?`/api/crm/contact-stages/${c._id}`:"/api/crm/contact-stages";(await fetch(S,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p,order:c?c.order:e.length+1})})).ok?(await v(),l(!1),i("")):i("Failed to save contact stage")}catch{i("Failed to save contact stage")}},C=async k=>{if(window.confirm("Are you sure you want to delete this contact stage?"))try{(await fetch(`/api/crm/contact-stages/${k}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete contact stage")}catch{i("Failed to delete contact stage")}},N=async(k,S)=>{try{(await fetch(`/api/crm/contact-stages/${k}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:S})})).ok?await v():i("Failed to reorder contact stage")}catch{i("Failed to reorder contact stage")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Contact Stages Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Contact Stage"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Stage Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Probability %"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"me-2",children:k.order}),a.jsxs("div",{className:"btn-group-vertical btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>N(k._id,"up"),disabled:S===0,children:a.jsx("i",{className:"fas fa-chevron-up"})}),a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>N(k._id,"down"),disabled:S===e.length-1,children:a.jsx("i",{className:"fas fa-chevron-down"})})]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge text-white",style:{backgroundColor:k.color},children:k.stageName})}),a.jsx("td",{children:k.description}),a.jsxs("td",{children:[k.probability,"%"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k.isActive?"bg-success":"bg-secondary"}`,children:k.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(k.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(k),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(k._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},k._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Contact Stage":"Add Contact Stage"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Stage Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.stageName,onChange:k=>h({...u,stageName:k.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:k=>h({...u,description:k.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Probability (%)"}),a.jsx("input",{type:"number",className:"form-control",min:"0",max:"100",value:u.probability,onChange:k=>h({...u,probability:Number(k.target.value)}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Color"}),a.jsx("input",{type:"color",className:"form-control form-control-color",value:u.color,onChange:k=>h({...u,color:k.target.value})})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},FMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({industryName:"",category:"",description:""}),m=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Real Estate","Transportation","Energy","Media","Hospitality","Construction","Agriculture","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");w.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/industries?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load industries")}finally{n(!1)}},b=()=>{d(null),h({industryName:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({industryName:S.industryName,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/industries/${c._id}`:"/api/crm/industries";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save industry")}catch{i("Failed to save industry")}},N=async S=>{if(window.confirm("Are you sure you want to delete this industry?"))try{(await fetch(`/api/crm/industries/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete industry")}catch{i("Failed to delete industry")}},k=S=>({Technology:"bg-primary",Healthcare:"bg-success",Finance:"bg-warning",Manufacturing:"bg-info",Retail:"bg-secondary",Education:"bg-primary","Real Estate":"bg-success",Transportation:"bg-info",Energy:"bg-warning",Media:"bg-secondary",Hospitality:"bg-primary",Construction:"bg-info",Agriculture:"bg-success",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Industry Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Industry"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Industry Name"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.industryName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>N(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Industry":"Add Industry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Industry Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.industryName,onChange:S=>h({...u,industryName:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},LMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({callType:"",purpose:"",outcome:"",description:""}),m=["Inbound","Outbound","Missed","Voicemail"],p=["Sales","Support","Follow-up","Demo","Meeting","Consultation","Other"],v=["Successful","No Answer","Busy","Follow-up Required","Completed","Cancelled","Rescheduled"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/crm/calls?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load calls")}finally{n(!1)}},C=()=>{d(null),h({callType:"",purpose:"",outcome:"",description:""}),l(!0)},N=A=>{d(A),h({callType:A.callType,purpose:A.purpose,outcome:A.outcome,description:A.description}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/crm/calls/${c._id}`:"/api/crm/calls";(await fetch(L,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:g,financialYear:b})})).ok?(await y(),l(!1),i("")):i("Failed to save call")}catch{i("Failed to save call")}},S=async A=>{if(window.confirm("Are you sure you want to delete this call setting?"))try{(await fetch(`/api/crm/calls/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete call")}catch{i("Failed to delete call")}},D=A=>{switch(A){case"Inbound":return"fas fa-phone-alt text-success";case"Outbound":return"fas fa-phone text-primary";case"Missed":return"fas fa-phone-slash text-danger";case"Voicemail":return"fas fa-voicemail text-warning";default:return"fas fa-phone"}},E=A=>{switch(A){case"Successful":case"Completed":return"bg-success";case"Follow-up Required":case"Rescheduled":return"bg-warning";case"No Answer":case"Busy":case"Cancelled":return"bg-danger";default:return"bg-secondary"}},T=A=>{switch(A){case"Sales":return"bg-success";case"Support":return"bg-info";case"Follow-up":return"bg-warning";case"Demo":return"bg-primary";case"Meeting":return"bg-secondary";default:return"bg-dark"}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Call Settings Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Call Setting"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Call Type"}),a.jsx("th",{children:"Purpose"}),a.jsx("th",{children:"Outcome"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:D(A.callType)}),a.jsx("span",{className:"ms-2",children:A.callType})]})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(A.purpose)}`,children:A.purpose})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.outcome)}`,children:A.outcome})}),a.jsx("td",{children:A.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.isActive?"bg-success":"bg-secondary"}`,children:A.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(A.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Call Setting":"Add Call Setting"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Call Type"}),a.jsxs("select",{className:"form-select",value:u.callType,onChange:A=>h({...u,callType:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Call Type"}),m.map(A=>a.jsx("option",{value:A,children:A},A))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Purpose"}),a.jsxs("select",{className:"form-select",value:u.purpose,onChange:A=>h({...u,purpose:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Purpose"}),p.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Outcome"}),a.jsxs("select",{className:"form-select",value:u.outcome,onChange:A=>h({...u,outcome:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Outcome"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:A=>h({...u,description:A.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},BMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(""),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),v=["Pending","In Progress","Completed","Delayed","Cancelled"],g=["Low","Medium","High","Critical"],b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");w.useEffect(()=>{C(),N()},[]);const C=async()=>{i(!0);try{const O=await(await fetch(`/api/milestones?companyId=${b}&financialYear=${y}`)).json();t(O),l("")}catch{l("Failed to load milestones")}finally{i(!1)}},N=async()=>{try{const O=await(await fetch(`/api/projects?companyId=${b}&financialYear=${y}`)).json();n(O)}catch{console.error("Failed to load projects")}},k=()=>{h(null),p({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),d(!0)},S=P=>{h(P),p({milestoneName:P.milestoneName,description:P.description,projectId:P.projectId._id||P.projectId,dueDate:P.dueDate?P.dueDate.split("T")[0]:"",status:P.status,priority:P.priority,deliverables:P.deliverables.join(`
`),budget:P.budget,completionPercentage:P.completionPercentage}),d(!0)},D=async P=>{P.preventDefault();try{const O=u?`/api/milestones/${u._id}`:"/api/milestones",J=u?"PUT":"POST",W={...m,deliverables:m.deliverables.split(`
`).filter(U=>U.trim()),companyId:b,financialYear:y};(await fetch(O,{method:J,headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok?(await C(),d(!1),l("")):l("Failed to save milestone")}catch{l("Failed to save milestone")}},E=async P=>{if(window.confirm("Are you sure you want to delete this milestone?"))try{(await fetch(`/api/milestones/${P}`,{method:"DELETE"})).ok?(await C(),l("")):l("Failed to delete milestone")}catch{l("Failed to delete milestone")}},T=P=>({Pending:"bg-secondary","In Progress":"bg-primary",Completed:"bg-success",Delayed:"bg-warning",Cancelled:"bg-danger"})[P]||"bg-secondary",A=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",L=P=>P?new Date(P)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-flag-checkered me-2"}),"Milestones Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:k,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Milestone"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Milestone Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Deliverables"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.dueDate)&&P.status!=="Completed"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.milestoneName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:P.projectId?.projectName||"No Project"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px",width:"100px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${P.completionPercentage}%`},children:[P.completionPercentage,"%"]})})}),a.jsx("td",{children:P.dueDate?a.jsxs("div",{children:[new Date(P.dueDate).toLocaleDateString(),L(P.dueDate)&&P.status!=="Completed"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-info",children:[P.deliverables?.length||0," items"]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>S(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Milestone":"Add Milestone"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:D,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Milestone Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.milestoneName,onChange:P=>p({...m,milestoneName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:P=>p({...m,projectId:P.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(P=>a.jsx("option",{value:P._id,children:P.projectName},P._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:P=>p({...m,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:P=>p({...m,status:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:P=>p({...m,priority:P.target.value}),required:!0,children:g.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:P=>p({...m,dueDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:m.budget,onChange:P=>p({...m,budget:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Completion Percentage"}),a.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:m.completionPercentage,onChange:P=>p({...m,completionPercentage:P.target.value})}),a.jsxs("div",{className:"text-center",children:[m.completionPercentage,"%"]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Deliverables (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:m.deliverables,onChange:P=>p({...m,deliverables:P.target.value}),placeholder:`Design mockups
Database schema
API documentation`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},UMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(""),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),v=["To Do","In Progress","Review","Testing","Done","Blocked"],g=["Low","Medium","High","Critical"],b=["Development","Testing","Design","Documentation","Bug Fix","Research","Other"],y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear");w.useEffect(()=>{N(),k()},[]);const N=async()=>{i(!0);try{const J=await(await fetch(`/api/tasks?companyId=${y}&financialYear=${C}`)).json();t(J),l("")}catch{l("Failed to load tasks")}finally{i(!1)}},k=async()=>{try{const J=await(await fetch(`/api/projects?companyId=${y}&financialYear=${C}`)).json();n(J)}catch{console.error("Failed to load projects")}},S=()=>{h(null),p({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),d(!0)},D=O=>{h(O),p({taskName:O.taskName,description:O.description,projectId:O.projectId._id||O.projectId,assignedTo:O.assignedTo,status:O.status,priority:O.priority,dueDate:O.dueDate?O.dueDate.split("T")[0]:"",estimatedHours:O.estimatedHours,actualHours:O.actualHours,category:O.category}),d(!0)},E=async O=>{O.preventDefault();try{const J=u?`/api/tasks/${u._id}`:"/api/tasks";(await fetch(J,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,companyId:y,financialYear:C})})).ok?(await N(),d(!1),l("")):l("Failed to save task")}catch{l("Failed to save task")}},T=async O=>{if(window.confirm("Are you sure you want to delete this task?"))try{(await fetch(`/api/tasks/${O}`,{method:"DELETE"})).ok?(await N(),l("")):l("Failed to delete task")}catch{l("Failed to delete task")}},A=O=>({"To Do":"bg-secondary","In Progress":"bg-primary",Review:"bg-warning",Testing:"bg-info",Done:"bg-success",Blocked:"bg-danger"})[O]||"bg-secondary",L=O=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[O]||"bg-secondary",P=O=>O?new Date(O)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-tasks me-2"}),"Tasks Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:S,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Task"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Task Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(O=>a.jsxs("tr",{className:P(O.dueDate)&&O.status!=="Done"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:O.taskName}),O.description&&a.jsxs("div",{className:"text-muted small",children:[O.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:O.projectId?.projectName||"No Project"}),a.jsx("td",{children:O.assignedTo}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(O.status)}`,children:O.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${L(O.priority)}`,children:O.priority})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:O.category})}),a.jsx("td",{children:O.dueDate?a.jsxs("div",{children:[new Date(O.dueDate).toLocaleDateString(),P(O.dueDate)&&O.status!=="Done"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Est: ",O.estimatedHours||0,"h"]}),a.jsxs("div",{children:["Act: ",O.actualHours||0,"h"]})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>D(O),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(O._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Task":"Add Task"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:E,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.taskName,onChange:O=>p({...m,taskName:O.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:O=>p({...m,projectId:O.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(O=>a.jsx("option",{value:O._id,children:O.projectName},O._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:O=>p({...m,description:O.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:O=>p({...m,status:O.target.value}),required:!0,children:v.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:O=>p({...m,priority:O.target.value}),required:!0,children:g.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:m.category,onChange:O=>p({...m,category:O.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),b.map(O=>a.jsx("option",{value:O,children:O},O))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:m.assignedTo,onChange:O=>p({...m,assignedTo:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:O=>p({...m,dueDate:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Estimated Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.estimatedHours,onChange:O=>p({...m,estimatedHours:O.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.actualHours,onChange:O=>p({...m,actualHours:O.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},$Me=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!1),[c,d]=w.useState(""),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState(!1),[b,y]=w.useState(0),[C,N]=w.useState({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear");w.useEffect(()=>{D(),E(),T()},[]),w.useEffect(()=>{let B=null;return v?B=setInterval(()=>{y(te=>te+1)},1e3):!v&&b!==0&&clearInterval(B),()=>clearInterval(B)},[v,b]);const D=async()=>{l(!0);try{const te=await(await fetch(`/api/time-entries?companyId=${k}&financialYear=${S}`)).json();t(te),d("")}catch{d("Failed to load time entries")}finally{l(!1)}},E=async()=>{try{const te=await(await fetch(`/api/projects?companyId=${k}&financialYear=${S}`)).json();n(te)}catch{console.error("Failed to load projects")}},T=async()=>{try{const te=await(await fetch(`/api/tasks?companyId=${k}&financialYear=${S}`)).json();i(te)}catch{console.error("Failed to load tasks")}},A=()=>{g(!0),y(0);const B=new Date;N({...C,startTime:B.toTimeString().slice(0,5),date:B.toISOString().split("T")[0]})},L=()=>{g(!1);const B=new Date,te=(b/3600).toFixed(2);N({...C,endTime:B.toTimeString().slice(0,5),hours:te}),h(!0)},P=B=>{const te=Math.floor(B/3600),X=Math.floor(B%3600/60),ce=B%60;return`${te.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}:${ce.toString().padStart(2,"0")}`},O=()=>{p(null),N({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),h(!0)},J=B=>{p(B),N({projectId:B.projectId._id||B.projectId,taskId:B.taskId?._id||B.taskId||"",description:B.description,startTime:B.startTime,endTime:B.endTime,hours:B.hours,date:B.date?B.date.split("T")[0]:"",billable:B.billable}),h(!0)},W=async B=>{B.preventDefault();try{const te=m?`/api/time-entries/${m._id}`:"/api/time-entries";(await fetch(te,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,companyId:k,financialYear:S})})).ok?(await D(),h(!1),d(""),y(0)):d("Failed to save time entry")}catch{d("Failed to save time entry")}},re=async B=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{(await fetch(`/api/time-entries/${B}`,{method:"DELETE"})).ok?(await D(),d("")):d("Failed to delete time entry")}catch{d("Failed to delete time entry")}},U=()=>e.reduce((B,te)=>B+parseFloat(te.hours||0),0).toFixed(2),Q=()=>e.filter(B=>B.billable).reduce((B,te)=>B+parseFloat(te.hours||0),0).toFixed(2);return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body text-center",children:[a.jsx("h3",{className:"display-4 mb-3",children:P(b)}),a.jsxs("div",{className:"btn-group",children:[v?a.jsxs("button",{className:"btn btn-danger btn-lg",onClick:L,children:[a.jsx("i",{className:"fas fa-stop me-2"}),"Stop Timer"]}):a.jsxs("button",{className:"btn btn-success btn-lg",onClick:A,children:[a.jsx("i",{className:"fas fa-play me-2"}),"Start Timer"]}),a.jsxs("button",{className:"btn btn-secondary btn-lg",onClick:()=>{y(0),g(!1)},children:[a.jsx("i",{className:"fas fa-redo me-2"}),"Reset"]})]})]})})})}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Total Hours"}),a.jsxs("h3",{children:[U(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Billable Hours"}),a.jsxs("h3",{children:[Q(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Entries"}),a.jsx("h3",{children:e.length})]})})})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-clock me-2"}),"Time Tracking"]}),a.jsxs("button",{className:"btn btn-primary",onClick:O,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Entry"]})]}),a.jsxs("div",{className:"card-body",children:[c&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Task"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Start Time"}),a.jsx("th",{children:"End Time"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Billable"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(B=>a.jsxs("tr",{children:[a.jsx("td",{children:new Date(B.date).toLocaleDateString()}),a.jsx("td",{children:B.projectId?.projectName||"No Project"}),a.jsx("td",{children:B.taskId?.taskName||"No Task"}),a.jsx("td",{children:B.description}),a.jsx("td",{children:B.startTime}),a.jsx("td",{children:B.endTime}),a.jsxs("td",{className:"fw-bold",children:[B.hours,"h"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${B.billable?"bg-success":"bg-secondary"}`,children:B.billable?"Billable":"Non-billable"})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>J(B),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>re(B._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},B._id))})]})})]})]})})}),u&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:m?"Edit Time Entry":"Add Time Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),a.jsxs("form",{onSubmit:W,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:C.projectId,onChange:B=>N({...C,projectId:B.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(B=>a.jsx("option",{value:B._id,children:B.projectName},B._id))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task (Optional)"}),a.jsxs("select",{className:"form-select",value:C.taskId,onChange:B=>N({...C,taskId:B.target.value}),children:[a.jsx("option",{value:"",children:"Select Task"}),s.filter(B=>B.projectId._id===C.projectId).map(B=>a.jsx("option",{value:B._id,children:B.taskName},B._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:C.description,onChange:B=>N({...C,description:B.target.value}),required:!0})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Date"}),a.jsx("input",{type:"date",className:"form-control",value:C.date,onChange:B=>N({...C,date:B.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.startTime,onChange:B=>N({...C,startTime:B.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.endTime,onChange:B=>N({...C,endTime:B.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Hours"}),a.jsx("input",{type:"number",step:"0.25",className:"form-control",value:C.hours,onChange:B=>N({...C,hours:B.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"form-check mt-4",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:C.billable,onChange:B=>N({...C,billable:B.target.checked})}),a.jsx("label",{className:"form-check-label",children:"Billable"})]})})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:m?"Update":"Create"})]})]})]})})})]})},qMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),m=["Planning","In Progress","Testing","Completed","On Hold","Cancelled"],p=["Low","Medium","High","Critical"],v=["Web Development","Mobile App","Desktop App","API Development","Data Analysis","Other"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/projects?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load projects")}finally{n(!1)}},C=()=>{d(null),h({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),l(!0)},N=A=>{d(A),h({projectName:A.projectName,description:A.description,clientName:A.clientName,startDate:A.startDate?A.startDate.split("T")[0]:"",endDate:A.endDate?A.endDate.split("T")[0]:"",budget:A.budget,status:A.status,priority:A.priority,projectManager:A.projectManager,teamMembers:A.teamMembers.join(", "),technologies:A.technologies.join(", "),category:A.category}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/projects/${c._id}`:"/api/projects",P=c?"PUT":"POST",O={...u,teamMembers:u.teamMembers.split(",").map(W=>W.trim()).filter(W=>W),technologies:u.technologies.split(",").map(W=>W.trim()).filter(W=>W),companyId:g,financialYear:b};(await fetch(L,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok?(await y(),l(!1),i("")):i("Failed to save project")}catch{i("Failed to save project")}},S=async A=>{if(window.confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete project")}catch{i("Failed to delete project")}},D=A=>({Planning:"bg-info","In Progress":"bg-primary",Testing:"bg-warning",Completed:"bg-success","On Hold":"bg-secondary",Cancelled:"bg-danger"})[A]||"bg-secondary",E=A=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[A]||"bg-secondary",T=(A,L)=>{if(!A||!L)return 0;const P=new Date(A),O=new Date(L),J=new Date;if(J<P)return 0;if(J>O)return 100;const W=O-P,re=J-P;return Math.round(re/W*100)};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-project-diagram me-2"}),"Projects Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Project"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Project Name"}),a.jsx("th",{children:"Client"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Project Manager"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:A.projectName}),A.category&&a.jsx("div",{className:"text-muted small",children:A.category})]})}),a.jsx("td",{children:A.clientName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(A.status)}`,children:A.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.priority)}`,children:A.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${T(A.startDate,A.endDate)}%`},children:[T(A.startDate,A.endDate),"%"]})})}),a.jsx("td",{children:A.budget?`$${Number(A.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:A.startDate?new Date(A.startDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.endDate?new Date(A.endDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.projectManager}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Project":"Add Project"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectName,onChange:A=>h({...u,projectName:A.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Client Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.clientName,onChange:A=>h({...u,clientName:A.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:A=>h({...u,description:A.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:A=>h({...u,status:A.target.value}),required:!0,children:m.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:A=>h({...u,priority:A.target.value}),required:!0,children:p.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:A=>h({...u,category:A.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:A=>h({...u,startDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:A=>h({...u,endDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:A=>h({...u,budget:A.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Manager"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectManager,onChange:A=>h({...u,projectManager:A.target.value})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Team Members (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.teamMembers,onChange:A=>h({...u,teamMembers:A.target.value}),placeholder:"John Doe, Jane Smith, Bob Johnson"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Technologies (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.technologies,onChange:A=>h({...u,technologies:A.target.value}),placeholder:"React, Node.js, MongoDB"})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},VMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),m=["Email","Social Media","Google Ads","Facebook Ads","Content Marketing","Print","TV/Radio","Event","Influencer","SEO","Other"],p=["Draft","Scheduled","Active","Paused","Completed","Cancelled"],v=["Low","Medium","High","Critical"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const O=await(await fetch(`/api/campaigns?companyId=${g}&financialYear=${b}`)).json();t(O),i("")}catch{i("Failed to load campaigns")}finally{n(!1)}},C=()=>{d(null),h({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),l(!0)},N=P=>{d(P),h({campaignName:P.campaignName,description:P.description,campaignType:P.campaignType,status:P.status,startDate:P.startDate?P.startDate.split("T")[0]:"",endDate:P.endDate?P.endDate.split("T")[0]:"",budget:P.budget,targetAudience:P.targetAudience,channels:P.channels.join(", "),objectives:P.objectives.join(`
`),expectedROI:P.expectedROI,actualROI:P.actualROI,leads:P.leads,conversions:P.conversions,clickThroughRate:P.clickThroughRate,openRate:P.openRate,assignedTo:P.assignedTo,priority:P.priority}),l(!0)},k=async P=>{P.preventDefault();try{const O=c?`/api/campaigns/${c._id}`:"/api/campaigns",J=c?"PUT":"POST",W={...u,channels:u.channels.split(",").map(U=>U.trim()).filter(U=>U),objectives:u.objectives.split(`
`).map(U=>U.trim()).filter(U=>U),companyId:g,financialYear:b};(await fetch(O,{method:J,headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok?(await y(),l(!1),i("")):i("Failed to save campaign")}catch{i("Failed to save campaign")}},S=async P=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{(await fetch(`/api/campaigns/${P}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete campaign")}catch{i("Failed to delete campaign")}},D=P=>({Draft:"bg-secondary",Scheduled:"bg-info",Active:"bg-success",Paused:"bg-warning",Completed:"bg-primary",Cancelled:"bg-danger"})[P]||"bg-secondary",E=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",T=(P,O)=>!P||!O||O===0?0:((P-O)/O*100).toFixed(2),A=(P,O)=>!P||!O||O===0?0:(P/O*100).toFixed(2),L=(P,O)=>{const J=new Date,W=new Date(P),re=new Date(O);return J>=W&&J<=re};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-bullhorn me-2"}),"Campaign Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Campaign"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Period"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.startDate,P.endDate)&&P.status==="Active"?"table-success":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.campaignName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:P.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Start: ",P.startDate?new Date(P.startDate).toLocaleDateString():"N/A"]}),a.jsxs("div",{children:["End: ",P.endDate?new Date(P.endDate).toLocaleDateString():"N/A"]})]})}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:P.leads||0})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("span",{className:"badge bg-success",children:P.conversions||0}),a.jsxs("div",{className:"small text-muted",children:[A(P.conversions,P.leads),"% rate"]})]})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsxs("div",{className:"fw-bold",children:[T(P.actualROI,P.budget),"%"]}),a.jsxs("div",{className:"small text-muted",children:["$",P.actualROI?Number(P.actualROI).toLocaleString():0]})]})}),a.jsx("td",{children:P.assignedTo}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Campaign":"Add Campaign"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.campaignName,onChange:P=>h({...u,campaignName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Type"}),a.jsx("select",{className:"form-select",value:u.campaignType,onChange:P=>h({...u,campaignType:P.target.value}),required:!0,children:m.map(P=>a.jsx("option",{value:P,children:P},P))})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:P=>h({...u,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:P=>h({...u,status:P.target.value}),required:!0,children:p.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:P=>h({...u,priority:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:P=>h({...u,startDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:P=>h({...u,endDate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:P=>h({...u,budget:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Expected ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.expectedROI,onChange:P=>h({...u,expectedROI:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.actualROI,onChange:P=>h({...u,actualROI:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Leads Generated"}),a.jsx("input",{type:"number",className:"form-control",value:u.leads,onChange:P=>h({...u,leads:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Conversions"}),a.jsx("input",{type:"number",className:"form-control",value:u.conversions,onChange:P=>h({...u,conversions:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Click Through Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.clickThroughRate,onChange:P=>h({...u,clickThroughRate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Open Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.openRate,onChange:P=>h({...u,openRate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Target Audience"}),a.jsx("input",{type:"text",className:"form-control",value:u.targetAudience,onChange:P=>h({...u,targetAudience:P.target.value}),placeholder:"Demographics, interests, location, etc."})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:u.assignedTo,onChange:P=>h({...u,assignedTo:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Channels (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.channels,onChange:P=>h({...u,channels:P.target.value}),placeholder:"Email, Facebook, Google Ads, Instagram"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Objectives (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.objectives,onChange:P=>h({...u,objectives:P.target.value}),placeholder:`Increase brand awareness
Generate 100 leads
Achieve 5% conversion rate`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},zMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState({totalCampaigns:0,activeCampaigns:0,totalLeads:0,totalConversions:0,averageConversionRate:0,totalBudget:0,totalROI:0,topPerformingCampaign:null}),[o,l]=w.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear");w.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const g=await(await fetch(`/api/campaigns?companyId=${c}&financialYear=${d}`)).json();t(g);const y=await(await fetch(`/api/leads?companyId=${c}&financialYear=${d}`)).json();n(y),h(g,y)}catch(v){console.error("Failed to load analytics data:",v)}finally{l(!1)}},h=(v,g)=>{const b=v.length,y=v.filter(T=>T.status==="Active").length,C=g.length,N=g.filter(T=>T.leadStatus==="Closed Won").length,k=C>0?(N/C*100).toFixed(2):0,S=v.reduce((T,A)=>T+(A.budget||0),0),D=v.reduce((T,A)=>T+(A.actualROI||0),0),E=v.reduce((T,A)=>{const L=A.leads>0?A.conversions/A.leads:0,P=T&&T.leads>0?T.conversions/T.leads:0;return L>P?A:T},null);i({totalCampaigns:b,activeCampaigns:y,totalLeads:C,totalConversions:N,averageConversionRate:k,totalBudget:S,totalROI:D,topPerformingCampaign:E})},m=v=>({Draft:"secondary",Scheduled:"info",Active:"success",Paused:"warning",Completed:"primary",Cancelled:"danger"})[v]||"secondary",p=(v,g)=>!v||!g||g===0?0:((v-g)/g*100).toFixed(2);return a.jsx("div",{className:"container-fluid py-4",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-chart-bar me-2"}),"Campaign Analytics"]})}),a.jsx("div",{className:"card-body",children:o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Campaigns"}),a.jsx("h3",{className:"mb-0",children:s.totalCampaigns}),a.jsxs("small",{children:[s.activeCampaigns," Active"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-bullhorn fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Leads"}),a.jsx("h3",{className:"mb-0",children:s.totalLeads}),a.jsxs("small",{children:[s.totalConversions," Conversions"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-user-plus fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-warning text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Conversion Rate"}),a.jsxs("h3",{className:"mb-0",children:[s.averageConversionRate,"%"]}),a.jsx("small",{children:"Average across all campaigns"})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-percentage fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total ROI"}),a.jsxs("h3",{className:"mb-0",children:["$",s.totalROI.toLocaleString()]}),a.jsxs("small",{children:["Budget: $",s.totalBudget.toLocaleString()]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),s.topPerformingCampaign&&a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-success",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h5",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-trophy me-2"}),"Top Performing Campaign"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Campaign:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignName]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Type:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignType]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Leads:"}),a.jsx("br",{}),s.topPerformingCampaign.leads||0]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Conversions:"}),a.jsx("br",{}),s.topPerformingCampaign.conversions||0]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Conversion Rate:"}),a.jsx("br",{}),s.topPerformingCampaign.leads>0?(s.topPerformingCampaign.conversions/s.topPerformingCampaign.leads*100).toFixed(2):0,"%"]})]})})]})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Campaign Performance Details"})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"Conversion Rate"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"ROI %"})]})}),a.jsx("tbody",{children:e.map(v=>{const g=v.leads>0?(v.conversions/v.leads*100).toFixed(2):0;return a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:v.campaignName}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:v.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${m(v.status)}`,children:v.status})}),a.jsxs("td",{children:["$",(v.budget||0).toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:v.leads||0})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:v.conversions||0})}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${g>=10?"bg-success":g>=5?"bg-warning":"bg-secondary"}`,children:[g,"%"]})}),a.jsxs("td",{children:["$",(v.actualROI||0).toLocaleString()]}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${p(v.actualROI,v.budget)>0?"bg-success":"bg-danger"}`,children:[p(v.actualROI,v.budget),"%"]})})]},v._id)})})]})})})]})})})]})})]})})})})},HMe=()=>{const[e,t]=w.useState({}),[r,n]=w.useState(!1),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState(null),[m,p]=w.useState({currentPage:1,itemsPerPage:5,totalPages:1}),[v,g]=w.useState({companyId:"",firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),[b,y]=w.useState(null),[C,N]=w.useState(null),[k,S]=w.useState([]),[D,E]=w.useState(0);w.useEffect(()=>{P(),A(),T()},[]);const T=async()=>{try{const ae=await Oe.get("/api/departments");S(ae.data)}catch(ae){console.error("Error fetching departments:",ae)}},A=async()=>{try{const ae=await Oe.get("/api/roles");if(Array.isArray(ae.data))i(ae.data);else{console.error("Unexpected roles format:",ae.data);const ie=L();i(ie.map(G=>({_id:G,roleName:G})))}}catch(ae){const ie=L();i(ie.map(G=>({_id:G,roleName:G}))),console.error("Error fetching roles:",ae)}},L=()=>{const ae=new Set;return o.forEach(ie=>{Array.isArray(ie.role)&&ie.role.forEach(G=>{G&&ae.add(G)})}),Array.from(ae).sort()},P=async()=>{try{const ae=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),G=await Oe.get("/api/faculties",{params:{companyId:ae,financialYear:ie}});l(G.data);const de=G.data.reduce((Y,oe)=>{if(oe.employeeId){const Se=oe.employeeId.match(/FAC-(\d+)$/);if(Se){const ue=parseInt(Se[1],10);return ue>Y?ue:Y}}return Y},0);E(de)}catch(ae){console.error("Error fetching faculties:",ae)}},[O,J]=w.useState({isChecking:!1,exists:!1,message:""}),W=async ae=>{if(!(!ae||!/\S+@\S+\.\S+/.test(ae))){J(ie=>({...ie,isChecking:!0}));try{const G=(await Oe.get(`/api/Faculty/check-email-exists?email=${ae}`)).data.exists;J({isChecking:!1,exists:G,message:G?"This email is already registered":"Email is available"})}catch(ie){console.error("Error checking email:",ie),J({isChecking:!1,exists:!1,message:"Unable to verify email"})}}},re=w.useRef(null),U=ae=>{const ie=ae.target.files[0];if(ie){y(ie);const G=new FileReader;G.onloadend=()=>{N(G.result)},G.readAsDataURL(ie)}},Q=ae=>{const{name:ie,type:G,value:de,options:Y}=ae.target;let oe=de,Se="";if(ie==="phone"){let se=de.replace(/\D/g,"");se.startsWith("91")&&(se=se.slice(2)),/^\d{0,10}$/.test(se)?(se.length>10&&(se=se.slice(0,10)),g(ye=>({...ye,[ie]:se})),se.length===0?Se="Phone number is required.":se.length===1&&!/^[6-9]$/.test(se)?Se="Phone number must start with 6, 7, 8, or 9.":se.length<10?Se="Phone number must be exactly 10 digits.":se.length===10&&!/^[6-9]\d{9}$/.test(se)&&(Se="Invalid phone number format. It must start with 6, 7, 8, or 9."),se.length===10&&!Se&&(Se=""),t(ye=>({...ye,[ie]:Se}))):t(ye=>({...ye,[ie]:"Only numbers are allowed."}));return}(ie==="firstName"||ie==="lastName")&&(/^[A-Za-z\s]*$/.test(de)||(Se="Only alphabets are allowed.")),ie==="email"&&de&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&(Se="Enter a valid email."),t(se=>({...se,[ie]:Se})),G==="select-multiple"&&(oe=Array.from(Y).filter(se=>se.selected).map(se=>se.value));let ue={...v,[ie]:oe};if(g(ue),ie==="email"&&(re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{W(oe)},500)),ie==="firstName"&&de&&!c){const se=D+1,ye=`FAC-${String(se).padStart(3,"0")}`;g(Ne=>({...Ne,employeeId:ye}))}},[B,te]=w.useState({searchQuery:"",roleName:""}),X=ae=>{const{name:ie,value:G}=ae.target;te(de=>({...de,[ie]:G}))},ce=()=>o.filter(ae=>{if(B.roleName&&!ae.role.includes(B.roleName))return!1;if(B.searchQuery){const ie=B.searchQuery.toLowerCase();return ae.firstName?.toLowerCase().includes(ie)||ae.lastName?.toLowerCase().includes(ie)||ae.email?.toLowerCase().includes(ie)||ae.employeeId?.toLowerCase().includes(ie)||ae.department?.toLowerCase().includes(ie)}return!0}),M=async ae=>{ae.preventDefault();const ie=Object.values(e).some(Ne=>Ne),G=new Date(v.dob),de=new Date(v.joinDate);let Y=de.getFullYear()-G.getFullYear();const oe=de.getMonth()-G.getMonth(),Se=de.getDate()-G.getDate();if((oe<0||oe===0&&Se<0)&&Y--,Y<19){alert("Faculty must be at least 19 years old on the joining date.");return}if(ie){alert("Please fix the validation errors before submitting.");return}let ue=v.phone;ue.startsWith("+91")||(ue="+91"+ue);const se=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const ye={companyId:se,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:ue,department:v.department,qualification:v.qualification,otherQualification:v.otherQualification,experience:v.experience,dob:v.dob,joinDate:v.joinDate,address:v.address,gender:v.gender,employmentType:v.employmentType,status:v.status,salary:v.salary,employeeId:v.employeeId,role:v.role};v.password&&v.password.trim()!==""&&(ye.password=v.password),console.log("submitData",ye);try{let Ne;c?Ne=await Oe.put(`/api/faculties/${c}`,ye,{headers:{"Content-Type":"application/json"}}):Ne=await Oe.post("/api/faculties",ye,{headers:{"Content-Type":"application/json"}}),alert(Ne.data.message||"Faculty saved successfully!"),q(),P()}catch(Ne){alert(Ne.response?.data?.message||"An error occurred while saving faculty.")}},q=()=>{g({firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),y(null),N(null),J({}),d(null)},z=ae=>{console.log("Editing faculty:",ae);const ie={...ae,password:""};if(g(ie),d(ae._id),ae.profilePhoto){const de=`/${ae.profilePhoto.startsWith("/")?ae.profilePhoto.substring(1):ae.profilePhoto}`;N(de)}else N(null)},K=async ae=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{await Oe.delete(`/api/faculties/${ae}`),alert("Faculty deleted successfully"),P()}catch(ie){alert(ie.response?.data?.message||"Error deleting faculty")}},ee=()=>{const ae=ce(),ie=Math.max(1,Math.ceil(ae.length/m.itemsPerPage));m.totalPages!==ie&&p(Y=>({...Y,totalPages:ie}));const G=(m.currentPage-1)*m.itemsPerPage,de=G+m.itemsPerPage;return ae.slice(G,de)},ne=ae=>{ae<1||ae>m.totalPages||p(ie=>({...ie,currentPage:ae}))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"",children:a.jsx("h3",{children:"Staff Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, employee ID...",name:"searchQuery",value:B.searchQuery,onChange:X})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",name:"roleName",value:B.roleName,onChange:X,children:[a.jsx("option",{value:"",children:"All Roles"}),L().map(ae=>a.jsx("option",{value:ae,children:ae},ae))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:q,children:"Add Staff"})})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-center mb-0 table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Experience"}),a.jsx("th",{children:"Join Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ee().length>0?ee().map(ae=>a.jsxs("tr",{children:[a.jsx("td",{children:ae.employeeId}),a.jsxs("td",{children:[ae.firstName," ",ae.lastName]}),a.jsx("td",{children:ae.email}),a.jsx("td",{children:ae.phone}),a.jsx("td",{children:ae.department}),a.jsxs("td",{children:[ae.experience," years"]}),a.jsx("td",{children:ae.joinDate}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{className:"btn btn-icon btn-sm btn-soft-warning rounded-pill","data-bs-toggle":"modal","data-bs-target":"#viewModal",onClick:()=>h(ae),children:a.jsx("i",{className:"feather-eye"})}),a.jsx("button",{onClick:()=>z(ae),className:"btn btn-icon btn-sm btn-soft-info rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>K(ae._id),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",children:a.jsx("i",{className:"feather-trash"})})]})})]},ae._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"text-center",children:"No faculties found matching your criteria"})})})]})}),a.jsx("div",{className:"d-flex justify-content-left mt-3",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${m.currentPage===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(m.currentPage-1),children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),[...Array(m.totalPages)].map((ae,ie)=>{const G=ie+1;return G===1||G===m.totalPages||G>=m.currentPage-1&&G<=m.currentPage+1?a.jsx("li",{className:`page-item ${m.currentPage===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(G),children:G})},ie):null}),a.jsx("li",{className:`page-item ${m.currentPage===m.totalPages?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(m.currentPage+1),children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]}),a.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[a.jsxs("div",{className:"offcanvas-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Staff":"Add Staff"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"offcanvas","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"offcanvas-body",children:a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{children:"Profile Photo"}),a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("input",{type:"file",name:"profilePhoto",accept:"image/*",onChange:U,className:"form-control",style:{maxWidth:"300px"}}),C&&a.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>{y(null),N(null),g(ae=>({...ae,profilePhoto:""}))},children:"Remove"})]}),C&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:C,alt:"Profile Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"},className:"rounded"})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"First Name"}),a.jsx("input",{type:"text",className:"form-control",name:"firstName",placeholder:"First Name",value:v.firstName,onChange:Q,required:!0}),e.firstName&&a.jsx("p",{style:{color:"red"},children:e.firstName})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Last Name"}),a.jsx("input",{type:"text",className:"form-control",name:"lastName",placeholder:"Last Name",value:v.lastName,onChange:Q,required:!0}),e.lastName&&a.jsx("p",{style:{color:"red"},children:e.lastName})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",value:v.email,onChange:Q,placeholder:"Email",required:!0}),O.isChecking&&a.jsx("small",{className:"text-muted",children:"Checking email..."}),O.message&&!O.isChecking&&a.jsx("small",{className:O.exists?"text-danger":"text-success",children:O.message}),e.email&&a.jsx("p",{style:{color:"red"},children:e.email})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Phone Number"}),a.jsx("input",{type:"text",name:"phone",placeholder:"Phone",className:"form-control",value:v.phone,onChange:Q,required:!0}),e.phone&&a.jsx("p",{style:{color:"red"},children:e.phone})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Department"}),a.jsxs("select",{name:"department",value:v.department,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"--Select--"}),k.length>0?k.map(ae=>a.jsx("option",{value:ae.departmentName,children:ae.departmentName},ae._id)):a.jsx("option",{disabled:!0,children:"Loading departments..."})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",placeholder:"Employee ID",value:v.employeeId,onChange:Q,readOnly:!0,className:"form-control"}),a.jsx("small",{className:"text-muted",children:"Auto-generated"})]})]}),s.length>0?s.map((ae,ie)=>{const G=ae.roleName;return G?.toLowerCase()==="student"?null:a.jsxs("div",{className:"form-check",style:{display:"flex",gap:"5px",alignItems:"center",marginTop:"9px"},children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`role-${ie}`,value:ae.roleName,checked:v.role.includes(ae.roleName),onChange:de=>{const Y=de.target.checked;g(oe=>{let Se;return Y?(Se=[...oe.role],Se.includes(G)||Se.push(G)):Se=oe.role.filter(ue=>ue!==G),{...oe,role:Se}})}}),a.jsx("label",{className:"form-check-label mt-1",htmlFor:`role-${ie}`,children:ae.roleName})]},ae._id||ie)}):a.jsx("p",{children:"No roles found."}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{name:"qualification",className:"form-control",value:v.qualification,onChange:Q,required:!0,children:[a.jsx("option",{value:"",children:"Select Qualification"}),a.jsx("option",{value:"BE",children:"BE"}),a.jsx("option",{value:"BTech",children:"BTech"}),a.jsx("option",{value:"MCA",children:"MCA"}),a.jsx("option",{value:"ME",children:"ME"}),a.jsx("option",{value:"MTech",children:"MTech"}),a.jsx("option",{value:"Diploma",children:"Diploma"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),v.qualification==="Other"&&a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Other Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",name:"otherQualification",className:"form-control",value:v.otherQualification||"",onChange:Q,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Experience (Years)"}),a.jsx("input",{type:"number",name:"experience",placeholder:"Experience in years",value:v.experience,onChange:ae=>{const ie=ae.target.value;(ie===""||/^\d{1,2}$/.test(ie)&&Number(ie)>0&&Number(ie)<=50)&&Q(ae)},min:"1",max:"50",required:!0,className:"form-control"})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Date of Birth"}),a.jsx("input",{type:"date",name:"dob",value:v.dob,onChange:Q,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Joining Date"}),a.jsx("input",{type:"date",className:"form-control",name:"joinDate",value:v.joinDate,onChange:Q,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Gender"}),a.jsxs("select",{name:"gender",value:v.gender,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",name:"address",placeholder:"Address",value:v.address,onChange:Q,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),a.jsxs("select",{id:"employmentType",name:"employmentType",value:v.employmentType,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"Full-Time",children:"Full-Time"}),a.jsx("option",{value:"Part-Time",children:"Part-Time"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:v.status,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Salary"}),a.jsx("input",{type:"text",className:"form-control",name:"salary",placeholder:"Salary per month",value:v.salary,onChange:Q,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Password ",c?"(Leave blank to keep current)":""]}),a.jsx("input",{type:"password",name:"password",placeholder:c?"Leave blank to keep current":"Password",value:v.password,onChange:Q,required:!c,className:"form-control"})]})]}),a.jsxs("div",{className:"row mt-4",children:[a.jsx("div",{className:"col-6",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Submit"})}),a.jsx("div",{className:"col-6 text-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"offcanvas",children:"Cancel"})})]})]})})]})]})})})]})})}),a.jsx("div",{className:"modal fade",id:"viewModal",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Faculty Details"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:u?a.jsx("table",{className:"table table-bordered",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("td",{children:u.employeeId})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsxs("td",{children:[u.firstName," ",u.lastName]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("td",{children:u.email})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Phone"}),a.jsx("td",{children:u.phone})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Department"}),a.jsx("td",{children:u.department})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Qualification"}),a.jsx("td",{children:u.qualification})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Experience"}),a.jsxs("td",{children:[u.experience," years"]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Role"}),a.jsx("td",{children:Array.isArray(u.role)?u.role.join(", "):u.role})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Employment Type"}),a.jsx("td",{children:u.employmentType})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Status"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${u.status==="Active"?"bg-success":"bg-danger"}`,children:u.status})})]})]})}):a.jsx("h6",{children:"No faculty selected"})})]})})}),a.jsx("style",{jsx:!0,children:`
        .checkbox-group {
          display: flex;
          gap: 10px;
          padding: 10px;
          flex-wrap: wrap;
          max-height: 150px;
          overflow-y: auto;
          border: 1px solid #ced4da;
          border-radius: 0.25rem;
          padding: 0.5rem;
        }
        .form-check {
          margin: 5px 0;
        }
        .form-select[multiple] option {
          padding: 8px 12px;
          margin: 2px 0;
        }
        .form-select[multiple] option:checked {
          background-color: #0d6efd;
          color: white;
        }
        .badge {
          font-size: 0.75em;
          padding: 0.25em 0.5em;
        }
      `})]})},WMe=()=>{const[e,t]=w.useState({departmentName:""}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(1),c=5;w.useEffect(()=>{d()},[]);const d=async()=>{try{const N=await Oe.get("/api/departments");n(N.data)}catch(N){console.error("Error fetching departments:",N)}},u=N=>{const{name:k,value:S}=N.target;t(D=>({...D,[k]:S}))},h=async N=>{N.preventDefault();try{s?await Oe.put(`/api/departments/${s}`,e):await Oe.post("/api/departments",e),t({departmentName:""}),i(null),d()}catch(k){console.error(k)}},m=N=>{t({departmentName:N.departmentName}),i(N._id)},p=async N=>{if(window.confirm("Are you sure you want to delete this department?"))try{await Oe.delete(`/api/departments/${N}`),d()}catch(k){console.error(k)}},v=o*c,g=v-c,b=r.slice(g,v),y=Math.ceil(r.length/c),C=N=>l(N);return a.jsxs("div",{className:"container mt-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h3",{className:"text-primary",children:"Department Master"}),a.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>{t({departmentName:""}),i(null)},children:"+ Add Department"})]}),a.jsx("div",{className:"card shadow",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:r.length>0?a.jsxs("table",{className:"table table-bordered table-striped align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Department ID"}),a.jsx("th",{children:"Department Name"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:b.map(N=>a.jsxs("tr",{children:[a.jsx("td",{children:N.dep_id||N._id.slice(-5)}),a.jsx("td",{children:N.departmentName}),a.jsxs("td",{children:[a.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>m(N),children:[a.jsx("i",{className:"bi bi-pencil-square"})," Edit"]}),a.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>p(N._id),children:[a.jsx("i",{className:"bi bi-trash"})," Delete"]})]})]},N._id))})]}):a.jsx("p",{className:"text-muted",children:"No departments added yet."})}),y>1&&a.jsx("nav",{className:"mt-4",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o-1),children:""})}),Array.from({length:y},(N,k)=>a.jsx("li",{className:`page-item ${o===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(k+1),children:k+1})},k)),a.jsx("li",{className:`page-item ${o===y?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o+1),children:""})})]})})]})}),a.jsx("div",{className:"modal fade",id:"department-modal",tabIndex:"-1","aria-labelledby":"departmentModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-sm",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"departmentModalLabel",children:s?"Edit Department":"Add Department"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{t({departmentName:""}),i(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department Name"}),a.jsx("input",{type:"text",name:"departmentName",className:"form-control",value:e.departmentName,onChange:u,placeholder:"Enter department name",required:!0})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100","data-bs-dismiss":"modal",children:s?"Update":"Save"})})]})})})})]})},GMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState([]),[c,d]=w.useState(!1),[u,h]=w.useState(null),m=w.useRef();w.useEffect(()=>{p(),v()},[]);const p=()=>{Oe.get("/api/departments").then(S=>t(S.data)).catch(S=>console.error("Error fetching departments",S))},v=()=>{Oe.get("/api/designations").then(S=>l(S.data)).catch(S=>console.error("Error fetching designations",S))},g=()=>{d(!1),n(""),i(""),new window.bootstrap.Modal(m.current).show()},b=()=>{window.bootstrap.Modal.getInstance(m.current).hide()},y=S=>{S.preventDefault();const D={designName:r,departmentId:s};(c?Oe.put(`/api/designations/${u}`,D):Oe.post("/api/designations",D)).then(()=>{v(),b(),k()}).catch(T=>console.error("Error saving designation",T))},C=S=>{d(!0),h(S._id),n(S.designName),i(S.departmentId?._id||""),new window.bootstrap.Modal(m.current).show()},N=S=>{window.confirm("Are you sure you want to delete this designation?")&&Oe.delete(`/api/designations/${S}`).then(()=>v()).catch(D=>console.error("Error deleting designation",D))},k=()=>{n(""),i(""),d(!1),h(null)};return a.jsxs("div",{className:"container mt-3",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsx("h4",{className:"mb-4 text-primary",children:"Material Master"}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add Designation"})})]}),a.jsxs("div",{className:"card p-4",children:[a.jsx("h5",{className:"card-title mb-3",children:"All Designations"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Designation"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:S.designName}),a.jsx("td",{children:S.departmentId?.departmentName||"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>C(S),children:"Edit"}),a.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>N(S._id),children:"Delete"})]})]},S._id)),o.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No designations found"})})]})]})})]}),a.jsx("div",{className:"modal fade",ref:m,tabIndex:"-1","aria-labelledby":"designationModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",id:"designationModalLabel",children:[c?"Edit":"Add"," Designation"]}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Designation Name"}),a.jsx("input",{type:"text",className:"form-control",value:r,onChange:S=>n(S.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department"}),a.jsxs("select",{className:"form-select",value:s,onChange:S=>i(S.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Department --"}),e.map(S=>a.jsx("option",{value:S._id,children:S.departmentName},S._id))]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Add"}),a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:k,children:"Cancel"})]})]})})})})]})},YMe=()=>{const[e,t]=w.useState({employeeId:"",name:"",leaveType:"",fromDate:"",toDate:"",reason:""}),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(!1);w.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),t(v=>({...v,employeeId:p.employeeId||"",name:p.username}))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]);const c=async m=>await(await fetch("/api/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json(),d=async m=>await(await fetch(`/api/leave?employeeId=${m}`)).json(),u=m=>{t({...e,[m.target.name]:m.target.value})},h=async()=>{if(!e.leaveType||!e.fromDate||!e.toDate||!e.reason){alert("Please fill in all required fields");return}if(new Date(e.fromDate)>new Date(e.toDate)){alert("From date cannot be later than to date");return}try{const m=await c(e);m.success&&(alert(m.message),n(p=>[...p,m.data]),t(p=>({...p,leaveType:"",fromDate:"",toDate:"",reason:""})),i(!1))}catch(m){alert("Failed to submit leave request"),console.error("Submission error:",m)}};return w.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),p.employeeId&&d(p.employeeId).then(v=>n(v)).catch(v=>console.error("Error fetching leave requests:",v))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]),w.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[s]),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",style:{backgroundColor:"#f8f9fa"},children:[a.jsxs("div",{className:"content container-fluid",style:{padding:"20px",margin:"0 auto"},children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{className:"col",children:a.jsx("h3",{className:"page-title",style:{color:"#333",fontSize:"24px",margin:0},children:"Employee Leave Request"})}),a.jsx("div",{className:"col-auto text-end",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[a.jsx("span",{style:{marginRight:"5px"},children:"+"})," Apply for Leave"]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:a.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[a.jsx("h4",{className:"card-title",style:{marginBottom:"20px",color:"#333"},children:"My Leave Requests"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Leave Type"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"From Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"To Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Reason"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:r.length>0?r.map((m,p)=>a.jsxs("tr",{children:[a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.leaveType}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.fromDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.toDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.reason}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:a.jsx("span",{className:`badge ${m.status==="Approved"?"bg-success":m.status==="Rejected"?"bg-danger":"bg-warning"}`,style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"white",backgroundColor:m.status==="Approved"?"#28a745":m.status==="Rejected"?"#dc3545":"#ffc107"},children:m.status})})]},p)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #dee2e6"},children:"No leave requests found"})})})]})})]})})})})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal fade show",style:{display:"block",zIndex:1050,position:"fixed",top:0,left:0,width:"100%",height:"100%",outline:0,overflow:"auto"},onClick:m=>{m.target===m.currentTarget&&i(!1)},children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:m=>m.stopPropagation(),style:{margin:"1.75rem auto",maxWidth:"500px",pointerEvents:"all"},children:a.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #e9ecef",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h5",{className:"modal-title",style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Apply for Leave"}),a.jsx("button",{type:"button",className:"close",onClick:()=>i(!1),style:{cursor:"pointer",background:"none",border:"none",fontSize:"24px",padding:0,lineHeight:1},children:a.jsx("span",{children:""})})]}),a.jsx("div",{className:"modal-body",style:{padding:"1rem"},children:a.jsxs("div",{children:[a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",value:e.employeeId,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Name"}),a.jsx("input",{type:"text",name:"name",value:e.name,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"3rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:e.leaveType,onChange:u,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"},children:[a.jsx("option",{value:"",children:"Select Leave Type"}),a.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),a.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),a.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),a.jsx("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:e.fromDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:e.toDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Reason"}),a.jsx("textarea",{name:"reason",value:e.reason,onChange:u,className:"form-control",rows:"4",required:!0,placeholder:"Please provide the reason for your leave request...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",resize:"vertical"}})]}),a.jsxs("div",{className:"submit-section",style:{marginTop:"20px"},children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),style:{width:"100%",marginBottom:"10px",backgroundColor:"#6c757d",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{onClick:h,className:"btn btn-danger",disabled:o,style:{width:"100%",backgroundColor:o?"#ccc":"#dc3545",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:o?"not-allowed":"pointer"},children:o?"Submitting...":"Submit Request"})]})]})})]})})}),a.jsx("div",{className:"modal-backdrop fade show",style:{position:"fixed",top:0,left:0,zIndex:1040,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},onClick:()=>i(!1)})]})]})},oK=6048e5,KMe=864e5,YS=6e4,KS=36e5,XMe=1e3,HB=Symbol.for("constructDateFrom");function ya(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&HB in e?e[HB](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ur(e,t){return ya(t||e,e)}function Od(e,t,r){const n=Ur(e,r?.in);return isNaN(t)?ya(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Rd(e,t,r){const n=Ur(e,r?.in);if(isNaN(t))return ya(e,NaN);if(!t)return n;const s=n.getDate(),i=ya(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function lK(e,t,r){return ya(e,+Ur(e)+t)}function QMe(e,t,r){return lK(e,t*KS)}let JMe={};function Kx(){return JMe}function lf(e,t){const r=Kx(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ur(e,t?.in),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function $v(e,t){return lf(e,{...t,weekStartsOn:1})}function cK(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=ya(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=$v(s),o=ya(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=$v(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function v2(e){const t=Ur(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function kf(e,...t){const r=ya.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Tx(e,t){const r=Ur(e,t?.in);return r.setHours(0,0,0,0),r}function qv(e,t,r){const[n,s]=kf(r?.in,e,t),i=Tx(n),o=Tx(s),l=+i-v2(i),c=+o-v2(o);return Math.round((l-c)/KMe)}function ZMe(e,t){const r=cK(e,t),n=ya(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),$v(n)}function i3(e,t,r){const n=Ur(e,r?.in);return n.setTime(n.getTime()+t*YS),n}function gI(e,t,r){return Rd(e,t*3,r)}function eRe(e,t,r){return lK(e,t*1e3)}function g2(e,t,r){return Od(e,t*7,r)}function Kh(e,t,r){return Rd(e,t*12,r)}function WB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ya.bind(null,s));const i=Ur(s,n);(!r||r<i||isNaN(+i))&&(r=i)}),ya(n,r||NaN)}function GB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ya.bind(null,s));const i=Ur(s,n);(!r||r>i||isNaN(+i))&&(r=i)}),ya(n,r||NaN)}function tRe(e,t,r){const[n,s]=kf(r?.in,e,t);return+Tx(n)==+Tx(s)}function Xh(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function b2(e){return!(!Xh(e)&&typeof e!="number"||isNaN(+Ur(e)))}function y2(e,t,r){const[n,s]=kf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function mx(e,t){const r=Ur(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function j2(e,t,r){const[n,s]=kf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=mx(n)-mx(s);return i*4+o}function N2(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()-s.getFullYear()}function rRe(e,t,r){const[n,s]=kf(r?.in,e,t),i=YB(n,s),o=Math.abs(qv(n,s));n.setDate(n.getDate()-i*o);const l=+(YB(n,s)===-i),c=i*(o-l);return c===0?0:c}function YB(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function dK(e,t){const r=Ur(e,t?.in);return r.setHours(23,59,59,999),r}function uK(e,t){const r=Ur(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function o3(e,t){const r=Ur(e,t?.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function hK(e,t){const r=Ur(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function fK(e,t){const r=Ur(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function XS(e,t){const r=Ur(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function nRe(e,t){const r=Kx(),n=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ur(e,t?.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const aRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sRe=(e,t,r)=>{let n;const s=aRe[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function XE(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const iRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cRe={date:XE({formats:iRe,defaultWidth:"full"}),time:XE({formats:oRe,defaultWidth:"full"}),dateTime:XE({formats:lRe,defaultWidth:"full"})},dRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uRe=(e,t,r,n)=>dRe[e];function Nb(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const hRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gRe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},bRe={ordinalNumber:gRe,era:Nb({values:hRe,defaultWidth:"wide"}),quarter:Nb({values:fRe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nb({values:mRe,defaultWidth:"wide"}),day:Nb({values:pRe,defaultWidth:"wide"}),dayPeriod:Nb({values:xRe,defaultWidth:"wide",formattingValues:vRe,defaultFormattingWidth:"wide"})};function wb(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jRe(l,h=>h.test(o)):yRe(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function yRe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function jRe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function NRe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const wRe=/^(\d+)(th|st|nd|rd)?/i,SRe=/\d+/i,CRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kRe={any:[/^b/i,/^(a|c)/i]},_Re={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ERe={any:[/1/i,/2/i,/3/i,/4/i]},DRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ARe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ORe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MRe={ordinalNumber:NRe({matchPattern:wRe,parsePattern:SRe,valueCallback:e=>parseInt(e,10)}),era:wb({matchPatterns:CRe,defaultMatchWidth:"wide",parsePatterns:kRe,defaultParseWidth:"any"}),quarter:wb({matchPatterns:_Re,defaultMatchWidth:"wide",parsePatterns:ERe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wb({matchPatterns:DRe,defaultMatchWidth:"wide",parsePatterns:ARe,defaultParseWidth:"any"}),day:wb({matchPatterns:TRe,defaultMatchWidth:"wide",parsePatterns:IRe,defaultParseWidth:"any"}),dayPeriod:wb({matchPatterns:PRe,defaultMatchWidth:"any",parsePatterns:ORe,defaultParseWidth:"any"})},mK={code:"en-US",formatDistance:sRe,formatLong:cRe,formatRelative:uRe,localize:bRe,match:MRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RRe(e,t){const r=Ur(e,t?.in);return qv(r,XS(r))+1}function bI(e,t){const r=Ur(e,t?.in),n=+$v(r)-+ZMe(r);return Math.round(n/oK)+1}function yI(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=Kx(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=ya(t?.in||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=lf(o,t),c=ya(t?.in||e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=lf(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function FRe(e,t){const r=Kx(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=yI(e,t),i=ya(t?.in||e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),lf(i,t)}function pK(e,t){const r=Ur(e,t?.in),n=+lf(r,t)-+FRe(r,t);return Math.round(n/oK)+1}function xa(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const bm={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return xa(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):xa(r+1,2)},d(e,t){return xa(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return xa(e.getHours()%12||12,t.length)},H(e,t){return xa(e.getHours(),t.length)},m(e,t){return xa(e.getMinutes(),t.length)},s(e,t){return xa(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return xa(s,t.length)}},B0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KB={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return bm.y(e,t)},Y:function(e,t,r,n){const s=yI(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return xa(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):xa(i,t.length)},R:function(e,t){const r=cK(e);return xa(r,t.length)},u:function(e,t){const r=e.getFullYear();return xa(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return xa(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return xa(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return bm.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return xa(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=pK(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):xa(s,t.length)},I:function(e,t,r){const n=bI(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):xa(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):bm.d(e,t)},D:function(e,t,r){const n=RRe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xa(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xa(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xa(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return xa(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=B0.noon:n===0?s=B0.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=B0.evening:n>=12?s=B0.afternoon:n>=4?s=B0.morning:s=B0.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return bm.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):bm.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xa(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):xa(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):bm.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):bm.s(e,t)},S:function(e,t){return bm.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return QB(n);case"XXXX":case"XX":return Lp(n);case"XXXXX":case"XXX":default:return Lp(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return QB(n);case"xxxx":case"xx":return Lp(n);case"xxxxx":case"xxx":default:return Lp(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+XB(n,":");case"OOOO":default:return"GMT"+Lp(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+XB(n,":");case"zzzz":default:return"GMT"+Lp(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return xa(n,t.length)},T:function(e,t,r){return xa(+e,t.length)}};function XB(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+xa(i,2)}function QB(e,t){return e%60===0?(e>0?"-":"+")+xa(Math.abs(e)/60,2):Lp(e,t)}function Lp(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=xa(Math.trunc(n/60),2),i=xa(n%60,2);return r+s+t+i}const JB=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},LRe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return JB(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",JB(n,t)).replace("{{time}}",xK(s,t))},l3={p:xK,P:LRe},BRe=/^D+$/,URe=/^Y+$/,$Re=["D","DD","YY","YYYY"];function qRe(e){return BRe.test(e)}function VRe(e){return URe.test(e)}function zRe(e,t,r){const n=HRe(e,t,r);if(console.warn(n),$Re.includes(e))throw new RangeError(n)}function HRe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WRe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GRe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YRe=/^'([^]*?)'?$/,KRe=/''/g,XRe=/[a-zA-Z]/;function ZB(e,t,r){const n=Kx(),s=r?.locale??n.locale??mK,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Ur(e,r?.in);if(!b2(l))throw new RangeError("Invalid time value");let c=t.match(GRe).map(u=>{const h=u[0];if(h==="p"||h==="P"){const m=l3[h];return m(u,s.formatLong)}return u}).join("").match(WRe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:QRe(u)};if(KB[h])return{isToken:!0,value:u};if(h.match(XRe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!r?.useAdditionalWeekYearTokens&&VRe(h)||!r?.useAdditionalDayOfYearTokens&&qRe(h))&&zRe(h,t,String(e));const m=KB[h[0]];return m(l,h,s.localize,d)}).join("")}function QRe(e){const t=e.match(YRe);return t?t[1].replace(KRe,"'"):e}function e7(e,t){return Ur(e,t?.in).getDate()}function JRe(e,t){return Ur(e,t?.in).getDay()}function ZRe(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=r.getMonth(),i=ya(r,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}function eFe(){return Object.assign({},Kx())}function Qh(e,t){return Ur(e,t?.in).getHours()}function tFe(e,t){const r=Ur(e,t?.in).getDay();return r===0?7:r}function Jh(e,t){return Ur(e,t?.in).getMinutes()}function Co(e,t){return Ur(e,t?.in).getMonth()}function Mm(e){return Ur(e).getSeconds()}function c3(e){return+Ur(e)}function Dn(e,t){return Ur(e,t?.in).getFullYear()}function Hm(e,t){return+Ur(e)>+Ur(t)}function Ix(e,t){return+Ur(e)<+Ur(t)}function rFe(e,t){return+Ur(e)==+Ur(t)}function nFe(e,t){const r=aFe(t)?new t(0):ya(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function aFe(e){return typeof e=="function"&&e.prototype?.constructor===e}const sFe=10;class vK{subPriority=0;validate(t,r){return!0}}class iFe extends vK{constructor(t,r,n,s,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class oFe extends vK{priority=sFe;subPriority=-1;constructor(t,r){super(),this.context=t||(n=>ya(r,n))}set(t,r){return r.timestampIsSet?t:ya(t,nFe(t,this.context))}}class ia{run(t,r,n,s){const i=this.parse(t,r,n,s);return i?{setter:new iFe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class lFe extends ia{priority=140;parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const Bs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Au={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Us(e,t){return e&&{value:t(e.value),rest:e.rest}}function ls(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Tu(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*KS+i*YS+o*XMe),rest:t.slice(r[0].length)}}function gK(e){return ls(Bs.anyDigitsSigned,e)}function Cs(e,t){switch(e){case 1:return ls(Bs.singleDigit,t);case 2:return ls(Bs.twoDigits,t);case 3:return ls(Bs.threeDigits,t);case 4:return ls(Bs.fourDigits,t);default:return ls(new RegExp("^\\d{1,"+e+"}"),t)}}function w2(e,t){switch(e){case 1:return ls(Bs.singleDigitSigned,t);case 2:return ls(Bs.twoDigitsSigned,t);case 3:return ls(Bs.threeDigitsSigned,t);case 4:return ls(Bs.fourDigitsSigned,t);default:return ls(new RegExp("^-?\\d{1,"+e+"}"),t)}}function jI(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function bK(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const i=n+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return r?s:1-s}function yK(e){return e%400===0||e%4===0&&e%100!==0}class cFe extends ia{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Us(Cs(4,t),s);case"yo":return Us(n.ordinalNumber(t,{unit:"year"}),s);default:return Us(Cs(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const s=t.getFullYear();if(n.isTwoDigitYear){const o=bK(n.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class dFe extends ia{priority=130;parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Us(Cs(4,t),s);case"Yo":return Us(n.ordinalNumber(t,{unit:"year"}),s);default:return Us(Cs(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,s){const i=yI(t,s);if(n.isTwoDigitYear){const l=bK(n.year,i);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),lf(t,s)}const o=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),lf(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class uFe extends ia{priority=130;parse(t,r){return w2(r==="R"?4:r.length,t)}set(t,r,n){const s=ya(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),$v(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class hFe extends ia{priority=130;parse(t,r){return w2(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class fFe extends ia{priority=120;parse(t,r,n){switch(r){case"Q":case"QQ":return Cs(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class mFe extends ia{priority=120;parse(t,r,n){switch(r){case"q":case"qq":return Cs(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class pFe extends ia{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"M":return Us(ls(Bs.month,t),s);case"MM":return Us(Cs(2,t),s);case"Mo":return Us(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class xFe extends ia{priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"L":return Us(ls(Bs.month,t),s);case"LL":return Us(Cs(2,t),s);case"Lo":return Us(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function vFe(e,t,r){const n=Ur(e,r?.in),s=pK(n,r)-t;return n.setDate(n.getDate()-s*7),Ur(n,r?.in)}class gFe extends ia{priority=100;parse(t,r,n){switch(r){case"w":return ls(Bs.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,s){return lf(vFe(t,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function bFe(e,t,r){const n=Ur(e,r?.in),s=bI(n,r)-t;return n.setDate(n.getDate()-s*7),n}class yFe extends ia{priority=100;parse(t,r,n){switch(r){case"I":return ls(Bs.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return $v(bFe(t,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const jFe=[31,28,31,30,31,30,31,31,30,31,30,31],NFe=[31,29,31,30,31,30,31,31,30,31,30,31];class wFe extends ia{priority=90;subPriority=1;parse(t,r,n){switch(r){case"d":return ls(Bs.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return Cs(r.length,t)}}validate(t,r){const n=t.getFullYear(),s=yK(n),i=t.getMonth();return s?r>=1&&r<=NFe[i]:r>=1&&r<=jFe[i]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class SFe extends ia{priority=90;subpriority=1;parse(t,r,n){switch(r){case"D":case"DD":return ls(Bs.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return Cs(r.length,t)}}validate(t,r){const n=t.getFullYear();return yK(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function NI(e,t,r){const n=Kx(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Ur(e,r?.in),o=i.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return Od(i,u,r)}class CFe extends ia{priority=90;parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class kFe extends ia{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Us(Cs(r.length,t),i);case"eo":return Us(n.ordinalNumber(t,{unit:"day"}),i);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class _Fe extends ia{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Us(Cs(r.length,t),i);case"co":return Us(n.ordinalNumber(t,{unit:"day"}),i);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function EFe(e,t,r){const n=Ur(e,r?.in),s=tFe(n,r),i=t-s;return Od(n,i,r)}class DFe extends ia{priority=90;parse(t,r,n){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Cs(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return Us(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return Us(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Us(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Us(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=EFe(t,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class AFe extends ia{priority=80;parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class TFe extends ia{priority=80;parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class IFe extends ia{priority=80;parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class PFe extends ia{priority=70;parse(t,r,n){switch(r){case"h":return ls(Bs.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class OFe extends ia{priority=70;parse(t,r,n){switch(r){case"H":return ls(Bs.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class MFe extends ia{priority=70;parse(t,r,n){switch(r){case"K":return ls(Bs.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class RFe extends ia{priority=70;parse(t,r,n){switch(r){case"k":return ls(Bs.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class FFe extends ia{priority=60;parse(t,r,n){switch(r){case"m":return ls(Bs.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}incompatibleTokens=["t","T"]}class LFe extends ia{priority=50;parse(t,r,n){switch(r){case"s":return ls(Bs.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}class BFe extends ia{priority=30;parse(t,r){const n=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Us(Cs(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}incompatibleTokens=["t","T"]}class UFe extends ia{priority=10;parse(t,r){switch(r){case"X":return Tu(Au.basicOptionalMinutes,t);case"XX":return Tu(Au.basic,t);case"XXXX":return Tu(Au.basicOptionalSeconds,t);case"XXXXX":return Tu(Au.extendedOptionalSeconds,t);case"XXX":default:return Tu(Au.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ya(t,t.getTime()-v2(t)-n)}incompatibleTokens=["t","T","x"]}class $Fe extends ia{priority=10;parse(t,r){switch(r){case"x":return Tu(Au.basicOptionalMinutes,t);case"xx":return Tu(Au.basic,t);case"xxxx":return Tu(Au.basicOptionalSeconds,t);case"xxxxx":return Tu(Au.extendedOptionalSeconds,t);case"xxx":default:return Tu(Au.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ya(t,t.getTime()-v2(t)-n)}incompatibleTokens=["t","T","X"]}class qFe extends ia{priority=40;parse(t){return gK(t)}set(t,r,n){return[ya(t,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class VFe extends ia{priority=20;parse(t){return gK(t)}set(t,r,n){return[ya(t,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const zFe={G:new lFe,y:new cFe,Y:new dFe,R:new uFe,u:new hFe,Q:new fFe,q:new mFe,M:new pFe,L:new xFe,w:new gFe,I:new yFe,d:new wFe,D:new SFe,E:new CFe,e:new kFe,c:new _Fe,i:new DFe,a:new AFe,b:new TFe,B:new IFe,h:new PFe,H:new OFe,K:new MFe,k:new RFe,m:new FFe,s:new LFe,S:new BFe,X:new UFe,x:new $Fe,t:new qFe,T:new VFe},HFe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WFe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GFe=/^'([^]*?)'?$/,YFe=/''/g,KFe=/\S/,XFe=/[a-zA-Z]/;function QFe(e,t,r,n){const s=()=>ya(n?.in||r,NaN),i=eFe(),o=n?.locale??i.locale??mK,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return e?s():Ur(r,n?.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new oFe(n?.in,r)],h=t.match(WFe).map(b=>{const y=b[0];if(y in l3){const C=l3[y];return C(b,o.formatLong)}return b}).join("").match(HFe),m=[];for(let b of h){const y=b[0],C=zFe[y];if(C){const{incompatibleTokens:N}=C;if(Array.isArray(N)){const S=m.find(D=>N.includes(D.token)||D.token===y);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${b}\` at the same time`)}else if(C.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);m.push({token:y,fullToken:b});const k=C.run(e,b,o.match,d);if(!k)return s();u.push(k.setter),e=k.rest}else{if(y.match(XFe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(b==="''"?b="'":y==="'"&&(b=JFe(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&KFe.test(e))return s();const p=u.map(b=>b.priority).sort((b,y)=>y-b).filter((b,y,C)=>C.indexOf(b)===y).map(b=>u.filter(y=>y.priority===b).sort((y,C)=>C.subPriority-y.subPriority)).map(b=>b[0]);let v=Ur(r,n?.in);if(isNaN(+v))return s();const g={};for(const b of p){if(!b.validate(v,d))return s();const y=b.set(v,g,d);Array.isArray(y)?(v=y[0],Object.assign(g,y[1])):v=y}return v}function JFe(e){return e.match(GFe)[1].replace(YFe,"'")}function ZFe(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function eLe(e,t,r){const[n,s]=kf(r?.in,e,t);return+o3(n)==+o3(s)}function tLe(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()===s.getFullYear()}function Oy(e,t,r){const n=+Ur(e,r?.in),[s,i]=[+Ur(t.start,r?.in),+Ur(t.end,r?.in)].sort((o,l)=>o-l);return n>=s&&n<=i}function rLe(e,t,r){return Od(e,-1,r)}function nLe(e,t){const r=()=>ya(t?.in,NaN),s=oLe(e);let i;if(s.date){const d=lLe(s.date,2);i=cLe(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,c;if(s.time&&(l=dLe(s.time),isNaN(l)))return r();if(s.timezone){if(c=uLe(s.timezone),isNaN(c))return r()}else{const d=new Date(o+l),u=Ur(0,t?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return Ur(o+l+c,t?.in)}const dN={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},aLe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sLe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iLe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oLe(e){const t={},r=e.split(dN.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],dN.timeZoneDelimiter.test(t.date)&&(t.date=e.split(dN.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=dN.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function lLe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function cLe(e,t){if(t===null)return new Date(NaN);const r=e.match(aLe);if(!r)return new Date(NaN);const n=!!r[4],s=Sb(r[1]),i=Sb(r[2])-1,o=Sb(r[3]),l=Sb(r[4]),c=Sb(r[5])-1;if(n)return xLe(t,l,c)?hLe(t,l,c):new Date(NaN);{const d=new Date(0);return!mLe(t,i,o)||!pLe(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}}function Sb(e){return e?parseInt(e):1}function dLe(e){const t=e.match(sLe);if(!t)return NaN;const r=QE(t[1]),n=QE(t[2]),s=QE(t[3]);return vLe(r,n,s)?r*KS+n*YS+s*1e3:NaN}function QE(e){return e&&parseFloat(e.replace(",","."))||0}function uLe(e){if(e==="Z")return 0;const t=e.match(iLe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return gLe(n,s)?r*(n*KS+s*YS):NaN}function hLe(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const fLe=[31,null,31,30,31,30,31,31,30,31,30,31];function jK(e){return e%400===0||e%4===0&&e%100!==0}function mLe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(fLe[t]||(jK(e)?29:28))}function pLe(e,t){return t>=1&&t<=(jK(e)?366:365)}function xLe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function vLe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function gLe(e,t){return t>=0&&t<=59}function Rc(e,t,r){const n=Ur(e,r?.in),s=n.getFullYear(),i=n.getDate(),o=ya(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=ZRe(o);return n.setMonth(t,Math.min(i,l)),n}function IN(e,t,r){const n=Ur(e,r?.in);return n.setHours(t),n}function PN(e,t,r){const n=Ur(e,r?.in);return n.setMinutes(t),n}function G0(e,t,r){const n=Ur(e,r?.in),s=Math.trunc(n.getMonth()/3)+1,i=t-s;return Rc(n,n.getMonth()+i*3)}function ON(e,t,r){const n=Ur(e,r?.in);return n.setSeconds(t),n}function wu(e,t,r){const n=Ur(e,r?.in);return isNaN(+n)?ya(e,NaN):(n.setFullYear(t),n)}function px(e,t,r){return Rd(e,-t,r)}function NK(e,t,r){return gI(e,-1,r)}function t7(e,t,r){return g2(e,-1,r)}function Vv(e,t,r){return Kh(e,-t,r)}var bLe=typeof document<"u",yLe=function(){},S2=bLe?w.useLayoutEffect:yLe;const jLe={...qN},NLe=jLe.useInsertionEffect,wLe=NLe||(e=>e());function SLe(e){const t=w.useRef(()=>{});return wLe(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}var CLe=typeof document<"u",kLe=function(){},MN=CLe?w.useLayoutEffect:kLe;function C2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!C2(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!C2(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function wK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function r7(e,t){const r=wK(e);return Math.round(t*r)/r}function JE(e){const t=w.useRef(e);return MN(()=>{t.current=e}),t}function _Le(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=w.useState(n);C2(m,n)||p(n);const[v,g]=w.useState(null),[b,y]=w.useState(null),C=w.useCallback(B=>{B!==D.current&&(D.current=B,g(B))},[]),N=w.useCallback(B=>{B!==E.current&&(E.current=B,y(B))},[]),k=i||v,S=o||b,D=w.useRef(null),E=w.useRef(null),T=w.useRef(u),A=c!=null,L=JE(c),P=JE(s),O=JE(d),J=w.useCallback(()=>{if(!D.current||!E.current)return;const B={placement:t,strategy:r,middleware:m};P.current&&(B.platform=P.current),Gke(D.current,E.current,B).then(te=>{const X={...te,isPositioned:O.current!==!1};W.current&&!C2(T.current,X)&&(T.current=X,Ly.flushSync(()=>{h(X)}))})},[m,t,r,P,O]);MN(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[d]);const W=w.useRef(!1);MN(()=>(W.current=!0,()=>{W.current=!1}),[]),MN(()=>{if(k&&(D.current=k),S&&(E.current=S),k&&S){if(L.current)return L.current(k,S,J);J()}},[k,S,J,L,A]);const re=w.useMemo(()=>({reference:D,floating:E,setReference:C,setFloating:N}),[C,N]),U=w.useMemo(()=>({reference:k,floating:S}),[k,S]),Q=w.useMemo(()=>{const B={position:r,left:0,top:0};if(!U.floating)return B;const te=r7(U.floating,u.x),X=r7(U.floating,u.y);return l?{...B,transform:"translate("+te+"px, "+X+"px)",...wK(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:X}},[r,l,U.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:J,refs:re,elements:U,floatingStyles:Q}),[u,J,re,U,Q])}const ELe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?x8({element:n.current,padding:s}).fn(r):{}:n?x8({element:n,padding:s}).fn(r):{}}}},DLe=(e,t)=>({...Hke(e),options:[e,t]}),ALe=(e,t)=>({...Wke(e),options:[e,t]}),TLe=(e,t)=>({...ELe(e),options:[e,t]}),ILe={...qN};let n7=!1,PLe=0;const a7=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PLe++;function OLe(){const[e,t]=w.useState(()=>n7?a7():void 0);return S2(()=>{e==null&&t(a7())},[]),w.useEffect(()=>{n7=!0},[]),e}const MLe=ILe.useId,SK=MLe||OLe,RLe=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:m,d:p,style:{transform:v,...g}={},...b}=t,y=SK(),[C,N]=w.useState(!1);if(S2(()=>{if(!s)return;Yc(s).direction==="rtl"&&N(!0)},[s]),!s)return null;const[k,S]=n.split("-"),D=k==="top"||k==="bottom";let E=h;(D&&o!=null&&o.x||!D&&o!=null&&o.y)&&(E=null);const T=u*2,A=T/2,L=l/2*(d/-8+1),P=c/2*d/4,O=!!p,J=E&&S==="end"?"bottom":"top";let W=E&&S==="end"?"right":"left";E&&C&&(W=S==="end"?"left":"right");const re=i?.x!=null?E||i.x:"",U=i?.y!=null?E||i.y:"",Q=p||"M0,0"+(" H"+l)+(" L"+(l-L)+","+(c-P))+(" Q"+l/2+","+c+" "+L+","+(c-P))+" Z",B={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[k];return a.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:O?l:l+T,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[W]:re,[J]:U,[k]:D||O?"100%":"calc(100% - "+T/2+"px)",transform:[B,v].filter(te=>!!te).join(" "),...g},children:[T>0&&a.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:m,strokeWidth:T+(p?0:1),d:Q}),a.jsx("path",{stroke:T&&!p?b.fill:"none",d:Q}),a.jsx("clipPath",{id:y,children:a.jsx("rect",{x:-A,y:A*(O?-1:1),width:l+T,height:l})})]})});function FLe(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const LLe=w.createContext(null),BLe=w.createContext(null),ULe=()=>{var e;return((e=w.useContext(LLe))==null?void 0:e.id)||null},$Le=()=>w.useContext(BLe);function qLe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=SK(),i=w.useRef({}),[o]=w.useState(()=>FLe()),l=ULe()!=null,[c,d]=w.useState(n.reference),u=SLe((p,v,g)=>{i.current.openEvent=p?v:void 0,o.emit("openchange",{open:p,event:v,reason:g,nested:l}),r?.(p,v,g)}),h=w.useMemo(()=>({setPositionReference:d}),[]),m=w.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return w.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:m,events:o,floatingId:s,refs:h}),[t,u,m,o,s,h])}function VLe(e){e===void 0&&(e={});const{nodeId:t}=e,r=qLe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[i,o]=w.useState(null),[l,c]=w.useState(null),u=s?.domReference||i,h=w.useRef(null),m=$Le();S2(()=>{u&&(h.current=u)},[u]);const p=_Le({...e,elements:{...s,...l&&{reference:l}}}),v=w.useCallback(N=>{const k=qo(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;c(k),p.refs.setReference(k)},[p.refs]),g=w.useCallback(N=>{(qo(N)||N===null)&&(h.current=N,o(N)),(qo(p.refs.reference.current)||p.refs.reference.current===null||N!==null&&!qo(N))&&p.refs.setReference(N)},[p.refs]),b=w.useMemo(()=>({...p.refs,setReference:g,setPositionReference:v,domReference:h}),[p.refs,g,v]),y=w.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),C=w.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return S2(()=>{n.dataRef.current.floatingContext=C;const N=m?.nodesRef.current.find(k=>k.id===t);N&&(N.context=C)}),w.useMemo(()=>({...p,context:C,refs:b,elements:y}),[p,b,y,C])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var d3=function(t,r){return d3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},d3(t,r)};function Pi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wn=function(){return Wn=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Wn.apply(this,arguments)};function Mu(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var zLe=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,i=e.className,o=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return zt.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},HLe=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=n.current)===null||o===void 0||o.call(n,i))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},QS=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=HLe(r,o);return zt.createElement("div",{className:n,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Sr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Sr||(Sr={}));function CK(){var e=typeof window<"u"?window:globalThis;return e}var N1=12;function da(e){if(e==null)return new Date;var t=typeof e=="string"?nLe(e):Ur(e);return JS(t)?t:new Date}function ZE(e,t,r,n,s){s===void 0&&(s=da());for(var i=zv(r)||zv(wI()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=QFe(e,d,s,{locale:i});if(JS(u)&&(!n||e===Qa(u,d,r)))return u}return null}function JS(e,t){return b2(e)&&!Ix(e,new Date("1/1/1800"))}function Qa(e,t,r){if(r==="en")return ZB(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?zv(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||zv(wI()),ZB(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Mc(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&Qa(e,s,n)||""}var kK=" - ";function WLe(e,t,r){if(!e)return"";var n=Mc(e,r),s=t?Mc(t,r):"";return"".concat(n).concat(kK).concat(s)}function GLe(e,t){if(!e?.length)return"";var r=e[0]?Mc(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=Mc(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function e5(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return IN(PN(ON(e,l),i),n)}function YLe(e){return bI(e)}function KLe(e,t){return Qa(e,"ddd",t)}function RN(e){return Tx(e)}function Rm(e,t,r){var n=zv(t||wI());return lf(e,{locale:n,weekStartsOn:r})}function Zh(e){return hK(e)}function Ob(e){return XS(e)}function s7(e){return o3(e)}function i7(){return Tx(da())}function o7(e){return dK(e)}function XLe(e){return nRe(e)}function QLe(e){return uK(e)}function _u(e,t){return e&&t?tLe(e,t):!e&&!t}function Uo(e,t){return e&&t?ZFe(e,t):!e&&!t}function k2(e,t){return e&&t?eLe(e,t):!e&&!t}function Hn(e,t){return e&&t?tRe(e,t):!e&&!t}function tx(e,t){return e&&t?rFe(e,t):!e&&!t}function Mb(e,t,r){var n,s=Tx(t),i=dK(r);try{n=Oy(e,{start:s,end:i})}catch{n=!1}return n}function wI(){var e=CK();return e.__localeId__}function zv(e){if(typeof e=="string"){var t=CK();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function JLe(e,t,r){return t(Qa(e,"EEEE",r))}function ZLe(e,t){return Qa(e,"EEEEEE",t)}function e6e(e,t){return Qa(e,"EEE",t)}function SI(e,t){return Qa(Rc(da(),e),"LLLL",t)}function _K(e,t){return Qa(Rc(da(),e),"LLL",t)}function t6e(e,t){return Qa(G0(da(),e),"QQQ",t)}function Bc(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,d=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(u){return u instanceof Date?Hn(e,u):Hn(e,u.date)})||o&&o.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||l&&!l.some(function(u){return Hn(e,u)})||c&&!c.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||d&&!d(da(e))||!1}function CI(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return Oy(e,{start:o,end:l})}):n&&n.some(function(i){var o;return i instanceof Date?Hn(e,i):Hn(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function EK(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n?hK(n):void 0,maxDate:s?uK(s):void 0})||i?.some(function(c){return Uo(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return Uo(e,c)})||l&&!l(da(e))||!1}function uN(e,t,r,n){var s=Dn(e),i=Co(e),o=Dn(t),l=Co(t),c=Dn(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function r6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(l){return Uo(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Uo(l,e)})||!1}function hN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i?.some(function(c){return k2(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return k2(e,c)})||l&&!l(da(e))||!1}function fN(e,t,r){if(!t||!r||!b2(t)||!b2(r))return!1;var n=Dn(t),s=Dn(r);return n<=e&&s>=e}function FN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return w1(c,{minDate:n?XS(n):void 0,maxDate:s?fK(s):void 0})||i?.some(function(d){return _u(c,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return _u(c,d)})||l&&!l(da(c))||!1}function mN(e,t,r,n){var s=Dn(e),i=mx(e),o=Dn(t),l=mx(t),c=Dn(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function w1(e,t){var r,n=t===void 0?{}:t,s=n.minDate,i=n.maxDate;return(r=s&&qv(e,s)<0||i&&qv(e,i)>0)!==null&&r!==void 0?r:!1}function l7(e,t){return t.some(function(r){return Qh(r)===Qh(e)&&Jh(r)===Jh(e)&&Mm(r)===Mm(e)})}function c7(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return n&&l7(e,n)||s&&!l7(e,s)||i&&!i(e)||!1}function d7(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=da();s=IN(s,Qh(e)),s=PN(s,Jh(e)),s=ON(s,Mm(e));var i=da();i=IN(i,Qh(r)),i=PN(i,Jh(r)),i=ON(i,Mm(r));var o=da();o=IN(o,Qh(n)),o=PN(o,Jh(n)),o=ON(o,Mm(n));var l;try{l=!Oy(s,{start:i,end:o})}catch{l=!1}return l}function u7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=px(e,1);return n&&y2(n,i)>0||s&&s.every(function(o){return y2(o,i)>0})||!1}function h7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Rd(e,1);return n&&y2(i,n)>0||s&&s.every(function(o){return y2(i,o)>0})||!1}function n6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=XS(e),o=NK(i);return n&&j2(n,o)>0||s&&s.every(function(l){return j2(l,o)>0})||!1}function a6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=fK(e),o=gI(i,1);return n&&j2(o,n)>0||s&&s.every(function(l){return j2(o,l)>0})||!1}function f7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=Vv(e,1);return n&&N2(n,i)>0||s&&s.every(function(o){return N2(o,i)>0})||!1}function s6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Ob(Vv(e,i)),l=Em(o,i).endPeriod,c=n&&Dn(n);return c&&c>l||!1}function m7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Kh(e,1);return n&&N2(i,n)>0||s&&s.every(function(o){return N2(i,o)>0})||!1}function i6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Kh(e,i),l=Em(o,i).startPeriod,c=n&&Dn(n);return c&&c<l||!1}function DK(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return qv(s,t)>=0});return GB(n)}else return r?GB(r):t}function AK(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return qv(s,t)<=0});return WB(n)}else return r?WB(r):t}function p7(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(Xh(o)){var l=Qa(o,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(t)||(c.push(t),n.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(r=d[0])!==null&&r!==void 0?r:"",h=o[u];if(typeof u=="string"&&Array.isArray(h))for(var m=0,p=h.length;m<p;m++){var v=h[m];if(v){var l=Qa(v,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(u)||(c.push(u),n.set(l,c))}}}}return n}function o6e(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function l6e(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,i=n.holidayName;if(Xh(s)){var o=Qa(s,"MM.dd.yyyy"),l=r.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&o6e(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?Mu(Mu([],c,!0),[i],!1):[i],r.set(o,l)}}}),r}function c6e(e,t,r,n,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,d=s[l];d&&(c=QMe(c,Qh(d)),c=i3(c,Jh(d)),c=eRe(c,Mm(d)));var u=i3(e,(r+1)*n);Hm(c,t)&&Ix(c,u)&&d!=null&&o.push(d)}return o}function x7(e){return e<10?"0".concat(e):"".concat(e)}function Em(e,t){t===void 0&&(t=N1);var r=Math.ceil(Dn(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function d6e(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function v7(e){var t=e.getSeconds(),r=e.getMilliseconds();return Ur(e.getTime()-t*1e3-r)}function u6e(e,t){return v7(e).getTime()===v7(t).getTime()}function g7(e){if(!Xh(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function b7(e,t){if(!Xh(e)||!Xh(t))throw new Error("Invalid date received");var r=g7(e),n=g7(t);return Ix(r,n)}function TK(e){return e.key===Sr.Space}var h6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=zt.createRef(),n.onTimeChange=function(s){var i,o;n.setState({time:s});var l=n.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s?.includes(":")){var u=s.split(":"),h=u[0],m=u[1];d.setHours(Number(h)),d.setMinutes(Number(m))}(o=(i=n.props).onChange)===null||o===void 0||o.call(i,d)},n.renderTimeInput=function(){var s=n.state.time,i=n.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?w.cloneElement(c,{date:o,value:s,onChange:n.onTimeChange}):zt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var d;(d=n.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){n.onTimeChange(d.target.value||l)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return zt.createElement("div",{className:"react-datepicker__input-time-container"},zt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),zt.createElement("div",{className:"react-datepicker-time__input-container"},zt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),f6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isSameDay=function(n){return Hn(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return CI(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return Hn(r.props.day,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&Hn(n,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,i=n.highlightDates;if(!i)return!1;var o=Qa(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var n,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=Qa(i,"MM.dd.yyyy");return o.has(l)?[(n=o.get(l))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Mb(s,i,o)},r.isInSelectingRange=function(){var n,s=r.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,h=s.endDate,m=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(o||l||c)||!m||!d&&r.isDisabled()?!1:o&&h&&(Ix(m,h)||tx(m,h))?Mb(i,m,h):l&&u&&(Hm(m,u)||tx(m,u))||c&&u&&!h&&(Hm(m,u)||tx(m,u))?Mb(i,u,m):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l?Hn(i,c):Hn(i,o)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l||c?Hn(i,d):Hn(i,o)},r.isRangeStart=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Hn(i,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Hn(o,s)},r.isWeekend=function(){var n=JRe(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Co(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Co(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(da())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return xn("react-datepicker__day",s,"react-datepicker__day--"+KLe(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,i=n.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=n.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=r.isDisabled()||r.isExcluded()?c:o;return"".concat(d," ").concat(Qa(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,i=n.holidays,o=i===void 0?new Map:i,l=n.excludeDates,c=Qa(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),r.isExcluded()&&d.push(l?.filter(function(u){return u instanceof Date?Hn(u,s):Hn(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),d.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&Hn(s,n))?0:-1;return i},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(e7(r.props.day),r.props.day):e7(r.props.day)},r.render=function(){return zt.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&zt.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),m6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Hn(r.props.date,r.props.selected)&&Hn(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||Hn(r.props.date,r.props.selected)&&Hn(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!n?.isInputFocused&&Hn(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&Hn(this.props.date,this.props.selected)};return zt.createElement("div",{ref:this.weekNumberEl,className:xn(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),p6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,i){for(var o,l,c,d=new Date(n),u=0;u<7;u++){var h=new Date(n);h.setDate(h.getDate()+u);var m=!r.isDisabled(h);if(m){d=h;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,s,i),r.props.showWeekPicker&&r.handleDayClick(d,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):YLe(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Od(n,6),i=new Date(n);i<=s;){if(!r.isDisabled(i))return!1;i=Od(i,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],i=r.formatWeekNumber(n);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,i):void 0;s.push(zt.createElement(m6e,Wn({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(n,l);return zt.createElement(f6e,Wn({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return Rm(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Hn(r.startOfWeek(),r.props.selected)&&Hn(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Hn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return zt.createElement("div",{className:xn(r)},this.renderDays())},t}(w.Component),Cb,x6e=6,gv={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},t5=(Cb={},Cb[gv.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Cb[gv.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Cb[gv.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Cb),pN=1;function y7(e,t){return e?gv.FOUR_COLUMNS:t?gv.TWO_COLUMNS:gv.THREE_COLUMNS}var v6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=Mu([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=Mu([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return CI(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Uo(Rc(i,n),o)},r.isRangeStartQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:k2(G0(i,n),o)},r.isRangeEndMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Uo(Rc(i,n),l)},r.isRangeEndQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:k2(G0(i,n),l)},r.isInSelectingRangeMonth=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?uN(m,h,n,o):c&&u||d&&u&&!h?uN(u,m,n,o):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.startDate,c=i.selectsStart,d=Rc(o,n),u=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?Uo(d,u):Uo(d,l)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.endDate,c=i.selectsEnd,d=i.selectsRange,u=Rc(o,n),h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||d?Uo(u,h):Uo(u,l)},r.isInSelectingRangeQuarter=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?mN(m,h,n,o):c&&u||d&&u&&!h?mN(u,m,n,o):!1},r.isWeekInMonth=function(n){var s=r.props.day,i=Od(n,6);return Uo(n,s)||Uo(i,s)},r.isCurrentMonth=function(n,s){return Dn(n)===Dn(da())&&s===Co(da())},r.isCurrentQuarter=function(n,s){return Dn(n)===Dn(da())&&s===mx(da())},r.isSelectedMonth=function(n,s,i){return Co(i)===s&&Dn(n)===Dn(i)},r.isSelectMonthInList=function(n,s,i){return i.some(function(o){return r.isSelectedMonth(n,s,o)})},r.isSelectedQuarter=function(n,s,i){return mx(n)===s&&Dn(n)===Dn(i)},r.isMonthSelected=function(){var n=r.props,s=n.day,i=n.selected,o=n.selectedDates,l=n.selectsMultiple,c=Co(s);return l?o?.some(function(d){return r.isSelectedMonth(s,c,d)}):!!i&&r.isSelectedMonth(s,c,i)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,i=0,o=!1,l=Rm(Zh(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.preSelection},d=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.selected},u=r.props.selected?d(r.props.selected):void 0,h=r.props.preSelection?c(r.props.preSelection):void 0;n.push(zt.createElement(p6e,Wn({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:l,month:Co(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:u,preSelection:h,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,l=g2(l,1);var m=s&&i>=x6e,p=!s&&!r.isWeekInMonth(l);if(m||p)if(r.props.peekNextMonth)o=!0;else break}return n},r.onMonthClick=function(n,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||r.handleDayClick(Zh(l),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(Zh(o))},r.handleMonthNavigation=function(n,s){var i,o,l,c;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.MONTH_REFS[n])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(n,s,i){var o,l=r.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,h=l.minDate,m=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(d){var g=y7(p,v),b=r.getVerticalOffset(g),y=(o=t5[g])===null||o===void 0?void 0:o.grid,C=function(E,T,A){var L,P,O=T,J=A;switch(E){case Sr.ArrowRight:O=Rd(T,pN),J=A===11?0:A+pN;break;case Sr.ArrowLeft:O=px(T,pN),J=A===0?11:A-pN;break;case Sr.ArrowUp:O=px(T,b),J=!((L=y?.[0])===null||L===void 0)&&L.includes(A)?A+12-b:A-b;break;case Sr.ArrowDown:O=Rd(T,b),J=!((P=y?.[y.length-1])===null||P===void 0)&&P.includes(A)?A-12+b:A+b;break}return{newCalculatedDate:O,newCalculatedMonth:J}},N=function(E,T,A){for(var L=40,P=E,O=!1,J=0,W=C(P,T,A),re=W.newCalculatedDate,U=W.newCalculatedMonth;!O;){if(J>=L){re=T,U=A;break}if(h&&re<h){P=Sr.ArrowRight;var Q=C(P,re,U);re=Q.newCalculatedDate,U=Q.newCalculatedMonth}if(m&&re>m){P=Sr.ArrowLeft;var Q=C(P,re,U);re=Q.newCalculatedDate,U=Q.newCalculatedMonth}if(r6e(re,r.props)){var Q=C(P,re,U);re=Q.newCalculatedDate,U=Q.newCalculatedMonth}else O=!0;J++}return{newCalculatedDate:re,newCalculatedMonth:U}};if(s===Sr.Enter){r.isMonthDisabled(i)||(r.onMonthClick(n,i),u?.(c));return}var k=N(s,d,i),S=k.newCalculatedDate,D=k.newCalculatedMonth;switch(s){case Sr.ArrowRight:case Sr.ArrowLeft:case Sr.ArrowUp:case Sr.ArrowDown:r.handleMonthNavigation(D,S);break}}},r.getVerticalOffset=function(n){var s,i;return(i=(s=t5[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(n,s){var i=r.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=n.key;c!==Sr.Tab&&n.preventDefault(),o||r.handleKeyboardNavigation(n,c,s),l&&l(n)},r.onQuarterClick=function(n,s){var i=G0(r.props.day,s);hN(i,r.props)||r.handleDayClick(s7(i),n)},r.onQuarterMouseEnter=function(n){var s=G0(r.props.day,n);hN(s,r.props)||r.handleDayMouseEnter(s7(s))},r.handleQuarterNavigation=function(n,s){var i,o,l,c;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.QUARTER_REFS[n-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(n,s){var i,o,l=n.key;if(!r.props.disabledKeyboardNavigation)switch(l){case Sr.Enter:r.onQuarterClick(n,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case Sr.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,gI(r.props.preSelection,1));break;case Sr.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,NK(r.props.preSelection));break}},r.isMonthDisabledForLabelDate=function(n){var s,i=r.props,o=i.day,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=Rc(o,n);return{isDisabled:(s=(l||c||d||u)&&EK(h,r.props))!==null&&s!==void 0?s:!1,labelDate:h}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(Rc(i,n)):void 0,h=r.getSelection();return xn("react-datepicker__month-text","react-datepicker__month-".concat(n),u,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":h?r.isSelectMonthInList(i,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(i,n,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":o&&l?uN(o,l,n,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(i,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=Co(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=mx(r.props.preSelection),i=hN(r.props.day,r.props),o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(n){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,h=Rc(d,n),m=r.isDisabled(h)||r.isExcluded(h)?c:o;return"".concat(m," ").concat(Qa(h,"MMMM yyyy",u))},r.getQuarterClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,d=s.minDate,u=s.maxDate,h=s.excludeDates,m=s.includeDates,p=s.filterDate,v=s.preSelection,g=s.disabledKeyboardNavigation,b=(d||u||h||m||p)&&hN(G0(i,n),r.props);return xn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(i,n,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&v&&r.isSelectedQuarter(i,n,v)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":o&&l?mN(o,l,n,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,n)})},r.getMonthContent=function(n){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=_K(n,l),u=SI(n,l);return o?o(n,d,u,c):i?u:d},r.getQuarterContent=function(n){var s,i=r.props,o=i.renderQuarterContent,l=i.locale,c=t6e(n,l);return(s=o?.(n,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var n,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(n=t5[y7(o,i)])===null||n===void 0?void 0:n.grid;return d?.map(function(u,h){return zt.createElement("div",{className:"react-datepicker__month-wrapper",key:h},u.map(function(m,p){return zt.createElement("div",{ref:r.MONTH_REFS[m],key:p,onClick:function(v){r.onMonthClick(v,m)},onKeyDown:function(v){TK(v)&&(v.preventDefault(),v.key=Sr.Enter),r.onMonthKeyDown(v,m)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(m)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(m)}:void 0,tabIndex:Number(r.getTabIndex(m)),className:r.getMonthClassNames(m),"aria-disabled":r.isMonthDisabled(m),role:"option","aria-label":r.getAriaLabel(m),"aria-current":r.isCurrentMonth(l,m)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,m,c):void 0},r.getMonthContent(m))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,i=n.selected,o=[1,2,3,4];return zt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return zt.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(d){r.onQuarterClick(d,l)},onKeyDown:function(d){r.onQuarterKeyDown(d,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":i?r.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,i=n.selectsStart,o=n.selectsEnd,l=n.showMonthYearPicker,c=n.showQuarterYearPicker,d=n.showWeekPicker;return xn("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return zt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Qa(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),g6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return zt.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?zt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return zt.createElement(QS,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),b6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,i){return zt.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(n){return zt.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},zt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return zt.createElement(g6e,Wn({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,n)];return s&&i.unshift(r.renderDropdown(n)),i},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return _K(i,r.props.locale)}:function(i){return SI(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return zt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function y6e(e,t){for(var r=[],n=Zh(e),s=Zh(t);!Hm(n,s);)r.push(da(n)),n=Rd(n,1);return r}var j6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var i=c3(s),o=_u(n.props.date,s)&&Uo(n.props.date,s);return zt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":o?"true":void 0},o?zt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Qa(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:y6e(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=xn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return zt.createElement(QS,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),N6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Zh(r.props.minDate),s=Zh(r.props.maxDate),i=[];!Hm(n,s);){var o=c3(n);i.push(zt.createElement("option",{key:o,value:o},Qa(n,r.props.dateFormat,r.props.locale))),n=Rd(n,1)}return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return zt.createElement("select",{value:c3(Zh(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=Qa(r.props.date,r.props.dateFormat,r.props.locale);return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},zt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return zt.createElement(j6e,Wn({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=da(n);_u(r.props.date,s)&&Uo(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return zt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),w6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(n){var s,i;(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&u6e(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)},r.liClasses=function(n){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Qh(n)*3600+Jh(n)*60+Mm(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(n,s){var i,o;n.key===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(n.key===Sr.ArrowUp||n.key===Sr.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Sr.ArrowDown||n.key===Sr.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Sr.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,n)},r.renderTimes=function(){for(var n,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||da(),c=RN(l),d=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),u=60*d6e(l),h=u/o,m=0;m<h;m++){var p=i3(c,m*o);if(s.push(p),d){var v=c6e(c,p,m,o,d);s=s.concat(v)}}var g=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return zt.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===g&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===g?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},Qa(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?zt.createElement(zt.Fragment,null):zt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},zt.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return zt.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),zt.createElement("div",{className:"react-datepicker__time"},zt.createElement("div",{className:"react-datepicker__time-box"},zt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),j7=3,S6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=Mu([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Bc(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return CI(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=n.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(s,i){n.props.onDayClick&&n.props.onDayClick(s,i)},n.handleYearNavigation=function(s,i){var o,l,c,d,u=n.props,h=u.date,m=u.yearItemNumber;if(!(h===void 0||m===void 0)){var p=Em(h,m).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,i),s-p<0?n.updateFocusOnPaginate(m-(p-s)):s-p>=m?n.updateFocusOnPaginate(Math.abs(m-(s-p))):(d=(c=n.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},n.isSameDay=function(s,i){return Hn(s,i)},n.isCurrentYear=function(s){return s===Dn(da())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&_u(wu(da(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&_u(wu(da(),s),n.props.endDate)},n.isInRange=function(s){return fN(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var i=n.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!n.selectingDate()?!1:o&&u?fN(s,n.selectingDate(),u):l&&d||c&&d&&!u?fN(s,d,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.startDate,c=o.selectsStart,d=wu(da(),s);return c?_u(d,(i=n.selectingDate())!==null&&i!==void 0?i:null):_u(d,l??null)},n.isSelectingRangeEnd=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=wu(da(),s);return c||d?_u(u,(i=n.selectingDate())!==null&&i!==void 0?i:null):_u(u,l??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,d=i.includeDates,u=i.filterDate,h=Ob(wu(n.props.date,s)),m=(o||l||c||d||u)&&FN(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!Hn(h,Ob(n.props.selected))&&Hn(h,Ob(n.props.preSelection))&&!m}},n.isSelectedYear=function(s){var i=n.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(d){return s===Dn(d)}):!!l&&s===Dn(l)},n.onYearClick=function(s,i){var o=n.props.date;o!==void 0&&n.handleYearClick(Ob(wu(o,i)),s)},n.onYearKeyDown=function(s,i){var o,l,c=s.key,d=n.props,u=d.date,h=d.yearItemNumber,m=d.handleOnKeyDown;if(c!==Sr.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(c){case Sr.Enter:if(n.props.selected==null)break;n.onYearClick(s,i),(l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,n.props.selected);break;case Sr.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,Kh(n.props.preSelection,1));break;case Sr.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,Vv(n.props.preSelection,1));break;case Sr.ArrowUp:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var p=Em(u,h).startPeriod,v=j7,g=i-v;if(g<p){var b=h%v;i>=p&&i<p+b?v=b:v+=b,g=i-v}n.handleYearNavigation(g,Vv(n.props.preSelection,v));break}case Sr.ArrowDown:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var y=Em(u,h).endPeriod,v=j7,g=i+v;if(g>y){var b=h%v;i<=y&&i>y-b?v=b:v+=b,g=i+v}n.handleYearNavigation(g,Kh(n.props.preSelection,v));break}}m&&m(s)},n.getYearClassNames=function(s){var i=n.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=i.filterDate,m=i.yearClassName;return xn("react-datepicker__year-text","react-datepicker__year-".concat(s),o?m?.(wu(o,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||u||h)&&FN(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=Dn(n.props.preSelection),o=FN(s,n.props);return s===i&&!o?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=Em(i,o),u=d.startPeriod,h=d.endPeriod,m=function(g){n.push(zt.createElement("div",{ref:p.YEAR_REFS[g-u],onClick:function(b){r.onYearClick(b,g)},onKeyDown:function(b){TK(b)&&(b.preventDefault(),b.key=Sr.Enter),r.onYearKeyDown(b,g)},tabIndex:Number(p.getYearTabIndex(g)),className:p.getYearClassNames(g),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,g)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,g)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,g)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,g)}:void 0,key:g,"aria-current":p.isCurrentYear(g)?"date":void 0},p.getYearContent(g)))},p=this,v=u;v<=h;v++)m(v);return zt.createElement("div",{className:"react-datepicker__year"},zt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function C6e(e,t,r,n){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;r&&(l=Dn(r)<=o),n&&l&&(l=Dn(n)>=o),l&&s.push(o)}return s}var k6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var l=n.props.year,c=n.state.yearsList.map(function(h){return zt.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),"aria-selected":l===h?"true":void 0},l===h?zt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),d=n.props.minDate?Dn(n.props.minDate):null,u=n.props.maxDate?Dn(n.props.maxDate):null;return(!u||!n.state.yearsList.find(function(h){return h===u}))&&c.unshift(zt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},zt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!n.state.yearsList.find(function(h){return h===d}))&&c.push(zt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},zt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},n.onChange=function(l){n.props.onChange(l)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(l){var c=n.state.yearsList.map(function(d){return d+l});n.setState({yearsList:c})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return n.state={yearsList:C6e(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=xn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return zt.createElement(QS,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),_6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?Dn(r.props.minDate):1900,s=r.props.maxDate?Dn(r.props.maxDate):2100,i=[],o=n;o<=s;o++)i.push(zt.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return zt.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},zt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return zt.createElement(k6e,Wn({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return zt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),E6e=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],D6e=function(e){var t=(e.className||"").split(/\s+/);return E6e.some(function(r){return t.indexOf(r)>=0})},A6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var i,o;D6e(s.target)&&((o=(i=n.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},n.getDateInView=function(){var s=n.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=DK(n.props),d=AK(n.props),u=da(),h=l||o||i;return h||(c&&Ix(u,c)?c:d&&Hm(u,d)?d:u)},n.increaseMonth=function(){n.setState(function(s){var i=s.date;return{date:Rd(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var i=s.date;return{date:px(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,i,o){n.props.onSelect(s,i,o),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,i){n.setState({selectingDate:wu(da(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,i)},n.handleYearMouseLeave=function(s,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,i)},n.handleYearChange=function(s){var i,o,l,c;(o=(i=n.props).onYearChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Bc(s,n.props))return s;for(var i=Zh(s),o=QLe(s),l=rRe(o,i),c=null,d=0;d<=l;d++){var u=Od(i,d);if(!Bc(u,n.props)){c=u;break}}return c},n.handleMonthChange=function(s){var i,o,l,c=(i=n.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;n.handleCustomMonthChange(c),n.props.adjustDateOnChange&&(n.props.onSelect(c),(l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(c)},n.handleCustomMonthChange=function(s){var i,o;(o=(i=n.props).onMonthChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(i){var o=i.date;return{date:wu(o,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(i){var o=i.date;return{date:Rc(o,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(i){var o=i.date;return{date:wu(Rc(o,Co(s)),Dn(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var i=Rm(s,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(zt.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(i,l),d=n.formatWeekday(c,n.props.locale),u=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return zt.createElement("div",{key:l,"aria-label":Qa(c,"EEEE",n.props.locale),className:xn("react-datepicker__day-name",u)},d)}))},n.formatWeekday=function(s,i){return n.props.formatWeekDay?JLe(s,n.props.formatWeekDay,i):n.props.useWeekdaysShort?e6e(s,i):ZLe(s,i)},n.decreaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:Vv(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,i,o;if(!n.props.renderCustomHeader){var l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,u=px(n.state.date,d),h;switch(!0){case n.props.showMonthYearPicker:h=f7(n.state.date,n.props);break;case n.props.showYearPicker:h=s6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=n6e(n.state.date,n.props);break;default:h=u7(u,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(v=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,C=y===void 0?t.defaultProps.previousMonthButtonLabel:y,N=b.previousYearButtonLabel,k=N===void 0?t.defaultProps.previousYearButtonLabel:N,S=n.props,D=S.previousMonthAriaLabel,E=D===void 0?typeof C=="string"?C:"Previous Month":D,T=S.previousYearAriaLabel,A=T===void 0?typeof k=="string"?k:"Previous Year":T;return zt.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:n.props.handleOnKeyDown,"aria-label":g?A:E},zt.createElement("span",{className:m.join(" ")},g?k:C))}}},n.increaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:Kh(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=m7(n.state.date,n.props);break;case n.props.showYearPicker:i=i6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=a6e(n.state.date,n.props);break;default:i=h7(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(c=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,u=n.props,h=u.nextMonthButtonLabel,m=h===void 0?t.defaultProps.nextMonthButtonLabel:h,p=u.nextYearButtonLabel,v=p===void 0?t.defaultProps.nextYearButtonLabel:p,g=n.props,b=g.nextMonthAriaLabel,y=b===void 0?typeof m=="string"?m:"Next Month":b,C=g.nextYearAriaLabel,N=C===void 0?typeof v=="string"?v:"Next Year":C;return zt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:n.props.handleOnKeyDown,"aria-label":d?N:y},zt.createElement("span",{className:l.join(" ")},d?v:m))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),zt.createElement("h2",{className:i.join(" ")},Qa(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return zt.createElement(_6e,Wn({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Dn(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return zt.createElement(b6e,Wn({},t.defaultProps,n.props,{month:Co(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return zt.createElement(N6e,Wn({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(i7(),s),n.props.setPreSelection&&n.props.setPreSelection(i7())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return zt.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return zt.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),zt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(o!==0),n.renderMonthYearDropdown(o!==0),n.renderYearDropdown(o!==0)),zt.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var d=u7(n.state.date,n.props),u=h7(n.state.date,n.props),h=f7(n.state.date,n.props),m=m7(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return zt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(o=(i=n.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Wn(Wn({},n.state),{customHeaderCount:c,monthDate:l,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:h,nextYearButtonDisabled:m})),p&&zt.createElement("div",{className:"react-datepicker__day-names"},n.header(l)))},n.renderYearHeader=function(s){var i=s.monthDate,o=n.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Em(i,d),h=u.startPeriod,m=u.endPeriod;return zt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(m):Dn(i))},n.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(c);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(c);default:return n.renderDefaultHeader(c)}},n.renderMonths=function(){var s,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var o=[],l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Kh(n.state.date,c):px(n.state.date,c),u=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var m=h-u+c,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Kh(d,m):Rd(d,m),v="month-".concat(h),g=h<l-1,b=h>0;o.push(zt.createElement("div",{key:v,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:h}),zt.createElement(v6e,Wn({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:b}))))}return o}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return zt.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),zt.createElement(S6e,Wn({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return zt.createElement(w6e,Wn({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,i=s&&JS(s)&&!!n.props.selected,o=i?"".concat(x7(s.getHours()),":").concat(x7(s.getMinutes())):"";if(n.props.showTimeInput)return zt.createElement(h6e,Wn({},t.defaultProps,n.props,{date:s,timeString:o,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,i=Em(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return n.props.showYearPicker?c="".concat(o," - ").concat(l):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?c=Dn(n.state.date):c="".concat(SI(Co(n.state.date),n.props.locale)," ").concat(Dn(n.state.date)),zt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&c)},n.renderChildren=function(){if(n.props.children)return zt.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:N1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!Hn(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Uo(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Hn(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||zLe;return zt.createElement(QS,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},zt.createElement("div",{style:{display:"contents"},ref:this.containerRef},zt.createElement(r,{className:xn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),T6e=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return zt.createElement("i",{className:"".concat(i," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(zt.isValidElement(t)){var o=t;return zt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(n),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return zt.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},zt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},IK=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return LJ.createPortal(this.props.children,this.el)},t}(w.Component),I6e="[tabindex], a, button, input, select, textarea",P6e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},PK=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(I6e),1,-1).filter(P6e)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?zt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},zt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,zt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function O6e(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=w.useRef(null),o=VLe(Wn({open:!s,whileElementsMounted:yW,placement:r.popperPlacement,middleware:Mu([ALe({padding:15}),DLe(10),TLe({element:i})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),l=Wn(Wn({},r),{hidePopper:s,popperProps:Wn(Wn({},o),{arrowRef:i})});return zt.createElement(e,Wn({},l))};return t}var M6e=function(e){Pi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,m=r.portalHost,p=r.popperProps,v=r.showArrow,g=void 0;if(!o){var b=xn("react-datepicker-popper",n);g=zt.createElement(PK,{enableTabLoop:d},zt.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:u},l,v&&zt.createElement(RLe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=w.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=zt.createElement(IK,{portalId:h,portalHost:m},g));var y=xn("react-datepicker-wrapper",s);return zt.createElement(zt.Fragment,null,zt.createElement("div",{ref:p.refs.setReference,className:y},c),g)},t}(w.Component),R6e=O6e(M6e),N7="react-datepicker-ignore-onclickoutside";function F6e(e,t){return e&&t?Co(e)!==Co(t)||Dn(e)!==Dn(t):e!==t}var r5="Date input not valid.",w7=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:da()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return JS(l)?Mu(Mu([],i,!0),[Wn(Wn({},o),{date:l})],!1):i},[])},n.calcInitialState=function(){var s,i=n.getPreSelection(),o=DK(n.props),l=AK(n.props),c=o&&Ix(i,RN(o))?o:l&&Hm(i,o7(l))?l:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:c,highlightDates:p7(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Wn(Wn({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Wn(Wn({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},n.setBlur=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,i){i===void 0&&(i=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:n5},function(){s||n.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Xh(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var i,o,l=n.state.wasHidden,c=l?n.state.open:!0;l&&n.resetHiddenStatus(),n.state.preventFocus||((o=(i=n.props).onFocus)===null||o===void 0||o.call(i,s),c&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var i,o;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((o=(i=n.props).onBlur)===null||o===void 0||o.call(i,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var i,o;n.props.inline||n.setOpen(!1),(o=(i=n.props).onClickOutside)===null||o===void 0||o.call(i,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,i,o,l,c,d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];var h=d[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,d),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:L6e});var m=n.props,p=m.selectsRange,v=m.startDate,g=m.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=n.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,C=h?.target instanceof HTMLInputElement?h.target.value:"";if(p){var N=C.split(b.includes("-")?kK:"-",2).map(function(P){return P.trim()}),k=N[0],S=N[1],D=ZE(k??"",b,n.props.locale,y),E=ZE(S??"",b,n.props.locale,y),T=v?.getTime()!==D?.getTime(),A=g?.getTime()!==E?.getTime();if(!T&&!A||D&&Bc(D,n.props)||E&&Bc(E,n.props))return;(l=(o=n.props).onChange)===null||l===void 0||l.call(o,[D,E],h)}else{var L=ZE(C,b,n.props.locale,y,(c=n.props.selected)!==null&&c!==void 0?c:void 0);(L||!C)&&n.setSelected(L,h,!0)}}},n.handleSelect=function(s,i,o){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(s,i,!1,o),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var l=n.props,c=l.startDate,d=l.endDate;c&&!d&&(n.props.swapRange||!b7(s,c))&&n.setOpen(!1)}}},n.setSelected=function(s,i,o,l){var c,d,u=s;if(n.props.showYearPicker){if(u!==null&&FN(Dn(u),n.props))return}else if(n.props.showMonthYearPicker){if(u!==null&&EK(u,n.props))return}else if(u!==null&&Bc(u,n.props))return;var h=n.props,m=h.onChange,p=h.selectsRange,v=h.startDate,g=h.endDate,b=h.selectsMultiple,y=h.selectedDates,C=h.minTime,N=h.swapRange;if(!tx(n.props.selected,u)||n.props.allowSameDay||p||b)if(u!==null&&(n.props.selected&&(!o||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(u=e5(u,{hour:Qh(n.props.selected),minute:Jh(n.props.selected),second:Mm(n.props.selected)})),!o&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&C&&(u=e5(u,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),n.props.inline||n.setState({preSelection:u}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:l})),p){var k=!v&&!g,S=v&&!g,D=v&&g;k?m?.([u,null],i):S&&(u===null?m?.([null,null],i):b7(u,v)?m?.(N?[u,v]:[u,null],i):m?.([v,u],i)),D&&m?.([u,null],i)}else if(b){if(u!==null)if(!y?.length)m?.([u],i);else{var E=y.some(function(A){return Hn(A,u)});if(E){var T=y.filter(function(A){return!Hn(A,u)});m?.(T,i)}else m?.(Mu(Mu([],y,!0),[u],!1),i)}}else m?.(u,i);o||((d=(c=n.props).onSelect)===null||d===void 0||d.call(c,u,i),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var i=Xh(n.props.minDate),o=Xh(n.props.maxDate),l=!0;if(s){var c=RN(s);if(i&&o)l=Mb(s,n.props.minDate,n.props.maxDate);else if(i){var d=RN(n.props.minDate);l=Hm(s,d)||tx(c,d)}else if(o){var u=o7(n.props.maxDate);l=Ix(s,u)||tx(c,u)}}l&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var i,o;if(!(n.props.selectsRange||n.props.selectsMultiple)){var l=n.props.selected?n.props.selected:n.getPreSelection(),c=n.props.selected?s:e5(l,{hour:Qh(s),minute:Jh(s)});n.setState({preSelection:c}),(o=(i=n.props).onChange)===null||o===void 0||o.call(i,c),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(s=n.props).onInputClick)===null||i===void 0||i.call(s)},n.onInputKeyDown=function(s){var i,o,l,c,d,u;(o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Sr.ArrowDown||h===Sr.ArrowUp||h===Sr.Enter)&&((l=n.onInputClick)===null||l===void 0||l.call(n));return}if(n.state.open){if(h===Sr.ArrowDown||h===Sr.ArrowUp){s.preventDefault();var m=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=n.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(m);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=da(n.state.preSelection);h===Sr.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===n5?(n.handleSelect(v,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(v)):n.setOpen(!1)):h===Sr.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Sr.Tab&&n.setOpen(!1),n.inputOk()||(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:r5})}},n.onPortalKeyDown=function(s){var i=s.key;i===Sr.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var i,o,l,c,d,u,h=n.props,m=h.minDate,p=h.maxDate,v=h.disabledKeyboardNavigation,g=h.showWeekPicker,b=h.shouldCloseOnSelect,y=h.locale,C=h.calendarStartDay,N=h.adjustDateOnChange,k=h.inline;if((o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var S=s.key,D=s.shiftKey,E=da(n.state.preSelection),T=function(re,U){var Q=U;switch(re){case Sr.ArrowRight:Q=g?g2(U,1):Od(U,1);break;case Sr.ArrowLeft:Q=g?t7(U):rLe(U);break;case Sr.ArrowUp:Q=t7(U);break;case Sr.ArrowDown:Q=g2(U,1);break;case Sr.PageUp:Q=D?Vv(U,1):px(U,1);break;case Sr.PageDown:Q=D?Kh(U,1):Rd(U,1);break;case Sr.Home:Q=Rm(U,y,C);break;case Sr.End:Q=XLe(U);break}return Q},A=function(re,U){for(var Q=40,B=re,te=!1,X=0,ce=T(re,U);!te;){if(X>=Q){ce=U;break}m&&ce<m&&(B=Sr.ArrowRight,ce=Bc(m,n.props)?T(B,ce):m),p&&ce>p&&(B=Sr.ArrowLeft,ce=Bc(p,n.props)?T(B,ce):p),Bc(ce,n.props)?((B===Sr.PageUp||B===Sr.Home)&&(B=Sr.ArrowRight),(B===Sr.PageDown||B===Sr.End)&&(B=Sr.ArrowLeft),ce=T(B,ce)):te=!0,X++}return ce};if(S===Sr.Enter){s.preventDefault(),n.handleSelect(E,s),!b&&n.setPreSelection(E);return}else if(S===Sr.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(c=(l=n.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:r5});return}var L=null;switch(S){case Sr.ArrowLeft:case Sr.ArrowRight:case Sr.ArrowUp:case Sr.ArrowDown:case Sr.PageUp:case Sr.PageDown:case Sr.Home:case Sr.End:L=A(S,E);break}if(!L){(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:r5});return}if(s.preventDefault(),n.setState({lastPreSelectChange:n5}),N&&n.setSelected(L),n.setPreSelection(L),k){var P=Co(E),O=Co(L),J=Dn(E),W=Dn(L);P!==O||J!==W?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var i=s.key;i===Sr.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var i=n.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,i;return!n.props.inline&&!n.isCalendarOpen()?null:zt.createElement(A6e,Wn({showMonthYearDropdown:void 0,ref:function(o){n.calendar=o}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:l6e(n.modifyHolidays()),outsideClickIgnoreClass:N7,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=n.props.showTimeInput||n.props.showTimeSelect,d=c?"PPPPp":"PPPP",u;return n.props.selectsRange?u="Selected start date: ".concat(Mc(n.props.startDate,{dateFormat:d,locale:l}),". ").concat(n.props.endDate?"End date: "+Mc(n.props.endDate,{dateFormat:d,locale:l}):""):n.props.showTimeSelectOnly?u="Selected time: ".concat(Mc(n.props.selected,{dateFormat:o,locale:l})):n.props.showYearPicker?u="Selected year: ".concat(Mc(n.props.selected,{dateFormat:"yyyy",locale:l})):n.props.showMonthYearPicker?u="Selected month: ".concat(Mc(n.props.selected,{dateFormat:"MMMM yyyy",locale:l})):n.props.showQuarterYearPicker?u="Selected quarter: ".concat(Mc(n.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):u="Selected date: ".concat(Mc(n.props.selected,{dateFormat:d,locale:l})),zt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},n.renderDateInput=function(){var s,i,o,l=xn(n.props.className,(s={},s[N7]=n.state.open,s)),c=n.props.customInput||zt.createElement("input",{type:"text"}),d=n.props.customInputRef||"ref",u=n.props,h=u.dateFormat,m=h===void 0?t.defaultProps.dateFormat:h,p=u.locale,v=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?WLe(n.props.startDate,n.props.endDate,{dateFormat:m,locale:p}):n.props.selectsMultiple?GLe((o=n.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:m,locale:p}):Mc(n.props.selected,{dateFormat:m,locale:p});return w.cloneElement(c,(i={},i[d]=function(g){n.input=g},i.value=v,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=xn(c.props.className,l),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var s=n.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,h=s.clearButtonClassName,m=h===void 0?"":h,p=s.ariaLabelClose,v=p===void 0?"Close":p,g=s.selectedDates,b=s.readOnly;return i&&!b&&(l!=null||c!=null||d!=null||g?.length)?zt.createElement("button",{type:"button",className:xn("react-datepicker__close-icon",m,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:n.onClearClick,title:u,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:N1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,i,o,l;r.inline&&F6e(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:p7(this.props.highlightDates)}),!n.focused&&!tx(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),n.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),zt.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&zt.createElement(T6e,Wn({icon:s,className:xn(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?zt.createElement(PK,{enableTabLoop:this.props.enableTabLoop},zt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=zt.createElement(IK,Wn({portalId:this.props.portalId},this.props),n)),zt.createElement("div",null,this.renderInputContainer(),n)}return zt.createElement(R6e,Wn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),L6e="input",n5="navigate";const B6e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(1),[o]=w.useState(5),[l,c]=w.useState(!0),[d,u]=w.useState(0),[h,m]=w.useState(""),[p,v]=w.useState(""),[g,b]=w.useState(null),[y,C]=w.useState(null);w.useEffect(()=>{N()},[]),w.useEffect(()=>{S()},[e,p,g,y,s,h]);const N=()=>{c(!0),Oe.get("/api/leave/all").then(A=>{const L=A.data.sort((P,O)=>new Date(O.createdAt)-new Date(P.createdAt));console.log("Sorted Data:",L),t(L),c(!1)}).catch(A=>{console.error("Error fetching leave requests:",A),c(!1)})},k=(A,L)=>{Oe.put(`/api/leave/${A}`,{status:L}).then(()=>{N()}).catch(P=>{console.error("Error updating leave status:",P)})},S=()=>{let A=[...e];if(p&&(A=A.filter(W=>W.status===p)),g&&y&&(A=A.filter(W=>{const re=new Date(W.requestedDate),U=new Date(re.getFullYear(),re.getMonth(),re.getDate()),Q=new Date(g.getFullYear(),g.getMonth(),g.getDate()),B=new Date(y.getFullYear(),y.getMonth(),y.getDate());return U>=Q&&U<=B})),h.trim()!==""){const W=h.toLowerCase();A=A.filter(re=>re.employeeId&&re.employeeId.toLowerCase().includes(W)||(re.name||re.employeeName)&&(re.name||re.employeeName).toLowerCase().includes(W)||re.leaveType&&re.leaveType.toLowerCase().includes(W)||re.reason&&re.reason.toLowerCase().includes(W))}const L=Math.ceil(A.length/o);u(L);const P=s*o,O=P-o,J=A.slice(O,P);n(J)},D=()=>{v(""),b(null),C(null),i(1),m("")},E=A=>{i(A)},T=A=>{if(!A)return"-";try{return new Date(A).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(" ","/")}catch{return"-"}};return a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{children:"Leave Request Management"})})})})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gx-3",children:[a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",value:p,onChange:A=>v(A.target.value),children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by employee ID, name, leave type, or reason...",value:h,onChange:A=>m(A.target.value)})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Request Date Range"}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx(w7,{selected:g,onChange:A=>b(A),selectsStart:!0,startDate:g,endDate:y,placeholderText:"dd/mm/yyyy",className:"form-control me-2",dateFormat:"dd/MM/yyyy"}),a.jsx(w7,{selected:y,onChange:A=>C(A),selectsEnd:!0,startDate:g,endDate:y,minDate:g,placeholderText:"dd/mm/yyyy",className:"form-control",dateFormat:"dd/MM/yyyy"})]})]}),a.jsxs("div",{className:"col-5 d-flex justify-content-end mt-3",children:[a.jsx("button",{className:"btn btn-primary me-2",onClick:S,style:{width:"120px",height:"38px"},children:"Apply Filters"}),a.jsx("button",{className:"btn btn-secondary",onClick:D,style:{width:"120px",height:"38px"},children:"Reset Filters"})]})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive",children:[l?a.jsx("div",{className:"text-center p-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Leave Type"}),a.jsx("th",{children:"Requested Date"}),a.jsx("th",{children:"From Date"}),a.jsx("th",{children:"To Date"}),a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.length>0?r.map(A=>a.jsxs("tr",{children:[a.jsx("td",{style:{textWrap:"wrap"},children:A.employeeId}),a.jsx("td",{style:{textWrap:"wrap"},children:A.name||A.employeeName}),a.jsx("td",{children:A.leaveType}),a.jsx("td",{children:A.requestedDate?T(A.requestedDate):"-"}),a.jsx("td",{children:T(A.fromDate)}),a.jsx("td",{children:T(A.toDate)}),a.jsx("td",{children:a.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:A.reason})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.status==="Approved"?"bg-success":A.status==="Rejected"?"bg-danger":A.status==="Hold"?"bg-info":"bg-warning"}`,children:A.status})}),a.jsx("td",{children:a.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:A.status,onChange:L=>k(A._id,L.target.value),disabled:A.status==="Approved"||A.status==="Rejected",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})})]},A._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No leave requests found."})})})]}),d>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s-1),disabled:s===1,children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),a.jsx("li",{className:`page-item ${s===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(1),children:"1"})}),s>3&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),Array.from({length:d},(A,L)=>{const P=L+1;return P>1&&P<d&&Math.abs(P-s)<=1?a.jsx("li",{className:`page-item ${s===P?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(P),children:P})},P):null}),s<d-2&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),d>1&&a.jsx("li",{className:`page-item ${s===d?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(d),children:d})}),a.jsx("li",{className:`page-item ${s===d?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s+1),disabled:s===d,children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]})})})]})})},U6e="modulepreload",$6e=function(e){return"/"+e},S7={},u3=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=$6e(d),d in S7)return;S7[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":U6e,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var ko=Uint8Array,Ql=Uint16Array,kI=Int32Array,ZS=new ko([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eC=new ko([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h3=new ko([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OK=function(e,t){for(var r=new Ql(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new kI(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},MK=OK(ZS,2),RK=MK.b,f3=MK.r;RK[28]=258,f3[258]=28;var FK=OK(eC,0),q6e=FK.b,C7=FK.r,m3=new Ql(32768);for(var $a=0;$a<32768;++$a){var ym=($a&43690)>>1|($a&21845)<<1;ym=(ym&52428)>>2|(ym&13107)<<2,ym=(ym&61680)>>4|(ym&3855)<<4,m3[$a]=((ym&65280)>>8|(ym&255)<<8)>>1}var Vu=function(e,t,r){for(var n=e.length,s=0,i=new Ql(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new Ql(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new Ql(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[m3[h]>>c]=d}else for(l=new Ql(n),s=0;s<n;++s)e[s]&&(l[s]=m3[o[e[s]-1]++]>>15-e[s]);return l},Wm=new ko(288);for(var $a=0;$a<144;++$a)Wm[$a]=8;for(var $a=144;$a<256;++$a)Wm[$a]=9;for(var $a=256;$a<280;++$a)Wm[$a]=7;for(var $a=280;$a<288;++$a)Wm[$a]=8;var My=new ko(32);for(var $a=0;$a<32;++$a)My[$a]=5;var V6e=Vu(Wm,9,0),z6e=Vu(Wm,9,1),H6e=Vu(My,5,0),W6e=Vu(My,5,1),a5=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Nd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},s5=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_I=function(e){return(e+7)/8|0},LK=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ko(e.subarray(t,r))},G6e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Sd=function(e,t,r){var n=new Error(t||G6e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Sd),!r)throw n;return n},Y6e=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new ko(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new ko(s*3));var d=function(de){var Y=r.length;if(de>Y){var oe=new ko(Math.max(Y*2,de));oe.set(r),r=oe}},u=t.f||0,h=t.p||0,m=t.b||0,p=t.l,v=t.d,g=t.m,b=t.n,y=s*8;do{if(!p){u=Nd(e,h,1);var C=Nd(e,h+1,3);if(h+=3,C)if(C==1)p=z6e,v=W6e,g=9,b=5;else if(C==2){var D=Nd(e,h,31)+257,E=Nd(e,h+10,15)+4,T=D+Nd(e,h+5,31)+1;h+=14;for(var A=new ko(T),L=new ko(19),P=0;P<E;++P)L[h3[P]]=Nd(e,h+P*3,7);h+=E*3;for(var O=a5(L),J=(1<<O)-1,W=Vu(L,O,1),P=0;P<T;){var re=W[Nd(e,h,J)];h+=re&15;var N=re>>4;if(N<16)A[P++]=N;else{var U=0,Q=0;for(N==16?(Q=3+Nd(e,h,3),h+=2,U=A[P-1]):N==17?(Q=3+Nd(e,h,7),h+=3):N==18&&(Q=11+Nd(e,h,127),h+=7);Q--;)A[P++]=U}}var B=A.subarray(0,D),te=A.subarray(D);g=a5(B),b=a5(te),p=Vu(B,g,1),v=Vu(te,b,1)}else Sd(1);else{var N=_I(h)+4,k=e[N-4]|e[N-3]<<8,S=N+k;if(S>s){c&&Sd(0);break}l&&d(m+k),r.set(e.subarray(N,S),m),t.b=m+=k,t.p=h=S*8,t.f=u;continue}if(h>y){c&&Sd(0);break}}l&&d(m+131072);for(var X=(1<<g)-1,ce=(1<<b)-1,M=h;;M=h){var U=p[s5(e,h)&X],q=U>>4;if(h+=U&15,h>y){c&&Sd(0);break}if(U||Sd(2),q<256)r[m++]=q;else if(q==256){M=h,p=null;break}else{var z=q-254;if(q>264){var P=q-257,K=ZS[P];z=Nd(e,h,(1<<K)-1)+RK[P],h+=K}var ee=v[s5(e,h)&ce],ne=ee>>4;ee||Sd(3),h+=ee&15;var te=q6e[ne];if(ne>3){var K=eC[ne];te+=s5(e,h)&(1<<K)-1,h+=K}if(h>y){c&&Sd(0);break}l&&d(m+131072);var ae=m+z;if(m<te){var ie=i-te,G=Math.min(te,ae);for(ie+m<0&&Sd(3);m<G;++m)r[m]=n[ie+m]}for(;m<ae;++m)r[m]=r[m-te]}}t.l=p,t.p=M,t.b=m,t.f=u,p&&(u=1,t.m=g,t.d=v,t.n=b)}while(!u);return m!=r.length&&o?LK(r,0,m):r.subarray(0,m)},Oh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},kb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},i5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:UK,l:0};if(s==1){var o=new ko(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,D){return S.f-D.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new Ql(m+1),v=p3(r[u-1],p,0);if(v>t){var n=0,g=0,b=v-t,y=1<<b;for(i.sort(function(D,E){return p[E.s]-p[D.s]||D.f-E.f});n<s;++n){var C=i[n].s;if(p[C]>t)g+=y-(1<<v-p[C]),p[C]=t;else break}for(g>>=b;g>0;){var N=i[n].s;p[N]<t?g-=1<<t-p[N]++-1:++n}for(;n>=0&&g;--n){var k=i[n].s;p[k]==t&&(--p[k],++g)}v=t}return{t:new ko(p),l:v}},p3=function(e,t,r){return e.s==-1?Math.max(p3(e.l,t,r+1),p3(e.r,t,r+1)):t[e.s]=r},k7=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ql(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},_b=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},BK=function(e,t,r){var n=r.length,s=_I(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},_7=function(e,t,r,n,s,i,o,l,c,d,u){Oh(t,u++,r),++s[256];for(var h=i5(s,15),m=h.t,p=h.l,v=i5(i,15),g=v.t,b=v.l,y=k7(m),C=y.c,N=y.n,k=k7(g),S=k.c,D=k.n,E=new Ql(19),T=0;T<C.length;++T)++E[C[T]&31];for(var T=0;T<S.length;++T)++E[S[T]&31];for(var A=i5(E,7),L=A.t,P=A.l,O=19;O>4&&!L[h3[O-1]];--O);var J=d+5<<3,W=_b(s,Wm)+_b(i,My)+o,re=_b(s,m)+_b(i,g)+o+14+3*O+_b(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&J<=W&&J<=re)return BK(t,u,e.subarray(c,c+d));var U,Q,B,te;if(Oh(t,u,1+(re<W)),u+=2,re<W){U=Vu(m,p,0),Q=m,B=Vu(g,b,0),te=g;var X=Vu(L,P,0);Oh(t,u,N-257),Oh(t,u+5,D-1),Oh(t,u+10,O-4),u+=14;for(var T=0;T<O;++T)Oh(t,u+3*T,L[h3[T]]);u+=3*O;for(var ce=[C,S],M=0;M<2;++M)for(var q=ce[M],T=0;T<q.length;++T){var z=q[T]&31;Oh(t,u,X[z]),u+=L[z],z>15&&(Oh(t,u,q[T]>>5&127),u+=q[T]>>12)}}else U=V6e,Q=Wm,B=H6e,te=My;for(var T=0;T<l;++T){var K=n[T];if(K>255){var z=K>>18&31;kb(t,u,U[z+257]),u+=Q[z+257],z>7&&(Oh(t,u,K>>23&31),u+=ZS[z]);var ee=K&31;kb(t,u,B[ee]),u+=te[ee],ee>3&&(kb(t,u,K>>5&8191),u+=eC[ee])}else kb(t,u,U[K]),u+=Q[K]}return kb(t,u,U[256]),u+Q[256]},K6e=new kI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UK=new ko(0),X6e=function(e,t,r,n,s,i){var o=i.z||e.length,l=new ko(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=K6e[t-1],m=h>>13,p=h&8191,v=(1<<r)-1,g=i.p||new Ql(32768),b=i.h||new Ql(v+1),y=Math.ceil(r/3),C=2*y,N=function(Se){return(e[Se]^e[Se+1]<<y^e[Se+2]<<C)&v},k=new kI(25e3),S=new Ql(288),D=new Ql(32),E=0,T=0,A=i.i||0,L=0,P=i.w||0,O=0;A+2<o;++A){var J=N(A),W=A&32767,re=b[J];if(g[W]=re,b[J]=W,P<=A){var U=o-A;if((E>7e3||L>24576)&&(U>423||!d)){u=_7(e,c,0,k,S,D,T,L,O,A-O,u),L=E=T=0,O=A;for(var Q=0;Q<286;++Q)S[Q]=0;for(var Q=0;Q<30;++Q)D[Q]=0}var B=2,te=0,X=p,ce=W-re&32767;if(U>2&&J==N(A-ce))for(var M=Math.min(m,U)-1,q=Math.min(32767,A),z=Math.min(258,U);ce<=q&&--X&&W!=re;){if(e[A+B]==e[A+B-ce]){for(var K=0;K<z&&e[A+K]==e[A+K-ce];++K);if(K>B){if(B=K,te=ce,K>M)break;for(var ee=Math.min(ce,K-2),ne=0,Q=0;Q<ee;++Q){var ae=A-ce+Q&32767,ie=g[ae],G=ae-ie&32767;G>ne&&(ne=G,re=ae)}}}W=re,re=g[W],ce+=W-re&32767}if(te){k[L++]=268435456|f3[B]<<18|C7[te];var de=f3[B]&31,Y=C7[te]&31;T+=ZS[de]+eC[Y],++S[257+de],++D[Y],P=A+B,++E}else k[L++]=e[A],++S[e[A]]}}for(A=Math.max(A,P);A<o;++A)k[L++]=e[A],++S[e[A]];u=_7(e,c,d,k,S,D,T,L,O,A-O,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=A,i.w=P)}else{for(var A=i.w||0;A<o+d;A+=65535){var oe=A+65535;oe>=o&&(c[u/8|0]=d,oe=o),u=BK(c,u+1,e.subarray(A,oe))}i.i=o}return LK(l,0,n+_I(u)+s)},$K=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Q6e=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ko(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return X6e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},qK=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},J6e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=$K();s.p(t.dictionary),qK(e,2,s.d())}},Z6e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Sd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Sd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function x3(e,t){t||(t={});var r=$K();r.p(e);var n=Q6e(e,t,t.dictionary?6:2,4);return J6e(n,t),qK(n,n.length-4,r.d()),n}function e8e(e,t){return Y6e(e.subarray(Z6e(e),-4),{i:2},t,t)}var t8e=typeof TextDecoder<"u"&&new TextDecoder,r8e=0;try{t8e.decode(UK,{stream:!0}),r8e=1}catch{}var nn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function o5(){nn.console&&typeof nn.console.log=="function"&&nn.console.log.apply(nn.console,arguments)}var Ea={log:o5,warn:function(e){nn.console&&(typeof nn.console.warn=="function"?nn.console.warn.apply(nn.console,arguments):o5.call(null,arguments))},error:function(e){nn.console&&(typeof nn.console.error=="function"?nn.console.error.apply(nn.console,arguments):o5(e))}};function l5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Bp(n.response,t,r)},n.onerror=function(){Ea.error("could not download file")},n.send()}function E7(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function xN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kb,v3,Bp=nn.saveAs||((typeof window>"u"?"undefined":$n(window))!=="object"||window!==nn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=nn.URL||nn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?E7(s.href)?l5(e,t,r):xN(s,s.target="_blank"):xN(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){xN(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(E7(e))l5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){xN(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:$n(i)!=="object"&&(Ea.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return l5(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(nn.HTMLElement)||nn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":$n(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=nn.URL||nn.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function VK(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c5(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=lo(r,n,s,i,t[0],7,-680876936),i=lo(i,r,n,s,t[1],12,-389564586),s=lo(s,i,r,n,t[2],17,606105819),n=lo(n,s,i,r,t[3],22,-1044525330),r=lo(r,n,s,i,t[4],7,-176418897),i=lo(i,r,n,s,t[5],12,1200080426),s=lo(s,i,r,n,t[6],17,-1473231341),n=lo(n,s,i,r,t[7],22,-45705983),r=lo(r,n,s,i,t[8],7,1770035416),i=lo(i,r,n,s,t[9],12,-1958414417),s=lo(s,i,r,n,t[10],17,-42063),n=lo(n,s,i,r,t[11],22,-1990404162),r=lo(r,n,s,i,t[12],7,1804603682),i=lo(i,r,n,s,t[13],12,-40341101),s=lo(s,i,r,n,t[14],17,-1502002290),r=co(r,n=lo(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=co(i,r,n,s,t[6],9,-1069501632),s=co(s,i,r,n,t[11],14,643717713),n=co(n,s,i,r,t[0],20,-373897302),r=co(r,n,s,i,t[5],5,-701558691),i=co(i,r,n,s,t[10],9,38016083),s=co(s,i,r,n,t[15],14,-660478335),n=co(n,s,i,r,t[4],20,-405537848),r=co(r,n,s,i,t[9],5,568446438),i=co(i,r,n,s,t[14],9,-1019803690),s=co(s,i,r,n,t[3],14,-187363961),n=co(n,s,i,r,t[8],20,1163531501),r=co(r,n,s,i,t[13],5,-1444681467),i=co(i,r,n,s,t[2],9,-51403784),s=co(s,i,r,n,t[7],14,1735328473),r=uo(r,n=co(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=uo(i,r,n,s,t[8],11,-2022574463),s=uo(s,i,r,n,t[11],16,1839030562),n=uo(n,s,i,r,t[14],23,-35309556),r=uo(r,n,s,i,t[1],4,-1530992060),i=uo(i,r,n,s,t[4],11,1272893353),s=uo(s,i,r,n,t[7],16,-155497632),n=uo(n,s,i,r,t[10],23,-1094730640),r=uo(r,n,s,i,t[13],4,681279174),i=uo(i,r,n,s,t[0],11,-358537222),s=uo(s,i,r,n,t[3],16,-722521979),n=uo(n,s,i,r,t[6],23,76029189),r=uo(r,n,s,i,t[9],4,-640364487),i=uo(i,r,n,s,t[12],11,-421815835),s=uo(s,i,r,n,t[15],16,530742520),r=ho(r,n=uo(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=ho(i,r,n,s,t[7],10,1126891415),s=ho(s,i,r,n,t[14],15,-1416354905),n=ho(n,s,i,r,t[5],21,-57434055),r=ho(r,n,s,i,t[12],6,1700485571),i=ho(i,r,n,s,t[3],10,-1894986606),s=ho(s,i,r,n,t[10],15,-1051523),n=ho(n,s,i,r,t[1],21,-2054922799),r=ho(r,n,s,i,t[8],6,1873313359),i=ho(i,r,n,s,t[15],10,-30611744),s=ho(s,i,r,n,t[6],15,-1560198380),n=ho(n,s,i,r,t[13],21,1309151649),r=ho(r,n,s,i,t[4],6,-145523070),i=ho(i,r,n,s,t[11],10,-1120210379),s=ho(s,i,r,n,t[2],15,718787259),n=ho(n,s,i,r,t[9],21,-343485551),e[0]=Dm(r,e[0]),e[1]=Dm(n,e[1]),e[2]=Dm(s,e[2]),e[3]=Dm(i,e[3])}function tC(e,t,r,n,s,i){return t=Dm(Dm(t,e),Dm(n,i)),Dm(t<<s|t>>>32-s,r)}function lo(e,t,r,n,s,i,o){return tC(t&r|~t&n,e,t,s,i,o)}function co(e,t,r,n,s,i,o){return tC(t&n|r&~n,e,t,s,i,o)}function uo(e,t,r,n,s,i,o){return tC(t^r^n,e,t,s,i,o)}function ho(e,t,r,n,s,i,o){return tC(r^(t|~n),e,t,s,i,o)}function zK(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)c5(n,n8e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(c5(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,c5(n,s),n}function n8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Kb=nn.atob.bind(nn),v3=nn.btoa.bind(nn);var D7="0123456789abcdef".split("");function a8e(e){for(var t="",r=0;r<4;r++)t+=D7[e>>8*r+4&15]+D7[e>>8*r&15];return t}function s8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function g3(e){return zK(e).map(s8e).join("")}var i8e=function(e){for(var t=0;t<e.length;t++)e[t]=a8e(e[t]);return e.join("")}(zK("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dm(e,t){if(i8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b3(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,m=0,p=0,v="";for(c=0;c<h;c++)p=(p+(u=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=u,o=l[(l[m]+l[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var A7={print:4,modify:8,copy:16,"annot-forms":32};function Y0(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(A7.perm!==void 0)throw new Error("Invalid permission: "+l);s+=A7[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=g3(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=b3(this.encryptionKey,this.padding)}function K0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function T7(e){if($n(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){nn.console&&Ea.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _2(e){if(!(this instanceof _2))return new _2(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function HK(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function qp(e,t,r,n,s){if(!(this instanceof qp))return new qp(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,HK.call(this,n,s)}function tv(e,t,r,n,s){if(!(this instanceof tv))return new tv(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,HK.call(this,n,s)}function en(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;$n(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=T7;var v="1.3",g=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(H){v=H};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(H){return b[H]};s=s||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},N=C.COMPAT;function k(){this.saveGraphicsState(),se(new Rt(me,0,0,-me,0,Wd()*me).toString()+" cm"),this.setFontSize(this.getFontSize()/me),d="n",N=C.ADVANCED}function S(){this.restoreGraphicsState(),d="S",N=C.COMPAT}var D=p.__private__.combineFontStyleAndFontWeight=function(H,be){if(H=="bold"&&be=="normal"||H=="bold"&&be==400||H=="normal"&&be=="italic"||H=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(H=be==400||be==="normal"?H==="italic"?"italic":"normal":be!=700&&be!=="bold"||H!=="normal"?(be==700?"bold":be)+""+H:"bold"),H};p.advancedAPI=function(H){var be=N===C.COMPAT;return be&&k.call(this),typeof H!="function"||(H(this),be&&S.call(this)),this},p.compatAPI=function(H){var be=N===C.ADVANCED;return be&&S.call(this),typeof H!="function"||(H(this),be&&k.call(this)),this},p.isAdvancedAPI=function(){return N===C.ADVANCED};var E,T=function(H){if(N!==C.ADVANCED)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=p.roundToPrecision=p.__private__.roundToPrecision=function(H,be){var We=t||be;if(isNaN(H)||isNaN(We))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(We).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,c)}:c==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,16)};var L=p.f2=p.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return A(H,2)},P=p.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return A(H,3)},O=p.scale=p.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return N===C.COMPAT?H*me:N===C.ADVANCED?H:void 0},J=function(H){return N===C.COMPAT?Wd()-H:N===C.ADVANCED?H:void 0},W=function(H){return O(J(H))};p.__private__.setPrecision=p.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(t=parseInt(H,10))};var re,U="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return U},B=p.__private__.setFileId=function(H){return U=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ms=new Y0(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};p.setFileId=function(H){return B(H),this},p.getFileId=function(){return Q()};var te=p.__private__.convertDateToPDFDate=function(H){var be=H.getTimezoneOffset(),We=be<0?"+":"-",tt=Math.floor(Math.abs(be/60)),yt=Math.abs(be%60),Bt=[We,z(tt),"'",z(yt),"'"].join("");return["D:",H.getFullYear(),z(H.getMonth()+1),z(H.getDate()),z(H.getHours()),z(H.getMinutes()),z(H.getSeconds()),Bt].join("")},X=p.__private__.convertPDFDateToDate=function(H){var be=parseInt(H.substr(2,4),10),We=parseInt(H.substr(6,2),10)-1,tt=parseInt(H.substr(8,2),10),yt=parseInt(H.substr(10,2),10),Bt=parseInt(H.substr(12,2),10),ir=parseInt(H.substr(14,2),10);return new Date(be,We,tt,yt,Bt,ir,0)},ce=p.__private__.setCreationDate=function(H){var be;if(H===void 0&&(H=new Date),H instanceof Date)be=te(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=H}return re=be},M=p.__private__.getCreationDate=function(H){var be=re;return H==="jsDate"&&(be=X(re)),be};p.setCreationDate=function(H){return ce(H),this},p.getCreationDate=function(H){return M(H)};var q,z=p.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},K=p.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},ee=0,ne=[],ae=[],ie=0,G=[],de=[],Y=!1,oe=ae,Se=function(){ee=0,ie=0,ae=[],ne=[],G=[],Pe=hr(),Ee=hr()};p.__private__.setCustomOutputDestination=function(H){Y=!0,oe=H};var ue=function(H){Y||(oe=H)};p.__private__.resetCustomOutputDestination=function(){Y=!1,oe=ae};var se=p.__private__.out=function(H){return H=H.toString(),ie+=H.length+1,oe.push(H),oe},ye=p.__private__.write=function(H){return se(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},Ne=p.__private__.getArrayBuffer=function(H){for(var be=H.length,We=new ArrayBuffer(be),tt=new Uint8Array(We);be--;)tt[be]=H.charCodeAt(be);return We},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Le};var Je=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(H){return Je=N===C.ADVANCED?H/me:H,this};var lt,vt=p.__private__.getFontSize=p.getFontSize=function(){return N===C.COMPAT?Je:Je*me},Re=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(H){return Re=H,this},p.__private__.getR2L=p.getR2L=function(){return Re};var ht,At=p.__private__.setZoomMode=function(H){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))lt=H;else if(isNaN(H)){if(be.indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');lt=H}else lt=parseInt(H,10)};p.__private__.getZoomMode=function(){return lt};var Tt,Ht=p.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');ht=H};p.__private__.getPageMode=function(){return ht};var pe=p.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');Tt=H};p.__private__.getLayoutMode=function(){return Tt},p.__private__.setDisplayMode=p.setDisplayMode=function(H,be,We){return At(H),pe(be),Ht(We),this};var he={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(H){if(Object.keys(he).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return he[H]},p.__private__.getDocumentProperties=function(){return he},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(H){for(var be in he)he.hasOwnProperty(be)&&H[be]&&(he[be]=H[be]);return this},p.__private__.setDocumentProperty=function(H,be){if(Object.keys(he).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return he[H]=be};var xe,me,De,Ye,jt,Qe={},Xe={},Be=[],He={},ft={},Ae={},Ke={},Ge=null,ct=0,Mt=[],Ie=new T7(p),ke=e.hotfixes||[],it={},bt={},Kt=[],Rt=function H(be,We,tt,yt,Bt,ir){if(!(this instanceof H))return new H(be,We,tt,yt,Bt,ir);isNaN(be)&&(be=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),isNaN(yt)&&(yt=1),isNaN(Bt)&&(Bt=0),isNaN(ir)&&(ir=0),this._matrix=[be,We,tt,yt,Bt,ir]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(H)},Rt.prototype.multiply=function(H){var be=H.sx*this.sx+H.shy*this.shx,We=H.sx*this.shy+H.shy*this.sy,tt=H.shx*this.sx+H.sy*this.shx,yt=H.shx*this.shy+H.sy*this.sy,Bt=H.tx*this.sx+H.ty*this.shx+this.tx,ir=H.tx*this.shy+H.ty*this.sy+this.ty;return new Rt(be,We,tt,yt,Bt,ir)},Rt.prototype.decompose=function(){var H=this.sx,be=this.shy,We=this.shx,tt=this.sy,yt=this.tx,Bt=this.ty,ir=Math.sqrt(H*H+be*be),Nr=(H/=ir)*We+(be/=ir)*tt;We-=H*Nr,tt-=be*Nr;var Or=Math.sqrt(We*We+tt*tt);return Nr/=Or,H*(tt/=Or)<be*(We/=Or)&&(H=-H,be=-be,Nr=-Nr,ir=-ir),{scale:new Rt(ir,0,0,Or,0,0),translate:new Rt(1,0,0,1,yt,Bt),rotate:new Rt(H,be,-be,H,0,0),skew:new Rt(1,0,Nr,1,0,0)}},Rt.prototype.toString=function(H){return this.join(" ")},Rt.prototype.inversed=function(){var H=this.sx,be=this.shy,We=this.shx,tt=this.sy,yt=this.tx,Bt=this.ty,ir=1/(H*tt-be*We),Nr=tt*ir,Or=-be*ir,un=-We*ir,ln=H*ir;return new Rt(Nr,Or,un,ln,-Nr*yt-un*Bt,-Or*yt-ln*Bt)},Rt.prototype.applyToPoint=function(H){var be=H.x*this.sx+H.y*this.shx+this.tx,We=H.x*this.shy+H.y*this.sy+this.ty;return new Pf(be,We)},Rt.prototype.applyToRectangle=function(H){var be=this.applyToPoint(H),We=this.applyToPoint(new Pf(H.x+H.w,H.y+H.h));return new ip(be.x,be.y,We.x-be.x,We.y-be.y)},Rt.prototype.clone=function(){var H=this.sx,be=this.shy,We=this.shx,tt=this.sy,yt=this.tx,Bt=this.ty;return new Rt(H,be,We,tt,yt,Bt)},p.Matrix=Rt;var tr=p.matrixMult=function(H,be){return be.multiply(H)},mr=new Rt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=mr;var jr=function(H,be){if(!ft[H]){var We=(be instanceof qp?"Sh":"P")+(Object.keys(He).length+1).toString(10);be.id=We,ft[H]=We,He[We]=be,Ie.publish("addPattern",be)}};p.ShadingPattern=qp,p.TilingPattern=tv,p.addShadingPattern=function(H,be){return T("addShadingPattern()"),jr(H,be),this},p.beginTilingPattern=function(H){T("beginTilingPattern()"),Of(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},p.endTilingPattern=function(H,be){T("endTilingPattern()"),be.stream=de[q].join(`
`),jr(H,be),Ie.publish("endTilingPattern",be),Kt.pop().restore()};var fn=p.__private__.newObject=function(){var H=hr();return ge(H,!0),H},hr=p.__private__.newObjectDeferred=function(){return ee++,ne[ee]=function(){return ie},ee},ge=function(H,be){return be=typeof be=="boolean"&&be,ne[H]=ie,be&&se(H+" 0 obj"),H},Ue=p.__private__.newAdditionalObject=function(){var H={objId:hr(),content:""};return G.push(H),H},Pe=hr(),Ee=hr(),Fe=p.__private__.decodeColorString=function(H){var be=H.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var We=parseFloat(be[0]);be=[We,We,We,"r"]}for(var tt="#",yt=0;yt<3;yt++)tt+=("0"+Math.floor(255*parseFloat(be[yt])).toString(16)).slice(-2);return tt},Ve=p.__private__.encodeColorString=function(H){var be;typeof H=="string"&&(H={ch1:H});var We=H.ch1,tt=H.ch2,yt=H.ch3,Bt=H.ch4,ir=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof We=="string"&&We.charAt(0)!=="#"){var Nr=new VK(We);if(Nr.ok)We=Nr.toHex();else if(!/^\d*\.?\d*$/.test(We))throw new Error('Invalid color "'+We+'" passed to jsPDF.encodeColorString.')}if(typeof We=="string"&&/^#[0-9A-Fa-f]{3}$/.test(We)&&(We="#"+We[1]+We[1]+We[2]+We[2]+We[3]+We[3]),typeof We=="string"&&/^#[0-9A-Fa-f]{6}$/.test(We)){var Or=parseInt(We.substr(1),16);We=Or>>16&255,tt=Or>>8&255,yt=255&Or}if(tt===void 0||Bt===void 0&&We===tt&&tt===yt)if(typeof We=="string")be=We+" "+ir[0];else switch(H.precision){case 2:be=L(We/255)+" "+ir[0];break;case 3:default:be=P(We/255)+" "+ir[0]}else if(Bt===void 0||$n(Bt)==="object"){if(Bt&&!isNaN(Bt.a)&&Bt.a===0)return be=["1.","1.","1.",ir[1]].join(" ");if(typeof We=="string")be=[We,tt,yt,ir[1]].join(" ");else switch(H.precision){case 2:be=[L(We/255),L(tt/255),L(yt/255),ir[1]].join(" ");break;default:case 3:be=[P(We/255),P(tt/255),P(yt/255),ir[1]].join(" ")}}else if(typeof We=="string")be=[We,tt,yt,Bt,ir[2]].join(" ");else switch(H.precision){case 2:be=[L(We),L(tt),L(yt),L(Bt),ir[2]].join(" ");break;case 3:default:be=[P(We),P(tt),P(yt),P(Bt),ir[2]].join(" ")}return be},xt=p.__private__.getFilters=function(){return o},wt=p.__private__.putStream=function(H){var be=(H=H||{}).data||"",We=H.filters||xt(),tt=H.alreadyAppliedFilters||[],yt=H.addLength1||!1,Bt=be.length,ir=H.objectId,Nr=function(rs){return rs};if(u!==null&&ir===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nr=ms.encryptor(ir,0));var Or={};We===!0&&(We=["FlateEncode"]);var un=H.additionalKeyValues||[],ln=(Or=en.API.processDataByFilters!==void 0?en.API.processDataByFilters(be,We):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(Or.data.length!==0&&(un.push({key:"Length",value:Or.data.length}),yt===!0&&un.push({key:"Length1",value:Bt})),ln.length!=0)if(ln.split("/").length-1==1)un.push({key:"Filter",value:ln});else{un.push({key:"Filter",value:"["+ln+"]"});for(var Pn=0;Pn<un.length;Pn+=1)if(un[Pn].key==="DecodeParms"){for(var Ta=[],Ra=0;Ra<Or.reverseChain.split("/").length-1;Ra+=1)Ta.push("null");Ta.push(un[Pn].value),un[Pn].value="["+Ta.join(" ")+"]"}}se("<<");for(var ts=0;ts<un.length;ts++)se("/"+un[ts].key+" "+un[ts].value);se(">>"),Or.data.length!==0&&(se("stream"),se(Nr(Or.data)),se("endstream"))},at=p.__private__.putPage=function(H){var be=H.number,We=H.data,tt=H.objId,yt=H.contentsObjId;ge(tt,!0),se("<</Type /Page"),se("/Parent "+H.rootDictionaryObjId+" 0 R"),se("/Resources "+H.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(E(H.mediaBox.bottomLeftX))+" "+parseFloat(E(H.mediaBox.bottomLeftY))+" "+E(H.mediaBox.topRightX)+" "+E(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&se("/CropBox ["+E(H.cropBox.bottomLeftX)+" "+E(H.cropBox.bottomLeftY)+" "+E(H.cropBox.topRightX)+" "+E(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&se("/BleedBox ["+E(H.bleedBox.bottomLeftX)+" "+E(H.bleedBox.bottomLeftY)+" "+E(H.bleedBox.topRightX)+" "+E(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&se("/TrimBox ["+E(H.trimBox.bottomLeftX)+" "+E(H.trimBox.bottomLeftY)+" "+E(H.trimBox.topRightX)+" "+E(H.trimBox.topRightY)+"]"),H.artBox!==null&&se("/ArtBox ["+E(H.artBox.bottomLeftX)+" "+E(H.artBox.bottomLeftY)+" "+E(H.artBox.topRightX)+" "+E(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&se("/UserUnit "+H.userUnit),Ie.publish("putPage",{objId:tt,pageContext:Mt[be],pageNumber:be,page:We}),se("/Contents "+yt+" 0 R"),se(">>"),se("endobj");var Bt=We.join(`
`);return N===C.ADVANCED&&(Bt+=`
Q`),ge(yt,!0),wt({data:Bt,filters:xt(),objectId:yt}),se("endobj"),tt},Nt=p.__private__.putPages=function(){var H,be,We=[];for(H=1;H<=ct;H++)Mt[H].objId=hr(),Mt[H].contentsObjId=hr();for(H=1;H<=ct;H++)We.push(at({number:H,data:de[H],objId:Mt[H].objId,contentsObjId:Mt[H].contentsObjId,mediaBox:Mt[H].mediaBox,cropBox:Mt[H].cropBox,bleedBox:Mt[H].bleedBox,trimBox:Mt[H].trimBox,artBox:Mt[H].artBox,userUnit:Mt[H].userUnit,rootDictionaryObjId:Pe,resourceDictionaryObjId:Ee}));ge(Pe,!0),se("<</Type /Pages");var tt="/Kids [";for(be=0;be<ct;be++)tt+=We[be]+" 0 R ";se(tt+"]"),se("/Count "+ct),se(">>"),se("endobj"),Ie.publish("postPutPages")},St=function(H){Ie.publish("putFont",{font:H,out:se,newObject:fn,putStream:wt}),H.isAlreadyPutted!==!0&&(H.objectNumber=fn(),se("<<"),se("/Type /Font"),se("/BaseFont /"+K0(H.postScriptName)),se("/Subtype /Type1"),typeof H.encoding=="string"&&se("/Encoding /"+H.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Xt=function(){for(var H in Qe)Qe.hasOwnProperty(H)&&(h===!1||h===!0&&m.hasOwnProperty(H))&&St(Qe[H])},ar=function(H){H.objectNumber=fn();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[E(H.x),E(H.y),E(H.x+H.width),E(H.y+H.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var We=H.pages[1].join(`
`);wt({data:We,additionalKeyValues:be,objectId:H.objectNumber}),se("endobj")},pr=function(){for(var H in it)it.hasOwnProperty(H)&&ar(it[H])},sr=function(H,be){var We,tt=[],yt=1/(be-1);for(We=0;We<1;We+=yt)tt.push(We);if(tt.push(1),H[0].offset!=0){var Bt={offset:0,color:H[0].color};H.unshift(Bt)}if(H[H.length-1].offset!=1){var ir={offset:1,color:H[H.length-1].color};H.push(ir)}for(var Nr="",Or=0,un=0;un<tt.length;un++){for(We=tt[un];We>H[Or+1].offset;)Or++;var ln=H[Or].offset,Pn=(We-ln)/(H[Or+1].offset-ln),Ta=H[Or].color,Ra=H[Or+1].color;Nr+=K(Math.round((1-Pn)*Ta[0]+Pn*Ra[0]).toString(16))+K(Math.round((1-Pn)*Ta[1]+Pn*Ra[1]).toString(16))+K(Math.round((1-Pn)*Ta[2]+Pn*Ra[2]).toString(16))}return Nr.trim()},qe=function(H,be){be||(be=21);var We=fn(),tt=sr(H.colors,be),yt=[];yt.push({key:"FunctionType",value:"0"}),yt.push({key:"Domain",value:"[0.0 1.0]"}),yt.push({key:"Size",value:"["+be+"]"}),yt.push({key:"BitsPerSample",value:"8"}),yt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt({data:tt,additionalKeyValues:yt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:We}),se("endobj"),H.objectNumber=fn(),se("<< /ShadingType "+H.type),se("/ColorSpace /DeviceRGB");var Bt="/Coords ["+E(parseFloat(H.coords[0]))+" "+E(parseFloat(H.coords[1]))+" ";H.type===2?Bt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3])):Bt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3]))+" "+E(parseFloat(H.coords[4]))+" "+E(parseFloat(H.coords[5])),se(Bt+="]"),H.matrix&&se("/Matrix ["+H.matrix.toString()+"]"),se("/Function "+We+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},or=function(H,be){var We=hr(),tt=fn();be.push({resourcesOid:We,objectOid:tt}),H.objectNumber=tt;var yt=[];yt.push({key:"Type",value:"/Pattern"}),yt.push({key:"PatternType",value:"1"}),yt.push({key:"PaintType",value:"1"}),yt.push({key:"TilingType",value:"1"}),yt.push({key:"BBox",value:"["+H.boundingBox.map(E).join(" ")+"]"}),yt.push({key:"XStep",value:E(H.xStep)}),yt.push({key:"YStep",value:E(H.yStep)}),yt.push({key:"Resources",value:We+" 0 R"}),H.matrix&&yt.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),wt({data:H.stream,additionalKeyValues:yt,objectId:H.objectNumber}),se("endobj")},lr=function(H){var be;for(be in He)He.hasOwnProperty(be)&&(He[be]instanceof qp?qe(He[be]):He[be]instanceof tv&&or(He[be],H))},$r=function(H){for(var be in H.objectNumber=fn(),se("<<"),H)switch(be){case"opacity":se("/ca "+L(H[be]));break;case"stroke-opacity":se("/CA "+L(H[be]))}se(">>"),se("endobj")},gn=function(){var H;for(H in Ae)Ae.hasOwnProperty(H)&&$r(Ae[H])},ta=function(){for(var H in se("/XObject <<"),it)it.hasOwnProperty(H)&&it[H].objectNumber>=0&&se("/"+H+" "+it[H].objectNumber+" 0 R");Ie.publish("putXobjectDict"),se(">>")},zs=function(){ms.oid=fn(),se("<<"),se("/Filter /Standard"),se("/V "+ms.v),se("/R "+ms.r),se("/U <"+ms.toHexString(ms.U)+">"),se("/O <"+ms.toHexString(ms.O)+">"),se("/P "+ms.P),se(">>"),se("endobj")},za=function(){for(var H in se("/Font <<"),Qe)Qe.hasOwnProperty(H)&&(h===!1||h===!0&&m.hasOwnProperty(H))&&se("/"+H+" "+Qe[H].objectNumber+" 0 R");se(">>")},fs=function(){if(Object.keys(He).length>0){for(var H in se("/Shading <<"),He)He.hasOwnProperty(H)&&He[H]instanceof qp&&He[H].objectNumber>=0&&se("/"+H+" "+He[H].objectNumber+" 0 R");Ie.publish("putShadingPatternDict"),se(">>")}},ks=function(H){if(Object.keys(He).length>0){for(var be in se("/Pattern <<"),He)He.hasOwnProperty(be)&&He[be]instanceof p.TilingPattern&&He[be].objectNumber>=0&&He[be].objectNumber<H&&se("/"+be+" "+He[be].objectNumber+" 0 R");Ie.publish("putTilingPatternDict"),se(">>")}},gt=function(){if(Object.keys(Ae).length>0){var H;for(H in se("/ExtGState <<"),Ae)Ae.hasOwnProperty(H)&&Ae[H].objectNumber>=0&&se("/"+H+" "+Ae[H].objectNumber+" 0 R");Ie.publish("putGStateDict"),se(">>")}},fr=function(H){ge(H.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),za(),fs(),ks(H.objectOid),gt(),ta(),se(">>"),se("endobj")},cr=function(){var H=[];Xt(),gn(),pr(),lr(H),Ie.publish("putResources"),H.forEach(fr),fr({resourcesOid:Ee,objectOid:Number.MAX_SAFE_INTEGER}),Ie.publish("postPutResources")},Gr=function(){Ie.publish("putAdditionalObjects");for(var H=0;H<G.length;H++){var be=G[H];ge(be.objId,!0),se(be.content),se("endobj")}Ie.publish("postPutAdditionalObjects")},Rr=function(H){Xe[H.fontName]=Xe[H.fontName]||{},Xe[H.fontName][H.fontStyle]=H.id},oa=function(H,be,We,tt,yt){var Bt={id:"F"+(Object.keys(Qe).length+1).toString(10),postScriptName:H,fontName:be,fontStyle:We,encoding:tt,isStandardFont:yt||!1,metadata:{}};return Ie.publish("addFont",{font:Bt,instance:this}),Qe[Bt.id]=Bt,Rr(Bt),Bt.id},Ho=function(H){for(var be=0,We=Le.length;be<We;be++){var tt=oa.call(this,H[be][0],H[be][1],H[be][2],Le[be][3],!0);h===!1&&(m[tt]=!0);var yt=H[be][0].split("-");Rr({id:tt,fontName:yt[0],fontStyle:yt[1]||""})}Ie.publish("addFonts",{fonts:Qe,dictionary:Xe})},es=function(H){return H.foo=function(){try{return H.apply(this,arguments)}catch(tt){var be=tt.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var We="Error in function "+be.split(`
`)[0].split("<")[0]+": "+tt.message;if(!nn.console)throw new Error(We);nn.console.error(We,tt),nn.alert&&alert(We)}},H.foo.bar=H,H.foo},Io=function(H,be){var We,tt,yt,Bt,ir,Nr,Or,un,ln;if(yt=(be=be||{}).sourceEncoding||"Unicode",ir=be.outputEncoding,(be.autoencode||ir)&&Qe[xe].metadata&&Qe[xe].metadata[yt]&&Qe[xe].metadata[yt].encoding&&(Bt=Qe[xe].metadata[yt].encoding,!ir&&Qe[xe].encoding&&(ir=Qe[xe].encoding),!ir&&Bt.codePages&&(ir=Bt.codePages[0]),typeof ir=="string"&&(ir=Bt[ir]),ir)){for(Or=!1,Nr=[],We=0,tt=H.length;We<tt;We++)(un=ir[H.charCodeAt(We)])?Nr.push(String.fromCharCode(un)):Nr.push(H[We]),Nr[We].charCodeAt(0)>>8&&(Or=!0);H=Nr.join("")}for(We=H.length;Or===void 0&&We!==0;)H.charCodeAt(We-1)>>8&&(Or=!0),We--;if(!Or)return H;for(Nr=be.noBOM?[]:[254,255],We=0,tt=H.length;We<tt;We++){if((ln=(un=H.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+H+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nr.push(ln),Nr.push(un-(ln<<8))}return String.fromCharCode.apply(void 0,Nr)},vn=p.__private__.pdfEscape=p.pdfEscape=function(H,be){return Io(H,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ai=p.__private__.beginPage=function(H){de[++ct]=[],Mt[ct]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},Oi(ct),ue(de[q])},Wo=function(H,be){var We,tt,yt;switch(r=be||r,typeof H=="string"&&(We=y(H.toLowerCase()),Array.isArray(We)&&(tt=We[0],yt=We[1])),Array.isArray(H)&&(tt=H[0]*me,yt=H[1]*me),isNaN(tt)&&(tt=s[0],yt=s[1]),(tt>14400||yt>14400)&&(Ea.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),yt=Math.min(14400,yt)),s=[tt,yt],r.substr(0,1)){case"l":yt>tt&&(s=[yt,tt]);break;case"p":tt>yt&&(s=[yt,tt])}ai(s),Df(hc),se(Sl),sp!==0&&se(sp+" J"),If!==0&&se(If+" j"),Ie.publish("addPage",{pageNumber:ct})},Go=function(H){H>0&&H<=ct&&(de.splice(H,1),Mt.splice(H,1),ct--,q>ct&&(q=ct),this.setPage(q))},Oi=function(H){H>0&&H<=ct&&(q=H)},Vn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return de.length-1},Mi=function(H,be,We){var tt,yt=void 0;return We=We||{},H=H!==void 0?H:Qe[xe].fontName,be=be!==void 0?be:Qe[xe].fontStyle,tt=H.toLowerCase(),Xe[tt]!==void 0&&Xe[tt][be]!==void 0?yt=Xe[tt][be]:Xe[H]!==void 0&&Xe[H][be]!==void 0?yt=Xe[H][be]:We.disableWarning===!1&&Ea.warn("Unable to look up font label for font '"+H+"', '"+be+"'. Refer to getFontList() for available fonts."),yt||We.noFallback||(yt=Xe.times[be])==null&&(yt=Xe.times.normal),yt},_s=p.__private__.putInfo=function(){var H=fn(),be=function(tt){return tt};for(var We in u!==null&&(be=ms.encryptor(H,0)),se("<<"),se("/Producer ("+vn(be("jsPDF "+en.version))+")"),he)he.hasOwnProperty(We)&&he[We]&&se("/"+We.substr(0,1).toUpperCase()+We.substr(1)+" ("+vn(be(he[We]))+")");se("/CreationDate ("+vn(be(re))+")"),se(">>"),se("endobj")},oc=p.__private__.putCatalog=function(H){var be=(H=H||{}).rootDictionaryObjId||Pe;switch(fn(),se("<<"),se("/Type /Catalog"),se("/Pages "+be+" 0 R"),lt||(lt="fullwidth"),lt){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var We=""+lt;We.substr(We.length-1)==="%"&&(lt=parseInt(lt)/100),typeof lt=="number"&&se("/OpenAction [3 0 R /XYZ null null "+L(lt)+"]")}switch(Tt||(Tt="continuous"),Tt){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}ht&&se("/PageMode /"+ht),Ie.publish("putCatalog"),se(">>"),se("endobj")},ed=p.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(ee+1)),se("/Root "+ee+" 0 R"),se("/Info "+(ee-1)+" 0 R"),u!==null&&se("/Encrypt "+ms.oid+" 0 R"),se("/ID [ <"+U+"> <"+U+"> ]"),se(">>")},yl=p.__private__.putHeader=function(){se("%PDF-"+v),se("%")},td=p.__private__.putXRef=function(){var H="0000000000";se("xref"),se("0 "+(ee+1)),se("0000000000 65535 f ");for(var be=1;be<=ee;be++)typeof ne[be]=="function"?se((H+ne[be]()).slice(-10)+" 00000 n "):ne[be]!==void 0?se((H+ne[be]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},jl=p.__private__.buildDocument=function(){Se(),ue(ae),Ie.publish("buildDocument"),yl(),Nt(),Gr(),cr(),u!==null&&zs(),_s(),oc();var H=ie;return td(),ed(),se("startxref"),se(""+H),se("%%EOF"),ue(de[q]),ae.join(`
`)},lc=p.__private__.getBlob=function(H){return new Blob([Ne(H)],{type:"application/pdf"})},Nl=p.output=p.__private__.output=es(function(H,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",H){case void 0:return jl();case"save":p.save(be.filename);break;case"arraybuffer":return Ne(jl());case"blob":return lc(jl());case"bloburi":case"bloburl":if(nn.URL!==void 0&&typeof nn.URL.createObjectURL=="function")return nn.URL&&nn.URL.createObjectURL(lc(jl()))||void 0;Ea.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var We="",tt=jl();try{We=v3(tt)}catch{We=v3(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+be.filename+";base64,"+We;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var yt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(yt=be.pdfObjectUrl,Bt="");var ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yt+'"'+Bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",Nr=nn.open();return Nr!==null&&Nr.document.write(ir),Nr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var Or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',un=nn.open();if(un!==null){un.document.write(Or);var ln=this;un.document.documentElement.querySelector("#pdfViewer").onload=function(){un.document.title=be.filename,un.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ln.output("bloburl"))}}return un}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',Ta=nn.open();if(Ta!==null&&(Ta.document.write(Pn),Ta.document.title=be.filename),Ta||typeof safari>"u")return Ta;break;case"datauri":case"dataurl":return nn.document.location.href=this.output("datauristring",be);default:return null}}),cc=function(H){return Array.isArray(ke)===!0&&ke.indexOf(H)>-1};switch(n){case"pt":me=1;break;case"mm":me=72/25.4;break;case"cm":me=72/2.54;break;case"in":me=72;break;case"px":me=cc("px_scaling")==1?.75:96/72;break;case"pc":case"em":me=12;break;case"ex":me=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);me=n}var ms=null;ce(),B();var dc=function(H){return u!==null?ms.encryptor(H,0):function(be){return be}},wl=p.__private__.getPageInfo=p.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[H].objId,pageNumber:H,pageContext:Mt[H]}},Qr=p.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in Mt)if(Mt[be].objId===H)break;return wl(be)},ih=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Mt[q].objId,pageNumber:q,pageContext:Mt[q]}};p.addPage=function(){return Wo.apply(this,arguments),this},p.setPage=function(){return Oi.apply(this,arguments),ue.call(this,de[q]),this},p.insertPage=function(H){return this.addPage(),this.movePage(q,H),this},p.movePage=function(H,be){var We,tt;if(H>be){We=de[H],tt=Mt[H];for(var yt=H;yt>be;yt--)de[yt]=de[yt-1],Mt[yt]=Mt[yt-1];de[be]=We,Mt[be]=tt,this.setPage(be)}else if(H<be){We=de[H],tt=Mt[H];for(var Bt=H;Bt<be;Bt++)de[Bt]=de[Bt+1],Mt[Bt]=Mt[Bt+1];de[be]=We,Mt[be]=tt,this.setPage(be)}return this},p.deletePage=function(){return Go.apply(this,arguments),this},p.__private__.text=p.text=function(H,be,We,tt,yt){var Bt,ir,Nr,Or,un,ln,Pn,Ta,Ra,ts=(tt=tt||{}).scope||this;if(typeof H=="number"&&typeof be=="number"&&(typeof We=="string"||Array.isArray(We))){var rs=We;We=be,be=H,H=rs}if(arguments[3]instanceof Rt?(T("The transform parameter of text() with a Matrix value"),Ra=yt):(Nr=arguments[4],Or=arguments[5],$n(Pn=arguments[3])==="object"&&Pn!==null||(typeof Nr=="string"&&(Or=Nr,Nr=null),typeof Pn=="string"&&(Or=Pn,Pn=null),typeof Pn=="number"&&(Nr=Pn,Pn=null),tt={flags:Pn,angle:Nr,align:Or})),isNaN(be)||isNaN(We)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return ts;var Hs="",Cl=!1,Oo=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:vi,kl=ts.internal.scaleFactor;function cp(kn){return kn=kn.split("	").join(Array(tt.TabLen||9).join(" ")),vn(kn,Pn)}function nd(kn){for(var _n,ja=kn.concat(),ns=[],Zo=ja.length;Zo--;)typeof(_n=ja.shift())=="string"?ns.push(_n):Array.isArray(kn)&&(_n.length===1||_n[1]===void 0&&_n[2]===void 0)?ns.push(_n[0]):ns.push([_n[0],_n[1],_n[2]]);return ns}function ad(kn,_n){var ja;if(typeof kn=="string")ja=_n(kn)[0];else if(Array.isArray(kn)){for(var ns,Zo,ru=kn.concat(),nu=[],od=ru.length;od--;)typeof(ns=ru.shift())=="string"?nu.push(_n(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Zo=_n(ns[0],ns[1],ns[2]),nu.push([Zo[0],Zo[1],Zo[2]]));ja=nu}return ja}var Ff=!1,Gd=!0;if(typeof H=="string")Ff=!0;else if(Array.isArray(H)){var Lf=H.concat();ir=[];for(var dh,Ds=Lf.length;Ds--;)(typeof(dh=Lf.shift())!="string"||Array.isArray(dh)&&typeof dh[0]!="string")&&(Gd=!1);Ff=Gd}if(Ff===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var Yd=Je/ts.internal.scaleFactor,uh=Yd*(Oo-1);switch(tt.baseline){case"bottom":We-=uh;break;case"top":We+=Yd-uh;break;case"hanging":We+=Yd-2*uh;break;case"middle":We+=Yd/2-uh}if((ln=tt.maxWidth||0)>0&&(typeof H=="string"?H=ts.splitTextToSize(H,ln):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce(function(kn,_n){return kn.concat(ts.splitTextToSize(_n,ln))},[]))),Bt={text:H,x:be,y:We,options:tt,mutex:{pdfEscape:vn,activeFontKey:xe,fonts:Qe,activeFontSize:Je}},Ie.publish("preProcessText",Bt),H=Bt.text,Nr=(tt=Bt.options).angle,!(Ra instanceof Rt)&&Nr&&typeof Nr=="number"){Nr*=Math.PI/180,tt.rotationDirection===0&&(Nr=-Nr),N===C.ADVANCED&&(Nr=-Nr);var hh=Math.cos(Nr),Bf=Math.sin(Nr);Ra=new Rt(hh,Bf,-Bf,hh,0,0)}else Nr&&Nr instanceof Rt&&(Ra=Nr);N!==C.ADVANCED||Ra||(Ra=mr),(un=tt.charSpace||Tf)!==void 0&&(Hs+=E(O(un))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ta=tt.horizontalScale)!==void 0&&(Hs+=E(100*Ta)+` Tz
`),tt.lang;var to=-1,vg=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,dp=ts.internal.getCurrentPageInfo().pageContext;switch(vg){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Jx=dp.usedRenderingMode!==void 0?dp.usedRenderingMode:-1;to!==-1?Hs+=to+` Tr
`:Jx!==-1&&(Hs+=`0 Tr
`),to!==-1&&(dp.usedRenderingMode=to),Or=tt.align||"left";var Jo,Ws=Je*Oo,Kd=ts.internal.pageSize.getWidth(),up=Qe[xe];un=tt.charSpace||Tf,ln=tt.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var sd=[],Xd=function(kn){return ts.getStringUnitWidth(kn,{font:up,charSpace:un,fontSize:Je,doKerning:!1})*Je/kl};if(Object.prototype.toString.call(H)==="[object Array]"){var Ri;ir=nd(H),Or!=="left"&&(Jo=ir.map(Xd));var si,Qd=0;if(Or==="right"){be-=Jo[0],H=[],Ds=ir.length;for(var ro=0;ro<Ds;ro++)ro===0?(si=Po(be),Ri=fc(We)):(si=O(Qd-Jo[ro]),Ri=-Ws),H.push([ir[ro],si,Ri]),Qd=Jo[ro]}else if(Or==="center"){be-=Jo[0]/2,H=[],Ds=ir.length;for(var _l=0;_l<Ds;_l++)_l===0?(si=Po(be),Ri=fc(We)):(si=O((Qd-Jo[_l])/2),Ri=-Ws),H.push([ir[_l],si,Ri]),Qd=Jo[_l]}else if(Or==="left"){H=[],Ds=ir.length;for(var mc=0;mc<Ds;mc++)H.push(ir[mc])}else if(Or==="justify"&&up.encoding==="Identity-H"){H=[],Ds=ir.length,ln=ln!==0?ln:Kd;for(var El=0,Ha=0;Ha<Ds;Ha++)if(Ri=Ha===0?fc(We):-Ws,si=Ha===0?Po(be):El,Ha<Ds-1){var Dl=O((ln-Jo[Ha])/(ir[Ha].split(" ").length-1)),ps=ir[Ha].split(" ");H.push([ps[0]+" ",si,Ri]),El=0;for(var no=1;no<ps.length;no++){var fh=(Xd(ps[no-1]+" "+ps[no])-Xd(ps[no]))*kl+Dl;no==ps.length-1?H.push([ps[no],fh,0]):H.push([ps[no]+" ",fh,0]),El-=fh}}else H.push([ir[Ha],si,Ri]);H.push(["",El,0])}else{if(Or!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],Ds=ir.length,ln=ln!==0?ln:Kd,Ha=0;Ha<Ds;Ha++)Ri=Ha===0?fc(We):-Ws,si=Ha===0?Po(be):0,Ha<Ds-1?sd.push(E(O((ln-Jo[Ha])/(ir[Ha].split(" ").length-1)))):sd.push(0),H.push([ir[Ha],si,Ri])}}var pc=typeof tt.R2L=="boolean"?tt.R2L:Re;pc===!0&&(H=ad(H,function(kn,_n,ja){return[kn.split("").reverse().join(""),_n,ja]})),Bt={text:H,x:be,y:We,options:tt,mutex:{pdfEscape:vn,activeFontKey:xe,fonts:Qe,activeFontSize:Je}},Ie.publish("postProcessText",Bt),H=Bt.text,Cl=Bt.mutex.isHex||!1;var Uf=Qe[xe].encoding;Uf!=="WinAnsiEncoding"&&Uf!=="StandardEncoding"||(H=ad(H,function(kn,_n,ja){return[cp(kn),_n,ja]})),ir=nd(H),H=[];for(var Jd,Zd,eu,mh=0,$f=1,tu=Array.isArray(ir[0])?$f:mh,id="",ph=function(kn,_n,ja){var ns="";return ja instanceof Rt?(ja=typeof tt.angle=="number"?tr(ja,new Rt(1,0,0,1,kn,_n)):tr(new Rt(1,0,0,1,kn,_n),ja),N===C.ADVANCED&&(ja=tr(new Rt(1,0,0,-1,0,0),ja)),ns=ja.join(" ")+` Tm
`):ns=E(kn)+" "+E(_n)+` Td
`,ns},Wa=0;Wa<ir.length;Wa++){switch(id="",tu){case $f:eu=(Cl?"<":"(")+ir[Wa][0]+(Cl?">":")"),Jd=parseFloat(ir[Wa][1]),Zd=parseFloat(ir[Wa][2]);break;case mh:eu=(Cl?"<":"(")+ir[Wa]+(Cl?">":")"),Jd=Po(be),Zd=fc(We)}sd!==void 0&&sd[Wa]!==void 0&&(id=sd[Wa]+` Tw
`),Wa===0?H.push(id+ph(Jd,Zd,Ra)+eu):tu===mh?H.push(id+eu):tu===$f&&H.push(id+ph(Jd,Zd,Ra)+eu)}H=tu===mh?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var Mo=`BT
/`;return Mo+=xe+" "+Je+` Tf
`,Mo+=E(Je*Oo)+` TL
`,Mo+=lh+`
`,Mo+=Hs,Mo+=H,se(Mo+="ET"),m[xe]=!0,ts};var _f=p.__private__.clip=p.clip=function(H){return se(H==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return _f("evenodd")},p.__private__.discardPath=p.discardPath=function(){return se("n"),this};var rt=p.__private__.isValidStyle=function(H){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(be=!0),be};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(H){return rt(H)&&(d=H),this};var dr=p.__private__.getStyle=p.getStyle=function(H){var be=d;switch(H){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=H}return be},er=p.close=function(){return se("h"),this};p.stroke=function(){return se("S"),this},p.fill=function(H){return _r("f",H),this},p.fillEvenOdd=function(H){return _r("f*",H),this},p.fillStroke=function(H){return _r("B",H),this},p.fillStrokeEvenOdd=function(H){return _r("B*",H),this};var _r=function(H,be){$n(be)==="object"?Yo(be,H):se(H)},Cr=function(H){H===null||N===C.ADVANCED&&H===void 0||(H=dr(H),se(H))};function ka(H,be,We,tt,yt){var Bt=new tv(be||this.boundingBox,We||this.xStep,tt||this.yStep,this.gState,yt||this.matrix);Bt.stream=this.stream;var ir=H+"$$"+this.cloneIndex+++"$$";return jr(ir,Bt),Bt}var Yo=function(H,be){var We=ft[H.key],tt=He[We];if(tt instanceof qp)se("q"),se(Ef(be)),tt.gState&&p.setGState(tt.gState),se(H.matrix.toString()+" cm"),se("/"+We+" sh"),se("Q");else if(tt instanceof tv){var yt=new Rt(1,0,0,-1,0,Wd());H.matrix&&(yt=yt.multiply(H.matrix||mr),We=ka.call(tt,H.key,H.boundingBox,H.xStep,H.yStep,yt).id),se("q"),se("/Pattern cs"),se("/"+We+" scn"),tt.gState&&p.setGState(tt.gState),se(be),se("Q")}},Ef=function(H){switch(H){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},uc=p.moveTo=function(H,be){return se(E(O(H))+" "+E(W(be))+" m"),this},Ko=p.lineTo=function(H,be){return se(E(O(H))+" "+E(W(be))+" l"),this},Xo=p.curveTo=function(H,be,We,tt,yt,Bt){return se([E(O(H)),E(W(be)),E(O(We)),E(W(tt)),E(O(yt)),E(W(Bt)),"c"].join(" ")),this};p.__private__.line=p.line=function(H,be,We,tt,yt){if(isNaN(H)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(yt))throw new Error("Invalid arguments passed to jsPDF.line");return N===C.COMPAT?this.lines([[We-H,tt-be]],H,be,[1,1],yt||"S"):this.lines([[We-H,tt-be]],H,be,[1,1]).stroke()},p.__private__.lines=p.lines=function(H,be,We,tt,yt,Bt){var ir,Nr,Or,un,ln,Pn,Ta,Ra,ts,rs,Hs,Cl;if(typeof H=="number"&&(Cl=We,We=be,be=H,H=Cl),tt=tt||[1,1],Bt=Bt||!1,isNaN(be)||isNaN(We)||!Array.isArray(H)||!Array.isArray(tt)||!rt(yt)||typeof Bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uc(be,We),ir=tt[0],Nr=tt[1],un=H.length,rs=be,Hs=We,Or=0;Or<un;Or++)(ln=H[Or]).length===2?(rs=ln[0]*ir+rs,Hs=ln[1]*Nr+Hs,Ko(rs,Hs)):(Pn=ln[0]*ir+rs,Ta=ln[1]*Nr+Hs,Ra=ln[2]*ir+rs,ts=ln[3]*Nr+Hs,rs=ln[4]*ir+rs,Hs=ln[5]*Nr+Hs,Xo(Pn,Ta,Ra,ts,rs,Hs));return Bt&&er(),Cr(yt),this},p.path=function(H){for(var be=0;be<H.length;be++){var We=H[be],tt=We.c;switch(We.op){case"m":uc(tt[0],tt[1]);break;case"l":Ko(tt[0],tt[1]);break;case"c":Xo.apply(this,tt);break;case"h":er()}}return this},p.__private__.rect=p.rect=function(H,be,We,tt,yt){if(isNaN(H)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(yt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===C.COMPAT&&(tt=-tt),se([E(O(H)),E(W(be)),E(O(We)),E(O(tt)),"re"].join(" ")),Cr(yt),this},p.__private__.triangle=p.triangle=function(H,be,We,tt,yt,Bt,ir){if(isNaN(H)||isNaN(be)||isNaN(We)||isNaN(tt)||isNaN(yt)||isNaN(Bt)||!rt(ir))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[We-H,tt-be],[yt-We,Bt-tt],[H-yt,be-Bt]],H,be,[1,1],ir,!0),this},p.__private__.roundedRect=p.roundedRect=function(H,be,We,tt,yt,Bt,ir){if(isNaN(H)||isNaN(be)||isNaN(We)||isNaN(tt)||isNaN(yt)||isNaN(Bt)||!rt(ir))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nr=4/3*(Math.SQRT2-1);return yt=Math.min(yt,.5*We),Bt=Math.min(Bt,.5*tt),this.lines([[We-2*yt,0],[yt*Nr,0,yt,Bt-Bt*Nr,yt,Bt],[0,tt-2*Bt],[0,Bt*Nr,-yt*Nr,Bt,-yt,Bt],[2*yt-We,0],[-yt*Nr,0,-yt,-Bt*Nr,-yt,-Bt],[0,2*Bt-tt],[0,-Bt*Nr,yt*Nr,-Bt,yt,-Bt]],H+yt,be,[1,1],ir,!0),this},p.__private__.ellipse=p.ellipse=function(H,be,We,tt,yt){if(isNaN(H)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(yt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Bt=4/3*(Math.SQRT2-1)*We,ir=4/3*(Math.SQRT2-1)*tt;return uc(H+We,be),Xo(H+We,be-ir,H+Bt,be-tt,H,be-tt),Xo(H-Bt,be-tt,H-We,be-ir,H-We,be),Xo(H-We,be+ir,H-Bt,be+tt,H,be+tt),Xo(H+Bt,be+tt,H+We,be+ir,H+We,be),Cr(yt),this},p.__private__.circle=p.circle=function(H,be,We,tt){if(isNaN(H)||isNaN(be)||isNaN(We)||!rt(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,be,We,We,tt)},p.setFont=function(H,be,We){return We&&(be=D(be,We)),xe=Mi(H,be,{disableWarning:!1}),this};var Es=p.__private__.getFont=p.getFont=function(){return Qe[Mi.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var H,be,We={};for(H in Xe)if(Xe.hasOwnProperty(H))for(be in We[H]=[],Xe[H])Xe[H].hasOwnProperty(be)&&We[H].push(be);return We},p.addFont=function(H,be,We,tt,yt){var Bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Bt.indexOf(arguments[3])!==-1?yt=arguments[3]:arguments[3]&&Bt.indexOf(arguments[3])==-1&&(We=D(We,tt)),yt=yt||"Identity-H",oa.call(this,H,be,We,yt)};var vi,hc=e.lineWidth||.200025,Qo=p.__private__.getLineWidth=p.getLineWidth=function(){return hc},Df=p.__private__.setLineWidth=p.setLineWidth=function(H){return hc=H,se(E(O(H))+" w"),this};p.__private__.setLineDash=en.API.setLineDash=en.API.setLineDashPattern=function(H,be){if(H=H||[],be=be||0,isNaN(be)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map(function(We){return E(O(We))}).join(" "),be=E(O(be)),se("["+H+"] "+be+" d"),this};var rd=p.__private__.getLineHeight=p.getLineHeight=function(){return Je*vi};p.__private__.getLineHeight=p.getLineHeight=function(){return Je*vi};var Af=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(vi=H),this},zd=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vi};Af(e.lineHeight);var Po=p.__private__.getHorizontalCoordinate=function(H){return O(H)},fc=p.__private__.getVerticalCoordinate=function(H){return N===C.ADVANCED?H:Mt[q].mediaBox.topRightY-Mt[q].mediaBox.bottomLeftY-O(H)},fg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(H){return E(Po(H))},Hd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(H){return E(fc(H))},Sl=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Fe(Sl)},p.__private__.setStrokeColor=p.setDrawColor=function(H,be,We,tt){return Sl=Ve({ch1:H,ch2:be,ch3:We,ch4:tt,pdfColorType:"draw",precision:2}),se(Sl),this};var oh=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Fe(oh)},p.__private__.setFillColor=p.setFillColor=function(H,be,We,tt){return oh=Ve({ch1:H,ch2:be,ch3:We,ch4:tt,pdfColorType:"fill",precision:2}),se(oh),this};var lh=e.textColor||"0 g",mg=p.__private__.getTextColor=p.getTextColor=function(){return Fe(lh)};p.__private__.setTextColor=p.setTextColor=function(H,be,We,tt){return lh=Ve({ch1:H,ch2:be,ch3:We,ch4:tt,pdfColorType:"text",precision:3}),this};var Tf=e.charSpace,pg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tf||0)};p.__private__.setCharSpace=p.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tf=H,this};var sp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(H){var be=p.CapJoinStyles[H];if(be===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=be,se(be+" J"),this};var If=0;p.__private__.setLineJoin=p.setLineJoin=function(H){var be=p.CapJoinStyles[H];if(be===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return If=be,se(be+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(E(O(H))+" M"),this},p.GState=_2,p.setGState=function(H){(H=typeof H=="string"?Ae[Ke[H]]:Qx(null,H)).equals(Ge)||(se("/"+H.id+" gs"),Ge=H)};var Qx=function(H,be){if(!H||!Ke[H]){var We=!1;for(var tt in Ae)if(Ae.hasOwnProperty(tt)&&Ae[tt].equals(be)){We=!0;break}if(We)be=Ae[tt];else{var yt="GS"+(Object.keys(Ae).length+1).toString(10);Ae[yt]=be,be.id=yt}return H&&(Ke[H]=be.id),Ie.publish("addGState",be),be}};p.addGState=function(H,be){return Qx(H,be),this},p.saveGraphicsState=function(){return se("q"),Be.push({key:xe,size:Je,color:lh}),this},p.restoreGraphicsState=function(){se("Q");var H=Be.pop();return xe=H.key,Je=H.size,lh=H.color,Ge=null,this},p.setCurrentTransformationMatrix=function(H){return se(H.toString()+" cm"),this},p.comment=function(H){return se("#"+H),this};var Pf=function(H,be){var We=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function(Bt){isNaN(Bt)||(We=parseFloat(Bt))}});var tt=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Bt){isNaN(Bt)||(tt=parseFloat(Bt))}});var yt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yt},set:function(Bt){yt=Bt.toString()}}),this},ip=function(H,be,We,tt){Pf.call(this,H,be),this.type="rect";var yt=We||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yt},set:function(ir){isNaN(ir)||(yt=parseFloat(ir))}});var Bt=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Bt},set:function(ir){isNaN(ir)||(Bt=parseFloat(ir))}}),this},op=function(){this.page=ct,this.currentPage=q,this.pages=de.slice(0),this.pagesContext=Mt.slice(0),this.x=De,this.y=Ye,this.matrix=jt,this.width=ch(q),this.height=Wd(q),this.outputDestination=oe,this.id="",this.objectNumber=-1};op.prototype.restore=function(){ct=this.page,q=this.currentPage,Mt=this.pagesContext,de=this.pages,De=this.x,Ye=this.y,jt=this.matrix,Rf(q,this.width),lp(q,this.height),oe=this.outputDestination};var Of=function(H,be,We,tt,yt){Kt.push(new op),ct=q=0,de=[],De=H,Ye=be,jt=yt,ai([We,tt])},xg=function(H){if(bt[H])Kt.pop().restore();else{var be=new op,We="Xo"+(Object.keys(it).length+1).toString(10);be.id=We,bt[H]=We,it[We]=be,Ie.publish("addFormObject",be),Kt.pop().restore()}};for(var Mf in p.beginFormObject=function(H,be,We,tt,yt){return Of(H,be,We,tt,yt),this},p.endFormObject=function(H){return xg(H),this},p.doFormObject=function(H,be){var We=it[bt[H]];return se("q"),se(be.toString()+" cm"),se("/"+We.id+" Do"),se("Q"),this},p.getFormObject=function(H){var be=it[bt[H]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},p.save=function(H,be){return H=H||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(Bp(lc(jl()),H),typeof Bp.unload=="function"&&nn.setTimeout&&setTimeout(Bp.unload,911),this):new Promise(function(We,tt){try{var yt=Bp(lc(jl()),H);typeof Bp.unload=="function"&&nn.setTimeout&&setTimeout(Bp.unload,911),We(yt)}catch(Bt){tt(Bt.message)}})},en.API)en.API.hasOwnProperty(Mf)&&(Mf==="events"&&en.API.events.length?function(H,be){var We,tt,yt;for(yt=be.length-1;yt!==-1;yt--)We=be[yt][0],tt=be[yt][1],H.subscribe.apply(H,[We].concat(typeof tt=="function"?[tt]:tt))}(Ie,en.API.events):p[Mf]=en.API[Mf]);var ch=p.getPageWidth=function(H){return(Mt[H=H||q].mediaBox.topRightX-Mt[H].mediaBox.bottomLeftX)/me},Rf=p.setPageWidth=function(H,be){Mt[H].mediaBox.topRightX=be*me+Mt[H].mediaBox.bottomLeftX},Wd=p.getPageHeight=function(H){return(Mt[H=H||q].mediaBox.topRightY-Mt[H].mediaBox.bottomLeftY)/me},lp=p.setPageHeight=function(H,be){Mt[H].mediaBox.topRightY=be*me+Mt[H].mediaBox.bottomLeftY};return p.internal={pdfEscape:vn,getStyle:dr,getFont:Es,getFontSize:vt,getCharSpace:pg,getTextColor:mg,getLineHeight:rd,getLineHeightFactor:zd,getLineWidth:Qo,write:ye,getHorizontalCoordinate:Po,getVerticalCoordinate:fc,getCoordinateString:fg,getVerticalCoordinateString:Hd,collections:{},newObject:fn,newAdditionalObject:Ue,newObjectDeferred:hr,newObjectDeferredBegin:ge,getFilters:xt,putStream:wt,events:Ie,scaleFactor:me,pageSize:{getWidth:function(){return ch(q)},setWidth:function(H){Rf(q,H)},getHeight:function(){return Wd(q)},setHeight:function(H){lp(q,H)}},encryptionOptions:u,encryption:ms,getEncryptor:dc,output:Nl,getNumberOfPages:Vn,pages:de,out:se,f2:L,f3:P,getPageInfo:wl,getPageInfoByObjId:Qr,getCurrentPageInfo:ih,getPDFVersion:g,Point:Pf,Rectangle:ip,Matrix:Rt,hasHotfix:cc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ch(q)},set:function(H){Rf(q,H)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Wd(q)},set:function(H){lp(q,H)},enumerable:!0,configurable:!0}),Ho.call(p,Le),xe="F1",Wo(s,r),Ie.publish("initialized"),p}Y0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Y0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Y0.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Y0.prototype.processOwnerPassword=function(e,t){return b3(g3(t).substr(0,5),e)},Y0.prototype.encryptor=function(e,t){var r=g3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return b3(r,n)}},_2.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||$n(e)!==$n(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},en.API={events:[]},en.version="3.0.1";var ys=en.API,EI=1,Xx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},U0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pn=function(e){return e.toFixed(2)},jm=function(e){return e.toFixed(5)};ys.__acroform__={};var bl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},I7=function(e){return e*EI},ju=function(e){var t=new GK,r=Ar.internal.getHeight(e)||0,n=Ar.internal.getWidth(e)||0;return t.BBox=[0,0,Number(pn(n)),Number(pn(r))],t},o8e=ys.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},l8e=ys.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},c8e=ys.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Rs=ys.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return c8e(e,t-1)},Fs=ys.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return o8e(e,t-1)},Ls=ys.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return l8e(e,t-1)},d8e=ys.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(pn(c.lowerLeft_X)),Number(pn(c.lowerLeft_Y)),Number(pn(c.upperRight_X)),Number(pn(c.upperRight_Y))]},u8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=y3(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+pn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ju(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},y3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var i=r,o=Ar.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ar.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,O,J){if(P+1<s.length){var W=O+" "+s[P+1][0];return vN(W,e,J).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=vN("3",e,i).height,m=e.multiline?o-i:(o-h)/2,p=m+=2,v=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+vN(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",C=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var k=!1;if(s[N].length!==1&&b!==s[N].length-1){if((h+2)*(C+2)+2>o)continue e;y+=s[N][b],k=!0,g=N,N--}else{y=(y+=s[N][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(N),D=c(S,y,i),E=N>=s.length-1;if(D&&!E){y+=" ",b=0;continue}if(D||E){if(E)g=S;else if(e.multiline&&(h+2)*(C+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(C+2)+2>o)continue e;g=S}}for(var T="",A=v;A<=g;A++){var L=s[A];if(e.multiline){if(A===g){T+=L[b]+" ",b=(b+1)%L.length;continue}if(A===v){T+=L[L.length-1]+" ";continue}}T+=L[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=vN(T,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=pn(d)+" "+pn(p)+` Td
`,t+="("+Xx(T)+`) Tj
`,t+=-pn(d)+` 0 Td
`,p=-(i+2),u=0,v=k?g:g+1,C++,y=""}break}return n.text=t,n.fontSize=i,n},vN=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},h8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},f8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},m8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),$n(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},p8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(qd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(h8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new YK,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&f8e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=d8e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ar.createDefaultAppearanceStream(l),$n(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=u8e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&m8e(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},WK=ys.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),$n(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+Xx(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d5=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xx(n(e))+")"},Ru=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ru.prototype.toString=function(){return this.objId+" 0 R"},Ru.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ru.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:WK(s,this.objId,this.scope)}):s instanceof Ru?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var GK=function(){Ru.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};bl(GK,Ru);var YK=function(){Ru.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xx(r(e))+")"}},set:function(r){e=r}})};bl(YK,Ru);var qd=function e(){Ru.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Rs(t,3)},set:function(y){y?this.F=Fs(t,3):this.F=Ls(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof E2)return;i="FieldObject"+e.FieldNum++}var y=function(C){return C};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Xx(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/EI:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof E2||this instanceof xx))return d5(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ci?m:d5(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Ci?y:y.substr(0,1)==="("?U0(y.substr(1,y.length-2)):U0(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci?U0(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Ci?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ci?p:d5(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Ci?y:y.substr(0,1)==="("?U0(y.substr(1,y.length-2)):U0(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci?U0(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ci?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,1)},set:function(y){y?this.Ff=Fs(this.Ff,1):this.Ff=Ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,2)},set:function(y){y?this.Ff=Fs(this.Ff,2):this.Ff=Ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,3)},set:function(y){y?this.Ff=Fs(this.Ff,3):this.Ff=Ls(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};bl(qd,Ru);var bv=function(){qd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return WK(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,18)},set:function(r){r?this.Ff=Fs(this.Ff,18):this.Ff=Ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Fs(this.Ff,19):this.Ff=Ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,20)},set:function(r){r?(this.Ff=Fs(this.Ff,20),t.sort()):this.Ff=Ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,22)},set:function(r){r?this.Ff=Fs(this.Ff,22):this.Ff=Ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,23)},set:function(r){r?this.Ff=Fs(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,27)},set:function(r){r?this.Ff=Fs(this.Ff,27):this.Ff=Ls(this.Ff,27)}}),this.hasAppearanceStream=!1};bl(bv,qd);var yv=function(){bv.call(this),this.fontName="helvetica",this.combo=!1};bl(yv,bv);var jv=function(){yv.call(this),this.combo=!0};bl(jv,yv);var LN=function(){jv.call(this),this.edit=!0};bl(LN,jv);var Ci=function(){qd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,15)},set:function(r){r?this.Ff=Fs(this.Ff,15):this.Ff=Ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,16)},set:function(r){r?this.Ff=Fs(this.Ff,16):this.Ff=Ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,17)},set:function(r){r?this.Ff=Fs(this.Ff,17):this.Ff=Ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,26)},set:function(r){r?this.Ff=Fs(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+Xx(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){$n(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};bl(Ci,qd);var BN=function(){Ci.call(this),this.pushButton=!0};bl(BN,Ci);var Nv=function(){Ci.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};bl(Nv,Ci);var E2=function(){var e,t;qd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Xx(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){$n(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bl(E2,qd),Nv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Nv.prototype.createOption=function(e){var t=new E2;return t.Parent=this,t.optionName=e,this.Kids.push(t),x8e.call(this.scope,t),t};var UN=function(){Ci.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};bl(UN,Ci);var xx=function(){qd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,13)},set:function(t){t?this.Ff=Fs(this.Ff,13):this.Ff=Ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,21)},set:function(t){t?this.Ff=Fs(this.Ff,21):this.Ff=Ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,23)},set:function(t){t?this.Ff=Fs(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,24)},set:function(t){t?this.Ff=Fs(this.Ff,24):this.Ff=Ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,25)},set:function(t){t?this.Ff=Fs(this.Ff,25):this.Ff=Ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,26)},set:function(t){t?this.Ff=Fs(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bl(xx,qd);var $N=function(){xx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,14)},set:function(e){e?this.Ff=Fs(this.Ff,14):this.Ff=Ls(this.Ff,14)}}),this.password=!0};bl($N,xx);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=y3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+pn(Ar.internal.getWidth(e))+" "+pn(Ar.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+pn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Ar.internal.getHeight(e),o=Ar.internal.getWidth(e),l=y3(e,e.caption);return s.push("1 g"),s.push("0 0 "+pn(o)+" "+pn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+pn(o-1)+" "+pn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+pn(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pn(Ar.internal.getWidth(e))+" "+pn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Circle.YesNormal,t.D[e]=Ar.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Ar.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ar.internal.Bezier_C).toFixed(5)),o=Number((n*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Cross.YesNormal,t.D[e]=Ar.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Ar.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+pn(Ar.internal.getWidth(e)-2)+" "+pn(Ar.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(pn(n.x1.x)+" "+pn(n.x1.y)+" m"),r.push(pn(n.x2.x)+" "+pn(n.x2.y)+" l"),r.push(pn(n.x4.x)+" "+pn(n.x4.y)+" m"),r.push(pn(n.x3.x)+" "+pn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=Ar.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+pn(Ar.internal.getWidth(e))+" "+pn(Ar.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+pn(Ar.internal.getWidth(e)-2)+" "+pn(Ar.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(pn(r.x1.x)+" "+pn(r.x1.y)+" m"),n.push(pn(r.x2.x)+" "+pn(r.x2.y)+" l"),n.push(pn(r.x4.x)+" "+pn(r.x4.y)+" m"),n.push(pn(r.x3.x)+" "+pn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pn(Ar.internal.getWidth(e))+" "+pn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ar.internal.getWidth(e),r=Ar.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ar.internal.getWidth=function(e){var t=0;return $n(e)==="object"&&(t=I7(e.Rect[2])),t},Ar.internal.getHeight=function(e){var t=0;return $n(e)==="object"&&(t=I7(e.Rect[3])),t};var x8e=ys.addField=function(e){if(p8e(this,e),!(e instanceof qd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=bv,ys.AcroFormListBox=yv,ys.AcroFormComboBox=jv,ys.AcroFormEditBox=LN,ys.AcroFormButton=Ci,ys.AcroFormPushButton=BN,ys.AcroFormRadioButton=Nv,ys.AcroFormCheckBox=UN,ys.AcroFormTextField=xx,ys.AcroFormPasswordField=$N,ys.AcroFormAppearance=Ar,ys.AcroForm={ChoiceField:bv,ListBox:yv,ComboBox:jv,EditBox:LN,Button:Ci,PushButton:BN,RadioButton:Nv,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Ar},en.AcroForm={ChoiceField:bv,ListBox:yv,ComboBox:jv,EditBox:LN,Button:Ci,PushButton:BN,RadioButton:Nv,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Ar};en.AcroForm;function KK(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,O){var J,W,re,U,Q,B=t;if((O=O||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(D(P))for(Q in r)for(re=r[Q],J=0;J<re.length;J+=1){for(U=!0,W=0;W<re[J].length;W+=1)if(re[J][W]!==void 0&&re[J][W]!==P[W]){U=!1;break}if(U===!0){B=Q;break}}else for(Q in r)for(re=r[Q],J=0;J<re.length;J+=1){for(U=!0,W=0;W<re[J].length;W+=1)if(re[J][W]!==void 0&&re[J][W]!==P.charCodeAt(W)){U=!1;break}if(U===!0){B=Q;break}}return B===t&&O!==t&&(B=O),B},s=function P(O){for(var J=this.internal.write,W=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:O.width}),U.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var Q="",B=0,te=O.transparency.length;B<te;B++)Q+=O.transparency[B]+" "+O.transparency[B]+" ";U.push({key:"Mask",value:"["+Q+"]"})}O.sMask!==void 0&&U.push({key:"SMask",value:O.objectId+1+" 0 R"});var X=O.filter!==void 0?["/"+O.filter]:void 0;if(W({data:O.data,additionalKeyValues:U,alreadyAppliedFilters:X,objectId:O.objectId}),J("endobj"),"sMask"in O&&O.sMask!==void 0){var ce="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,M={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:ce,data:O.sMask};"filter"in O&&(M.filter=O.filter),P.call(this,M)}if(O.colorSpace===b.INDEXED){var q=this.internal.newObject();W({data:T(new Uint8Array(O.palette)),objectId:q}),J("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var O in P)s.call(this,P[O])},o=function(){var P,O=this.internal.collections.addImage_images,J=this.internal.write;for(var W in O)J("/I"+(P=O[W]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},h=function(P){return $n(P)==="object"&&P.nodeType===1},m=function(P,O){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var J=""+P.getAttribute("src");if(J.indexOf("data:image/")===0)return Kb(unescape(J).split("base64,").pop());var W=e.loadFile(J,!0);if(W!==void 0)return W}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var re;switch(O){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return Kb(P.toDataURL(re,1).split("base64,").pop())}},p=function(P){var O=this.internal.collections.addImage_images;if(O){for(var J in O)if(P===O[J].alias)return O[J]}},v=function(P,O,J){return P||O||(P=-96,O=-96),P<0&&(P=-1*J.width*72/P/this.internal.scaleFactor),O<0&&(O=-1*J.height*72/O/this.internal.scaleFactor),P===0&&(P=O*J.width/J.height),O===0&&(O=P*J.height/J.width),[P,O]},g=function(P,O,J,W,re,U){var Q=v.call(this,J,W,re),B=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,X=c.call(this);if(J=Q[0],W=Q[1],X[re.index]=re,U){U*=Math.PI/180;var ce=Math.cos(U),M=Math.sin(U),q=function(K){return K.toFixed(4)},z=[q(ce),q(M),q(-1*M),q(ce),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,B(P),te(O+W),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([B(J),"0","0",B(W),"0","0","cm"].join(" "))):this.internal.write([B(J),"0","0",B(W),B(P),te(O+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(P){var O,J,W=0;if(typeof P=="string")for(J=P.length,O=0;O<J;O++)W=(W<<5)-W+P.charCodeAt(O),W|=0;else if(D(P))for(J=P.byteLength/2,O=0;O<J;O++)W=(W<<5)-W+P[O],W|=0;return W},N=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var O=!0;return P.length===0&&(O=!1),P.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(O=!1),O},k=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var O=P.indexOf(",");return O<0?null:P.substring(0,O).trim().endsWith("base64")?P.substring(O+1):null},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return S()&&P instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(P){return S()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var O=P.length,J=new Uint8Array(O),W=0;W<O;W++)J[W]=P.charCodeAt(W);return J},T=e.__addimage__.arrayBufferToBinaryString=function(P){for(var O="",J=D(P)?P:new Uint8Array(P),W=0;W<J.length;W+=8192)O+=String.fromCharCode.apply(null,J.subarray(W,W+8192));return O};e.addImage=function(){var P,O,J,W,re,U,Q,B,te;if(typeof arguments[1]=="number"?(O=t,J=arguments[1],W=arguments[2],re=arguments[3],U=arguments[4],Q=arguments[5],B=arguments[6],te=arguments[7]):(O=arguments[1],J=arguments[2],W=arguments[3],re=arguments[4],U=arguments[5],Q=arguments[6],B=arguments[7],te=arguments[8]),$n(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var X=P;P=X.imageData,O=X.format||O||t,J=X.x||J||0,W=X.y||W||0,re=X.w||X.width||re,U=X.h||X.height||U,Q=X.alias||Q,B=X.compression||B,te=X.rotation||X.angle||te}var ce=this.internal.getFilters();if(B===void 0&&ce.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(J)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=A.call(this,P,O,Q,B);return g.call(this,J,W,re,U,M,te),this};var A=function(P,O,J,W){var re,U,Q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var B=L(P,!1);(B!==""||(B=e.loadFile(P,!0))!==void 0)&&(P=B)}if(h(P)&&(P=m(P,O)),O=n(P,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((Q=J)==null||Q.length===0)&&(J=function(te){return typeof te=="string"||D(te)?C(te):D(te.data)?C(te.data):null}(P)),(re=p.call(this,J))||(S()&&(P instanceof Uint8Array||O==="RGBA"||(U=P,P=E(P))),re=this["process"+O.toUpperCase()](P,d.call(this),J,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in e.image_compression?te:y.NONE}(W),U)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},L=e.__addimage__.convertBase64ToBinaryString=function(P,O){O=typeof O!="boolean"||O;var J,W="";if(typeof P=="string"){var re;J=(re=k(P))!==null&&re!==void 0?re:P;try{W=Kb(J)}catch(U){if(O)throw N(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(P){var O,J,W="";if(h(P)&&(P=m(P)),typeof P=="string"&&n(P)===t&&((W=L(P,!1))===""&&(W=e.loadFile(P)||""),P=W),J=n(P),!u(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!S()||P instanceof Uint8Array||(P=E(P)),!(O=this["process"+J.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=J,O}})(en.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};en.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),C=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(C))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+s),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(en.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,C="",N=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(N++,typeof(y=y[g.charCodeAt(b)])=="number"&&(C+=String.fromCharCode(y),y=r,N=0),b===g.length-1&&(y=r,C+=g.charAt(b-(N-1)),b-=N-1,N=0)):(y=r,C+=g.charAt(b-N),b-=N,N=0);return C};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:u(g)&&o(b)&&!l(b)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},p=function(g){var b=0,y=0,C=0,N="",k="",S="",D=(g=g||"").split("\\s+"),E=[];for(b=0;b<D.length;b+=1){for(E.push(""),y=0;y<D[b].length;y+=1)N=D[b][y],k=D[b][y-1],S=D[b][y+1],o(N)?(C=m(N,k,S),E[b]+=C!==-1?String.fromCharCode(t[N.charCodeAt(0)][C]):N):E[b]+=N;E[b]=h(E[b])}return E.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var C=0;for(y=[],C=0;C<b.length;C+=1)Array.isArray(b[C])?y.push([p(b[C][0]),b[C][1],b[C][2]]):y.push([p(b[C])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(en.API),en.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(en.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,p=0,v=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,k){return N.concat(b.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var C=0;C<c.length;C++)p<(g=this.getStringUnitWidth(c[C],{font:h})*u)&&(p=g);return p!==0&&(v=c.length),{w:p/=m,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,v,g,b,y=[],C=[],N=[],k={},S={},D=[],E=[],T=(m=m||{}).autoSize||!1,A=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,P=m.margins||Object.assign({width:this.getPageWidth()},t),O=typeof m.padding=="number"?m.padding:3,J=m.headerBackgroundColor||"#c8c8c8",W=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=W,this.setFontSize(L),h==null)C=y=Object.keys(u[0]),N=y.map(function(){return"left"});else if(Array.isArray(h)&&$n(h[0])==="object")for(y=h.map(function(X){return X.name}),C=h.map(function(X){return X.prompt||X.name||""}),N=h.map(function(X){return X.align||"left"}),p=0;p<h.length;p+=1)S[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(C=y=h,N=y.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=u.map(function(X){return X[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(C[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[b],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)D.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,D)+O+O,D=[]}if(A){var re={};for(p=0;p<y.length;p+=1)re[y[p]]={},re[y[p]].text=C[p],re[y[p]].align=N[p];var U=l.call(this,re,S);E=y.map(function(X){return new i(c,d,S[X],U,re[X].text,void 0,re[X].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var Q=h.reduce(function(X,ce){return X[ce.name]=ce.align,X},{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var B=l.call(this,u[p],S);for(g=0;g<y.length;g+=1){var te=u[p][y[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:g,data:te},this),o.call(this,new i(c,d,S[y[g]],B,te,p+2,Q[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+u+u},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(en.API);var XK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},QK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j3=KK(QK),JK=[100,200,300,400,500,600,700,800,900],v8e=KK(JK);function N3(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return XK[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof j3[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function P7(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var g8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},O7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M7(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function b8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},g8e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=N3(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+M7(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=j3[c],h=u<=j3.normal?-1:1,m=P7(d,QK,u,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=XK[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=v8e[c],h=P7(d,JK,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M7(i)+"'.");return o}function R7(e){return e.trimLeft()}function y8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function j8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gN,F7,L7,u5=["times"];(function(e){var t,r,n,s,i,o,l,c,d,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=M;Object.defineProperty(this,"pdf",{get:function(){return q}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(ue){z=!!ue}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(ue){K=!!ue}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(ue){isNaN(ue)||(ee=ue)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(ue){isNaN(ue)||(ne=ue)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ue){var se;typeof ue=="number"?se=[ue,ue,ue,ue]:((se=new Array(4))[0]=ue[0],se[1]=ue.length>=2?ue[1]:se[0],se[2]=ue.length>=3?ue[2]:se[0],se[3]=ue.length>=4?ue[3]:se[1]),d.margin=se}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(ue){ae=ue}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(ue){ie=ue}});var G=[];Object.defineProperty(this,"pageBreaks",{get:function(){return G},set:function(ue){G=ue}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ue){ue instanceof u&&(d=ue)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ue){d.path=ue}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(ue){de=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var se;se=m(ue),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var se=m(ue);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var Y=null;function oe(ue,se){if(Y===null){var ye=function(Ne){var Le=[];return Object.keys(Ne).forEach(function(Je){Ne[Je].forEach(function(lt){var vt=null;switch(lt){case"bold":vt={family:Je,weight:"bold"};break;case"italic":vt={family:Je,style:"italic"};break;case"bolditalic":vt={family:Je,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:Je}}vt!==null&&(vt.ref={name:Je,style:lt},Le.push(vt))})}),Le}(ue.getFontList());Y=function(Ne){for(var Le={},Je=0;Je<Ne.length;++Je){var lt=N3(Ne[Je]),vt=lt.family,Re=lt.stretch,ht=lt.style,At=lt.weight;Le[vt]=Le[vt]||{},Le[vt][Re]=Le[vt][Re]||{},Le[vt][Re][ht]=Le[vt][Re][ht]||{},Le[vt][Re][ht][At]=lt}return Le}(ye.concat(se))}return Y}var Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(ue){Y=null,Se=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var se;if(this.ctx.font=ue,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var ye=se[1];se[2];var Ne=se[3],Le=se[4];se[5];var Je=se[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(lt==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var vt=function(he){var xe,me,De=[],Ye=he.trim();if(Ye==="")return u5;if(Ye in O7)return[O7[Ye]];for(;Ye!=="";){switch(me=null,xe=(Ye=R7(Ye)).charAt(0)){case'"':case"'":me=y8e(Ye.substring(1),xe);break;default:me=j8e(Ye)}if(me===null||(De.push(me[0]),(Ye=R7(me[1]))!==""&&Ye.charAt(0)!==","))return u5;Ye=Ye.replace(/^,/,"")}return De}(Je);if(this.fontFaces){var Re=b8e(oe(this.pdf,this.fontFaces),vt.map(function(he){return{family:he,stretch:"normal",weight:Ne,style:ye}}));this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var ht="";(Ne==="bold"||parseInt(Ne,10)>=700||ye==="bold")&&(ht="bold"),ye==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var At="",Tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ht=0;Ht<vt.length;Ht++){if(this.pdf.internal.getFont(vt[Ht],ht,{noFallback:!0,disableWarning:!0})!==void 0){At=vt[Ht];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(vt[Ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=vt[Ht],ht="bold";else if(this.pdf.internal.getFont(vt[Ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=vt[Ht],ht="normal";break}}if(At===""){for(var pe=0;pe<vt.length;pe++)if(Tt[vt[pe]]){At=Tt[vt[pe]];break}}At=At===""?"Times":At,this.pdf.setFont(At,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,q){if(isNaN(M)||isNaN(q))throw Ea.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(M,q));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(M,q)},h.prototype.closePath=function(){var M=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&$n(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){M=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,q){if(isNaN(M)||isNaN(q))throw Ea.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(M,q));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,q,z,K){if(isNaN(z)||isNaN(K)||isNaN(M)||isNaN(q))throw Ea.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(z,K)),ne=this.ctx.transform.applyToPoint(new o(M,q));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},h.prototype.bezierCurveTo=function(M,q,z,K,ee,ne){if(isNaN(ee)||isNaN(ne)||isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K))throw Ea.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new o(ee,ne)),ie=this.ctx.transform.applyToPoint(new o(M,q)),G=this.ctx.transform.applyToPoint(new o(z,K));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:G.x,y2:G.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},h.prototype.arc=function(M,q,z,K,ee,ne){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K)||isNaN(ee))throw Ea.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new o(M,q));M=ae.x,q=ae.y;var ie=this.ctx.transform.applyToPoint(new o(0,z)),G=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ie.x-G.x,2)+Math.pow(ie.y-G.y,2))}Math.abs(ee-K)>=2*Math.PI&&(K=0,ee=2*Math.PI),this.path.push({type:"arc",x:M,y:q,radius:z,startAngle:K,endAngle:ee,counterclockwise:ne})},h.prototype.arcTo=function(M,q,z,K,ee){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,q,z,K){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K))throw Ea.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,q),this.lineTo(M+z,q),this.lineTo(M+z,q+K),this.lineTo(M,q+K),this.lineTo(M,q),this.lineTo(M+z,q),this.lineTo(M,q)},h.prototype.fillRect=function(M,q,z,K){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K))throw Ea.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,q,z,K),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},h.prototype.strokeRect=function(M,q,z,K){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K))throw Ea.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,q,z,K),this.stroke())},h.prototype.clearRect=function(M,q,z,K){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K))throw Ea.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,q,z,K))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var q,z,K,ee;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))q=0,z=0,K=0,ee=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ne!==null)q=parseInt(ne[1]),z=parseInt(ne[2]),K=parseInt(ne[3]),ee=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)q=parseInt(ne[1]),z=parseInt(ne[2]),K=parseInt(ne[3]),ee=parseFloat(ne[4]);else{if(ee=1,typeof M=="string"&&M.charAt(0)!=="#"){var ae=new VK(M);M=ae.ok?ae.toHex():"#000000"}M.length===4?(q=M.substring(1,2),q+=q,z=M.substring(2,3),z+=z,K=M.substring(3,4),K+=K):(q=M.substring(1,3),z=M.substring(3,5),K=M.substring(5,7)),q=parseInt(q,16),z=parseInt(z,16),K=parseInt(K,16)}}return{r:q,g:z,b:K,a:ee,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,q,z,K){if(isNaN(q)||isNaN(z)||typeof M!="string")throw Ea.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!p.call(this)){var ee=B(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:q,y:z,scale:ne,angle:ee,align:this.textAlign,maxWidth:K})}},h.prototype.strokeText=function(M,q,z,K){if(isNaN(q)||isNaN(z)||typeof M!="string")throw Ea.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){K=isNaN(K)?void 0:K;var ee=B(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:q,y:z,scale:ne,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:K})}},h.prototype.measureText=function(M){if(typeof M!="string")throw Ea.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,z=this.pdf.internal.scaleFactor,K=q.internal.getFontSize(),ee=q.getStringUnitWidth(M)*K/q.internal.scaleFactor,ne=function(ae){var ie=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new ne({width:ee*=Math.round(96*z/72*1e4)/1e4})},h.prototype.scale=function(M,q){if(isNaN(M)||isNaN(q))throw Ea.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(M,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.rotate=function(M){if(isNaN(M))throw Ea.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.translate=function(M,q){if(isNaN(M)||isNaN(q))throw Ea.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,M,q);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.transform=function(M,q,z,K,ee,ne){if(isNaN(M)||isNaN(q)||isNaN(z)||isNaN(K)||isNaN(ee)||isNaN(ne))throw Ea.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new c(M,q,z,K,ee,ne);this.ctx.transform=this.ctx.transform.multiply(ae)},h.prototype.setTransform=function(M,q,z,K,ee,ne){M=isNaN(M)?1:M,q=isNaN(q)?0:q,z=isNaN(z)?0:z,K=isNaN(K)?1:K,ee=isNaN(ee)?0:ee,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(M,q,z,K,ee,ne)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,q,z,K,ee,ne,ae,ie,G){var de=this.pdf.getImageProperties(M),Y=1,oe=1,Se=1,ue=1;K!==void 0&&ie!==void 0&&(Se=ie/K,ue=G/ee,Y=de.width/K*ie/K,oe=de.height/ee*G/ee),ne===void 0&&(ne=q,ae=z,q=0,z=0),K!==void 0&&ie===void 0&&(ie=K,G=ee),K===void 0&&ie===void 0&&(ie=de.width,G=de.height);for(var se,ye=this.ctx.transform.decompose(),Ne=B(ye.rotate.shx),Le=new c,Je=(Le=(Le=(Le=Le.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(ne-q*Se,ae-z*ue,K*Y,ee*oe)),lt=b.call(this,Je),vt=[],Re=0;Re<lt.length;Re+=1)vt.indexOf(lt[Re])===-1&&vt.push(lt[Re]);if(N(vt),this.autoPaging)for(var ht=vt[0],At=vt[vt.length-1],Tt=ht;Tt<At+1;Tt++){this.pdf.setPage(Tt);var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=Tt===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],me=Tt===1?0:he+(Tt-2)*xe;if(this.ctx.clip_path.length!==0){var De=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(se,this.posX+this.margin[3],-me+pe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=De}var Ye=JSON.parse(JSON.stringify(Je));Ye=C([Ye],this.posX+this.margin[3],-me+pe+this.ctx.prevPageLastElemOffset)[0];var jt=(Tt>ht||Tt<At)&&g.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,xe,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,Ne),jt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Je.x,Je.y,Je.w,Je.h,null,null,Ne)};var b=function(M,q,z){var K=[];q=q||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":K.push(Math.floor((M.y+ee)/z)+1);break;case"arc":K.push(Math.floor((M.y+ee-M.radius)/z)+1),K.push(Math.floor((M.y+ee+M.radius)/z)+1);break;case"qct":var ne=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);K.push(Math.floor((ne.y+ee)/z)+1),K.push(Math.floor((ne.y+ne.h+ee)/z)+1);break;case"bct":var ae=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);K.push(Math.floor((ae.y+ee)/z)+1),K.push(Math.floor((ae.y+ae.h+ee)/z)+1);break;case"rect":K.push(Math.floor((M.y+ee)/z)+1),K.push(Math.floor((M.y+M.h+ee)/z)+1)}for(var ie=0;ie<K.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<K[ie];)y.call(this);return K},y=function(){var M=this.fillStyle,q=this.strokeStyle,z=this.font,K=this.lineCap,ee=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=q,this.font=z,this.lineCap=K,this.lineWidth=ee,this.lineJoin=ne},C=function(M,q,z){for(var K=0;K<M.length;K++)switch(M[K].type){case"bct":M[K].x2+=q,M[K].y2+=z;case"qct":M[K].x1+=q,M[K].y1+=z;case"mt":case"lt":case"arc":default:M[K].x+=q,M[K].y+=z}return M},N=function(M){return M.sort(function(q,z){return q-z})},k=function(M,q){for(var z,K,ee=this.fillStyle,ne=this.strokeStyle,ae=this.lineCap,ie=this.lineWidth,G=Math.abs(ie*this.ctx.transform.scaleX),de=this.lineJoin,Y=JSON.parse(JSON.stringify(this.path)),oe=JSON.parse(JSON.stringify(this.path)),Se=[],ue=0;ue<oe.length;ue++)if(oe[ue].x!==void 0)for(var se=b.call(this,oe[ue]),ye=0;ye<se.length;ye+=1)Se.indexOf(se[ye])===-1&&Se.push(se[ye]);for(var Ne=0;Ne<Se.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<Se[Ne];)y.call(this);if(N(Se),this.autoPaging)for(var Le=Se[0],Je=Se[Se.length-1],lt=Le;lt<Je+1;lt++){this.pdf.setPage(lt),this.fillStyle=ee,this.strokeStyle=ne,this.lineCap=ae,this.lineWidth=G,this.lineJoin=de;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=lt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Tt=lt===1?0:ht+(lt-2)*At;if(this.ctx.clip_path.length!==0){var Ht=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(z,this.posX+this.margin[3],-Tt+Re+this.ctx.prevPageLastElemOffset),S.call(this,M,!0),this.path=Ht}if(K=JSON.parse(JSON.stringify(Y)),this.path=C(K,this.posX+this.margin[3],-Tt+Re+this.ctx.prevPageLastElemOffset),q===!1||lt===0){var pe=(lt>Le||lt<Je)&&g.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,At,null).clip().discardPath()),S.call(this,M,q),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=G,S.call(this,M,q),this.lineWidth=ie;this.path=Y},S=function(M,q){if((M!=="stroke"||q||!v.call(this))&&(M==="stroke"||q||!p.call(this))){for(var z,K,ee=[],ne=this.path,ae=0;ae<ne.length;ae++){var ie=ne[ae];switch(ie.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:ie,deltas:[],abs:[]});break;case"lt":var G=ee.length;if(ne[ae-1]&&!isNaN(ne[ae-1].x)&&(z=[ie.x-ne[ae-1].x,ie.y-ne[ae-1].y],G>0)){for(;G>=0;G--)if(ee[G-1].close!==!0&&ee[G-1].begin!==!0){ee[G-1].deltas.push(z),ee[G-1].abs.push(ie);break}}break;case"bct":z=[ie.x1-ne[ae-1].x,ie.y1-ne[ae-1].y,ie.x2-ne[ae-1].x,ie.y2-ne[ae-1].y,ie.x-ne[ae-1].x,ie.y-ne[ae-1].y],ee[ee.length-1].deltas.push(z);break;case"qct":var de=ne[ae-1].x+2/3*(ie.x1-ne[ae-1].x),Y=ne[ae-1].y+2/3*(ie.y1-ne[ae-1].y),oe=ie.x+2/3*(ie.x1-ie.x),Se=ie.y+2/3*(ie.y1-ie.y),ue=ie.x,se=ie.y;z=[de-ne[ae-1].x,Y-ne[ae-1].y,oe-ne[ae-1].x,Se-ne[ae-1].y,ue-ne[ae-1].x,se-ne[ae-1].y],ee[ee.length-1].deltas.push(z);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(ie)}}K=q?null:M==="stroke"?"stroke":"fill";for(var ye=!1,Ne=0;Ne<ee.length;Ne++)if(ee[Ne].arc)for(var Le=ee[Ne].abs,Je=0;Je<Le.length;Je++){var lt=Le[Je];lt.type==="arc"?T.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,q,!ye):J.call(this,lt.x,lt.y),ye=!0}else if(ee[Ne].close===!0)this.pdf.internal.out("h"),ye=!1;else if(ee[Ne].begin!==!0){var vt=ee[Ne].start.x,Re=ee[Ne].start.y;W.call(this,ee[Ne].deltas,vt,Re),ye=!0}K&&A.call(this,K),q&&L.call(this)}},D=function(M){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-z;case"top":return M+q-z;case"hanging":return M+q-2*z;case"middle":return M+q/2-z;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(q,z){this.colorStops.push([q,z])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(M,q,z,K,ee,ne,ae,ie,G){for(var de=U.call(this,z,K,ee,ne),Y=0;Y<de.length;Y++){var oe=de[Y];Y===0&&(G?P.call(this,oe.x1+M,oe.y1+q):J.call(this,oe.x1+M,oe.y1+q)),re.call(this,M,q,oe.x2,oe.y2,oe.x3,oe.y3,oe.x4,oe.y4)}ie?L.call(this):A.call(this,ae)},A=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,q){this.pdf.internal.out(r(M)+" "+n(q)+" m")},O=function(M){var q;switch(M.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var z=this.pdf.getTextDimensions(M.text),K=D.call(this,M.y),ee=E.call(this,K)-z.h,ne=this.ctx.transform.applyToPoint(new o(M.x,K)),ae=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var G,de,Y,oe=this.ctx.transform.applyToRectangle(new l(M.x,K,z.w,z.h)),Se=ie.applyToRectangle(new l(M.x,ee,z.w,z.h)),ue=b.call(this,Se),se=[],ye=0;ye<ue.length;ye+=1)se.indexOf(ue[ye])===-1&&se.push(ue[ye]);if(N(se),this.autoPaging)for(var Ne=se[0],Le=se[se.length-1],Je=Ne;Je<Le+1;Je++){this.pdf.setPage(Je);var lt=Je===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],ht=Re-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Tt=At-this.margin[3],Ht=Je===1?0:vt+(Je-2)*ht;if(this.ctx.clip_path.length!==0){var pe=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(G,this.posX+this.margin[3],-1*Ht+lt),S.call(this,"fill",!0),this.path=pe}var he=C([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Ht+lt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),Y=this.lineWidth,this.lineWidth=Y*M.scale);var xe=this.autoPaging!=="text";if(xe||he.y+he.h<=Re){if(xe||he.y>=lt&&he.x<=At){var me=xe?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||At-he.x)[0],De=C([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-Ht+lt+this.ctx.prevPageLastElemOffset)[0],Ye=xe&&(Je>Ne||Je<Le)&&g.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,ht,null).clip().discardPath()),this.pdf.text(me,De.x,De.y,{angle:M.angle,align:q,renderingMode:M.renderingMode}),Ye&&this.pdf.restoreGraphicsState()}}else he.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-he.y);M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Y)}else M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),Y=this.lineWidth,this.lineWidth=Y*M.scale),this.pdf.text(M.text,ne.x+this.posX,ne.y+this.posY,{angle:M.angle,align:q,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Y)},J=function(M,q,z,K){z=z||0,K=K||0,this.pdf.internal.out(r(M+z)+" "+n(q+K)+" l")},W=function(M,q,z){return this.pdf.lines(M,q,z,null,null)},re=function(M,q,z,K,ee,ne,ae,ie){this.pdf.internal.out([t(s(z+M)),t(i(K+q)),t(s(ee+M)),t(i(ne+q)),t(s(ae+M)),t(i(ie+q)),"c"].join(" "))},U=function(M,q,z,K){for(var ee=2*Math.PI,ne=Math.PI/2;q>z;)q-=ee;var ae=Math.abs(z-q);ae<ee&&K&&(ae=ee-ae);for(var ie=[],G=K?-1:1,de=q;ae>1e-5;){var Y=de+G*Math.min(ae,ne);ie.push(Q.call(this,M,de,Y)),ae-=Math.abs(Y-de),de=Y}return ie},Q=function(M,q,z){var K=(z-q)/2,ee=M*Math.cos(K),ne=M*Math.sin(K),ae=ee,ie=-ne,G=ae*ae+ie*ie,de=G+ae*ee+ie*ne,Y=4/3*(Math.sqrt(2*G*de)-de)/(ae*ne-ie*ee),oe=ae-Y*ie,Se=ie+Y*ae,ue=oe,se=-Se,ye=K+q,Ne=Math.cos(ye),Le=Math.sin(ye);return{x1:M*Math.cos(q),y1:M*Math.sin(q),x2:oe*Ne-Se*Le,y2:oe*Le+Se*Ne,x3:ue*Ne-se*Le,y3:ue*Le+se*Ne,x4:M*Math.cos(z),y4:M*Math.sin(z)}},B=function(M){return 180*M/Math.PI},te=function(M,q,z,K,ee,ne){var ae=M+.5*(z-M),ie=q+.5*(K-q),G=ee+.5*(z-ee),de=ne+.5*(K-ne),Y=Math.min(M,ee,ae,G),oe=Math.max(M,ee,ae,G),Se=Math.min(q,ne,ie,de),ue=Math.max(q,ne,ie,de);return new l(Y,Se,oe-Y,ue-Se)},X=function(M,q,z,K,ee,ne,ae,ie){var G,de,Y,oe,Se,ue,se,ye,Ne,Le,Je,lt,vt,Re,ht=z-M,At=K-q,Tt=ee-z,Ht=ne-K,pe=ae-ee,he=ie-ne;for(de=0;de<41;de++)Ne=(se=(Y=M+(G=de/40)*ht)+G*((Se=z+G*Tt)-Y))+G*(Se+G*(ee+G*pe-Se)-se),Le=(ye=(oe=q+G*At)+G*((ue=K+G*Ht)-oe))+G*(ue+G*(ne+G*he-ue)-ye),de==0?(Je=Ne,lt=Le,vt=Ne,Re=Le):(Je=Math.min(Je,Ne),lt=Math.min(lt,Le),vt=Math.max(vt,Ne),Re=Math.max(Re,Le));return new l(Math.round(Je),Math.round(lt),Math.round(vt-Je),Math.round(Re-lt))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,q,z=(M=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:q}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(en.API),function(e){var t=function(i){var o,l,c,d,u,h,m,p,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(v=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,l.push(h+33,m+33,p+33,v+33,g+33)):l.push(122);return function(b,y){for(var C=y;C>0;C--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,m="length",p=255,v="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[m]%5||5))[m];u>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(y,C){for(var N=C;N>0;N--)y.pop()}(c,o[m]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=x3(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(en.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,m=0,p=function(v){var g=v.length,b=[],y=String.fromCharCode;for(m=0;m<g;m+=1)b.push(y(255&v.charCodeAt(m)));return b.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(s,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(en.API),function(e){function t(){return(nn.html2canvas?Promise.resolve(nn.html2canvas):u3(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(nn.DOMPurify?Promise.resolve(nn.DOMPurify):u3(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=$n(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(c(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var p=d[m],v=p.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||en.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,en.getPageSize=function(o,l,c){if($n(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,v=0,g=0;if(m.hasOwnProperty(h))v=m[h][1]/u,g=m[h][0]/u;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(p=g,g=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(p=g,g=v,v=p)}return{width:g,height:v,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(N3):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(en.API),en.API.addJS=function(e){return L7=e,this.internal.events.subscribe("postPutResources",function(){gN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gN!==void 0&&F7!==void 0&&this.internal.out("/Names <</JavaScript "+gN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(en.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,g={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=p,t.indexOf(h.charCodeAt(b+1))!==-1){m=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:m,numcomponents:h.charCodeAt(b+9)};break}p=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:s}}return u}}(en.API);var $0,bN,B7,U7,$7,N8e=function(){var e,t,r;function n(i){var o,l,c,d,u,h,m,p,v,g,b,y,C,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var k,S;for(S=[],k=0;k<4;++k)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(C=0;0<=g?C<g:C>g;0<=g?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(b=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,b.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,m,p,v){var g,b,y,C,N,k,S,D,E,T,A,L,P,O,J,W,re,U,Q,B,te,X=Math.ceil((d.width-h)/p),ce=Math.ceil((d.height-m)/v),M=d.width==X&&d.height==ce;for(O=o*X,L=M?l:new Uint8Array(O*ce),k=i.length,P=0,b=0;P<ce&&c<k;){switch(i[c++]){case 0:for(C=re=0;re<O;C=re+=1)L[b++]=i[c++];break;case 1:for(C=U=0;U<O;C=U+=1)g=i[c++],N=C<o?0:L[b-o],L[b++]=(g+N)%256;break;case 2:for(C=Q=0;Q<O;C=Q+=1)g=i[c++],y=(C-C%o)/o,J=P&&L[(P-1)*O+y*o+C%o],L[b++]=(J+g)%256;break;case 3:for(C=B=0;B<O;C=B+=1)g=i[c++],y=(C-C%o)/o,N=C<o?0:L[b-o],J=P&&L[(P-1)*O+y*o+C%o],L[b++]=(g+Math.floor((N+J)/2))%256;break;case 4:for(C=te=0;te<O;C=te+=1)g=i[c++],y=(C-C%o)/o,N=C<o?0:L[b-o],P===0?J=W=0:(J=L[(P-1)*O+y*o+C%o],W=y&&L[(P-1)*O+(y-1)*o+C%o]),S=N+J-W,D=Math.abs(S-N),T=Math.abs(S-J),A=Math.abs(S-W),E=D<=T&&D<=A?N:T<=A?J:W,L[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var q=((m+P*v)*d.width+h)*o,z=P*O;for(C=0;C<X;C+=1){for(var K=0;K<o;K+=1)l[q++]=L[z++];q+=(p-1)*o}}P++}}return i=e8e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,m,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,m=l.length;h<m;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,m,p,v,g,b,y;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,h=g||o,u=m=0,c===1)for(;u<v;)p=g?4*o[u/4]:m,b=h[p++],d[u++]=b,d[u++]=b,d[u++]=b,d[u++]=l?h[p++]:255,m=p;else for(;u<v;)p=g?4*o[u/4]:m,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(nn)==="[object Window]"){try{t=nn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,m,p;if(this.animation){for(p=[],l=u=0,h=(m=this.animation.frames).length;u<h;l=++u)o=m[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,m=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,v;if(p=l++%d,v=c[p],m.renderFrame(i,p),d>1&&l/d<u)return m.animation._timeout=setTimeout(o,v.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function w8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,m=null,p=0,v=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],(1&g)==0&&(m=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,k=e[t++],S=k>>6&1,D=1<<(7&k)+1,E=l,T=c,A=!1;k>>7&&(A=!0,E=t,T=D,t+=3*D);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:b,y,width:C,height:N,has_local_palette:A,palette_offset:E,palette_size:T,data_offset:L,data_length:t-L,transparent_index:m,interlaced:!!S,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,J){var W=this.frameInfo(O),re=W.width*W.height,U=new Uint8Array(re);q7(e,W.data_offset,U,re);var Q=W.palette_offset,B=W.transparent_index;B===null&&(B=256);var te=W.width,X=r-te,ce=te,M=4*(W.y*r+W.x),q=4*((W.y+W.height)*r+W.x),z=M,K=4*X;W.interlaced===!0&&(K+=4*r*7);for(var ee=8,ne=0,ae=U.length;ne<ae;++ne){var ie=U[ne];if(ce===0&&(ce=te,(z+=K)>=q&&(K=4*X+4*r*(ee-1),z=M+(te+X)*(ee<<1),ee>>=1)),ie===B)z+=4;else{var G=e[Q+3*ie],de=e[Q+3*ie+1],Y=e[Q+3*ie+2];J[z++]=Y,J[z++]=de,J[z++]=G,J[z++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(O,J){var W=this.frameInfo(O),re=W.width*W.height,U=new Uint8Array(re);q7(e,W.data_offset,U,re);var Q=W.palette_offset,B=W.transparent_index;B===null&&(B=256);var te=W.width,X=r-te,ce=te,M=4*(W.y*r+W.x),q=4*((W.y+W.height)*r+W.x),z=M,K=4*X;W.interlaced===!0&&(K+=4*r*7);for(var ee=8,ne=0,ae=U.length;ne<ae;++ne){var ie=U[ne];if(ce===0&&(ce=te,(z+=K)>=q&&(K=4*X+4*r*(ee-1),z=M+(te+X)*(ee<<1),ee>>=1)),ie===B)z+=4;else{var G=e[Q+3*ie],de=e[Q+3*ie+1],Y=e[Q+3*ie+2];J[z++]=G,J[z++]=de,J[z++]=Y,J[z++]=255}--ce}}}function q7(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,h=0,m=0,p=e[t++],v=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var b=h&d;if(h>>=c,u-=c,b!==i){if(b===o)break;for(var y=b<l?b:g,C=0,N=y;N>i;)N=v[N]>>8,++C;var k=N;if(m+C+(y!==b?1:0)>n)return void Ea.log("Warning, gif stream longer than expected.");r[m++]=k;var S=m+=C;for(y!==b&&(r[m++]=k),N=y;C--;)N=v[N],r[--S]=255&N,N>>=8;g!==null&&l<4096&&(v[l++]=g<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=s+1))-1,g=null}return m!==n&&Ea.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function h5(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),g=[],b=0,y=7,C=new Array(64),N=new Array(64),k=new Array(64),S=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(M,q){for(var z=0,K=0,ee=new Array,ne=1;ne<=16;ne++){for(var ae=1;ae<=M[ne];ae++)ee[q[K]]=[],ee[q[K]][0]=z,ee[q[K]][1]=ne,K++,z++;z*=2}return ee}function Q(M){for(var q=M[0],z=M[1]-1;z>=0;)q&1<<z&&(b|=1<<y),z--,--y<0&&(b==255?(B(255),B(0)):B(b),y=7,b=0)}function B(M){g.push(M)}function te(M){B(M>>8&255),B(255&M)}function X(M,q,z,K,ee){for(var ne,ae=ee[0],ie=ee[240],G=function(Le,Je){var lt,vt,Re,ht,At,Tt,Ht,pe,he,xe,me=0;for(he=0;he<8;++he){lt=Le[me],vt=Le[me+1],Re=Le[me+2],ht=Le[me+3],At=Le[me+4],Tt=Le[me+5],Ht=Le[me+6];var De=lt+(pe=Le[me+7]),Ye=lt-pe,jt=vt+Ht,Qe=vt-Ht,Xe=Re+Tt,Be=Re-Tt,He=ht+At,ft=ht-At,Ae=De+He,Ke=De-He,Ge=jt+Xe,ct=jt-Xe;Le[me]=Ae+Ge,Le[me+4]=Ae-Ge;var Mt=.707106781*(ct+Ke);Le[me+2]=Ke+Mt,Le[me+6]=Ke-Mt;var Ie=.382683433*((Ae=ft+Be)-(ct=Qe+Ye)),ke=.5411961*Ae+Ie,it=1.306562965*ct+Ie,bt=.707106781*(Ge=Be+Qe),Kt=Ye+bt,Rt=Ye-bt;Le[me+5]=Rt+ke,Le[me+3]=Rt-ke,Le[me+1]=Kt+it,Le[me+7]=Kt-it,me+=8}for(me=0,he=0;he<8;++he){lt=Le[me],vt=Le[me+8],Re=Le[me+16],ht=Le[me+24],At=Le[me+32],Tt=Le[me+40],Ht=Le[me+48];var tr=lt+(pe=Le[me+56]),mr=lt-pe,jr=vt+Ht,fn=vt-Ht,hr=Re+Tt,ge=Re-Tt,Ue=ht+At,Pe=ht-At,Ee=tr+Ue,Fe=tr-Ue,Ve=jr+hr,xt=jr-hr;Le[me]=Ee+Ve,Le[me+32]=Ee-Ve;var wt=.707106781*(xt+Fe);Le[me+16]=Fe+wt,Le[me+48]=Fe-wt;var at=.382683433*((Ee=Pe+ge)-(xt=fn+mr)),Nt=.5411961*Ee+at,St=1.306562965*xt+at,Xt=.707106781*(Ve=ge+fn),ar=mr+Xt,pr=mr-Xt;Le[me+40]=pr+Nt,Le[me+24]=pr-Nt,Le[me+8]=ar+St,Le[me+56]=ar-St,me++}for(he=0;he<64;++he)xe=Le[he]*Je[he],p[he]=xe>0?xe+.5|0:xe-.5|0;return p}(M,q),de=0;de<64;++de)v[E[de]]=G[de];var Y=v[0]-z;z=v[0],Y==0?Q(K[0]):(Q(K[m[ne=32767+Y]]),Q(h[ne]));for(var oe=63;oe>0&&v[oe]==0;)oe--;if(oe==0)return Q(ae),z;for(var Se,ue=1;ue<=oe;){for(var se=ue;v[ue]==0&&ue<=oe;)++ue;var ye=ue-se;if(ye>=16){Se=ye>>4;for(var Ne=1;Ne<=Se;++Ne)Q(ie);ye&=15}ne=32767+v[ue],Q(ee[(ye<<4)+m[ne]]),Q(h[ne]),ue++}return oe!=63&&Q(ae),z}function ce(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(q){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var ee=o((z[K]*q+50)/100);ee=Math.min(Math.max(ee,1),255),l[E[K]]=ee}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var ie=o((ne[ae]*q+50)/100);ie=Math.min(Math.max(ie,1),255),c[E[ae]]=ie}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,Y=0;Y<8;Y++)for(var oe=0;oe<8;oe++)d[de]=1/(l[E[de]]*G[Y]*G[oe]*8),u[de]=1/(c[E[de]]*G[Y]*G[oe]*8),de++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,q){q&&ce(q),g=new Array,b=0,y=7,te(65496),te(65504),te(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),te(1),te(1),B(0),B(0),function(){te(65499),te(132),B(0);for(var vt=0;vt<64;vt++)B(l[vt]);B(1);for(var Re=0;Re<64;Re++)B(c[Re])}(),function(vt,Re){te(65472),te(17),B(8),te(Re),te(vt),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(M.width,M.height),function(){te(65476),te(418),B(0);for(var vt=0;vt<16;vt++)B(T[vt+1]);for(var Re=0;Re<=11;Re++)B(A[Re]);B(16);for(var ht=0;ht<16;ht++)B(L[ht+1]);for(var At=0;At<=161;At++)B(P[At]);B(1);for(var Tt=0;Tt<16;Tt++)B(O[Tt+1]);for(var Ht=0;Ht<=11;Ht++)B(J[Ht]);B(17);for(var pe=0;pe<16;pe++)B(W[pe+1]);for(var he=0;he<=161;he++)B(re[he])}(),te(65498),te(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var z=0,K=0,ee=0;b=0,y=7,this.encode.displayName="_encode_";for(var ne,ae,ie,G,de,Y,oe,Se,ue,se=M.data,ye=M.width,Ne=M.height,Le=4*ye,Je=0;Je<Ne;){for(ne=0;ne<Le;){for(de=Le*Je+ne,oe=-1,Se=0,ue=0;ue<64;ue++)Y=de+(Se=ue>>3)*Le+(oe=4*(7&ue)),Je+Se>=Ne&&(Y-=Le*(Je+1+Se-Ne)),ne+oe>=Le&&(Y-=ne+oe-Le+4),ae=se[Y++],ie=se[Y++],G=se[Y++],C[ue]=(D[ae]+D[ie+256>>0]+D[G+512>>0]>>16)-128,N[ue]=(D[ae+768>>0]+D[ie+1024>>0]+D[G+1280>>0]>>16)-128,k[ue]=(D[ae+1280>>0]+D[ie+1536>>0]+D[G+1792>>0]>>16)-128;z=X(C,d,z,t,n),K=X(N,u,K,r,s),ee=X(k,u,ee,r,s),ne+=32}Je+=8}if(y>=0){var lt=[];lt[1]=y+1,lt[0]=(1<<y+1)-1,Q(lt)}return te(65497),new Uint8Array(g)},e=e||50,function(){for(var M=String.fromCharCode,q=0;q<256;q++)S[q]=M(q)}(),t=U(T,A),r=U(O,J),n=U(L,P),s=U(W,re),function(){for(var M=1,q=2,z=1;z<=15;z++){for(var K=M;K<q;K++)m[32767+K]=z,h[32767+K]=[],h[32767+K][1]=z,h[32767+K][0]=K;for(var ee=-(q-1);ee<=-M;ee++)m[32767+ee]=z,h[32767+ee]=[],h[32767+ee][1]=z,h[32767+ee][0]=q-1+ee;M<<=1,q<<=1}}(),function(){for(var M=0;M<256;M++)D[M]=19595*M,D[M+256>>0]=38470*M,D[M+512>>0]=7471*M+32768,D[M+768>>0]=-11059*M,D[M+1024>>0]=-21709*M,D[M+1280>>0]=32768*M+8421375,D[M+1536>>0]=-27439*M,D[M+1792>>0]=-5329*M}(),ce(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function V7(e){function t(T){if(!T)throw Error("assert :P")}function r(T,A,L){for(var P=0;4>P;P++)if(T[A+P]!=L.charCodeAt(P))return!0;return!1}function n(T,A,L,P,O){for(var J=0;J<O;J++)T[A+J]=L[P+J]}function s(T,A,L,P){for(var O=0;O<P;O++)T[A+O]=L}function i(T){return new Int32Array(T)}function o(T,A){for(var L=[],P=0;P<T;P++)L.push(new A);return L}function l(T,A){var L=[];return function P(O,J,W){for(var re=W[J],U=0;U<re&&(O.push(W.length>J+1?[]:new A),!(W.length<J+1));U++)P(O[U],J+1,W)}(L,0,T),L}var c=function(){var T=this;function A(I,F){for(var Z=1<<F-1>>>0;I&Z;)Z>>>=1;return Z?(I&Z-1)+Z:I}function L(I,F,Z,le,ve){t(!(le%Z));do I[F+(le-=Z)]=ve;while(0<le)}function P(I,F,Z,le,ve){if(t(2328>=ve),512>=ve)var je=i(512);else if((je=i(ve))==null)return 0;return function(we,Ce,Te,$e,nt,_t){var Ct,mt,Qt=Ce,Ot=1<<Te,st=i(16),dt=i(16);for(t(nt!=0),t($e!=null),t(we!=null),t(0<Te),mt=0;mt<nt;++mt){if(15<$e[mt])return 0;++st[$e[mt]]}if(st[0]==nt)return 0;for(dt[1]=0,Ct=1;15>Ct;++Ct){if(st[Ct]>1<<Ct)return 0;dt[Ct+1]=dt[Ct]+st[Ct]}for(mt=0;mt<nt;++mt)Ct=$e[mt],0<$e[mt]&&(_t[dt[Ct]++]=mt);if(dt[15]==1)return($e=new O).g=0,$e.value=_t[0],L(we,Qt,1,Ot,$e),Ot;var qt,Jt=-1,Wt=Ot-1,wr=0,gr=1,qr=1,br=1<<Te;for(mt=0,Ct=1,nt=2;Ct<=Te;++Ct,nt<<=1){if(gr+=qr<<=1,0>(qr-=st[Ct]))return 0;for(;0<st[Ct];--st[Ct])($e=new O).g=Ct,$e.value=_t[mt++],L(we,Qt+wr,nt,br,$e),wr=A(wr,Ct)}for(Ct=Te+1,nt=2;15>=Ct;++Ct,nt<<=1){if(gr+=qr<<=1,0>(qr-=st[Ct]))return 0;for(;0<st[Ct];--st[Ct]){if($e=new O,(wr&Wt)!=Jt){for(Qt+=br,qt=1<<(Jt=Ct)-Te;15>Jt&&!(0>=(qt-=st[Jt]));)++Jt,qt<<=1;Ot+=br=1<<(qt=Jt-Te),we[Ce+(Jt=wr&Wt)].g=qt+Te,we[Ce+Jt].value=Qt-Ce-Jt}$e.g=Ct-Te,$e.value=_t[mt++],L(we,Qt+(wr>>Te),nt,br,$e),wr=A(wr,Ct)}}return gr!=2*dt[15]-1?0:Ot}(I,F,Z,le,ve,je)}function O(){this.value=this.g=0}function J(){this.value=this.g=0}function W(){this.G=o(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ds,J)}function re(I,F,Z,le){t(I!=null),t(F!=null),t(2147483648>le),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=F,I.pa=Z,I.Jd=F,I.Yc=Z+le,I.Zc=4<=le?Z+le-4+1:Z,ne(I)}function U(I,F){for(var Z=0;0<F--;)Z|=ie(I,128)<<F;return Z}function Q(I,F){var Z=U(I,F);return ae(I)?-Z:Z}function B(I,F,Z,le){var ve,je=0;for(t(I!=null),t(F!=null),t(4294967288>le),I.Sb=le,I.Ra=0,I.u=0,I.h=0,4<le&&(le=4),ve=0;ve<le;++ve)je+=F[Z+ve]<<8*ve;I.Ra=je,I.bb=le,I.oa=F,I.pa=Z}function te(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<hh-8>>>0,++I.bb,I.u-=8;z(I)&&(I.h=1,I.u=0)}function X(I,F){if(t(0<=F),!I.h&&F<=uh){var Z=q(I)&Yd[F];return I.u+=F,te(I),Z}return I.h=1,I.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(I){return I.Ra>>>(I.u&hh-1)>>>0}function z(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>hh}function K(I,F){I.u=F,I.h=z(I)}function ee(I){I.u>=Bf&&(t(I.u>=Bf),te(I))}function ne(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ae(I){return U(I,1)}function ie(I,F){var Z=I.Ca;0>I.b&&ne(I);var le=I.b,ve=Z*F>>>8,je=(I.I>>>le>ve)+0;for(je?(Z-=ve,I.I-=ve+1<<le>>>0):Z=ve+1,le=Z,ve=0;256<=le;)ve+=8,le>>=8;return le=7^ve+to[le],I.b-=le,I.Ca=(Z<<le)-1,je}function G(I,F,Z){I[F+0]=Z>>24&255,I[F+1]=Z>>16&255,I[F+2]=Z>>8&255,I[F+3]=Z>>0&255}function de(I,F){return I[F+0]<<0|I[F+1]<<8}function Y(I,F){return de(I,F)|I[F+2]<<16}function oe(I,F){return de(I,F)|de(I,F+2)<<16}function Se(I,F){var Z=1<<F;return t(I!=null),t(0<F),I.X=i(Z),I.X==null?0:(I.Mb=32-F,I.Xa=F,1)}function ue(I,F){t(I!=null),t(F!=null),t(I.Xa==F.Xa),n(F.X,0,I.X,0,1<<F.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function ye(I,F,Z,le){t(Z!=null),t(le!=null);var ve=Z[0],je=le[0];return ve==0&&(ve=(I*je+F/2)/F),je==0&&(je=(F*ve+I/2)/I),0>=ve||0>=je?0:(Z[0]=ve,le[0]=je,1)}function Ne(I,F){return I+(1<<F)-1>>>F}function Le(I,F){return((4278255360&I)+(4278255360&F)>>>0&4278255360)+((16711935&I)+(16711935&F)>>>0&16711935)>>>0}function Je(I,F){T[F]=function(Z,le,ve,je,we,Ce,Te){var $e;for($e=0;$e<we;++$e){var nt=T[I](Ce[Te+$e-1],ve,je+$e);Ce[Te+$e]=Le(Z[le+$e],nt)}}}function lt(){this.ud=this.hd=this.jd=0}function vt(I,F){return((4278124286&(I^F))>>>1)+(I&F)>>>0}function Re(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function ht(I,F){return Re(I+(I-F+.5>>1))}function At(I,F,Z){return Math.abs(F-Z)-Math.abs(I-Z)}function Tt(I,F,Z,le,ve,je,we){for(le=je[we-1],Z=0;Z<ve;++Z)je[we+Z]=le=Le(I[F+Z],le)}function Ht(I,F,Z,le,ve){var je;for(je=0;je<Z;++je){var we=I[F+je],Ce=we>>8&255,Te=16711935&(Te=(Te=16711935&we)+((Ce<<16)+Ce));le[ve+je]=(4278255360&we)+Te>>>0}}function pe(I,F){F.jd=I>>0&255,F.hd=I>>8&255,F.ud=I>>16&255}function he(I,F,Z,le,ve,je){var we;for(we=0;we<le;++we){var Ce=F[Z+we],Te=Ce>>>8,$e=Ce,nt=255&(nt=(nt=Ce>>>16)+((I.jd<<24>>24)*(Te<<24>>24)>>>5));$e=255&($e=($e=$e+((I.hd<<24>>24)*(Te<<24>>24)>>>5))+((I.ud<<24>>24)*(nt<<24>>24)>>>5)),ve[je+we]=(4278255360&Ce)+(nt<<16)+$e}}function xe(I,F,Z,le,ve){T[F]=function(je,we,Ce,Te,$e,nt,_t,Ct,mt){for(Te=_t;Te<Ct;++Te)for(_t=0;_t<mt;++_t)$e[nt++]=ve(Ce[le(je[we++])])},T[I]=function(je,we,Ce,Te,$e,nt,_t){var Ct=8>>je.b,mt=je.Ea,Qt=je.K[0],Ot=je.w;if(8>Ct)for(je=(1<<je.b)-1,Ot=(1<<Ct)-1;we<Ce;++we){var st,dt=0;for(st=0;st<mt;++st)st&je||(dt=le(Te[$e++])),nt[_t++]=ve(Qt[dt&Ot]),dt>>=Ct}else T["VP8LMapColor"+Z](Te,$e,Qt,Ot,nt,_t,we,Ce,mt)}}function me(I,F,Z,le,ve){for(Z=F+Z;F<Z;){var je=I[F++];le[ve++]=je>>16&255,le[ve++]=je>>8&255,le[ve++]=je>>0&255}}function De(I,F,Z,le,ve){for(Z=F+Z;F<Z;){var je=I[F++];le[ve++]=je>>16&255,le[ve++]=je>>8&255,le[ve++]=je>>0&255,le[ve++]=je>>24&255}}function Ye(I,F,Z,le,ve){for(Z=F+Z;F<Z;){var je=(we=I[F++])>>16&240|we>>12&15,we=we>>0&240|we>>28&15;le[ve++]=je,le[ve++]=we}}function jt(I,F,Z,le,ve){for(Z=F+Z;F<Z;){var je=(we=I[F++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;le[ve++]=je,le[ve++]=we}}function Qe(I,F,Z,le,ve){for(Z=F+Z;F<Z;){var je=I[F++];le[ve++]=je>>0&255,le[ve++]=je>>8&255,le[ve++]=je>>16&255}}function Xe(I,F,Z,le,ve,je){if(je==0)for(Z=F+Z;F<Z;)G(le,((je=I[F++])[0]>>24|je[1]>>8&65280|je[2]<<8&16711680|je[3]<<24)>>>0),ve+=32;else n(le,ve,I,F,Z)}function Be(I,F){T[F][0]=T[I+"0"],T[F][1]=T[I+"1"],T[F][2]=T[I+"2"],T[F][3]=T[I+"3"],T[F][4]=T[I+"4"],T[F][5]=T[I+"5"],T[F][6]=T[I+"6"],T[F][7]=T[I+"7"],T[F][8]=T[I+"8"],T[F][9]=T[I+"9"],T[F][10]=T[I+"10"],T[F][11]=T[I+"11"],T[F][12]=T[I+"12"],T[F][13]=T[I+"13"],T[F][14]=T[I+"0"],T[F][15]=T[I+"0"]}function He(I){return I==fp||I==au||I==cd||I==Vf}function ft(){this.eb=[],this.size=this.A=this.fb=0}function Ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ke(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ft,this.f.kb=new Ae,this.sd=null}function Ge(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mt(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Ie(I,F){var Z=I.T,le=F.ba.f.RGBA,ve=le.eb,je=le.fb+I.ka*le.A,we=Ys[F.ba.S],Ce=I.y,Te=I.O,$e=I.f,nt=I.N,_t=I.ea,Ct=I.W,mt=F.cc,Qt=F.dc,Ot=F.Mc,st=F.Nc,dt=I.ka,qt=I.ka+I.T,Jt=I.U,Wt=Jt+1>>1;for(dt==0?we(Ce,Te,null,null,$e,nt,_t,Ct,$e,nt,_t,Ct,ve,je,null,null,Jt):(we(F.ec,F.fc,Ce,Te,mt,Qt,Ot,st,$e,nt,_t,Ct,ve,je-le.A,ve,je,Jt),++Z);dt+2<qt;dt+=2)mt=$e,Qt=nt,Ot=_t,st=Ct,nt+=I.Rc,Ct+=I.Rc,je+=2*le.A,we(Ce,(Te+=2*I.fa)-I.fa,Ce,Te,mt,Qt,Ot,st,$e,nt,_t,Ct,ve,je-le.A,ve,je,Jt);return Te+=I.fa,I.j+qt<I.o?(n(F.ec,F.fc,Ce,Te,Jt),n(F.cc,F.dc,$e,nt,Wt),n(F.Mc,F.Nc,_t,Ct,Wt),Z--):1&qt||we(Ce,Te,null,null,$e,nt,_t,Ct,$e,nt,_t,Ct,ve,je+le.A,null,null,Jt),Z}function ke(I,F,Z){var le=I.F,ve=[I.J];if(le!=null){var je=I.U,we=F.ba.S,Ce=we==vh||we==cd;F=F.ba.f.RGBA;var Te=[0],$e=I.ka;Te[0]=I.T,I.Kb&&($e==0?--Te[0]:(--$e,ve[0]-=I.width),I.j+I.ka+I.T==I.o&&(Te[0]=I.o-I.j-$e));var nt=F.eb;$e=F.fb+$e*F.A,I=_n(le,ve[0],I.width,je,Te,nt,$e+(Ce?0:3),F.A),t(Z==Te),I&&He(we)&&Mo(nt,$e,Ce,je,Te,F.A)}return 0}function it(I){var F=I.ma,Z=F.ba.S,le=11>Z,ve=Z==qf||Z==hp||Z==vh||Z==ld||Z==12||He(Z);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!Gd(F.Oa,I,ve?11:12))return 0;if(ve&&He(Z)&&ir(),I.da)alert("todo:use_scaling");else{if(le){if(F.Ib=Mt,I.Kb){if(Z=I.U+1>>1,F.memory=i(I.U+2*Z),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+I.U,F.Mc=F.cc,F.Nc=F.dc+Z,F.Ib=Ie,ir()}}else alert("todo:EmitYUV");ve&&(F.Jb=ke,le&&yt())}if(le&&!_1){for(I=0;256>I;++I)nC[I]=89858*(I-128)+Ts>>yc,xp[I]=-22014*(I-128)+Ts,bg[I]=-45773*(I-128),Is[I]=113618*(I-128)+Ts>>yc;for(I=ou;I<s0;++I)F=76283*(I-16)+Ts>>yc,vp[I-ou]=Oo(F,255),yg[I-ou]=Oo(F+8>>4,15);_1=1}return 1}function bt(I){var F=I.ma,Z=I.U,le=I.T;return t(!(1&I.ka)),0>=Z||0>=le?0:(Z=F.Ib(I,F),F.Jb!=null&&F.Jb(I,F,Z),F.Dc+=Z,1)}function Kt(I){I.ma.memory=null}function Rt(I,F,Z,le){return X(I,8)!=47?0:(F[0]=X(I,14)+1,Z[0]=X(I,14)+1,le[0]=X(I,1),X(I,3)!=0?0:!I.h)}function tr(I,F){if(4>I)return I+1;var Z=I-2>>1;return(2+(1&I)<<Z)+X(F,Z)+1}function mr(I,F){return 120<F?F-120:1<=(Z=((Z=ud[F-1])>>4)*I+(8-(15&Z)))?Z:1;var Z}function jr(I,F,Z){var le=q(Z),ve=I[F+=255&le].g-8;return 0<ve&&(K(Z,Z.u+8),le=q(Z),F+=I[F].value,F+=le&(1<<ve)-1),K(Z,Z.u+I[F].g),I[F].value}function fn(I,F,Z){return Z.g+=I.g,Z.value+=I.value<<F>>>0,t(8>=Z.g),I.g}function hr(I,F,Z){var le=I.xc;return t((F=le==0?0:I.vc[I.md*(Z>>le)+(F>>le)])<I.Wb),I.Ya[F]}function ge(I,F,Z,le){var ve=I.ab,je=I.c*F,we=I.C;F=we+F;var Ce=Z,Te=le;for(le=I.Ta,Z=I.Ua;0<ve--;){var $e=I.gc[ve],nt=we,_t=F,Ct=Ce,mt=Te,Qt=(Te=le,Ce=Z,$e.Ea);switch(t(nt<_t),t(_t<=$e.nc),$e.hc){case 2:Jx(Ct,mt,(_t-nt)*Qt,Te,Ce);break;case 0:var Ot=nt,st=_t,dt=Te,qt=Ce,Jt=(br=$e).Ea;Ot==0&&(vg(Ct,mt,null,null,1,dt,qt),Tt(Ct,mt+1,0,0,Jt-1,dt,qt+1),mt+=Jt,qt+=Jt,++Ot);for(var Wt=1<<br.b,wr=Wt-1,gr=Ne(Jt,br.b),qr=br.K,br=br.w+(Ot>>br.b)*gr;Ot<st;){var Ln=qr,Kn=br,Cn=1;for(dp(Ct,mt,dt,qt-Jt,1,dt,qt);Cn<Jt;){var jn=(Cn&~wr)+Wt;jn>Jt&&(jn=Jt),(0,sd[Ln[Kn++]>>8&15])(Ct,mt+ +Cn,dt,qt+Cn-Jt,jn-Cn,dt,qt+Cn),Cn=jn}mt+=Jt,qt+=Jt,++Ot&wr||(br+=gr)}_t!=$e.nc&&n(Te,Ce-Qt,Te,Ce+(_t-nt-1)*Qt,Qt);break;case 1:for(Qt=Ct,st=mt,Jt=(Ct=$e.Ea)-(qt=Ct&~(dt=(mt=1<<$e.b)-1)),Ot=Ne(Ct,$e.b),Wt=$e.K,$e=$e.w+(nt>>$e.b)*Ot;nt<_t;){for(wr=Wt,gr=$e,qr=new lt,br=st+qt,Ln=st+Ct;st<br;)pe(wr[gr++],qr),Xd(qr,Qt,st,mt,Te,Ce),st+=mt,Ce+=mt;st<Ln&&(pe(wr[gr++],qr),Xd(qr,Qt,st,Jt,Te,Ce),st+=Jt,Ce+=Jt),++nt&dt||($e+=Ot)}break;case 3:if(Ct==Te&&mt==Ce&&0<$e.b){for(st=Te,Ct=Qt=Ce+(_t-nt)*Qt-(qt=(_t-nt)*Ne($e.Ea,$e.b)),mt=Te,dt=Ce,Ot=[],qt=(Jt=qt)-1;0<=qt;--qt)Ot[qt]=mt[dt+qt];for(qt=Jt-1;0<=qt;--qt)st[Ct+qt]=Ot[qt];Jo($e,nt,_t,Te,Qt,Te,Ce)}else Jo($e,nt,_t,Ct,mt,Te,Ce)}Ce=le,Te=Z}Te!=Z&&n(le,Z,Ce,Te,je)}function Ue(I,F){var Z=I.V,le=I.Ba+I.c*I.C,ve=F-I.C;if(t(F<=I.l.o),t(16>=ve),0<ve){var je=I.l,we=I.Ta,Ce=I.Ua,Te=je.width;if(ge(I,ve,Z,le),ve=Ce=[Ce],t((Z=I.C)<(le=F)),t(je.v<je.va),le>je.o&&(le=je.o),Z<je.j){var $e=je.j-Z;Z=je.j,ve[0]+=$e*Te}if(Z>=le?Z=0:(ve[0]+=4*je.v,je.ka=Z-je.j,je.U=je.va-je.v,je.T=le-Z,Z=1),Z){if(Ce=Ce[0],11>(Z=I.ca).S){var nt=Z.f.RGBA,_t=(le=Z.S,ve=je.U,je=je.T,$e=nt.eb,nt.A),Ct=je;for(nt=nt.fb+I.Ma*nt.A;0<Ct--;){var mt=we,Qt=Ce,Ot=ve,st=$e,dt=nt;switch(le){case gi:Ri(mt,Qt,Ot,st,dt);break;case qf:si(mt,Qt,Ot,st,dt);break;case fp:si(mt,Qt,Ot,st,dt),Mo(st,dt,0,Ot,1,0);break;case xc:_l(mt,Qt,Ot,st,dt);break;case hp:Xe(mt,Qt,Ot,st,dt,1);break;case au:Xe(mt,Qt,Ot,st,dt,1),Mo(st,dt,0,Ot,1,0);break;case vh:Xe(mt,Qt,Ot,st,dt,0);break;case cd:Xe(mt,Qt,Ot,st,dt,0),Mo(st,dt,1,Ot,1,0);break;case ld:Qd(mt,Qt,Ot,st,dt);break;case Vf:Qd(mt,Qt,Ot,st,dt),kn(st,dt,Ot,1,0);break;case e0:ro(mt,Qt,Ot,st,dt);break;default:t(0)}Ce+=Te,nt+=_t}I.Ma+=je}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=Z.height)}}I.C=F,t(I.C<=I.i)}function Pe(I){var F;if(0<I.ua)return 0;for(F=0;F<I.Wb;++F){var Z=I.Ya[F].G,le=I.Ya[F].H;if(0<Z[1][le[1]+0].g||0<Z[2][le[2]+0].g||0<Z[3][le[3]+0].g)return 0}return 1}function Ee(I,F,Z,le,ve,je){if(I.Z!=0){var we=I.qd,Ce=I.rd;for(t(gc[I.Z]!=null);F<Z;++F)gc[I.Z](we,Ce,le,ve,le,ve,je),we=le,Ce=ve,ve+=je;I.qd=we,I.rd=Ce}}function Fe(I,F){var Z=I.l.ma,le=Z.Z==0||Z.Z==1?I.l.j:I.C;if(le=I.C<le?le:I.C,t(F<=I.l.o),F>le){var ve=I.l.width,je=Z.ca,we=Z.tb+ve*le,Ce=I.V,Te=I.Ba+I.c*le,$e=I.gc;t(I.ab==1),t($e[0].hc==3),Kd($e[0],le,F,Ce,Te,je,we),Ee(Z,le,F,je,we,ve)}I.C=I.Ma=F}function Ve(I,F,Z,le,ve,je,we){var Ce=I.$/le,Te=I.$%le,$e=I.m,nt=I.s,_t=Z+I.$,Ct=_t;ve=Z+le*ve;var mt=Z+le*je,Qt=280+nt.ua,Ot=I.Pb?Ce:16777216,st=0<nt.ua?nt.Wa:null,dt=nt.wc,qt=_t<mt?hr(nt,Te,Ce):null;t(I.C<je),t(mt<=ve);var Jt=!1;e:for(;;){for(;Jt||_t<mt;){var Wt=0;if(Ce>=Ot){var wr=_t-Z;t((Ot=I).Pb),Ot.wd=Ot.m,Ot.xd=wr,0<Ot.s.ua&&ue(Ot.s.Wa,Ot.s.vb),Ot=Ce+S1}if(Te&dt||(qt=hr(nt,Te,Ce)),t(qt!=null),qt.Qb&&(F[_t]=qt.qb,Jt=!0),!Jt)if(ee($e),qt.jc){Wt=$e,wr=F;var gr=_t,qr=qt.pd[q(Wt)&Ds-1];t(qt.jc),256>qr.g?(K(Wt,Wt.u+qr.g),wr[gr]=qr.value,Wt=0):(K(Wt,Wt.u+qr.g-256),t(256<=qr.value),Wt=qr.value),Wt==0&&(Jt=!0)}else Wt=jr(qt.G[0],qt.H[0],$e);if($e.h)break;if(Jt||256>Wt){if(!Jt)if(qt.nd)F[_t]=(qt.qb|Wt<<8)>>>0;else{if(ee($e),Jt=jr(qt.G[1],qt.H[1],$e),ee($e),wr=jr(qt.G[2],qt.H[2],$e),gr=jr(qt.G[3],qt.H[3],$e),$e.h)break;F[_t]=(gr<<24|Jt<<16|Wt<<8|wr)>>>0}if(Jt=!1,++_t,++Te>=le&&(Te=0,++Ce,we!=null&&Ce<=je&&!(Ce%16)&&we(I,Ce),st!=null))for(;Ct<_t;)Wt=F[Ct++],st.X[(506832829*Wt&4294967295)>>>st.Mb]=Wt}else if(280>Wt){if(Wt=tr(Wt-256,$e),wr=jr(qt.G[4],qt.H[4],$e),ee($e),wr=mr(le,wr=tr(wr,$e)),$e.h)break;if(_t-Z<wr||ve-_t<Wt)break e;for(gr=0;gr<Wt;++gr)F[_t+gr]=F[_t+gr-wr];for(_t+=Wt,Te+=Wt;Te>=le;)Te-=le,++Ce,we!=null&&Ce<=je&&!(Ce%16)&&we(I,Ce);if(t(_t<=ve),Te&dt&&(qt=hr(nt,Te,Ce)),st!=null)for(;Ct<_t;)Wt=F[Ct++],st.X[(506832829*Wt&4294967295)>>>st.Mb]=Wt}else{if(!(Wt<Qt))break e;for(Jt=Wt-280,t(st!=null);Ct<_t;)Wt=F[Ct++],st.X[(506832829*Wt&4294967295)>>>st.Mb]=Wt;Wt=_t,t(!(Jt>>>(wr=st).Xa)),F[Wt]=wr.X[Jt],Jt=!0}Jt||t($e.h==z($e))}if(I.Pb&&$e.h&&_t<ve)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&ue(I.s.vb,I.s.Wa);else{if($e.h)break e;we?.(I,Ce>je?je:Ce),I.a=0,I.$=_t-Z}return 1}return I.a=3,0}function xt(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var F=I.Wa;F!=null&&(F.X=null),I.vb=null,t(I!=null)}function wt(){var I=new xg;return I==null?null:(I.a=0,I.xb=zf,Be("Predictor","VP8LPredictors"),Be("Predictor","VP8LPredictors_C"),Be("PredictorAdd","VP8LPredictorsAdd"),Be("PredictorAdd","VP8LPredictorsAdd_C"),Jx=Ht,Xd=he,Ri=me,si=De,Qd=Ye,ro=jt,_l=Qe,T.VP8LMapColor32b=Ws,T.VP8LMapColor8b=up,I)}function at(I,F,Z,le,ve){var je=1,we=[I],Ce=[F],Te=le.m,$e=le.s,nt=null,_t=0;e:for(;;){if(Z)for(;je&&X(Te,1);){var Ct=we,mt=Ce,Qt=le,Ot=1,st=Qt.m,dt=Qt.gc[Qt.ab],qt=X(st,2);if(Qt.Oc&1<<qt)je=0;else{switch(Qt.Oc|=1<<qt,dt.hc=qt,dt.Ea=Ct[0],dt.nc=mt[0],dt.K=[null],++Qt.ab,t(4>=Qt.ab),qt){case 0:case 1:dt.b=X(st,3)+2,Ot=at(Ne(dt.Ea,dt.b),Ne(dt.nc,dt.b),0,Qt,dt.K),dt.K=dt.K[0];break;case 3:var Jt,Wt=X(st,8)+1,wr=16<Wt?0:4<Wt?1:2<Wt?2:3;if(Ct[0]=Ne(dt.Ea,wr),dt.b=wr,Jt=Ot=at(Wt,1,0,Qt,dt.K)){var gr,qr=Wt,br=dt,Ln=1<<(8>>br.b),Kn=i(Ln);if(Kn==null)Jt=0;else{var Cn=br.K[0],jn=br.w;for(Kn[0]=br.K[0][0],gr=1;gr<1*qr;++gr)Kn[gr]=Le(Cn[jn+gr],Kn[gr-1]);for(;gr<4*Ln;++gr)Kn[gr]=0;br.K[0]=null,br.K[0]=Kn,Jt=1}}Ot=Jt;break;case 2:break;default:t(0)}je=Ot}}if(we=we[0],Ce=Ce[0],je&&X(Te,1)&&!(je=1<=(_t=X(Te,4))&&11>=_t)){le.a=3;break e}var la;if(la=je)t:{var Xn,dn,ha,Wr=le,rn=we,Fn=Ce,Bn=_t,Ks=Z,Ps=Wr.m,as=Wr.s,ss=[null],xs=1,rl=0,Qn=bh[Bn];r:for(;;){if(Ks&&X(Ps,1)){var vs=X(Ps,3)+2,Al=Ne(rn,vs),lu=Ne(Fn,vs),Nh=Al*lu;if(!at(Al,lu,0,Wr,ss))break r;for(ss=ss[0],as.xc=vs,Xn=0;Xn<Nh;++Xn){var cu=ss[Xn]>>8&65535;ss[Xn]=cu,cu>=xs&&(xs=cu+1)}}if(Ps.h)break r;for(dn=0;5>dn;++dn){var Ia=Ro[dn];!dn&&0<Bn&&(Ia+=1<<Bn),rl<Ia&&(rl=Ia)}var gp=o(xs*Qn,O),i0=xs,Li=o(i0,W);if(Li==null)var Fa=null;else t(65536>=i0),Fa=Li;var wh=i(rl);if(Fa==null||wh==null||gp==null){Wr.a=1;break r}var du=gp;for(Xn=ha=0;Xn<xs;++Xn){var ao=Fa[Xn],uu=ao.G,so=ao.H,bp=0,Wf=1,o0=0;for(dn=0;5>dn;++dn){Ia=Ro[dn],uu[dn]=du,so[dn]=ha,!dn&&0<Bn&&(Ia+=1<<Bn);a:{var yp,l0=Ia,jp=Wr,Gf=wh,A1=du,T1=ha,Np=0,pd=jp.m,sC=X(pd,1);if(s(Gf,0,0,l0),sC){var I1=X(pd,1)+1,P1=X(pd,1),jg=X(pd,P1==0?1:8);Gf[jg]=1,I1==2&&(Gf[jg=X(pd,8)]=1);var Yf=1}else{var Ng=i(19),wg=X(pd,4)+4;if(19<wg){jp.a=3;var wp=0;break a}for(yp=0;yp<wg;++yp)Ng[dd[yp]]=X(pd,3);var c0=void 0,Kf=void 0,O1=jp,M1=Ng,xd=l0,Sp=Gf,d0=0,Tl=O1.m,Xf=8,Sg=o(128,O);n:for(;P(Sg,0,7,M1,19);){if(X(Tl,1)){var R1=2+2*X(Tl,3);if((c0=2+X(Tl,R1))>xd)break n}else c0=xd;for(Kf=0;Kf<xd&&c0--;){ee(Tl);var Cg=Sg[0+(127&q(Tl))];K(Tl,Tl.u+Cg.g);var Sh=Cg.value;if(16>Sh)Sp[Kf++]=Sh,Sh!=0&&(Xf=Sh);else{var F1=Sh==16,kg=Sh-16,_g=tl[kg],Eg=X(Tl,t0[kg])+_g;if(Kf+Eg>xd)break n;for(var L1=F1?Xf:0;0<Eg--;)Sp[Kf++]=L1}}d0=1;break n}d0||(O1.a=3),Yf=d0}(Yf=Yf&&!pd.h)&&(Np=P(A1,T1,8,Gf,l0)),Yf&&Np!=0?wp=Np:(jp.a=3,wp=0)}if(wp==0)break r;if(Wf&&gh[dn]==1&&(Wf=du[ha].g==0),bp+=du[ha].g,ha+=wp,3>=dn){var Ch,u0=wh[0];for(Ch=1;Ch<Ia;++Ch)wh[Ch]>u0&&(u0=wh[Ch]);o0+=u0}}if(ao.nd=Wf,ao.Qb=0,Wf&&(ao.qb=(uu[3][so[3]+0].value<<24|uu[1][so[1]+0].value<<16|uu[2][so[2]+0].value)>>>0,bp==0&&256>uu[0][so[0]+0].value&&(ao.Qb=1,ao.qb+=uu[0][so[0]+0].value<<8)),ao.jc=!ao.Qb&&6>o0,ao.jc){var Cp,vd=ao;for(Cp=0;Cp<Ds;++Cp){var jc=Cp,gd=vd.pd[jc],kp=vd.G[0][vd.H[0]+jc];256<=kp.value?(gd.g=kp.g+256,gd.value=kp.value):(gd.g=0,gd.value=0,jc>>=fn(kp,8,gd),jc>>=fn(vd.G[1][vd.H[1]+jc],16,gd),jc>>=fn(vd.G[2][vd.H[2]+jc],0,gd),fn(vd.G[3][vd.H[3]+jc],24,gd))}}}as.vc=ss,as.Wb=xs,as.Ya=Fa,as.yc=gp,la=1;break t}la=0}if(!(je=la)){le.a=3;break e}if(0<_t){if($e.ua=1<<_t,!Se($e.Wa,_t)){le.a=1,je=0;break e}}else $e.ua=0;var _p=le,Dg=we,B1=Ce,Ag=_p.s,Tg=Ag.xc;if(_p.c=Dg,_p.i=B1,Ag.md=Ne(Dg,Tg),Ag.wc=Tg==0?-1:(1<<Tg)-1,Z){le.xb=k1;break e}if((nt=i(we*Ce))==null){le.a=1,je=0;break e}je=(je=Ve(le,nt,0,we,Ce,Ce,null))&&!Te.h;break e}return je?(ve!=null?ve[0]=nt:(t(nt==null),t(Z)),le.$=0,Z||xt($e)):xt($e),je}function Nt(I,F){var Z=I.c*I.i,le=Z+F+16*F;return t(I.c<=F),I.V=i(le),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+Z+F,1)}function St(I,F){var Z=I.C,le=F-Z,ve=I.V,je=I.Ba+I.c*Z;for(t(F<=I.l.o);0<le;){var we=16<le?16:le,Ce=I.l.ma,Te=I.l.width,$e=Te*we,nt=Ce.ca,_t=Ce.tb+Te*Z,Ct=I.Ta,mt=I.Ua;ge(I,we,ve,je),ja(Ct,mt,nt,_t,$e),Ee(Ce,Z,Z+we,nt,_t,Te),le-=we,ve+=we*I.c,Z+=we}t(Z==F),I.C=I.Ma=F}function Xt(){this.ub=this.yd=this.td=this.Rb=0}function ar(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function sr(){this.Yb=function(){var I=[];return function F(Z,le,ve){for(var je=ve[le],we=0;we<je&&(Z.push(ve.length>le+1?[]:0),!(ve.length<le+1));we++)F(Z[we],le+1,ve)}(I,0,[3,11]),I}()}function qe(){this.jb=i(3),this.Wc=l([4,8],sr),this.Xc=l([4,17],sr)}function or(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function lr(){this.ld=this.La=this.dd=this.tc=0}function $r(){this.Na=this.la=0}function gn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ta(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zs(){this.uc=this.M=this.Nb=0,this.wa=Array(new lr),this.Y=0,this.ya=Array(new ta),this.aa=0,this.l=new ks}function za(){this.y=i(16),this.f=i(8),this.ea=i(8)}function fs(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Xt,this.Kc=new ar,this.ed=new or,this.Qa=new pr,this.Ic=this.$c=this.Aa=0,this.D=new zs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ce),this.ia=0,this.pb=o(4,gn),this.Pa=new qe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new za),this.Hd=0,this.rb=Array(new $r),this.sb=0,this.wa=Array(new lr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ta),this.L=this.aa=0,this.gd=l([4,2],lr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ks(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gt(){var I=new fs;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,As||(As=Rr)),I}function fr(I,F,Z){return I.a==0&&(I.a=F,I.sc=Z,I.cb=0),0}function cr(I,F,Z){return 3<=Z&&I[F+0]==157&&I[F+1]==1&&I[F+2]==42}function Gr(I,F){if(I==null)return 0;if(I.a=0,I.sc="OK",F==null)return fr(I,2,"null VP8Io passed to VP8GetHeaders()");var Z=F.data,le=F.w,ve=F.ha;if(4>ve)return fr(I,7,"Truncated header.");var je=Z[le+0]|Z[le+1]<<8|Z[le+2]<<16,we=I.Od;if(we.Rb=!(1&je),we.td=je>>1&7,we.yd=je>>4&1,we.ub=je>>5,3<we.td)return fr(I,3,"Incorrect keyframe parameters.");if(!we.yd)return fr(I,4,"Frame not displayable.");le+=3,ve-=3;var Ce=I.Kc;if(we.Rb){if(7>ve)return fr(I,7,"cannot parse picture header");if(!cr(Z,le,ve))return fr(I,3,"Bad code word");Ce.c=16383&(Z[le+4]<<8|Z[le+3]),Ce.Td=Z[le+4]>>6,Ce.i=16383&(Z[le+6]<<8|Z[le+5]),Ce.Ud=Z[le+6]>>6,le+=7,ve-=7,I.za=Ce.c+15>>4,I.Ub=Ce.i+15>>4,F.width=Ce.c,F.height=Ce.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,s((je=I.Pa).jb,0,255,je.jb.length),t((je=I.Qa)!=null),je.Cb=0,je.Bb=0,je.Fb=1,s(je.Zb,0,0,je.Zb.length),s(je.Lb,0,0,je.Lb)}if(we.ub>ve)return fr(I,7,"bad partition length");re(je=I.m,Z,le,we.ub),le+=we.ub,ve-=we.ub,we.Rb&&(Ce.Ld=ae(je),Ce.Kd=ae(je)),Ce=I.Qa;var Te,$e=I.Pa;if(t(je!=null),t(Ce!=null),Ce.Cb=ae(je),Ce.Cb){if(Ce.Bb=ae(je),ae(je)){for(Ce.Fb=ae(je),Te=0;4>Te;++Te)Ce.Zb[Te]=ae(je)?Q(je,7):0;for(Te=0;4>Te;++Te)Ce.Lb[Te]=ae(je)?Q(je,6):0}if(Ce.Bb)for(Te=0;3>Te;++Te)$e.jb[Te]=ae(je)?U(je,8):255}else Ce.Bb=0;if(je.Ka)return fr(I,3,"cannot parse segment header");if((Ce=I.ed).zd=ae(je),Ce.Tb=U(je,6),Ce.wb=U(je,3),Ce.Pc=ae(je),Ce.Pc&&ae(je)){for($e=0;4>$e;++$e)ae(je)&&(Ce.vd[$e]=Q(je,6));for($e=0;4>$e;++$e)ae(je)&&(Ce.od[$e]=Q(je,6))}if(I.L=Ce.Tb==0?0:Ce.zd?1:2,je.Ka)return fr(I,3,"cannot parse filter header");var nt=ve;if(ve=Te=le,le=Te+nt,Ce=nt,I.Xb=(1<<U(I.m,2))-1,nt<3*($e=I.Xb))Z=7;else{for(Te+=3*$e,Ce-=3*$e,nt=0;nt<$e;++nt){var _t=Z[ve+0]|Z[ve+1]<<8|Z[ve+2]<<16;_t>Ce&&(_t=Ce),re(I.Jc[+nt],Z,Te,_t),Te+=_t,Ce-=_t,ve+=3}re(I.Jc[+$e],Z,Te,Ce),Z=Te<le?0:5}if(Z!=0)return fr(I,Z,"cannot parse partitions");for(Z=U(Te=I.m,7),ve=ae(Te)?Q(Te,4):0,le=ae(Te)?Q(Te,4):0,Ce=ae(Te)?Q(Te,4):0,$e=ae(Te)?Q(Te,4):0,Te=ae(Te)?Q(Te,4):0,nt=I.Qa,_t=0;4>_t;++_t){if(nt.Cb){var Ct=nt.Zb[_t];nt.Fb||(Ct+=Z)}else{if(0<_t){I.pb[_t]=I.pb[0];continue}Ct=Z}var mt=I.pb[_t];mt.Sc[0]=mp[Oo(Ct+ve,127)],mt.Sc[1]=pp[Oo(Ct+0,127)],mt.Eb[0]=2*mp[Oo(Ct+le,127)],mt.Eb[1]=101581*pp[Oo(Ct+Ce,127)]>>16,8>mt.Eb[1]&&(mt.Eb[1]=8),mt.Qc[0]=mp[Oo(Ct+$e,117)],mt.Qc[1]=pp[Oo(Ct+Te,127)],mt.lc=Ct+Te}if(!we.Rb)return fr(I,4,"Not a key frame.");for(ae(je),we=I.Pa,Z=0;4>Z;++Z){for(ve=0;8>ve;++ve)for(le=0;3>le;++le)for(Ce=0;11>Ce;++Ce)$e=ie(je,yh[Z][ve][le][Ce])?U(je,8):vc[Z][ve][le][Ce],we.Wc[Z][ve].Yb[le][Ce]=$e;for(ve=0;17>ve;++ve)we.Xc[Z][ve]=we.Wc[Z][C1[ve]]}return I.kc=ae(je),I.kc&&(I.Bd=U(je,8)),I.cb=1}function Rr(I,F,Z,le,ve,je,we){var Ce=F[ve].Yb[Z];for(Z=0;16>ve;++ve){if(!ie(I,Ce[Z+0]))return ve;for(;!ie(I,Ce[Z+1]);)if(Ce=F[++ve].Yb[0],Z=0,ve==16)return 16;var Te=F[ve+1].Yb;if(ie(I,Ce[Z+2])){var $e=I,nt=0;if(ie($e,(Ct=Ce)[(_t=Z)+3]))if(ie($e,Ct[_t+6])){for(Ce=0,_t=2*(nt=ie($e,Ct[_t+8]))+(Ct=ie($e,Ct[_t+9+nt])),nt=0,Ct=Ga[_t];Ct[Ce];++Ce)nt+=nt+ie($e,Ct[Ce]);nt+=3+(8<<_t)}else ie($e,Ct[_t+7])?(nt=7+2*ie($e,165),nt+=ie($e,145)):nt=5+ie($e,159);else nt=ie($e,Ct[_t+4])?3+ie($e,Ct[_t+5]):2;Ce=Te[2]}else nt=1,Ce=Te[1];Te=we+zn[ve],0>($e=I).b&&ne($e);var _t,Ct=$e.b,mt=(_t=$e.Ca>>1)-($e.I>>Ct)>>31;--$e.b,$e.Ca+=mt,$e.Ca|=1,$e.I-=(_t+1&mt)<<Ct,je[Te]=((nt^mt)-mt)*le[(0<ve)+0]}return 16}function oa(I){var F=I.rb[I.sb-1];F.la=0,F.Na=0,s(I.zc,0,0,I.zc.length),I.ja=0}function Ho(I,F){if(I==null)return 0;if(F==null)return fr(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!Gr(I,F))return 0;if(t(I.cb),F.ac==null||F.ac(F)){F.ob&&(I.L=0);var Z=md[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=F.v-Z>>4,I.zb=F.j-Z>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=F.o+15+Z>>4,I.Hb=F.va+15+Z>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var le=I.ed;for(Z=0;4>Z;++Z){var ve;if(I.Qa.Cb){var je=I.Qa.Lb[Z];I.Qa.Fb||(je+=le.Tb)}else je=le.Tb;for(ve=0;1>=ve;++ve){var we=I.gd[Z][ve],Ce=je;if(le.Pc&&(Ce+=le.vd[0],ve&&(Ce+=le.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var Te=Ce;0<le.wb&&(Te=4<le.wb?Te>>2:Te>>1)>9-le.wb&&(Te=9-le.wb),1>Te&&(Te=1),we.dd=Te,we.tc=2*Ce+Te,we.ld=40<=Ce?2:15<=Ce?1:0}else we.tc=0;we.La=ve}}}Z=0}else fr(I,6,"Frame setup failed"),Z=I.a;if(Z=Z==0){if(Z){I.$c=0,0<I.Aa||(I.Ic=E1);e:{Z=I.Ic,le=4*(Te=I.za);var $e=32*Te,nt=Te+1,_t=0<I.L?Te*(0<I.Aa?2:1):0,Ct=(I.Aa==2?2:1)*Te;if((we=le+832+(ve=3*(16*Z+md[I.L])/2*$e)+(je=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=we)Z=0;else{if(we>I.Vb){if(I.Vb=0,I.Ec=i(we),I.Fc=0,I.Ec==null){Z=fr(I,1,"no memory during frame initialization.");break e}I.Vb=we}we=I.Ec,Ce=I.Fc,I.Ac=we,I.Bc=Ce,Ce+=le,I.Gd=o($e,za),I.Hd=0,I.rb=o(nt+1,$r),I.sb=1,I.wa=_t?o(_t,lr):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Te),t(!0),I.oc=we,I.pc=Ce,Ce+=832,I.ya=o(Ct,ta),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Te),I.R=16*Te,I.B=8*Te,Te=($e=md[I.L])*I.R,$e=$e/2*I.B,I.sa=we,I.ta=Ce+Te,I.qa=I.sa,I.ra=I.ta+16*Z*I.R+$e,I.Ha=I.qa,I.Ia=I.ra+8*Z*I.B+$e,I.$c=0,Ce+=ve,I.mb=je?we:null,I.nb=je?Ce:null,t(Ce+je<=I.Fc+I.Vb),oa(I),s(I.Ac,I.Bc,0,le),Z=1}}if(Z){if(F.ka=0,F.y=I.sa,F.O=I.ta,F.f=I.qa,F.N=I.ra,F.ea=I.Ha,F.Vd=I.Ia,F.fa=I.R,F.Rc=I.B,F.F=null,F.J=0,!od){for(Z=-255;255>=Z;++Z)ns[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Zo[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)ru[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)nu[255+Z]=0>Z?0:255<Z?255:Z;od=1}mc=_s,El=Go,Dl=Oi,ps=Vn,no=Mi,Ha=Wo,fh=oh,pc=lh,Uf=pg,Jd=sp,Zd=mg,eu=Tf,mh=If,$f=Qx,tu=zd,id=Po,ph=fc,Wa=fg,Fi[0]=rt,Fi[1]=ed,Fi[2]=ih,Fi[3]=_f,Fi[4]=dr,Fi[5]=_r,Fi[6]=er,Fi[7]=Cr,Fi[8]=Yo,Fi[9]=ka,hd[0]=cc,hd[1]=td,hd[2]=jl,hd[3]=lc,hd[4]=ms,hd[5]=dc,hd[6]=wl,Fo[0]=Xo,Fo[1]=yl,Fo[2]=Ef,Fo[3]=uc,Fo[4]=vi,Fo[5]=Es,Fo[6]=hc,Z=1}else Z=0}Z&&(Z=function(mt,Qt){for(mt.M=0;mt.M<mt.Va;++mt.M){var Ot,st=mt.Jc[mt.M&mt.Xb],dt=mt.m,qt=mt;for(Ot=0;Ot<qt.za;++Ot){var Jt=dt,Wt=qt,wr=Wt.Ac,gr=Wt.Bc+4*Ot,qr=Wt.zc,br=Wt.ya[Wt.aa+Ot];if(Wt.Qa.Bb?br.$b=ie(Jt,Wt.Pa.jb[0])?2+ie(Jt,Wt.Pa.jb[2]):ie(Jt,Wt.Pa.jb[1]):br.$b=0,Wt.kc&&(br.Ad=ie(Jt,Wt.Bd)),br.Za=!ie(Jt,145)+0,br.Za){var Ln=br.Ob,Kn=0;for(Wt=0;4>Wt;++Wt){var Cn,jn=qr[0+Wt];for(Cn=0;4>Cn;++Cn){jn=gg[wr[gr+Cn]][jn];for(var la=su[ie(Jt,jn[0])];0<la;)la=su[2*la+ie(Jt,jn[la])];jn=-la,wr[gr+Cn]=jn}n(Ln,Kn,wr,gr,4),Kn+=4,qr[0+Wt]=jn}}else jn=ie(Jt,156)?ie(Jt,128)?1:3:ie(Jt,163)?2:0,br.Ob[0]=jn,s(wr,gr,jn,4),s(qr,0,jn,4);br.Dd=ie(Jt,142)?ie(Jt,114)?ie(Jt,183)?1:3:2:0}if(qt.m.Ka)return fr(mt,7,"Premature end-of-partition0 encountered.");for(;mt.ja<mt.za;++mt.ja){if(qt=st,Jt=(dt=mt).rb[dt.sb-1],wr=dt.rb[dt.sb+dt.ja],Ot=dt.ya[dt.aa+dt.ja],gr=dt.kc?Ot.Ad:0)Jt.la=wr.la=0,Ot.Za||(Jt.Na=wr.Na=0),Ot.Hc=0,Ot.Gc=0,Ot.ia=0;else{var Xn,dn;if(Jt=wr,wr=qt,gr=dt.Pa.Xc,qr=dt.ya[dt.aa+dt.ja],br=dt.pb[qr.$b],Wt=qr.ad,Ln=0,Kn=dt.rb[dt.sb-1],jn=Cn=0,s(Wt,Ln,0,384),qr.Za)var ha=0,Wr=gr[3];else{la=i(16);var rn=Jt.Na+Kn.Na;if(rn=As(wr,gr[1],rn,br.Eb,0,la,0),Jt.Na=Kn.Na=(0<rn)+0,1<rn)mc(la,0,Wt,Ln);else{var Fn=la[0]+3>>3;for(la=0;256>la;la+=16)Wt[Ln+la]=Fn}ha=1,Wr=gr[0]}var Bn=15&Jt.la,Ks=15&Kn.la;for(la=0;4>la;++la){var Ps=1&Ks;for(Fn=dn=0;4>Fn;++Fn)Bn=Bn>>1|(Ps=(rn=As(wr,Wr,rn=Ps+(1&Bn),br.Sc,ha,Wt,Ln))>ha)<<7,dn=dn<<2|(3<rn?3:1<rn?2:Wt[Ln+0]!=0),Ln+=16;Bn>>=4,Ks=Ks>>1|Ps<<7,Cn=(Cn<<8|dn)>>>0}for(Wr=Bn,ha=Ks>>4,Xn=0;4>Xn;Xn+=2){for(dn=0,Bn=Jt.la>>4+Xn,Ks=Kn.la>>4+Xn,la=0;2>la;++la){for(Ps=1&Ks,Fn=0;2>Fn;++Fn)rn=Ps+(1&Bn),Bn=Bn>>1|(Ps=0<(rn=As(wr,gr[2],rn,br.Qc,0,Wt,Ln)))<<3,dn=dn<<2|(3<rn?3:1<rn?2:Wt[Ln+0]!=0),Ln+=16;Bn>>=2,Ks=Ks>>1|Ps<<5}jn|=dn<<4*Xn,Wr|=Bn<<4<<Xn,ha|=(240&Ks)<<Xn}Jt.la=Wr,Kn.la=ha,qr.Hc=Cn,qr.Gc=jn,qr.ia=43690&jn?0:br.ia,gr=!(Cn|jn)}if(0<dt.L&&(dt.wa[dt.Y+dt.ja]=dt.gd[Ot.$b][Ot.Za],dt.wa[dt.Y+dt.ja].La|=!gr),qt.Ka)return fr(mt,7,"Premature end-of-file encountered.")}if(oa(mt),dt=Qt,qt=1,Ot=(st=mt).D,Jt=0<st.L&&st.M>=st.zb&&st.M<=st.Va,st.Aa==0)e:{if(Ot.M=st.M,Ot.uc=Jt,ad(st,Ot),qt=1,Ot=(dn=st.D).Nb,Jt=(jn=md[st.L])*st.R,wr=jn/2*st.B,la=16*Ot*st.R,Fn=8*Ot*st.B,gr=st.sa,qr=st.ta-Jt+la,br=st.qa,Wt=st.ra-wr+Fn,Ln=st.Ha,Kn=st.Ia-wr+Fn,Ks=(Bn=dn.M)==0,Cn=Bn>=st.Va-1,st.Aa==2&&ad(st,dn),dn.uc)for(Ps=(rn=st).D.M,t(rn.D.uc),dn=rn.yb;dn<rn.Hb;++dn){ha=dn,Wr=Ps;var as=(ss=(Ia=rn).D).Nb;Xn=Ia.R;var ss=ss.wa[ss.Y+ha],xs=Ia.sa,rl=Ia.ta+16*as*Xn+16*ha,Qn=ss.dd,vs=ss.tc;if(vs!=0)if(t(3<=vs),Ia.L==1)0<ha&&id(xs,rl,Xn,vs+4),ss.La&&Wa(xs,rl,Xn,vs),0<Wr&&tu(xs,rl,Xn,vs+4),ss.La&&ph(xs,rl,Xn,vs);else{var Al=Ia.B,lu=Ia.qa,Nh=Ia.ra+8*as*Al+8*ha,cu=Ia.Ha,Ia=Ia.Ia+8*as*Al+8*ha;as=ss.ld,0<ha&&(pc(xs,rl,Xn,vs+4,Qn,as),Jd(lu,Nh,cu,Ia,Al,vs+4,Qn,as)),ss.La&&(eu(xs,rl,Xn,vs,Qn,as),$f(lu,Nh,cu,Ia,Al,vs,Qn,as)),0<Wr&&(fh(xs,rl,Xn,vs+4,Qn,as),Uf(lu,Nh,cu,Ia,Al,vs+4,Qn,as)),ss.La&&(Zd(xs,rl,Xn,vs,Qn,as),mh(lu,Nh,cu,Ia,Al,vs,Qn,as))}}if(st.ia&&alert("todo:DitherRow"),dt.put!=null){if(dn=16*Bn,Bn=16*(Bn+1),Ks?(dt.y=st.sa,dt.O=st.ta+la,dt.f=st.qa,dt.N=st.ra+Fn,dt.ea=st.Ha,dt.W=st.Ia+Fn):(dn-=jn,dt.y=gr,dt.O=qr,dt.f=br,dt.N=Wt,dt.ea=Ln,dt.W=Kn),Cn||(Bn-=jn),Bn>dt.o&&(Bn=dt.o),dt.F=null,dt.J=null,st.Fa!=null&&0<st.Fa.length&&dn<Bn&&(dt.J=lp(st,dt,dn,Bn-dn),dt.F=st.mb,dt.F==null&&dt.F.length==0)){qt=fr(st,3,"Could not decode alpha data.");break e}dn<dt.j&&(jn=dt.j-dn,dn=dt.j,t(!(1&jn)),dt.O+=st.R*jn,dt.N+=st.B*(jn>>1),dt.W+=st.B*(jn>>1),dt.F!=null&&(dt.J+=dt.width*jn)),dn<Bn&&(dt.O+=dt.v,dt.N+=dt.v>>1,dt.W+=dt.v>>1,dt.F!=null&&(dt.J+=dt.v),dt.ka=dn-dt.j,dt.U=dt.va-dt.v,dt.T=Bn-dn,qt=dt.put(dt))}Ot+1!=st.Ic||Cn||(n(st.sa,st.ta-Jt,gr,qr+16*st.R,Jt),n(st.qa,st.ra-wr,br,Wt+8*st.B,wr),n(st.Ha,st.Ia-wr,Ln,Kn+8*st.B,wr))}if(!qt)return fr(mt,6,"Output aborted.")}return 1}(I,F)),F.bc!=null&&F.bc(F),Z&=1}return Z?(I.cb=0,Z):0}function es(I,F,Z,le,ve){ve=I[F+Z+32*le]+(ve>>3),I[F+Z+32*le]=-256&ve?0>ve?0:255:ve}function Io(I,F,Z,le,ve,je){es(I,F,0,Z,le+ve),es(I,F,1,Z,le+je),es(I,F,2,Z,le-je),es(I,F,3,Z,le-ve)}function vn(I){return(20091*I>>16)+I}function ai(I,F,Z,le){var ve,je=0,we=i(16);for(ve=0;4>ve;++ve){var Ce=I[F+0]+I[F+8],Te=I[F+0]-I[F+8],$e=(35468*I[F+4]>>16)-vn(I[F+12]),nt=vn(I[F+4])+(35468*I[F+12]>>16);we[je+0]=Ce+nt,we[je+1]=Te+$e,we[je+2]=Te-$e,we[je+3]=Ce-nt,je+=4,F++}for(ve=je=0;4>ve;++ve)Ce=(I=we[je+0]+4)+we[je+8],Te=I-we[je+8],$e=(35468*we[je+4]>>16)-vn(we[je+12]),es(Z,le,0,0,Ce+(nt=vn(we[je+4])+(35468*we[je+12]>>16))),es(Z,le,1,0,Te+$e),es(Z,le,2,0,Te-$e),es(Z,le,3,0,Ce-nt),je++,le+=32}function Wo(I,F,Z,le){var ve=I[F+0]+4,je=35468*I[F+4]>>16,we=vn(I[F+4]),Ce=35468*I[F+1]>>16;Io(Z,le,0,ve+we,I=vn(I[F+1]),Ce),Io(Z,le,1,ve+je,I,Ce),Io(Z,le,2,ve-je,I,Ce),Io(Z,le,3,ve-we,I,Ce)}function Go(I,F,Z,le,ve){ai(I,F,Z,le),ve&&ai(I,F+16,Z,le+4)}function Oi(I,F,Z,le){El(I,F+0,Z,le,1),El(I,F+32,Z,le+128,1)}function Vn(I,F,Z,le){var ve;for(I=I[F+0]+4,ve=0;4>ve;++ve)for(F=0;4>F;++F)es(Z,le,F,ve,I)}function Mi(I,F,Z,le){I[F+0]&&ps(I,F+0,Z,le),I[F+16]&&ps(I,F+16,Z,le+4),I[F+32]&&ps(I,F+32,Z,le+128),I[F+48]&&ps(I,F+48,Z,le+128+4)}function _s(I,F,Z,le){var ve,je=i(16);for(ve=0;4>ve;++ve){var we=I[F+0+ve]+I[F+12+ve],Ce=I[F+4+ve]+I[F+8+ve],Te=I[F+4+ve]-I[F+8+ve],$e=I[F+0+ve]-I[F+12+ve];je[0+ve]=we+Ce,je[8+ve]=we-Ce,je[4+ve]=$e+Te,je[12+ve]=$e-Te}for(ve=0;4>ve;++ve)we=(I=je[0+4*ve]+3)+je[3+4*ve],Ce=je[1+4*ve]+je[2+4*ve],Te=je[1+4*ve]-je[2+4*ve],$e=I-je[3+4*ve],Z[le+0]=we+Ce>>3,Z[le+16]=$e+Te>>3,Z[le+32]=we-Ce>>3,Z[le+48]=$e-Te>>3,le+=64}function oc(I,F,Z){var le,ve=F-32,je=Gs,we=255-I[ve-1];for(le=0;le<Z;++le){var Ce,Te=je,$e=we+I[F-1];for(Ce=0;Ce<Z;++Ce)I[F+Ce]=Te[$e+I[ve+Ce]];F+=32}}function ed(I,F){oc(I,F,4)}function yl(I,F){oc(I,F,8)}function td(I,F){oc(I,F,16)}function jl(I,F){var Z;for(Z=0;16>Z;++Z)n(I,F+32*Z,I,F-32,16)}function lc(I,F){var Z;for(Z=16;0<Z;--Z)s(I,F,I[F-1],16),F+=32}function Nl(I,F,Z){var le;for(le=0;16>le;++le)s(F,Z+32*le,I,16)}function cc(I,F){var Z,le=16;for(Z=0;16>Z;++Z)le+=I[F-1+32*Z]+I[F+Z-32];Nl(le>>5,I,F)}function ms(I,F){var Z,le=8;for(Z=0;16>Z;++Z)le+=I[F-1+32*Z];Nl(le>>4,I,F)}function dc(I,F){var Z,le=8;for(Z=0;16>Z;++Z)le+=I[F+Z-32];Nl(le>>4,I,F)}function wl(I,F){Nl(128,I,F)}function Qr(I,F,Z){return I+2*F+Z+2>>2}function ih(I,F){var Z,le=F-32;for(le=new Uint8Array([Qr(I[le-1],I[le+0],I[le+1]),Qr(I[le+0],I[le+1],I[le+2]),Qr(I[le+1],I[le+2],I[le+3]),Qr(I[le+2],I[le+3],I[le+4])]),Z=0;4>Z;++Z)n(I,F+32*Z,le,0,le.length)}function _f(I,F){var Z=I[F-1],le=I[F-1+32],ve=I[F-1+64],je=I[F-1+96];G(I,F+0,16843009*Qr(I[F-1-32],Z,le)),G(I,F+32,16843009*Qr(Z,le,ve)),G(I,F+64,16843009*Qr(le,ve,je)),G(I,F+96,16843009*Qr(ve,je,je))}function rt(I,F){var Z,le=4;for(Z=0;4>Z;++Z)le+=I[F+Z-32]+I[F-1+32*Z];for(le>>=3,Z=0;4>Z;++Z)s(I,F+32*Z,le,4)}function dr(I,F){var Z=I[F-1+0],le=I[F-1+32],ve=I[F-1+64],je=I[F-1-32],we=I[F+0-32],Ce=I[F+1-32],Te=I[F+2-32],$e=I[F+3-32];I[F+0+96]=Qr(le,ve,I[F-1+96]),I[F+1+96]=I[F+0+64]=Qr(Z,le,ve),I[F+2+96]=I[F+1+64]=I[F+0+32]=Qr(je,Z,le),I[F+3+96]=I[F+2+64]=I[F+1+32]=I[F+0+0]=Qr(we,je,Z),I[F+3+64]=I[F+2+32]=I[F+1+0]=Qr(Ce,we,je),I[F+3+32]=I[F+2+0]=Qr(Te,Ce,we),I[F+3+0]=Qr($e,Te,Ce)}function er(I,F){var Z=I[F+1-32],le=I[F+2-32],ve=I[F+3-32],je=I[F+4-32],we=I[F+5-32],Ce=I[F+6-32],Te=I[F+7-32];I[F+0+0]=Qr(I[F+0-32],Z,le),I[F+1+0]=I[F+0+32]=Qr(Z,le,ve),I[F+2+0]=I[F+1+32]=I[F+0+64]=Qr(le,ve,je),I[F+3+0]=I[F+2+32]=I[F+1+64]=I[F+0+96]=Qr(ve,je,we),I[F+3+32]=I[F+2+64]=I[F+1+96]=Qr(je,we,Ce),I[F+3+64]=I[F+2+96]=Qr(we,Ce,Te),I[F+3+96]=Qr(Ce,Te,Te)}function _r(I,F){var Z=I[F-1+0],le=I[F-1+32],ve=I[F-1+64],je=I[F-1-32],we=I[F+0-32],Ce=I[F+1-32],Te=I[F+2-32],$e=I[F+3-32];I[F+0+0]=I[F+1+64]=je+we+1>>1,I[F+1+0]=I[F+2+64]=we+Ce+1>>1,I[F+2+0]=I[F+3+64]=Ce+Te+1>>1,I[F+3+0]=Te+$e+1>>1,I[F+0+96]=Qr(ve,le,Z),I[F+0+64]=Qr(le,Z,je),I[F+0+32]=I[F+1+96]=Qr(Z,je,we),I[F+1+32]=I[F+2+96]=Qr(je,we,Ce),I[F+2+32]=I[F+3+96]=Qr(we,Ce,Te),I[F+3+32]=Qr(Ce,Te,$e)}function Cr(I,F){var Z=I[F+0-32],le=I[F+1-32],ve=I[F+2-32],je=I[F+3-32],we=I[F+4-32],Ce=I[F+5-32],Te=I[F+6-32],$e=I[F+7-32];I[F+0+0]=Z+le+1>>1,I[F+1+0]=I[F+0+64]=le+ve+1>>1,I[F+2+0]=I[F+1+64]=ve+je+1>>1,I[F+3+0]=I[F+2+64]=je+we+1>>1,I[F+0+32]=Qr(Z,le,ve),I[F+1+32]=I[F+0+96]=Qr(le,ve,je),I[F+2+32]=I[F+1+96]=Qr(ve,je,we),I[F+3+32]=I[F+2+96]=Qr(je,we,Ce),I[F+3+64]=Qr(we,Ce,Te),I[F+3+96]=Qr(Ce,Te,$e)}function ka(I,F){var Z=I[F-1+0],le=I[F-1+32],ve=I[F-1+64],je=I[F-1+96];I[F+0+0]=Z+le+1>>1,I[F+2+0]=I[F+0+32]=le+ve+1>>1,I[F+2+32]=I[F+0+64]=ve+je+1>>1,I[F+1+0]=Qr(Z,le,ve),I[F+3+0]=I[F+1+32]=Qr(le,ve,je),I[F+3+32]=I[F+1+64]=Qr(ve,je,je),I[F+3+64]=I[F+2+64]=I[F+0+96]=I[F+1+96]=I[F+2+96]=I[F+3+96]=je}function Yo(I,F){var Z=I[F-1+0],le=I[F-1+32],ve=I[F-1+64],je=I[F-1+96],we=I[F-1-32],Ce=I[F+0-32],Te=I[F+1-32],$e=I[F+2-32];I[F+0+0]=I[F+2+32]=Z+we+1>>1,I[F+0+32]=I[F+2+64]=le+Z+1>>1,I[F+0+64]=I[F+2+96]=ve+le+1>>1,I[F+0+96]=je+ve+1>>1,I[F+3+0]=Qr(Ce,Te,$e),I[F+2+0]=Qr(we,Ce,Te),I[F+1+0]=I[F+3+32]=Qr(Z,we,Ce),I[F+1+32]=I[F+3+64]=Qr(le,Z,we),I[F+1+64]=I[F+3+96]=Qr(ve,le,Z),I[F+1+96]=Qr(je,ve,le)}function Ef(I,F){var Z;for(Z=0;8>Z;++Z)n(I,F+32*Z,I,F-32,8)}function uc(I,F){var Z;for(Z=0;8>Z;++Z)s(I,F,I[F-1],8),F+=32}function Ko(I,F,Z){var le;for(le=0;8>le;++le)s(F,Z+32*le,I,8)}function Xo(I,F){var Z,le=8;for(Z=0;8>Z;++Z)le+=I[F+Z-32]+I[F-1+32*Z];Ko(le>>4,I,F)}function Es(I,F){var Z,le=4;for(Z=0;8>Z;++Z)le+=I[F+Z-32];Ko(le>>3,I,F)}function vi(I,F){var Z,le=4;for(Z=0;8>Z;++Z)le+=I[F-1+32*Z];Ko(le>>3,I,F)}function hc(I,F){Ko(128,I,F)}function Qo(I,F,Z){var le=I[F-Z],ve=I[F+0],je=3*(ve-le)+Zx[1020+I[F-2*Z]-I[F+Z]],we=xh[112+(je+4>>3)];I[F-Z]=Gs[255+le+xh[112+(je+3>>3)]],I[F+0]=Gs[255+ve-we]}function Df(I,F,Z,le){var ve=I[F+0],je=I[F+Z];return el[255+I[F-2*Z]-I[F-Z]]>le||el[255+je-ve]>le}function rd(I,F,Z,le){return 4*el[255+I[F-Z]-I[F+0]]+el[255+I[F-2*Z]-I[F+Z]]<=le}function Af(I,F,Z,le,ve){var je=I[F-3*Z],we=I[F-2*Z],Ce=I[F-Z],Te=I[F+0],$e=I[F+Z],nt=I[F+2*Z],_t=I[F+3*Z];return 4*el[255+Ce-Te]+el[255+we-$e]>le?0:el[255+I[F-4*Z]-je]<=ve&&el[255+je-we]<=ve&&el[255+we-Ce]<=ve&&el[255+_t-nt]<=ve&&el[255+nt-$e]<=ve&&el[255+$e-Te]<=ve}function zd(I,F,Z,le){var ve=2*le+1;for(le=0;16>le;++le)rd(I,F+le,Z,ve)&&Qo(I,F+le,Z)}function Po(I,F,Z,le){var ve=2*le+1;for(le=0;16>le;++le)rd(I,F+le*Z,1,ve)&&Qo(I,F+le*Z,1)}function fc(I,F,Z,le){var ve;for(ve=3;0<ve;--ve)zd(I,F+=4*Z,Z,le)}function fg(I,F,Z,le){var ve;for(ve=3;0<ve;--ve)Po(I,F+=4,Z,le)}function Hd(I,F,Z,le,ve,je,we,Ce){for(je=2*je+1;0<ve--;){if(Af(I,F,Z,je,we))if(Df(I,F,Z,Ce))Qo(I,F,Z);else{var Te=I,$e=F,nt=Z,_t=Te[$e-2*nt],Ct=Te[$e-nt],mt=Te[$e+0],Qt=Te[$e+nt],Ot=Te[$e+2*nt],st=27*(qt=Zx[1020+3*(mt-Ct)+Zx[1020+_t-Qt]])+63>>7,dt=18*qt+63>>7,qt=9*qt+63>>7;Te[$e-3*nt]=Gs[255+Te[$e-3*nt]+qt],Te[$e-2*nt]=Gs[255+_t+dt],Te[$e-nt]=Gs[255+Ct+st],Te[$e+0]=Gs[255+mt-st],Te[$e+nt]=Gs[255+Qt-dt],Te[$e+2*nt]=Gs[255+Ot-qt]}F+=le}}function Sl(I,F,Z,le,ve,je,we,Ce){for(je=2*je+1;0<ve--;){if(Af(I,F,Z,je,we))if(Df(I,F,Z,Ce))Qo(I,F,Z);else{var Te=I,$e=F,nt=Z,_t=Te[$e-nt],Ct=Te[$e+0],mt=Te[$e+nt],Qt=xh[112+((Ot=3*(Ct-_t))+4>>3)],Ot=xh[112+(Ot+3>>3)],st=Qt+1>>1;Te[$e-2*nt]=Gs[255+Te[$e-2*nt]+st],Te[$e-nt]=Gs[255+_t+Ot],Te[$e+0]=Gs[255+Ct-Qt],Te[$e+nt]=Gs[255+mt-st]}F+=le}}function oh(I,F,Z,le,ve,je){Hd(I,F,Z,1,16,le,ve,je)}function lh(I,F,Z,le,ve,je){Hd(I,F,1,Z,16,le,ve,je)}function mg(I,F,Z,le,ve,je){var we;for(we=3;0<we;--we)Sl(I,F+=4*Z,Z,1,16,le,ve,je)}function Tf(I,F,Z,le,ve,je){var we;for(we=3;0<we;--we)Sl(I,F+=4,1,Z,16,le,ve,je)}function pg(I,F,Z,le,ve,je,we,Ce){Hd(I,F,ve,1,8,je,we,Ce),Hd(Z,le,ve,1,8,je,we,Ce)}function sp(I,F,Z,le,ve,je,we,Ce){Hd(I,F,1,ve,8,je,we,Ce),Hd(Z,le,1,ve,8,je,we,Ce)}function If(I,F,Z,le,ve,je,we,Ce){Sl(I,F+4*ve,ve,1,8,je,we,Ce),Sl(Z,le+4*ve,ve,1,8,je,we,Ce)}function Qx(I,F,Z,le,ve,je,we,Ce){Sl(I,F+4,1,ve,8,je,we,Ce),Sl(Z,le+4,1,ve,8,je,we,Ce)}function Pf(){this.ba=new Ke,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ct,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ip(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function op(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Of(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new O}function xg(){this.xb=this.a=0,this.l=new ks,this.ca=new Ke,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Of,this.ab=0,this.gc=o(4,op),this.Oc=0}function Mf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ks,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ch(I,F,Z,le,ve,je,we){for(I=I==null?0:I[F+0],F=0;F<we;++F)ve[je+F]=I+Z[le+F]&255,I=ve[je+F]}function Rf(I,F,Z,le,ve,je,we){var Ce;if(I==null)ch(null,null,Z,le,ve,je,we);else for(Ce=0;Ce<we;++Ce)ve[je+Ce]=I[F+Ce]+Z[le+Ce]&255}function Wd(I,F,Z,le,ve,je,we){if(I==null)ch(null,null,Z,le,ve,je,we);else{var Ce,Te=I[F+0],$e=Te,nt=Te;for(Ce=0;Ce<we;++Ce)$e=nt+(Te=I[F+Ce])-$e,nt=Z[le+Ce]+(-256&$e?0>$e?0:255:$e)&255,$e=Te,ve[je+Ce]=nt}}function lp(I,F,Z,le){var ve=F.width,je=F.o;if(t(I!=null&&F!=null),0>Z||0>=le||Z+le>je)return null;if(!I.Cc){if(I.ga==null){var we;if(I.ga=new Mf,(we=I.ga==null)||(we=F.width*F.o,t(I.Gb.length==0),I.Gb=i(we),I.Uc=0,I.Gb==null?we=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,we=1),we=!we),!we){we=I.ga;var Ce=I.Fa,Te=I.P,$e=I.qc,nt=I.mb,_t=I.nb,Ct=Te+1,mt=$e-1,Qt=we.l;if(t(Ce!=null&&nt!=null&&F!=null),gc[0]=null,gc[1]=ch,gc[2]=Rf,gc[3]=Wd,we.ca=nt,we.tb=_t,we.c=F.width,we.i=F.height,t(0<we.c&&0<we.i),1>=$e)F=0;else if(we.$a=Ce[Te+0]>>0&3,we.Z=Ce[Te+0]>>2&3,we.Lc=Ce[Te+0]>>4&3,Te=Ce[Te+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||Te)F=0;else if(Qt.put=bt,Qt.ac=it,Qt.bc=Kt,Qt.ma=we,Qt.width=F.width,Qt.height=F.height,Qt.Da=F.Da,Qt.v=F.v,Qt.va=F.va,Qt.j=F.j,Qt.o=F.o,we.$a)e:{t(we.$a==1),F=wt();t:for(;;){if(F==null){F=0;break e}if(t(we!=null),we.mc=F,F.c=we.c,F.i=we.i,F.l=we.l,F.l.ma=we,F.l.width=we.c,F.l.height=we.i,F.a=0,B(F.m,Ce,Ct,mt),!at(we.c,we.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&Pe(F.s)?(we.ic=1,Ce=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Ce),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(we.ic=0,F=Nt(F,we.c)),!F))break t;F=1;break e}we.mc=null,F=0}else F=mt>=we.c*we.i;we=!F}if(we)return null;I.ga.Lc!=1?I.Ga=0:le=je-Z}t(I.ga!=null),t(Z+le<=je);e:{if(F=(Ce=I.ga).c,je=Ce.l.o,Ce.$a==0){if(Ct=I.rc,mt=I.Vc,Qt=I.Fa,Te=I.P+1+Z*F,$e=I.mb,nt=I.nb+Z*F,t(Te<=I.P+I.qc),Ce.Z!=0)for(t(gc[Ce.Z]!=null),we=0;we<le;++we)gc[Ce.Z](Ct,mt,Qt,Te,$e,nt,F),Ct=$e,mt=nt,nt+=F,Te+=F;else for(we=0;we<le;++we)n($e,nt,Qt,Te,F),Ct=$e,mt=nt,nt+=F,Te+=F;I.rc=Ct,I.Vc=mt}else{if(t(Ce.mc!=null),F=Z+le,t((we=Ce.mc)!=null),t(F<=we.i),we.C>=F)F=1;else if(Ce.ic||yt(),Ce.ic){Ce=we.V,Ct=we.Ba,mt=we.c;var Ot=we.i,st=(Qt=1,Te=we.$/mt,$e=we.$%mt,nt=we.m,_t=we.s,we.$),dt=mt*Ot,qt=mt*F,Jt=_t.wc,Wt=st<qt?hr(_t,$e,Te):null;t(st<=dt),t(F<=Ot),t(Pe(_t));t:for(;;){for(;!nt.h&&st<qt;){if($e&Jt||(Wt=hr(_t,$e,Te)),t(Wt!=null),ee(nt),256>(Ot=jr(Wt.G[0],Wt.H[0],nt)))Ce[Ct+st]=Ot,++st,++$e>=mt&&($e=0,++Te<=F&&!(Te%16)&&Fe(we,Te));else{if(!(280>Ot)){Qt=0;break t}Ot=tr(Ot-256,nt);var wr,gr=jr(Wt.G[4],Wt.H[4],nt);if(ee(nt),!(st>=(gr=mr(mt,gr=tr(gr,nt)))&&dt-st>=Ot)){Qt=0;break t}for(wr=0;wr<Ot;++wr)Ce[Ct+st+wr]=Ce[Ct+st+wr-gr];for(st+=Ot,$e+=Ot;$e>=mt;)$e-=mt,++Te<=F&&!(Te%16)&&Fe(we,Te);st<qt&&$e&Jt&&(Wt=hr(_t,$e,Te))}t(nt.h==z(nt))}Fe(we,Te>F?F:Te);break t}!Qt||nt.h&&st<dt?(Qt=0,we.a=nt.h?5:3):we.$=st,F=Qt}else F=Ve(we,we.V,we.Ba,we.c,we.i,F,St);if(!F){le=0;break e}}Z+le>=je&&(I.Cc=1),le=1}if(!le)return null;if(I.Cc&&((le=I.ga)!=null&&(le.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+Z*ve}function H(I,F,Z,le,ve,je){for(;0<ve--;){var we,Ce=I,Te=F+(Z?1:0),$e=I,nt=F+(Z?0:3);for(we=0;we<le;++we){var _t=$e[nt+4*we];_t!=255&&(_t*=32897,Ce[Te+4*we+0]=Ce[Te+4*we+0]*_t>>23,Ce[Te+4*we+1]=Ce[Te+4*we+1]*_t>>23,Ce[Te+4*we+2]=Ce[Te+4*we+2]*_t>>23)}F+=je}}function be(I,F,Z,le,ve){for(;0<le--;){var je;for(je=0;je<Z;++je){var we=I[F+2*je+0],Ce=15&($e=I[F+2*je+1]),Te=4369*Ce,$e=(240&$e|$e>>4)*Te>>16;I[F+2*je+0]=(240&we|we>>4)*Te>>16&240|(15&we|we<<4)*Te>>16>>4&15,I[F+2*je+1]=240&$e|Ce}F+=ve}}function We(I,F,Z,le,ve,je,we,Ce){var Te,$e,nt=255;for($e=0;$e<ve;++$e){for(Te=0;Te<le;++Te){var _t=I[F+Te];je[we+4*Te]=_t,nt&=_t}F+=Z,we+=Ce}return nt!=255}function tt(I,F,Z,le,ve){var je;for(je=0;je<ve;++je)Z[le+je]=I[F+je]>>8}function yt(){Mo=H,kn=be,_n=We,ja=tt}function Bt(I,F,Z){T[I]=function(le,ve,je,we,Ce,Te,$e,nt,_t,Ct,mt,Qt,Ot,st,dt,qt,Jt){var Wt,wr=Jt-1>>1,gr=Ce[Te+0]|$e[nt+0]<<16,qr=_t[Ct+0]|mt[Qt+0]<<16;t(le!=null);var br=3*gr+qr+131074>>2;for(F(le[ve+0],255&br,br>>16,Ot,st),je!=null&&(br=3*qr+gr+131074>>2,F(je[we+0],255&br,br>>16,dt,qt)),Wt=1;Wt<=wr;++Wt){var Ln=Ce[Te+Wt]|$e[nt+Wt]<<16,Kn=_t[Ct+Wt]|mt[Qt+Wt]<<16,Cn=gr+Ln+qr+Kn+524296,jn=Cn+2*(Ln+qr)>>3;br=jn+gr>>1,gr=(Cn=Cn+2*(gr+Kn)>>3)+Ln>>1,F(le[ve+2*Wt-1],255&br,br>>16,Ot,st+(2*Wt-1)*Z),F(le[ve+2*Wt-0],255&gr,gr>>16,Ot,st+(2*Wt-0)*Z),je!=null&&(br=Cn+qr>>1,gr=jn+Kn>>1,F(je[we+2*Wt-1],255&br,br>>16,dt,qt+(2*Wt-1)*Z),F(je[we+2*Wt+0],255&gr,gr>>16,dt,qt+(2*Wt+0)*Z)),gr=Ln,qr=Kn}1&Jt||(br=3*gr+qr+131074>>2,F(le[ve+Jt-1],255&br,br>>16,Ot,st+(Jt-1)*Z),je!=null&&(br=3*qr+gr+131074>>2,F(je[we+Jt-1],255&br,br>>16,dt,qt+(Jt-1)*Z)))}}function ir(){Ys[gi]=fd,Ys[qf]=bc,Ys[xc]=iu,Ys[hp]=r0,Ys[vh]=n0,Ys[ld]=Hf,Ys[e0]=a0,Ys[fp]=bc,Ys[au]=r0,Ys[cd]=n0,Ys[Vf]=Hf}function Nr(I){return I&-16384?0>I?0:255:I>>rC}function Or(I,F){return Nr((19077*I>>8)+(26149*F>>8)-14234)}function un(I,F,Z){return Nr((19077*I>>8)-(6419*F>>8)-(13320*Z>>8)+8708)}function ln(I,F){return Nr((19077*I>>8)+(33050*F>>8)-17685)}function Pn(I,F,Z,le,ve){le[ve+0]=Or(I,Z),le[ve+1]=un(I,F,Z),le[ve+2]=ln(I,F)}function Ta(I,F,Z,le,ve){le[ve+0]=ln(I,F),le[ve+1]=un(I,F,Z),le[ve+2]=Or(I,Z)}function Ra(I,F,Z,le,ve){var je=un(I,F,Z);F=je<<3&224|ln(I,F)>>3,le[ve+0]=248&Or(I,Z)|je>>5,le[ve+1]=F}function ts(I,F,Z,le,ve){var je=240&ln(I,F)|15;le[ve+0]=240&Or(I,Z)|un(I,F,Z)>>4,le[ve+1]=je}function rs(I,F,Z,le,ve){le[ve+0]=255,Pn(I,F,Z,le,ve+1)}function Hs(I,F,Z,le,ve){Ta(I,F,Z,le,ve),le[ve+3]=255}function Cl(I,F,Z,le,ve){Pn(I,F,Z,le,ve),le[ve+3]=255}function Oo(I,F){return 0>I?0:I>F?F:I}function kl(I,F,Z){T[I]=function(le,ve,je,we,Ce,Te,$e,nt,_t){for(var Ct=nt+(-2&_t)*Z;nt!=Ct;)F(le[ve+0],je[we+0],Ce[Te+0],$e,nt),F(le[ve+1],je[we+0],Ce[Te+0],$e,nt+Z),ve+=2,++we,++Te,nt+=2*Z;1&_t&&F(le[ve+0],je[we+0],Ce[Te+0],$e,nt)}}function cp(I,F,Z){return Z==0?I==0?F==0?6:5:F==0?4:0:Z}function nd(I,F,Z,le,ve){switch(I>>>30){case 3:El(F,Z,le,ve,0);break;case 2:Ha(F,Z,le,ve);break;case 1:ps(F,Z,le,ve)}}function ad(I,F){var Z,le,ve=F.M,je=F.Nb,we=I.oc,Ce=I.pc+40,Te=I.oc,$e=I.pc+584,nt=I.oc,_t=I.pc+600;for(Z=0;16>Z;++Z)we[Ce+32*Z-1]=129;for(Z=0;8>Z;++Z)Te[$e+32*Z-1]=129,nt[_t+32*Z-1]=129;for(0<ve?we[Ce-1-32]=Te[$e-1-32]=nt[_t-1-32]=129:(s(we,Ce-32-1,127,21),s(Te,$e-32-1,127,9),s(nt,_t-32-1,127,9)),le=0;le<I.za;++le){var Ct=F.ya[F.aa+le];if(0<le){for(Z=-1;16>Z;++Z)n(we,Ce+32*Z-4,we,Ce+32*Z+12,4);for(Z=-1;8>Z;++Z)n(Te,$e+32*Z-4,Te,$e+32*Z+4,4),n(nt,_t+32*Z-4,nt,_t+32*Z+4,4)}var mt=I.Gd,Qt=I.Hd+le,Ot=Ct.ad,st=Ct.Hc;if(0<ve&&(n(we,Ce-32,mt[Qt].y,0,16),n(Te,$e-32,mt[Qt].f,0,8),n(nt,_t-32,mt[Qt].ea,0,8)),Ct.Za){var dt=we,qt=Ce-32+16;for(0<ve&&(le>=I.za-1?s(dt,qt,mt[Qt].y[15],4):n(dt,qt,mt[Qt+1].y,0,4)),Z=0;4>Z;Z++)dt[qt+128+Z]=dt[qt+256+Z]=dt[qt+384+Z]=dt[qt+0+Z];for(Z=0;16>Z;++Z,st<<=2)dt=we,qt=Ce+jh[Z],Fi[Ct.Ob[Z]](dt,qt),nd(st,Ot,16*+Z,dt,qt)}else if(dt=cp(le,ve,Ct.Ob[0]),hd[dt](we,Ce),st!=0)for(Z=0;16>Z;++Z,st<<=2)nd(st,Ot,16*+Z,we,Ce+jh[Z]);for(Z=Ct.Gc,dt=cp(le,ve,Ct.Dd),Fo[dt](Te,$e),Fo[dt](nt,_t),st=Ot,dt=Te,qt=$e,255&(Ct=Z>>0)&&(170&Ct?Dl(st,256,dt,qt):no(st,256,dt,qt)),Ct=nt,st=_t,255&(Z>>=8)&&(170&Z?Dl(Ot,320,Ct,st):no(Ot,320,Ct,st)),ve<I.Ub-1&&(n(mt[Qt].y,0,we,Ce+480,16),n(mt[Qt].f,0,Te,$e+224,8),n(mt[Qt].ea,0,nt,_t+224,8)),Z=8*je*I.B,mt=I.sa,Qt=I.ta+16*le+16*je*I.R,Ot=I.qa,Ct=I.ra+8*le+Z,st=I.Ha,dt=I.Ia+8*le+Z,Z=0;16>Z;++Z)n(mt,Qt+Z*I.R,we,Ce+32*Z,16);for(Z=0;8>Z;++Z)n(Ot,Ct+Z*I.B,Te,$e+32*Z,8),n(st,dt+Z*I.B,nt,_t+32*Z,8)}}function Ff(I,F,Z,le,ve,je,we,Ce,Te){var $e=[0],nt=[0],_t=0,Ct=Te!=null?Te.kd:0,mt=Te??new ip;if(I==null||12>Z)return 7;mt.data=I,mt.w=F,mt.ha=Z,F=[F],Z=[Z],mt.gb=[mt.gb];e:{var Qt=F,Ot=Z,st=mt.gb;if(t(I!=null),t(Ot!=null),t(st!=null),st[0]=0,12<=Ot[0]&&!r(I,Qt[0],"RIFF")){if(r(I,Qt[0]+8,"WEBP")){st=3;break e}var dt=oe(I,Qt[0]+4);if(12>dt||4294967286<dt){st=3;break e}if(Ct&&dt>Ot[0]-8){st=7;break e}st[0]=dt,Qt[0]+=12,Ot[0]-=12}st=0}if(st!=0)return st;for(dt=0<mt.gb[0],Z=Z[0];;){e:{var qt=I;Ot=F,st=Z;var Jt=$e,Wt=nt,wr=Qt=[0];if((br=_t=[_t])[0]=0,8>st[0])st=7;else{if(!r(qt,Ot[0],"VP8X")){if(oe(qt,Ot[0]+4)!=10){st=3;break e}if(18>st[0]){st=7;break e}var gr=oe(qt,Ot[0]+8),qr=1+Y(qt,Ot[0]+12);if(2147483648<=qr*(qt=1+Y(qt,Ot[0]+15))){st=3;break e}wr!=null&&(wr[0]=gr),Jt!=null&&(Jt[0]=qr),Wt!=null&&(Wt[0]=qt),Ot[0]+=18,st[0]-=18,br[0]=1}st=0}}if(_t=_t[0],Qt=Qt[0],st!=0)return st;if(Ot=!!(2&Qt),!dt&&_t)return 3;if(je!=null&&(je[0]=!!(16&Qt)),we!=null&&(we[0]=Ot),Ce!=null&&(Ce[0]=0),we=$e[0],Qt=nt[0],_t&&Ot&&Te==null){st=0;break}if(4>Z){st=7;break}if(dt&&_t||!dt&&!_t&&!r(I,F[0],"ALPH")){Z=[Z],mt.na=[mt.na],mt.P=[mt.P],mt.Sa=[mt.Sa];e:{gr=I,st=F,dt=Z;var br=mt.gb;Jt=mt.na,Wt=mt.P,wr=mt.Sa,qr=22,t(gr!=null),t(dt!=null),qt=st[0];var Ln=dt[0];for(t(Jt!=null),t(wr!=null),Jt[0]=null,Wt[0]=null,wr[0]=0;;){if(st[0]=qt,dt[0]=Ln,8>Ln){st=7;break e}var Kn=oe(gr,qt+4);if(4294967286<Kn){st=3;break e}var Cn=8+Kn+1&-2;if(qr+=Cn,0<br&&qr>br){st=3;break e}if(!r(gr,qt,"VP8 ")||!r(gr,qt,"VP8L")){st=0;break e}if(Ln[0]<Cn){st=7;break e}r(gr,qt,"ALPH")||(Jt[0]=gr,Wt[0]=qt+8,wr[0]=Kn),qt+=Cn,Ln-=Cn}}if(Z=Z[0],mt.na=mt.na[0],mt.P=mt.P[0],mt.Sa=mt.Sa[0],st!=0)break}Z=[Z],mt.Ja=[mt.Ja],mt.xa=[mt.xa];e:if(br=I,st=F,dt=Z,Jt=mt.gb[0],Wt=mt.Ja,wr=mt.xa,gr=st[0],qt=!r(br,gr,"VP8 "),qr=!r(br,gr,"VP8L"),t(br!=null),t(dt!=null),t(Wt!=null),t(wr!=null),8>dt[0])st=7;else{if(qt||qr){if(br=oe(br,gr+4),12<=Jt&&br>Jt-12){st=3;break e}if(Ct&&br>dt[0]-8){st=7;break e}Wt[0]=br,st[0]+=8,dt[0]-=8,wr[0]=qr}else wr[0]=5<=dt[0]&&br[gr+0]==47&&!(br[gr+4]>>5),Wt[0]=dt[0];st=0}if(Z=Z[0],mt.Ja=mt.Ja[0],mt.xa=mt.xa[0],F=F[0],st!=0)break;if(4294967286<mt.Ja)return 3;if(Ce==null||Ot||(Ce[0]=mt.xa?2:1),we=[we],Qt=[Qt],mt.xa){if(5>Z){st=7;break}Ce=we,Ct=Qt,Ot=je,I==null||5>Z?I=0:5<=Z&&I[F+0]==47&&!(I[F+4]>>5)?(dt=[0],br=[0],Jt=[0],B(Wt=new M,I,F,Z),Rt(Wt,dt,br,Jt)?(Ce!=null&&(Ce[0]=dt[0]),Ct!=null&&(Ct[0]=br[0]),Ot!=null&&(Ot[0]=Jt[0]),I=1):I=0):I=0}else{if(10>Z){st=7;break}Ce=Qt,I==null||10>Z||!cr(I,F+3,Z-3)?I=0:(Ct=I[F+0]|I[F+1]<<8|I[F+2]<<16,Ot=16383&(I[F+7]<<8|I[F+6]),I=16383&(I[F+9]<<8|I[F+8]),1&Ct||3<(Ct>>1&7)||!(Ct>>4&1)||Ct>>5>=mt.Ja||!Ot||!I?I=0:(we&&(we[0]=Ot),Ce&&(Ce[0]=I),I=1))}if(!I||(we=we[0],Qt=Qt[0],_t&&($e[0]!=we||nt[0]!=Qt)))return 3;Te!=null&&(Te[0]=mt,Te.offset=F-Te.w,t(4294967286>F-Te.w),t(Te.offset==Te.ha-Z));break}return st==0||st==7&&_t&&Te==null?(je!=null&&(je[0]|=mt.na!=null&&0<mt.na.length),le!=null&&(le[0]=we),ve!=null&&(ve[0]=Qt),0):st}function Gd(I,F,Z){var le=F.width,ve=F.height,je=0,we=0,Ce=le,Te=ve;if(F.Da=I!=null&&0<I.Da,F.Da&&(Ce=I.cd,Te=I.bd,je=I.v,we=I.j,11>Z||(je&=-2,we&=-2),0>je||0>we||0>=Ce||0>=Te||je+Ce>le||we+Te>ve))return 0;if(F.v=je,F.j=we,F.va=je+Ce,F.o=we+Te,F.U=Ce,F.T=Te,F.da=I!=null&&0<I.da,F.da){if(!ye(Ce,Te,Z=[I.ib],je=[I.hb]))return 0;F.ib=Z[0],F.hb=je[0]}return F.ob=I!=null&&I.ob,F.Kb=I==null||!I.Sd,F.da&&(F.ob=F.ib<3*le/4&&F.hb<3*ve/4,F.Kb=0),1}function Lf(I){if(I==null)return 2;if(11>I.S){var F=I.f.RGBA;F.fb+=(I.height-1)*F.A,F.A=-F.A}else F=I.f.kb,I=I.height,F.O+=(I-1)*F.fa,F.fa=-F.fa,F.N+=(I-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(I-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(I-1)*F.lb,F.lb=-F.lb);return 0}function dh(I,F,Z,le){if(le==null||0>=I||0>=F)return 2;if(Z!=null){if(Z.Da){var ve=Z.cd,je=Z.bd,we=-2&Z.v,Ce=-2&Z.j;if(0>we||0>Ce||0>=ve||0>=je||we+ve>I||Ce+je>F)return 2;I=ve,F=je}if(Z.da){if(!ye(I,F,ve=[Z.ib],je=[Z.hb]))return 2;I=ve[0],F=je[0]}}le.width=I,le.height=F;e:{var Te=le.width,$e=le.height;if(I=le.S,0>=Te||0>=$e||!(I>=gi&&13>I))I=2;else{if(0>=le.Rd&&le.sd==null){we=je=ve=F=0;var nt=(Ce=Te*D1[I])*$e;if(11>I||(je=($e+1)/2*(F=(Te+1)/2),I==12&&(we=(ve=Te)*$e)),($e=i(nt+2*je+we))==null){I=1;break e}le.sd=$e,11>I?((Te=le.f.RGBA).eb=$e,Te.fb=0,Te.A=Ce,Te.size=nt):((Te=le.f.kb).y=$e,Te.O=0,Te.fa=Ce,Te.Fd=nt,Te.f=$e,Te.N=0+nt,Te.Ab=F,Te.Cd=je,Te.ea=$e,Te.W=0+nt+je,Te.Db=F,Te.Ed=je,I==12&&(Te.F=$e,Te.J=0+nt+2*je),Te.Tc=we,Te.lb=ve)}if(F=1,ve=le.S,je=le.width,we=le.height,ve>=gi&&13>ve)if(11>ve)I=le.f.RGBA,F&=(Ce=Math.abs(I.A))*(we-1)+je<=I.size,F&=Ce>=je*D1[ve],F&=I.eb!=null;else{I=le.f.kb,Ce=(je+1)/2,nt=(we+1)/2,Te=Math.abs(I.fa),$e=Math.abs(I.Ab);var _t=Math.abs(I.Db),Ct=Math.abs(I.lb),mt=Ct*(we-1)+je;F&=Te*(we-1)+je<=I.Fd,F&=$e*(nt-1)+Ce<=I.Cd,F=(F&=_t*(nt-1)+Ce<=I.Ed)&Te>=je&$e>=Ce&_t>=Ce,F&=I.y!=null,F&=I.f!=null,F&=I.ea!=null,ve==12&&(F&=Ct>=je,F&=mt<=I.Tc,F&=I.F!=null)}else F=0;I=F?0:2}}return I!=0||Z!=null&&Z.fd&&(I=Lf(le)),I}var Ds=64,Yd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],uh=24,hh=32,Bf=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Je("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(I){return I},T.Predictor2=function(I,F,Z){return F[Z+0]},T.Predictor3=function(I,F,Z){return F[Z+1]},T.Predictor4=function(I,F,Z){return F[Z-1]},T.Predictor5=function(I,F,Z){return vt(vt(I,F[Z+1]),F[Z+0])},T.Predictor6=function(I,F,Z){return vt(I,F[Z-1])},T.Predictor7=function(I,F,Z){return vt(I,F[Z+0])},T.Predictor8=function(I,F,Z){return vt(F[Z-1],F[Z+0])},T.Predictor9=function(I,F,Z){return vt(F[Z+0],F[Z+1])},T.Predictor10=function(I,F,Z){return vt(vt(I,F[Z-1]),vt(F[Z+0],F[Z+1]))},T.Predictor11=function(I,F,Z){var le=F[Z+0];return 0>=At(le>>24&255,I>>24&255,(F=F[Z-1])>>24&255)+At(le>>16&255,I>>16&255,F>>16&255)+At(le>>8&255,I>>8&255,F>>8&255)+At(255&le,255&I,255&F)?le:I},T.Predictor12=function(I,F,Z){var le=F[Z+0];return(Re((I>>24&255)+(le>>24&255)-((F=F[Z-1])>>24&255))<<24|Re((I>>16&255)+(le>>16&255)-(F>>16&255))<<16|Re((I>>8&255)+(le>>8&255)-(F>>8&255))<<8|Re((255&I)+(255&le)-(255&F)))>>>0},T.Predictor13=function(I,F,Z){var le=F[Z-1];return(ht((I=vt(I,F[Z+0]))>>24&255,le>>24&255)<<24|ht(I>>16&255,le>>16&255)<<16|ht(I>>8&255,le>>8&255)<<8|ht(I>>0&255,le>>0&255))>>>0};var vg=T.PredictorAdd0;T.PredictorAdd1=Tt,Je("Predictor2","PredictorAdd2"),Je("Predictor3","PredictorAdd3"),Je("Predictor4","PredictorAdd4"),Je("Predictor5","PredictorAdd5"),Je("Predictor6","PredictorAdd6"),Je("Predictor7","PredictorAdd7"),Je("Predictor8","PredictorAdd8"),Je("Predictor9","PredictorAdd9"),Je("Predictor10","PredictorAdd10"),Je("Predictor11","PredictorAdd11"),Je("Predictor12","PredictorAdd12"),Je("Predictor13","PredictorAdd13");var dp=T.PredictorAdd2;xe("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Jx,Jo=T.ColorIndexInverseTransform,Ws=T.MapARGB,Kd=T.VP8LColorIndexInverseTransformAlpha,up=T.MapAlpha,sd=T.VP8LPredictorsAdd=[];sd.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Xd,Ri,si,Qd,ro,_l,mc,El,Ha,Dl,ps,no,fh,pc,Uf,Jd,Zd,eu,mh,$f,tu,id,ph,Wa,Mo,kn,_n,ja,ns=i(511),Zo=i(2041),ru=i(225),nu=i(767),od=0,Zx=Zo,xh=ru,Gs=nu,el=ns,gi=0,qf=1,xc=2,hp=3,vh=4,ld=5,e0=6,fp=7,au=8,cd=9,Vf=10,t0=[2,3,7],tl=[3,3,11],Ro=[280,256,256,256,40],gh=[0,1,1,1,0],dd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ud=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],S1=8,mp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],pp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],As=null,Ga=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],su=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hd=[],Fi=[],Fo=[],k1=1,zf=2,gc=[],Ys=[];Bt("UpsampleRgbLinePair",Pn,3),Bt("UpsampleBgrLinePair",Ta,3),Bt("UpsampleRgbaLinePair",Cl,4),Bt("UpsampleBgraLinePair",Hs,4),Bt("UpsampleArgbLinePair",rs,4),Bt("UpsampleRgba4444LinePair",ts,2),Bt("UpsampleRgb565LinePair",Ra,2);var fd=T.UpsampleRgbLinePair,iu=T.UpsampleBgrLinePair,bc=T.UpsampleRgbaLinePair,r0=T.UpsampleBgraLinePair,n0=T.UpsampleArgbLinePair,Hf=T.UpsampleRgba4444LinePair,a0=T.UpsampleRgb565LinePair,yc=16,Ts=1<<yc-1,ou=-227,s0=482,rC=6,_1=0,nC=i(256),Is=i(256),bg=i(256),xp=i(256),vp=i(s0-ou),yg=i(s0-ou);kl("YuvToRgbRow",Pn,3),kl("YuvToBgrRow",Ta,3),kl("YuvToRgbaRow",Cl,4),kl("YuvToBgraRow",Hs,4),kl("YuvToArgbRow",rs,4),kl("YuvToRgba4444Row",ts,2),kl("YuvToRgb565Row",Ra,2);var jh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],aC=[8,7,6,4,4,2,2,2,1,1,1,1],E1=1;this.WebPDecodeRGBA=function(I,F,Z,le,ve){var je=qf,we=new Pf,Ce=new Ke;we.ba=Ce,Ce.S=je,Ce.width=[Ce.width],Ce.height=[Ce.height];var Te=Ce.width,$e=Ce.height,nt=new Ge;if(nt==null||I==null)var _t=2;else t(nt!=null),_t=Ff(I,F,Z,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(_t!=0?Te=0:(Te!=null&&(Te[0]=nt.width[0]),$e!=null&&($e[0]=nt.height[0]),Te=1),Te){Ce.width=Ce.width[0],Ce.height=Ce.height[0],le!=null&&(le[0]=Ce.width),ve!=null&&(ve[0]=Ce.height);e:{if(le=new ks,(ve=new ip).data=I,ve.w=F,ve.ha=Z,ve.kd=1,F=[0],t(ve!=null),((I=Ff(ve.data,ve.w,ve.ha,null,null,null,F,null,ve))==0||I==7)&&F[0]&&(I=4),(F=I)==0){if(t(we!=null),le.data=ve.data,le.w=ve.w+ve.offset,le.ha=ve.ha-ve.offset,le.put=bt,le.ac=it,le.bc=Kt,le.ma=we,ve.xa){if((I=wt())==null){we=1;break e}if(function(Ct,mt){var Qt=[0],Ot=[0],st=[0];t:for(;;){if(Ct==null)return 0;if(mt==null)return Ct.a=2,0;if(Ct.l=mt,Ct.a=0,B(Ct.m,mt.data,mt.w,mt.ha),!Rt(Ct.m,Qt,Ot,st)){Ct.a=3;break t}if(Ct.xb=zf,mt.width=Qt[0],mt.height=Ot[0],!at(Qt[0],Ot[0],1,Ct,null))break t;return 1}return t(Ct.a!=0),0}(I,le)){if(le=(F=dh(le.width,le.height,we.Oa,we.ba))==0){t:{le=I;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((Z=le.l)!=null),t((ve=Z.ma)!=null),le.xb!=0){if(le.ca=ve.ba,le.tb=ve.tb,t(le.ca!=null),!Gd(ve.Oa,Z,hp)){le.a=2;break r}if(!Nt(le,Z.width)||Z.da)break r;if((Z.da||He(le.ca.S))&&yt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&yt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!Se(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Ve(le,le.V,le.Ba,le.c,le.i,Z.o,Ue))break r;ve.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(F=I.a)}else F=I.a}else{if((I=new gt)==null){we=1;break e}if(I.Fa=ve.na,I.P=ve.P,I.qc=ve.Sa,Gr(I,le)){if((F=dh(le.width,le.height,we.Oa,we.ba))==0){if(I.Aa=0,Z=we.Oa,t((ve=I)!=null),Z!=null){if(0<(Te=0>(Te=Z.Md)?0:100<Te?255:255*Te/100)){for($e=nt=0;4>$e;++$e)12>(_t=ve.pb[$e]).lc&&(_t.ia=Te*aC[0>_t.lc?0:_t.lc]>>3),nt|=_t.ia;nt&&(alert("todo:VP8InitRandom"),ve.ia=1)}ve.Ga=Z.Id,100<ve.Ga?ve.Ga=100:0>ve.Ga&&(ve.Ga=0)}Ho(I,le)||(F=I.a)}}else F=I.a}F==0&&we.Oa!=null&&we.Oa.fd&&(F=Lf(we.ba))}we=F}je=we!=0?null:11>je?Ce.f.RGBA.eb:Ce.f.kb.y}else je=null;return je};var D1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,A){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(T[A++]);return L}function u(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16)>>>0}function h(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16|T[A+3]<<24)>>>0}new c;var m=[0],p=[0],v=[],g=new c,b=e,y=function(T,A){var L={},P=0,O=!1,J=0,W=0;if(L.frames=[],!function(q,z,K,ee){for(var ne=0;ne<ee;ne++)if(q[z+ne]!=K.charCodeAt(ne))return!0;return!1}(T,A,"RIFF",4)){for(h(T,A+=4),A+=8;A<T.length;){var re=d(T,A),U=h(T,A+=4);A+=4;var Q=U+(1&U);switch(re){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(X=L.frames[P]).src_off=O?W:A-8,X.src_size=J+U+8,P++,O&&(O=!1,J=0,W=0);break;case"VP8X":(X=L.header={}).feature_flags=T[A];var B=A+4;X.canvas_width=1+u(T,B),B+=3,X.canvas_height=1+u(T,B),B+=3;break;case"ALPH":O=!0,J=Q+8,W=A-8;break;case"ANIM":(X=L.header).bgcolor=h(T,A),B=A+4,X.loop_count=(ce=T)[(M=B)+0]<<0|ce[M+1]<<8,B+=2;break;case"ANMF":var te,X;(X=L.frames[P]={}).offset_x=2*u(T,A),A+=3,X.offset_y=2*u(T,A),A+=3,X.width=1+u(T,A),A+=3,X.height=1+u(T,A),A+=3,X.duration=u(T,A),A+=3,te=T[A++],X.dispose=1&te,X.blend=te>>1&1}re!="ANMF"&&(A+=Q)}var ce,M;return L}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var C=y.header?y.header:null,N=y.frames?y.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],p=[C.canvas_width];for(var k=0;k<N.length&&N[k].blend!=0;k++);}var S=N[0],D=g.WebPDecodeRGBA(b,S.src_off,S.src_size,p,m);S.rgba=D,S.imgwidth=p[0],S.imgheight=m[0];for(var E=0;E<p[0]*m[0]*4;E++)v[E]=D[E];return this.width=p,this.height=m,this.data=v,this}(function(e){var t=function(){return typeof x3=="function"},r=function(m,p,v,g){var b=4,y=o;switch(g){case e.image_compression.FAST:b=1,y=i;break;case e.image_compression.MEDIUM:b=6,y=l;break;case e.image_compression.SLOW:b=9,y=c}m=n(m,p,v,y);var C=x3(m,{level:b});return e.__addimage__.arrayBufferToBinaryString(C)},n=function(m,p,v,g){for(var b,y,C,N=m.length/p,k=new Uint8Array(m.length+N),S=u(),D=0;D<N;D+=1){if(C=D*p,b=m.subarray(C,C+p),g)k.set(g(b,v,y),C+D);else{for(var E,T=S.length,A=[];E<T;E+=1)A[E]=S[E](b,v,y);var L=h(A.concat());k.set(A[L],C+D)}y=b}return k},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var v,g=[],b=m.length;g[0]=1;for(var y=0;y<b;y+=1)v=m[y-p]||0,g[y+1]=m[y]-v+256&255;return g},o=function(m,p,v){var g,b=[],y=m.length;b[0]=2;for(var C=0;C<y;C+=1)g=v&&v[C]||0,b[C+1]=m[C]-g+256&255;return b},l=function(m,p,v){var g,b,y=[],C=m.length;y[0]=3;for(var N=0;N<C;N+=1)g=m[N-p]||0,b=v&&v[N]||0,y[N+1]=m[N]+256-(g+b>>>1)&255;return y},c=function(m,p,v){var g,b,y,C,N=[],k=m.length;N[0]=4;for(var S=0;S<k;S+=1)g=m[S-p]||0,b=v&&v[S]||0,y=v&&v[S-p]||0,C=d(g,b,y),N[S+1]=m[S]-C+256&255;return N},d=function(m,p,v){if(m===p&&p===v)return m;var g=Math.abs(p-v),b=Math.abs(m-v),y=Math.abs(m+p-v-v);return g<=b&&g<=y?m:b<=y?p:v},u=function(){return[s,i,o,l,c]},h=function(m){var p=m.map(function(v){return v.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,v,g){var b,y,C,N,k,S,D,E,T,A,L,P,O,J,W,re=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(C=new N8e(m)).imgData,y=C.bits,b=C.colorSpace,k=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){T=(E=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*C.colors),A=new Uint8Array(T);var Q,B=C.pixelBitlength-C.bits;for(J=0,W=0;J<T;J++){for(O=E[J],Q=0;Q<B;)L[W++]=O>>>Q&255,Q+=C.bits;A[J]=O>>>Q&255}}if(C.bits===16){T=(E=new Uint32Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*(32/C.pixelBitlength)*C.colors),A=new Uint8Array(T*(32/C.pixelBitlength)),P=C.colors>1,J=0,W=0;for(var te=0;J<T;)O=E[J++],L[W++]=O>>>0&255,P&&(L[W++]=O>>>16&255,O=E[J++],L[W++]=O>>>0&255),A[te++]=O>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(m=r(L,C.width*C.colors,C.colors,g),D=r(A,C.width,1,g)):(m=L,D=A,re=void 0)}if(C.colorType===3&&(b=this.color_spaces.INDEXED,S=C.palette,C.transparency.indexed)){var X=C.transparency.indexed,ce=0;for(J=0,T=X.length;J<T;++J)ce+=X[J];if((ce/=255)===T-1&&X.indexOf(0)!==-1)N=[X.indexOf(0)];else if(ce!==T){for(E=C.decodePixels(),A=new Uint8Array(E.length),J=0,T=E.length;J<T;J++)A[J]=X[E[J]];D=r(A,C.width,1)}}var M=function(q){var z;switch(q){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(g);return re===this.decode.FLATE_DECODE&&(U="/Predictor "+M+" "),U+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:v,data:m,index:p,filter:re,decodeParameters:U,transparency:N,palette:S,sMask:D,predictor:M,width:C.width,height:C.height,bitsPerComponent:y,colorSpace:b}}}})(en.API),function(e){e.processGIF89A=function(t,r,n,s){var i=new w8e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new h5(100).encode(d,100);return e.processJPEG.call(this,u,r,n,s)},e.processGIF87A=e.processGIF89A}(en.API),wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ea.log("bit decode error:"+r)}},wd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},wd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},wd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},wd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},wd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},wd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},wd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},wd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new wd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new h5(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(en.API),V7.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new V7(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new h5(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(en.API),en.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=n[d],h=n[d+1],m=n[d+2],p=n[d+3];i[l++]=u,i[l++]=h,i[l++]=m,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},en.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$0=en.API,bN=$0.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,m=0,p=e.length,v=0,g=l[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=h&&$n(d[n])==="object"&&!isNaN(parseInt(d[n][v],10))?d[n][v]/u:0,b.push((l[n]||g)/c+m)),v=n;return b},B7=$0.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return $0.processArabic&&(e=$0.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:bN.apply(this,arguments).reduce(function(i,o){return i+o},0)},U7=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},$7=function(e,t,r){r||(r={});var n,s,i,o,l,c,d,u=[],h=[u],m=r.textIndent||0,p=0,v=0,g=e.split(" "),b=bN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),C=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?C=C.concat(k.map(function(S,D){return(D&&S.length?`
`:"")+S})):C.push(k[0])}),g=C,c=B7.apply(this,[y,r])}for(i=0,o=g.length;i<o;i++){var N=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),m+p+(v=(s=bN.apply(this,[n,r])).reduce(function(k,S){return k+S},0))>t||N){if(v>t){for(l=U7.apply(this,[n,s,t-(m+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(k,S){return k+S},0)}else u=[n];h.push(u),m=v+c,p=b}else u.push(n),m+=p+v,p=b}return d=c?function(k,S){return(S?y:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},$0.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat($7.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var m,p,v,g,b=["{"];for(var y in h){if(m=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(v=i(m).slice(3),g="-"):(v=i(m).slice(2),g=""),v=g+v.slice(0,-1)+n[v.slice(-1)];else{if($n(m)!=="object")throw new Error("Don't know what to do with value type "+$n(m)+".");v=o(m)}b.push(p+v)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,g,b={},y=1,C=b,N=[],k="",S="",D=h.length-1,E=1;E<D;E+=1)(g=h[E])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(N.push([C,v]),C={},v=void 0):g=="}"?((p=N.pop())[0][p[1]]=C,v=void 0,C=p[0]):g=="-"?y=-1:v===void 0?r.hasOwnProperty(g)?(k+=r[g],v=parseInt(k,16)*y,y=1,k=""):k+=g:r.hasOwnProperty(g)?(S+=r[g],C[v]=parseInt(S,16)*y,y=1,v=void 0,S=""):S+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=d.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(en.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Kb(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(en),function(e){function t(){return(nn.canvg?Promise.resolve(nn.canvg):u3(()=>import("./index.es-DxxAgHz6.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}en.API.addSvgAsImage=function(r,n,s,i,o,l,c,d){if(isNaN(n)||isNaN(s))throw Ea.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ea.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,s,i,o,c,d)})}}(),en.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},en.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(v,g){var b,y=!1;for(b=0;b<v.length;b+=1)v[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if($n(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(en.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(i).sort(function(p,v){return p-v})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var b=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+K0(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var C=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+K0(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+K0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+C+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+K0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+K0(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,p=h.activeFontKey,v=h.fonts,g=p,b="",y=0,C="",N=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(C=l,g=p,Array.isArray(l)&&(C=l[0]),y=0;y<C.length;y+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[C[y].charCodeAt(0)]),o||C[y].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?b+=C[y]:b+="";var k="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?k=m(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(k=r(b,v[g])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(en),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(en.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,d,u,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,N=0;this.__bidiEngine__={};var k=function(P){var O=P.charCodeAt(),J=O>>8,W=g[J];return W!==void 0?h[256*W+(255&O)]:J===252||J===253?"AL":y.test(J)?"L":J===8?"R":"N"},S=function(P){for(var O,J=0;J<P.length;J++){if((O=k(P.charAt(J)))==="L")return!1;if(O==="R")return!0}return!1},D=function(P,O,J,W){var re,U,Q,B,te=O[W];switch(te){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(te="AN");break;case"AL":C=!0,te="R";break;case"WS":te="N";break;case"CS":W<1||W+1>=O.length||(re=J[W-1])!=="EN"&&re!=="AN"||(U=O[W+1])!=="EN"&&U!=="AN"?te="N":C&&(U="AN"),te=U===re?U:"N";break;case"ES":te=(re=W>0?J[W-1]:"B")==="EN"&&W+1<O.length&&O[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&J[W-1]==="EN"){te="EN";break}if(C){te="N";break}for(Q=W+1,B=O.length;Q<B&&O[Q]==="ET";)Q++;te=Q<B&&O[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(B=O.length,Q=W+1;Q<B&&O[Q]==="NSM";)Q++;if(Q<B){var X=P[W],ce=X>=1425&&X<=2303||X===64286;if(re=O[Q],ce&&(re==="R"||re==="AL")){te="R";break}}}te=W<1||(re=O[W-1])==="B"?"N":J[W-1];break;case"B":C=!1,s=!0,te=N;break;case"S":i=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":te="N"}return te},E=function(P,O,J){var W=P.split("");return J&&T(W,J,{hiLevel:N}),W.reverse(),O&&O.reverse(),W.join("")},T=function(P,O,J){var W,re,U,Q,B,te=-1,X=P.length,ce=0,M=[],q=N?p:m,z=[];for(C=!1,s=!1,i=!1,re=0;re<X;re++)z[re]=k(P[re]);for(U=0;U<X;U++){if(B=ce,M[U]=D(P,z,M,U),W=240&(ce=q[B][v[M[U]]]),ce&=15,O[U]=Q=q[ce][5],W>0)if(W===16){for(re=te;re<U;re++)O[re]=1;te=-1}else te=-1;if(q[ce][6])te===-1&&(te=U);else if(te>-1){for(re=te;re<U;re++)O[re]=Q;te=-1}z[U]==="B"&&(O[U]=0),J.hiLevel|=Q}i&&function(K,ee,ne){for(var ae=0;ae<ne;ae++)if(K[ae]==="S"){ee[ae]=N;for(var ie=ae-1;ie>=0&&K[ie]==="WS";ie--)ee[ie]=N}}(z,O,X)},A=function(P,O,J,W,re){if(!(re.hiLevel<P)){if(P===1&&N===1&&!s)return O.reverse(),void(J&&J.reverse());for(var U,Q,B,te,X=O.length,ce=0;ce<X;){if(W[ce]>=P){for(B=ce+1;B<X&&W[B]>=P;)B++;for(te=ce,Q=B-1;te<Q;te++,Q--)U=O[te],O[te]=O[Q],O[Q]=U,J&&(U=J[te],J[te]=J[Q],J[Q]=U);ce=B}ce++}}},L=function(P,O,J){var W=P.split(""),re={hiLevel:N};return J||(J=[]),T(W,J,re),function(U,Q,B){if(B.hiLevel!==0&&u)for(var te,X=0;X<U.length;X++)Q[X]===1&&(te=b.indexOf(U[X]))>=0&&(U[X]=b[te+1])}(W,J,re),A(2,W,O,J,re),A(1,W,O,J,re),W.join("")};return this.__bidiEngine__.doBidiReorder=function(P,O,J){if(function(re,U){if(U)for(var Q=0;Q<re.length;Q++)U[Q]=Q;l===void 0&&(l=S(re)),d===void 0&&(d=S(re))}(P,O),o||!c||d)if(o&&c&&l^d)N=l?1:0,P=E(P,O,J);else if(!o&&c&&d)N=l?1:0,P=L(P,O,J),P=E(P,O);else if(!o||l||c||d){if(o&&!c&&l^d)P=E(P,O),l?(N=0,P=L(P,O,J)):(N=1,P=L(P,O,J),P=E(P,O));else if(o&&l&&!c&&d)N=1,P=L(P,O,J),P=E(P,O);else if(!o&&!c&&l^d){var W=u;l?(N=1,P=L(P,O,J),N=0,u=!1,P=L(P,O,J),u=W):(N=0,P=L(P,O,J),P=E(P,O),N=1,u=!1,P=L(P,O,J),u=W,P=E(P,O))}}else N=0,P=L(P,O,J);else N=l?1:0,P=L(P,O,J);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,d=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(en),en.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Gm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new L8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new S8e(this.contents),this.head=new k8e(this),this.name=new T8e(this),this.cmap=new ZK(this),this.toUnicode={},this.hhea=new _8e(this),this.maxp=new I8e(this),this.hmtx=new P8e(this),this.post=new D8e(this),this.os2=new E8e(this),this.loca=new F8e(this),this.glyf=new O8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Vd,Gm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),S8e=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,d,u,h,m,p,v,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(s=new Gm).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,v=[],r)for(m=r[g],s.writeString(g),s.writeInt(e(m)),s.writeInt(d),s.writeInt(m.length),v=v.concat(m),g==="head"&&(l=d),d+=m.length;d%4;)v.push(0),d++;return s.write(v),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=eX.call(r);r.length%4;)r.push(0);for(i=new Gm(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),C8e={}.hasOwnProperty,sh=function(e,t){for(var r in t)C8e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Vd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var k8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Gm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),z7=function(){function e(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),d=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),u=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),s=(this.length-t.pos+this.offset)/2,l=function(){var k,S;for(S=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)S.push(t.readUInt16());return S}(),c=y=0,N=i.length;y<N;c=++y)for(b=i[c],n=C=v=g[c];v<=b?C<=b:C>=b;n=v<=b?++C:--C)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-v)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A,L,P,O,J,W,re,U,Q,B,te,X,ce,M,q,z,K,ee,ne,ae,ie,G,de,Y;switch(W=new Gm,o=Object.keys(t).sort(function(oe,Se){return oe-Se}),r){case"macroman":for(g=0,b=function(){var oe=[];for(v=0;v<256;++v)oe.push(0);return oe}(),C={0:0},i={},re=0,te=o.length;re<te;re++)C[ie=t[s=o[re]]]==null&&(C[ie]=++g),i[s]={old:t[s],new:C[t[s]]},b[s]=C[t[s]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(b),{charMap:i,subtable:W.data,maxGlyphID:g+1};case"unicode":for(O=[],h=[],N=0,C={},n={},y=d=null,U=0,X=o.length;U<X;U++)C[S=t[s=o[U]]]==null&&(C[S]=++N),n[s]={old:S,new:C[S]},l=C[S]-s,y!=null&&l===d||(y&&h.push(y),O.push(s),d=l),y=s;for(y&&h.push(y),h.push(65535),O.push(65535),L=2*(A=O.length),T=2*Math.pow(Math.log(A)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,E=2*A-T,c=[],D=[],p=[],v=Q=0,ce=O.length;Q<ce;v=++Q){if(P=O[v],u=h[v],P===65535){c.push(0),D.push(0);break}if(P-(J=n[P].new)>=32768)for(c.push(0),D.push(2*(p.length+A-v)),s=B=P;P<=u?B<=u:B>=u;s=P<=u?++B:--B)p.push(n[s].new);else c.push(J-P),D.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*A+2*p.length),W.writeUInt16(0),W.writeUInt16(L),W.writeUInt16(T),W.writeUInt16(m),W.writeUInt16(E),ne=0,M=h.length;ne<M;ne++)s=h[ne],W.writeUInt16(s);for(W.writeUInt16(0),ae=0,q=O.length;ae<q;ae++)s=O[ae],W.writeUInt16(s);for(G=0,z=c.length;G<z;G++)l=c[G],W.writeUInt16(l);for(de=0,K=D.length;de<K;de++)k=D[de],W.writeUInt16(k);for(Y=0,ee=p.length;Y<ee;Y++)g=p[Y],W.writeUInt16(g);return{charMap:n,subtable:W.data,maxGlyphID:N+1}}},e}(),ZK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new z7(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=z7.encode(r,n),(i=new Gm).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),_8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),E8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),D8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),A8e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},T8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,d,u,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,m=s.length;h<m;o=++h)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new A8e(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),I8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),P8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,m,p;for(p=[],u=0,h=(m=this.metrics).length;u<h;u++)o=m[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),eX=[].slice,O8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,d,u,h,m;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new Gm(n.read(i))).readShort(),u=c.readShort(),m=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new R8e(c,u,m,d,h):new M8e(c,l,u,m,d,h),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),M8e=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),R8e=function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Gm(eX.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),F8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,Vd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},t}(),L8e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y;for(s in n=ZK.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[s]).old]=c.new;for(v in m=n.maxGlyphID,o)v in p||(p[v]=m++);return u=function(C){var N,k;for(N in k={},C)k[C[N]]=N;return k}(p),h=Object.keys(u).sort(function(C,N){return C-N}),g=function(){var C,N,k;for(k=[],C=0,N=h.length;C<N;C++)l=h[C],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();en.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function B8e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState([]),[u,h]=w.useState(!1),[m,p]=w.useState(!1),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState([]),[k,S]=w.useState(0),[D,E]=w.useState(0),[T,A]=w.useState(0),[L,P]=w.useState(0),[O,J]=w.useState(1),[W,re]=w.useState({salary:"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString()}),[U,Q]=w.useState(localStorage.getItem("activeRole")||"");JSON.parse(localStorage.getItem("user"));const B=["January","February","March","April","May","June","July","August","September","October","November","December"],te=[],X=new Date().getFullYear();for(let he=X-5;he<=X+1;he++)te.push(he.toString());w.useEffect(()=>{M(),q(),ce()},[]);const ce=async()=>{try{const he=await Oe.get("/api/departments");d(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching departments:",he)}},M=async()=>{try{const he=localStorage.getItem("activeRole")||"";let xe;he==="SuperAdmin"?xe=await Oe.get("/api/faculties"):xe=await Oe.get("/api/faculties"),t(Array.isArray(xe.data)?xe.data:[])}catch(he){console.error("Error fetching faculties:",he)}},q=async()=>{try{const he=await Oe.get("/api/salary-records");n(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching salary records:",he)}},z=async he=>{try{const xe=await Oe.get(`/api/salary-records/employee/${he}`);N(Array.isArray(xe.data)?xe.data:[])}catch(xe){console.error("Error fetching employee salary history:",xe),N([])}},K=he=>{const xe=he.joinDate||new Date().toISOString().split("T")[0],me=new Date(xe),De=me.toLocaleString("en-US",{month:"long"}),Ye=me.getFullYear().toString();g(he),re({salary:he.salary||"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString(),minDate:xe,joinMonth:De,joinYear:Ye}),P(0),S(0),E(0),A(0),J(1),h(!0),ne(he.employeeId,new Date().toLocaleString("en-US",{month:"long"}),new Date().getFullYear().toString())},ee=he=>{g(he),y(he.employeeId),z(he.employeeId),p(!0)},ne=async(he,xe,me)=>{try{const De=B.indexOf(xe)+1,Ye=De<10?`0${De}`:`${De}`,jt=await Oe.get("/api/salary-records/leave-count",{params:{employeeId:he,month:Ye,year:me}});S(jt.data.leaveCount||0),E(jt.data.sundayCount||0),A(jt.data.totalDays||0)}catch(De){console.error("Error fetching leave count:",De),S(0),E(0),A(0)}},ae=()=>{h(!1),g(null)},ie=()=>{p(!1),y(null),g(null),N([])},G=he=>{re({...W,[he.target.name]:he.target.value})},de=he=>{const xe=he.target.value;re({...W,month:xe}),v&&ne(v.employeeId,xe,W.year)},Y=he=>{const xe=he.target.value;if(xe===W.joinYear){const me=B.indexOf(W.month),De=B.indexOf(W.joinMonth);if(me<De){re({...W,year:xe,month:W.joinMonth}),v&&ne(v.employeeId,W.joinMonth,xe);return}}re({...W,year:xe}),v&&ne(v.employeeId,W.month,xe)},oe=he=>{P(he.target.value)},Se=he=>{const xe=parseInt(he.target.value);J(isNaN(xe)||xe<0?0:xe)},ue=()=>Math.max(0,k-O),se=()=>{const he=ue()*L;return W.salary-he},ye=async()=>{try{const me=ue(),De=me*L,Ye=se();await Oe.post("/api/salary-records/save",{facultyId:v._id,employeeId:v.employeeId,month:W.month,year:W.year,salary:W.salary,leaveCount:k,sundayCount:D,totalLeaveCount:T,paidLeaveCount:O,deductibleDays:me,deductionPerDay:L,totalDeduction:De,payableSalary:Ye,date:W.date});var he=document.getElementById("standard-modal"),xe=bootstrap.Modal.getInstance(he);xe||(xe=new bootstrap.Modal(he)),xe.hide(),q(),alert("Salary saved successfully!"),ae()}catch(me){me.response&&me.response.status===400?alert("Salary already recorded for this employee in the same month!"):console.error("Error saving salary:",me)}},Ne=async(he,xe,me,De=null)=>{const Ye=De?{firstName:De.facultyId?.firstName||"Unknown",lastName:De.facultyId?.lastName||"Unknown",employeeId:De.employeeId,department:De.facultyId?.department||"Unknown"}:v;if(!Ye)throw new Error("Employee information is required");try{const jt=De?De.date:W.date,Qe=De?De.month:W.month,Xe=De?De.year:W.year,Be=De?De.salary:W.salary,He=De?De.leaveCount:k,ft=De?De.sundayCount||0:D,Ae=De?De.paidLeaveCount||0:O,Ke=De?De.deductibleDays||0:xe,Ge=De?De.deductionPerDay||0:L,ct=De?De.totalDeduction||0:me,Mt=De?De.payableSalary:he,Ie=new en;Ie.setFontSize(16),Ie.setFont(void 0,"bold"),Ie.text("Your Company Name",Ie.internal.pageSize.width/2,20,{align:"center"}),Ie.setFontSize(10),Ie.setFont(void 0,"normal"),Ie.text("Company Address Line 1",Ie.internal.pageSize.width/2,30,{align:"center"}),Ie.text("Company Address Line 2",Ie.internal.pageSize.width/2,35,{align:"center"}),Ie.text("Phone: (123) 456-7890 | Email: company@email.com",Ie.internal.pageSize.width/2,40,{align:"center"}),Ie.setLineWidth(.5),Ie.line(20,45,190,45),Ie.setFontSize(14),Ie.setFont(void 0,"bold"),Ie.text("Salary Receipt",Ie.internal.pageSize.width/2,55,{align:"center"}),Ie.setFontSize(10),Ie.setFont(void 0,"normal");const ke=new Date(jt),it=`${String(ke.getDate()).padStart(2,"0")}-${String(ke.getMonth()+1).padStart(2,"0")}-${ke.getFullYear()}`;Ie.text(`Date: ${it}`,170,55,{align:"right"}),Ie.setFontSize(11),Ie.text("Employee Name:",20,70),Ie.text(`${Ye.firstName} ${Ye.lastName}`,80,70),Ie.text("Employee ID:",20,77),Ie.text(`${Ye.employeeId}`,80,77),Ie.text("Department:",20,84),Ie.text(`${Ye.department}`,80,84),Ie.text("Month & Year:",20,91),Ie.text(`${Qe} ${Xe}`,80,91),Ie.setLineWidth(.1),Ie.line(20,105,190,105),Ie.setFont(void 0,"bold"),Ie.text("Description",25,112),Ie.text("Amount",170,112),Ie.line(20,115,190,115),Ie.setFont(void 0,"normal"),Ie.text("Basic Salary",25,122),Ie.text(`${Be?.toFixed(2)}/-`,185,122,{align:"right"}),Ie.text("Leave Information",25,129),Ie.text("Paid Leave",25,136),Ie.text(`${Ae}`,185,136,{align:"right"}),Ie.text("Deductible Leave Days",25,143),Ie.text(`${Ke}`,185,143,{align:"right"}),Ie.text("Deduction Per Day",25,150),Ie.text(`${Ge.toFixed(2)}/-`,185,150,{align:"right"}),Ie.line(20,155,190,155),Ie.text("Total Deduction",25,162),Ie.text(`${ct.toFixed(2)}/-`,185,162,{align:"right"}),Ie.line(20,167,190,167),Ie.setFont(void 0,"bold"),Ie.text("Payable Salary",25,174),Ie.text(`${Mt.toFixed(2)}/-`,185,174,{align:"right"}),Ie.line(20,178,190,178),Ie.setFontSize(8),Ie.text("This is a computer-generated document. No signature required.",Ie.internal.pageSize.width/2,270,{align:"center"}),Ie.save(`Salary_Receipt_${Ye.firstName}_${Qe}_${Xe}.pdf`)}catch(jt){throw console.error("Error generating salary receipt:",jt),new Error(`Failed to generate salary receipt: ${jt.message}`)}},Le=async he=>{if(!he)return;const xe=he.deductibleDays||0,me=he.totalDeduction||0,De=he.payableSalary||he.salary;try{await Ne(De,xe,me,he)}catch(Ye){console.error("Error downloading salary receipt:",Ye),alert("Failed to generate salary receipt. Please try again.")}},Je=e.filter(he=>{const xe=`${he.firstName} ${he.lastName}`.toLowerCase(),me=s.toLowerCase(),De=!s||xe.includes(me)||he.employeeId&&he.employeeId.toLowerCase().includes(me)||he.phone&&he.phone.includes(me),Ye=!o||he.department===o;return De&&Ye}),[lt,vt]=w.useState(1),[Re]=w.useState(5),ht=he=>vt(he),At=lt*Re,Tt=At-Re,Ht=Je.slice(Tt,At),pe=Math.ceil(Je.length/Re);return a.jsx("div",{className:"contanier",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row align-items-center",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{className:"page-title",children:"Payroll Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, employee ID, phone",value:s,onChange:he=>i(he.target.value)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"All Departments"}),a.jsxs("select",{className:"form-select",value:o,onChange:he=>l(he.target.value),children:[a.jsx("option",{value:"",children:"All Departments"}),c.map(he=>a.jsx("option",{value:he.name,children:he.departmentName},he._id))]})]})})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Base Salary"}),a.jsx("th",{className:"text-center",children:"Actions"})]})}),a.jsx("tbody",{children:Ht.length>0?Ht.map(he=>a.jsxs("tr",{children:[a.jsx("td",{children:he.employeeId}),a.jsxs("td",{children:[he.firstName," ",he.lastName]}),a.jsx("td",{children:he.role}),a.jsx("td",{children:he.department}),a.jsx("td",{children:a.jsxs("strong",{children:["",he.salary]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-primary btn-icon btn-sm",onClick:()=>K(he),"data-bs-toggle":"modal","data-bs-target":"#standard-modal",title:"Generate Payslip",children:a.jsx("i",{className:"ti ti-file-dollar"})}),a.jsx("button",{className:"btn btn-secondary btn-icon btn-sm",onClick:()=>ee(he),"data-bs-toggle":"modal","data-bs-target":"#history-modal",title:"View History",children:a.jsx("i",{className:"ti ti-history"})})]})})]},he._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"text-center",children:"No employees found matching your criteria"})})})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${lt===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(lt-1),disabled:lt===1,children:""})}),(()=>{const he=lt,xe=pe,me=[];if(xe<=3)for(let De=1;De<=xe;De++)me.push(a.jsx("li",{className:`page-item ${he===De?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(De),children:De})},De));else me.push(a.jsx("li",{className:`page-item ${he===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(1),children:"1"})},1)),he<=2&&me.push(a.jsx("li",{className:`page-item ${he===2?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(2),children:"2"})},2)),he>3&&me.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"start-ellipsis")),he>2&&he<xe-1&&me.push(a.jsx("li",{className:"page-item active",children:a.jsx("button",{className:"page-link",onClick:()=>ht(he),children:he})},he)),he<xe-2&&me.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"end-ellipsis")),he>=xe-1&&me.push(a.jsx("li",{className:`page-item ${he===xe-1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(xe-1),children:xe-1})},xe-1)),xe>1&&me.push(a.jsx("li",{className:`page-item ${he===xe?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(xe),children:xe})},xe));return me})(),a.jsx("li",{className:`page-item ${lt>=pe?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(lt+1),disabled:lt>=pe,children:""})})]})})})]})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Generate Salary"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:v&&a.jsxs("div",{children:[a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light-primary",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-primary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Month:"}),a.jsx("select",{className:"form-select",name:"month",value:W.month,onChange:de,children:B.filter(he=>{if(W.year===W.joinYear){const xe=B.indexOf(he),me=B.indexOf(W.joinMonth);return xe>=me}return!0}).map(he=>a.jsx("option",{value:he,children:he},he))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Year:"}),a.jsx("select",{className:"form-select",name:"year",value:W.year,onChange:Y,children:te.filter(he=>parseInt(he)>=parseInt(W.joinYear)).map(he=>a.jsx("option",{value:he,children:he},he))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Payment Date:"}),a.jsx("input",{type:"date",name:"date",className:"form-control",value:W.date,onChange:G,min:W.minDate})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Base Salary ():"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:W.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Per Day ():"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:oe})]})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Base Salary ():"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:W.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Deduction Per Day ():"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:oe})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsx("h5",{className:"card-title mb-0",children:"Attendance & Leave Information"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Total Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:k,readOnly:!0}),a.jsxs("small",{className:"text-muted",children:["Excluding ",D," Sundays"]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Paid Leave Allowed:"}),a.jsx("input",{type:"number",className:"form-control",value:O,onChange:Se}),a.jsx("small",{className:"text-muted",children:"Default: 1 paid leave per month"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Deductible Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:ue(),readOnly:!0}),a.jsx("small",{className:"text-muted",children:"After deducting paid leave"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Total Deduction ():"}),a.jsx("input",{type:"number",className:"form-control",value:ue()*L,readOnly:!0})]})})]})})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light-success",children:a.jsx("h5",{className:"card-title mb-0",children:"Final Salary"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Payable Salary ():"}),a.jsx("input",{type:"number",className:"form-control form-control-lg",value:se(),readOnly:!0}),a.jsxs("small",{className:"text-info",children:["Sundays and ",O," paid leave days are not included in salary deductions"]})]}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"h1 mb-0 text-success",children:["",se()]}),a.jsx("div",{className:"small text-muted",children:"Final Amount"})]})})]})})]})]})}),a.jsxs("div",{className:"d-flex justify-content-end p-3 gap-2",children:[a.jsx("button",{className:"btn btn-light","data-bs-dismiss":"modal",children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:ye,children:[a.jsx("i",{className:"ti ti-device-floppy me-1"})," Save"]})]})]})})}),a.jsx("div",{id:"history-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"history-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-secondary text-white",children:[a.jsx("h4",{className:"modal-title",id:"history-modalLabel",children:"Salary History"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsxs("div",{className:"modal-body",children:[v&&a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-secondary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),C.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Month & Year"}),a.jsx("th",{children:"Basic Salary"}),a.jsx("th",{children:"Leave Days"}),a.jsx("th",{children:"Total Deduction"}),a.jsx("th",{children:"Payable Salary"}),a.jsx("th",{children:"Payment Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:[...C].sort((he,xe)=>new Date(xe.date)-new Date(he.date)).map(he=>a.jsxs("tr",{children:[a.jsxs("td",{children:[he.month," ",he.year]}),a.jsxs("td",{children:["",he.salary]}),a.jsxs("td",{children:["Total: ",he.leaveCount||0,a.jsx("span",{className:"text-muted d-block small",children:he.sundayCount>0&&` (Sundays: ${he.sundayCount})`})]}),a.jsx("td",{children:a.jsxs("span",{className:"text-danger",children:["",he.totalDeduction||0]})}),a.jsx("td",{children:a.jsxs("strong",{className:"text-success",children:["",he.payableSalary||he.salary]})}),a.jsx("td",{children:new Date(he.date).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Le(he),children:[a.jsx("i",{className:"ti ti-download me-1"})," ","Download"]})})]},he._id))})]})}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-file-off text-muted",style:{fontSize:"48px"}})}),a.jsx("h5",{children:"No salary records found"}),a.jsx("p",{className:"text-muted",children:"No salary has been processed for this employee yet."})]})]}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-secondary m-3",onClick:ie,"data-bs-dismiss":"modal",style:{width:"200px"},children:"Close"})})]})})})]})})})}function U8e(){const[e,t]=w.useState(!1),r=({children:n})=>a.jsx(vee,{children:a.jsxs("div",{className:`  main-wrapper ${e?"slide-nav":""}`,children:[a.jsx(pee,{}),a.jsx(xee,{toggleSidebar:()=>t(s=>!s)}),a.jsx("div",{className:"page-wrapper ",children:n})]})});return a.jsx(a.Fragment,{children:a.jsx(EJ,{children:a.jsxs(aJ,{children:[a.jsx(ur,{path:"/login",element:a.jsx(Ipe,{})}),a.jsx(ur,{path:"/register",element:a.jsx(Ope,{})}),a.jsx(ur,{path:"/Access",element:a.jsx(I5e,{})}),a.jsx(ur,{path:"/gst",element:a.jsx(r,{children:a.jsx(P5e,{})})}),a.jsx(ur,{path:"loginscreen",element:a.jsx(Ppe,{})}),a.jsx(ur,{path:"/company-form",element:a.jsx(r,{children:a.jsx(b5e,{})})}),a.jsx(ur,{path:"/",element:a.jsx(r,{children:a.jsx(Tpe,{})})}),a.jsx(ur,{path:"/eway",element:a.jsx(r,{children:a.jsx(T5e,{})})}),a.jsx(ur,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(VB,{})})}),a.jsx(ur,{path:"/PurchaseIndentsummary",element:a.jsx(r,{children:a.jsx(USe,{})})}),a.jsx(ur,{path:"/PurchaseOrderList",element:a.jsx(r,{children:a.jsx(h5e,{})})}),a.jsx(ur,{path:"/SaleContractCategory",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(ur,{path:"/PurchaseQuotation",element:a.jsx(r,{children:a.jsx($Se,{})})}),a.jsx(ur,{path:"/PurchaseQuotationsDisplay",element:a.jsx(r,{children:a.jsx(d5e,{})})}),a.jsx(ur,{path:"/PurchaseOrder",element:a.jsx(r,{children:a.jsx(u5e,{})})}),a.jsx(ur,{path:"/PurchaseEnquiry",element:a.jsx(r,{children:a.jsx(BSe,{})})}),a.jsx(ur,{path:"/PurchaseContractsummary",element:a.jsx(r,{children:a.jsx(O5e,{})})}),a.jsx(ur,{path:"/PurchaseContract",element:a.jsx(r,{children:a.jsx(M5e,{})})}),a.jsx(ur,{path:"/SalesContract",element:a.jsx(r,{children:a.jsx(R5e,{})})}),a.jsx(ur,{path:"/SalesContractsummary",element:a.jsx(r,{children:a.jsx(F5e,{})})}),a.jsx(ur,{path:"/SalesEnquiry",element:a.jsx(r,{children:a.jsx(f5e,{})})}),a.jsx(ur,{path:"/SalesEnquiryList",element:a.jsx(r,{children:a.jsx(m5e,{})})}),a.jsx(ur,{path:"/SalesQuotation",element:a.jsx(r,{children:a.jsx(p5e,{})})}),a.jsx(ur,{path:"/SalesQuotationList",element:a.jsx(r,{children:a.jsx(x5e,{})})}),a.jsx(ur,{path:"/SalesOrder",element:a.jsx(r,{children:a.jsx(v5e,{})})}),a.jsx(ur,{path:"/SalesOrderList",element:a.jsx(r,{children:a.jsx(g5e,{})})}),a.jsx(ur,{path:"/MatrialIssue",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(ur,{path:"/MatrialReceipt",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(ur,{path:"/MatrialTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(ur,{path:"/MatrialTransferList",element:a.jsx(r,{children:a.jsx(EMe,{})})}),a.jsx(ur,{path:"/MaterialIssueList",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(ur,{path:"/MatrialReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(ur,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(ur,{path:"/GeneralCondition",element:a.jsx(r,{children:a.jsx(LSe,{})})}),a.jsx(ur,{path:"/ProcessList",element:a.jsx(r,{children:a.jsx(FSe,{})})}),a.jsx(ur,{path:"/customer-form",element:a.jsx(r,{children:a.jsx(y5e,{})})}),a.jsx(ur,{path:"/customer-price-list",element:a.jsx(r,{children:a.jsx(j5e,{})})}),a.jsx(ur,{path:"/locationmaster",element:a.jsx(r,{children:a.jsx(N5e,{})})}),a.jsx(ur,{path:"/material-form",element:a.jsx(r,{children:a.jsx(MSe,{})})}),a.jsx(ur,{path:"/tax-form",element:a.jsx(r,{children:a.jsx(w5e,{})})}),a.jsx(ur,{path:"/vendor-form",element:a.jsx(r,{children:a.jsx(S5e,{})})}),a.jsx(ur,{path:"/vendor-price-list",element:a.jsx(r,{children:a.jsx(C5e,{})})}),a.jsx(ur,{path:"/GoodsIssueFormUI",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(ur,{path:"/goods-issue-list",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(ur,{path:"/GoodsReciept",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(ur,{path:"/GoodsReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(ur,{path:"/GoodsTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(ur,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(ur,{path:"/InvoiceList",element:a.jsx(r,{children:a.jsx(_5e,{})})}),a.jsx(ur,{path:"/InvoiceForm",element:a.jsx(r,{children:a.jsx(E5e,{})})}),a.jsx(ur,{path:"/BillingForm",element:a.jsx(r,{children:a.jsx(D5e,{})})}),a.jsx(ur,{path:"/BillingDisplay",element:a.jsx(r,{children:a.jsx(A5e,{})})}),a.jsx(ur,{path:"/Ledger",element:a.jsx(r,{children:a.jsx(B5e,{})})}),a.jsx(ur,{path:"/Payments",element:a.jsx(r,{children:a.jsx($5e,{})})}),a.jsx(ur,{path:"/MRP",element:a.jsx(r,{children:a.jsx(U5e,{})})}),a.jsx(ur,{path:"/PaymentDisplay",element:a.jsx(r,{children:a.jsx(L5e,{})})}),a.jsx(ur,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(VB,{})})}),a.jsx(ur,{path:"/customer-category-form",element:a.jsx(r,{children:a.jsx(xMe,{})})}),a.jsx(ur,{path:"/GoodsIssueCategory",element:a.jsx(r,{children:a.jsx(vMe,{})})}),a.jsx(ur,{path:"/GoodsReceiptCategory",element:a.jsx(r,{children:a.jsx(gMe,{})})}),a.jsx(ur,{path:"/InvoiceCategory",element:a.jsx(r,{children:a.jsx(bMe,{})})}),a.jsx(ur,{path:"/BillingCategory",element:a.jsx(r,{children:a.jsx(pMe,{})})}),a.jsx(ur,{path:"/POCategory",element:a.jsx(r,{children:a.jsx(yMe,{})})}),a.jsx(ur,{path:"/Purchaserequestcat",element:a.jsx(r,{children:a.jsx(jMe,{})})}),a.jsx(ur,{path:"/sale-quotation-category-form",element:a.jsx(r,{children:a.jsx(wMe,{})})}),a.jsx(ur,{path:"/SalesCategory",element:a.jsx(r,{children:a.jsx(SMe,{})})}),a.jsx(ur,{path:"/SalesOrderCategoryForm",element:a.jsx(r,{children:a.jsx(CMe,{})})}),a.jsx(ur,{path:"/SaleContractCategoryForm",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(ur,{path:"/TransferCategory",element:a.jsx(r,{children:a.jsx(kMe,{})})}),a.jsx(ur,{path:"/vendor-category",element:a.jsx(r,{children:a.jsx(_Me,{})})}),a.jsx(ur,{path:"/RFQCategoryForm",element:a.jsx(r,{children:a.jsx(NMe,{})})}),a.jsx(ur,{path:"/PurchaseContractCategory",element:a.jsx(r,{children:a.jsx(q5e,{})})}),a.jsx(ur,{path:"/contacts",element:a.jsx(r,{children:a.jsx(DMe,{})})}),a.jsx(ur,{path:"/leads",element:a.jsx(r,{children:a.jsx(AMe,{})})}),a.jsx(ur,{path:"/proposals",element:a.jsx(r,{children:a.jsx(PMe,{})})}),a.jsx(ur,{path:"/sources",element:a.jsx(r,{children:a.jsx(OMe,{})})}),a.jsx(ur,{path:"/lost-reason",element:a.jsx(r,{children:a.jsx(MMe,{})})}),a.jsx(ur,{path:"/contact-stage",element:a.jsx(r,{children:a.jsx(RMe,{})})}),a.jsx(ur,{path:"/industry",element:a.jsx(r,{children:a.jsx(FMe,{})})}),a.jsx(ur,{path:"/calls",element:a.jsx(r,{children:a.jsx(LMe,{})})}),a.jsx(ur,{path:"/milestones",element:a.jsx(r,{children:a.jsx(BMe,{})})}),a.jsx(ur,{path:"/tasks",element:a.jsx(r,{children:a.jsx(UMe,{})})}),a.jsx(ur,{path:"/time-entries",element:a.jsx(r,{children:a.jsx($Me,{})})}),a.jsx(ur,{path:"/projects",element:a.jsx(r,{children:a.jsx(qMe,{})})}),a.jsx(ur,{path:"/campaigns",element:a.jsx(r,{children:a.jsx(VMe,{})})}),a.jsx(ur,{path:"/analytics",element:a.jsx(r,{children:a.jsx(zMe,{})})}),a.jsx(ur,{path:"/employee",element:a.jsx(r,{children:a.jsx(HMe,{})})}),a.jsx(ur,{path:"/leaverequest",element:a.jsx(r,{children:a.jsx(YMe,{})})}),a.jsx(ur,{path:"/leavemanagement",element:a.jsx(r,{children:a.jsx(B6e,{})})}),a.jsx(ur,{path:"/payroll",element:a.jsx(r,{children:a.jsx(B8e,{})})}),a.jsx(ur,{path:"/departments",element:a.jsx(r,{children:a.jsx(WMe,{})})}),a.jsx(ur,{path:"/designation",element:a.jsx(r,{children:a.jsx(GMe,{})})}),a.jsx(ur,{path:"/attendancereg",element:a.jsx(r,{children:a.jsx(hMe,{})})}),a.jsx(ur,{path:"/attendancetaking",element:a.jsx(r,{children:a.jsx(fMe,{})})}),a.jsx(ur,{path:"/attendancereport",element:a.jsx(r,{children:a.jsx(mMe,{})})})]})})})}hQ.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(U8e,{})}));export{Pb as _,$8e as c,Yu as g};
