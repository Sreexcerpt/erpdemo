function nQ(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var $8e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ok={exports:{}},tb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function aQ(){if(CO)return tb;CO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:n,key:o,ref:s!==void 0?s:null,props:i}}return tb.Fragment=t,tb.jsx=r,tb.jsxs=r,tb}var kO;function sQ(){return kO||(kO=1,ok.exports=aQ()),ok.exports}var a=sQ(),lk={exports:{}},Nn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function iQ(){if(_O)return Nn;_O=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function b(K,ue,M){this.props=K,this.context=ue,this.refs=g,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(K,ue){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ue,"setState")},b.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function y(){}y.prototype=b.prototype;function C(K,ue,M){this.props=K,this.context=ue,this.refs=g,this.updater=M||p}var N=C.prototype=new y;N.constructor=C,v(N,b.prototype),N.isPureReactComponent=!0;var k=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(K,ue,M,V,W,ee){return M=ee.ref,{$$typeof:e,type:K,key:ue,ref:M!==void 0?M:null,props:ee}}function T(K,ue){return E(K.type,ue,void 0,void 0,void 0,K.props)}function A(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function L(K){var ue={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(M){return ue[M]})}var P=/\/+/g;function O(K,ue){return typeof K=="object"&&K!==null&&K.key!=null?L(""+K.key):ue.toString(36)}function Q(){}function z(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(Q,Q):(K.status="pending",K.then(function(ue){K.status==="pending"&&(K.status="fulfilled",K.value=ue)},function(ue){K.status==="pending"&&(K.status="rejected",K.reason=ue)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function re(K,ue,M,V,W){var ee=typeof K;(ee==="undefined"||ee==="boolean")&&(K=null);var te=!1;if(K===null)te=!0;else switch(ee){case"bigint":case"string":case"number":te=!0;break;case"object":switch(K.$$typeof){case e:case t:te=!0;break;case u:return te=K._init,re(te(K._payload),ue,M,V,W)}}if(te)return W=W(K),te=V===""?"."+O(K,0):V,k(W)?(M="",te!=null&&(M=te.replace(P,"$&/")+"/"),re(W,ue,M,"",function(oe){return oe})):W!=null&&(A(W)&&(W=T(W,M+(W.key==null||K&&K.key===W.key?"":(""+W.key).replace(P,"$&/")+"/")+te)),ue.push(W)),1;te=0;var ne=V===""?".":V+":";if(k(K))for(var se=0;se<K.length;se++)V=K[se],ee=ne+O(V,se),te+=re(V,ue,M,ee,W);else if(se=m(K),typeof se=="function")for(K=se.call(K),se=0;!(V=K.next()).done;)V=V.value,ee=ne+O(V,se++),te+=re(V,ue,M,ee,W);else if(ee==="object"){if(typeof K.then=="function")return re(z(K),ue,M,V,W);throw ue=String(K),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return te}function U(K,ue,M){if(K==null)return K;var V=[],W=0;return re(K,V,"","",function(ee){return ue.call(M,ee,W++)}),V}function X(K){if(K._status===-1){var ue=K._result;ue=ue(),ue.then(function(M){(K._status===0||K._status===-1)&&(K._status=1,K._result=M)},function(M){(K._status===0||K._status===-1)&&(K._status=2,K._result=M)}),K._status===-1&&(K._status=0,K._result=ue)}if(K._status===1)return K._result.default;throw K._result}var B=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Y(){}return Nn.Children={map:U,forEach:function(K,ue,M){U(K,function(){ue.apply(this,arguments)},M)},count:function(K){var ue=0;return U(K,function(){ue++}),ue},toArray:function(K){return U(K,function(ue){return ue})||[]},only:function(K){if(!A(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Nn.Component=b,Nn.Fragment=r,Nn.Profiler=s,Nn.PureComponent=C,Nn.StrictMode=n,Nn.Suspense=c,Nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Nn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return S.H.useMemoCache(K)}},Nn.cache=function(K){return function(){return K.apply(null,arguments)}},Nn.cloneElement=function(K,ue,M){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var V=v({},K.props),W=K.key,ee=void 0;if(ue!=null)for(te in ue.ref!==void 0&&(ee=void 0),ue.key!==void 0&&(W=""+ue.key),ue)!D.call(ue,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&ue.ref===void 0||(V[te]=ue[te]);var te=arguments.length-2;if(te===1)V.children=M;else if(1<te){for(var ne=Array(te),se=0;se<te;se++)ne[se]=arguments[se+2];V.children=ne}return E(K.type,W,void 0,void 0,ee,V)},Nn.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Nn.createElement=function(K,ue,M){var V,W={},ee=null;if(ue!=null)for(V in ue.key!==void 0&&(ee=""+ue.key),ue)D.call(ue,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(W[V]=ue[V]);var te=arguments.length-2;if(te===1)W.children=M;else if(1<te){for(var ne=Array(te),se=0;se<te;se++)ne[se]=arguments[se+2];W.children=ne}if(K&&K.defaultProps)for(V in te=K.defaultProps,te)W[V]===void 0&&(W[V]=te[V]);return E(K,ee,void 0,void 0,null,W)},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(K){return{$$typeof:l,render:K}},Nn.isValidElement=A,Nn.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:X}},Nn.memo=function(K,ue){return{$$typeof:d,type:K,compare:ue===void 0?null:ue}},Nn.startTransition=function(K){var ue=S.T,M={};S.T=M;try{var V=K(),W=S.S;W!==null&&W(M,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(Y,B)}catch(ee){B(ee)}finally{S.T=ue}},Nn.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Nn.use=function(K){return S.H.use(K)},Nn.useActionState=function(K,ue,M){return S.H.useActionState(K,ue,M)},Nn.useCallback=function(K,ue){return S.H.useCallback(K,ue)},Nn.useContext=function(K){return S.H.useContext(K)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(K,ue){return S.H.useDeferredValue(K,ue)},Nn.useEffect=function(K,ue,M){var V=S.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(K,ue)},Nn.useId=function(){return S.H.useId()},Nn.useImperativeHandle=function(K,ue,M){return S.H.useImperativeHandle(K,ue,M)},Nn.useInsertionEffect=function(K,ue){return S.H.useInsertionEffect(K,ue)},Nn.useLayoutEffect=function(K,ue){return S.H.useLayoutEffect(K,ue)},Nn.useMemo=function(K,ue){return S.H.useMemo(K,ue)},Nn.useOptimistic=function(K,ue){return S.H.useOptimistic(K,ue)},Nn.useReducer=function(K,ue,M){return S.H.useReducer(K,ue,M)},Nn.useRef=function(K){return S.H.useRef(K)},Nn.useState=function(K){return S.H.useState(K)},Nn.useSyncExternalStore=function(K,ue,M){return S.H.useSyncExternalStore(K,ue,M)},Nn.useTransition=function(){return S.H.useTransition()},Nn.version="19.1.0",Nn}var EO;function Hv(){return EO||(EO=1,lk.exports=iQ()),lk.exports}var w=Hv();const zt=Hu(w),VN=nQ({__proto__:null,default:zt},[w]);var ck={exports:{}},rb={},dk={exports:{}},uk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function oQ(){return DO||(DO=1,function(e){function t(U,X){var B=U.length;U.push(X);e:for(;0<B;){var Y=B-1>>>1,K=U[Y];if(0<s(K,X))U[Y]=X,U[B]=K,B=Y;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var X=U[0],B=U.pop();if(B!==X){U[0]=B;e:for(var Y=0,K=U.length,ue=K>>>1;Y<ue;){var M=2*(Y+1)-1,V=U[M],W=M+1,ee=U[W];if(0>s(V,B))W<K&&0>s(ee,V)?(U[Y]=ee,U[W]=B,Y=W):(U[Y]=V,U[M]=B,Y=M);else if(W<K&&0>s(ee,B))U[Y]=ee,U[W]=B,Y=W;else break e}}return X}function s(U,X){var B=U.sortIndex-X.sortIndex;return B!==0?B:U.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,v=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var X=r(d);X!==null;){if(X.callback===null)n(d);else if(X.startTime<=U)n(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(d)}}function S(U){if(g=!1,k(U),!v)if(r(c)!==null)v=!0,D||(D=!0,O());else{var X=r(d);X!==null&&re(S,X.startTime-U)}}var D=!1,E=-1,T=5,A=-1;function L(){return b?!0:!(e.unstable_now()-A<T)}function P(){if(b=!1,D){var U=e.unstable_now();A=U;var X=!0;try{e:{v=!1,g&&(g=!1,C(E),E=-1),p=!0;var B=m;try{t:{for(k(U),h=r(c);h!==null&&!(h.expirationTime>U&&L());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,m=h.priorityLevel;var K=Y(h.expirationTime<=U);if(U=e.unstable_now(),typeof K=="function"){h.callback=K,k(U),X=!0;break t}h===r(c)&&n(c),k(U)}else n(c);h=r(c)}if(h!==null)X=!0;else{var ue=r(d);ue!==null&&re(S,ue.startTime-U),X=!1}}break e}finally{h=null,m=B,p=!1}X=void 0}}finally{X?O():D=!1}}}var O;if(typeof N=="function")O=function(){N(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,z=Q.port2;Q.port1.onmessage=P,O=function(){z.postMessage(null)}}else O=function(){y(P,0)};function re(U,X){E=y(function(){U(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(U){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var B=m;m=X;try{return U()}finally{m=B}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=m;m=U;try{return X()}finally{m=B}},e.unstable_scheduleCallback=function(U,X,B){var Y=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,U){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,U={id:u++,callback:X,priorityLevel:U,startTime:B,expirationTime:K,sortIndex:-1},B>Y?(U.sortIndex=B,t(d,U),r(c)===null&&U===r(d)&&(g?(C(E),E=-1):g=!0,re(S,B-Y))):(U.sortIndex=K,t(c,U),v||p||(v=!0,D||(D=!0,O()))),U},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(U){var X=m;return function(){var B=m;m=X;try{return U.apply(this,arguments)}finally{m=B}}}}(uk)),uk}var AO;function lQ(){return AO||(AO=1,dk.exports=oQ()),dk.exports}var hk={exports:{}},no={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function cQ(){if(TO)return no;TO=1;var e=Hv();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return no.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,no.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},no.flushSync=function(c){var d=o.T,u=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=d,n.p=u,n.d.f()}},no.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},no.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},no.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:p}):u==="script"&&n.d.X(c,{crossOrigin:h,integrity:m,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},no.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},no.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);n.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},no.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},no.requestFormReset=function(c){n.d.r(c)},no.unstable_batchedUpdates=function(c,d){return c(d)},no.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},no.useFormStatus=function(){return o.H.useHostTransitionStatus()},no.version="19.1.0",no}var IO;function H7(){if(IO)return hk.exports;IO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hk.exports=cQ(),hk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO;function dQ(){if(PO)return rb;PO=1;var e=lQ(),t=Hv(),r=H7();function n(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)x+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function i(f){var x=f,j=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(j=x.return),f=x.return;while(f)}return x.tag===3?j:null}function o(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function l(f){if(i(f)!==f)throw Error(n(188))}function c(f){var x=f.alternate;if(!x){if(x=i(f),x===null)throw Error(n(188));return x!==f?null:f}for(var j=f,_=x;;){var R=j.return;if(R===null)break;var q=R.alternate;if(q===null){if(_=R.return,_!==null){j=_;continue}break}if(R.child===q.child){for(q=R.child;q;){if(q===j)return l(R),f;if(q===_)return l(R),x;q=q.sibling}throw Error(n(188))}if(j.return!==_.return)j=R,_=q;else{for(var he=!1,Ce=R.child;Ce;){if(Ce===j){he=!0,j=R,_=q;break}if(Ce===_){he=!0,_=R,j=q;break}Ce=Ce.sibling}if(!he){for(Ce=q.child;Ce;){if(Ce===j){he=!0,j=q,_=R;break}if(Ce===_){he=!0,_=q,j=R;break}Ce=Ce.sibling}if(!he)throw Error(n(189))}}if(j.alternate!==_)throw Error(n(190))}if(j.tag!==3)throw Error(n(188));return j.stateNode.current===j?f:x}function d(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f;for(f=f.child;f!==null;){if(x=d(f),x!==null)return x;f=f.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}var Q=Symbol.for("react.client.reference");function z(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Q?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case D:return"SuspenseList";case A:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case p:return"Portal";case N:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case k:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case E:return x=f.displayName||null,x!==null?x:z(f.type)||"Memo";case T:x=f._payload,f=f._init;try{return z(f(x))}catch{}}return null}var re=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},Y=[],K=-1;function ue(f){return{current:f}}function M(f){0>K||(f.current=Y[K],Y[K]=null,K--)}function V(f,x){K++,Y[K]=f.current,f.current=x}var W=ue(null),ee=ue(null),te=ue(null),ne=ue(null);function se(f,x){switch(V(te,x),V(ee,f),V(W,null),x.nodeType){case 9:case 11:f=(f=x.documentElement)&&(f=f.namespaceURI)?ZP(f):0;break;default:if(f=x.tagName,x=x.namespaceURI)x=ZP(x),f=eO(x,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(W),V(W,f)}function oe(){M(W),M(ee),M(te)}function G(f){f.memoizedState!==null&&V(ne,f);var x=W.current,j=eO(x,f.type);x!==j&&(V(ee,f),V(W,j))}function ce(f){ee.current===f&&(M(W),M(ee)),ne.current===f&&(M(ne),Xg._currentValue=B)}var Z=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,je=e.unstable_cancelCallback,de=e.unstable_shouldYield,ie=e.unstable_requestPaint,be=e.unstable_now,Ne=e.unstable_getCurrentPriorityLevel,Fe=e.unstable_ImmediatePriority,Xe=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,xt=e.unstable_LowPriority,Re=e.unstable_IdlePriority,ht=e.log,At=e.unstable_setDisableYieldValue,_t=null,Wt=null;function Ke(f){if(typeof ht=="function"&&At(f),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(_t,f)}catch{}}var ge=Math.clz32?Math.clz32:Ie,ve=Math.log,xe=Math.LN2;function Ie(f){return f>>>=0,f===0?32:31-(ve(f)/xe|0)|0}var Ze=256,Ft=4194304;function Qe(f){var x=f&42;if(x!==0)return x;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Ye(f,x,j){var _=f.pendingLanes;if(_===0)return 0;var R=0,q=f.suspendedLanes,he=f.pingedLanes;f=f.warmLanes;var Ce=_&134217727;return Ce!==0?(_=Ce&~q,_!==0?R=Qe(_):(he&=Ce,he!==0?R=Qe(he):j||(j=Ce&~f,j!==0&&(R=Qe(j))))):(Ce=_&~q,Ce!==0?R=Qe(Ce):he!==0?R=Qe(he):j||(j=_&~f,j!==0&&(R=Qe(j)))),R===0?0:x!==0&&x!==R&&(x&q)===0&&(q=R&-R,j=x&-x,q>=j||q===32&&(j&4194048)!==0)?x:R}function Le(f,x){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&x)===0}function ze(f,x){switch(f){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var f=Ze;return Ze<<=1,(Ze&4194048)===0&&(Ze=256),f}function Te(){var f=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),f}function We(f){for(var x=[],j=0;31>j;j++)x.push(f);return x}function Ge(f,x){f.pendingLanes|=x,x!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function It(f,x,j,_,R,q){var he=f.pendingLanes;f.pendingLanes=j,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=j,f.entangledLanes&=j,f.errorRecoveryDisabledLanes&=j,f.shellSuspendCounter=0;var Ce=f.entanglements,Je=f.expirationTimes,kt=f.hiddenUpdates;for(j=he&~j;0<j;){var qt=31-ge(j),Jt=1<<qt;Ce[qt]=0,Je[qt]=-1;var Et=kt[qt];if(Et!==null)for(kt[qt]=null,qt=0;qt<Et.length;qt++){var Dt=Et[qt];Dt!==null&&(Dt.lane&=-536870913)}j&=~Jt}_!==0&&Bt(f,_,0),q!==0&&R===0&&f.tag!==0&&(f.suspendedLanes|=q&~(he&~x))}function Bt(f,x,j){f.pendingLanes|=x,f.suspendedLanes&=~x;var _=31-ge(x);f.entangledLanes|=x,f.entanglements[_]=f.entanglements[_]|1073741824|j&4194090}function Ee(f,x){var j=f.entangledLanes|=x;for(f=f.entanglements;j;){var _=31-ge(j),R=1<<_;R&x|f[_]&x&&(f[_]|=x),j&=~R}}function _e(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function st(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function wt(){var f=X.p;return f!==0?f:(f=window.event,f===void 0?32:bO(f.type))}function rr(f,x){var j=X.p;try{return X.p=f,x()}finally{X.p=j}}var Ot=Math.random().toString(36).slice(2),er="__reactFiber$"+Ot,fr="__reactProps$"+Ot,yr="__reactContainer$"+Ot,Yr="__reactEvents$"+Ot,ur="__reactListeners$"+Ot,me="__reactHandles$"+Ot,Be="__reactResources$"+Ot,Ae="__reactMarker$"+Ot;function ke(f){delete f[er],delete f[fr],delete f[Yr],delete f[ur],delete f[me]}function Me(f){var x=f[er];if(x)return x;for(var j=f.parentNode;j;){if(x=j[yr]||j[er]){if(j=x.alternate,x.child!==null||j!==null&&j.child!==null)for(f=aO(f);f!==null;){if(j=f[er])return j;f=aO(f)}return x}f=j,j=f.parentNode}return null}function $e(f){if(f=f[er]||f[yr]){var x=f.tag;if(x===5||x===6||x===13||x===26||x===27||x===3)return f}return null}function pt(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f.stateNode;throw Error(n(33))}function jt(f){var x=f[Be];return x||(x=f[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function ot(f){f[Ae]=!0}var bt=new Set,yt={};function Yt(f,x){sr(f,x),sr(f+"Capture",x)}function sr(f,x){for(yt[f]=x,f=0;f<x.length;f++)bt.add(x[f])}var mr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ir={},Ve={};function dr(f){return Z.call(Ve,f)?!0:Z.call(ir,f)?!1:mr.test(f)?Ve[f]=!0:(ir[f]=!0,!1)}function or(f,x,j){if(dr(x))if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":f.removeAttribute(x);return;case"boolean":var _=x.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){f.removeAttribute(x);return}}f.setAttribute(x,""+j)}}function $r(f,x,j){if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttribute(x,""+j)}}function gn(f,x,j,_){if(_===null)f.removeAttribute(j);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(j);return}f.setAttributeNS(x,j,""+_)}}var vt,br;function hr(f){if(vt===void 0)try{throw Error()}catch(j){var x=j.stack.trim().match(/\n( *(at )?)/);vt=x&&x[1]||"",br=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vt+f+br}var qr=!1;function Qr(f,x){if(!f||qr)return"";qr=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(x){var Jt=function(){throw Error()};if(Object.defineProperty(Jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Jt,[])}catch(Dt){var Et=Dt}Reflect.construct(f,[],Jt)}else{try{Jt.call()}catch(Dt){Et=Dt}f.call(Jt.prototype)}}else{try{throw Error()}catch(Dt){Et=Dt}(Jt=f())&&typeof Jt.catch=="function"&&Jt.catch(function(){})}}catch(Dt){if(Dt&&Et&&typeof Dt.stack=="string")return[Dt.stack,Et.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=_.DetermineComponentFrameRoot(),he=q[0],Ce=q[1];if(he&&Ce){var Je=he.split(`
`),kt=Ce.split(`
`);for(R=_=0;_<Je.length&&!Je[_].includes("DetermineComponentFrameRoot");)_++;for(;R<kt.length&&!kt[R].includes("DetermineComponentFrameRoot");)R++;if(_===Je.length||R===kt.length)for(_=Je.length-1,R=kt.length-1;1<=_&&0<=R&&Je[_]!==kt[R];)R--;for(;1<=_&&0<=R;_--,R--)if(Je[_]!==kt[R]){if(_!==1||R!==1)do if(_--,R--,0>R||Je[_]!==kt[R]){var qt=`
`+Je[_].replace(" at new "," at ");return f.displayName&&qt.includes("<anonymous>")&&(qt=qt.replace("<anonymous>",f.displayName)),qt}while(1<=_&&0<=R);break}}}finally{qr=!1,Error.prepareStackTrace=j}return(j=f?f.displayName||f.name:"")?hr(j):""}function da(f){switch(f.tag){case 26:case 27:case 5:return hr(f.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 15:return Qr(f.type,!1);case 11:return Qr(f.type.render,!1);case 1:return Qr(f.type,!0);case 31:return hr("Activity");default:return""}}function Fn(f){try{var x="";do x+=da(f),f=f.return;while(f);return x}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}function Ia(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ti(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ya(f){var x=Ti(f)?"checked":"value",j=Object.getOwnPropertyDescriptor(f.constructor.prototype,x),_=""+f[x];if(!f.hasOwnProperty(x)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var R=j.get,q=j.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return R.call(this)},set:function(he){_=""+he,q.call(this,he)}}),Object.defineProperty(f,x,{enumerable:j.enumerable}),{getValue:function(){return _},setValue:function(he){_=""+he},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function ka(f){f._valueTracker||(f._valueTracker=ya(f))}function pl(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var j=x.getValue(),_="";return f&&(_=Ti(f)?f.checked?"true":"false":f.value),f=_,f!==j?(x.setValue(f),!0):!1}function es(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var $o=/[\n"\\]/g;function Or(f){return f.replace($o,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function $s(f,x,j,_,R,q,he,Ce){f.name="",he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?f.type=he:f.removeAttribute("type"),x!=null?he==="number"?(x===0&&f.value===""||f.value!=x)&&(f.value=""+Ia(x)):f.value!==""+Ia(x)&&(f.value=""+Ia(x)):he!=="submit"&&he!=="reset"||f.removeAttribute("value"),x!=null?nh(f,he,Ia(x)):j!=null?nh(f,he,Ia(j)):_!=null&&f.removeAttribute("value"),R==null&&q!=null&&(f.defaultChecked=!!q),R!=null&&(f.checked=R&&typeof R!="function"&&typeof R!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?f.name=""+Ia(Ce):f.removeAttribute("name")}function Qi(f,x,j,_,R,q,he,Ce){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(f.type=q),x!=null||j!=null){if(!(q!=="submit"&&q!=="reset"||x!=null))return;j=j!=null?""+Ia(j):"",x=x!=null?""+Ia(x):j,Ce||x===f.value||(f.value=x),f.defaultValue=x}_=_??R,_=typeof _!="function"&&typeof _!="symbol"&&!!_,f.checked=Ce?f.checked:!!_,f.defaultChecked=!!_,he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"&&(f.name=he)}function nh(f,x,j){x==="number"&&es(f.ownerDocument)===f||f.defaultValue===""+j||(f.defaultValue=""+j)}function xl(f,x,j,_){if(f=f.options,x){x={};for(var R=0;R<j.length;R++)x["$"+j[R]]=!0;for(j=0;j<f.length;j++)R=x.hasOwnProperty("$"+f[j].value),f[j].selected!==R&&(f[j].selected=R),R&&_&&(f[j].defaultSelected=!0)}else{for(j=""+Ia(j),x=null,R=0;R<f.length;R++){if(f[R].value===j){f[R].selected=!0,_&&(f[R].defaultSelected=!0);return}x!==null||f[R].disabled||(x=f[R])}x!==null&&(x.selected=!0)}}function kf(f,x,j){if(x!=null&&(x=""+Ia(x),x!==f.value&&(f.value=x),j==null)){f.defaultValue!==x&&(f.defaultValue=x);return}f.defaultValue=j!=null?""+Ia(j):""}function ah(f,x,j,_){if(x==null){if(_!=null){if(j!=null)throw Error(n(92));if(re(_)){if(1<_.length)throw Error(n(93));_=_[0]}j=_}j==null&&(j=""),x=j}j=Ia(x),f.defaultValue=j,_=f.textContent,_===j&&_!==""&&_!==null&&(f.value=_)}function Vo(f,x){if(x){var j=f.firstChild;if(j&&j===f.lastChild&&j.nodeType===3){j.nodeValue=x;return}}f.textContent=x}var ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qc(f,x,j){var _=x.indexOf("--")===0;j==null||typeof j=="boolean"||j===""?_?f.setProperty(x,""):x==="float"?f.cssFloat="":f[x]="":_?f.setProperty(x,j):typeof j!="number"||j===0||ac.has(x)?x==="float"?f.cssFloat=j:f[x]=(""+j).trim():f[x]=j+"px"}function vl(f,x,j){if(x!=null&&typeof x!="object")throw Error(n(62));if(f=f.style,j!=null){for(var _ in j)!j.hasOwnProperty(_)||x!=null&&x.hasOwnProperty(_)||(_.indexOf("--")===0?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="");for(var R in x)_=x[R],x.hasOwnProperty(R)&&j[R]!==_&&Qc(f,R,_)}else for(var q in x)x.hasOwnProperty(q)&&Qc(f,q,x[q])}function Jc(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(f){return sc.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var ic=null;function fs(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var oc=null,yl=null;function Zr(f){var x=$e(f);if(x&&(f=x.stateNode)){var j=f[fr]||null;e:switch(f=x.stateNode,x.type){case"input":if($s(f,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name),x=j.name,j.type==="radio"&&x!=null){for(j=f;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll('input[name="'+Or(""+x)+'"][type="radio"]'),x=0;x<j.length;x++){var _=j[x];if(_!==f&&_.form===f.form){var R=_[fr]||null;if(!R)throw Error(n(90));$s(_,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(x=0;x<j.length;x++)_=j[x],_.form===f.form&&pl(_)}break e;case"textarea":kf(f,j.value,j.defaultValue);break e;case"select":x=j.value,x!=null&&xl(f,!!j.multiple,x,!1)}}}var sh=!1;function _f(f,x,j){if(sh)return f(x,j);sh=!0;try{var _=f(x);return _}finally{if(sh=!1,(oc!==null||yl!==null)&&(ej(),oc&&(x=oc,f=yl,yl=oc=null,Zr(x),f)))for(x=0;x<f.length;x++)Zr(f[x])}}function rt(f,x){var j=f.stateNode;if(j===null)return null;var _=j[fr]||null;if(_===null)return null;j=_[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(f=f.type,_=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!_;break e;default:f=!1}if(f)return null;if(j&&typeof j!="function")throw Error(n(231,x,typeof j));return j}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zt=!1;if(lr)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){Zt=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{Zt=!1}var Cr=null,_a=null,qo=null;function Ef(){if(qo)return qo;var f,x=_a,j=x.length,_,R="value"in Cr?Cr.value:Cr.textContent,q=R.length;for(f=0;f<j&&x[f]===R[f];f++);var he=j-f;for(_=1;_<=he&&x[j-_]===R[q-_];_++);return qo=R.slice(f,1<_?1-_:void 0)}function lc(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function zo(){return!0}function Ho(){return!1}function Cs(f){function x(j,_,R,q,he){this._reactName=j,this._targetInst=R,this.type=_,this.nativeEvent=q,this.target=he,this.currentTarget=null;for(var Ce in f)f.hasOwnProperty(Ce)&&(j=f[Ce],this[Ce]=j?j(q):q[Ce]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?zo:Ho,this.isPropagationStopped=Ho,this}return u(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),x}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=Cs(fi),Wo=u({},fi,{view:0,detail:0}),Df=Cs(Wo),Zc,Af,$d,Do=u({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==$d&&($d&&f.type==="mousemove"?(Zc=f.screenX-$d.screenX,Af=f.screenY-$d.screenY):Af=Zc=0,$d=f),Zc)},movementY:function(f){return"movementY"in f?f.movementY:Af}}),dc=Cs(Do),fg=u({},Do,{dataTransfer:0}),Vd=Cs(fg),jl=u({},Wo,{relatedTarget:0}),ih=Cs(jl),oh=u({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),mg=Cs(oh),Tf=u({},fi,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),pg=Cs(Tf),sp=u({},fi,{data:0}),If=Cs(sp),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=ip[f])?!!x[f]:!1}function Of(){return op}var xg=u({},Wo,{key:function(f){if(f.key){var x=Qx[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=lc(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Pf[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(f){return f.type==="keypress"?lc(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?lc(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Mf=Cs(xg),lh=u({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=Cs(lh),qd=u({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),lp=Cs(qd),H=u({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),pe=Cs(H),He=u({},Do,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Cs(He),gt=u({},fi,{newState:0,oldState:0}),Lt=Cs(gt),ar=[9,13,27,32],Nr=lr&&"CompositionEvent"in window,Mr=null;lr&&"documentMode"in document&&(Mr=document.documentMode);var fn=lr&&"TextEvent"in window&&!Mr,dn=lr&&(!Nr||Mr&&8<Mr&&11>=Mr),Pn=" ",Pa=!1;function La(f,x){switch(f){case"keyup":return ar.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var rs=!1;function Vs(f,x){switch(f){case"compositionend":return ts(x);case"keypress":return x.which!==32?null:(Pa=!0,Pn);case"textInput":return f=x.data,f===Pn&&Pa?null:f;default:return null}}function Nl(f,x){if(rs)return f==="compositionend"||!Nr&&La(f,x)?(f=Ef(),qo=_a=Cr=null,rs=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return dn&&x.locale!=="ko"?null:x.data;default:return null}}var Ao={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wl(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!Ao[f.type]:x==="textarea"}function cp(f,x,j,_){oc?yl?yl.push(_):yl=[_]:oc=_,x=ij(x,"onChange"),0<x.length&&(j=new cc("onChange","change",null,j,_),f.push({event:j,listeners:x}))}var ed=null,td=null;function Ff(f){YP(f,0)}function zd(f){var x=pt(f);if(pl(x))return f}function Lf(f,x){if(f==="change")return x}var ch=!1;if(lr){var ks;if(lr){var Hd="oninput"in document;if(!Hd){var dh=document.createElement("div");dh.setAttribute("oninput","return;"),Hd=typeof dh.oninput=="function"}ks=Hd}else ks=!1;ch=ks&&(!document.documentMode||9<document.documentMode)}function uh(){ed&&(ed.detachEvent("onpropertychange",Bf),td=ed=null)}function Bf(f){if(f.propertyName==="value"&&zd(td)){var x=[];cp(x,td,f,fs(f)),_f(Ff,x)}}function Ji(f,x,j){f==="focusin"?(uh(),ed=x,td=j,ed.attachEvent("onpropertychange",Bf)):f==="focusout"&&uh()}function vg(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return zd(td)}function dp(f,x){if(f==="click")return zd(x)}function Jx(f,x){if(f==="input"||f==="change")return zd(x)}function Go(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var qs=typeof Object.is=="function"?Object.is:Go;function Wd(f,x){if(qs(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var j=Object.keys(f),_=Object.keys(x);if(j.length!==_.length)return!1;for(_=0;_<j.length;_++){var R=j[_];if(!Z.call(x,R)||!qs(f[R],x[R]))return!1}return!0}function up(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function rd(f,x){var j=up(f);f=0;for(var _;j;){if(j.nodeType===3){if(_=f+j.textContent.length,f<=x&&_>=x)return{node:j,offset:x-f};f=_}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=up(j)}}function Gd(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?Gd(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function Ii(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var x=es(f.document);x instanceof f.HTMLIFrameElement;){try{var j=typeof x.contentWindow.location.href=="string"}catch{j=!1}if(j)f=x.contentWindow;else break;x=es(f.document)}return x}function ti(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}var Yd=lr&&"documentMode"in document&&11>=document.documentMode,Zi=null,Sl=null,uc=null,Cl=!1;function Wa(f,x,j){var _=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;Cl||Zi==null||Zi!==es(_)||(_=Zi,"selectionStart"in _&&ti(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),uc&&Wd(uc,_)||(uc=_,_=ij(Sl,"onSelect"),0<_.length&&(x=new cc("onSelect","select",null,x,j),f.push({event:x,listeners:_}),x.target=Zi)))}function kl(f,x){var j={};return j[f.toLowerCase()]=x.toLowerCase(),j["Webkit"+f]="webkit"+x,j["Moz"+f]="moz"+x,j}var ms={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionrun:kl("Transition","TransitionRun"),transitionstart:kl("Transition","TransitionStart"),transitioncancel:kl("Transition","TransitionCancel"),transitionend:kl("Transition","TransitionEnd")},eo={},hh={};lr&&(hh=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function hc(f){if(eo[f])return eo[f];if(!ms[f])return f;var x=ms[f],j;for(j in x)if(x.hasOwnProperty(j)&&j in hh)return eo[f]=x[j];return f}var Uf=hc("animationend"),Kd=hc("animationiteration"),Xd=hc("animationstart"),Qd=hc("transitionrun"),fh=hc("transitionstart"),$f=hc("transitioncancel"),Jd=hc("transitionend"),nd=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Ga(f,x){nd.set(f,x),Yt(x,[f])}var To=new WeakMap;function kn(f,x){if(typeof f=="object"&&f!==null){var j=To.get(f);return j!==void 0?j:(x={value:f,source:x,stack:Fn(x)},To.set(f,x),x)}return{value:f,source:x,stack:Fn(x)}}var _n=[],ja=0,ns=0;function Yo(){for(var f=ja,x=ns=ja=0;x<f;){var j=_n[x];_n[x++]=null;var _=_n[x];_n[x++]=null;var R=_n[x];_n[x++]=null;var q=_n[x];if(_n[x++]=null,_!==null&&R!==null){var he=_.pending;he===null?R.next=R:(R.next=he.next,he.next=R),_.pending=R}q!==0&&Zx(j,R,q)}}function Zd(f,x,j,_){_n[ja++]=f,_n[ja++]=x,_n[ja++]=j,_n[ja++]=_,ns|=_,f.lanes|=_,f=f.alternate,f!==null&&(f.lanes|=_)}function eu(f,x,j,_){return Zd(f,x,j,_),ph(f)}function ad(f,x){return Zd(f,null,null,x),ph(f)}function Zx(f,x,j){f.lanes|=j;var _=f.alternate;_!==null&&(_.lanes|=j);for(var R=!1,q=f.return;q!==null;)q.childLanes|=j,_=q.alternate,_!==null&&(_.childLanes|=j),q.tag===22&&(f=q.stateNode,f===null||f._visibility&1||(R=!0)),f=q,q=q.return;return f.tag===3?(q=f.stateNode,R&&x!==null&&(R=31-ge(j),f=q.hiddenUpdates,_=f[R],_===null?f[R]=[x]:_.push(x),x.lane=j|536870912),q):null}function ph(f){if(50<Vg)throw Vg=0,TC=null,Error(n(185));for(var x=f.return;x!==null;)f=x,x=f.return;return f.tag===3?f.stateNode:null}var zs={};function Ko(f,x,j,_){this.tag=f,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(f,x,j,_){return new Ko(f,x,j,_)}function Vf(f){return f=f.prototype,!(!f||!f.isReactComponent)}function fc(f,x){var j=f.alternate;return j===null?(j=mi(f.tag,x,f.key,f.mode),j.elementType=f.elementType,j.type=f.type,j.stateNode=f.stateNode,j.alternate=f,f.alternate=j):(j.pendingProps=x,j.type=f.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=f.flags&65011712,j.childLanes=f.childLanes,j.lanes=f.lanes,j.child=f.child,j.memoizedProps=f.memoizedProps,j.memoizedState=f.memoizedState,j.updateQueue=f.updateQueue,x=f.dependencies,j.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},j.sibling=f.sibling,j.index=f.index,j.ref=f.ref,j.refCleanup=f.refCleanup,j}function hp(f,x){f.flags&=65011714;var j=f.alternate;return j===null?(f.childLanes=0,f.lanes=x,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=j.childLanes,f.lanes=j.lanes,f.child=j.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=j.memoizedProps,f.memoizedState=j.memoizedState,f.updateQueue=j.updateQueue,f.type=j.type,x=j.dependencies,f.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),f}function xh(f,x,j,_,R,q){var he=0;if(_=f,typeof f=="function")Vf(f)&&(he=1);else if(typeof f=="string")he=zX(f,j,W.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case A:return f=mi(31,j,x,R),f.elementType=A,f.lanes=q,f;case v:return sd(j.children,R,q,x);case g:he=8,R|=24;break;case b:return f=mi(12,j,x,R|2),f.elementType=b,f.lanes=q,f;case S:return f=mi(13,j,x,R),f.elementType=S,f.lanes=q,f;case D:return f=mi(19,j,x,R),f.elementType=D,f.lanes=q,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:case N:he=10;break e;case C:he=9;break e;case k:he=11;break e;case E:he=14;break e;case T:he=16,_=null;break e}he=29,j=Error(n(130,f===null?"null":typeof f,"")),_=null}return x=mi(he,j,x,R),x.elementType=f,x.type=_,x.lanes=q,x}function sd(f,x,j,_){return f=mi(7,f,_,x),f.lanes=j,f}function e0(f,x,j){return f=mi(6,f,null,x),f.lanes=j,f}function fp(f,x,j){return x=mi(4,f.children!==null?f.children:[],f.key,x),x.lanes=j,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}var tu=[],id=0,qf=null,t0=0,Xo=[],Io=0,vh=null,od=1,ld="";function gh(f,x){tu[id++]=t0,tu[id++]=qf,qf=f,t0=x}function S1(f,x,j){Xo[Io++]=od,Xo[Io++]=ld,Xo[Io++]=vh,vh=f;var _=od;f=ld;var R=32-ge(_)-1;_&=~(1<<R),j+=1;var q=32-ge(x)+R;if(30<q){var he=R-R%5;q=(_&(1<<he)-1).toString(32),_>>=he,R-=he,od=1<<32-ge(x)+R|j<<R|_,ld=q+f}else od=1<<q|j<<R|_,ld=f}function mp(f){f.return!==null&&(gh(f,1),S1(f,1,0))}function pp(f){for(;f===qf;)qf=tu[--id],tu[id]=null,t0=tu[--id],tu[id]=null;for(;f===vh;)vh=Xo[--Io],Xo[Io]=null,ld=Xo[--Io],Xo[Io]=null,od=Xo[--Io],Xo[Io]=null}var _s=null,Ya=null,zn=!1,ru=null,mc=!1,gg=Error(n(519));function bh(f){var x=Error(n(418,""));throw zf(kn(x,f)),gg}function C1(f){var x=f.stateNode,j=f.type,_=f.memoizedProps;switch(x[er]=f,x[fr]=_,j){case"dialog":Mn("cancel",x),Mn("close",x);break;case"iframe":case"object":case"embed":Mn("load",x);break;case"video":case"audio":for(j=0;j<zg.length;j++)Mn(zg[j],x);break;case"source":Mn("error",x);break;case"img":case"image":case"link":Mn("error",x),Mn("load",x);break;case"details":Mn("toggle",x);break;case"input":Mn("invalid",x),Qi(x,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),ka(x);break;case"select":Mn("invalid",x);break;case"textarea":Mn("invalid",x),ah(x,_.value,_.defaultValue,_.children),ka(x)}j=_.children,typeof j!="string"&&typeof j!="number"&&typeof j!="bigint"||x.textContent===""+j||_.suppressHydrationWarning===!0||JP(x.textContent,j)?(_.popover!=null&&(Mn("beforetoggle",x),Mn("toggle",x)),_.onScroll!=null&&Mn("scroll",x),_.onScrollEnd!=null&&Mn("scrollend",x),_.onClick!=null&&(x.onclick=oj),x=!0):x=!1,x||bh(f)}function cd(f){for(_s=f.return;_s;)switch(_s.tag){case 5:case 13:mc=!1;return;case 27:case 3:mc=!0;return;default:_s=_s.return}}function Pi(f){if(f!==_s)return!1;if(!zn)return cd(f),zn=!0,!1;var x=f.tag,j;if((j=x!==3&&x!==27)&&((j=x===5)&&(j=f.type,j=!(j!=="form"&&j!=="button")||GC(f.type,f.memoizedProps)),j=!j),j&&Ya&&bh(f),cd(f),x===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,x=0;f;){if(f.nodeType===8)if(j=f.data,j==="/$"){if(x===0){Ya=vd(f.nextSibling);break e}x--}else j!=="$"&&j!=="$!"&&j!=="$?"||x++;f=f.nextSibling}Ya=null}}else x===27?(x=Ya,om(f.type)?(f=QC,QC=null,Ya=f):Ya=x):Ya=_s?vd(f.stateNode.nextSibling):null;return!0}function Po(){Ya=_s=null,zn=!1}function k1(){var f=ru;return f!==null&&(Zo===null?Zo=f:Zo.push.apply(Zo,f),ru=null),f}function zf(f){ru===null?ru=[f]:ru.push(f)}var pc=ue(null),Hs=null,dd=null;function nu(f,x,j){V(pc,x._currentValue),x._currentValue=j}function xc(f){f._currentValue=pc.current,M(pc)}function r0(f,x,j){for(;f!==null;){var _=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,_!==null&&(_.childLanes|=x)):_!==null&&(_.childLanes&x)!==x&&(_.childLanes|=x),f===j)break;f=f.return}}function n0(f,x,j,_){var R=f.child;for(R!==null&&(R.return=f);R!==null;){var q=R.dependencies;if(q!==null){var he=R.child;q=q.firstContext;e:for(;q!==null;){var Ce=q;q=R;for(var Je=0;Je<x.length;Je++)if(Ce.context===x[Je]){q.lanes|=j,Ce=q.alternate,Ce!==null&&(Ce.lanes|=j),r0(q.return,j,f),_||(he=null);break e}q=Ce.next}}else if(R.tag===18){if(he=R.return,he===null)throw Error(n(341));he.lanes|=j,q=he.alternate,q!==null&&(q.lanes|=j),r0(he,j,f),he=null}else he=R.child;if(he!==null)he.return=R;else for(he=R;he!==null;){if(he===f){he=null;break}if(R=he.sibling,R!==null){R.return=he.return,he=R;break}he=he.return}R=he}}function Hf(f,x,j,_){f=null;for(var R=x,q=!1;R!==null;){if(!q){if((R.flags&524288)!==0)q=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var he=R.alternate;if(he===null)throw Error(n(387));if(he=he.memoizedProps,he!==null){var Ce=R.type;qs(R.pendingProps.value,he.value)||(f!==null?f.push(Ce):f=[Ce])}}else if(R===ne.current){if(he=R.alternate,he===null)throw Error(n(387));he.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(f!==null?f.push(Xg):f=[Xg])}R=R.return}f!==null&&n0(x,f,j,_),x.flags|=262144}function a0(f){for(f=f.firstContext;f!==null;){if(!qs(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function vc(f){Hs=f,dd=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Es(f){return s0(Hs,f)}function au(f,x){return Hs===null&&vc(f),s0(f,x)}function s0(f,x){var j=x._currentValue;if(x={context:x,memoizedValue:j,next:null},dd===null){if(f===null)throw Error(n(308));dd=x,f.dependencies={lanes:0,firstContext:x},f.flags|=524288}else dd=dd.next=x;return j}var rC=typeof AbortController<"u"?AbortController:function(){var f=[],x=this.signal={aborted:!1,addEventListener:function(j,_){f.push(_)}};this.abort=function(){x.aborted=!0,f.forEach(function(j){return j()})}},_1=e.unstable_scheduleCallback,nC=e.unstable_NormalPriority,Ds={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new rC,data:new Map,refCount:0}}function xp(f){f.refCount--,f.refCount===0&&_1(nC,function(){f.controller.abort()})}var vp=null,yg=0,yh=0,ud=null;function aC(f,x){if(vp===null){var j=vp=[];yg=0,yh=LC(),ud={status:"pending",value:void 0,then:function(_){j.push(_)}}}return yg++,x.then(E1,E1),x}function E1(){if(--yg===0&&vp!==null){ud!==null&&(ud.status="fulfilled");var f=vp;vp=null,yh=0,ud=null;for(var x=0;x<f.length;x++)(0,f[x])()}}function D1(f,x){var j=[],_={status:"pending",value:null,reason:null,then:function(R){j.push(R)}};return f.then(function(){_.status="fulfilled",_.value=x;for(var R=0;R<j.length;R++)(0,j[R])(x)},function(R){for(_.status="rejected",_.reason=R,R=0;R<j.length;R++)(0,j[R])(void 0)}),_}var I=U.S;U.S=function(f,x){typeof x=="object"&&x!==null&&typeof x.then=="function"&&aC(f,x),I!==null&&I(f,x)};var F=ue(null);function J(){var f=F.current;return f!==null?f:Ma.pooledCache}function le(f,x){x===null?V(F,F.current):V(F,x.pool)}function fe(){var f=J();return f===null?null:{parent:Ds._currentValue,pool:f}}var ye=Error(n(460)),we=Error(n(474)),Se=Error(n(542)),De={then:function(){}};function Ue(f){return f=f.status,f==="fulfilled"||f==="rejected"}function nt(){}function Ct(f,x,j){switch(j=f[j],j===void 0?f.push(x):j!==x&&(x.then(nt,nt),x=j),x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Xt(f),f;default:if(typeof x.status=="string")x.then(nt,nt);else{if(f=Ma,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=x,f.status="pending",f.then(function(_){if(x.status==="pending"){var R=x;R.status="fulfilled",R.value=_}},function(_){if(x.status==="pending"){var R=x;R.status="rejected",R.reason=_}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Xt(f),f}throw Nt=x,ye}}var Nt=null;function ft(){if(Nt===null)throw Error(n(459));var f=Nt;return Nt=null,f}function Xt(f){if(f===ye||f===Se)throw Error(n(483))}var Pt=!1;function at(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lt(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Vt(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Qt(f,x,j){var _=f.updateQueue;if(_===null)return null;if(_=_.shared,(ha&2)!==0){var R=_.pending;return R===null?x.next=x:(x.next=R.next,R.next=x),_.pending=x,x=ph(f),Zx(f,null,j),x}return Zd(f,_,x,j),ph(f)}function Ht(f,x,j){if(x=x.updateQueue,x!==null&&(x=x.shared,(j&4194048)!==0)){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ee(f,j)}}function wr(f,x){var j=f.updateQueue,_=f.alternate;if(_!==null&&(_=_.updateQueue,j===_)){var R=null,q=null;if(j=j.firstBaseUpdate,j!==null){do{var he={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};q===null?R=q=he:q=q.next=he,j=j.next}while(j!==null);q===null?R=q=x:q=q.next=x}else R=q=x;j={baseState:_.baseState,firstBaseUpdate:R,lastBaseUpdate:q,shared:_.shared,callbacks:_.callbacks},f.updateQueue=j;return}f=j.lastBaseUpdate,f===null?j.firstBaseUpdate=x:f.next=x,j.lastBaseUpdate=x}var vr=!1;function Vr(){if(vr){var f=ud;if(f!==null)throw f}}function gr(f,x,j,_){vr=!1;var R=f.updateQueue;Pt=!1;var q=R.firstBaseUpdate,he=R.lastBaseUpdate,Ce=R.shared.pending;if(Ce!==null){R.shared.pending=null;var Je=Ce,kt=Je.next;Je.next=null,he===null?q=kt:he.next=kt,he=Je;var qt=f.alternate;qt!==null&&(qt=qt.updateQueue,Ce=qt.lastBaseUpdate,Ce!==he&&(Ce===null?qt.firstBaseUpdate=kt:Ce.next=kt,qt.lastBaseUpdate=Je))}if(q!==null){var Jt=R.baseState;he=0,qt=kt=Je=null,Ce=q;do{var Et=Ce.lane&-536870913,Dt=Et!==Ce.lane;if(Dt?($n&Et)===Et:(_&Et)===Et){Et!==0&&Et===yh&&(vr=!0),qt!==null&&(qt=qt.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var ln=f,Jr=Ce;Et=x;var wa=j;switch(Jr.tag){case 1:if(ln=Jr.payload,typeof ln=="function"){Jt=ln.call(wa,Jt,Et);break e}Jt=ln;break e;case 3:ln.flags=ln.flags&-65537|128;case 0:if(ln=Jr.payload,Et=typeof ln=="function"?ln.call(wa,Jt,Et):ln,Et==null)break e;Jt=u({},Jt,Et);break e;case 2:Pt=!0}}Et=Ce.callback,Et!==null&&(f.flags|=64,Dt&&(f.flags|=8192),Dt=R.callbacks,Dt===null?R.callbacks=[Et]:Dt.push(Et))}else Dt={lane:Et,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},qt===null?(kt=qt=Dt,Je=Jt):qt=qt.next=Dt,he|=Et;if(Ce=Ce.next,Ce===null){if(Ce=R.shared.pending,Ce===null)break;Dt=Ce,Ce=Dt.next,Dt.next=null,R.lastBaseUpdate=Dt,R.shared.pending=null}}while(!0);qt===null&&(Je=Jt),R.baseState=Je,R.firstBaseUpdate=kt,R.lastBaseUpdate=qt,q===null&&(R.shared.lanes=0),nm|=he,f.lanes=he,f.memoizedState=Jt}}function Bn(f,x){if(typeof f!="function")throw Error(n(191,f));f.call(x)}function Kn(f,x){var j=f.callbacks;if(j!==null)for(f.callbacks=null,f=0;f<j.length;f++)Bn(j[f],x)}var Cn=ue(null),jn=ue(0);function ia(f,x){f=Ah,V(jn,f),V(Cn,x),Ah=f|x.baseLanes}function Xn(){V(jn,Ah),V(Cn,Cn.current)}function hn(){Ah=jn.current,M(Cn),M(jn)}var ua=0,Gr=null,an=null,Ln=null,Un=!1,Ws=!1,As=!1,as=0,ss=0,ps=null,Qo=0;function Qn(){throw Error(n(321))}function xs(f,x){if(x===null)return!1;for(var j=0;j<x.length&&j<f.length;j++)if(!qs(f[j],x[j]))return!1;return!0}function _l(f,x,j,_,R,q){return ua=q,Gr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,U.H=f===null||f.memoizedState===null?II:PI,As=!1,q=j(_,R),As=!1,Ws&&(q=jh(x,j,_,R)),su(f),q}function su(f){U.H=$1;var x=an!==null&&an.next!==null;if(ua=0,Ln=an=Gr=null,Un=!1,ss=0,ps=null,x)throw Error(n(300));f===null||pi||(f=f.dependencies,f!==null&&a0(f)&&(pi=!0))}function jh(f,x,j,_){Gr=f;var R=0;do{if(Ws&&(ps=null),ss=0,Ws=!1,25<=R)throw Error(n(301));if(R+=1,Ln=an=null,f.updateQueue!=null){var q=f.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}U.H=tX,q=x(j,_)}while(Ws);return q}function iu(){var f=U.H,x=f.useState()[0];return x=typeof x.then=="function"?ou(x):x,f=f.useState()[0],(an!==null?an.memoizedState:null)!==f&&(Gr.flags|=1024),x}function Oa(){var f=as!==0;return as=0,f}function gp(f,x,j){x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~j}function i0(f){if(Un){for(f=f.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Un=!1}ua=0,Ln=an=Gr=null,Ws=!1,ss=as=0,ps=null}function Oi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Gr.memoizedState=Ln=f:Ln=Ln.next=f,Ln}function Ba(){if(an===null){var f=Gr.alternate;f=f!==null?f.memoizedState:null}else f=an.next;var x=Ln===null?Gr.memoizedState:Ln.next;if(x!==null)Ln=x,an=f;else{if(f===null)throw Gr.alternate===null?Error(n(467)):Error(n(310));an=f,f={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Ln===null?Gr.memoizedState=Ln=f:Ln=Ln.next=f}return Ln}function Nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(f){var x=ss;return ss+=1,ps===null&&(ps=[]),f=Ct(ps,f,x),x=Gr,(Ln===null?x.memoizedState:Ln.next)===null&&(x=x.alternate,U.H=x===null||x.memoizedState===null?II:PI),f}function to(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return ou(f);if(f.$$typeof===N)return Es(f)}throw Error(n(438,String(f)))}function lu(f){var x=null,j=Gr.updateQueue;if(j!==null&&(x=j.memoCache),x==null){var _=Gr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(x={data:_.data.map(function(R){return R.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),j===null&&(j=Nh(),Gr.updateQueue=j),j.memoCache=x,j=x.data[x.index],j===void 0)for(j=x.data[x.index]=Array(f),_=0;_<f;_++)j[_]=L;return x.index++,j}function ro(f,x){return typeof x=="function"?x(f):x}function bp(f){var x=Ba();return Wf(x,an,f)}function Wf(f,x,j){var _=f.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=j;var R=f.baseQueue,q=_.pending;if(q!==null){if(R!==null){var he=R.next;R.next=q.next,q.next=he}x.baseQueue=R=q,_.pending=null}if(q=f.baseState,R===null)f.memoizedState=q;else{x=R.next;var Ce=he=null,Je=null,kt=x,qt=!1;do{var Jt=kt.lane&-536870913;if(Jt!==kt.lane?($n&Jt)===Jt:(ua&Jt)===Jt){var Et=kt.revertLane;if(Et===0)Je!==null&&(Je=Je.next={lane:0,revertLane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),Jt===yh&&(qt=!0);else if((ua&Et)===Et){kt=kt.next,Et===yh&&(qt=!0);continue}else Jt={lane:0,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},Je===null?(Ce=Je=Jt,he=q):Je=Je.next=Jt,Gr.lanes|=Et,nm|=Et;Jt=kt.action,As&&j(q,Jt),q=kt.hasEagerState?kt.eagerState:j(q,Jt)}else Et={lane:Jt,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},Je===null?(Ce=Je=Et,he=q):Je=Je.next=Et,Gr.lanes|=Jt,nm|=Jt;kt=kt.next}while(kt!==null&&kt!==x);if(Je===null?he=q:Je.next=Ce,!qs(q,f.memoizedState)&&(pi=!0,qt&&(j=ud,j!==null)))throw j;f.memoizedState=q,f.baseState=he,f.baseQueue=Je,_.lastRenderedState=q}return R===null&&(_.lanes=0),[f.memoizedState,_.dispatch]}function o0(f){var x=Ba(),j=x.queue;if(j===null)throw Error(n(311));j.lastRenderedReducer=f;var _=j.dispatch,R=j.pending,q=x.memoizedState;if(R!==null){j.pending=null;var he=R=R.next;do q=f(q,he.action),he=he.next;while(he!==R);qs(q,x.memoizedState)||(pi=!0),x.memoizedState=q,x.baseQueue===null&&(x.baseState=q),j.lastRenderedState=q}return[q,_]}function yp(f,x,j){var _=Gr,R=Ba(),q=zn;if(q){if(j===void 0)throw Error(n(407));j=j()}else j=x();var he=!qs((an||R).memoizedState,j);he&&(R.memoizedState=j,pi=!0),R=R.queue;var Ce=Gf.bind(null,_,R,f);if(Xf(2048,8,Ce,[f]),R.getSnapshot!==x||he||Ln!==null&&Ln.memoizedState.tag&1){if(_.flags|=2048,fd(9,Sp(),jp.bind(null,_,R,j,x),null),Ma===null)throw Error(n(349));q||(ua&124)!==0||l0(_,x,j)}return j}function l0(f,x,j){f.flags|=16384,f={getSnapshot:x,value:j},x=Gr.updateQueue,x===null?(x=Nh(),Gr.updateQueue=x,x.stores=[f]):(j=x.stores,j===null?x.stores=[f]:j.push(f))}function jp(f,x,j,_){x.value=j,x.getSnapshot=_,A1(x)&&T1(f)}function Gf(f,x,j){return j(function(){A1(x)&&T1(f)})}function A1(f){var x=f.getSnapshot;f=f.value;try{var j=x();return!qs(f,j)}catch{return!0}}function T1(f){var x=ad(f,2);x!==null&&Pl(x,f,2)}function Np(f){var x=Oi();if(typeof f=="function"){var j=f;if(f=j(),As){Ke(!0);try{j()}finally{Ke(!1)}}}return x.memoizedState=x.baseState=f,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:f},x}function hd(f,x,j,_){return f.baseState=j,Wf(f,an,typeof _=="function"?_:ro)}function sC(f,x,j,_,R){if(U1(f))throw Error(n(485));if(f=x.action,f!==null){var q={payload:R,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(he){q.listeners.push(he)}};U.T!==null?j(!0):q.isTransition=!1,_(q),j=x.pending,j===null?(q.next=x.pending=q,I1(x,q)):(q.next=j.next,x.pending=j.next=q)}}function I1(f,x){var j=x.action,_=x.payload,R=f.state;if(x.isTransition){var q=U.T,he={};U.T=he;try{var Ce=j(R,_),Je=U.S;Je!==null&&Je(he,Ce),P1(f,x,Ce)}catch(kt){Yf(f,x,kt)}finally{U.T=q}}else try{q=j(R,_),P1(f,x,q)}catch(kt){Yf(f,x,kt)}}function P1(f,x,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(_){jg(f,x,_)},function(_){return Yf(f,x,_)}):jg(f,x,j)}function jg(f,x,j){x.status="fulfilled",x.value=j,Ng(x),f.state=j,x=f.pending,x!==null&&(j=x.next,j===x?f.pending=null:(j=j.next,x.next=j,I1(f,j)))}function Yf(f,x,j){var _=f.pending;if(f.pending=null,_!==null){_=_.next;do x.status="rejected",x.reason=j,Ng(x),x=x.next;while(x!==_)}f.action=null}function Ng(f){f=f.listeners;for(var x=0;x<f.length;x++)(0,f[x])()}function wg(f,x){return x}function wp(f,x){if(zn){var j=Ma.formState;if(j!==null){e:{var _=Gr;if(zn){if(Ya){t:{for(var R=Ya,q=mc;R.nodeType!==8;){if(!q){R=null;break t}if(R=vd(R.nextSibling),R===null){R=null;break t}}q=R.data,R=q==="F!"||q==="F"?R:null}if(R){Ya=vd(R.nextSibling),_=R.data==="F!";break e}}bh(_)}_=!1}_&&(x=j[0])}}return j=Oi(),j.memoizedState=j.baseState=x,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:x},j.queue=_,j=DI.bind(null,Gr,_),_.dispatch=j,_=Np(!1),q=iC.bind(null,Gr,!1,_.queue),_=Oi(),R={state:x,dispatch:null,action:f,pending:null},_.queue=R,j=sC.bind(null,Gr,R,q,j),R.dispatch=j,_.memoizedState=f,[x,j,!1]}function c0(f){var x=Ba();return Kf(x,an,f)}function Kf(f,x,j){if(x=Wf(f,x,wg)[0],f=bp(ro)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var _=ou(x)}catch(he){throw he===ye?Se:he}else _=x;x=Ba();var R=x.queue,q=R.dispatch;return j!==x.memoizedState&&(Gr.flags|=2048,fd(9,Sp(),O1.bind(null,R,j),null)),[_,q,f]}function O1(f,x){f.action=x}function M1(f){var x=Ba(),j=an;if(j!==null)return Kf(x,j,f);Ba(),x=x.memoizedState,j=Ba();var _=j.queue.dispatch;return j.memoizedState=f,[x,_,!1]}function fd(f,x,j,_){return f={tag:f,create:j,deps:_,inst:x,next:null},x=Gr.updateQueue,x===null&&(x=Nh(),Gr.updateQueue=x),j=x.lastEffect,j===null?x.lastEffect=f.next=f:(_=j.next,j.next=f,f.next=_,x.lastEffect=f),f}function Sp(){return{destroy:void 0,resource:void 0}}function d0(){return Ba().memoizedState}function El(f,x,j,_){var R=Oi();_=_===void 0?null:_,Gr.flags|=f,R.memoizedState=fd(1|x,Sp(),j,_)}function Xf(f,x,j,_){var R=Ba();_=_===void 0?null:_;var q=R.memoizedState.inst;an!==null&&_!==null&&xs(_,an.memoizedState.deps)?R.memoizedState=fd(x,q,j,_):(Gr.flags|=f,R.memoizedState=fd(1|x,q,j,_))}function Sg(f,x){El(8390656,8,f,x)}function R1(f,x){Xf(2048,8,f,x)}function Cg(f,x){return Xf(4,2,f,x)}function wh(f,x){return Xf(4,4,f,x)}function F1(f,x){if(typeof x=="function"){f=f();var j=x(f);return function(){typeof j=="function"?j():x(null)}}if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function kg(f,x,j){j=j!=null?j.concat([f]):null,Xf(4,4,F1.bind(null,x,f),j)}function _g(){}function Eg(f,x){var j=Ba();x=x===void 0?null:x;var _=j.memoizedState;return x!==null&&xs(x,_[1])?_[0]:(j.memoizedState=[f,x],f)}function L1(f,x){var j=Ba();x=x===void 0?null:x;var _=j.memoizedState;if(x!==null&&xs(x,_[1]))return _[0];if(_=f(),As){Ke(!0);try{f()}finally{Ke(!1)}}return j.memoizedState=[_,x],_}function Sh(f,x,j){return j===void 0||(ua&1073741824)!==0?f.memoizedState=x:(f.memoizedState=j,f=CP(),Gr.lanes|=f,nm|=f,j)}function u0(f,x,j,_){return qs(j,x)?j:Cn.current!==null?(f=Sh(f,j,_),qs(f,x)||(pi=!0),f):(ua&42)===0?(pi=!0,f.memoizedState=j):(f=CP(),Gr.lanes|=f,nm|=f,x)}function Cp(f,x,j,_,R){var q=X.p;X.p=q!==0&&8>q?q:8;var he=U.T,Ce={};U.T=Ce,iC(f,!1,x,j);try{var Je=R(),kt=U.S;if(kt!==null&&kt(Ce,Je),Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var qt=D1(Je,_);Ig(f,x,qt,Il(f))}else Ig(f,x,_,Il(f))}catch(Jt){Ig(f,x,{then:function(){},status:"rejected",reason:Jt},Il())}finally{X.p=q,U.T=he}}function md(){}function gc(f,x,j,_){if(f.tag!==5)throw Error(n(476));var R=pd(f).queue;Cp(f,R,x,B,j===null?md:function(){return kp(f),j(_)})}function pd(f){var x=f.memoizedState;if(x!==null)return x;x={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:B},next:null};var j={};return x.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:j},next:null},f.memoizedState=x,f=f.alternate,f!==null&&(f.memoizedState=x),x}function kp(f){var x=pd(f).next.queue;Ig(f,x,{},Il())}function _p(){return Es(Xg)}function Dg(){return Ba().memoizedState}function B1(){return Ba().memoizedState}function Ag(f){for(var x=f.return;x!==null;){switch(x.tag){case 24:case 3:var j=Il();f=Vt(j);var _=Qt(x,f,j);_!==null&&(Pl(_,x,j),Ht(_,x,j)),x={cache:bg()},f.payload=x;return}x=x.return}}function Tg(f,x,j){var _=Il();j={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null},U1(f)?AI(x,j):(j=eu(f,x,j,_),j!==null&&(Pl(j,f,_),TI(j,x,_)))}function DI(f,x,j){var _=Il();Ig(f,x,j,_)}function Ig(f,x,j,_){var R={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null};if(U1(f))AI(x,R);else{var q=f.alternate;if(f.lanes===0&&(q===null||q.lanes===0)&&(q=x.lastRenderedReducer,q!==null))try{var he=x.lastRenderedState,Ce=q(he,j);if(R.hasEagerState=!0,R.eagerState=Ce,qs(Ce,he))return Zd(f,x,R,0),Ma===null&&Yo(),!1}catch{}finally{}if(j=eu(f,x,R,_),j!==null)return Pl(j,f,_),TI(j,x,_),!0}return!1}function iC(f,x,j,_){if(_={lane:2,revertLane:LC(),action:_,hasEagerState:!1,eagerState:null,next:null},U1(f)){if(x)throw Error(n(479))}else x=eu(f,j,_,2),x!==null&&Pl(x,f,2)}function U1(f){var x=f.alternate;return f===Gr||x!==null&&x===Gr}function AI(f,x){Ws=Un=!0;var j=f.pending;j===null?x.next=x:(x.next=j.next,j.next=x),f.pending=x}function TI(f,x,j){if((j&4194048)!==0){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ee(f,j)}}var $1={readContext:Es,use:to,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn},II={readContext:Es,use:to,useCallback:function(f,x){return Oi().memoizedState=[f,x===void 0?null:x],f},useContext:Es,useEffect:Sg,useImperativeHandle:function(f,x,j){j=j!=null?j.concat([f]):null,El(4194308,4,F1.bind(null,x,f),j)},useLayoutEffect:function(f,x){return El(4194308,4,f,x)},useInsertionEffect:function(f,x){El(4,2,f,x)},useMemo:function(f,x){var j=Oi();x=x===void 0?null:x;var _=f();if(As){Ke(!0);try{f()}finally{Ke(!1)}}return j.memoizedState=[_,x],_},useReducer:function(f,x,j){var _=Oi();if(j!==void 0){var R=j(x);if(As){Ke(!0);try{j(x)}finally{Ke(!1)}}}else R=x;return _.memoizedState=_.baseState=R,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:R},_.queue=f,f=f.dispatch=Tg.bind(null,Gr,f),[_.memoizedState,f]},useRef:function(f){var x=Oi();return f={current:f},x.memoizedState=f},useState:function(f){f=Np(f);var x=f.queue,j=DI.bind(null,Gr,x);return x.dispatch=j,[f.memoizedState,j]},useDebugValue:_g,useDeferredValue:function(f,x){var j=Oi();return Sh(j,f,x)},useTransition:function(){var f=Np(!1);return f=Cp.bind(null,Gr,f.queue,!0,!1),Oi().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,x,j){var _=Gr,R=Oi();if(zn){if(j===void 0)throw Error(n(407));j=j()}else{if(j=x(),Ma===null)throw Error(n(349));($n&124)!==0||l0(_,x,j)}R.memoizedState=j;var q={value:j,getSnapshot:x};return R.queue=q,Sg(Gf.bind(null,_,q,f),[f]),_.flags|=2048,fd(9,Sp(),jp.bind(null,_,q,j,x),null),j},useId:function(){var f=Oi(),x=Ma.identifierPrefix;if(zn){var j=ld,_=od;j=(_&~(1<<32-ge(_)-1)).toString(32)+j,x=""+x+"R"+j,j=as++,0<j&&(x+="H"+j.toString(32)),x+=""}else j=Qo++,x=""+x+"r"+j.toString(32)+"";return f.memoizedState=x},useHostTransitionStatus:_p,useFormState:wp,useActionState:wp,useOptimistic:function(f){var x=Oi();x.memoizedState=x.baseState=f;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=j,x=iC.bind(null,Gr,!0,j),j.dispatch=x,[f,x]},useMemoCache:lu,useCacheRefresh:function(){return Oi().memoizedState=Ag.bind(null,Gr)}},PI={readContext:Es,use:to,useCallback:Eg,useContext:Es,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:wh,useMemo:L1,useReducer:bp,useRef:d0,useState:function(){return bp(ro)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Ba();return u0(j,an.memoizedState,f,x)},useTransition:function(){var f=bp(ro)[0],x=Ba().memoizedState;return[typeof f=="boolean"?f:ou(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:c0,useActionState:c0,useOptimistic:function(f,x){var j=Ba();return hd(j,an,f,x)},useMemoCache:lu,useCacheRefresh:B1},tX={readContext:Es,use:to,useCallback:Eg,useContext:Es,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:wh,useMemo:L1,useReducer:o0,useRef:d0,useState:function(){return o0(ro)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Ba();return an===null?Sh(j,f,x):u0(j,an.memoizedState,f,x)},useTransition:function(){var f=o0(ro)[0],x=Ba().memoizedState;return[typeof f=="boolean"?f:ou(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:M1,useActionState:M1,useOptimistic:function(f,x){var j=Ba();return an!==null?hd(j,an,f,x):(j.baseState=f,[f,j.queue.dispatch])},useMemoCache:lu,useCacheRefresh:B1},h0=null,Pg=0;function V1(f){var x=Pg;return Pg+=1,h0===null&&(h0=[]),Ct(h0,f,x)}function Og(f,x){x=x.props.ref,f.ref=x!==void 0?x:null}function q1(f,x){throw x.$$typeof===h?Error(n(525)):(f=Object.prototype.toString.call(x),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f)))}function OI(f){var x=f._init;return x(f._payload)}function MI(f){function x(mt,it){if(f){var St=mt.deletions;St===null?(mt.deletions=[it],mt.flags|=16):St.push(it)}}function j(mt,it){if(!f)return null;for(;it!==null;)x(mt,it),it=it.sibling;return null}function _(mt){for(var it=new Map;mt!==null;)mt.key!==null?it.set(mt.key,mt):it.set(mt.index,mt),mt=mt.sibling;return it}function R(mt,it){return mt=fc(mt,it),mt.index=0,mt.sibling=null,mt}function q(mt,it,St){return mt.index=St,f?(St=mt.alternate,St!==null?(St=St.index,St<it?(mt.flags|=67108866,it):St):(mt.flags|=67108866,it)):(mt.flags|=1048576,it)}function he(mt){return f&&mt.alternate===null&&(mt.flags|=67108866),mt}function Ce(mt,it,St,Kt){return it===null||it.tag!==6?(it=e0(St,mt.mode,Kt),it.return=mt,it):(it=R(it,St),it.return=mt,it)}function Je(mt,it,St,Kt){var Dr=St.type;return Dr===v?qt(mt,it,St.props.children,Kt,St.key):it!==null&&(it.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===T&&OI(Dr)===it.type)?(it=R(it,St.props),Og(it,St),it.return=mt,it):(it=xh(St.type,St.key,St.props,null,mt.mode,Kt),Og(it,St),it.return=mt,it)}function kt(mt,it,St,Kt){return it===null||it.tag!==4||it.stateNode.containerInfo!==St.containerInfo||it.stateNode.implementation!==St.implementation?(it=fp(St,mt.mode,Kt),it.return=mt,it):(it=R(it,St.children||[]),it.return=mt,it)}function qt(mt,it,St,Kt,Dr){return it===null||it.tag!==7?(it=sd(St,mt.mode,Kt,Dr),it.return=mt,it):(it=R(it,St),it.return=mt,it)}function Jt(mt,it,St){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=e0(""+it,mt.mode,St),it.return=mt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case m:return St=xh(it.type,it.key,it.props,null,mt.mode,St),Og(St,it),St.return=mt,St;case p:return it=fp(it,mt.mode,St),it.return=mt,it;case T:var Kt=it._init;return it=Kt(it._payload),Jt(mt,it,St)}if(re(it)||O(it))return it=sd(it,mt.mode,St,null),it.return=mt,it;if(typeof it.then=="function")return Jt(mt,V1(it),St);if(it.$$typeof===N)return Jt(mt,au(mt,it),St);q1(mt,it)}return null}function Et(mt,it,St,Kt){var Dr=it!==null?it.key:null;if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return Dr!==null?null:Ce(mt,it,""+St,Kt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case m:return St.key===Dr?Je(mt,it,St,Kt):null;case p:return St.key===Dr?kt(mt,it,St,Kt):null;case T:return Dr=St._init,St=Dr(St._payload),Et(mt,it,St,Kt)}if(re(St)||O(St))return Dr!==null?null:qt(mt,it,St,Kt,null);if(typeof St.then=="function")return Et(mt,it,V1(St),Kt);if(St.$$typeof===N)return Et(mt,it,au(mt,St),Kt);q1(mt,St)}return null}function Dt(mt,it,St,Kt,Dr){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return mt=mt.get(St)||null,Ce(it,mt,""+Kt,Dr);if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case m:return mt=mt.get(Kt.key===null?St:Kt.key)||null,Je(it,mt,Kt,Dr);case p:return mt=mt.get(Kt.key===null?St:Kt.key)||null,kt(it,mt,Kt,Dr);case T:var An=Kt._init;return Kt=An(Kt._payload),Dt(mt,it,St,Kt,Dr)}if(re(Kt)||O(Kt))return mt=mt.get(St)||null,qt(it,mt,Kt,Dr,null);if(typeof Kt.then=="function")return Dt(mt,it,St,V1(Kt),Dr);if(Kt.$$typeof===N)return Dt(mt,it,St,au(it,Kt),Dr);q1(it,Kt)}return null}function ln(mt,it,St,Kt){for(var Dr=null,An=null,zr=it,en=it=0,vi=null;zr!==null&&en<St.length;en++){zr.index>en?(vi=zr,zr=null):vi=zr.sibling;var Jn=Et(mt,zr,St[en],Kt);if(Jn===null){zr===null&&(zr=vi);break}f&&zr&&Jn.alternate===null&&x(mt,zr),it=q(Jn,it,en),An===null?Dr=Jn:An.sibling=Jn,An=Jn,zr=vi}if(en===St.length)return j(mt,zr),zn&&gh(mt,en),Dr;if(zr===null){for(;en<St.length;en++)zr=Jt(mt,St[en],Kt),zr!==null&&(it=q(zr,it,en),An===null?Dr=zr:An.sibling=zr,An=zr);return zn&&gh(mt,en),Dr}for(zr=_(zr);en<St.length;en++)vi=Dt(zr,mt,en,St[en],Kt),vi!==null&&(f&&vi.alternate!==null&&zr.delete(vi.key===null?en:vi.key),it=q(vi,it,en),An===null?Dr=vi:An.sibling=vi,An=vi);return f&&zr.forEach(function(hm){return x(mt,hm)}),zn&&gh(mt,en),Dr}function Jr(mt,it,St,Kt){if(St==null)throw Error(n(151));for(var Dr=null,An=null,zr=it,en=it=0,vi=null,Jn=St.next();zr!==null&&!Jn.done;en++,Jn=St.next()){zr.index>en?(vi=zr,zr=null):vi=zr.sibling;var hm=Et(mt,zr,Jn.value,Kt);if(hm===null){zr===null&&(zr=vi);break}f&&zr&&hm.alternate===null&&x(mt,zr),it=q(hm,it,en),An===null?Dr=hm:An.sibling=hm,An=hm,zr=vi}if(Jn.done)return j(mt,zr),zn&&gh(mt,en),Dr;if(zr===null){for(;!Jn.done;en++,Jn=St.next())Jn=Jt(mt,Jn.value,Kt),Jn!==null&&(it=q(Jn,it,en),An===null?Dr=Jn:An.sibling=Jn,An=Jn);return zn&&gh(mt,en),Dr}for(zr=_(zr);!Jn.done;en++,Jn=St.next())Jn=Dt(zr,mt,en,Jn.value,Kt),Jn!==null&&(f&&Jn.alternate!==null&&zr.delete(Jn.key===null?en:Jn.key),it=q(Jn,it,en),An===null?Dr=Jn:An.sibling=Jn,An=Jn);return f&&zr.forEach(function(rQ){return x(mt,rQ)}),zn&&gh(mt,en),Dr}function wa(mt,it,St,Kt){if(typeof St=="object"&&St!==null&&St.type===v&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case m:e:{for(var Dr=St.key;it!==null;){if(it.key===Dr){if(Dr=St.type,Dr===v){if(it.tag===7){j(mt,it.sibling),Kt=R(it,St.props.children),Kt.return=mt,mt=Kt;break e}}else if(it.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===T&&OI(Dr)===it.type){j(mt,it.sibling),Kt=R(it,St.props),Og(Kt,St),Kt.return=mt,mt=Kt;break e}j(mt,it);break}else x(mt,it);it=it.sibling}St.type===v?(Kt=sd(St.props.children,mt.mode,Kt,St.key),Kt.return=mt,mt=Kt):(Kt=xh(St.type,St.key,St.props,null,mt.mode,Kt),Og(Kt,St),Kt.return=mt,mt=Kt)}return he(mt);case p:e:{for(Dr=St.key;it!==null;){if(it.key===Dr)if(it.tag===4&&it.stateNode.containerInfo===St.containerInfo&&it.stateNode.implementation===St.implementation){j(mt,it.sibling),Kt=R(it,St.children||[]),Kt.return=mt,mt=Kt;break e}else{j(mt,it);break}else x(mt,it);it=it.sibling}Kt=fp(St,mt.mode,Kt),Kt.return=mt,mt=Kt}return he(mt);case T:return Dr=St._init,St=Dr(St._payload),wa(mt,it,St,Kt)}if(re(St))return ln(mt,it,St,Kt);if(O(St)){if(Dr=O(St),typeof Dr!="function")throw Error(n(150));return St=Dr.call(St),Jr(mt,it,St,Kt)}if(typeof St.then=="function")return wa(mt,it,V1(St),Kt);if(St.$$typeof===N)return wa(mt,it,au(mt,St),Kt);q1(mt,St)}return typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint"?(St=""+St,it!==null&&it.tag===6?(j(mt,it.sibling),Kt=R(it,St),Kt.return=mt,mt=Kt):(j(mt,it),Kt=e0(St,mt.mode,Kt),Kt.return=mt,mt=Kt),he(mt)):j(mt,it)}return function(mt,it,St,Kt){try{Pg=0;var Dr=wa(mt,it,St,Kt);return h0=null,Dr}catch(zr){if(zr===ye||zr===Se)throw zr;var An=mi(29,zr,null,mt.mode);return An.lanes=Kt,An.return=mt,An}finally{}}}var f0=MI(!0),RI=MI(!1),bc=ue(null),cu=null;function Qf(f){var x=f.alternate;V(ri,ri.current&1),V(bc,f),cu===null&&(x===null||Cn.current!==null||x.memoizedState!==null)&&(cu=f)}function FI(f){if(f.tag===22){if(V(ri,ri.current),V(bc,f),cu===null){var x=f.alternate;x!==null&&x.memoizedState!==null&&(cu=f)}}else Jf()}function Jf(){V(ri,ri.current),V(bc,bc.current)}function Ch(f){M(bc),cu===f&&(cu=null),M(ri)}var ri=ue(0);function z1(f){for(var x=f;x!==null;){if(x.tag===13){var j=x.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||j.data==="$?"||XC(j)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}function oC(f,x,j,_){x=f.memoizedState,j=j(_,x),j=j==null?x:u({},x,j),f.memoizedState=j,f.lanes===0&&(f.updateQueue.baseState=j)}var lC={enqueueSetState:function(f,x,j){f=f._reactInternals;var _=Il(),R=Vt(_);R.payload=x,j!=null&&(R.callback=j),x=Qt(f,R,_),x!==null&&(Pl(x,f,_),Ht(x,f,_))},enqueueReplaceState:function(f,x,j){f=f._reactInternals;var _=Il(),R=Vt(_);R.tag=1,R.payload=x,j!=null&&(R.callback=j),x=Qt(f,R,_),x!==null&&(Pl(x,f,_),Ht(x,f,_))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var j=Il(),_=Vt(j);_.tag=2,x!=null&&(_.callback=x),x=Qt(f,_,j),x!==null&&(Pl(x,f,j),Ht(x,f,j))}};function LI(f,x,j,_,R,q,he){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(_,q,he):x.prototype&&x.prototype.isPureReactComponent?!Wd(j,_)||!Wd(R,q):!0}function BI(f,x,j,_){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(j,_),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(j,_),x.state!==f&&lC.enqueueReplaceState(x,x.state,null)}function Ep(f,x){var j=x;if("ref"in x){j={};for(var _ in x)_!=="ref"&&(j[_]=x[_])}if(f=f.defaultProps){j===x&&(j=u({},j));for(var R in f)j[R]===void 0&&(j[R]=f[R])}return j}var H1=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function UI(f){H1(f)}function $I(f){console.error(f)}function VI(f){H1(f)}function W1(f,x){try{var j=f.onUncaughtError;j(x.value,{componentStack:x.stack})}catch(_){setTimeout(function(){throw _})}}function qI(f,x,j){try{var _=f.onCaughtError;_(j.value,{componentStack:j.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function cC(f,x,j){return j=Vt(j),j.tag=3,j.payload={element:null},j.callback=function(){W1(f,x)},j}function zI(f){return f=Vt(f),f.tag=3,f}function HI(f,x,j,_){var R=j.type.getDerivedStateFromError;if(typeof R=="function"){var q=_.value;f.payload=function(){return R(q)},f.callback=function(){qI(x,j,_)}}var he=j.stateNode;he!==null&&typeof he.componentDidCatch=="function"&&(f.callback=function(){qI(x,j,_),typeof R!="function"&&(am===null?am=new Set([this]):am.add(this));var Ce=_.stack;this.componentDidCatch(_.value,{componentStack:Ce!==null?Ce:""})})}function rX(f,x,j,_,R){if(j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(x=j.alternate,x!==null&&Hf(x,j,R,!0),j=bc.current,j!==null){switch(j.tag){case 13:return cu===null?PC():j.alternate===null&&vs===0&&(vs=3),j.flags&=-257,j.flags|=65536,j.lanes=R,_===De?j.flags|=16384:(x=j.updateQueue,x===null?j.updateQueue=new Set([_]):x.add(_),MC(f,_,R)),!1;case 22:return j.flags|=65536,_===De?j.flags|=16384:(x=j.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([_])},j.updateQueue=x):(j=x.retryQueue,j===null?x.retryQueue=new Set([_]):j.add(_)),MC(f,_,R)),!1}throw Error(n(435,j.tag))}return MC(f,_,R),PC(),!1}if(zn)return x=bc.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=R,_!==gg&&(f=Error(n(422),{cause:_}),zf(kn(f,j)))):(_!==gg&&(x=Error(n(423),{cause:_}),zf(kn(x,j))),f=f.current.alternate,f.flags|=65536,R&=-R,f.lanes|=R,_=kn(_,j),R=cC(f.stateNode,_,R),wr(f,R),vs!==4&&(vs=2)),!1;var q=Error(n(520),{cause:_});if(q=kn(q,j),$g===null?$g=[q]:$g.push(q),vs!==4&&(vs=2),x===null)return!0;_=kn(_,j),j=x;do{switch(j.tag){case 3:return j.flags|=65536,f=R&-R,j.lanes|=f,f=cC(j.stateNode,_,f),wr(j,f),!1;case 1:if(x=j.type,q=j.stateNode,(j.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(am===null||!am.has(q))))return j.flags|=65536,R&=-R,j.lanes|=R,R=zI(R),HI(R,f,j,_),wr(j,R),!1}j=j.return}while(j!==null);return!1}var WI=Error(n(461)),pi=!1;function Mi(f,x,j,_){x.child=f===null?RI(x,null,j,_):f0(x,f.child,j,_)}function GI(f,x,j,_,R){j=j.render;var q=x.ref;if("ref"in _){var he={};for(var Ce in _)Ce!=="ref"&&(he[Ce]=_[Ce])}else he=_;return vc(x),_=_l(f,x,j,he,q,R),Ce=Oa(),f!==null&&!pi?(gp(f,x,R),kh(f,x,R)):(zn&&Ce&&mp(x),x.flags|=1,Mi(f,x,_,R),x.child)}function YI(f,x,j,_,R){if(f===null){var q=j.type;return typeof q=="function"&&!Vf(q)&&q.defaultProps===void 0&&j.compare===null?(x.tag=15,x.type=q,KI(f,x,q,_,R)):(f=xh(j.type,null,_,x,x.mode,R),f.ref=x.ref,f.return=x,x.child=f)}if(q=f.child,!vC(f,R)){var he=q.memoizedProps;if(j=j.compare,j=j!==null?j:Wd,j(he,_)&&f.ref===x.ref)return kh(f,x,R)}return x.flags|=1,f=fc(q,_),f.ref=x.ref,f.return=x,x.child=f}function KI(f,x,j,_,R){if(f!==null){var q=f.memoizedProps;if(Wd(q,_)&&f.ref===x.ref)if(pi=!1,x.pendingProps=_=q,vC(f,R))(f.flags&131072)!==0&&(pi=!0);else return x.lanes=f.lanes,kh(f,x,R)}return dC(f,x,j,_,R)}function XI(f,x,j){var _=x.pendingProps,R=_.children,q=f!==null?f.memoizedState:null;if(_.mode==="hidden"){if((x.flags&128)!==0){if(_=q!==null?q.baseLanes|j:j,f!==null){for(R=x.child=f.child,q=0;R!==null;)q=q|R.lanes|R.childLanes,R=R.sibling;x.childLanes=q&~_}else x.childLanes=0,x.child=null;return QI(f,x,_,j)}if((j&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},f!==null&&le(x,q!==null?q.cachePool:null),q!==null?ia(x,q):Xn(),FI(x);else return x.lanes=x.childLanes=536870912,QI(f,x,q!==null?q.baseLanes|j:j,j)}else q!==null?(le(x,q.cachePool),ia(x,q),Jf(),x.memoizedState=null):(f!==null&&le(x,null),Xn(),Jf());return Mi(f,x,R,j),x.child}function QI(f,x,j,_){var R=J();return R=R===null?null:{parent:Ds._currentValue,pool:R},x.memoizedState={baseLanes:j,cachePool:R},f!==null&&le(x,null),Xn(),FI(x),f!==null&&Hf(f,x,_,!0),null}function G1(f,x){var j=x.ref;if(j===null)f!==null&&f.ref!==null&&(x.flags|=4194816);else{if(typeof j!="function"&&typeof j!="object")throw Error(n(284));(f===null||f.ref!==j)&&(x.flags|=4194816)}}function dC(f,x,j,_,R){return vc(x),j=_l(f,x,j,_,void 0,R),_=Oa(),f!==null&&!pi?(gp(f,x,R),kh(f,x,R)):(zn&&_&&mp(x),x.flags|=1,Mi(f,x,j,R),x.child)}function JI(f,x,j,_,R,q){return vc(x),x.updateQueue=null,j=jh(x,_,j,R),su(f),_=Oa(),f!==null&&!pi?(gp(f,x,q),kh(f,x,q)):(zn&&_&&mp(x),x.flags|=1,Mi(f,x,j,q),x.child)}function ZI(f,x,j,_,R){if(vc(x),x.stateNode===null){var q=zs,he=j.contextType;typeof he=="object"&&he!==null&&(q=Es(he)),q=new j(_,q),x.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=lC,x.stateNode=q,q._reactInternals=x,q=x.stateNode,q.props=_,q.state=x.memoizedState,q.refs={},at(x),he=j.contextType,q.context=typeof he=="object"&&he!==null?Es(he):zs,q.state=x.memoizedState,he=j.getDerivedStateFromProps,typeof he=="function"&&(oC(x,j,he,_),q.state=x.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(he=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),he!==q.state&&lC.enqueueReplaceState(q,q.state,null),gr(x,_,q,R),Vr(),q.state=x.memoizedState),typeof q.componentDidMount=="function"&&(x.flags|=4194308),_=!0}else if(f===null){q=x.stateNode;var Ce=x.memoizedProps,Je=Ep(j,Ce);q.props=Je;var kt=q.context,qt=j.contextType;he=zs,typeof qt=="object"&&qt!==null&&(he=Es(qt));var Jt=j.getDerivedStateFromProps;qt=typeof Jt=="function"||typeof q.getSnapshotBeforeUpdate=="function",Ce=x.pendingProps!==Ce,qt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Ce||kt!==he)&&BI(x,q,_,he),Pt=!1;var Et=x.memoizedState;q.state=Et,gr(x,_,q,R),Vr(),kt=x.memoizedState,Ce||Et!==kt||Pt?(typeof Jt=="function"&&(oC(x,j,Jt,_),kt=x.memoizedState),(Je=Pt||LI(x,j,Je,_,Et,kt,he))?(qt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(x.flags|=4194308)):(typeof q.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=_,x.memoizedState=kt),q.props=_,q.state=kt,q.context=he,_=Je):(typeof q.componentDidMount=="function"&&(x.flags|=4194308),_=!1)}else{q=x.stateNode,lt(f,x),he=x.memoizedProps,qt=Ep(j,he),q.props=qt,Jt=x.pendingProps,Et=q.context,kt=j.contextType,Je=zs,typeof kt=="object"&&kt!==null&&(Je=Es(kt)),Ce=j.getDerivedStateFromProps,(kt=typeof Ce=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(he!==Jt||Et!==Je)&&BI(x,q,_,Je),Pt=!1,Et=x.memoizedState,q.state=Et,gr(x,_,q,R),Vr();var Dt=x.memoizedState;he!==Jt||Et!==Dt||Pt||f!==null&&f.dependencies!==null&&a0(f.dependencies)?(typeof Ce=="function"&&(oC(x,j,Ce,_),Dt=x.memoizedState),(qt=Pt||LI(x,j,qt,_,Et,Dt,Je)||f!==null&&f.dependencies!==null&&a0(f.dependencies))?(kt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(_,Dt,Je),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(_,Dt,Je)),typeof q.componentDidUpdate=="function"&&(x.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof q.componentDidUpdate!="function"||he===f.memoizedProps&&Et===f.memoizedState||(x.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||he===f.memoizedProps&&Et===f.memoizedState||(x.flags|=1024),x.memoizedProps=_,x.memoizedState=Dt),q.props=_,q.state=Dt,q.context=Je,_=qt):(typeof q.componentDidUpdate!="function"||he===f.memoizedProps&&Et===f.memoizedState||(x.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||he===f.memoizedProps&&Et===f.memoizedState||(x.flags|=1024),_=!1)}return q=_,G1(f,x),_=(x.flags&128)!==0,q||_?(q=x.stateNode,j=_&&typeof j.getDerivedStateFromError!="function"?null:q.render(),x.flags|=1,f!==null&&_?(x.child=f0(x,f.child,null,R),x.child=f0(x,null,j,R)):Mi(f,x,j,R),x.memoizedState=q.state,f=x.child):f=kh(f,x,R),f}function eP(f,x,j,_){return Po(),x.flags|=256,Mi(f,x,j,_),x.child}var uC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hC(f){return{baseLanes:f,cachePool:fe()}}function fC(f,x,j){return f=f!==null?f.childLanes&~j:0,x&&(f|=yc),f}function tP(f,x,j){var _=x.pendingProps,R=!1,q=(x.flags&128)!==0,he;if((he=q)||(he=f!==null&&f.memoizedState===null?!1:(ri.current&2)!==0),he&&(R=!0,x.flags&=-129),he=(x.flags&32)!==0,x.flags&=-33,f===null){if(zn){if(R?Qf(x):Jf(),zn){var Ce=Ya,Je;if(Je=Ce){e:{for(Je=Ce,Ce=mc;Je.nodeType!==8;){if(!Ce){Ce=null;break e}if(Je=vd(Je.nextSibling),Je===null){Ce=null;break e}}Ce=Je}Ce!==null?(x.memoizedState={dehydrated:Ce,treeContext:vh!==null?{id:od,overflow:ld}:null,retryLane:536870912,hydrationErrors:null},Je=mi(18,null,null,0),Je.stateNode=Ce,Je.return=x,x.child=Je,_s=x,Ya=null,Je=!0):Je=!1}Je||bh(x)}if(Ce=x.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return XC(Ce)?x.lanes=32:x.lanes=536870912,null;Ch(x)}return Ce=_.children,_=_.fallback,R?(Jf(),R=x.mode,Ce=Y1({mode:"hidden",children:Ce},R),_=sd(_,R,j,null),Ce.return=x,_.return=x,Ce.sibling=_,x.child=Ce,R=x.child,R.memoizedState=hC(j),R.childLanes=fC(f,he,j),x.memoizedState=uC,_):(Qf(x),mC(x,Ce))}if(Je=f.memoizedState,Je!==null&&(Ce=Je.dehydrated,Ce!==null)){if(q)x.flags&256?(Qf(x),x.flags&=-257,x=pC(f,x,j)):x.memoizedState!==null?(Jf(),x.child=f.child,x.flags|=128,x=null):(Jf(),R=_.fallback,Ce=x.mode,_=Y1({mode:"visible",children:_.children},Ce),R=sd(R,Ce,j,null),R.flags|=2,_.return=x,R.return=x,_.sibling=R,x.child=_,f0(x,f.child,null,j),_=x.child,_.memoizedState=hC(j),_.childLanes=fC(f,he,j),x.memoizedState=uC,x=R);else if(Qf(x),XC(Ce)){if(he=Ce.nextSibling&&Ce.nextSibling.dataset,he)var kt=he.dgst;he=kt,_=Error(n(419)),_.stack="",_.digest=he,zf({value:_,source:null,stack:null}),x=pC(f,x,j)}else if(pi||Hf(f,x,j,!1),he=(j&f.childLanes)!==0,pi||he){if(he=Ma,he!==null&&(_=j&-j,_=(_&42)!==0?1:_e(_),_=(_&(he.suspendedLanes|j))!==0?0:_,_!==0&&_!==Je.retryLane))throw Je.retryLane=_,ad(f,_),Pl(he,f,_),WI;Ce.data==="$?"||PC(),x=pC(f,x,j)}else Ce.data==="$?"?(x.flags|=192,x.child=f.child,x=null):(f=Je.treeContext,Ya=vd(Ce.nextSibling),_s=x,zn=!0,ru=null,mc=!1,f!==null&&(Xo[Io++]=od,Xo[Io++]=ld,Xo[Io++]=vh,od=f.id,ld=f.overflow,vh=x),x=mC(x,_.children),x.flags|=4096);return x}return R?(Jf(),R=_.fallback,Ce=x.mode,Je=f.child,kt=Je.sibling,_=fc(Je,{mode:"hidden",children:_.children}),_.subtreeFlags=Je.subtreeFlags&65011712,kt!==null?R=fc(kt,R):(R=sd(R,Ce,j,null),R.flags|=2),R.return=x,_.return=x,_.sibling=R,x.child=_,_=R,R=x.child,Ce=f.child.memoizedState,Ce===null?Ce=hC(j):(Je=Ce.cachePool,Je!==null?(kt=Ds._currentValue,Je=Je.parent!==kt?{parent:kt,pool:kt}:Je):Je=fe(),Ce={baseLanes:Ce.baseLanes|j,cachePool:Je}),R.memoizedState=Ce,R.childLanes=fC(f,he,j),x.memoizedState=uC,_):(Qf(x),j=f.child,f=j.sibling,j=fc(j,{mode:"visible",children:_.children}),j.return=x,j.sibling=null,f!==null&&(he=x.deletions,he===null?(x.deletions=[f],x.flags|=16):he.push(f)),x.child=j,x.memoizedState=null,j)}function mC(f,x){return x=Y1({mode:"visible",children:x},f.mode),x.return=f,f.child=x}function Y1(f,x){return f=mi(22,f,null,x),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function pC(f,x,j){return f0(x,f.child,null,j),f=mC(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function rP(f,x,j){f.lanes|=x;var _=f.alternate;_!==null&&(_.lanes|=x),r0(f.return,x,j)}function xC(f,x,j,_,R){var q=f.memoizedState;q===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:_,tail:j,tailMode:R}:(q.isBackwards=x,q.rendering=null,q.renderingStartTime=0,q.last=_,q.tail=j,q.tailMode=R)}function nP(f,x,j){var _=x.pendingProps,R=_.revealOrder,q=_.tail;if(Mi(f,x,_.children,j),_=ri.current,(_&2)!==0)_=_&1|2,x.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&rP(f,j,x);else if(f.tag===19)rP(f,j,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}_&=1}switch(V(ri,_),R){case"forwards":for(j=x.child,R=null;j!==null;)f=j.alternate,f!==null&&z1(f)===null&&(R=j),j=j.sibling;j=R,j===null?(R=x.child,x.child=null):(R=j.sibling,j.sibling=null),xC(x,!1,R,j,q);break;case"backwards":for(j=null,R=x.child,x.child=null;R!==null;){if(f=R.alternate,f!==null&&z1(f)===null){x.child=R;break}f=R.sibling,R.sibling=j,j=R,R=f}xC(x,!0,j,null,q);break;case"together":xC(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function kh(f,x,j){if(f!==null&&(x.dependencies=f.dependencies),nm|=x.lanes,(j&x.childLanes)===0)if(f!==null){if(Hf(f,x,j,!1),(j&x.childLanes)===0)return null}else return null;if(f!==null&&x.child!==f.child)throw Error(n(153));if(x.child!==null){for(f=x.child,j=fc(f,f.pendingProps),x.child=j,j.return=x;f.sibling!==null;)f=f.sibling,j=j.sibling=fc(f,f.pendingProps),j.return=x;j.sibling=null}return x.child}function vC(f,x){return(f.lanes&x)!==0?!0:(f=f.dependencies,!!(f!==null&&a0(f)))}function nX(f,x,j){switch(x.tag){case 3:se(x,x.stateNode.containerInfo),nu(x,Ds,f.memoizedState.cache),Po();break;case 27:case 5:G(x);break;case 4:se(x,x.stateNode.containerInfo);break;case 10:nu(x,x.type,x.memoizedProps.value);break;case 13:var _=x.memoizedState;if(_!==null)return _.dehydrated!==null?(Qf(x),x.flags|=128,null):(j&x.child.childLanes)!==0?tP(f,x,j):(Qf(x),f=kh(f,x,j),f!==null?f.sibling:null);Qf(x);break;case 19:var R=(f.flags&128)!==0;if(_=(j&x.childLanes)!==0,_||(Hf(f,x,j,!1),_=(j&x.childLanes)!==0),R){if(_)return nP(f,x,j);x.flags|=128}if(R=x.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),V(ri,ri.current),_)break;return null;case 22:case 23:return x.lanes=0,XI(f,x,j);case 24:nu(x,Ds,f.memoizedState.cache)}return kh(f,x,j)}function aP(f,x,j){if(f!==null)if(f.memoizedProps!==x.pendingProps)pi=!0;else{if(!vC(f,j)&&(x.flags&128)===0)return pi=!1,nX(f,x,j);pi=(f.flags&131072)!==0}else pi=!1,zn&&(x.flags&1048576)!==0&&S1(x,t0,x.index);switch(x.lanes=0,x.tag){case 16:e:{f=x.pendingProps;var _=x.elementType,R=_._init;if(_=R(_._payload),x.type=_,typeof _=="function")Vf(_)?(f=Ep(_,f),x.tag=1,x=ZI(null,x,_,f,j)):(x.tag=0,x=dC(null,x,_,f,j));else{if(_!=null){if(R=_.$$typeof,R===k){x.tag=11,x=GI(null,x,_,f,j);break e}else if(R===E){x.tag=14,x=YI(null,x,_,f,j);break e}}throw x=z(_)||_,Error(n(306,x,""))}}return x;case 0:return dC(f,x,x.type,x.pendingProps,j);case 1:return _=x.type,R=Ep(_,x.pendingProps),ZI(f,x,_,R,j);case 3:e:{if(se(x,x.stateNode.containerInfo),f===null)throw Error(n(387));_=x.pendingProps;var q=x.memoizedState;R=q.element,lt(f,x),gr(x,_,null,j);var he=x.memoizedState;if(_=he.cache,nu(x,Ds,_),_!==q.cache&&n0(x,[Ds],j,!0),Vr(),_=he.element,q.isDehydrated)if(q={element:_,isDehydrated:!1,cache:he.cache},x.updateQueue.baseState=q,x.memoizedState=q,x.flags&256){x=eP(f,x,_,j);break e}else if(_!==R){R=kn(Error(n(424)),x),zf(R),x=eP(f,x,_,j);break e}else{switch(f=x.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Ya=vd(f.firstChild),_s=x,zn=!0,ru=null,mc=!0,j=RI(x,null,_,j),x.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling}else{if(Po(),_===R){x=kh(f,x,j);break e}Mi(f,x,_,j)}x=x.child}return x;case 26:return G1(f,x),f===null?(j=lO(x.type,null,x.pendingProps,null))?x.memoizedState=j:zn||(j=x.type,f=x.pendingProps,_=lj(te.current).createElement(j),_[er]=x,_[fr]=f,Fi(_,j,f),ot(_),x.stateNode=_):x.memoizedState=lO(x.type,f.memoizedProps,x.pendingProps,f.memoizedState),null;case 27:return G(x),f===null&&zn&&(_=x.stateNode=sO(x.type,x.pendingProps,te.current),_s=x,mc=!0,R=Ya,om(x.type)?(QC=R,Ya=vd(_.firstChild)):Ya=R),Mi(f,x,x.pendingProps.children,j),G1(f,x),f===null&&(x.flags|=4194304),x.child;case 5:return f===null&&zn&&((R=_=Ya)&&(_=TX(_,x.type,x.pendingProps,mc),_!==null?(x.stateNode=_,_s=x,Ya=vd(_.firstChild),mc=!1,R=!0):R=!1),R||bh(x)),G(x),R=x.type,q=x.pendingProps,he=f!==null?f.memoizedProps:null,_=q.children,GC(R,q)?_=null:he!==null&&GC(R,he)&&(x.flags|=32),x.memoizedState!==null&&(R=_l(f,x,iu,null,null,j),Xg._currentValue=R),G1(f,x),Mi(f,x,_,j),x.child;case 6:return f===null&&zn&&((f=j=Ya)&&(j=IX(j,x.pendingProps,mc),j!==null?(x.stateNode=j,_s=x,Ya=null,f=!0):f=!1),f||bh(x)),null;case 13:return tP(f,x,j);case 4:return se(x,x.stateNode.containerInfo),_=x.pendingProps,f===null?x.child=f0(x,null,_,j):Mi(f,x,_,j),x.child;case 11:return GI(f,x,x.type,x.pendingProps,j);case 7:return Mi(f,x,x.pendingProps,j),x.child;case 8:return Mi(f,x,x.pendingProps.children,j),x.child;case 12:return Mi(f,x,x.pendingProps.children,j),x.child;case 10:return _=x.pendingProps,nu(x,x.type,_.value),Mi(f,x,_.children,j),x.child;case 9:return R=x.type._context,_=x.pendingProps.children,vc(x),R=Es(R),_=_(R),x.flags|=1,Mi(f,x,_,j),x.child;case 14:return YI(f,x,x.type,x.pendingProps,j);case 15:return KI(f,x,x.type,x.pendingProps,j);case 19:return nP(f,x,j);case 31:return _=x.pendingProps,j=x.mode,_={mode:_.mode,children:_.children},f===null?(j=Y1(_,j),j.ref=x.ref,x.child=j,j.return=x,x=j):(j=fc(f.child,_),j.ref=x.ref,x.child=j,j.return=x,x=j),x;case 22:return XI(f,x,j);case 24:return vc(x),_=Es(Ds),f===null?(R=J(),R===null&&(R=Ma,q=bg(),R.pooledCache=q,q.refCount++,q!==null&&(R.pooledCacheLanes|=j),R=q),x.memoizedState={parent:_,cache:R},at(x),nu(x,Ds,R)):((f.lanes&j)!==0&&(lt(f,x),gr(x,null,null,j),Vr()),R=f.memoizedState,q=x.memoizedState,R.parent!==_?(R={parent:_,cache:_},x.memoizedState=R,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=R),nu(x,Ds,_)):(_=q.cache,nu(x,Ds,_),_!==R.cache&&n0(x,[Ds],j,!0))),Mi(f,x,x.pendingProps.children,j),x.child;case 29:throw x.pendingProps}throw Error(n(156,x.tag))}function _h(f){f.flags|=4}function sP(f,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!fO(x)){if(x=bc.current,x!==null&&(($n&4194048)===$n?cu!==null:($n&62914560)!==$n&&($n&536870912)===0||x!==cu))throw Nt=De,we;f.flags|=8192}}function K1(f,x){x!==null&&(f.flags|=4),f.flags&16384&&(x=f.tag!==22?Te():536870912,f.lanes|=x,v0|=x)}function Mg(f,x){if(!zn)switch(f.tailMode){case"hidden":x=f.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?f.tail=null:j.sibling=null;break;case"collapsed":j=f.tail;for(var _=null;j!==null;)j.alternate!==null&&(_=j),j=j.sibling;_===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:_.sibling=null}}function is(f){var x=f.alternate!==null&&f.alternate.child===f.child,j=0,_=0;if(x)for(var R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags&65011712,_|=R.flags&65011712,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags,_|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=_,f.childLanes=j,x}function aX(f,x,j){var _=x.pendingProps;switch(pp(x),x.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(x),null;case 1:return is(x),null;case 3:return j=x.stateNode,_=null,f!==null&&(_=f.memoizedState.cache),x.memoizedState.cache!==_&&(x.flags|=2048),xc(Ds),oe(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(f===null||f.child===null)&&(Pi(x)?_h(x):f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,k1())),is(x),null;case 26:return j=x.memoizedState,f===null?(_h(x),j!==null?(is(x),sP(x,j)):(is(x),x.flags&=-16777217)):j?j!==f.memoizedState?(_h(x),is(x),sP(x,j)):(is(x),x.flags&=-16777217):(f.memoizedProps!==_&&_h(x),is(x),x.flags&=-16777217),null;case 27:ce(x),j=te.current;var R=x.type;if(f!==null&&x.stateNode!=null)f.memoizedProps!==_&&_h(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}f=W.current,Pi(x)?C1(x):(f=sO(R,_,j),x.stateNode=f,_h(x))}return is(x),null;case 5:if(ce(x),j=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==_&&_h(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}if(f=W.current,Pi(x))C1(x);else{switch(R=lj(te.current),f){case 1:f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":f=R.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof _.is=="string"?R.createElement("select",{is:_.is}):R.createElement("select"),_.multiple?f.multiple=!0:_.size&&(f.size=_.size);break;default:f=typeof _.is=="string"?R.createElement(j,{is:_.is}):R.createElement(j)}}f[er]=x,f[fr]=_;e:for(R=x.child;R!==null;){if(R.tag===5||R.tag===6)f.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===x)break e;for(;R.sibling===null;){if(R.return===null||R.return===x)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}x.stateNode=f;e:switch(Fi(f,j,_),j){case"button":case"input":case"select":case"textarea":f=!!_.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&_h(x)}}return is(x),x.flags&=-16777217,null;case 6:if(f&&x.stateNode!=null)f.memoizedProps!==_&&_h(x);else{if(typeof _!="string"&&x.stateNode===null)throw Error(n(166));if(f=te.current,Pi(x)){if(f=x.stateNode,j=x.memoizedProps,_=null,R=_s,R!==null)switch(R.tag){case 27:case 5:_=R.memoizedProps}f[er]=x,f=!!(f.nodeValue===j||_!==null&&_.suppressHydrationWarning===!0||JP(f.nodeValue,j)),f||bh(x)}else f=lj(f).createTextNode(_),f[er]=x,x.stateNode=f}return is(x),null;case 13:if(_=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(R=Pi(x),_!==null&&_.dehydrated!==null){if(f===null){if(!R)throw Error(n(318));if(R=x.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[er]=x}else Po(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;is(x),R=!1}else R=k1(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=R),R=!0;if(!R)return x.flags&256?(Ch(x),x):(Ch(x),null)}if(Ch(x),(x.flags&128)!==0)return x.lanes=j,x;if(j=_!==null,f=f!==null&&f.memoizedState!==null,j){_=x.child,R=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(R=_.alternate.memoizedState.cachePool.pool);var q=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(q=_.memoizedState.cachePool.pool),q!==R&&(_.flags|=2048)}return j!==f&&j&&(x.child.flags|=8192),K1(x,x.updateQueue),is(x),null;case 4:return oe(),f===null&&VC(x.stateNode.containerInfo),is(x),null;case 10:return xc(x.type),is(x),null;case 19:if(M(ri),R=x.memoizedState,R===null)return is(x),null;if(_=(x.flags&128)!==0,q=R.rendering,q===null)if(_)Mg(R,!1);else{if(vs!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(q=z1(f),q!==null){for(x.flags|=128,Mg(R,!1),f=q.updateQueue,x.updateQueue=f,K1(x,f),x.subtreeFlags=0,f=j,j=x.child;j!==null;)hp(j,f),j=j.sibling;return V(ri,ri.current&1|2),x.child}f=f.sibling}R.tail!==null&&be()>J1&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304)}else{if(!_)if(f=z1(q),f!==null){if(x.flags|=128,_=!0,f=f.updateQueue,x.updateQueue=f,K1(x,f),Mg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!q.alternate&&!zn)return is(x),null}else 2*be()-R.renderingStartTime>J1&&j!==536870912&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304);R.isBackwards?(q.sibling=x.child,x.child=q):(f=R.last,f!==null?f.sibling=q:x.child=q,R.last=q)}return R.tail!==null?(x=R.tail,R.rendering=x,R.tail=x.sibling,R.renderingStartTime=be(),x.sibling=null,f=ri.current,V(ri,_?f&1|2:f&1),x):(is(x),null);case 22:case 23:return Ch(x),hn(),_=x.memoizedState!==null,f!==null?f.memoizedState!==null!==_&&(x.flags|=8192):_&&(x.flags|=8192),_?(j&536870912)!==0&&(x.flags&128)===0&&(is(x),x.subtreeFlags&6&&(x.flags|=8192)):is(x),j=x.updateQueue,j!==null&&K1(x,j.retryQueue),j=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),_=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(_=x.memoizedState.cachePool.pool),_!==j&&(x.flags|=2048),f!==null&&M(F),null;case 24:return j=null,f!==null&&(j=f.memoizedState.cache),x.memoizedState.cache!==j&&(x.flags|=2048),xc(Ds),is(x),null;case 25:return null;case 30:return null}throw Error(n(156,x.tag))}function sX(f,x){switch(pp(x),x.tag){case 1:return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return xc(Ds),oe(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 26:case 27:case 5:return ce(x),null;case 13:if(Ch(x),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Po()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return M(ri),null;case 4:return oe(),null;case 10:return xc(x.type),null;case 22:case 23:return Ch(x),hn(),f!==null&&M(F),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 24:return xc(Ds),null;case 25:return null;default:return null}}function iP(f,x){switch(pp(x),x.tag){case 3:xc(Ds),oe();break;case 26:case 27:case 5:ce(x);break;case 4:oe();break;case 13:Ch(x);break;case 19:M(ri);break;case 10:xc(x.type);break;case 22:case 23:Ch(x),hn(),f!==null&&M(F);break;case 24:xc(Ds)}}function Rg(f,x){try{var j=x.updateQueue,_=j!==null?j.lastEffect:null;if(_!==null){var R=_.next;j=R;do{if((j.tag&f)===f){_=void 0;var q=j.create,he=j.inst;_=q(),he.destroy=_}j=j.next}while(j!==R)}}catch(Ce){Ea(x,x.return,Ce)}}function Zf(f,x,j){try{var _=x.updateQueue,R=_!==null?_.lastEffect:null;if(R!==null){var q=R.next;_=q;do{if((_.tag&f)===f){var he=_.inst,Ce=he.destroy;if(Ce!==void 0){he.destroy=void 0,R=x;var Je=j,kt=Ce;try{kt()}catch(qt){Ea(R,Je,qt)}}}_=_.next}while(_!==q)}}catch(qt){Ea(x,x.return,qt)}}function oP(f){var x=f.updateQueue;if(x!==null){var j=f.stateNode;try{Kn(x,j)}catch(_){Ea(f,f.return,_)}}}function lP(f,x,j){j.props=Ep(f.type,f.memoizedProps),j.state=f.memoizedState;try{j.componentWillUnmount()}catch(_){Ea(f,x,_)}}function Fg(f,x){try{var j=f.ref;if(j!==null){switch(f.tag){case 26:case 27:case 5:var _=f.stateNode;break;case 30:_=f.stateNode;break;default:_=f.stateNode}typeof j=="function"?f.refCleanup=j(_):j.current=_}}catch(R){Ea(f,x,R)}}function du(f,x){var j=f.ref,_=f.refCleanup;if(j!==null)if(typeof _=="function")try{_()}catch(R){Ea(f,x,R)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(R){Ea(f,x,R)}else j.current=null}function cP(f){var x=f.type,j=f.memoizedProps,_=f.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":j.autoFocus&&_.focus();break e;case"img":j.src?_.src=j.src:j.srcSet&&(_.srcset=j.srcSet)}}catch(R){Ea(f,f.return,R)}}function gC(f,x,j){try{var _=f.stateNode;kX(_,f.type,j,x),_[fr]=x}catch(R){Ea(f,f.return,R)}}function dP(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&om(f.type)||f.tag===4}function bC(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||dP(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&om(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function yC(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?(j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j).insertBefore(f,x):(x=j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j,x.appendChild(f),j=j._reactRootContainer,j!=null||x.onclick!==null||(x.onclick=oj));else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode,x=null),f=f.child,f!==null))for(yC(f,x,j),f=f.sibling;f!==null;)yC(f,x,j),f=f.sibling}function X1(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?j.insertBefore(f,x):j.appendChild(f);else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode),f=f.child,f!==null))for(X1(f,x,j),f=f.sibling;f!==null;)X1(f,x,j),f=f.sibling}function uP(f){var x=f.stateNode,j=f.memoizedProps;try{for(var _=f.type,R=x.attributes;R.length;)x.removeAttributeNode(R[0]);Fi(x,_,j),x[er]=f,x[fr]=j}catch(q){Ea(f,f.return,q)}}var Eh=!1,Ts=!1,jC=!1,hP=typeof WeakSet=="function"?WeakSet:Set,xi=null;function iX(f,x){if(f=f.containerInfo,HC=mj,f=Ii(f),ti(f)){if("selectionStart"in f)var j={start:f.selectionStart,end:f.selectionEnd};else e:{j=(j=f.ownerDocument)&&j.defaultView||window;var _=j.getSelection&&j.getSelection();if(_&&_.rangeCount!==0){j=_.anchorNode;var R=_.anchorOffset,q=_.focusNode;_=_.focusOffset;try{j.nodeType,q.nodeType}catch{j=null;break e}var he=0,Ce=-1,Je=-1,kt=0,qt=0,Jt=f,Et=null;t:for(;;){for(var Dt;Jt!==j||R!==0&&Jt.nodeType!==3||(Ce=he+R),Jt!==q||_!==0&&Jt.nodeType!==3||(Je=he+_),Jt.nodeType===3&&(he+=Jt.nodeValue.length),(Dt=Jt.firstChild)!==null;)Et=Jt,Jt=Dt;for(;;){if(Jt===f)break t;if(Et===j&&++kt===R&&(Ce=he),Et===q&&++qt===_&&(Je=he),(Dt=Jt.nextSibling)!==null)break;Jt=Et,Et=Jt.parentNode}Jt=Dt}j=Ce===-1||Je===-1?null:{start:Ce,end:Je}}else j=null}j=j||{start:0,end:0}}else j=null;for(WC={focusedElem:f,selectionRange:j},mj=!1,xi=x;xi!==null;)if(x=xi,f=x.child,(x.subtreeFlags&1024)!==0&&f!==null)f.return=x,xi=f;else for(;xi!==null;){switch(x=xi,q=x.alternate,f=x.flags,x.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&q!==null){f=void 0,j=x,R=q.memoizedProps,q=q.memoizedState,_=j.stateNode;try{var ln=Ep(j.type,R,j.elementType===j.type);f=_.getSnapshotBeforeUpdate(ln,q),_.__reactInternalSnapshotBeforeUpdate=f}catch(Jr){Ea(j,j.return,Jr)}}break;case 3:if((f&1024)!==0){if(f=x.stateNode.containerInfo,j=f.nodeType,j===9)KC(f);else if(j===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":KC(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=x.sibling,f!==null){f.return=x.return,xi=f;break}xi=x.return}}function fP(f,x,j){var _=j.flags;switch(j.tag){case 0:case 11:case 15:em(f,j),_&4&&Rg(5,j);break;case 1:if(em(f,j),_&4)if(f=j.stateNode,x===null)try{f.componentDidMount()}catch(he){Ea(j,j.return,he)}else{var R=Ep(j.type,x.memoizedProps);x=x.memoizedState;try{f.componentDidUpdate(R,x,f.__reactInternalSnapshotBeforeUpdate)}catch(he){Ea(j,j.return,he)}}_&64&&oP(j),_&512&&Fg(j,j.return);break;case 3:if(em(f,j),_&64&&(f=j.updateQueue,f!==null)){if(x=null,j.child!==null)switch(j.child.tag){case 27:case 5:x=j.child.stateNode;break;case 1:x=j.child.stateNode}try{Kn(f,x)}catch(he){Ea(j,j.return,he)}}break;case 27:x===null&&_&4&&uP(j);case 26:case 5:em(f,j),x===null&&_&4&&cP(j),_&512&&Fg(j,j.return);break;case 12:em(f,j);break;case 13:em(f,j),_&4&&xP(f,j),_&64&&(f=j.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(j=pX.bind(null,j),PX(f,j))));break;case 22:if(_=j.memoizedState!==null||Eh,!_){x=x!==null&&x.memoizedState!==null||Ts,R=Eh;var q=Ts;Eh=_,(Ts=x)&&!q?tm(f,j,(j.subtreeFlags&8772)!==0):em(f,j),Eh=R,Ts=q}break;case 30:break;default:em(f,j)}}function mP(f){var x=f.alternate;x!==null&&(f.alternate=null,mP(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&ke(x)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ka=null,Jo=!1;function Dh(f,x,j){for(j=j.child;j!==null;)pP(f,x,j),j=j.sibling}function pP(f,x,j){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(_t,j)}catch{}switch(j.tag){case 26:Ts||du(j,x),Dh(f,x,j),j.memoizedState?j.memoizedState.count--:j.stateNode&&(j=j.stateNode,j.parentNode.removeChild(j));break;case 27:Ts||du(j,x);var _=Ka,R=Jo;om(j.type)&&(Ka=j.stateNode,Jo=!1),Dh(f,x,j),Wg(j.stateNode),Ka=_,Jo=R;break;case 5:Ts||du(j,x);case 6:if(_=Ka,R=Jo,Ka=null,Dh(f,x,j),Ka=_,Jo=R,Ka!==null)if(Jo)try{(Ka.nodeType===9?Ka.body:Ka.nodeName==="HTML"?Ka.ownerDocument.body:Ka).removeChild(j.stateNode)}catch(q){Ea(j,x,q)}else try{Ka.removeChild(j.stateNode)}catch(q){Ea(j,x,q)}break;case 18:Ka!==null&&(Jo?(f=Ka,nO(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,j.stateNode),eb(f)):nO(Ka,j.stateNode));break;case 4:_=Ka,R=Jo,Ka=j.stateNode.containerInfo,Jo=!0,Dh(f,x,j),Ka=_,Jo=R;break;case 0:case 11:case 14:case 15:Ts||Zf(2,j,x),Ts||Zf(4,j,x),Dh(f,x,j);break;case 1:Ts||(du(j,x),_=j.stateNode,typeof _.componentWillUnmount=="function"&&lP(j,x,_)),Dh(f,x,j);break;case 21:Dh(f,x,j);break;case 22:Ts=(_=Ts)||j.memoizedState!==null,Dh(f,x,j),Ts=_;break;default:Dh(f,x,j)}}function xP(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{eb(f)}catch(j){Ea(x,x.return,j)}}function oX(f){switch(f.tag){case 13:case 19:var x=f.stateNode;return x===null&&(x=f.stateNode=new hP),x;case 22:return f=f.stateNode,x=f._retryCache,x===null&&(x=f._retryCache=new hP),x;default:throw Error(n(435,f.tag))}}function NC(f,x){var j=oX(f);x.forEach(function(_){var R=xX.bind(null,f,_);j.has(_)||(j.add(_),_.then(R,R))})}function Dl(f,x){var j=x.deletions;if(j!==null)for(var _=0;_<j.length;_++){var R=j[_],q=f,he=x,Ce=he;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(om(Ce.type)){Ka=Ce.stateNode,Jo=!1;break e}break;case 5:Ka=Ce.stateNode,Jo=!1;break e;case 3:case 4:Ka=Ce.stateNode.containerInfo,Jo=!0;break e}Ce=Ce.return}if(Ka===null)throw Error(n(160));pP(q,he,R),Ka=null,Jo=!1,q=R.alternate,q!==null&&(q.return=null),R.return=null}if(x.subtreeFlags&13878)for(x=x.child;x!==null;)vP(x,f),x=x.sibling}var xd=null;function vP(f,x){var j=f.alternate,_=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Dl(x,f),Al(f),_&4&&(Zf(3,f,f.return),Rg(3,f),Zf(5,f,f.return));break;case 1:Dl(x,f),Al(f),_&512&&(Ts||j===null||du(j,j.return)),_&64&&Eh&&(f=f.updateQueue,f!==null&&(_=f.callbacks,_!==null&&(j=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=j===null?_:j.concat(_))));break;case 26:var R=xd;if(Dl(x,f),Al(f),_&512&&(Ts||j===null||du(j,j.return)),_&4){var q=j!==null?j.memoizedState:null;if(_=f.memoizedState,j===null)if(_===null)if(f.stateNode===null){e:{_=f.type,j=f.memoizedProps,R=R.ownerDocument||R;t:switch(_){case"title":q=R.getElementsByTagName("title")[0],(!q||q[Ae]||q[er]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=R.createElement(_),R.head.insertBefore(q,R.querySelector("head > title"))),Fi(q,_,j),q[er]=f,ot(q),_=q;break e;case"link":var he=uO("link","href",R).get(_+(j.href||""));if(he){for(var Ce=0;Ce<he.length;Ce++)if(q=he[Ce],q.getAttribute("href")===(j.href==null||j.href===""?null:j.href)&&q.getAttribute("rel")===(j.rel==null?null:j.rel)&&q.getAttribute("title")===(j.title==null?null:j.title)&&q.getAttribute("crossorigin")===(j.crossOrigin==null?null:j.crossOrigin)){he.splice(Ce,1);break t}}q=R.createElement(_),Fi(q,_,j),R.head.appendChild(q);break;case"meta":if(he=uO("meta","content",R).get(_+(j.content||""))){for(Ce=0;Ce<he.length;Ce++)if(q=he[Ce],q.getAttribute("content")===(j.content==null?null:""+j.content)&&q.getAttribute("name")===(j.name==null?null:j.name)&&q.getAttribute("property")===(j.property==null?null:j.property)&&q.getAttribute("http-equiv")===(j.httpEquiv==null?null:j.httpEquiv)&&q.getAttribute("charset")===(j.charSet==null?null:j.charSet)){he.splice(Ce,1);break t}}q=R.createElement(_),Fi(q,_,j),R.head.appendChild(q);break;default:throw Error(n(468,_))}q[er]=f,ot(q),_=q}f.stateNode=_}else hO(R,f.type,f.stateNode);else f.stateNode=dO(R,_,f.memoizedProps);else q!==_?(q===null?j.stateNode!==null&&(j=j.stateNode,j.parentNode.removeChild(j)):q.count--,_===null?hO(R,f.type,f.stateNode):dO(R,_,f.memoizedProps)):_===null&&f.stateNode!==null&&gC(f,f.memoizedProps,j.memoizedProps)}break;case 27:Dl(x,f),Al(f),_&512&&(Ts||j===null||du(j,j.return)),j!==null&&_&4&&gC(f,f.memoizedProps,j.memoizedProps);break;case 5:if(Dl(x,f),Al(f),_&512&&(Ts||j===null||du(j,j.return)),f.flags&32){R=f.stateNode;try{Vo(R,"")}catch(Dt){Ea(f,f.return,Dt)}}_&4&&f.stateNode!=null&&(R=f.memoizedProps,gC(f,R,j!==null?j.memoizedProps:R)),_&1024&&(jC=!0);break;case 6:if(Dl(x,f),Al(f),_&4){if(f.stateNode===null)throw Error(n(162));_=f.memoizedProps,j=f.stateNode;try{j.nodeValue=_}catch(Dt){Ea(f,f.return,Dt)}}break;case 3:if(uj=null,R=xd,xd=cj(x.containerInfo),Dl(x,f),xd=R,Al(f),_&4&&j!==null&&j.memoizedState.isDehydrated)try{eb(x.containerInfo)}catch(Dt){Ea(f,f.return,Dt)}jC&&(jC=!1,gP(f));break;case 4:_=xd,xd=cj(f.stateNode.containerInfo),Dl(x,f),Al(f),xd=_;break;case 12:Dl(x,f),Al(f);break;case 13:Dl(x,f),Al(f),f.child.flags&8192&&f.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(EC=be()),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 22:R=f.memoizedState!==null;var Je=j!==null&&j.memoizedState!==null,kt=Eh,qt=Ts;if(Eh=kt||R,Ts=qt||Je,Dl(x,f),Ts=qt,Eh=kt,Al(f),_&8192)e:for(x=f.stateNode,x._visibility=R?x._visibility&-2:x._visibility|1,R&&(j===null||Je||Eh||Ts||Dp(f)),j=null,x=f;;){if(x.tag===5||x.tag===26){if(j===null){Je=j=x;try{if(q=Je.stateNode,R)he=q.style,typeof he.setProperty=="function"?he.setProperty("display","none","important"):he.display="none";else{Ce=Je.stateNode;var Jt=Je.memoizedProps.style,Et=Jt!=null&&Jt.hasOwnProperty("display")?Jt.display:null;Ce.style.display=Et==null||typeof Et=="boolean"?"":(""+Et).trim()}}catch(Dt){Ea(Je,Je.return,Dt)}}}else if(x.tag===6){if(j===null){Je=x;try{Je.stateNode.nodeValue=R?"":Je.memoizedProps}catch(Dt){Ea(Je,Je.return,Dt)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===f)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;j===x&&(j=null),x=x.return}j===x&&(j=null),x.sibling.return=x.return,x=x.sibling}_&4&&(_=f.updateQueue,_!==null&&(j=_.retryQueue,j!==null&&(_.retryQueue=null,NC(f,j))));break;case 19:Dl(x,f),Al(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 30:break;case 21:break;default:Dl(x,f),Al(f)}}function Al(f){var x=f.flags;if(x&2){try{for(var j,_=f.return;_!==null;){if(dP(_)){j=_;break}_=_.return}if(j==null)throw Error(n(160));switch(j.tag){case 27:var R=j.stateNode,q=bC(f);X1(f,q,R);break;case 5:var he=j.stateNode;j.flags&32&&(Vo(he,""),j.flags&=-33);var Ce=bC(f);X1(f,Ce,he);break;case 3:case 4:var Je=j.stateNode.containerInfo,kt=bC(f);yC(f,kt,Je);break;default:throw Error(n(161))}}catch(qt){Ea(f,f.return,qt)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function gP(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var x=f;gP(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),f=f.sibling}}function em(f,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)fP(f,x.alternate,x),x=x.sibling}function Dp(f){for(f=f.child;f!==null;){var x=f;switch(x.tag){case 0:case 11:case 14:case 15:Zf(4,x,x.return),Dp(x);break;case 1:du(x,x.return);var j=x.stateNode;typeof j.componentWillUnmount=="function"&&lP(x,x.return,j),Dp(x);break;case 27:Wg(x.stateNode);case 26:case 5:du(x,x.return),Dp(x);break;case 22:x.memoizedState===null&&Dp(x);break;case 30:Dp(x);break;default:Dp(x)}f=f.sibling}}function tm(f,x,j){for(j=j&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var _=x.alternate,R=f,q=x,he=q.flags;switch(q.tag){case 0:case 11:case 15:tm(R,q,j),Rg(4,q);break;case 1:if(tm(R,q,j),_=q,R=_.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(kt){Ea(_,_.return,kt)}if(_=q,R=_.updateQueue,R!==null){var Ce=_.stateNode;try{var Je=R.shared.hiddenCallbacks;if(Je!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Je.length;R++)Bn(Je[R],Ce)}catch(kt){Ea(_,_.return,kt)}}j&&he&64&&oP(q),Fg(q,q.return);break;case 27:uP(q);case 26:case 5:tm(R,q,j),j&&_===null&&he&4&&cP(q),Fg(q,q.return);break;case 12:tm(R,q,j);break;case 13:tm(R,q,j),j&&he&4&&xP(R,q);break;case 22:q.memoizedState===null&&tm(R,q,j),Fg(q,q.return);break;case 30:break;default:tm(R,q,j)}x=x.sibling}}function wC(f,x){var j=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),f=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(f=x.memoizedState.cachePool.pool),f!==j&&(f!=null&&f.refCount++,j!=null&&xp(j))}function SC(f,x){f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f))}function uu(f,x,j,_){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)bP(f,x,j,_),x=x.sibling}function bP(f,x,j,_){var R=x.flags;switch(x.tag){case 0:case 11:case 15:uu(f,x,j,_),R&2048&&Rg(9,x);break;case 1:uu(f,x,j,_);break;case 3:uu(f,x,j,_),R&2048&&(f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f)));break;case 12:if(R&2048){uu(f,x,j,_),f=x.stateNode;try{var q=x.memoizedProps,he=q.id,Ce=q.onPostCommit;typeof Ce=="function"&&Ce(he,x.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Je){Ea(x,x.return,Je)}}else uu(f,x,j,_);break;case 13:uu(f,x,j,_);break;case 23:break;case 22:q=x.stateNode,he=x.alternate,x.memoizedState!==null?q._visibility&2?uu(f,x,j,_):Lg(f,x):q._visibility&2?uu(f,x,j,_):(q._visibility|=2,m0(f,x,j,_,(x.subtreeFlags&10256)!==0)),R&2048&&wC(he,x);break;case 24:uu(f,x,j,_),R&2048&&SC(x.alternate,x);break;default:uu(f,x,j,_)}}function m0(f,x,j,_,R){for(R=R&&(x.subtreeFlags&10256)!==0,x=x.child;x!==null;){var q=f,he=x,Ce=j,Je=_,kt=he.flags;switch(he.tag){case 0:case 11:case 15:m0(q,he,Ce,Je,R),Rg(8,he);break;case 23:break;case 22:var qt=he.stateNode;he.memoizedState!==null?qt._visibility&2?m0(q,he,Ce,Je,R):Lg(q,he):(qt._visibility|=2,m0(q,he,Ce,Je,R)),R&&kt&2048&&wC(he.alternate,he);break;case 24:m0(q,he,Ce,Je,R),R&&kt&2048&&SC(he.alternate,he);break;default:m0(q,he,Ce,Je,R)}x=x.sibling}}function Lg(f,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var j=f,_=x,R=_.flags;switch(_.tag){case 22:Lg(j,_),R&2048&&wC(_.alternate,_);break;case 24:Lg(j,_),R&2048&&SC(_.alternate,_);break;default:Lg(j,_)}x=x.sibling}}var Bg=8192;function p0(f){if(f.subtreeFlags&Bg)for(f=f.child;f!==null;)yP(f),f=f.sibling}function yP(f){switch(f.tag){case 26:p0(f),f.flags&Bg&&f.memoizedState!==null&&WX(xd,f.memoizedState,f.memoizedProps);break;case 5:p0(f);break;case 3:case 4:var x=xd;xd=cj(f.stateNode.containerInfo),p0(f),xd=x;break;case 22:f.memoizedState===null&&(x=f.alternate,x!==null&&x.memoizedState!==null?(x=Bg,Bg=16777216,p0(f),Bg=x):p0(f));break;default:p0(f)}}function jP(f){var x=f.alternate;if(x!==null&&(f=x.child,f!==null)){x.child=null;do x=f.sibling,f.sibling=null,f=x;while(f!==null)}}function Ug(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];xi=_,wP(_,f)}jP(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)NP(f),f=f.sibling}function NP(f){switch(f.tag){case 0:case 11:case 15:Ug(f),f.flags&2048&&Zf(9,f,f.return);break;case 3:Ug(f);break;case 12:Ug(f);break;case 22:var x=f.stateNode;f.memoizedState!==null&&x._visibility&2&&(f.return===null||f.return.tag!==13)?(x._visibility&=-3,Q1(f)):Ug(f);break;default:Ug(f)}}function Q1(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];xi=_,wP(_,f)}jP(f)}for(f=f.child;f!==null;){switch(x=f,x.tag){case 0:case 11:case 15:Zf(8,x,x.return),Q1(x);break;case 22:j=x.stateNode,j._visibility&2&&(j._visibility&=-3,Q1(x));break;default:Q1(x)}f=f.sibling}}function wP(f,x){for(;xi!==null;){var j=xi;switch(j.tag){case 0:case 11:case 15:Zf(8,j,x);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var _=j.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:xp(j.memoizedState.cache)}if(_=j.child,_!==null)_.return=j,xi=_;else e:for(j=f;xi!==null;){_=xi;var R=_.sibling,q=_.return;if(mP(_),_===j){xi=null;break e}if(R!==null){R.return=q,xi=R;break e}xi=q}}}var lX={getCacheForType:function(f){var x=Es(Ds),j=x.data.get(f);return j===void 0&&(j=f(),x.data.set(f,j)),j}},cX=typeof WeakMap=="function"?WeakMap:Map,ha=0,Ma=null,On=null,$n=0,fa=0,Tl=null,rm=!1,x0=!1,CC=!1,Ah=0,vs=0,nm=0,Ap=0,kC=0,yc=0,v0=0,$g=null,Zo=null,_C=!1,EC=0,J1=1/0,Z1=null,am=null,Ri=0,sm=null,g0=null,b0=0,DC=0,AC=null,SP=null,Vg=0,TC=null;function Il(){if((ha&2)!==0&&$n!==0)return $n&-$n;if(U.T!==null){var f=yh;return f!==0?f:LC()}return wt()}function CP(){yc===0&&(yc=($n&536870912)===0||zn?ut():536870912);var f=bc.current;return f!==null&&(f.flags|=32),yc}function Pl(f,x,j){(f===Ma&&(fa===2||fa===9)||f.cancelPendingCommit!==null)&&(y0(f,0),im(f,$n,yc,!1)),Ge(f,j),((ha&2)===0||f!==Ma)&&(f===Ma&&((ha&2)===0&&(Ap|=j),vs===4&&im(f,$n,yc,!1)),hu(f))}function kP(f,x,j){if((ha&6)!==0)throw Error(n(327));var _=!j&&(x&124)===0&&(x&f.expiredLanes)===0||Le(f,x),R=_?hX(f,x):OC(f,x,!0),q=_;do{if(R===0){x0&&!_&&im(f,x,0,!1);break}else{if(j=f.current.alternate,q&&!dX(j)){R=OC(f,x,!1),q=!1;continue}if(R===2){if(q=x,f.errorRecoveryDisabledLanes&q)var he=0;else he=f.pendingLanes&-536870913,he=he!==0?he:he&536870912?536870912:0;if(he!==0){x=he;e:{var Ce=f;R=$g;var Je=Ce.current.memoizedState.isDehydrated;if(Je&&(y0(Ce,he).flags|=256),he=OC(Ce,he,!1),he!==2){if(CC&&!Je){Ce.errorRecoveryDisabledLanes|=q,Ap|=q,R=4;break e}q=Zo,Zo=R,q!==null&&(Zo===null?Zo=q:Zo.push.apply(Zo,q))}R=he}if(q=!1,R!==2)continue}}if(R===1){y0(f,0),im(f,x,0,!0);break}e:{switch(_=f,q=R,q){case 0:case 1:throw Error(n(345));case 4:if((x&4194048)!==x)break;case 6:im(_,x,yc,!rm);break e;case 2:Zo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((x&62914560)===x&&(R=EC+300-be(),10<R)){if(im(_,x,yc,!rm),Ye(_,0,!0)!==0)break e;_.timeoutHandle=tO(_P.bind(null,_,j,Zo,Z1,_C,x,yc,Ap,v0,rm,q,2,-0,0),R);break e}_P(_,j,Zo,Z1,_C,x,yc,Ap,v0,rm,q,0,-0,0)}}break}while(!0);hu(f)}function _P(f,x,j,_,R,q,he,Ce,Je,kt,qt,Jt,Et,Dt){if(f.timeoutHandle=-1,Jt=x.subtreeFlags,(Jt&8192||(Jt&16785408)===16785408)&&(Kg={stylesheets:null,count:0,unsuspend:HX},yP(x),Jt=GX(),Jt!==null)){f.cancelPendingCommit=Jt(OP.bind(null,f,x,q,j,_,R,he,Ce,Je,qt,1,Et,Dt)),im(f,q,he,!kt);return}OP(f,x,q,j,_,R,he,Ce,Je)}function dX(f){for(var x=f;;){var j=x.tag;if((j===0||j===11||j===15)&&x.flags&16384&&(j=x.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var _=0;_<j.length;_++){var R=j[_],q=R.getSnapshot;R=R.value;try{if(!qs(q(),R))return!1}catch{return!1}}if(j=x.child,x.subtreeFlags&16384&&j!==null)j.return=x,x=j;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function im(f,x,j,_){x&=~kC,x&=~Ap,f.suspendedLanes|=x,f.pingedLanes&=~x,_&&(f.warmLanes|=x),_=f.expirationTimes;for(var R=x;0<R;){var q=31-ge(R),he=1<<q;_[q]=-1,R&=~he}j!==0&&Bt(f,j,x)}function ej(){return(ha&6)===0?(qg(0),!1):!0}function IC(){if(On!==null){if(fa===0)var f=On.return;else f=On,dd=Hs=null,i0(f),h0=null,Pg=0,f=On;for(;f!==null;)iP(f.alternate,f),f=f.return;On=null}}function y0(f,x){var j=f.timeoutHandle;j!==-1&&(f.timeoutHandle=-1,EX(j)),j=f.cancelPendingCommit,j!==null&&(f.cancelPendingCommit=null,j()),IC(),Ma=f,On=j=fc(f.current,null),$n=x,fa=0,Tl=null,rm=!1,x0=Le(f,x),CC=!1,v0=yc=kC=Ap=nm=vs=0,Zo=$g=null,_C=!1,(x&8)!==0&&(x|=x&32);var _=f.entangledLanes;if(_!==0)for(f=f.entanglements,_&=x;0<_;){var R=31-ge(_),q=1<<R;x|=f[R],_&=~q}return Ah=x,Yo(),j}function EP(f,x){Gr=null,U.H=$1,x===ye||x===Se?(x=ft(),fa=3):x===we?(x=ft(),fa=4):fa=x===WI?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,Tl=x,On===null&&(vs=1,W1(f,kn(x,f.current)))}function DP(){var f=U.H;return U.H=$1,f===null?$1:f}function AP(){var f=U.A;return U.A=lX,f}function PC(){vs=4,rm||($n&4194048)!==$n&&bc.current!==null||(x0=!0),(nm&134217727)===0&&(Ap&134217727)===0||Ma===null||im(Ma,$n,yc,!1)}function OC(f,x,j){var _=ha;ha|=2;var R=DP(),q=AP();(Ma!==f||$n!==x)&&(Z1=null,y0(f,x)),x=!1;var he=vs;e:do try{if(fa!==0&&On!==null){var Ce=On,Je=Tl;switch(fa){case 8:IC(),he=6;break e;case 3:case 2:case 9:case 6:bc.current===null&&(x=!0);var kt=fa;if(fa=0,Tl=null,j0(f,Ce,Je,kt),j&&x0){he=0;break e}break;default:kt=fa,fa=0,Tl=null,j0(f,Ce,Je,kt)}}uX(),he=vs;break}catch(qt){EP(f,qt)}while(!0);return x&&f.shellSuspendCounter++,dd=Hs=null,ha=_,U.H=R,U.A=q,On===null&&(Ma=null,$n=0,Yo()),he}function uX(){for(;On!==null;)TP(On)}function hX(f,x){var j=ha;ha|=2;var _=DP(),R=AP();Ma!==f||$n!==x?(Z1=null,J1=be()+500,y0(f,x)):x0=Le(f,x);e:do try{if(fa!==0&&On!==null){x=On;var q=Tl;t:switch(fa){case 1:fa=0,Tl=null,j0(f,x,q,1);break;case 2:case 9:if(Ue(q)){fa=0,Tl=null,IP(x);break}x=function(){fa!==2&&fa!==9||Ma!==f||(fa=7),hu(f)},q.then(x,x);break e;case 3:fa=7;break e;case 4:fa=5;break e;case 7:Ue(q)?(fa=0,Tl=null,IP(x)):(fa=0,Tl=null,j0(f,x,q,7));break;case 5:var he=null;switch(On.tag){case 26:he=On.memoizedState;case 5:case 27:var Ce=On;if(!he||fO(he)){fa=0,Tl=null;var Je=Ce.sibling;if(Je!==null)On=Je;else{var kt=Ce.return;kt!==null?(On=kt,tj(kt)):On=null}break t}}fa=0,Tl=null,j0(f,x,q,5);break;case 6:fa=0,Tl=null,j0(f,x,q,6);break;case 8:IC(),vs=6;break e;default:throw Error(n(462))}}fX();break}catch(qt){EP(f,qt)}while(!0);return dd=Hs=null,U.H=_,U.A=R,ha=j,On!==null?0:(Ma=null,$n=0,Yo(),vs)}function fX(){for(;On!==null&&!de();)TP(On)}function TP(f){var x=aP(f.alternate,f,Ah);f.memoizedProps=f.pendingProps,x===null?tj(f):On=x}function IP(f){var x=f,j=x.alternate;switch(x.tag){case 15:case 0:x=JI(j,x,x.pendingProps,x.type,void 0,$n);break;case 11:x=JI(j,x,x.pendingProps,x.type.render,x.ref,$n);break;case 5:i0(x);default:iP(j,x),x=On=hp(x,Ah),x=aP(j,x,Ah)}f.memoizedProps=f.pendingProps,x===null?tj(f):On=x}function j0(f,x,j,_){dd=Hs=null,i0(x),h0=null,Pg=0;var R=x.return;try{if(rX(f,R,x,j,$n)){vs=1,W1(f,kn(j,f.current)),On=null;return}}catch(q){if(R!==null)throw On=R,q;vs=1,W1(f,kn(j,f.current)),On=null;return}x.flags&32768?(zn||_===1?f=!0:x0||($n&536870912)!==0?f=!1:(rm=f=!0,(_===2||_===9||_===3||_===6)&&(_=bc.current,_!==null&&_.tag===13&&(_.flags|=16384))),PP(x,f)):tj(x)}function tj(f){var x=f;do{if((x.flags&32768)!==0){PP(x,rm);return}f=x.return;var j=aX(x.alternate,x,Ah);if(j!==null){On=j;return}if(x=x.sibling,x!==null){On=x;return}On=x=f}while(x!==null);vs===0&&(vs=5)}function PP(f,x){do{var j=sX(f.alternate,f);if(j!==null){j.flags&=32767,On=j;return}if(j=f.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!x&&(f=f.sibling,f!==null)){On=f;return}On=f=j}while(f!==null);vs=6,On=null}function OP(f,x,j,_,R,q,he,Ce,Je){f.cancelPendingCommit=null;do rj();while(Ri!==0);if((ha&6)!==0)throw Error(n(327));if(x!==null){if(x===f.current)throw Error(n(177));if(q=x.lanes|x.childLanes,q|=ns,It(f,j,q,he,Ce,Je),f===Ma&&(On=Ma=null,$n=0),g0=x,sm=f,b0=j,DC=q,AC=R,SP=_,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,vX(ct,function(){return BP(),null})):(f.callbackNode=null,f.callbackPriority=0),_=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||_){_=U.T,U.T=null,R=X.p,X.p=2,he=ha,ha|=4;try{iX(f,x,j)}finally{ha=he,X.p=R,U.T=_}}Ri=1,MP(),RP(),FP()}}function MP(){if(Ri===1){Ri=0;var f=sm,x=g0,j=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||j){j=U.T,U.T=null;var _=X.p;X.p=2;var R=ha;ha|=4;try{vP(x,f);var q=WC,he=Ii(f.containerInfo),Ce=q.focusedElem,Je=q.selectionRange;if(he!==Ce&&Ce&&Ce.ownerDocument&&Gd(Ce.ownerDocument.documentElement,Ce)){if(Je!==null&&ti(Ce)){var kt=Je.start,qt=Je.end;if(qt===void 0&&(qt=kt),"selectionStart"in Ce)Ce.selectionStart=kt,Ce.selectionEnd=Math.min(qt,Ce.value.length);else{var Jt=Ce.ownerDocument||document,Et=Jt&&Jt.defaultView||window;if(Et.getSelection){var Dt=Et.getSelection(),ln=Ce.textContent.length,Jr=Math.min(Je.start,ln),wa=Je.end===void 0?Jr:Math.min(Je.end,ln);!Dt.extend&&Jr>wa&&(he=wa,wa=Jr,Jr=he);var mt=rd(Ce,Jr),it=rd(Ce,wa);if(mt&&it&&(Dt.rangeCount!==1||Dt.anchorNode!==mt.node||Dt.anchorOffset!==mt.offset||Dt.focusNode!==it.node||Dt.focusOffset!==it.offset)){var St=Jt.createRange();St.setStart(mt.node,mt.offset),Dt.removeAllRanges(),Jr>wa?(Dt.addRange(St),Dt.extend(it.node,it.offset)):(St.setEnd(it.node,it.offset),Dt.addRange(St))}}}}for(Jt=[],Dt=Ce;Dt=Dt.parentNode;)Dt.nodeType===1&&Jt.push({element:Dt,left:Dt.scrollLeft,top:Dt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<Jt.length;Ce++){var Kt=Jt[Ce];Kt.element.scrollLeft=Kt.left,Kt.element.scrollTop=Kt.top}}mj=!!HC,WC=HC=null}finally{ha=R,X.p=_,U.T=j}}f.current=x,Ri=2}}function RP(){if(Ri===2){Ri=0;var f=sm,x=g0,j=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||j){j=U.T,U.T=null;var _=X.p;X.p=2;var R=ha;ha|=4;try{fP(f,x.alternate,x)}finally{ha=R,X.p=_,U.T=j}}Ri=3}}function FP(){if(Ri===4||Ri===3){Ri=0,ie();var f=sm,x=g0,j=b0,_=SP;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Ri=5:(Ri=0,g0=sm=null,LP(f,f.pendingLanes));var R=f.pendingLanes;if(R===0&&(am=null),st(j),x=x.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(_t,x,void 0,(x.current.flags&128)===128)}catch{}if(_!==null){x=U.T,R=X.p,X.p=2,U.T=null;try{for(var q=f.onRecoverableError,he=0;he<_.length;he++){var Ce=_[he];q(Ce.value,{componentStack:Ce.stack})}}finally{U.T=x,X.p=R}}(b0&3)!==0&&rj(),hu(f),R=f.pendingLanes,(j&4194090)!==0&&(R&42)!==0?f===TC?Vg++:(Vg=0,TC=f):Vg=0,qg(0)}}function LP(f,x){(f.pooledCacheLanes&=x)===0&&(x=f.pooledCache,x!=null&&(f.pooledCache=null,xp(x)))}function rj(f){return MP(),RP(),FP(),BP()}function BP(){if(Ri!==5)return!1;var f=sm,x=DC;DC=0;var j=st(b0),_=U.T,R=X.p;try{X.p=32>j?32:j,U.T=null,j=AC,AC=null;var q=sm,he=b0;if(Ri=0,g0=sm=null,b0=0,(ha&6)!==0)throw Error(n(331));var Ce=ha;if(ha|=4,NP(q.current),bP(q,q.current,he,j),ha=Ce,qg(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(_t,q)}catch{}return!0}finally{X.p=R,U.T=_,LP(f,x)}}function UP(f,x,j){x=kn(j,x),x=cC(f.stateNode,x,2),f=Qt(f,x,2),f!==null&&(Ge(f,2),hu(f))}function Ea(f,x,j){if(f.tag===3)UP(f,f,j);else for(;x!==null;){if(x.tag===3){UP(x,f,j);break}else if(x.tag===1){var _=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(am===null||!am.has(_))){f=kn(j,f),j=zI(2),_=Qt(x,j,2),_!==null&&(HI(j,_,x,f),Ge(_,2),hu(_));break}}x=x.return}}function MC(f,x,j){var _=f.pingCache;if(_===null){_=f.pingCache=new cX;var R=new Set;_.set(x,R)}else R=_.get(x),R===void 0&&(R=new Set,_.set(x,R));R.has(j)||(CC=!0,R.add(j),f=mX.bind(null,f,x,j),x.then(f,f))}function mX(f,x,j){var _=f.pingCache;_!==null&&_.delete(x),f.pingedLanes|=f.suspendedLanes&j,f.warmLanes&=~j,Ma===f&&($n&j)===j&&(vs===4||vs===3&&($n&62914560)===$n&&300>be()-EC?(ha&2)===0&&y0(f,0):kC|=j,v0===$n&&(v0=0)),hu(f)}function $P(f,x){x===0&&(x=Te()),f=ad(f,x),f!==null&&(Ge(f,x),hu(f))}function pX(f){var x=f.memoizedState,j=0;x!==null&&(j=x.retryLane),$P(f,j)}function xX(f,x){var j=0;switch(f.tag){case 13:var _=f.stateNode,R=f.memoizedState;R!==null&&(j=R.retryLane);break;case 19:_=f.stateNode;break;case 22:_=f.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(x),$P(f,j)}function vX(f,x){return ae(f,x)}var nj=null,N0=null,RC=!1,aj=!1,FC=!1,Tp=0;function hu(f){f!==N0&&f.next===null&&(N0===null?nj=N0=f:N0=N0.next=f),aj=!0,RC||(RC=!0,bX())}function qg(f,x){if(!FC&&aj){FC=!0;do for(var j=!1,_=nj;_!==null;){if(f!==0){var R=_.pendingLanes;if(R===0)var q=0;else{var he=_.suspendedLanes,Ce=_.pingedLanes;q=(1<<31-ge(42|f)+1)-1,q&=R&~(he&~Ce),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(j=!0,HP(_,q))}else q=$n,q=Ye(_,_===Ma?q:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(q&3)===0||Le(_,q)||(j=!0,HP(_,q));_=_.next}while(j);FC=!1}}function gX(){VP()}function VP(){aj=RC=!1;var f=0;Tp!==0&&(_X()&&(f=Tp),Tp=0);for(var x=be(),j=null,_=nj;_!==null;){var R=_.next,q=qP(_,x);q===0?(_.next=null,j===null?nj=R:j.next=R,R===null&&(N0=j)):(j=_,(f!==0||(q&3)!==0)&&(aj=!0)),_=R}qg(f)}function qP(f,x){for(var j=f.suspendedLanes,_=f.pingedLanes,R=f.expirationTimes,q=f.pendingLanes&-62914561;0<q;){var he=31-ge(q),Ce=1<<he,Je=R[he];Je===-1?((Ce&j)===0||(Ce&_)!==0)&&(R[he]=ze(Ce,x)):Je<=x&&(f.expiredLanes|=Ce),q&=~Ce}if(x=Ma,j=$n,j=Ye(f,f===x?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_=f.callbackNode,j===0||f===x&&(fa===2||fa===9)||f.cancelPendingCommit!==null)return _!==null&&_!==null&&je(_),f.callbackNode=null,f.callbackPriority=0;if((j&3)===0||Le(f,j)){if(x=j&-j,x===f.callbackPriority)return x;switch(_!==null&&je(_),st(j)){case 2:case 8:j=Xe;break;case 32:j=ct;break;case 268435456:j=Re;break;default:j=ct}return _=zP.bind(null,f),j=ae(j,_),f.callbackPriority=x,f.callbackNode=j,x}return _!==null&&_!==null&&je(_),f.callbackPriority=2,f.callbackNode=null,2}function zP(f,x){if(Ri!==0&&Ri!==5)return f.callbackNode=null,f.callbackPriority=0,null;var j=f.callbackNode;if(rj()&&f.callbackNode!==j)return null;var _=$n;return _=Ye(f,f===Ma?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_===0?null:(kP(f,_,x),qP(f,be()),f.callbackNode!=null&&f.callbackNode===j?zP.bind(null,f):null)}function HP(f,x){if(rj())return null;kP(f,x,!0)}function bX(){DX(function(){(ha&6)!==0?ae(Fe,gX):VP()})}function LC(){return Tp===0&&(Tp=ut()),Tp}function WP(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:bl(""+f)}function GP(f,x){var j=x.ownerDocument.createElement("input");return j.name=x.name,j.value=x.value,f.id&&j.setAttribute("form",f.id),x.parentNode.insertBefore(j,x),f=new FormData(f),j.parentNode.removeChild(j),f}function yX(f,x,j,_,R){if(x==="submit"&&j&&j.stateNode===R){var q=WP((R[fr]||null).action),he=_.submitter;he&&(x=(x=he[fr]||null)?WP(x.formAction):he.getAttribute("formAction"),x!==null&&(q=x,he=null));var Ce=new cc("action","action",null,_,R);f.push({event:Ce,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Tp!==0){var Je=he?GP(R,he):new FormData(R);gc(j,{pending:!0,data:Je,method:R.method,action:q},null,Je)}}else typeof q=="function"&&(Ce.preventDefault(),Je=he?GP(R,he):new FormData(R),gc(j,{pending:!0,data:Je,method:R.method,action:q},q,Je))},currentTarget:R}]})}}for(var BC=0;BC<mh.length;BC++){var UC=mh[BC],jX=UC.toLowerCase(),NX=UC[0].toUpperCase()+UC.slice(1);Ga(jX,"on"+NX)}Ga(Uf,"onAnimationEnd"),Ga(Kd,"onAnimationIteration"),Ga(Xd,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(Qd,"onTransitionRun"),Ga(fh,"onTransitionStart"),Ga($f,"onTransitionCancel"),Ga(Jd,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),Yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zg));function YP(f,x){x=(x&4)!==0;for(var j=0;j<f.length;j++){var _=f[j],R=_.event;_=_.listeners;e:{var q=void 0;if(x)for(var he=_.length-1;0<=he;he--){var Ce=_[he],Je=Ce.instance,kt=Ce.currentTarget;if(Ce=Ce.listener,Je!==q&&R.isPropagationStopped())break e;q=Ce,R.currentTarget=kt;try{q(R)}catch(qt){H1(qt)}R.currentTarget=null,q=Je}else for(he=0;he<_.length;he++){if(Ce=_[he],Je=Ce.instance,kt=Ce.currentTarget,Ce=Ce.listener,Je!==q&&R.isPropagationStopped())break e;q=Ce,R.currentTarget=kt;try{q(R)}catch(qt){H1(qt)}R.currentTarget=null,q=Je}}}}function Mn(f,x){var j=x[Yr];j===void 0&&(j=x[Yr]=new Set);var _=f+"__bubble";j.has(_)||(KP(x,f,2,!1),j.add(_))}function $C(f,x,j){var _=0;x&&(_|=4),KP(j,f,_,x)}var sj="_reactListening"+Math.random().toString(36).slice(2);function VC(f){if(!f[sj]){f[sj]=!0,bt.forEach(function(j){j!=="selectionchange"&&(wX.has(j)||$C(j,!1,f),$C(j,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[sj]||(x[sj]=!0,$C("selectionchange",!1,x))}}function KP(f,x,j,_){switch(bO(x)){case 2:var R=XX;break;case 8:R=QX;break;default:R=rk}j=R.bind(null,x,j,f),R=void 0,!Zt||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(R=!0),_?R!==void 0?f.addEventListener(x,j,{capture:!0,passive:R}):f.addEventListener(x,j,!0):R!==void 0?f.addEventListener(x,j,{passive:R}):f.addEventListener(x,j,!1)}function qC(f,x,j,_,R){var q=_;if((x&1)===0&&(x&2)===0&&_!==null)e:for(;;){if(_===null)return;var he=_.tag;if(he===3||he===4){var Ce=_.stateNode.containerInfo;if(Ce===R)break;if(he===4)for(he=_.return;he!==null;){var Je=he.tag;if((Je===3||Je===4)&&he.stateNode.containerInfo===R)return;he=he.return}for(;Ce!==null;){if(he=Me(Ce),he===null)return;if(Je=he.tag,Je===5||Je===6||Je===26||Je===27){_=q=he;continue e}Ce=Ce.parentNode}}_=_.return}_f(function(){var kt=q,qt=fs(j),Jt=[];e:{var Et=nd.get(f);if(Et!==void 0){var Dt=cc,ln=f;switch(f){case"keypress":if(lc(j)===0)break e;case"keydown":case"keyup":Dt=Mf;break;case"focusin":ln="focus",Dt=ih;break;case"focusout":ln="blur",Dt=ih;break;case"beforeblur":case"afterblur":Dt=ih;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=lp;break;case Uf:case Kd:case Xd:Dt=mg;break;case Jd:Dt=pe;break;case"scroll":case"scrollend":Dt=Df;break;case"wheel":Dt=tt;break;case"copy":case"cut":case"paste":Dt=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=Rf;break;case"toggle":case"beforetoggle":Dt=Lt}var Jr=(x&4)!==0,wa=!Jr&&(f==="scroll"||f==="scrollend"),mt=Jr?Et!==null?Et+"Capture":null:Et;Jr=[];for(var it=kt,St;it!==null;){var Kt=it;if(St=Kt.stateNode,Kt=Kt.tag,Kt!==5&&Kt!==26&&Kt!==27||St===null||mt===null||(Kt=rt(it,mt),Kt!=null&&Jr.push(Hg(it,Kt,St))),wa)break;it=it.return}0<Jr.length&&(Et=new Dt(Et,ln,null,j,qt),Jt.push({event:Et,listeners:Jr}))}}if((x&7)===0){e:{if(Et=f==="mouseover"||f==="pointerover",Dt=f==="mouseout"||f==="pointerout",Et&&j!==ic&&(ln=j.relatedTarget||j.fromElement)&&(Me(ln)||ln[yr]))break e;if((Dt||Et)&&(Et=qt.window===qt?qt:(Et=qt.ownerDocument)?Et.defaultView||Et.parentWindow:window,Dt?(ln=j.relatedTarget||j.toElement,Dt=kt,ln=ln?Me(ln):null,ln!==null&&(wa=i(ln),Jr=ln.tag,ln!==wa||Jr!==5&&Jr!==27&&Jr!==6)&&(ln=null)):(Dt=null,ln=kt),Dt!==ln)){if(Jr=dc,Kt="onMouseLeave",mt="onMouseEnter",it="mouse",(f==="pointerout"||f==="pointerover")&&(Jr=Rf,Kt="onPointerLeave",mt="onPointerEnter",it="pointer"),wa=Dt==null?Et:pt(Dt),St=ln==null?Et:pt(ln),Et=new Jr(Kt,it+"leave",Dt,j,qt),Et.target=wa,Et.relatedTarget=St,Kt=null,Me(qt)===kt&&(Jr=new Jr(mt,it+"enter",ln,j,qt),Jr.target=St,Jr.relatedTarget=wa,Kt=Jr),wa=Kt,Dt&&ln)t:{for(Jr=Dt,mt=ln,it=0,St=Jr;St;St=w0(St))it++;for(St=0,Kt=mt;Kt;Kt=w0(Kt))St++;for(;0<it-St;)Jr=w0(Jr),it--;for(;0<St-it;)mt=w0(mt),St--;for(;it--;){if(Jr===mt||mt!==null&&Jr===mt.alternate)break t;Jr=w0(Jr),mt=w0(mt)}Jr=null}else Jr=null;Dt!==null&&XP(Jt,Et,Dt,Jr,!1),ln!==null&&wa!==null&&XP(Jt,wa,ln,Jr,!0)}}e:{if(Et=kt?pt(kt):window,Dt=Et.nodeName&&Et.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&Et.type==="file")var Dr=Lf;else if(wl(Et))if(ch)Dr=Jx;else{Dr=vg;var An=Ji}else Dt=Et.nodeName,!Dt||Dt.toLowerCase()!=="input"||Et.type!=="checkbox"&&Et.type!=="radio"?kt&&Jc(kt.elementType)&&(Dr=Lf):Dr=dp;if(Dr&&(Dr=Dr(f,kt))){cp(Jt,Dr,j,qt);break e}An&&An(f,Et,kt),f==="focusout"&&kt&&Et.type==="number"&&kt.memoizedProps.value!=null&&nh(Et,"number",Et.value)}switch(An=kt?pt(kt):window,f){case"focusin":(wl(An)||An.contentEditable==="true")&&(Zi=An,Sl=kt,uc=null);break;case"focusout":uc=Sl=Zi=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,Wa(Jt,j,qt);break;case"selectionchange":if(Yd)break;case"keydown":case"keyup":Wa(Jt,j,qt)}var zr;if(Nr)e:{switch(f){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else rs?La(f,j)&&(en="onCompositionEnd"):f==="keydown"&&j.keyCode===229&&(en="onCompositionStart");en&&(dn&&j.locale!=="ko"&&(rs||en!=="onCompositionStart"?en==="onCompositionEnd"&&rs&&(zr=Ef()):(Cr=qt,_a="value"in Cr?Cr.value:Cr.textContent,rs=!0)),An=ij(kt,en),0<An.length&&(en=new If(en,f,null,j,qt),Jt.push({event:en,listeners:An}),zr?en.data=zr:(zr=ts(j),zr!==null&&(en.data=zr)))),(zr=fn?Vs(f,j):Nl(f,j))&&(en=ij(kt,"onBeforeInput"),0<en.length&&(An=new If("onBeforeInput","beforeinput",null,j,qt),Jt.push({event:An,listeners:en}),An.data=zr)),yX(Jt,f,kt,j,qt)}YP(Jt,x)})}function Hg(f,x,j){return{instance:f,listener:x,currentTarget:j}}function ij(f,x){for(var j=x+"Capture",_=[];f!==null;){var R=f,q=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||q===null||(R=rt(f,j),R!=null&&_.unshift(Hg(f,R,q)),R=rt(f,x),R!=null&&_.push(Hg(f,R,q))),f.tag===3)return _;f=f.return}return[]}function w0(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function XP(f,x,j,_,R){for(var q=x._reactName,he=[];j!==null&&j!==_;){var Ce=j,Je=Ce.alternate,kt=Ce.stateNode;if(Ce=Ce.tag,Je!==null&&Je===_)break;Ce!==5&&Ce!==26&&Ce!==27||kt===null||(Je=kt,R?(kt=rt(j,q),kt!=null&&he.unshift(Hg(j,kt,Je))):R||(kt=rt(j,q),kt!=null&&he.push(Hg(j,kt,Je)))),j=j.return}he.length!==0&&f.push({event:x,listeners:he})}var SX=/\r\n?/g,CX=/\u0000|\uFFFD/g;function QP(f){return(typeof f=="string"?f:""+f).replace(SX,`
`).replace(CX,"")}function JP(f,x){return x=QP(x),QP(f)===x}function oj(){}function Na(f,x,j,_,R,q){switch(j){case"children":typeof _=="string"?x==="body"||x==="textarea"&&_===""||Vo(f,_):(typeof _=="number"||typeof _=="bigint")&&x!=="body"&&Vo(f,""+_);break;case"className":$r(f,"class",_);break;case"tabIndex":$r(f,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(f,j,_);break;case"style":vl(f,_,q);break;case"data":if(x!=="object"){$r(f,"data",_);break}case"src":case"href":if(_===""&&(x!=="a"||j!=="href")){f.removeAttribute(j);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=bl(""+_),f.setAttribute(j,_);break;case"action":case"formAction":if(typeof _=="function"){f.setAttribute(j,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(j==="formAction"?(x!=="input"&&Na(f,x,"name",R.name,R,null),Na(f,x,"formEncType",R.formEncType,R,null),Na(f,x,"formMethod",R.formMethod,R,null),Na(f,x,"formTarget",R.formTarget,R,null)):(Na(f,x,"encType",R.encType,R,null),Na(f,x,"method",R.method,R,null),Na(f,x,"target",R.target,R,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=bl(""+_),f.setAttribute(j,_);break;case"onClick":_!=null&&(f.onclick=oj);break;case"onScroll":_!=null&&Mn("scroll",f);break;case"onScrollEnd":_!=null&&Mn("scrollend",f);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"multiple":f.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":f.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){f.removeAttribute("xlink:href");break}j=bl(""+_),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""+_):f.removeAttribute(j);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""):f.removeAttribute(j);break;case"capture":case"download":_===!0?f.setAttribute(j,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,_):f.removeAttribute(j);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?f.setAttribute(j,_):f.removeAttribute(j);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?f.removeAttribute(j):f.setAttribute(j,_);break;case"popover":Mn("beforetoggle",f),Mn("toggle",f),or(f,"popover",_);break;case"xlinkActuate":gn(f,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":gn(f,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":gn(f,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":gn(f,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":gn(f,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":gn(f,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":gn(f,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":gn(f,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":gn(f,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":or(f,"is",_);break;case"innerText":case"textContent":break;default:(!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(j=gl.get(j)||j,or(f,j,_))}}function zC(f,x,j,_,R,q){switch(j){case"style":vl(f,_,q);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"children":typeof _=="string"?Vo(f,_):(typeof _=="number"||typeof _=="bigint")&&Vo(f,""+_);break;case"onScroll":_!=null&&Mn("scroll",f);break;case"onScrollEnd":_!=null&&Mn("scrollend",f);break;case"onClick":_!=null&&(f.onclick=oj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yt.hasOwnProperty(j))e:{if(j[0]==="o"&&j[1]==="n"&&(R=j.endsWith("Capture"),x=j.slice(2,R?j.length-7:void 0),q=f[fr]||null,q=q!=null?q[j]:null,typeof q=="function"&&f.removeEventListener(x,q,R),typeof _=="function")){typeof q!="function"&&q!==null&&(j in f?f[j]=null:f.hasAttribute(j)&&f.removeAttribute(j)),f.addEventListener(x,_,R);break e}j in f?f[j]=_:_===!0?f.setAttribute(j,""):or(f,j,_)}}}function Fi(f,x,j){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mn("error",f),Mn("load",f);var _=!1,R=!1,q;for(q in j)if(j.hasOwnProperty(q)){var he=j[q];if(he!=null)switch(q){case"src":_=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Na(f,x,q,he,j,null)}}R&&Na(f,x,"srcSet",j.srcSet,j,null),_&&Na(f,x,"src",j.src,j,null);return;case"input":Mn("invalid",f);var Ce=q=he=R=null,Je=null,kt=null;for(_ in j)if(j.hasOwnProperty(_)){var qt=j[_];if(qt!=null)switch(_){case"name":R=qt;break;case"type":he=qt;break;case"checked":Je=qt;break;case"defaultChecked":kt=qt;break;case"value":q=qt;break;case"defaultValue":Ce=qt;break;case"children":case"dangerouslySetInnerHTML":if(qt!=null)throw Error(n(137,x));break;default:Na(f,x,_,qt,j,null)}}Qi(f,q,Ce,Je,kt,he,R,!1),ka(f);return;case"select":Mn("invalid",f),_=he=q=null;for(R in j)if(j.hasOwnProperty(R)&&(Ce=j[R],Ce!=null))switch(R){case"value":q=Ce;break;case"defaultValue":he=Ce;break;case"multiple":_=Ce;default:Na(f,x,R,Ce,j,null)}x=q,j=he,f.multiple=!!_,x!=null?xl(f,!!_,x,!1):j!=null&&xl(f,!!_,j,!0);return;case"textarea":Mn("invalid",f),q=R=_=null;for(he in j)if(j.hasOwnProperty(he)&&(Ce=j[he],Ce!=null))switch(he){case"value":_=Ce;break;case"defaultValue":R=Ce;break;case"children":q=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(91));break;default:Na(f,x,he,Ce,j,null)}ah(f,_,R,q),ka(f);return;case"option":for(Je in j)if(j.hasOwnProperty(Je)&&(_=j[Je],_!=null))switch(Je){case"selected":f.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Na(f,x,Je,_,j,null)}return;case"dialog":Mn("beforetoggle",f),Mn("toggle",f),Mn("cancel",f),Mn("close",f);break;case"iframe":case"object":Mn("load",f);break;case"video":case"audio":for(_=0;_<zg.length;_++)Mn(zg[_],f);break;case"image":Mn("error",f),Mn("load",f);break;case"details":Mn("toggle",f);break;case"embed":case"source":case"link":Mn("error",f),Mn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(kt in j)if(j.hasOwnProperty(kt)&&(_=j[kt],_!=null))switch(kt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Na(f,x,kt,_,j,null)}return;default:if(Jc(x)){for(qt in j)j.hasOwnProperty(qt)&&(_=j[qt],_!==void 0&&zC(f,x,qt,_,j,void 0));return}}for(Ce in j)j.hasOwnProperty(Ce)&&(_=j[Ce],_!=null&&Na(f,x,Ce,_,j,null))}function kX(f,x,j,_){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,q=null,he=null,Ce=null,Je=null,kt=null,qt=null;for(Dt in j){var Jt=j[Dt];if(j.hasOwnProperty(Dt)&&Jt!=null)switch(Dt){case"checked":break;case"value":break;case"defaultValue":Je=Jt;default:_.hasOwnProperty(Dt)||Na(f,x,Dt,null,_,Jt)}}for(var Et in _){var Dt=_[Et];if(Jt=j[Et],_.hasOwnProperty(Et)&&(Dt!=null||Jt!=null))switch(Et){case"type":q=Dt;break;case"name":R=Dt;break;case"checked":kt=Dt;break;case"defaultChecked":qt=Dt;break;case"value":he=Dt;break;case"defaultValue":Ce=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(n(137,x));break;default:Dt!==Jt&&Na(f,x,Et,Dt,_,Jt)}}$s(f,he,Ce,Je,kt,qt,q,R);return;case"select":Dt=he=Ce=Et=null;for(q in j)if(Je=j[q],j.hasOwnProperty(q)&&Je!=null)switch(q){case"value":break;case"multiple":Dt=Je;default:_.hasOwnProperty(q)||Na(f,x,q,null,_,Je)}for(R in _)if(q=_[R],Je=j[R],_.hasOwnProperty(R)&&(q!=null||Je!=null))switch(R){case"value":Et=q;break;case"defaultValue":Ce=q;break;case"multiple":he=q;default:q!==Je&&Na(f,x,R,q,_,Je)}x=Ce,j=he,_=Dt,Et!=null?xl(f,!!j,Et,!1):!!_!=!!j&&(x!=null?xl(f,!!j,x,!0):xl(f,!!j,j?[]:"",!1));return;case"textarea":Dt=Et=null;for(Ce in j)if(R=j[Ce],j.hasOwnProperty(Ce)&&R!=null&&!_.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:Na(f,x,Ce,null,_,R)}for(he in _)if(R=_[he],q=j[he],_.hasOwnProperty(he)&&(R!=null||q!=null))switch(he){case"value":Et=R;break;case"defaultValue":Dt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==q&&Na(f,x,he,R,_,q)}kf(f,Et,Dt);return;case"option":for(var ln in j)if(Et=j[ln],j.hasOwnProperty(ln)&&Et!=null&&!_.hasOwnProperty(ln))switch(ln){case"selected":f.selected=!1;break;default:Na(f,x,ln,null,_,Et)}for(Je in _)if(Et=_[Je],Dt=j[Je],_.hasOwnProperty(Je)&&Et!==Dt&&(Et!=null||Dt!=null))switch(Je){case"selected":f.selected=Et&&typeof Et!="function"&&typeof Et!="symbol";break;default:Na(f,x,Je,Et,_,Dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jr in j)Et=j[Jr],j.hasOwnProperty(Jr)&&Et!=null&&!_.hasOwnProperty(Jr)&&Na(f,x,Jr,null,_,Et);for(kt in _)if(Et=_[kt],Dt=j[kt],_.hasOwnProperty(kt)&&Et!==Dt&&(Et!=null||Dt!=null))switch(kt){case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(n(137,x));break;default:Na(f,x,kt,Et,_,Dt)}return;default:if(Jc(x)){for(var wa in j)Et=j[wa],j.hasOwnProperty(wa)&&Et!==void 0&&!_.hasOwnProperty(wa)&&zC(f,x,wa,void 0,_,Et);for(qt in _)Et=_[qt],Dt=j[qt],!_.hasOwnProperty(qt)||Et===Dt||Et===void 0&&Dt===void 0||zC(f,x,qt,Et,_,Dt);return}}for(var mt in j)Et=j[mt],j.hasOwnProperty(mt)&&Et!=null&&!_.hasOwnProperty(mt)&&Na(f,x,mt,null,_,Et);for(Jt in _)Et=_[Jt],Dt=j[Jt],!_.hasOwnProperty(Jt)||Et===Dt||Et==null&&Dt==null||Na(f,x,Jt,Et,_,Dt)}var HC=null,WC=null;function lj(f){return f.nodeType===9?f:f.ownerDocument}function ZP(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eO(f,x){if(f===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&x==="foreignObject"?0:f}function GC(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var YC=null;function _X(){var f=window.event;return f&&f.type==="popstate"?f===YC?!1:(YC=f,!0):(YC=null,!1)}var tO=typeof setTimeout=="function"?setTimeout:void 0,EX=typeof clearTimeout=="function"?clearTimeout:void 0,rO=typeof Promise=="function"?Promise:void 0,DX=typeof queueMicrotask=="function"?queueMicrotask:typeof rO<"u"?function(f){return rO.resolve(null).then(f).catch(AX)}:tO;function AX(f){setTimeout(function(){throw f})}function om(f){return f==="head"}function nO(f,x){var j=x,_=0,R=0;do{var q=j.nextSibling;if(f.removeChild(j),q&&q.nodeType===8)if(j=q.data,j==="/$"){if(0<_&&8>_){j=_;var he=f.ownerDocument;if(j&1&&Wg(he.documentElement),j&2&&Wg(he.body),j&4)for(j=he.head,Wg(j),he=j.firstChild;he;){var Ce=he.nextSibling,Je=he.nodeName;he[Ae]||Je==="SCRIPT"||Je==="STYLE"||Je==="LINK"&&he.rel.toLowerCase()==="stylesheet"||j.removeChild(he),he=Ce}}if(R===0){f.removeChild(q),eb(x);return}R--}else j==="$"||j==="$?"||j==="$!"?R++:_=j.charCodeAt(0)-48;else _=0;j=q}while(j);eb(x)}function KC(f){var x=f.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var j=x;switch(x=x.nextSibling,j.nodeName){case"HTML":case"HEAD":case"BODY":KC(j),ke(j);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(j.rel.toLowerCase()==="stylesheet")continue}f.removeChild(j)}}function TX(f,x,j,_){for(;f.nodeType===1;){var R=j;if(f.nodeName.toLowerCase()!==x.toLowerCase()){if(!_&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(_){if(!f[Ae])switch(x){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(q=f.getAttribute("rel"),q==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(q!==R.rel||f.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||f.getAttribute("title")!==(R.title==null?null:R.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(q=f.getAttribute("src"),(q!==(R.src==null?null:R.src)||f.getAttribute("type")!==(R.type==null?null:R.type)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&q&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(x==="input"&&f.type==="hidden"){var q=R.name==null?null:""+R.name;if(R.type==="hidden"&&f.getAttribute("name")===q)return f}else return f;if(f=vd(f.nextSibling),f===null)break}return null}function IX(f,x,j){if(x==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!j||(f=vd(f.nextSibling),f===null))return null;return f}function XC(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function PX(f,x){var j=f.ownerDocument;if(f.data!=="$?"||j.readyState==="complete")x();else{var _=function(){x(),j.removeEventListener("DOMContentLoaded",_)};j.addEventListener("DOMContentLoaded",_),f._reactRetry=_}}function vd(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?"||x==="F!"||x==="F")break;if(x==="/$")return null}}return f}var QC=null;function aO(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var j=f.data;if(j==="$"||j==="$!"||j==="$?"){if(x===0)return f;x--}else j==="/$"&&x++}f=f.previousSibling}return null}function sO(f,x,j){switch(x=lj(j),f){case"html":if(f=x.documentElement,!f)throw Error(n(452));return f;case"head":if(f=x.head,!f)throw Error(n(453));return f;case"body":if(f=x.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function Wg(f){for(var x=f.attributes;x.length;)f.removeAttributeNode(x[0]);ke(f)}var jc=new Map,iO=new Set;function cj(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Th=X.d;X.d={f:OX,r:MX,D:RX,C:FX,L:LX,m:BX,X:$X,S:UX,M:VX};function OX(){var f=Th.f(),x=ej();return f||x}function MX(f){var x=$e(f);x!==null&&x.tag===5&&x.type==="form"?kp(x):Th.r(f)}var S0=typeof document>"u"?null:document;function oO(f,x,j){var _=S0;if(_&&typeof x=="string"&&x){var R=Or(x);R='link[rel="'+f+'"][href="'+R+'"]',typeof j=="string"&&(R+='[crossorigin="'+j+'"]'),iO.has(R)||(iO.add(R),f={rel:f,crossOrigin:j,href:x},_.querySelector(R)===null&&(x=_.createElement("link"),Fi(x,"link",f),ot(x),_.head.appendChild(x)))}}function RX(f){Th.D(f),oO("dns-prefetch",f,null)}function FX(f,x){Th.C(f,x),oO("preconnect",f,x)}function LX(f,x,j){Th.L(f,x,j);var _=S0;if(_&&f&&x){var R='link[rel="preload"][as="'+Or(x)+'"]';x==="image"&&j&&j.imageSrcSet?(R+='[imagesrcset="'+Or(j.imageSrcSet)+'"]',typeof j.imageSizes=="string"&&(R+='[imagesizes="'+Or(j.imageSizes)+'"]')):R+='[href="'+Or(f)+'"]';var q=R;switch(x){case"style":q=C0(f);break;case"script":q=k0(f)}jc.has(q)||(f=u({rel:"preload",href:x==="image"&&j&&j.imageSrcSet?void 0:f,as:x},j),jc.set(q,f),_.querySelector(R)!==null||x==="style"&&_.querySelector(Gg(q))||x==="script"&&_.querySelector(Yg(q))||(x=_.createElement("link"),Fi(x,"link",f),ot(x),_.head.appendChild(x)))}}function BX(f,x){Th.m(f,x);var j=S0;if(j&&f){var _=x&&typeof x.as=="string"?x.as:"script",R='link[rel="modulepreload"][as="'+Or(_)+'"][href="'+Or(f)+'"]',q=R;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=k0(f)}if(!jc.has(q)&&(f=u({rel:"modulepreload",href:f},x),jc.set(q,f),j.querySelector(R)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(j.querySelector(Yg(q)))return}_=j.createElement("link"),Fi(_,"link",f),ot(_),j.head.appendChild(_)}}}function UX(f,x,j){Th.S(f,x,j);var _=S0;if(_&&f){var R=jt(_).hoistableStyles,q=C0(f);x=x||"default";var he=R.get(q);if(!he){var Ce={loading:0,preload:null};if(he=_.querySelector(Gg(q)))Ce.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":x},j),(j=jc.get(q))&&JC(f,j);var Je=he=_.createElement("link");ot(Je),Fi(Je,"link",f),Je._p=new Promise(function(kt,qt){Je.onload=kt,Je.onerror=qt}),Je.addEventListener("load",function(){Ce.loading|=1}),Je.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,dj(he,x,_)}he={type:"stylesheet",instance:he,count:1,state:Ce},R.set(q,he)}}}function $X(f,x){Th.X(f,x);var j=S0;if(j&&f){var _=jt(j).hoistableScripts,R=k0(f),q=_.get(R);q||(q=j.querySelector(Yg(R)),q||(f=u({src:f,async:!0},x),(x=jc.get(R))&&ZC(f,x),q=j.createElement("script"),ot(q),Fi(q,"link",f),j.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},_.set(R,q))}}function VX(f,x){Th.M(f,x);var j=S0;if(j&&f){var _=jt(j).hoistableScripts,R=k0(f),q=_.get(R);q||(q=j.querySelector(Yg(R)),q||(f=u({src:f,async:!0,type:"module"},x),(x=jc.get(R))&&ZC(f,x),q=j.createElement("script"),ot(q),Fi(q,"link",f),j.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},_.set(R,q))}}function lO(f,x,j,_){var R=(R=te.current)?cj(R):null;if(!R)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof j.precedence=="string"&&typeof j.href=="string"?(x=C0(j.href),j=jt(R).hoistableStyles,_=j.get(x),_||(_={type:"style",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(j.rel==="stylesheet"&&typeof j.href=="string"&&typeof j.precedence=="string"){f=C0(j.href);var q=jt(R).hoistableStyles,he=q.get(f);if(he||(R=R.ownerDocument||R,he={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(f,he),(q=R.querySelector(Gg(f)))&&!q._p&&(he.instance=q,he.state.loading=5),jc.has(f)||(j={rel:"preload",as:"style",href:j.href,crossOrigin:j.crossOrigin,integrity:j.integrity,media:j.media,hrefLang:j.hrefLang,referrerPolicy:j.referrerPolicy},jc.set(f,j),q||qX(R,f,j,he.state))),x&&_===null)throw Error(n(528,""));return he}if(x&&_!==null)throw Error(n(529,""));return null;case"script":return x=j.async,j=j.src,typeof j=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=k0(j),j=jt(R).hoistableScripts,_=j.get(x),_||(_={type:"script",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function C0(f){return'href="'+Or(f)+'"'}function Gg(f){return'link[rel="stylesheet"]['+f+"]"}function cO(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function qX(f,x,j,_){f.querySelector('link[rel="preload"][as="style"]['+x+"]")?_.loading=1:(x=f.createElement("link"),_.preload=x,x.addEventListener("load",function(){return _.loading|=1}),x.addEventListener("error",function(){return _.loading|=2}),Fi(x,"link",j),ot(x),f.head.appendChild(x))}function k0(f){return'[src="'+Or(f)+'"]'}function Yg(f){return"script[async]"+f}function dO(f,x,j){if(x.count++,x.instance===null)switch(x.type){case"style":var _=f.querySelector('style[data-href~="'+Or(j.href)+'"]');if(_)return x.instance=_,ot(_),_;var R=u({},j,{"data-href":j.href,"data-precedence":j.precedence,href:null,precedence:null});return _=(f.ownerDocument||f).createElement("style"),ot(_),Fi(_,"style",R),dj(_,j.precedence,f),x.instance=_;case"stylesheet":R=C0(j.href);var q=f.querySelector(Gg(R));if(q)return x.state.loading|=4,x.instance=q,ot(q),q;_=cO(j),(R=jc.get(R))&&JC(_,R),q=(f.ownerDocument||f).createElement("link"),ot(q);var he=q;return he._p=new Promise(function(Ce,Je){he.onload=Ce,he.onerror=Je}),Fi(q,"link",_),x.state.loading|=4,dj(q,j.precedence,f),x.instance=q;case"script":return q=k0(j.src),(R=f.querySelector(Yg(q)))?(x.instance=R,ot(R),R):(_=j,(R=jc.get(q))&&(_=u({},j),ZC(_,R)),f=f.ownerDocument||f,R=f.createElement("script"),ot(R),Fi(R,"link",_),f.head.appendChild(R),x.instance=R);case"void":return null;default:throw Error(n(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(_=x.instance,x.state.loading|=4,dj(_,j.precedence,f));return x.instance}function dj(f,x,j){for(var _=j.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=_.length?_[_.length-1]:null,q=R,he=0;he<_.length;he++){var Ce=_[he];if(Ce.dataset.precedence===x)q=Ce;else if(q!==R)break}q?q.parentNode.insertBefore(f,q.nextSibling):(x=j.nodeType===9?j.head:j,x.insertBefore(f,x.firstChild))}function JC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.title==null&&(f.title=x.title)}function ZC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.integrity==null&&(f.integrity=x.integrity)}var uj=null;function uO(f,x,j){if(uj===null){var _=new Map,R=uj=new Map;R.set(j,_)}else R=uj,_=R.get(j),_||(_=new Map,R.set(j,_));if(_.has(f))return _;for(_.set(f,null),j=j.getElementsByTagName(f),R=0;R<j.length;R++){var q=j[R];if(!(q[Ae]||q[er]||f==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var he=q.getAttribute(x)||"";he=f+he;var Ce=_.get(he);Ce?Ce.push(q):_.set(he,[q])}}return _}function hO(f,x,j){f=f.ownerDocument||f,f.head.insertBefore(j,x==="title"?f.querySelector("head > title"):null)}function zX(f,x,j){if(j===1||x.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return f=x.disabled,typeof x.precedence=="string"&&f==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function fO(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Kg=null;function HX(){}function WX(f,x,j){if(Kg===null)throw Error(n(475));var _=Kg;if(x.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var R=C0(j.href),q=f.querySelector(Gg(R));if(q){f=q._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(_.count++,_=hj.bind(_),f.then(_,_)),x.state.loading|=4,x.instance=q,ot(q);return}q=f.ownerDocument||f,j=cO(j),(R=jc.get(R))&&JC(j,R),q=q.createElement("link"),ot(q);var he=q;he._p=new Promise(function(Ce,Je){he.onload=Ce,he.onerror=Je}),Fi(q,"link",j),x.instance=q}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(x,f),(f=x.state.preload)&&(x.state.loading&3)===0&&(_.count++,x=hj.bind(_),f.addEventListener("load",x),f.addEventListener("error",x))}}function GX(){if(Kg===null)throw Error(n(475));var f=Kg;return f.stylesheets&&f.count===0&&ek(f,f.stylesheets),0<f.count?function(x){var j=setTimeout(function(){if(f.stylesheets&&ek(f,f.stylesheets),f.unsuspend){var _=f.unsuspend;f.unsuspend=null,_()}},6e4);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(j)}}:null}function hj(){if(this.count--,this.count===0){if(this.stylesheets)ek(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var fj=null;function ek(f,x){f.stylesheets=null,f.unsuspend!==null&&(f.count++,fj=new Map,x.forEach(YX,f),fj=null,hj.call(f))}function YX(f,x){if(!(x.state.loading&4)){var j=fj.get(f);if(j)var _=j.get(null);else{j=new Map,fj.set(f,j);for(var R=f.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<R.length;q++){var he=R[q];(he.nodeName==="LINK"||he.getAttribute("media")!=="not all")&&(j.set(he.dataset.precedence,he),_=he)}_&&j.set(null,_)}R=x.instance,he=R.getAttribute("data-precedence"),q=j.get(he)||_,q===_&&j.set(null,R),j.set(he,R),this.count++,_=hj.bind(this),R.addEventListener("load",_),R.addEventListener("error",_),q?q.parentNode.insertBefore(R,q.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(R,f.firstChild)),x.state.loading|=4}}var Xg={$$typeof:N,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function KX(f,x,j,_,R,q,he,Ce){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=We(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=We(0),this.hiddenUpdates=We(null),this.identifierPrefix=_,this.onUncaughtError=R,this.onCaughtError=q,this.onRecoverableError=he,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function mO(f,x,j,_,R,q,he,Ce,Je,kt,qt,Jt){return f=new KX(f,x,j,he,Ce,Je,kt,Jt),x=1,q===!0&&(x|=24),q=mi(3,null,null,x),f.current=q,q.stateNode=f,x=bg(),x.refCount++,f.pooledCache=x,x.refCount++,q.memoizedState={element:_,isDehydrated:j,cache:x},at(q),f}function pO(f){return f?(f=zs,f):zs}function xO(f,x,j,_,R,q){R=pO(R),_.context===null?_.context=R:_.pendingContext=R,_=Vt(x),_.payload={element:j},q=q===void 0?null:q,q!==null&&(_.callback=q),j=Qt(f,_,x),j!==null&&(Pl(j,f,x),Ht(j,f,x))}function vO(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var j=f.retryLane;f.retryLane=j!==0&&j<x?j:x}}function tk(f,x){vO(f,x),(f=f.alternate)&&vO(f,x)}function gO(f){if(f.tag===13){var x=ad(f,67108864);x!==null&&Pl(x,f,67108864),tk(f,67108864)}}var mj=!0;function XX(f,x,j,_){var R=U.T;U.T=null;var q=X.p;try{X.p=2,rk(f,x,j,_)}finally{X.p=q,U.T=R}}function QX(f,x,j,_){var R=U.T;U.T=null;var q=X.p;try{X.p=8,rk(f,x,j,_)}finally{X.p=q,U.T=R}}function rk(f,x,j,_){if(mj){var R=nk(_);if(R===null)qC(f,x,_,pj,j),yO(f,_);else if(ZX(R,f,x,j,_))_.stopPropagation();else if(yO(f,_),x&4&&-1<JX.indexOf(f)){for(;R!==null;){var q=$e(R);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var he=Qe(q.pendingLanes);if(he!==0){var Ce=q;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;he;){var Je=1<<31-ge(he);Ce.entanglements[1]|=Je,he&=~Je}hu(q),(ha&6)===0&&(J1=be()+500,qg(0))}}break;case 13:Ce=ad(q,2),Ce!==null&&Pl(Ce,q,2),ej(),tk(q,2)}if(q=nk(_),q===null&&qC(f,x,_,pj,j),q===R)break;R=q}R!==null&&_.stopPropagation()}else qC(f,x,_,null,j)}}function nk(f){return f=fs(f),ak(f)}var pj=null;function ak(f){if(pj=null,f=Me(f),f!==null){var x=i(f);if(x===null)f=null;else{var j=x.tag;if(j===13){if(f=o(x),f!==null)return f;f=null}else if(j===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null)}}return pj=f,null}function bO(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Fe:return 2;case Xe:return 8;case ct:case xt:return 32;case Re:return 268435456;default:return 32}default:return 32}}var sk=!1,lm=null,cm=null,dm=null,Qg=new Map,Jg=new Map,um=[],JX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yO(f,x){switch(f){case"focusin":case"focusout":lm=null;break;case"dragenter":case"dragleave":cm=null;break;case"mouseover":case"mouseout":dm=null;break;case"pointerover":case"pointerout":Qg.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(x.pointerId)}}function Zg(f,x,j,_,R,q){return f===null||f.nativeEvent!==q?(f={blockedOn:x,domEventName:j,eventSystemFlags:_,nativeEvent:q,targetContainers:[R]},x!==null&&(x=$e(x),x!==null&&gO(x)),f):(f.eventSystemFlags|=_,x=f.targetContainers,R!==null&&x.indexOf(R)===-1&&x.push(R),f)}function ZX(f,x,j,_,R){switch(x){case"focusin":return lm=Zg(lm,f,x,j,_,R),!0;case"dragenter":return cm=Zg(cm,f,x,j,_,R),!0;case"mouseover":return dm=Zg(dm,f,x,j,_,R),!0;case"pointerover":var q=R.pointerId;return Qg.set(q,Zg(Qg.get(q)||null,f,x,j,_,R)),!0;case"gotpointercapture":return q=R.pointerId,Jg.set(q,Zg(Jg.get(q)||null,f,x,j,_,R)),!0}return!1}function jO(f){var x=Me(f.target);if(x!==null){var j=i(x);if(j!==null){if(x=j.tag,x===13){if(x=o(j),x!==null){f.blockedOn=x,rr(f.priority,function(){if(j.tag===13){var _=Il();_=_e(_);var R=ad(j,_);R!==null&&Pl(R,j,_),tk(j,_)}});return}}else if(x===3&&j.stateNode.current.memoizedState.isDehydrated){f.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}f.blockedOn=null}function xj(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var j=nk(f.nativeEvent);if(j===null){j=f.nativeEvent;var _=new j.constructor(j.type,j);ic=_,j.target.dispatchEvent(_),ic=null}else return x=$e(j),x!==null&&gO(x),f.blockedOn=j,!1;x.shift()}return!0}function NO(f,x,j){xj(f)&&j.delete(x)}function eQ(){sk=!1,lm!==null&&xj(lm)&&(lm=null),cm!==null&&xj(cm)&&(cm=null),dm!==null&&xj(dm)&&(dm=null),Qg.forEach(NO),Jg.forEach(NO)}function vj(f,x){f.blockedOn===x&&(f.blockedOn=null,sk||(sk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eQ)))}var gj=null;function wO(f){gj!==f&&(gj=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gj===f&&(gj=null);for(var x=0;x<f.length;x+=3){var j=f[x],_=f[x+1],R=f[x+2];if(typeof _!="function"){if(ak(_||j)===null)continue;break}var q=$e(j);q!==null&&(f.splice(x,3),x-=3,gc(q,{pending:!0,data:R,method:j.method,action:_},_,R))}}))}function eb(f){function x(Je){return vj(Je,f)}lm!==null&&vj(lm,f),cm!==null&&vj(cm,f),dm!==null&&vj(dm,f),Qg.forEach(x),Jg.forEach(x);for(var j=0;j<um.length;j++){var _=um[j];_.blockedOn===f&&(_.blockedOn=null)}for(;0<um.length&&(j=um[0],j.blockedOn===null);)jO(j),j.blockedOn===null&&um.shift();if(j=(f.ownerDocument||f).$$reactFormReplay,j!=null)for(_=0;_<j.length;_+=3){var R=j[_],q=j[_+1],he=R[fr]||null;if(typeof q=="function")he||wO(j);else if(he){var Ce=null;if(q&&q.hasAttribute("formAction")){if(R=q,he=q[fr]||null)Ce=he.formAction;else if(ak(R)!==null)continue}else Ce=he.action;typeof Ce=="function"?j[_+1]=Ce:(j.splice(_,3),_-=3),wO(j)}}}function ik(f){this._internalRoot=f}bj.prototype.render=ik.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(n(409));var j=x.current,_=Il();xO(j,_,f,x,null,null)},bj.prototype.unmount=ik.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;xO(f.current,2,null,f,null,null),ej(),x[yr]=null}};function bj(f){this._internalRoot=f}bj.prototype.unstable_scheduleHydration=function(f){if(f){var x=wt();f={blockedOn:null,target:f,priority:x};for(var j=0;j<um.length&&x!==0&&x<um[j].priority;j++);um.splice(j,0,f),j===0&&jO(f)}};var SO=t.version;if(SO!=="19.1.0")throw Error(n(527,SO,"19.1.0"));X.findDOMNode=function(f){var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=c(x),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var tQ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yj.isDisabled&&yj.supportsFiber)try{_t=yj.inject(tQ),Wt=yj}catch{}}return rb.createRoot=function(f,x){if(!s(f))throw Error(n(299));var j=!1,_="",R=UI,q=$I,he=VI,Ce=null;return x!=null&&(x.unstable_strictMode===!0&&(j=!0),x.identifierPrefix!==void 0&&(_=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(q=x.onCaughtError),x.onRecoverableError!==void 0&&(he=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ce=x.unstable_transitionCallbacks)),x=mO(f,1,!1,null,null,j,_,R,q,he,Ce,null),f[yr]=x.current,VC(f),new ik(x)},rb.hydrateRoot=function(f,x,j){if(!s(f))throw Error(n(299));var _=!1,R="",q=UI,he=$I,Ce=VI,Je=null,kt=null;return j!=null&&(j.unstable_strictMode===!0&&(_=!0),j.identifierPrefix!==void 0&&(R=j.identifierPrefix),j.onUncaughtError!==void 0&&(q=j.onUncaughtError),j.onCaughtError!==void 0&&(he=j.onCaughtError),j.onRecoverableError!==void 0&&(Ce=j.onRecoverableError),j.unstable_transitionCallbacks!==void 0&&(Je=j.unstable_transitionCallbacks),j.formState!==void 0&&(kt=j.formState)),x=mO(f,1,!0,x,j??null,_,R,q,he,Ce,Je,kt),x.context=pO(null),j=x.current,_=Il(),_=_e(_),R=Vt(_),R.callback=null,Qt(j,R,_),j=_,x.current.lanes=j,Ge(x,j),hu(x),f[yr]=x.current,VC(f),new bj(x)},rb.version="19.1.0",rb}var OO;function uQ(){if(OO)return ck.exports;OO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ck.exports=dQ(),ck.exports}var hQ=uQ(),nb={},MO;function fQ(){if(MO)return nb;MO=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.parse=o,nb.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,p){const v=new i,g=m.length;if(g<2)return v;const b=p?.decode||u;let y=0;do{const C=m.indexOf("=",y);if(C===-1)break;const N=m.indexOf(";",y),k=N===-1?g:N;if(C>k){y=m.lastIndexOf(";",C-1)+1;continue}const S=l(m,y,C),D=c(m,C,S),E=m.slice(S,D);if(v[E]===void 0){let T=l(m,C+1,k),A=c(m,k,T);const L=b(m.slice(T,A));v[E]=L}y=k+1}while(y<g);return v}function l(m,p,v){do{const g=m.charCodeAt(p);if(g!==32&&g!==9)return p}while(++p<v);return v}function c(m,p,v){for(;p>v;){const g=m.charCodeAt(--p);if(g!==32&&g!==9)return p+1}return v}function d(m,p,v){const g=v?.encode||encodeURIComponent;if(!e.test(m))throw new TypeError(`argument name is invalid: ${m}`);const b=g(p);if(!t.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=m+"="+b;if(!v)return y;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);y+="; Max-Age="+v.maxAge}if(v.domain){if(!r.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);y+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);y+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);y+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(y+="; HttpOnly"),v.secure&&(y+="; Secure"),v.partitioned&&(y+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return y}function u(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return s.call(m)==="[object Date]"}return nb}fQ();var RO="popstate";function mQ(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return f5("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Xb(s)}return xQ(t,r,null,e)}function Ja(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Id(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pQ(){return Math.random().toString(36).substring(2,10)}function FO(e,t){return{usr:e.state,key:e.key,idx:t}}function f5(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wv(t):t,state:r,key:t&&t.key||n||pQ()}}function Xb({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function xQ(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function m(b,y){l="PUSH";let C=f5(g.location,b,y);d=u()+1;let N=FO(C,d),k=g.createHref(C);try{o.pushState(N,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let C=f5(g.location,b,y);d=u();let N=FO(C,d),k=g.createHref(C);o.replaceState(N,"",k),i&&c&&c({action:l,location:g.location,delta:0})}function v(b){return vQ(b)}let g={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(RO,h),c=b,()=>{s.removeEventListener(RO,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(b){return o.go(b)}};return g}function vQ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ja(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Xb(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function W7(e,t,r="/"){return gQ(e,t,r,!1)}function gQ(e,t,r,n){let s=typeof t=="string"?Wv(t):t,i=Zh(s.pathname||"/",r);if(i==null)return null;let o=G7(e);bQ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AQ(i);l=EQ(o[c],d,n)}return l}function G7(e,t=[],r=[],n=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ja(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=$h([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ja(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),G7(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:kQ(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))s(i,o);else for(let l of Y7(i.path))s(i,o,l)}),t}function Y7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Y7(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function bQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_Q(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var yQ=/^:[\w-]+$/,jQ=3,NQ=2,wQ=1,SQ=10,CQ=-2,LO=e=>e==="*";function kQ(e,t){let r=e.split("/"),n=r.length;return r.some(LO)&&(n+=CQ),t&&(n+=NQ),r.filter(s=>!LO(s)).reduce((s,i)=>s+(yQ.test(i)?jQ:i===""?wQ:SQ),n)}function _Q(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function EQ(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=qN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=qN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:$h([i,h.pathname]),pathnameBase:OQ($h([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=$h([i,h.pathnameBase]))}return o}function qN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DQ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function DQ(e,t=!1,r=!0){Id(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function AQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Id(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Zh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function TQ(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Wv(e):e;return{pathname:r?r.startsWith("/")?r:IQ(r,t):t,search:MQ(n),hash:RQ(s)}}function IQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fk(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function w3(e){let t=PQ(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function S3(e,t,r,n=!1){let s;typeof e=="string"?s=Wv(e):(s={...e},Ja(!s.pathname||!s.pathname.includes("?"),fk("?","pathname","search",s)),Ja(!s.pathname||!s.pathname.includes("#"),fk("#","pathname","hash",s)),Ja(!s.search||!s.search.includes("#"),fk("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=TQ(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var $h=e=>e.join("/").replace(/\/\/+/g,"/"),OQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var K7=["POST","PUT","PATCH","DELETE"];new Set(K7);var LQ=["GET",...K7];new Set(LQ);var Gv=w.createContext(null);Gv.displayName="DataRouter";var Dw=w.createContext(null);Dw.displayName="DataRouterState";var X7=w.createContext({isTransitioning:!1});X7.displayName="ViewTransition";var BQ=w.createContext(new Map);BQ.displayName="Fetchers";var UQ=w.createContext(null);UQ.displayName="Await";var Od=w.createContext(null);Od.displayName="Navigation";var Ry=w.createContext(null);Ry.displayName="Location";var Wu=w.createContext({outlet:null,matches:[],isDataRoute:!1});Wu.displayName="Route";var C3=w.createContext(null);C3.displayName="RouteError";function $Q(e,{relative:t}={}){Ja(Yv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(Od),{hash:s,pathname:i,search:o}=Fy(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:$h([r,i])),n.createHref({pathname:l,search:o,hash:s})}function Yv(){return w.useContext(Ry)!=null}function Ym(){return Ja(Yv(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ry).location}var Q7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J7(e){w.useContext(Od).static||w.useLayoutEffect(e)}function Gu(){let{isDataRoute:e}=w.useContext(Wu);return e?eJ():VQ()}function VQ(){Ja(Yv(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Gv),{basename:t,navigator:r}=w.useContext(Od),{matches:n}=w.useContext(Wu),{pathname:s}=Ym(),i=JSON.stringify(w3(n)),o=w.useRef(!1);return J7(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(Id(o.current,Q7),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=S3(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:$h([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,s,e])}w.createContext(null);function Fy(e,{relative:t}={}){let{matches:r}=w.useContext(Wu),{pathname:n}=Ym(),s=JSON.stringify(w3(r));return w.useMemo(()=>S3(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function qQ(e,t){return Z7(e,t)}function Z7(e,t,r,n){Ja(Yv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(Od),{matches:i}=w.useContext(Wu),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";e9(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=Ym(),m;if(t){let y=typeof t=="string"?Wv(t):t;Ja(d==="/"||y.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=h;let p=m.pathname||"/",v=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=W7(e,{pathname:v});Id(u||g!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Id(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=YQ(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:$h([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:$h([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&b?w.createElement(Ry.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function zQ(){let e=ZQ(),t=FQ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,o)}var HQ=w.createElement(zQ,null),WQ=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Wu.Provider,{value:this.props.routeContext},w.createElement(C3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GQ({routeContext:e,match:t,children:r}){let n=w.useContext(Gv);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Wu.Provider,{value:e},r)}function YQ(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r?.errors;if(i!=null){let c=s.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);Ja(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=r,m=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,u)=>{let h,m=!1,p=null,v=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,p=d.route.errorElement||HQ,o&&(l<0&&u===0?(e9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===u&&(m=!0,v=d.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),b=()=>{let y;return h?y=p:m?y=v:d.route.Component?y=w.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,w.createElement(GQ,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?w.createElement(WQ,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function k3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KQ(e){let t=w.useContext(Gv);return Ja(t,k3(e)),t}function XQ(e){let t=w.useContext(Dw);return Ja(t,k3(e)),t}function QQ(e){let t=w.useContext(Wu);return Ja(t,k3(e)),t}function _3(e){let t=QQ(e),r=t.matches[t.matches.length-1];return Ja(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function JQ(){return _3("useRouteId")}function ZQ(){let e=w.useContext(C3),t=XQ("useRouteError"),r=_3("useRouteError");return e!==void 0?e:t.errors?.[r]}function eJ(){let{router:e}=KQ("useNavigate"),t=_3("useNavigate"),r=w.useRef(!1);return J7(()=>{r.current=!0}),w.useCallback(async(s,i={})=>{Id(r.current,Q7),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var BO={};function e9(e,t,r){!t&&!BO[e]&&(BO[e]=!0,Id(!1,r))}w.memo(tJ);function tJ({routes:e,future:t,state:r}){return Z7(e,void 0,r,t)}function rJ({to:e,replace:t,state:r,relative:n}){Ja(Yv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(Od);Id(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Wu),{pathname:o}=Ym(),l=Gu(),c=S3(e,w3(i),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:n})},[l,d,n,t,r]),null}function cr(e){Ja(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nJ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Ja(!Yv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Wv(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:m="default"}=r,p=w.useMemo(()=>{let v=Zh(c,o);return v==null?null:{location:{pathname:v,search:d,hash:u,state:h,key:m},navigationType:n}},[o,c,d,u,h,m,n]);return Id(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(Od.Provider,{value:l},w.createElement(Ry.Provider,{children:t,value:p}))}function aJ({children:e,location:t}){return qQ(m5(e),t)}function m5(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,m5(n.props.children,i));return}Ja(n.type===cr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ja(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=m5(n.props.children,i)),r.push(o)}),r}var yN="get",jN="application/x-www-form-urlencoded";function Aw(e){return e!=null&&typeof e.tagName=="string"}function sJ(e){return Aw(e)&&e.tagName.toLowerCase()==="button"}function iJ(e){return Aw(e)&&e.tagName.toLowerCase()==="form"}function oJ(e){return Aw(e)&&e.tagName.toLowerCase()==="input"}function lJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cJ(e,t){return e.button===0&&(!t||t==="_self")&&!lJ(e)}var jj=null;function dJ(){if(jj===null)try{new FormData(document.createElement("form"),0),jj=!1}catch{jj=!0}return jj}var uJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mk(e){return e!=null&&!uJ.has(e)?(Id(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jN}"`),null):e}function hJ(e,t){let r,n,s,i,o;if(iJ(e)){let l=e.getAttribute("action");n=l?Zh(l,t):null,r=e.getAttribute("method")||yN,s=mk(e.getAttribute("enctype"))||jN,i=new FormData(e)}else if(sJ(e)||oJ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Zh(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||yN,s=mk(e.getAttribute("formenctype"))||mk(l.getAttribute("enctype"))||jN,i=new FormData(l,e),!dJ()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(Aw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yN,n=null,s=jN,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function E3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function fJ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mJ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pJ(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await fJ(i,r);return o.links?o.links():[]}return[]}));return bJ(n.flat(1).filter(mJ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function UO(e,t,r,n,s,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>r[d].pathname!==c.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function xJ(e,t,{includeHydrateFallback:r}={}){return vJ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function vJ(e){return[...new Set(e)]}function gJ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function bJ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(gJ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yJ=new Set([100,101,204,205]);function jJ(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Zh(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function t9(){let e=w.useContext(Gv);return E3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function NJ(){let e=w.useContext(Dw);return E3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var D3=w.createContext(void 0);D3.displayName="FrameworkContext";function r9(){let e=w.useContext(D3);return E3(e,"You must render this element inside a <HydratedRouter> element"),e}function wJ(e,t){let r=w.useContext(D3),[n,s]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(C=>{o(C.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:ab(l,p),onBlur:ab(c,v),onMouseEnter:ab(d,p),onMouseLeave:ab(u,v),onTouchStart:ab(h,p)}]:[!1,m,{}]}function ab(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function SJ({page:e,...t}){let{router:r}=t9(),n=w.useMemo(()=>W7(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(kJ,{page:e,matches:n,...t}):null}function CJ(e){let{manifest:t,routeModules:r}=r9(),[n,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return pJ(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function kJ({page:e,matches:t,...r}){let n=Ym(),{manifest:s,routeModules:i}=r9(),{basename:o}=t9(),{loaderData:l,matches:c}=NJ(),d=w.useMemo(()=>UO(e,t,c,s,n,"data"),[e,t,c,s,n]),u=w.useMemo(()=>UO(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,g=!1;if(t.forEach(y=>{let C=s.routes[y.route.id];!C||!C.hasLoader||(!d.some(N=>N.route.id===y.route.id)&&y.route.id in l&&i[y.route.id]?.shouldRevalidate||C.hasClientLoader?g=!0:v.add(y.route.id))}),v.size===0)return[];let b=jJ(e,o);return g&&v.size>0&&b.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,d,t,e,i]),m=w.useMemo(()=>xJ(u,s),[u,s]),p=CJ(u);return w.createElement(w.Fragment,null,h.map(v=>w.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),m.map(v=>w.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:g})=>w.createElement("link",{key:v,...g})))}function _J(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var n9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{n9&&(window.__reactRouterVersion="7.6.3")}catch{}function EJ({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=mQ({window:r,v5Compat:!0}));let s=n.current,[i,o]=w.useState({action:s.action,location:s.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>s.listen(l),[s,l]),w.createElement(nJ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var a9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...m},p){let{basename:v}=w.useContext(Od),g=typeof d=="string"&&a9.test(d),b,y=!1;if(typeof d=="string"&&g&&(b=d,n9))try{let A=new URL(window.location.href),L=d.startsWith("//")?new URL(A.protocol+d):new URL(d),P=Zh(L.pathname,v);L.origin===A.origin&&P!=null?d=P+L.search+L.hash:y=!0}catch{Id(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=$Q(d,{relative:s}),[N,k,S]=wJ(n,m),D=IJ(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function E(A){t&&t(A),A.defaultPrevented||D(A)}let T=w.createElement("a",{...m,...S,href:b||C,onClick:y||i?t:E,ref:_J(p,k),target:c,"data-discover":!g&&r==="render"?"true":void 0});return N&&!g?w.createElement(w.Fragment,null,T,w.createElement(SJ,{page:C})):T});qp.displayName="Link";var DJ=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Fy(o,{relative:d.relative}),m=Ym(),p=w.useContext(Dw),{navigator:v,basename:g}=w.useContext(Od),b=p!=null&&FJ(h)&&l===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,C=m.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(C=C.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&g&&(N=Zh(N,g)||N);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=C===y||!s&&C.startsWith(y)&&C.charAt(k)==="/",D=N!=null&&(N===y||!s&&N.startsWith(y)&&N.charAt(y.length)==="/"),E={isActive:S,isPending:D,isTransitioning:b},T=S?t:void 0,A;typeof n=="function"?A=n(E):A=[n,S?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(E):i;return w.createElement(qp,{...d,"aria-current":T,className:A,ref:u,style:L,to:o,viewTransition:l},typeof c=="function"?c(E):c)});DJ.displayName="NavLink";var AJ=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=yN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...m},p)=>{let v=MJ(),g=RJ(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&a9.test(l),C=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let k=N.nativeEvent.submitter,S=k?.getAttribute("formmethod")||o;v(k||N.currentTarget,{fetcherKey:t,method:S,navigate:r,replace:s,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return w.createElement("form",{ref:p,method:b,action:g,onSubmit:n?c:C,...m,"data-discover":!y&&e==="render"?"true":void 0})});AJ.displayName="Form";function TJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s9(e){let t=w.useContext(Gv);return Ja(t,TJ(e)),t}function IJ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Gu(),c=Ym(),d=Fy(e,{relative:i});return w.useCallback(u=>{if(cJ(u,t)){u.preventDefault();let h=r!==void 0?r:Xb(c)===Xb(d);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,r,n,t,e,s,i,o])}var PJ=0,OJ=()=>`__${String(++PJ)}__`;function MJ(){let{router:e}=s9("useSubmit"),{basename:t}=w.useContext(Od),r=JQ();return w.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=hJ(n,t);if(s.navigate===!1){let u=s.fetcherKey||OJ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function RJ(e,{relative:t}={}){let{basename:r}=w.useContext(Od),n=w.useContext(Wu);Ja(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Fy(e||".",{relative:t})},o=Ym();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:$h([r,i.pathname])),Xb(i)}function FJ(e,t={}){let r=w.useContext(X7);Ja(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=s9("useViewTransitionState"),s=Fy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Zh(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Zh(r.nextLocation.pathname,n)||r.nextLocation.pathname;return qN(s.pathname,o)!=null||qN(s.pathname,i)!=null}[...yJ];var Ly=H7();const LJ=Hu(Ly);function i9(e,t){return function(){return e.apply(t,arguments)}}const{toString:BJ}=Object.prototype,{getPrototypeOf:A3}=Object,{iterator:Tw,toStringTag:o9}=Symbol,Iw=(e=>t=>{const r=BJ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Md=e=>(e=e.toLowerCase(),t=>Iw(t)===e),Pw=e=>t=>typeof t===e,{isArray:Kv}=Array,Qb=Pw("undefined");function UJ(e){return e!==null&&!Qb(e)&&e.constructor!==null&&!Qb(e.constructor)&&sl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const l9=Md("ArrayBuffer");function $J(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&l9(e.buffer),t}const VJ=Pw("string"),sl=Pw("function"),c9=Pw("number"),Ow=e=>e!==null&&typeof e=="object",qJ=e=>e===!0||e===!1,NN=e=>{if(Iw(e)!=="object")return!1;const t=A3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(o9 in e)&&!(Tw in e)},zJ=Md("Date"),HJ=Md("File"),WJ=Md("Blob"),GJ=Md("FileList"),YJ=e=>Ow(e)&&sl(e.pipe),KJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||sl(e.append)&&((t=Iw(e))==="formdata"||t==="object"&&sl(e.toString)&&e.toString()==="[object FormData]"))},XJ=Md("URLSearchParams"),[QJ,JJ,ZJ,eZ]=["ReadableStream","Request","Response","Headers"].map(Md),tZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function By(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Kv(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function d9(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const zp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,u9=e=>!Qb(e)&&e!==zp;function p5(){const{caseless:e}=u9(this)&&this||{},t={},r=(n,s)=>{const i=e&&d9(t,s)||s;NN(t[i])&&NN(n)?t[i]=p5(t[i],n):NN(n)?t[i]=p5({},n):Kv(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&By(arguments[n],r);return t}const rZ=(e,t,r,{allOwnKeys:n}={})=>(By(t,(s,i)=>{r&&sl(s)?e[i]=i9(s,r):e[i]=s},{allOwnKeys:n}),e),nZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aZ=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sZ=(e,t,r,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&A3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iZ=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},oZ=e=>{if(!e)return null;if(Kv(e))return e;let t=e.length;if(!c9(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&A3(Uint8Array)),cZ=(e,t)=>{const n=(e&&e[Tw]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},dZ=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},uZ=Md("HTMLFormElement"),hZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),$O=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),fZ=Md("RegExp"),h9=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};By(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},mZ=e=>{h9(e,(t,r)=>{if(sl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(sl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pZ=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Kv(e)?n(e):n(String(e).split(t)),r},xZ=()=>{},vZ=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gZ(e){return!!(e&&sl(e.append)&&e[o9]==="FormData"&&e[Tw])}const bZ=e=>{const t=new Array(10),r=(n,s)=>{if(Ow(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=Kv(n)?[]:{};return By(n,(o,l)=>{const c=r(o,s+1);!Qb(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},yZ=Md("AsyncFunction"),jZ=e=>e&&(Ow(e)||sl(e))&&sl(e.then)&&sl(e.catch),f9=((e,t)=>e?setImmediate:t?((r,n)=>(zp.addEventListener("message",({source:s,data:i})=>{s===zp&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),zp.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",sl(zp.postMessage)),NZ=typeof queueMicrotask<"u"?queueMicrotask.bind(zp):typeof process<"u"&&process.nextTick||f9,wZ=e=>e!=null&&sl(e[Tw]),Rt={isArray:Kv,isArrayBuffer:l9,isBuffer:UJ,isFormData:KJ,isArrayBufferView:$J,isString:VJ,isNumber:c9,isBoolean:qJ,isObject:Ow,isPlainObject:NN,isReadableStream:QJ,isRequest:JJ,isResponse:ZJ,isHeaders:eZ,isUndefined:Qb,isDate:zJ,isFile:HJ,isBlob:WJ,isRegExp:fZ,isFunction:sl,isStream:YJ,isURLSearchParams:XJ,isTypedArray:lZ,isFileList:GJ,forEach:By,merge:p5,extend:rZ,trim:tZ,stripBOM:nZ,inherits:aZ,toFlatObject:sZ,kindOf:Iw,kindOfTest:Md,endsWith:iZ,toArray:oZ,forEachEntry:cZ,matchAll:dZ,isHTMLForm:uZ,hasOwnProperty:$O,hasOwnProp:$O,reduceDescriptors:h9,freezeMethods:mZ,toObjectSet:pZ,toCamelCase:hZ,noop:xZ,toFiniteNumber:vZ,findKey:d9,global:zp,isContextDefined:u9,isSpecCompliantForm:gZ,toJSONObject:bZ,isAsyncFn:yZ,isThenable:jZ,setImmediate:f9,asap:NZ,isIterable:wZ};function bn(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Rt.inherits(bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.status}}});const m9=bn.prototype,p9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p9[e]={value:e}});Object.defineProperties(bn,p9);Object.defineProperty(m9,"isAxiosError",{value:!0});bn.from=(e,t,r,n,s,i)=>{const o=Object.create(m9);return Rt.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),bn.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const SZ=null;function x5(e){return Rt.isPlainObject(e)||Rt.isArray(e)}function x9(e){return Rt.endsWith(e,"[]")?e.slice(0,-2):e}function VO(e,t,r){return e?e.concat(t).map(function(s,i){return s=x9(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function CZ(e){return Rt.isArray(e)&&!e.some(x5)}const kZ=Rt.toFlatObject(Rt,{},null,function(t){return/^is[A-Z]/.test(t)});function Mw(e,t,r){if(!Rt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Rt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!Rt.isUndefined(b[g])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(t);if(!Rt.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Rt.isDate(v))return v.toISOString();if(Rt.isBoolean(v))return v.toString();if(!c&&Rt.isBlob(v))throw new bn("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(v)||Rt.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,b){let y=v;if(v&&!b&&typeof v=="object"){if(Rt.endsWith(g,"{}"))g=n?g:g.slice(0,-2),v=JSON.stringify(v);else if(Rt.isArray(v)&&CZ(v)||(Rt.isFileList(v)||Rt.endsWith(g,"[]"))&&(y=Rt.toArray(v)))return g=x9(g),y.forEach(function(N,k){!(Rt.isUndefined(N)||N===null)&&t.append(o===!0?VO([g],k,i):o===null?g:g+"[]",d(N))}),!1}return x5(v)?!0:(t.append(VO(b,g,i),d(v)),!1)}const h=[],m=Object.assign(kZ,{defaultVisitor:u,convertValue:d,isVisitable:x5});function p(v,g){if(!Rt.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(v),Rt.forEach(v,function(y,C){(!(Rt.isUndefined(y)||y===null)&&s.call(t,y,Rt.isString(C)?C.trim():C,g,m))===!0&&p(y,g?g.concat(C):[C])}),h.pop()}}if(!Rt.isObject(e))throw new TypeError("data must be an object");return p(e),t}function qO(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function T3(e,t){this._pairs=[],e&&Mw(e,this,t)}const v9=T3.prototype;v9.append=function(t,r){this._pairs.push([t,r])};v9.toString=function(t){const r=t?function(n){return t.call(this,n,qO)}:qO;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function _Z(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function g9(e,t,r){if(!t)return e;const n=r&&r.encode||_Z;Rt.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Rt.isURLSearchParams(t)?t.toString():new T3(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class zO{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Rt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const b9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EZ=typeof URLSearchParams<"u"?URLSearchParams:T3,DZ=typeof FormData<"u"?FormData:null,AZ=typeof Blob<"u"?Blob:null,TZ={isBrowser:!0,classes:{URLSearchParams:EZ,FormData:DZ,Blob:AZ},protocols:["http","https","file","blob","url","data"]},I3=typeof window<"u"&&typeof document<"u",v5=typeof navigator=="object"&&navigator||void 0,IZ=I3&&(!v5||["ReactNative","NativeScript","NS"].indexOf(v5.product)<0),PZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OZ=I3&&window.location.href||"http://localhost",MZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I3,hasStandardBrowserEnv:IZ,hasStandardBrowserWebWorkerEnv:PZ,navigator:v5,origin:OZ},Symbol.toStringTag,{value:"Module"})),go={...MZ,...TZ};function RZ(e,t){return Mw(e,new go.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return go.isNode&&Rt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function FZ(e){return Rt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function LZ(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function y9(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Rt.isArray(s)?s.length:o,c?(Rt.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!Rt.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&Rt.isArray(s[o])&&(s[o]=LZ(s[o])),!l)}if(Rt.isFormData(e)&&Rt.isFunction(e.entries)){const r={};return Rt.forEachEntry(e,(n,s)=>{t(FZ(n),s,r,0)}),r}return null}function BZ(e,t,r){if(Rt.isString(e))try{return(t||JSON.parse)(e),Rt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Uy={transitional:b9,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=Rt.isObject(t);if(i&&Rt.isHTMLForm(t)&&(t=new FormData(t)),Rt.isFormData(t))return s?JSON.stringify(y9(t)):t;if(Rt.isArrayBuffer(t)||Rt.isBuffer(t)||Rt.isStream(t)||Rt.isFile(t)||Rt.isBlob(t)||Rt.isReadableStream(t))return t;if(Rt.isArrayBufferView(t))return t.buffer;if(Rt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RZ(t,this.formSerializer).toString();if((l=Rt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Mw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),BZ(t)):t}],transformResponse:[function(t){const r=this.transitional||Uy.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Rt.isResponse(t)||Rt.isReadableStream(t))return t;if(t&&Rt.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?bn.from(l,bn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:go.classes.FormData,Blob:go.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],e=>{Uy.headers[e]={}});const UZ=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$Z=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&UZ[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},HO=Symbol("internals");function sb(e){return e&&String(e).trim().toLowerCase()}function wN(e){return e===!1||e==null?e:Rt.isArray(e)?e.map(wN):String(e)}function VZ(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pk(e,t,r,n,s){if(Rt.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Rt.isString(t)){if(Rt.isString(n))return t.indexOf(n)!==-1;if(Rt.isRegExp(n))return n.test(t)}}function zZ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function HZ(e,t){const r=Rt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let il=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,d){const u=sb(c);if(!u)throw new Error("header name must be a non-empty string");const h=Rt.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=wN(l))}const o=(l,c)=>Rt.forEach(l,(d,u)=>i(d,u,c));if(Rt.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Rt.isString(t)&&(t=t.trim())&&!qZ(t))o($Z(t),r);else if(Rt.isObject(t)&&Rt.isIterable(t)){let l={},c,d;for(const u of t){if(!Rt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Rt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=sb(t),t){const n=Rt.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return VZ(s);if(Rt.isFunction(r))return r.call(this,s,n);if(Rt.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=sb(t),t){const n=Rt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||pk(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=sb(o),o){const l=Rt.findKey(n,o);l&&(!r||pk(n,n[l],l,r))&&(delete n[l],s=!0)}}return Rt.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||pk(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return Rt.forEach(this,(s,i)=>{const o=Rt.findKey(n,i);if(o){r[o]=wN(s),delete r[i];return}const l=t?zZ(i):String(i).trim();l!==i&&delete r[i],r[l]=wN(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Rt.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Rt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[HO]=this[HO]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=sb(o);n[l]||(HZ(s,o),n[l]=!0)}return Rt.isArray(t)?t.forEach(i):i(t),this}};il.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(il.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Rt.freezeMethods(il);function xk(e,t){const r=this||Uy,n=t||r,s=il.from(n.headers);let i=n.data;return Rt.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function j9(e){return!!(e&&e.__CANCEL__)}function Xv(e,t,r){bn.call(this,e??"canceled",bn.ERR_CANCELED,t,r),this.name="CanceledError"}Rt.inherits(Xv,bn,{__CANCEL__:!0});function N9(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new bn("Request failed with status code "+r.status,[bn.ERR_BAD_REQUEST,bn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WZ(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function GZ(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[s]=c,n[s]=d;let h=i,m=0;for(;h!==s;)m+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(m*1e3/p):void 0}}function YZ(e,t){let r=0,n=1e3/t,s,i;const o=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const zN=(e,t,r=3)=>{let n=0;const s=GZ(50,250);return YZ(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=s(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},WO=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},GO=e=>(...t)=>Rt.asap(()=>e(...t)),KZ=go.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,go.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(go.origin),go.navigator&&/(msie|trident)/i.test(go.navigator.userAgent)):()=>!0,XZ=go.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];Rt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Rt.isString(n)&&o.push("path="+n),Rt.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QZ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JZ(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function w9(e,t,r){let n=!QZ(t);return e&&(n||r==!1)?JZ(e,t):t}const YO=e=>e instanceof il?{...e}:e;function vx(e,t){t=t||{};const r={};function n(d,u,h,m){return Rt.isPlainObject(d)&&Rt.isPlainObject(u)?Rt.merge.call({caseless:m},d,u):Rt.isPlainObject(u)?Rt.merge({},u):Rt.isArray(u)?u.slice():u}function s(d,u,h,m){if(Rt.isUndefined(u)){if(!Rt.isUndefined(d))return n(void 0,d,h,m)}else return n(d,u,h,m)}function i(d,u){if(!Rt.isUndefined(u))return n(void 0,u)}function o(d,u){if(Rt.isUndefined(u)){if(!Rt.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>s(YO(d),YO(u),h,!0)};return Rt.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,m=h(e[u],t[u],u);Rt.isUndefined(m)&&h!==l||(r[u]=m)}),r}const S9=e=>{const t=vx({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=il.from(o),t.url=g9(w9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Rt.isFormData(r)){if(go.hasStandardBrowserEnv||go.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(go.hasStandardBrowserEnv&&(n&&Rt.isFunction(n)&&(n=n(t)),n||n!==!1&&KZ(t.url))){const d=s&&i&&XZ.read(i);d&&o.set(s,d)}return t},ZZ=typeof XMLHttpRequest<"u",eee=ZZ&&function(e){return new Promise(function(r,n){const s=S9(e);let i=s.data;const o=il.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,m,p,v;function g(){p&&p(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const N=il.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:N,config:e,request:b};N9(function(E){r(E),g()},function(E){n(E),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new bn("Request aborted",bn.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new bn("Network Error",bn.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||b9;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new bn(k,S.clarifyTimeoutError?bn.ETIMEDOUT:bn.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&Rt.forEach(o.toJSON(),function(k,S){b.setRequestHeader(S,k)}),Rt.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),d&&([m,v]=zN(d,!0),b.addEventListener("progress",m)),c&&b.upload&&([h,p]=zN(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=N=>{b&&(n(!N||N.type?new Xv(null,e,b):N),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const C=WZ(s.url);if(C&&go.protocols.indexOf(C)===-1){n(new bn("Unsupported protocol "+C+":",bn.ERR_BAD_REQUEST,e));return}b.send(i||null)})},tee=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof bn?u:new Xv(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new bn(`timeout ${t} of ms exceeded`,bn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>Rt.asap(l),c}},ree=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},nee=async function*(e,t){for await(const r of aee(e))yield*ree(r,t)},aee=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},KO=(e,t,r,n)=>{const s=nee(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Rw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",C9=Rw&&typeof ReadableStream=="function",see=Rw&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),k9=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iee=C9&&k9(()=>{let e=!1;const t=new Request(go.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),XO=64*1024,g5=C9&&k9(()=>Rt.isReadableStream(new Response("").body)),HN={stream:g5&&(e=>e.body)};Rw&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!HN[t]&&(HN[t]=Rt.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new bn(`Response type '${t}' is not supported`,bn.ERR_NOT_SUPPORT,n)})})})(new Response);const oee=async e=>{if(e==null)return 0;if(Rt.isBlob(e))return e.size;if(Rt.isSpecCompliantForm(e))return(await new Request(go.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(e)||Rt.isArrayBuffer(e))return e.byteLength;if(Rt.isURLSearchParams(e)&&(e=e+""),Rt.isString(e))return(await see(e)).byteLength},lee=async(e,t)=>{const r=Rt.toFiniteNumber(e.getContentLength());return r??oee(t)},cee=Rw&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:m}=S9(e);d=d?(d+"").toLowerCase():"text";let p=tee([s,i&&i.toAbortSignal()],o),v;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&iee&&r!=="get"&&r!=="head"&&(b=await lee(u,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),D;if(Rt.isFormData(n)&&(D=S.headers.get("content-type"))&&u.setContentType(D),S.body){const[E,T]=WO(b,zN(GO(c)));n=KO(S.body,XO,E,T)}}Rt.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...m,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let C=await fetch(v,m);const N=g5&&(d==="stream"||d==="response");if(g5&&(l||N&&g)){const S={};["status","statusText","headers"].forEach(A=>{S[A]=C[A]});const D=Rt.toFiniteNumber(C.headers.get("content-length")),[E,T]=l&&WO(D,zN(GO(l),!0))||[];C=new Response(KO(C.body,XO,E,()=>{T&&T(),g&&g()}),S)}d=d||"text";let k=await HN[Rt.findKey(HN,d)||"text"](C,e);return!N&&g&&g(),await new Promise((S,D)=>{N9(S,D,{data:k,headers:il.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:v})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new bn("Network Error",bn.ERR_NETWORK,e,v),{cause:y.cause||y}):bn.from(y,y&&y.code,e,v)}}),b5={http:SZ,xhr:eee,fetch:cee};Rt.forEach(b5,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QO=e=>`- ${e}`,dee=e=>Rt.isFunction(e)||e===null||e===!1,_9={getAdapter:e=>{e=Rt.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!dee(r)&&(n=b5[(o=String(r)).toLowerCase()],n===void 0))throw new bn(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(QO).join(`
`):" "+QO(i[0]):"as no adapter specified";throw new bn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:b5};function vk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xv(null,e)}function JO(e){return vk(e),e.headers=il.from(e.headers),e.data=xk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_9.getAdapter(e.adapter||Uy.adapter)(e).then(function(n){return vk(e),n.data=xk.call(e,e.transformResponse,n),n.headers=il.from(n.headers),n},function(n){return j9(n)||(vk(e),n&&n.response&&(n.response.data=xk.call(e,e.transformResponse,n.response),n.response.headers=il.from(n.response.headers))),Promise.reject(n)})}const E9="1.10.0",Fw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fw[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ZO={};Fw.transitional=function(t,r,n){function s(i,o){return"[Axios v"+E9+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new bn(s(o," has been removed"+(r?" in "+r:"")),bn.ERR_DEPRECATED);return r&&!ZO[o]&&(ZO[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Fw.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function uee(e,t,r){if(typeof e!="object")throw new bn("options must be an object",bn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new bn("option "+i+" must be "+c,bn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new bn("Unknown option "+i,bn.ERR_BAD_OPTION)}}const SN={assertOptions:uee,validators:Fw},fu=SN.validators;let rx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zO,response:new zO}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=vx(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&SN.assertOptions(n,{silentJSONParsing:fu.transitional(fu.boolean),forcedJSONParsing:fu.transitional(fu.boolean),clarifyTimeoutError:fu.transitional(fu.boolean)},!1),s!=null&&(Rt.isFunction(s)?r.paramsSerializer={serialize:s}:SN.assertOptions(s,{encode:fu.function,serialize:fu.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),SN.assertOptions(r,{baseUrl:fu.spelling("baseURL"),withXsrfToken:fu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Rt.merge(i.common,i[r.method]);i&&Rt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=il.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,m;if(!c){const v=[JO.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,d),m=v.length,u=Promise.resolve(r);h<m;)u=u.then(v[h++],v[h++]);return u}m=l.length;let p=r;for(h=0;h<m;){const v=l[h++],g=l[h++];try{p=v(p)}catch(b){g.call(this,b);break}}try{u=JO.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,m=d.length;h<m;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=vx(this.defaults,t);const r=w9(t.baseURL,t.url,t.allowAbsoluteUrls);return g9(r,t.params,t.paramsSerializer)}};Rt.forEach(["delete","get","head","options"],function(t){rx.prototype[t]=function(r,n){return this.request(vx(n||{},{method:t,url:r,data:(n||{}).data}))}});Rt.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(vx(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}rx.prototype[t]=r(),rx.prototype[t+"Form"]=r(!0)});let hee=class D9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Xv(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new D9(function(s){t=s}),cancel:t}}};function fee(e){return function(r){return e.apply(null,r)}}function mee(e){return Rt.isObject(e)&&e.isAxiosError===!0}const y5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(y5).forEach(([e,t])=>{y5[t]=e});function A9(e){const t=new rx(e),r=i9(rx.prototype.request,t);return Rt.extend(r,rx.prototype,t,{allOwnKeys:!0}),Rt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return A9(vx(e,s))},r}const Oe=A9(Uy);Oe.Axios=rx;Oe.CanceledError=Xv;Oe.CancelToken=hee;Oe.isCancel=j9;Oe.VERSION=E9;Oe.toFormData=Mw;Oe.AxiosError=bn;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=fee;Oe.isAxiosError=mee;Oe.mergeConfig=vx;Oe.AxiosHeaders=il;Oe.formToJSON=e=>y9(Rt.isHTMLForm(e)?new FormData(e):e);Oe.getAdapter=_9.getAdapter;Oe.HttpStatusCode=y5;Oe.default=Oe;const{Axios:z8e,AxiosError:H8e,CanceledError:W8e,isCancel:G8e,CancelToken:Y8e,VERSION:K8e,all:X8e,Cancel:Q8e,isAxiosError:J8e,spread:Z8e,toFormData:eBe,AxiosHeaders:tBe,HttpStatusCode:rBe,formToJSON:nBe,getAdapter:aBe,mergeConfig:sBe}=Oe,pee=()=>{const[e,t]=w.useState({dashboard:!1,superAdmin:!1,application:!1,call:!1,master:!1,category:!1,mrp:!1,purchase:!1,sales:!1,inventory:!1,accounts:!1,invoice:!1,billing:!1,purchasereport:!1,salesreport:!1,inventoryreport:!1,accountsreport:!1,crm:!1,vendorBilling:!1,project:!1,campaigns:!1,hrms:!1}),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(""),c=Gu(),d={purchasereport:"purchase",salesreport:"sales",inventoryreport:"inventory",accountsreport:"accounts",vendorBilling:"invoice",billing:"invoice"},u=v=>r.some(g=>g.name===v),h=(v,g)=>r.find(y=>y.name===v)?.subPermissions?.includes(g)||!1,m=v=>window.location.pathname===v,p=v=>{t(g=>{const b={...g},y=d[v];return y?(Object.keys(b).forEach(C=>{C!==v&&C!==y&&(b[C]=!1)}),b[v]=!g[v],b[y]=!0):(Object.keys(b).forEach(C=>{C!==v&&(b[C]=!1)}),b[v]=!g[v]),localStorage.setItem("openSubmenus",JSON.stringify(b)),b})};return w.useEffect(()=>{const v=localStorage.getItem("openSubmenus");v&&t(JSON.parse(v))},[]),w.useEffect(()=>{const v=async()=>{i(!0);try{const y=localStorage.getItem("activeRole");if(y){l(y);const N=(await Oe.get(`/api/permissions/${y}`)).data.data||[];if(n(N),localStorage.setItem("cachedPermissions",JSON.stringify(N)),localStorage.setItem("prevActiveRole",y),N.length>0){const k=N[0].subPermissions?.[0];k&&setTimeout(()=>{const S=document.querySelectorAll("a");for(let D of S)if(D.textContent?.trim()===k){const T=D.getAttribute("href");T&&c(T);break}},150)}}}catch(y){console.error("Error fetching permissions:",y),n([])}finally{i(!1)}},g=localStorage.getItem("prevActiveRole"),b=localStorage.getItem("activeRole");if(b&&b!==g)console.log("New role detected, fetching permissions"),v();else{console.log("Same role as before  loading cached permissions");const y=localStorage.getItem("cachedPermissions");y?(n(JSON.parse(y)),l(b),i(!1)):v()}},[c]),s?a.jsx("div",{className:"two-col-sidebar",id:"two-col-sidebar",children:a.jsx("div",{className:"sidebar",id:"sidebar-two",children:a.jsx("div",{className:"sidebar-inner",children:a.jsxs("div",{className:"text-center p-3",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading permissions..."})]})})})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"sidebar",id:"sidebar",children:[a.jsxs("div",{className:"sidebar-logo",children:[a.jsx("a",{href:"/",className:"logo logo-normal",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"logo-small",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"dark-logo",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})})]}),a.jsx("div",{className:"sidebar-inner slimscroll",children:a.jsx("div",{id:"sidebar-menu",className:"sidebar-menu",children:a.jsxs("ul",{children:[u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/",className:m("/")?"active":"",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"Dashboard"})]})})})}),u("Master Data")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/material-form","/customer-form","/vendor-form","/customer-price-list","/vendor-price-list","/tax-form","/LocationMaster","/ProcessList","/GeneralCondition"].some(v=>m(v))&&e.master?"active subdrop":"",onClick:v=>{v.preventDefault(),p("master")},children:[a.jsx("i",{className:"ti ti-server"}),a.jsx("span",{children:"Master Data"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.master?"block":"none"},children:[h("Master Data","Material Master")&&a.jsx("li",{children:a.jsx("a",{href:"/material-form",className:m("/material-form")?"active":"",children:"Material Master"})}),h("Master Data","Customer Master")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-form",className:m("/customer-form")?"active":"",children:"Customer Master"})}),h("Master Data","Vendor Master")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-form",className:m("/vendor-form")?"active":"",children:"Vendor Master"})}),h("Master Data","Customer Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-price-list",className:m("/customer-price-list")?"active":"",children:"Customer Price List"})}),h("Master Data","Vendor Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-price-list",className:m("/vendor-price-list")?"active":"",children:"Vendor Price List"})}),h("Master Data","Tax List")&&a.jsx("li",{children:a.jsx("a",{href:"/tax-form",className:m("/tax-form")?"active":"",children:"Tax List"})}),h("Master Data","Location Master")&&a.jsx("li",{children:a.jsx("a",{href:"/LocationMaster",className:m("/LocationMaster")?"active":"",children:"Location Master"})}),h("Master Data","Process List Master")&&a.jsx("li",{children:a.jsx("a",{href:"/ProcessList",className:m("/ProcessList")?"active":"",children:"Process List Master"})}),h("Master Data","General Condition Master")&&a.jsx("li",{children:a.jsx("a",{href:"/GeneralCondition",className:m("/GeneralCondition")?"active":"",children:"General Condition Master"})})]})]})})}),u("MRP")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/MRP",className:m("/MRP")?"active":"",children:[a.jsx("i",{className:"ti ti-chart-line"}),a.jsx("span",{children:"MRP"})]})})})}),u("Category")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:e.category?"active subdrop":"",onClick:v=>{v.preventDefault(),p("category")},children:[a.jsx("i",{className:"bi bi-database"}),a.jsx("span",{children:"Category"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.category?"block":"none"},children:[h("Category","Material Category")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialCategory",className:m("/MaterialCategory")?"active":"",children:"Material Category"})}),h("Category","Customer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-category-form",className:m("/customer-category-form")?"active":"",children:"Customer Category"})}),h("Category","Vendor Category")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-category",className:m("/vendor-category")?"active":"",children:"Vendor Category"})}),h("Category","Purchase Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/Purchaserequestcat",className:m("/Purchaserequestcat")?"active":"",children:"Purchase Indent Category"})}),h("Category","Sales Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesCategory",className:m("/SalesCategory")?"active":"",children:"Sales Indent Category"})}),h("Category","PO Category")&&a.jsx("li",{children:a.jsx("a",{href:"/POCategory",className:m("/POCategory")?"active":"",children:"PO Category"})}),h("Category","Sales RFQ Category")&&a.jsx("li",{children:a.jsx("a",{href:"/sale-quotation-category-form",className:m("/sale-quotation-category-form")?"active":"",children:"Sales RFQ Category"})}),h("Category","Sales Order Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderCategoryForm",className:m("/SalesOrderCategoryForm")?"active":"",children:"Sales Order Category"})}),h("Category","Goods Receipt Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsReceiptCategory",className:m("/GoodsReceiptCategory")?"active":"",children:"Goods Receipt Category"})}),h("Category","Goods Issue Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsIssueCategory",className:m("/GoodsIssueCategory")?"active":"",children:"Goods Issue Category"})}),h("Category","Invoice Category")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceCategory",className:m("/InvoiceCategory")?"active":"",children:"Invoice Category"})}),h("Category","Billing Category")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingCategory",className:m("/BillingCategory")?"active":"",children:"Billing Category"})}),h("Category","Sale Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SaleContractCategoryForm",className:m("/SaleContractCategoryForm")?"active":"",children:"Sale Contract Category"})}),h("Category","Transfer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/TransferCategory",className:m("/TransferCategory")?"active":"",children:"Transfer Category"})}),h("Category","Purchase Quotation Category")&&a.jsx("li",{children:a.jsx("a",{href:"/RFQCategoryForm",className:m("/RFQCategoryForm")?"active":"",children:"RFQ Category"})}),h("Category","Purchase Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractCategory",className:m("/PurchaseContractCategory")?"active":"",children:"Purchase Contract Category"})})]})]})})}),u("Purchase")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/PurchaseEnquiry","/PurchaseQuotation","/PurchaseContract","/PurchaseOrder","/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchase?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchase")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Purchase"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.purchase?"block":"none"},children:[h("Purchase","Purchase Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseEnquiry",className:m("/PurchaseEnquiry")?"active":"",children:"Purchase Enquiry"})}),h("Purchase","Purchase Quotation")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotation",className:m("/PurchaseQuotation")?"active":"",children:"Purchase Quotation"})}),h("Purchase","Purchase Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContract",className:m("/PurchaseContract")?"active":"",children:"Purchase Contract"})}),h("Purchase","Purchase Order")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrder",className:m("/PurchaseOrder")?"active":"",children:"Purchase Order"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchasereport")},children:["Purchase Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"block":"none"},children:[h("Purchase","Purchase Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseIndentsummary",className:m("/PurchaseIndentsummary")?"active":"",children:"Purchase Enquiry List"})}),h("Purchase","Purchase Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotationsDisplay",className:m("/PurchaseQuotationsDisplay")?"active":"",children:"Purchase Quotations List"})}),h("Purchase","Purchase Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractsummary",className:m("/PurchaseContractsummary")?"active":"",children:"Purchase Contract List"})}),h("Purchase","Purchase Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrderList",className:m("/PurchaseOrderList")?"active":"",children:"Purchase Order List"})})]})]})]})]})})}),u("Sales")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/SalesEnquiry","/SalesQuotation","/SalesContract","/SalesOrder","/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.sales?"active subdrop":"",onClick:v=>{v.preventDefault(),p("sales")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Sales"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.sales?"block":"none"},children:[h("Sales","Sales Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiry",className:m("/SalesEnquiry")?"active":"",children:"Sales Enquiry"})}),h("Sales","Sales Quotation Form")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotation",className:m("/SalesQuotation")?"active":"",children:"Sales Quotation"})}),h("Sales","Sales Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContract",className:m("/SalesContract")?"active":"",children:"Sales Contract"})}),h("Sales","Sales Order")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrder",className:m("/SalesOrder")?"active":"",children:"Sales Order"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("salesreport")},children:["Sales Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"block":"none"},children:[h("Sales","Sales Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiryList",className:m("/SalesEnquiryList")?"active":"",children:"Sales Enquiry List"})}),h("Sales","Sales Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotationList",className:m("/SalesQuotationList")?"active":"",children:"Sales Quotations List"})}),h("Sales","Sales Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContractsummary",className:m("/SalesContractsummary")?"active":"",children:"Sales Contract List"})}),h("Sales","Sales Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderList",className:m("/SalesOrderList")?"active":"",children:"Sales Order List"})})]})]})]})]})})}),u("Inventory")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/MatrialReceipt","/MatrialIssue","/MatrialTransfer","/StockListERP","/MatrialReceiptList","/MatrialTransferList"].some(v=>m(v))||e.inventory?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventory")},children:[a.jsx("i",{className:"ti ti-box"}),a.jsx("span",{children:"Inventory"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.inventory?"block":"none"},children:[h("Inventory","Material Receipt")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceipt",className:m("/MatrialReceipt")?"active":"",children:"Material Receipt"})}),h("Inventory","Material Issue")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialIssue",className:m("/MatrialIssue")?"active":"",children:"Material Issue"})}),h("Inventory","Material Transfer")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransfer",className:m("/MatrialTransfer")?"active":"",children:"Delivery Challan"})}),h("Inventory","Stock List")&&a.jsx("li",{children:a.jsx("a",{href:"/StockListERP",className:m("/StockListERP")?"active":"",children:"Stock List"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventoryreport")},children:["Inventory Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"block":"none"},children:[h("Inventory","Material Receipt List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceiptList",className:m("/MatrialReceiptList")?"active":"",children:"Material Receipt List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialIssueList",className:m("/MaterialIssueList")?"active":"",children:"Material Issue List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransferList",className:m("/MatrialTransferList")?"active":"",children:"Material Transfer List"})})]})]})]})]})})}),u("Invoice")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("invoice")},className:["/InvoiceForm","/InvoiceList","/BillingForm","/BillingDisplay"].some(v=>m(v))||e.invoice?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-file-dollar"}),a.jsx("span",{children:"Invoice"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.invoice?"block":"none"},children:[a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("vendorBilling")},className:["/InvoiceForm","/InvoiceList"].some(v=>m(v))||e.vendorBilling?"active subdrop":"",children:[a.jsx("span",{children:"Vendor Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.vendorBilling?"block":"none"},children:[h("Invoice","Invoice Form")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceForm",className:m("/InvoiceForm")?"active":"",children:"Vendor Invoice Creation"})}),h("Invoice","Invoice List")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceList",className:m("/InvoiceList")?"active":"",children:"Vendor Invoice List"})})]})]}),u("Billing")&&a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("billing")},className:["/BillingForm","/BillingDisplay"].some(v=>m(v))||e.billing?"active subdrop":"",children:[a.jsx("span",{children:"Customer Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.billing?"block":"none"},children:[h("Billing","Billing Form")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingForm",className:m("/BillingForm")?"active":"",children:"Customer Invoice Creation"})}),h("Billing","Billing List")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingDisplay",className:m("/BillingDisplay")?"active":"",children:"Customer Invoice List"})})]})]})]})]})})}),u("Accounts")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("accounts")},className:["/gst","/Ledger","/PaymentDisplay"].some(v=>m(v))||e.accounts?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-credit-card"}),a.jsx("span",{children:"Accounts"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.accounts?"block":"none"},children:[h("Accounts","GST")&&a.jsx("li",{children:a.jsx("a",{href:"/gst",className:m("/gst")?"active":"",children:"GST"})}),h("Accounts","Ledger")&&a.jsx("li",{children:a.jsx("a",{href:"/Ledger",className:m("/Ledger")?"active":"",children:"Ledger"})}),h("Accounts","Payments")&&a.jsx("li",{children:a.jsx("a",{href:"/PaymentDisplay",className:m("/PaymentDisplay")?"active":"",children:"Payments"})})]})]})})}),u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{target:"_blank",href:"https://ewaybillgst.gov.in/login.aspx",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"E-Way Bill"})]})})})}),u("CRM")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/contacts","/leads","/proposals","/sources","/lost-reason","/contact-stage","/industry","/calls"].some(v=>m(v))||e.crm?"active subdrop":"",onClick:v=>{v.preventDefault(),p("crm")},children:[a.jsx("i",{className:"ti ti-address-book"}),a.jsx("span",{children:"CRM"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.crm?"block":"none"},children:[h("CRM","Contacts List")&&a.jsx("li",{children:a.jsx("a",{href:"/contacts",className:m("/contacts")?"active":"",children:"Contacts List"})}),h("CRM","Leads")&&a.jsx("li",{children:a.jsx("a",{href:"/leads",className:m("/leads")?"active":"",children:"Leads"})}),h("CRM","Proposals")&&a.jsx("li",{children:a.jsx("a",{href:"/proposals",className:m("/proposals")?"active":"",children:"Proposals"})}),h("CRM","Sources")&&a.jsx("li",{children:a.jsx("a",{href:"/sources",className:m("/sources")?"active":"",children:"Sources"})}),h("CRM","Lost Reason")&&a.jsx("li",{children:a.jsx("a",{href:"/lost-reason",className:m("/lost-reason")?"active":"",children:"Lost Reason"})}),h("CRM","Contact Stage")&&a.jsx("li",{children:a.jsx("a",{href:"/contact-stage",className:m("/contact-stage")?"active":"",children:"Contact Stage"})}),h("CRM","Industry")&&a.jsx("li",{children:a.jsx("a",{href:"/industry",className:m("/industry")?"active":"",children:"Industry"})}),h("CRM","Calls")&&a.jsx("li",{children:a.jsx("a",{href:"/calls",className:m("/calls")?"active":"",children:"Calls"})})]})]})})}),u("Project Management")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/projects","/tasks","/milestones","/time-entries"].some(v=>m(v))||e.project?"active subdrop":"",onClick:v=>{v.preventDefault(),p("project")},children:[a.jsx("i",{className:"ti ti-briefcase"}),a.jsx("span",{children:"Project Management"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.project?"block":"none"},children:[h("Project Management","Projects")&&a.jsx("li",{children:a.jsx("a",{href:"/projects",className:m("/projects")?"active":"",children:"Projects"})}),h("Project Management","Tasks")&&a.jsx("li",{children:a.jsx("a",{href:"/tasks",className:m("/tasks")?"active":"",children:"Tasks"})}),h("Project Management","Milestones")&&a.jsx("li",{children:a.jsx("a",{href:"/milestones",className:m("/milestones")?"active":"",children:"Milestones"})}),h("Project Management","Time Entries")&&a.jsx("li",{children:a.jsx("a",{href:"/time-entries",className:m("/time-entries")?"active":"",children:"Time Entries"})})]})]})})}),u("Campaigns")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/campaigns","/analytics"].some(v=>m(v))||e.campaigns?"active subdrop":"",onClick:v=>{v.preventDefault(),p("campaigns")},children:[a.jsx("i",{className:"ti ti-brand-campaignmonitor"}),"  ",a.jsx("span",{children:"Campaigns"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.campaigns?"block":"none"},children:[h("Campaigns","Campaigns")&&a.jsx("li",{children:a.jsx("a",{href:"/campaigns",className:m("/campaigns")?"active":"",children:"Campaigns"})}),h("Campaigns","Analytics")&&a.jsx("li",{children:a.jsx("a",{href:"/analytics",className:m("/analytics")?"active":"",children:"Analytics"})})]})]})})}),u("HRMS")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/designation","/departments","/employee","/leaverequest","/leavemanagement","/payroll","/attendancereg","/attendancetaking","/attendancereport"].some(v=>m(v))||e.hrms?"active subdrop":"",onClick:v=>{v.preventDefault(),p("hrms")},children:[a.jsx("i",{className:"ti ti-user-circle"}),a.jsx("span",{children:"HRMS"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.hrms?"block":"none"},children:[h("HRMS","Designation")&&a.jsx("li",{children:a.jsx("a",{href:"/designation",className:m("/designation")?"active":"",children:"Designation"})}),h("HRMS","Department")&&a.jsx("li",{children:a.jsx("a",{href:"/departments",className:m("/departments")?"active":"",children:"Departments"})}),h("HRMS","Employee")&&a.jsx("li",{children:a.jsx("a",{href:"/employee",className:m("/employee")?"active":"",children:"Employee"})}),h("HRMS","LeaveRequests")&&a.jsx("li",{children:a.jsx("a",{href:"/leaverequest",className:m("/leaverequest")?"active":"",children:"Leave Request"})}),h("HRMS","LeaveRequestManagement")&&a.jsx("li",{children:a.jsx("a",{href:"/leavemanagement",className:m("/leavemanagement")?"active":"",children:"Leave Management"})}),h("HRMS","Payroll")&&a.jsx("li",{children:a.jsx("a",{href:"/payroll",className:m("/payroll")?"active":"",children:"Payroll"})}),h("HRMS","AttendanceRegister")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereg",className:m("/attendancereg")?"active":"",children:"Attendance Register"})}),h("HRMS","AttendanceTaking")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancetaking",className:m("/attendancetaking")?"active":"",children:"Attendance Taking"})}),h("HRMS","AttendanceReports")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereport",className:m("/attendancereport")?"active":"",children:"Attendance Reports"})})]})]})})}),r.length===0&&a.jsx("li",{className:"menu-title",children:a.jsxs("span",{children:["No permissions assigned for role: ",o]})})]})})})]})})};function xee({toggleSidebar:e}){Gu();const[t,r]=w.useState(!1),[n,s]=w.useState(!1),i=JSON.parse(localStorage.getItem("user"));console.log("user",i);const o=i?.roles?.map(h=>h.roleName)||[],[l,c]=w.useState(()=>localStorage.getItem("activeRole")||o[0]||"");w.useEffect(()=>{!localStorage.getItem("activeRole")&&o.length>0&&(localStorage.setItem("activeRole",i.roles[0]?.roleName||""),c(o[0]))},[o]),console.log("Active Role:",l);const d=h=>{const m=h.target.value;c(m),localStorage.setItem("activeRole",i.roles[0]?.roleName||"")},u=()=>{localStorage.removeItem("user"),localStorage.removeItem("activeRole"),localStorage.removeItem("openSubmenus"),window.location.href="/login"};return a.jsx("div",{className:"header",children:a.jsxs("div",{className:"main-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("a",{href:"index.html",className:"logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})}),a.jsx("a",{href:"index.html",className:"dark-logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})})]}),a.jsx("a",{id:"mobile_btn",className:"mobile_btn",onClick:h=>{h.preventDefault(),e()},children:a.jsxs("span",{className:"bar-icon",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]})}),a.jsx("div",{className:"header-user",children:a.jsxs("div",{className:"nav user-menu nav-list",children:[a.jsx("div",{className:"me-auto d-flex align-items-center",id:"header-search"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("div",{className:"me-1 notification_item",children:[a.jsxs("a",{href:"#",className:"btn btn-menubar position-relative me-1",id:"notification_popup","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-bell"}),a.jsx("span",{className:"notification-status-dot"})]}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end notification-dropdown p-4",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between border-bottom p-0 pb-3 mb-3",children:[a.jsx("h4",{className:"notification-title",children:"Notifications (2)"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("a",{href:"#",className:"text-primary fs-15 me-3 lh-1",children:"Mark all as read"}),a.jsxs("div",{className:"dropdown",children:[a.jsxs("a",{href:"javascript:void(0);",className:"bg-white dropdown-toggle","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-calendar-due me-1"}),"Today"]}),a.jsxs("ul",{className:"dropdown-menu mt-2 p-3",children:[a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"This Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Month"})})]})]})]})]}),a.jsx("div",{className:"noti-content",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-27.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Shawn"})," performance in Math is below the threshold."]}),a.jsx("span",{children:"Just Now"})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",className:"pb-0",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-23.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Sylvia"})," added appointment on 02:00 PM"]}),a.jsx("span",{children:"10 mins ago"}),a.jsxs("div",{className:"d-flex justify-content-start align-items-center mt-1",children:[a.jsx("span",{className:"btn btn-light btn-sm me-2",children:"Deny"}),a.jsx("span",{className:"btn btn-primary btn-sm",children:"Approve"})]})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-25.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["New student record ",a.jsx("span",{className:"text-dark fw-semibold",children:" George"})," is created by ",a.jsx("span",{className:"text-dark fw-semibold",children:"Teressa"})]}),a.jsx("span",{children:"2 hrs ago"})]})]})})}),a.jsx("div",{className:"border-0 mb-3 pb-0",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-01.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["A new teacher record for ",a.jsx("span",{className:"text-dark fw-semibold",children:"Elisa"})," "]}),a.jsx("span",{children:"09:45 AM"})]})]})})})]})}),a.jsxs("div",{className:"d-flex p-0",children:[a.jsx("a",{href:"#",className:"btn btn-light w-100 me-2",children:"Cancel"}),a.jsx("a",{href:"activity.html",className:"btn btn-primary w-100",children:"View All"})]})]})]}),a.jsxs("div",{className:"dropdown profile-dropdown",children:[a.jsx("a",{href:"javascript:void(0);",className:"dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",children:a.jsx("span",{className:"avatar avatar-sm online",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"Img",className:"img-fluid rounded-circle"})})}),a.jsx("div",{className:"dropdown-menu shadow-none",children:a.jsxs("div",{className:"card mb-0",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"avatar avatar-lg me-2 avatar-rounded",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"img"})}),a.jsxs("div",{children:[a.jsx("h5",{className:"mb-0",children:i?.username||"User"}),a.jsxs("p",{className:"fs-12 fw-medium mb-0",children:["Active Role: ",a.jsx("strong",{children:l})," "]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",children:[a.jsx("label",{className:"mb-1 fw-medium",children:"Switch Role"}),a.jsx("select",{className:"form-select form-select-sm",value:l,onChange:d,children:o.map(h=>a.jsx("option",{value:h,children:h},h))})]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/profile",children:[a.jsx("i",{className:"isax isax-profile-circle me-2"}),"Profile Settings"]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/reports",children:[a.jsx("i",{className:"isax isax-document-text me-2"}),"Reports"]}),a.jsxs("div",{className:"form-check form-switch form-check-reverse d-flex align-items-center justify-content-between dropdown-item mb-0",children:[a.jsxs("label",{className:"form-check-label",htmlFor:"notify",children:[a.jsx("i",{className:"isax isax-notification me-2"}),"Notifications"]}),a.jsx("input",{className:"form-check-input",type:"checkbox",id:"notify"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsxs("button",{className:"dropdown-item logout d-flex align-items-center",onClick:u,style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[a.jsx("i",{className:"isax isax-logout me-2"}),"Sign Out"]})})]})})]})]})]})}),a.jsxs("div",{className:"dropdown mobile-user-menu",children:[a.jsx("a",{href:"javascript:void(0);",className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:a.jsx("i",{className:"fa fa-ellipsis-v"})}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[a.jsx("a",{className:"dropdown-item",href:"profile.html",children:"My Profile"}),a.jsx("a",{className:"dropdown-item",href:"profile-settings.html",children:"Settings"}),a.jsx("a",{className:"dropdown-item",onClick:u,children:"Logout"})]})]})]})})}const vee=({children:e})=>(()=>{const r=localStorage.getItem("user");return r&&r!=="null"&&r!=="undefined"})()?e:a.jsx(rJ,{to:"/login",replace:!0});function T9(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=T9(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function vn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=T9(e))&&(n&&(n+=" "),n+=t);return n}var gk={},bk={},eM;function gee(){return eM||(eM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(bk)),bk}var yk={},tM;function I9(){return tM||(tM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(yk)),yk}var jk={},rM;function P9(){return rM||(rM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(jk)),jk}var Nk={},nM;function P3(){return nM||(nM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const d=r[i];l?d==="\\"&&i+1<s?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,n.push(o),o=""):o+=d:d==="["?(c=!0,o&&(n.push(o),o="")):d==="."?o&&(n.push(o),o=""):o+=d,i++}return o&&n.push(o),n}e.toPath=t}(Nk)),Nk}var aM;function O3(){return aM||(aM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gee(),r=I9(),n=P9(),s=P3();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(gk)),gk}var wk,sM;function bee(){return sM||(sM=1,wk=O3().get),wk}var yee=bee();const gx=Hu(yee);var Sk={exports:{}},Sa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM;function jee(){if(iM)return Sa;iM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case n:case c:case d:case m:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case h:case u:return g;case i:return g;default:return b}}case t:return b}}}return Sa.ContextConsumer=i,Sa.ContextProvider=o,Sa.Element=e,Sa.ForwardRef=l,Sa.Fragment=r,Sa.Lazy=h,Sa.Memo=u,Sa.Portal=t,Sa.Profiler=s,Sa.StrictMode=n,Sa.Suspense=c,Sa.SuspenseList=d,Sa.isContextConsumer=function(g){return v(g)===i},Sa.isContextProvider=function(g){return v(g)===o},Sa.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Sa.isForwardRef=function(g){return v(g)===l},Sa.isFragment=function(g){return v(g)===r},Sa.isLazy=function(g){return v(g)===h},Sa.isMemo=function(g){return v(g)===u},Sa.isPortal=function(g){return v(g)===t},Sa.isProfiler=function(g){return v(g)===s},Sa.isStrictMode=function(g){return v(g)===n},Sa.isSuspense=function(g){return v(g)===c},Sa.isSuspenseList=function(g){return v(g)===d},Sa.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===n||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},Sa.typeOf=v,Sa}var oM;function Nee(){return oM||(oM=1,Sk.exports=jee()),Sk.exports}var wee=Nee(),Lc=e=>e===0?0:e>0?1:-1,ec=e=>typeof e=="number"&&e!=+e,Hp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Tr=e=>(typeof e=="number"||e instanceof Number)&&!ec(e),$u=e=>Tr(e)||typeof e=="string",See=0,Jb=e=>{var t=++See;return"".concat(e||"").concat(t)},Fm=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tr(t)&&typeof t!="string")return n;var i;if(Hp(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ec(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},O9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function _0(e,t,r){return Tr(e)&&Tr(t)?e+r*(t-e):t}function M9(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):gx(n,t))===r)}var Zs=e=>e===null||typeof e>"u",$y=e=>Zs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Cee=["viewBox","children"],kee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lM=["points","pathLength"],Ck={svg:Cee,polygon:lM,polyline:lM},M3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],R3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{M3.includes(s)&&(n[s]=i=>r[s](r,i))}),n},_ee=(e,t,r)=>n=>(e(t,r,n),null),R9=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];M3.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=_ee(i,t,r))}),n},cM=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",dM=null,kk=null,F9=e=>{if(e===dM&&Array.isArray(kk))return kk;var t=[];return w.Children.forEach(e,r=>{Zs(r)||(wee.isFragment(r)?t=t.concat(F9(r.props.children)):t.push(r))}),kk=t,dM=e,t};function L9(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>cM(s)):n=[cM(t)],F9(e).forEach(s=>{var i=gx(s,"type.displayName")||gx(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var B9=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Eee=(e,t,r,n)=>{var s,i=(s=n&&Ck?.[n])!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||kee.includes(t))||r&&M3.includes(t)},Aa=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Eee((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},Dee=["children","width","height","viewBox","className","style","title","desc"];function j5(){return j5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j5.apply(null,arguments)}function Aee(e,t){if(e==null)return{};var r,n,s=Tee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F3=w.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=Aee(e,Dee),h=i||{width:n,height:s,x:0,y:0},m=vn("recharts-surface",o);return w.createElement("svg",j5({},Aa(u,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,d),r)}),Iee=["children","className"];function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N5.apply(null,arguments)}function Pee(e,t){if(e==null)return{};var r,n,s=Oee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ef=w.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Pee(e,Iee),i=vn("recharts-layer",n);return w.createElement("g",N5({className:i},Aa(s,!0),{ref:t}),r)}),U9=w.createContext(null),Mee=()=>w.useContext(U9);function Ra(e){return function(){return e}}const $9=Math.cos,WN=Math.sin,Rd=Math.sqrt,GN=Math.PI,Lw=2*GN,w5=Math.PI,S5=2*w5,Pp=1e-6,Ree=S5-Pp;function V9(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Fee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return V9;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Lee{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?V9:Fee(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=s-r,u=o-t,h=l-r,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Pp)if(!(Math.abs(h*c-d*u)>Pp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=s-l,g=c*c+d*d,b=p*p+v*v,y=Math.sqrt(g),C=Math.sqrt(m),N=i*Math.tan((w5-Math.acos((g+m-b)/(2*y*C)))/2),k=N/C,S=N/y;Math.abs(k-1)>Pp&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,u=r+c,h=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Pp||Math.abs(this._y1-u)>Pp)&&this._append`L${d},${u}`,n&&(m<0&&(m=m%S5+S5),m>Ree?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:m>Pp&&this._append`A${n},${n},0,${+(m>=w5)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function L3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Lee(t)}function B3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q9(e){this._context=e}q9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bw(e){return new q9(e)}function z9(e){return e[0]}function H9(e){return e[1]}function W9(e,t){var r=Ra(!0),n=null,s=Bw,i=null,o=L3(l);e=typeof e=="function"?e:e===void 0?z9:Ra(e),t=typeof t=="function"?t:t===void 0?H9:Ra(t);function l(c){var d,u=(c=B3(c)).length,h,m=!1,p;for(n==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,d,c),+t(h,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ra(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ra(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ra(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Nj(e,t,r){var n=null,s=Ra(!0),i=null,o=Bw,l=null,c=L3(d);e=typeof e=="function"?e:e===void 0?z9:Ra(+e),t=typeof t=="function"?t:Ra(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?H9:Ra(+r);function d(h){var m,p,v,g=(h=B3(h)).length,b,y=!1,C,N=new Array(g),k=new Array(g);for(i==null&&(l=o(C=c())),m=0;m<=g;++m){if(!(m<g&&s(b=h[m],m,h))===y)if(y=!y)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(N[v],k[v]);l.lineEnd(),l.areaEnd()}y&&(N[m]=+e(b,m,h),k[m]=+t(b,m,h),l.point(n?+n(b,m,h):N[m],r?+r(b,m,h):k[m]))}if(C)return l=null,C+""||null}function u(){return W9().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ra(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ra(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ra(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ra(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ra(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ra(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Ra(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class G9{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Bee(e){return new G9(e,!0)}function Uee(e){return new G9(e,!1)}const U3={draw(e,t){const r=Rd(t/GN);e.moveTo(r,0),e.arc(0,0,r,0,Lw)}},$ee={draw(e,t){const r=Rd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Y9=Rd(1/3),Vee=Y9*2,qee={draw(e,t){const r=Rd(t/Vee),n=r*Y9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},zee={draw(e,t){const r=Rd(t),n=-r/2;e.rect(n,n,r,r)}},Hee=.8908130915292852,K9=WN(GN/10)/WN(7*GN/10),Wee=WN(Lw/10)*K9,Gee=-$9(Lw/10)*K9,Yee={draw(e,t){const r=Rd(t*Hee),n=Wee*r,s=Gee*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Lw*i/5,l=$9(o),c=WN(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},_k=Rd(3),Kee={draw(e,t){const r=-Rd(t/(_k*3));e.moveTo(0,r*2),e.lineTo(-_k*r,-r),e.lineTo(_k*r,-r),e.closePath()}},Nc=-.5,wc=Rd(3)/2,C5=1/Rd(12),Xee=(C5/2+1)*3,Qee={draw(e,t){const r=Rd(t/Xee),n=r/2,s=r*C5,i=n,o=r*C5+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Nc*n-wc*s,wc*n+Nc*s),e.lineTo(Nc*i-wc*o,wc*i+Nc*o),e.lineTo(Nc*l-wc*c,wc*l+Nc*c),e.lineTo(Nc*n+wc*s,Nc*s-wc*n),e.lineTo(Nc*i+wc*o,Nc*o-wc*i),e.lineTo(Nc*l+wc*c,Nc*c-wc*l),e.closePath()}};function Jee(e,t){let r=null,n=L3(s);e=typeof e=="function"?e:Ra(e||U3),t=typeof t=="function"?t:Ra(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ra(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ra(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function YN(){}function KN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function X9(e){this._context=e}X9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:KN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zee(e){return new X9(e)}function Q9(e){this._context=e}Q9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ete(e){return new Q9(e)}function J9(e){this._context=e}J9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tte(e){return new J9(e)}function Z9(e){this._context=e}Z9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rte(e){return new Z9(e)}function uM(e){return e<0?-1:1}function hM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(uM(i)+uM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function fM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ek(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ek(this,this._t0,fM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ek(this,fM(this,r=hM(this,e,t)),r);break;default:Ek(this,this._t0,r=hM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eU(e){this._context=new tU(e)}(eU.prototype=Object.create(XN.prototype)).point=function(e,t){XN.prototype.point.call(this,t,e)};function tU(e){this._context=e}tU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function nte(e){return new XN(e)}function ate(e){return new eU(e)}function rU(e){this._context=e}rU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=mM(e),s=mM(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mM(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function ste(e){return new rU(e)}function Uw(e,t){this._context=e,this._t=t}Uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ite(e){return new Uw(e,.5)}function ote(e){return new Uw(e,0)}function lte(e){return new Uw(e,1)}function wv(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function k5(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function cte(e,t){return e[t]}function dte(e){const t=[];return t.key=e,t}function ute(){var e=Ra([]),t=k5,r=wv,n=cte;function s(i){var o=Array.from(e.apply(this,arguments),dte),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=B3(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ra(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ra(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?k5:typeof i=="function"?i:Ra(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??wv,s):r},s}function hte(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}wv(e,t)}}function fte(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}wv(e,t)}}function mte(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[n][1]||0,m=u[n-1][1]||0,p=(h-m)/2,v=0;v<l;++v){var g=e[t[v]],b=g[n][1]||0,y=g[n-1][1]||0;p+=b-y}c+=h,d+=p*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,wv(e,t)}}var pte=["type","size","sizeType"];function _5(){return _5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_5.apply(null,arguments)}function pM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(r),!0).forEach(function(n){xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xte(e,t,r){return(t=vte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=gte(e,"string");return typeof t=="symbol"?t:t+""}function gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bte(e,t){if(e==null)return{};var r,n,s=yte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nU={symbolCircle:U3,symbolCross:$ee,symbolDiamond:qee,symbolSquare:zee,symbolStar:Yee,symbolTriangle:Kee,symbolWye:Qee},jte=Math.PI/180,Nte=e=>{var t="symbol".concat($y(e));return nU[t]||U3},wte=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*jte;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ste=(e,t)=>{nU["symbol".concat($y(e))]=t},aU=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=bte(e,pte),i=xM(xM({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=Nte(t),m=Jee().type(h).size(wte(r,n,t));return m()},{className:l,cx:c,cy:d}=i,u=Aa(i,!0);return c===+c&&d===+d&&r===+r?w.createElement("path",_5({},u,{className:vn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};aU.registerSymbol=Ste;function E5(){return E5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E5.apply(null,arguments)}function vM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(r),!0).forEach(function(n){$3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $3(e,t,r){return(t=kte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=_te(e,"string");return typeof t=="symbol"?t:t+""}function _te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sc=32;class V3 extends w.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=Sc/2,i=Sc/6,o=Sc/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:Sc,y2:s,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Sc,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Sc/8,"h").concat(Sc,"v").concat(Sc*3/4,"h").concat(-Sc,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var d=Cte({},t);return delete d.legendIcon,w.cloneElement(t.legendIcon,d)}return w.createElement(aU,{fill:l,cx:s,cy:s,size:Sc,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:Sc,height:Sc},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var m=u.formatter||s,p=vn({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,g=m?m(u.value,u,h):u.value;return w.createElement("li",E5({className:p,style:c,key:"legend-item-".concat(h)},R9(this.props,u,h)),w.createElement(F3,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}$3(V3,"displayName","Legend");$3(V3,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Dk={},Ak={},gM;function Ete(){return gM||(gM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t}(Ak)),Ak}var Tk={},bM;function sU(){return bM||(bM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Tk)),Tk}var Ik={},Pk={},Ok={},yM;function Dte(){return yM||(yM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(Ok)),Ok}var jM;function q3(){return jM||(jM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dte();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(Pk)),Pk}var Mk={},NM;function Ate(){return NM||(NM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(Mk)),Mk}var wM;function Tte(){return wM||(wM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q3(),r=Ate();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n}(Ik)),Ik}var Rk={},Fk={},SM;function Ite(){return SM||(SM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O3();function r(n){return function(s){return t.get(s,n)}}e.property=r}(Fk)),Fk}var Lk={},Bk={},Uk={},$k={},CM;function iU(){return CM||(CM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}($k)),$k}var Vk={},kM;function oU(){return kM||(kM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(Vk)),Vk}var qk={},_M;function z3(){return _M||(_M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(qk)),qk}var EM;function Pte(){return EM||(EM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=iU(),n=oU(),s=z3();function i(h,m,p){return typeof p!="function"?t.isMatch(h,m):o(h,m,function v(g,b,y,C,N,k){const S=p(g,b,y,C,N,k);return S!==void 0?!!S:o(g,b,v,k)},new Map)}function o(h,m,p,v){if(m===h)return!0;switch(typeof m){case"object":return l(h,m,p,v);case"function":return Object.keys(m).length>0?o(h,{...m},p,v):s.eq(h,m);default:return r.isObject(h)?typeof m=="string"?m==="":!0:s.eq(h,m)}}function l(h,m,p,v){if(m==null)return!0;if(Array.isArray(m))return d(h,m,p,v);if(m instanceof Map)return c(h,m,p,v);if(m instanceof Set)return u(h,m,p,v);const g=Object.keys(m);if(h==null)return g.length===0;if(g.length===0)return!0;if(v&&v.has(m))return v.get(m)===h;v&&v.set(m,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!n.isPrimitive(h)&&!(y in h)||m[y]===void 0&&h[y]!==void 0||m[y]===null&&h[y]!==null||!p(h[y],m[y],y,h,m,v))return!1}return!0}finally{v&&v.delete(m)}}function c(h,m,p,v){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of m.entries()){const y=h.get(g);if(p(y,b,g,h,m,v)===!1)return!1}return!0}function d(h,m,p,v){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<m.length;b++){const y=m[b];let C=!1;for(let N=0;N<h.length;N++){if(g.has(N))continue;const k=h[N];let S=!1;if(p(k,y,b,h,m,v)&&(S=!0),S){g.add(N),C=!0;break}}if(!C)return!1}return!0}function u(h,m,p,v){return m.size===0?!0:h instanceof Set?d([...h],[...m],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(Uk)),Uk}var DM;function H3(){return DM||(DM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pte();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(Bk)),Bk}var zk={},Hk={},Wk={},AM;function lU(){return AM||(AM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(Wk)),Wk}var Gk={},TM;function W3(){return TM||(TM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Gk)),Gk}var Yk={},IM;function G3(){return IM||(IM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",m="[object ArrayBuffer]",p="[object Object]",v="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",k="[object BigUint64Array]",S="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",A="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=A,e.float64ArrayTag=L,e.functionTag=h,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=C,e.uint32ArrayTag=N,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(Yk)),Yk}var Kk={},PM;function Ote(){return PM||(PM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Kk)),Kk}var OM;function cU(){return OM||(OM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lU(),r=W3(),n=G3(),s=oU(),i=Ote();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,m,p=new Map,v=void 0){const g=v?.(u,h,m,p);if(g!=null)return g;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,C]of u)b.set(y,l(C,y,m,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,m,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,m,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,m,p,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,m,p,v),b}return u}function c(u,h,m=u,p,v){const g=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],C=Object.getOwnPropertyDescriptor(u,y);(C==null||C.writable)&&(u[y]=l(h[y],y,m,p,v))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(Hk)),Hk}var MM;function Mte(){return MM||(MM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(zk)),zk}var RM;function Rte(){return RM||(RM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=Mte();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n}(Lk)),Lk}var Xk={},Qk={},Jk={},FM;function Fte(){return FM||(FM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU(),r=G3();function n(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!=null)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n}(Jk)),Jk}var LM;function Lte(){return LM||(LM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fte();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Qk)),Qk}var Zk={},e_={},BM;function dU(){return BM||(BM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(e_)),e_}var t_={},UM;function Bte(){return UM||(UM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W3();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(t_)),t_}var $M;function Ute(){return $M||($M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9(),r=dU(),n=Bte(),s=P3();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(Zk)),Zk}var VM;function $te(){return VM||(VM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=P9(),n=Lte(),s=O3(),i=Ute();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(Xk)),Xk}var qM;function Vte(){return qM||(qM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sU(),r=Ite(),n=Rte(),s=$te();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(Rk)),Rk}var zM;function qte(){return zM||(zM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ete(),r=sU(),n=Tte(),s=Vte();function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i}(Dk)),Dk}var r_,HM;function zte(){return HM||(HM=1,r_=qte().uniqBy),r_}var Hte=zte();const WM=Hu(Hte);function uU(e,t,r){return t===!0?WM(e,r):typeof t=="function"?WM(e,t):e}var n_={exports:{}},a_={},s_={exports:{}},i_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function Wte(){if(GM)return i_;GM=1;var e=Hv();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,m){var p=m(),v=n({inst:{value:p,getSnapshot:m}}),g=v[0].inst,b=v[1];return i(function(){g.value=p,g.getSnapshot=m,c(g)&&b({inst:g})},[h,p,m]),s(function(){return c(g)&&b({inst:g}),h(function(){c(g)&&b({inst:g})})},[h]),o(p),p}function c(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!r(h,p)}catch{return!0}}function d(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return i_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,i_}var YM;function Gte(){return YM||(YM=1,s_.exports=Wte()),s_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function Yte(){if(KM)return a_;KM=1;var e=Hv(),t=Gte();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return a_.useSyncExternalStoreWithSelector=function(d,u,h,m,p){var v=i(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=l(function(){function y(D){if(!C){if(C=!0,N=D,D=m(D),p!==void 0&&g.hasValue){var E=g.value;if(p(E,D))return k=E}return k=D}if(E=k,n(N,D))return E;var T=m(D);return p!==void 0&&p(E,T)?(N=D,E):(N=D,k=T)}var C=!1,N,k,S=h===void 0?null:h;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,h,m,p]);var b=s(d,v[0],v[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),c(b),b},a_}var XM;function Kte(){return XM||(XM=1,n_.exports=Yte()),n_.exports}var Xte=Kte(),Y3=w.createContext(null),Qte=e=>e,Yi=()=>{var e=w.useContext(Y3);return e?e.store.dispatch:Qte},CN=()=>{},Jte=()=>CN,Zte=(e,t)=>e===t;function Xr(e){var t=w.useContext(Y3);return Xte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Jte,t?t.store.getState:CN,t?t.store.getState:CN,t?e:CN,Zte)}function ere(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function tre(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rre(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var QM=e=>Array.isArray(e)?e:[e];function nre(e){const t=Array.isArray(e[0])?e[0]:e;return rre(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function are(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var sre=class{constructor(e){this.value=e}deref(){return this.value}},ire=typeof WeakRef<"u"?WeakRef:sre,ore=0,JM=1;function wj(){return{s:ore,v:void 0,o:null,p:null}}function hU(e,t={}){let r=wj();const{resultEqualityCheck:n}=t;let s,i=0;function o(){let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}else{let v=l.p;v===null&&(l.p=v=new Map);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}}const d=l;let u;if(l.s===JM)u=l.v;else if(u=e.apply(null,arguments),i++,n){const h=s?.deref?.()??s;h!=null&&n(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new ire(u):u}return d.s=JM,d.v=u,u}return o.clearCache=()=>{r=wj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function lre(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),ere(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:m=[],argsMemoize:p=hU,argsMemoizeOptions:v=[]}=u,g=QM(m),b=QM(v),y=nre(s),C=h(function(){return i++,d.apply(null,arguments)},...g),N=p(function(){o++;const S=are(y,arguments);return l=C.apply(null,S),l},...b);return Object.assign(N,{resultFunc:d,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Gt=lre(hU),cre=Object.assign((e,t=Gt)=>{tre(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>cre}),o_={},l_={},c_={},ZM;function dre(){return ZM||(ZM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(c_)),c_}var d_={},u_={},eR;function fU(){return eR||(eR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(u_)),u_}var tR;function ure(){return tR||(tR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s}(d_)),d_}var rR;function hre(){return rR||(rR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dre(),r=ure(),n=P3();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,v)=>{let g=p;for(let b=0;b<v.length&&g!=null;++b)g=g[v[b]];return g},u=(p,v)=>v==null||p==null?v:typeof p=="object"&&"key"in p?Object.hasOwn(v,p.key)?v[p.key]:d(v,p.path):typeof p=="function"?p(v):Array.isArray(p)?d(v,p):typeof v=="object"?v[p]:v,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return i.map(p=>({original:p,criteria:h.map(v=>u(v,p))})).slice().sort((p,v)=>{for(let g=0;g<h.length;g++){const b=t.compareValues(p.criteria[g],v.criteria[g],l[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s}(l_)),l_}var h_={},nR;function fre(){return nR||(nR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t}(h_)),h_}var f_={},aR;function mU(){return aR||(aR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dU(),r=q3(),n=iU(),s=z3();function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i}(f_)),f_}var sR;function mre(){return sR||(sR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hre(),r=fre(),n=mU();function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s}(o_)),o_}var m_,iR;function pre(){return iR||(iR=1,m_=mre().sortBy),m_}var xre=pre();const $w=Hu(xre);var pU=e=>e.legend.settings,vre=e=>e.legend.size,gre=e=>e.legend.payload,bre=Gt([gre,pU],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$w(n,r):n});function yre(){return Xr(bre)}var Sj=1;function xU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Sj||Math.abs(o.left-t.left)>Sj||Math.abs(o.top-t.top)>Sj||Math.abs(o.width-t.width)>Sj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Bi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jre=typeof Symbol=="function"&&Symbol.observable||"@@observable",oR=jre,p_=()=>Math.random().toString(36).substring(7).split("").join("."),Nre={INIT:`@@redux/INIT${p_()}`,REPLACE:`@@redux/REPLACE${p_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${p_()}`},QN=Nre;function K3(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vU(e,t,r){if(typeof e!="function")throw new Error(Bi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bi(1));return r(vU)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(Bi(3));return s}function h(b){if(typeof b!="function")throw new Error(Bi(4));if(c)throw new Error(Bi(5));let y=!0;d();const C=l++;return o.set(C,b),function(){if(y){if(c)throw new Error(Bi(6));y=!1,d(),o.delete(C),i=null}}}function m(b){if(!K3(b))throw new Error(Bi(7));if(typeof b.type>"u")throw new Error(Bi(8));if(typeof b.type!="string")throw new Error(Bi(17));if(c)throw new Error(Bi(9));try{c=!0,s=n(s,b)}finally{c=!1}return(i=o).forEach(C=>{C()}),b}function p(b){if(typeof b!="function")throw new Error(Bi(10));n=b,m({type:QN.REPLACE})}function v(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Bi(11));function C(){const k=y;k.next&&k.next(u())}return C(),{unsubscribe:b(C)}},[oR](){return this}}}return m({type:QN.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:p,[oR]:v}}function wre(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:QN.INIT})>"u")throw new Error(Bi(12));if(typeof r(void 0,{type:QN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bi(13))})}function gU(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{wre(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],m=r[h],p=o[h],v=m(p,l);if(typeof v>"u")throw l&&l.type,new Error(Bi(14));d[h]=v,c=c||v!==p}return c=c||n.length!==Object.keys(o).length,c?d:o}}function JN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Sre(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Bi(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=JN(...l)(s.dispatch),{...s,dispatch:i}}}function bU(e){return K3(e)&&"type"in e&&typeof e.type=="string"}var yU=Symbol.for("immer-nothing"),lR=Symbol.for("immer-draftable"),tc=Symbol.for("immer-state");function wd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sv=Object.getPrototypeOf;function bx(e){return!!e&&!!e[tc]}function tf(e){return e?jU(e)||Array.isArray(e)||!!e[lR]||!!e.constructor?.[lR]||qw(e)||zw(e):!1}var Cre=Object.prototype.constructor.toString();function jU(e){if(!e||typeof e!="object")return!1;const t=Sv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Cre}function ZN(e,t){Vw(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Vw(e){const t=e[tc];return t?t.type_:Array.isArray(e)?1:qw(e)?2:zw(e)?3:0}function D5(e,t){return Vw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NU(e,t,r){const n=Vw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function kre(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qw(e){return e instanceof Map}function zw(e){return e instanceof Set}function Op(e){return e.copy_||e.base_}function A5(e,t){if(qw(e))return new Map(e);if(zw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jU(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[tc];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Sv(e),n)}else{const n=Sv(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function X3(e,t=!1){return Hw(e)||bx(e)||!tf(e)||(Vw(e)>1&&(e.set=e.add=e.clear=e.delete=_re),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>X3(n,!0))),e}function _re(){wd(2)}function Hw(e){return Object.isFrozen(e)}var Ere={};function yx(e){const t=Ere[e];return t||wd(0,e),t}var Zb;function wU(){return Zb}function Dre(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cR(e,t){t&&(yx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T5(e){I5(e),e.drafts_.forEach(Are),e.drafts_=null}function I5(e){e===Zb&&(Zb=e.parent_)}function dR(e){return Zb=Dre(Zb,e)}function Are(e){const t=e[tc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[tc].modified_&&(T5(t),wd(4)),tf(e)&&(e=e2(t,e),t.parent_||t2(t,e)),t.patches_&&yx("Patches").generateReplacementPatches_(r[tc].base_,e,t.patches_,t.inversePatches_)):e=e2(t,r,[]),T5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yU?e:void 0}function e2(e,t,r){if(Hw(t))return t;const n=t[tc];if(!n)return ZN(t,(s,i)=>hR(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return t2(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),ZN(i,(l,c)=>hR(e,n,s,l,c,r,o)),t2(e,s,!1),r&&e.patches_&&yx("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function hR(e,t,r,n,s,i,o){if(bx(s)){const l=i&&t&&t.type_!==3&&!D5(t.assigned_,n)?i.concat(n):void 0,c=e2(e,s,l);if(NU(r,n,c),bx(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(tf(s)&&!Hw(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;e2(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&t2(e,s)}}function t2(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X3(t,r)}function Tre(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:wU(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Q3;r&&(s=[n],i=ey);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var Q3={get(e,t){if(t===tc)return e;const r=Op(e);if(!D5(r,t))return Ire(e,r,t);const n=r[t];return e.finalized_||!tf(n)?n:n===x_(e.base_,t)?(v_(e),e.copy_[t]=O5(n,e)):n},has(e,t){return t in Op(e)},ownKeys(e){return Reflect.ownKeys(Op(e))},set(e,t,r){const n=SU(Op(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=x_(Op(e),t),i=s?.[tc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(kre(r,s)&&(r!==void 0||D5(e.base_,t)))return!0;v_(e),P5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return x_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,v_(e),P5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Op(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){wd(11)},getPrototypeOf(e){return Sv(e.base_)},setPrototypeOf(){wd(12)}},ey={};ZN(Q3,(e,t)=>{ey[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ey.deleteProperty=function(e,t){return ey.set.call(this,e,t,void 0)};ey.set=function(e,t,r){return Q3.set.call(this,e[0],t,r,e[0])};function x_(e,t){const r=e[tc];return(r?Op(r):e)[t]}function Ire(e,t,r){const n=SU(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function SU(e,t){if(!(t in e))return;let r=Sv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Sv(r)}}function P5(e){e.modified_||(e.modified_=!0,e.parent_&&P5(e.parent_))}function v_(e){e.copy_||(e.copy_=A5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Pre=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&wd(6),n!==void 0&&typeof n!="function"&&wd(7);let s;if(tf(t)){const i=dR(this),o=O5(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?T5(i):I5(i)}return cR(i,n),uR(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===yU&&(s=void 0),this.autoFreeze_&&X3(s,!0),n){const i=[],o=[];yx("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else wd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){tf(e)||wd(8),bx(e)&&(e=Vh(e));const t=dR(this),r=O5(e,void 0);return r[tc].isManual_=!0,I5(t),r}finishDraft(e,t){const r=e&&e[tc];(!r||!r.isManual_)&&wd(9);const{scope_:n}=r;return cR(n,t),uR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=yx("Patches").applyPatches_;return bx(e)?n(e,t):this.produce(e,s=>n(s,t))}};function O5(e,t){const r=qw(e)?yx("MapSet").proxyMap_(e,t):zw(e)?yx("MapSet").proxySet_(e,t):Tre(e,t);return(t?t.scope_:wU()).drafts_.push(r),r}function Vh(e){return bx(e)||wd(10,e),CU(e)}function CU(e){if(!tf(e)||Hw(e))return e;const t=e[tc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=A5(e,t.scope_.immer_.useStrictShallowCopy_)}else r=A5(e,!0);return ZN(r,(n,s)=>{NU(r,n,CU(s))}),t&&(t.finalized_=!1),r}var rc=new Pre,kU=rc.produce;rc.produceWithPatches.bind(rc);rc.setAutoFreeze.bind(rc);rc.setUseStrictShallowCopy.bind(rc);rc.applyPatches.bind(rc);rc.createDraft.bind(rc);rc.finishDraft.bind(rc);function _U(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var Ore=_U(),Mre=_U,Rre=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?JN:JN.apply(null,arguments)};function Vc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Kl(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bU(n)&&n.type===e,r}var EU=class Eb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Eb.prototype)}static get[Symbol.species](){return Eb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Eb(...t[0].concat(this)):new Eb(...t.concat(this))}};function fR(e){return tf(e)?kU(e,()=>{}):e}function Cj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Fre(e){return typeof e=="boolean"}var Lre=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new EU;return r&&(Fre(r)?o.push(Ore):o.push(Mre(r.extraArgument))),o},Bre="RTK_autoBatch",mR=e=>t=>{setTimeout(t,e)},Ure=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mR(10):e.type==="callback"?e.queueNotification:mR(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),m=n.subscribe(h);return l.add(u),()=>{m(),l.delete(u)}},dispatch(u){try{return s=!u?.meta?.[Bre],i=!s,i&&(o||(o=!0,c(d))),n.dispatch(u)}finally{s=!0}}})},$re=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new EU(e);return n&&s.push(Ure(typeof n=="object"?n:void 0)),s};function Vre(e){const t=Lre(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(K3(r))l=gU(r);else throw new Error(Kl(1));let c;typeof n=="function"?c=n(t):c=t();let d=JN;s&&(d=Rre({trace:!1,...typeof s=="object"&&s}));const u=Sre(...c),h=$re(u);let m=typeof o=="function"?o(h):h();const p=d(...m);return vU(l,i,p)}function DU(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Kl(28));if(l in t)throw new Error(Kl(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function qre(e){return typeof e=="function"}function zre(e,t){let[r,n,s]=DU(t),i;if(qre(e))i=()=>fR(e());else{const l=fR(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(bx(u)){const p=h(u,c);return p===void 0?u:p}else{if(tf(u))return kU(u,m=>h(m,c));{const m=h(u,c);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},l)}return o.getInitialState=i,o}var Hre="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wre=(e=21)=>{let t="",r=e;for(;r--;)t+=Hre[Math.random()*64|0];return t},Gre=Symbol.for("rtk-slice-createasyncthunk");function Yre(e,t){return`${e}/${t}`}function Kre({creators:e}={}){const t=e?.asyncThunk?.[Gre];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(Kl(11));const o=(typeof n.reducers=="function"?n.reducers(Qre()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,k){const S=typeof N=="string"?N:N.type;if(!S)throw new Error(Kl(12));if(S in c.sliceCaseReducersByType)throw new Error(Kl(13));return c.sliceCaseReducersByType[S]=k,d},addMatcher(N,k){return c.sliceMatchers.push({matcher:N,reducer:k}),d},exposeAction(N,k){return c.actionCreators[N]=k,d},exposeCaseReducer(N,k){return c.sliceCaseReducersByName[N]=k,d}};l.forEach(N=>{const k=o[N],S={reducerName:N,type:Yre(s,N),createNotation:typeof n.reducers=="function"};Zre(k)?tne(S,k,d,t):Jre(S,k,d)});function u(){const[N={},k=[],S=void 0]=typeof n.extraReducers=="function"?DU(n.extraReducers):[n.extraReducers],D={...N,...c.sliceCaseReducersByType};return zre(n.initialState,E=>{for(let T in D)E.addCase(T,D[T]);for(let T of c.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of k)E.addMatcher(T.matcher,T.reducer);S&&E.addDefaultCase(S)})}const h=N=>N,m=new Map,p=new WeakMap;let v;function g(N,k){return v||(v=u()),v(N,k)}function b(){return v||(v=u()),v.getInitialState()}function y(N,k=!1){function S(E){let T=E[N];return typeof T>"u"&&k&&(T=Cj(p,S,b)),T}function D(E=h){const T=Cj(m,k,()=>new WeakMap);return Cj(T,E,()=>{const A={};for(const[L,P]of Object.entries(n.selectors??{}))A[L]=Xre(P,E,()=>Cj(p,E,b),k);return A})}return{reducerPath:N,getSelectors:D,get selectors(){return D(S)},selectSlice:S}}const C={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...y(i),injectInto(N,{reducerPath:k,...S}={}){const D=k??i;return N.inject({reducerPath:D,reducer:g},S),{...C,...y(D,!0)}}};return C}}function Xre(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var Wc=Kre();function Qre(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Jre({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!ene(n))throw new Error(Kl(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Vc(e,o):Vc(e))}function Zre(e){return e._reducerDefinitionType==="asyncThunk"}function ene(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tne({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Kl(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:o||kj,pending:l||kj,rejected:c||kj,settled:d||kj})}function kj(){}var rne="task",AU="listener",TU="completed",J3="cancelled",nne=`task-${J3}`,ane=`task-${TU}`,M5=`${AU}-${J3}`,sne=`${AU}-${TU}`,Ww=class{constructor(e){this.code=e,this.message=`${rne} ${J3} (reason: ${e})`}name="TaskAbortError";message},Z3=(e,t)=>{if(typeof e!="function")throw new TypeError(Kl(32))},r2=()=>{},IU=(e,t=r2)=>(e.catch(t),e),PU=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),nx=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ax=e=>{if(e.aborted){const{reason:t}=e;throw new Ww(t)}};function OU(e,t){let r=r2;return new Promise((n,s)=>{const i=()=>s(new Ww(e.reason));if(e.aborted){i();return}r=PU(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=r2})}var ine=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Ww?"cancelled":"rejected",error:r}}finally{t?.()}},n2=e=>t=>IU(OU(e,t).then(r=>(ax(e),r))),MU=e=>{const t=n2(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:rv}=Object,pR={},Gw="listenerMiddleware",one=(e,t)=>{const r=n=>PU(e,()=>nx(n,e.reason));return(n,s)=>{Z3(n);const i=new AbortController;r(i);const o=ine(async()=>{ax(e),ax(i.signal);const l=await n({pause:n2(i.signal),delay:MU(i.signal),signal:i.signal});return ax(i.signal),l},()=>nx(i,ane));return s?.autoJoin&&t.push(o.catch(r2)),{result:n2(e)(o),cancel(){nx(i,nne)}}}},lne=(e,t)=>{const r=async(n,s)=>{ax(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,m)=>{m.unsubscribe(),c([h,m.getState(),m.getOriginalState()])}});i=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await OU(t,Promise.race(l));return ax(t),c}finally{i()}};return(n,s)=>IU(r(n,s))},RU=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Vc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Kl(21));return Z3(i),{predicate:s,type:t,effect:i}},FU=rv(e=>{const{type:t,predicate:r,effect:n}=RU(e);return{id:Wre(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Kl(22))}}},{withTypes:()=>FU}),xR=(e,t)=>{const{type:r,effect:n,predicate:s}=RU(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},R5=e=>{e.pending.forEach(t=>{nx(t,M5)})},cne=e=>()=>{e.forEach(R5),e.clear()},vR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},LU=rv(Vc(`${Gw}/add`),{withTypes:()=>LU}),dne=Vc(`${Gw}/removeAll`),BU=rv(Vc(`${Gw}/remove`),{withTypes:()=>BU}),une=(...e)=>{console.error(`${Gw}/error`,...e)},Vy=(e={})=>{const t=new Map,{extra:r,onError:n=une}=e;Z3(n);const s=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&R5(u)}),i=u=>{const h=xR(t,u)??FU(u);return s(h)};rv(i,{withTypes:()=>i});const o=u=>{const h=xR(t,u);return h&&(h.unsubscribe(),u.cancelActive&&R5(h)),!!h};rv(o,{withTypes:()=>o});const l=async(u,h,m,p)=>{const v=new AbortController,g=lne(i,v.signal),b=[];try{u.pending.add(v),await Promise.resolve(u.effect(h,rv({},m,{getOriginalState:p,condition:(y,C)=>g(y,C).then(Boolean),take:g,delay:MU(v.signal),pause:n2(v.signal),extra:r,signal:v.signal,fork:one(v.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,C,N)=>{y!==v&&(nx(y,M5),N.delete(y))})},cancel:()=>{nx(v,M5),u.pending.delete(v)},throwIfCancelled:()=>{ax(v.signal)}})))}catch(y){y instanceof Ww||vR(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),nx(v,sne),u.pending.delete(v)}},c=cne(t);return{middleware:u=>h=>m=>{if(!bU(m))return h(m);if(LU.match(m))return i(m.payload);if(dne.match(m)){c();return}if(BU.match(m))return o(m.payload);let p=u.getState();const v=()=>{if(p===pR)throw new Error(Kl(23));return p};let g;try{if(g=h(m),t.size>0){const b=u.getState(),y=Array.from(t.values());for(const C of y){let N=!1;try{N=C.predicate(m,b,p)}catch(k){N=!1,vR(n,k,{raisedBy:"predicate"})}N&&l(C,m,u,v)}}}finally{p=pR}return g},startListening:i,stopListening:o,clearListeners:c}};function Kl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hne={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},UU=Wc({name:"chartLayout",initialState:hne,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:fne,setLayout:mne,setChartSize:pne,setScale:xne}=UU.actions,vne=UU.reducer;function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(n){gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gne(e,t,r){return(t=bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bne(e){var t=yne(e,"string");return typeof t=="symbol"?t:t+""}function yne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a2=Math.PI/180,jne=e=>e*180/Math.PI,Gi=(e,t,r,n)=>({x:e+Math.cos(-a2*n)*r,y:t+Math.sin(-a2*n)*r}),Nne=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wne=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Sne=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=wne({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:jne(c),angleInRadian:c}},Cne=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},kne=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},_ne=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=Sne({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=Cne(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?bR(bR({},t),{},{radius:s,angle:kne(u,t)}):null};function yR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(r),!0).forEach(function(n){Ene(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ene(e,t,r){return(t=Dne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dne(e){var t=Ane(e,"string");return typeof t=="symbol"?t:t+""}function Ane(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xl(e,t,r){return Zs(e)||Zs(t)?r:$u(t)?gx(e,t,r):typeof t=="function"?t(e):r}var Tne=(e,t,r,n,s)=>{var i,o=-1,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(Lc(u-d)!==Lc(h-u)){var p=[];if(Lc(h-u)===Lc(s[1]-s[0])){m=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+d)/2),p[1]=Math.max(v,(v+d)/2)}else{m=d;var g=h+s[1]-s[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),C=Math.max(d,h);if(e>(y+u)/2&&e<=(C+u)/2){({index:o}=r[c]);break}}}else if(t){for(var N=0;N<l;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:o}=t[N]);break}}return o},Ine=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Tr(e[i]))return Oc(Oc({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Tr(e[o]))return Oc(Oc({},e),{},{[o]:e[o]+(s||0)})}return e},lf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",$U=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},VU=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:m,axisType:p}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(g=p==="angleAxis"&&i&&i.length>=2?Lc(i[0]-i[1])*2*g:g,h||m){var b=(h||m||[]).map((y,C)=>{var N=n?n.indexOf(y):y;return{coordinate:o(N)+g,value:y,offset:g,index:C}});return b.filter(y=>!ec(y.coordinate))}return c&&d?d.map((y,C)=>({coordinate:o(y)+g,value:y,index:C,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,C)=>({coordinate:o(y)+g,value:y,offset:g,index:C})):o.domain().map((y,C)=>({coordinate:o(y)+g,value:n?n[y]:y,index:C,offset:g}))},jR=1e-4,Pne=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-jR,i=Math.max(n[0],n[1])+jR,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},One=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=ec(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},Mne=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=ec(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Rne={sign:One,expand:hte,none:wv,silhouette:fte,wiggle:mte,positive:Mne},Fne=(e,t,r)=>{var n=Rne[r],s=ute().keys(t).value((i,o)=>+Xl(i,o,0)).order(k5).offset(n);return s(e)};function qU(e){return e==null?void 0:String(e)}function NR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Zs(s[t.dataKey])){var l=M9(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Xl(s,Zs(o)?t.dataKey:o);return Zs(c)?null:t.scale(c)}var Lne=e=>{var t=e.flat(2).filter(Tr);return[Math.min(...t),Math.max(...t)]},Bne=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Une=(e,t,r)=>{if(e!=null)return Bne(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Lne(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},wR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F5=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=$w(t,u=>u.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function CR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Oc(Oc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function zU(e,t){if(e)return String(e);if(typeof t=="string")return t}function $ne(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?_ne({x:e,y:t},n):null}var Vne=(e,t,r,n)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Oc(Oc(Oc({},n),Gi(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Oc(Oc(Oc({},n),Gi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},qne=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,cf=e=>e.layout.width,df=e=>e.layout.height,zne=e=>e.layout.scale,HU=e=>e.layout.margin,eA=Gt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),tA=Gt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Hne="data-recharts-item-index",Wne="data-recharts-item-data-key",Yw=60;function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(n){Gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gne(e,t,r){return(t=Yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yne(e){var t=Kne(e,"string");return typeof t=="symbol"?t:t+""}function Kne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xne=e=>e.brush.height,Ki=Gt([cf,df,HU,Xne,eA,tA,pU,vre],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((v,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:Yw;return fm(fm({},v),{},{[b]:v[b]+y})}return v},{left:r.left||0,right:r.right||0}),d=s.reduce((v,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?fm(fm({},v),{},{[b]:gx(v,"".concat(b))+g.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=fm(fm({},d),c),h=u.bottom;u.bottom+=n,u=Ine(u,o,l);var m=e-u.left-u.right,p=t-u.top-u.bottom;return fm(fm({brushBottom:h},u),{},{width:Math.max(m,0),height:Math.max(p,0)})}),Qne=Gt(Ki,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),WU=Gt(cf,df,(e,t)=>({x:0,y:0,width:e,height:t})),Jne=w.createContext(null),Gc=()=>w.useContext(Jne)!=null,Kw=e=>e.brush,Xw=Gt([Kw,Ki,HU],(e,t,r)=>({height:e.height,x:Tr(e.x)?e.x:t.left,y:Tr(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Tr(e.width)?e.width:t.width})),rA=()=>{var e,t=Gc(),r=Xr(Qne),n=Xr(Xw),s=(e=Xr(Kw))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Zne={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},GU=()=>{var e;return(e=Xr(Ki))!==null&&e!==void 0?e:Zne},nA=()=>Xr(cf),aA=()=>Xr(df),eae={top:0,right:0,bottom:0,left:0},tae=()=>{var e;return(e=Xr(t=>t.layout.margin))!==null&&e!==void 0?e:eae},Za=e=>e.layout.layoutType,sA=()=>Xr(Za),rae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YU=Wc({name:"legend",initialState:rae,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Vh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:_R,setLegendSettings:nae,addLegendPayload:aae,removeLegendPayload:sae}=YU.actions,iae=YU.reducer,oae=["contextPayload"];function L5(){return L5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L5.apply(null,arguments)}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(n){iA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iA(e,t,r){return(t=lae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lae(e){var t=cae(e,"string");return typeof t=="symbol"?t:t+""}function cae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dae(e,t){if(e==null)return{};var r,n,s=uae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hae(e){return e.value}function fae(e){var{contextPayload:t}=e,r=dae(e,oae),n=uU(t,e.payloadUniqBy,hae),s=Cv(Cv({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,s):typeof e.content=="function"?w.createElement(e.content,s):w.createElement(V3,s)}function mae(e,t,r,n,s,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Cv(Cv({},d),u)}function pae(e){var t=Yi();return w.useEffect(()=>{t(nae(e))},[t,e]),null}function xae(e){var t=Yi();return w.useEffect(()=>(t(_R(e)),()=>{t(_R({width:0,height:0}))}),[t,e]),null}function vae(e){var t=yre(),r=Mee(),n=tae(),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=xU([t]),u=nA(),h=aA(),m=u-(n.left||0)-(n.right||0),p=Qw.getWidthOrHeight(e.layout,i,s,m),v=l?o:Cv(Cv({position:"absolute",width:p?.width||s||"auto",height:p?.height||i||"auto"},mae(o,e,n,u,h,c)),o),g=l??r;if(g==null)return null;var b=w.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:d},w.createElement(pae,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(xae,{width:c.width,height:c.height}),w.createElement(fae,L5({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return Ly.createPortal(b,g)}class Qw extends w.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Tr(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return w.createElement(vae,this.props)}}iA(Qw,"displayName","Legend");iA(Qw,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function B5(){return B5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B5.apply(null,arguments)}function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gae(e,t,r){return(t=bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jae(e){return Array.isArray(e)&&$u(e[0])&&$u(e[1])?e.join(" ~ "):e}var Nae=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:m=!1}=e,p=()=>{if(i&&i.length){var S={padding:0,margin:0},D=(l?$w(i,l):i).map((E,T)=>{if(E.type==="none")return null;var A=E.formatter||o||jae,{value:L,name:P}=E,O=L,Q=P;if(A){var z=A(L,P,E,T,i);if(Array.isArray(z))[O,Q]=z;else if(z!=null)O=z;else return null}var re=g_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:re},$u(Q)?w.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,$u(Q)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},O),w.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:S},D)}return null},v=g_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=g_({margin:0},s),b=!Zs(u),y=b?u:"",C=vn("recharts-default-tooltip",c),N=vn("recharts-tooltip-label",d);b&&h&&i!==void 0&&i!==null&&(y=h(u,i));var k=m?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",B5({className:C,style:v},k),w.createElement("p",{className:N,style:g},w.isValidElement(y)?y:"".concat(y)),p())},ib="recharts-tooltip-wrapper",wae={visibility:"hidden"};function Sae(e){var{coordinate:t,translateX:r,translateY:n}=e;return vn(ib,{["".concat(ib,"-right")]:Tr(r)&&t&&Tr(t.x)&&r>=t.x,["".concat(ib,"-left")]:Tr(r)&&t&&Tr(t.x)&&r<t.x,["".concat(ib,"-bottom")]:Tr(n)&&t&&Tr(t.y)&&n>=t.y,["".concat(ib,"-top")]:Tr(n)&&t&&Tr(t.y)&&n<t.y})}function AR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Tr(i[n]))return i[n];var u=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var m=c[n];if(m==null)return 0;if(o[n]){var p=u,v=m;return p<v?Math.max(h,m):Math.max(u,m)}if(d==null)return 0;var g=h+l,b=m+d;return g>b?Math.max(u,m):Math.max(h,m)}function Cae(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kae(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=AR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=AR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Cae({translateX:u,translateY:h,useTranslate3d:l})):d=wae,{cssProperties:d,cssClasses:Sae({translateX:u,translateY:h,coordinate:r})}}function TR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(r),!0).forEach(function(n){U5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U5(e,t,r){return(t=_ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ae(e){var t=Eae(e,"string");return typeof t=="symbol"?t:t+""}function Eae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dae extends w.PureComponent{constructor(){super(...arguments),U5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),U5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:m,viewBox:p,wrapperStyle:v,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:C,cssProperties:N}=kae({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:m,viewBox:p}),k=y?{}:_j(_j({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),S=_j(_j({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:S,ref:b},i)}}var Aae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),qy={isSsr:Aae()},KU=()=>Xr(e=>e.rootProps.accessibilityLayer);function Uo(e){return Number.isFinite(e)}function s2(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $5(){return $5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$5.apply(null,arguments)}function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){Tae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tae(e,t,r){return(t=Iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iae(e){var t=Pae(e,"string");return typeof t=="symbol"?t:t+""}function Pae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OR={curveBasisClosed:ete,curveBasisOpen:tte,curveBasis:Zee,curveBumpX:Bee,curveBumpY:Uee,curveLinearClosed:rte,curveLinear:Bw,curveMonotoneX:nte,curveMonotoneY:ate,curveNatural:ste,curveStep:ite,curveStepAfter:lte,curveStepBefore:ote},Ej=e=>Uo(e.x)&&Uo(e.y),ob=e=>e.x,lb=e=>e.y,Oae=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($y(e));return(r==="curveMonotone"||r==="curveBump")&&t?OR["".concat(r).concat(t==="vertical"?"Y":"X")]:OR[r]||Bw},Mae=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=Oae(t,s),l=i?r.filter(Ej):r,c;if(Array.isArray(n)){var d=i?n.filter(h=>Ej(h)):n,u=l.map((h,m)=>PR(PR({},h),{},{base:d[m]}));return s==="vertical"?c=Nj().y(lb).x1(ob).x0(h=>h.base.x):c=Nj().x(ob).y1(lb).y0(h=>h.base.y),c.defined(Ej).curve(o),c(u)}return s==="vertical"&&Tr(n)?c=Nj().y(lb).x1(ob).x0(n):Tr(n)?c=Nj().x(ob).y1(lb).y0(n):c=W9().x(ob).y(lb),c.defined(Ej).curve(o),c(l)},kN=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Mae(e):n;return w.createElement("path",$5({},Aa(e,!1),R3(e),{className:vn("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Rae=["x","y","top","left","width","height","className"];function V5(){return V5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V5.apply(null,arguments)}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){Lae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lae(e,t,r){return(t=Bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bae(e){var t=Uae(e,"string");return typeof t=="symbol"?t:t+""}function Uae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ae(e,t){if(e==null)return{};var r,n,s=Vae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Vae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qae=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),zae=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=$ae(e,Rae),d=Fae({x:t,y:r,top:n,left:s,width:i,height:o},c);return!Tr(t)||!Tr(r)||!Tr(i)||!Tr(o)||!Tr(n)||!Tr(s)?null:w.createElement("path",V5({},Aa(d,!0),{className:vn("recharts-cross",l),d:qae(t,r,i,o,n,s)}))};function Hae(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){Gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t,r){return(t=Yae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qv(e,t){var r=Wae({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var b_={},y_={},j_={},FR;function Xae(){return FR||(FR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(j_)),j_}var LR;function Qae(){return LR||(LR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xae(),r=lU(),n=W3(),s=G3(),i=z3();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,m,p,v,g){const b=g(d,u,h,m,p,v);if(b!==void 0)return b;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,v,g)}return c(d,u,v,g)}function c(d,u,h,m){if(Object.is(d,u))return!0;let p=n.getTag(d),v=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return d.toString()===u.toString();case s.numberTag:{const y=d.valueOf(),C=u.valueOf();return i.eq(y,C)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),u.valueOf());case s.regexpTag:return d.source===u.source&&d.flags===u.flags;case s.functionTag:return d===u}h=h??new Map;const g=h.get(d),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(d,u),h.set(u,d);try{switch(p){case s.mapTag:{if(d.size!==u.size)return!1;for(const[y,C]of d.entries())if(!u.has(y)||!l(C,u.get(y),y,d,u,h,m))return!1;return!0}case s.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),C=Array.from(u.values());for(let N=0;N<y.length;N++){const k=y[N],S=C.findIndex(D=>l(k,D,void 0,d,u,h,m));if(S===-1)return!1;C.splice(S,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,m))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.errorTag:return d.name===u.name&&d.message===u.message;case s.objectTag:{if(!(c(d.constructor,u.constructor,h,m)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const C=[...Object.keys(d),...r.getSymbols(d)],N=[...Object.keys(u),...r.getSymbols(u)];if(C.length!==N.length)return!1;for(let k=0;k<C.length;k++){const S=C[k],D=d[S];if(!Object.hasOwn(u,S))return!1;const E=u[S];if(!l(D,E,S,d,u,h,m))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(y_)),y_}var N_={},BR;function Jae(){return BR||(BR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(N_)),N_}var UR;function Zae(){return UR||(UR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qae(),r=Jae();function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n}(b_)),b_}var w_,$R;function ese(){return $R||($R=1,w_=Zae().isEqual),w_}var tse=ese();const rse=Hu(tse);function nse(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var i2=1e-4,XU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],QU=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VR=(e,t)=>r=>{var n=XU(e,t);return QU(n,r)},ase=(e,t)=>r=>{var n=XU(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return QU(s,r)},qR=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([t,n,r,s]=o);var d=VR(t,r),u=VR(n,s),h=ase(t,r),m=v=>v>1?1:v<0?0:v,p=v=>{for(var g=v>1?1:v,b=g,y=0;y<8;++y){var C=d(b)-g,N=h(b);if(Math.abs(C-g)<i2||N<i2)return u(b);b=m(b-C/N)}return u(b)};return p.isStepper=!1,p},sse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*n,h=c+(d-u)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<i2&&Math.abs(h)<i2?[l,0]:[m,h]};return i.isStepper=!0,i.dt=s,i},ise=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qR(e);case"spring":return sse();default:if(e.split("(")[0]==="cubic-bezier")return qR(e)}return typeof e=="function"?e:null};function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){ose(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ose(e,t,r){return(t=lse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lse(e){var t=cse(e,"string");return typeof t=="symbol"?t:t+""}function cse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dse=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),use=(e,t,r)=>e.map(n=>"".concat(dse(n)," ").concat(t,"ms ").concat(r)).join(","),hse=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ty=(e,t)=>Object.keys(t).reduce((r,n)=>HR(HR({},r),{},{[n]:e(n,t[n])}),{});function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){fse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=pse(e,"string");return typeof t=="symbol"?t:t+""}function pse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o2=(e,t,r)=>e+(t-e)*r,q5=e=>{var{from:t,to:r}=e;return t!==r},JU=(e,t,r)=>{var n=ty((s,i)=>{if(q5(i)){var[o,l]=e(i.from,i.to,i.velocity);return $i($i({},i),{},{from:o,velocity:l})}return i},t);return r<1?ty((s,i)=>q5(i)?$i($i({},i),{},{velocity:o2(i.velocity,n[s].velocity,r),from:o2(i.from,n[s].from,r)}):i,t):JU(e,n,r-1)};function xse(e,t,r,n,s,i){var o,l=n.reduce((m,p)=>$i($i({},m),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>ty((m,p)=>p.from,l),d=()=>!Object.values(l).filter(q5).length,u=null,h=m=>{o||(o=m);var p=m-o,v=p/r.dt;l=JU(r,l,v),s($i($i($i({},e),t),c())),o=m,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function vse(e,t,r,n,s,i,o){var l=null,c=s.reduce((h,m)=>$i($i({},h),{},{[m]:[e[m],t[m]]}),{}),d,u=h=>{d||(d=h);var m=(h-d)/n,p=ty((g,b)=>o2(...b,r(m)),c);if(i($i($i($i({},e),t),p)),m<1)l=o.setTimeout(u);else{var v=ty((g,b)=>o2(...b,r(1)),c);i($i($i($i({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{l()})}const gse=(e,t,r,n,s,i)=>{var o=hse(e,t);return r.isStepper===!0?xse(e,t,r,o,s,i):vse(e,t,r,n,o,s,i)};class bse{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var yse=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function z5(){return z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z5.apply(null,arguments)}function jse(e,t){if(e==null)return{};var r,n,s=Nse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Nse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){Wp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wp(e,t,r){return(t=wse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wse(e){var t=Sse(e,"string");return typeof t=="symbol"?t:t+""}function Sse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cse(){return nse(new bse)}class oA extends w.PureComponent{constructor(t,r){super(t,r),Wp(this,"mounted",!1),Wp(this,"manager",null),Wp(this,"stopJSAnimation",null),Wp(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var d={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(d);return}if(!(rse(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:h}:h};(s&&c[s]!==h||!s&&c!==h)&&this.setState(m)}this.runAnimation(mm(mm({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=gse(r,n,ise(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=use(Object.keys(u),n,o);this.manager.start([l,r,mm(mm({},u),{},{transition:h}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:m,onAnimationReStart:p,animationManager:v}=t,g=jse(t,yse),b=w.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var C=N=>{var{style:k={},className:S}=N.props,D=w.cloneElement(N,mm(mm({},g),{},{style:mm(mm({},k),y),className:S}));return D};return b===1?C(w.Children.only(r)):w.createElement("div",null,w.Children.map(r,N=>C(N)))}}Wp(oA,"displayName","Animate");Wp(oA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var kse=w.createContext(null);function H5(e){var t,r,n=w.useContext(kse);return w.createElement(oA,z5({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:Cse()}))}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l2.apply(null,arguments)}var YR=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,m=4;h<m;h++)u[h]=s[h]>i?i:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,`
            L `).concat(e+l*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},_se={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ese=e=>{var t=Qv(e,_se),r=w.useRef(null),[n,s]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var b=vn("recharts-rectangle",u);return g?w.createElement(H5,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:h,isActive:g},y=>{var{width:C,height:N,x:k,y:S}=y;return w.createElement(H5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:v,easing:h},w.createElement("path",l2({},Aa(t,!0),{className:b,d:YR(k,S,C,N,d),ref:r})))}):w.createElement("path",l2({},Aa(t,!0),{className:b,d:YR(i,o,l,c,d)}))};function ZU(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=Gi(t,r,n,s),l=Gi(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W5.apply(null,arguments)}var Dse=(e,t)=>{var r=Lc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Dj=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/a2,h=c?s:s+i*u,m=Gi(t,r,d,h),p=Gi(t,r,n,h),v=c?s-i*u:s,g=Gi(t,r,d*Math.cos(u*a2),v);return{center:m,circleTangency:p,lineTangency:g,theta:u}},e$=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=Dse(i,o),c=i+l,d=Gi(t,r,s,i),u=Gi(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var m=Gi(t,r,n,i),p=Gi(t,r,n,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},Ase=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=Lc(d-c),{circleTangency:h,lineTangency:m,theta:p}=Dj({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:g,theta:b}=Dj({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):e$({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:d});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:k,theta:S}=Dj({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:D,lineTangency:E,theta:T}=Dj({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=l?Math.abs(c-d):Math.abs(c-d)-S-T;if(A<0&&i===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},Tse={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ise=e=>{var t=Qv(e,Tse),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var m=vn("recharts-sector",h),p=i-s,v=Fm(o,p,0,!0),g;return v>0&&Math.abs(d-u)<360?g=Ase({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=e$({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),w.createElement("path",W5({},Aa(t,!0),{className:m,d:g}))};function Pse(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,m=Gi(l,c,d,h),p=Gi(l,c,u,h);n=m.x,s=m.y,i=p.x,o=p.y}else return ZU(t);return[{x:n,y:s},{x:i,y:o}]}var S_={},C_={},k_={},KR;function Ose(){return KR||(KR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(k_)),k_}var XR;function Mse(){return XR||(XR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ose();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(C_)),C_}var QR;function Rse(){return QR||(QR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mU(),r=Mse();function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=n}(S_)),S_}var __,JR;function Fse(){return JR||(JR=1,__=Rse().range),__}var Lse=Fse();const t$=Hu(Lse);function Am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lA(e){let t,r,n;e.length!==2?(t=Am,r=(l,c)=>Am(e(l),c),n=(l,c)=>e(l)-c):(t=e===Am||e===Bse?e:Use,r=e,n=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Use(){return 0}function r$(e){return e===null?NaN:+e}function*$se(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Vse=lA(Am),zy=Vse.right;lA(r$).center;class ZR extends Map{constructor(t,r=Hse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(eF(this,t))}has(t){return super.has(eF(this,t))}set(t,r){return super.set(qse(this,t),r)}delete(t){return super.delete(zse(this,t))}}function eF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qse({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function zse({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Hse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wse(e=Am){if(e===Am)return n$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function n$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Gse=Math.sqrt(50),Yse=Math.sqrt(10),Kse=Math.sqrt(2);function c2(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Gse?10:i>=Yse?5:i>=Kse?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?c2(e,t,r*2):[l,c,d]}function G5(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?c2(t,e,r):c2(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function Y5(e,t,r){return t=+t,e=+e,r=+r,c2(e,t,r)[2]}function K5(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Y5(t,e,r):Y5(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function tF(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rF(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function a$(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?n$:Wse(s);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+m)),v=Math.min(n,Math.floor(t+(c-d)*h/c+m));a$(e,t,p,v,s)}const i=e[t];let o=r,l=n;for(cb(e,r,t),s(e[n],i)>0&&cb(e,r,n);o<l;){for(cb(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?cb(e,r,l):(++l,cb(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Xse(e,t,r){if(e=Float64Array.from($se(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return rF(e);if(t>=1)return tF(e);var n,s=(n-1)*t,i=Math.floor(s),o=tF(a$(e,i).subarray(0,i+1)),l=rF(e.subarray(i+1));return o+(l-o)*(s-i)}}function Qse(e,t,r=r$){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Jse(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Yc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const X5=Symbol("implicit");function cA(){var e=new ZR,t=[],r=[],n=X5;function s(i){let o=e.get(i);if(o===void 0){if(n!==X5)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return cA(t,r).unknown(n)},Yc.apply(s,arguments),s}function dA(){var e=cA().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var m=t().length,p=s<n,v=p?s:n,g=p?n:s;i=(g-v)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(m-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=Jse(m).map(function(y){return v+i*y});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,h()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},e.copy=function(){return dA(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Yc.apply(h(),arguments)}function s$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return s$(t())},e}function Zse(){return s$(dA.apply(null,arguments).paddingInner(1))}function uA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function i$(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Hy(){}var ry=.7,d2=1/ry,nv="\\s*([+-]?\\d+)\\s*",ny="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eie=/^#([0-9a-f]{3,8})$/,tie=new RegExp(`^rgb\\(${nv},${nv},${nv}\\)$`),rie=new RegExp(`^rgb\\(${Ou},${Ou},${Ou}\\)$`),nie=new RegExp(`^rgba\\(${nv},${nv},${nv},${ny}\\)$`),aie=new RegExp(`^rgba\\(${Ou},${Ou},${Ou},${ny}\\)$`),sie=new RegExp(`^hsl\\(${ny},${Ou},${Ou}\\)$`),iie=new RegExp(`^hsla\\(${ny},${Ou},${Ou},${ny}\\)$`),nF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uA(Hy,ay,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aF,formatHex:aF,formatHex8:oie,formatHsl:lie,formatRgb:sF,toString:sF});function aF(){return this.rgb().formatHex()}function oie(){return this.rgb().formatHex8()}function lie(){return o$(this).formatHsl()}function sF(){return this.rgb().formatRgb()}function ay(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iF(t):r===3?new al(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Aj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Aj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tie.exec(e))?new al(t[1],t[2],t[3],1):(t=rie.exec(e))?new al(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nie.exec(e))?Aj(t[1],t[2],t[3],t[4]):(t=aie.exec(e))?Aj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sie.exec(e))?cF(t[1],t[2]/100,t[3]/100,1):(t=iie.exec(e))?cF(t[1],t[2]/100,t[3]/100,t[4]):nF.hasOwnProperty(e)?iF(nF[e]):e==="transparent"?new al(NaN,NaN,NaN,0):null}function iF(e){return new al(e>>16&255,e>>8&255,e&255,1)}function Aj(e,t,r,n){return n<=0&&(e=t=r=NaN),new al(e,t,r,n)}function cie(e){return e instanceof Hy||(e=ay(e)),e?(e=e.rgb(),new al(e.r,e.g,e.b,e.opacity)):new al}function Q5(e,t,r,n){return arguments.length===1?cie(e):new al(e,t,r,n??1)}function al(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}uA(al,Q5,i$(Hy,{brighter(e){return e=e==null?d2:Math.pow(d2,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new al(sx(this.r),sx(this.g),sx(this.b),u2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oF,formatHex:oF,formatHex8:die,formatRgb:lF,toString:lF}));function oF(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}`}function die(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}${Gp((isNaN(this.opacity)?1:this.opacity)*255)}`}function lF(){const e=u2(this.opacity);return`${e===1?"rgb(":"rgba("}${sx(this.r)}, ${sx(this.g)}, ${sx(this.b)}${e===1?")":`, ${e})`}`}function u2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gp(e){return e=sx(e),(e<16?"0":"")+e.toString(16)}function cF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Sd(e,t,r,n)}function o$(e){if(e instanceof Sd)return new Sd(e.h,e.s,e.l,e.opacity);if(e instanceof Hy||(e=ay(e)),!e)return new Sd;if(e instanceof Sd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Sd(o,l,c,e.opacity)}function uie(e,t,r,n){return arguments.length===1?o$(e):new Sd(e,t,r,n??1)}function Sd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}uA(Sd,uie,i$(Hy,{brighter(e){return e=e==null?d2:Math.pow(d2,e),new Sd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new Sd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new al(E_(e>=240?e-240:e+120,s,n),E_(e,s,n),E_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Sd(dF(this.h),Tj(this.s),Tj(this.l),u2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=u2(this.opacity);return`${e===1?"hsl(":"hsla("}${dF(this.h)}, ${Tj(this.s)*100}%, ${Tj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dF(e){return e=(e||0)%360,e<0?e+360:e}function Tj(e){return Math.max(0,Math.min(1,e||0))}function E_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hA=e=>()=>e;function hie(e,t){return function(r){return e+r*t}}function fie(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function mie(e){return(e=+e)==1?l$:function(t,r){return r-t?fie(t,r,e):hA(isNaN(t)?r:t)}}function l$(e,t){var r=t-e;return r?hie(e,r):hA(isNaN(e)?t:e)}const uF=function e(t){var r=mie(t);function n(s,i){var o=r((s=Q5(s)).r,(i=Q5(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=l$(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function pie(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function xie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vie(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Jv(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function gie(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function h2(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bie(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Jv(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var J5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D_=new RegExp(J5.source,"g");function yie(e){return function(){return e}}function jie(e){return function(t){return e(t)+""}}function Nie(e,t){var r=J5.lastIndex=D_.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=J5.exec(e))&&(s=D_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:h2(n,s)})),r=D_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jie(c[0].x):yie(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Jv(e,t){var r=typeof t,n;return t==null||r==="boolean"?hA(t):(r==="number"?h2:r==="string"?(n=ay(t))?(t=n,uF):Nie:t instanceof ay?uF:t instanceof Date?gie:xie(t)?pie:Array.isArray(t)?vie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bie:h2)(e,t)}function fA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function wie(e,t){t===void 0&&(t=e,e=Jv);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Sie(e){return function(){return e}}function f2(e){return+e}var hF=[0,1];function Fo(e){return e}function Z5(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Sie(isNaN(t)?NaN:.5)}function Cie(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function kie(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Z5(s,n),i=r(o,i)):(n=Z5(n,s),i=r(i,o)),function(l){return i(n(l))}}function _ie(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Z5(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=zy(e,l,1,n)-1;return i[c](s[c](l))}}function Wy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jw(){var e=hF,t=hF,r=Jv,n,s,i,o=Fo,l,c,d;function u(){var m=Math.min(e.length,t.length);return o!==Fo&&(o=Cie(e[0],e[m-1])),l=m>2?_ie:kie,c=d=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return h.invert=function(m){return o(s((d||(d=l(t,e.map(n),h2)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,f2),u()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),r=fA,u()},h.clamp=function(m){return arguments.length?(o=m?!0:Fo,u()):o!==Fo},h.interpolate=function(m){return arguments.length?(r=m,u()):r},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,p){return n=m,s=p,u()}}function mA(){return Jw()(Fo,Fo)}function Eie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function m2(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function kv(e){return e=m2(Math.abs(e)),e?e[1]:NaN}function Die(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Aie(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sy(e){if(!(t=Tie.exec(e)))throw new Error("invalid format: "+e);var t;return new pA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sy.prototype=pA.prototype;function pA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iie(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var c$;function Pie(e,t){var r=m2(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(c$=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+m2(e,Math.max(0,t+i-1))[0]}function fF(e,t){var r=m2(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const mF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fF(e*100,t),r:fF,s:Pie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pF(e){return e}var xF=Array.prototype.map,vF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Oie(e){var t=e.grouping===void 0||e.thousands===void 0?pF:Die(xF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?pF:Aie(xF.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=sy(h);var m=h.fill,p=h.align,v=h.sign,g=h.symbol,b=h.zero,y=h.width,C=h.comma,N=h.precision,k=h.trim,S=h.type;S==="n"?(C=!0,S="g"):mF[S]||(N===void 0&&(N=12),k=!0,S="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=g==="$"?n:/[%p]/.test(S)?o:"",T=mF[S],A=/[defgprs%]/.test(S);N=N===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function L(P){var O=D,Q=E,z,re,U;if(S==="c")Q=T(P)+Q,P="";else{P=+P;var X=P<0||1/P<0;if(P=isNaN(P)?c:T(Math.abs(P),N),k&&(P=Iie(P)),X&&+P==0&&v!=="+"&&(X=!1),O=(X?v==="("?v:l:v==="-"||v==="("?"":v)+O,Q=(S==="s"?vF[8+c$/3]:"")+Q+(X&&v==="("?")":""),A){for(z=-1,re=P.length;++z<re;)if(U=P.charCodeAt(z),48>U||U>57){Q=(U===46?s+P.slice(z+1):P.slice(z))+Q,P=P.slice(0,z);break}}}C&&!b&&(P=t(P,1/0));var B=O.length+P.length+Q.length,Y=B<y?new Array(y-B+1).join(m):"";switch(C&&b&&(P=t(Y+P,Y.length?y-Q.length:1/0),Y=""),p){case"<":P=O+P+Q+Y;break;case"=":P=O+Y+P+Q;break;case"^":P=Y.slice(0,B=Y.length>>1)+O+P+Q+Y.slice(B);break;default:P=Y+O+P+Q;break}return i(P)}return L.toString=function(){return h+""},L}function u(h,m){var p=d((h=sy(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(kv(m)/3)))*3,g=Math.pow(10,-v),b=vF[8+v/3];return function(y){return p(g*y)+b}}return{format:d,formatPrefix:u}}var Ij,xA,d$;Mie({thousands:",",grouping:[3],currency:["$",""]});function Mie(e){return Ij=Oie(e),xA=Ij.format,d$=Ij.formatPrefix,Ij}function Rie(e){return Math.max(0,-kv(Math.abs(e)))}function Fie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kv(t)/3)))*3-kv(Math.abs(e)))}function Lie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kv(t)-kv(e))+1}function u$(e,t,r,n){var s=K5(e,t,r),i;switch(n=sy(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Fie(s,o))&&(n.precision=i),d$(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Lie(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Rie(s))&&(n.precision=i-(n.type==="%")*2);break}}return xA(n)}function Km(e){var t=e.domain;return e.ticks=function(r){var n=t();return G5(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return u$(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=Y5(o,l,r),d===c)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function h$(){var e=mA();return e.copy=function(){return Wy(e,h$())},Yc.apply(e,arguments),Km(e)}function f$(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,f2),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return f$(e).unknown(t)},e=arguments.length?Array.from(e,f2):[0,1],Km(r)}function m$(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function gF(e){return Math.log(e)}function bF(e){return Math.exp(e)}function Bie(e){return-Math.log(-e)}function Uie(e){return-Math.exp(-e)}function $ie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vie(e){return e===10?$ie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yF(e){return(t,r)=>-e(-t,r)}function vA(e){const t=e(gF,bF),r=t.domain;let n=10,s,i;function o(){return s=qie(n),i=Vie(n),r()[0]<0?(s=yF(s),i=yF(i),e(Bie,Uie)):e(gF,bF),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let m=s(d),p=s(u),v,g;const b=l==null?10:+l;let y=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),d>0){for(;m<=p;++m)for(v=1;v<n;++v)if(g=m<0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}}else for(;m<=p;++m)for(v=n-1;v>=1;--v)if(g=m>0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}y.length*2<b&&(y=G5(d,u,b))}else y=G5(m,p,Math.min(p-m,b)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sy(c)).precision==null&&(c.trim=!0),c=xA(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(m$(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function p$(){const e=vA(Jw()).domain([1,10]);return e.copy=()=>Wy(e,p$()).base(e.base()),Yc.apply(e,arguments),e}function jF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gA(e){var t=1,r=e(jF(t),NF(t));return r.constant=function(n){return arguments.length?e(jF(t=+n),NF(t)):t},Km(r)}function x$(){var e=gA(Jw());return e.copy=function(){return Wy(e,x$()).constant(e.constant())},Yc.apply(e,arguments)}function wF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function zie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hie(e){return e<0?-e*e:e*e}function bA(e){var t=e(Fo,Fo),r=1;function n(){return r===1?e(Fo,Fo):r===.5?e(zie,Hie):e(wF(r),wF(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Km(t)}function yA(){var e=bA(Jw());return e.copy=function(){return Wy(e,yA()).exponent(e.exponent())},Yc.apply(e,arguments),e}function Wie(){return yA.apply(null,arguments).exponent(.5)}function SF(e){return Math.sign(e)*e*e}function Gie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function v$(){var e=mA(),t=[0,1],r=!1,n;function s(i){var o=Gie(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(SF(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,f2)).map(SF)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return v$(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Yc.apply(s,arguments),Km(s)}function g$(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Qse(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[zy(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Am),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return g$().domain(e).range(t).unknown(n)},Yc.apply(i,arguments)}function b$(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[zy(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return b$().domain([e,t]).range(s).unknown(i)},Yc.apply(Km(o),arguments)}function y$(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[zy(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return y$().domain(e).range(t).unknown(r)},Yc.apply(s,arguments)}const A_=new Date,T_=new Date;function ui(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>ui(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(A_.setTime(+i),T_.setTime(+o),e(A_),e(T_),Math.floor(r(A_,T_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const p2=ui(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);p2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ui(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):p2);p2.range;const Lh=1e3,Bc=Lh*60,Bh=Bc*60,rf=Bh*24,jA=rf*7,CF=rf*30,I_=rf*365,Yp=ui(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lh)},(e,t)=>(t-e)/Lh,e=>e.getUTCSeconds());Yp.range;const NA=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lh)},(e,t)=>{e.setTime(+e+t*Bc)},(e,t)=>(t-e)/Bc,e=>e.getMinutes());NA.range;const wA=ui(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bc)},(e,t)=>(t-e)/Bc,e=>e.getUTCMinutes());wA.range;const SA=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lh-e.getMinutes()*Bc)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getHours());SA.range;const CA=ui(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getUTCHours());CA.range;const Gy=ui(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bc)/rf,e=>e.getDate()-1);Gy.range;const Zw=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rf,e=>e.getUTCDate()-1);Zw.range;const j$=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rf,e=>Math.floor(e/rf));j$.range;function Px(e){return ui(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bc)/jA)}const eS=Px(0),x2=Px(1),Yie=Px(2),Kie=Px(3),_v=Px(4),Xie=Px(5),Qie=Px(6);eS.range;x2.range;Yie.range;Kie.range;_v.range;Xie.range;Qie.range;function Ox(e){return ui(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jA)}const tS=Ox(0),v2=Ox(1),Jie=Ox(2),Zie=Ox(3),Ev=Ox(4),eoe=Ox(5),toe=Ox(6);tS.range;v2.range;Jie.range;Zie.range;Ev.range;eoe.range;toe.range;const kA=ui(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kA.range;const _A=ui(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_A.range;const nf=ui(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());nf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ui(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});nf.range;const af=ui(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());af.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ui(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});af.range;function N$(e,t,r,n,s,i){const o=[[Yp,1,Lh],[Yp,5,5*Lh],[Yp,15,15*Lh],[Yp,30,30*Lh],[i,1,Bc],[i,5,5*Bc],[i,15,15*Bc],[i,30,30*Bc],[s,1,Bh],[s,3,3*Bh],[s,6,6*Bh],[s,12,12*Bh],[n,1,rf],[n,2,2*rf],[r,1,jA],[t,1,CF],[t,3,3*CF],[e,1,I_]];function l(d,u,h){const m=u<d;m&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),v=p?p.range(d,+u+1):[];return m?v.reverse():v}function c(d,u,h){const m=Math.abs(u-d)/h,p=lA(([,,b])=>b).right(o,m);if(p===o.length)return e.every(K5(d/I_,u/I_,h));if(p===0)return p2.every(Math.max(K5(d,u,h),1));const[v,g]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(g)}return[l,c]}const[roe,noe]=N$(af,_A,tS,j$,CA,wA),[aoe,soe]=N$(nf,kA,eS,Gy,SA,NA);function P_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function O_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function db(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ioe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ub(s),u=hb(s),h=ub(i),m=hb(i),p=ub(o),v=hb(o),g=ub(l),b=hb(l),y=ub(c),C=hb(c),N={a:X,A:B,b:Y,B:K,c:null,d:TF,e:TF,f:Doe,g:Boe,G:$oe,H:koe,I:_oe,j:Eoe,L:w$,m:Aoe,M:Toe,p:ue,q:M,Q:OF,s:MF,S:Ioe,u:Poe,U:Ooe,V:Moe,w:Roe,W:Foe,x:null,X:null,y:Loe,Y:Uoe,Z:Voe,"%":PF},k={a:V,A:W,b:ee,B:te,c:null,d:IF,e:IF,f:Woe,g:rle,G:ale,H:qoe,I:zoe,j:Hoe,L:C$,m:Goe,M:Yoe,p:ne,q:se,Q:OF,s:MF,S:Koe,u:Xoe,U:Qoe,V:Joe,w:Zoe,W:ele,x:null,X:null,y:tle,Y:nle,Z:sle,"%":PF},S={a:L,A:P,b:O,B:Q,c:z,d:DF,e:DF,f:Noe,g:EF,G:_F,H:AF,I:AF,j:goe,L:joe,m:voe,M:boe,p:A,q:xoe,Q:Soe,s:Coe,S:yoe,u:uoe,U:hoe,V:foe,w:doe,W:moe,x:re,X:U,y:EF,Y:_F,Z:poe,"%":woe};N.x=D(r,N),N.X=D(n,N),N.c=D(t,N),k.x=D(r,k),k.X=D(n,k),k.c=D(t,k);function D(oe,G){return function(ce){var Z=[],ae=-1,je=0,de=oe.length,ie,be,Ne;for(ce instanceof Date||(ce=new Date(+ce));++ae<de;)oe.charCodeAt(ae)===37&&(Z.push(oe.slice(je,ae)),(be=kF[ie=oe.charAt(++ae)])!=null?ie=oe.charAt(++ae):be=ie==="e"?" ":"0",(Ne=G[ie])&&(ie=Ne(ce,be)),Z.push(ie),je=ae+1);return Z.push(oe.slice(je,ae)),Z.join("")}}function E(oe,G){return function(ce){var Z=db(1900,void 0,1),ae=T(Z,oe,ce+="",0),je,de;if(ae!=ce.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(G&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(je=O_(db(Z.y,0,1)),de=je.getUTCDay(),je=de>4||de===0?v2.ceil(je):v2(je),je=Zw.offset(je,(Z.V-1)*7),Z.y=je.getUTCFullYear(),Z.m=je.getUTCMonth(),Z.d=je.getUTCDate()+(Z.w+6)%7):(je=P_(db(Z.y,0,1)),de=je.getDay(),je=de>4||de===0?x2.ceil(je):x2(je),je=Gy.offset(je,(Z.V-1)*7),Z.y=je.getFullYear(),Z.m=je.getMonth(),Z.d=je.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),de="Z"in Z?O_(db(Z.y,0,1)).getUTCDay():P_(db(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(de+5)%7:Z.w+Z.U*7-(de+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,O_(Z)):P_(Z)}}function T(oe,G,ce,Z){for(var ae=0,je=G.length,de=ce.length,ie,be;ae<je;){if(Z>=de)return-1;if(ie=G.charCodeAt(ae++),ie===37){if(ie=G.charAt(ae++),be=S[ie in kF?G.charAt(ae++):ie],!be||(Z=be(oe,ce,Z))<0)return-1}else if(ie!=ce.charCodeAt(Z++))return-1}return Z}function A(oe,G,ce){var Z=d.exec(G.slice(ce));return Z?(oe.p=u.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function L(oe,G,ce){var Z=p.exec(G.slice(ce));return Z?(oe.w=v.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function P(oe,G,ce){var Z=h.exec(G.slice(ce));return Z?(oe.w=m.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function O(oe,G,ce){var Z=y.exec(G.slice(ce));return Z?(oe.m=C.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function Q(oe,G,ce){var Z=g.exec(G.slice(ce));return Z?(oe.m=b.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function z(oe,G,ce){return T(oe,t,G,ce)}function re(oe,G,ce){return T(oe,r,G,ce)}function U(oe,G,ce){return T(oe,n,G,ce)}function X(oe){return o[oe.getDay()]}function B(oe){return i[oe.getDay()]}function Y(oe){return c[oe.getMonth()]}function K(oe){return l[oe.getMonth()]}function ue(oe){return s[+(oe.getHours()>=12)]}function M(oe){return 1+~~(oe.getMonth()/3)}function V(oe){return o[oe.getUTCDay()]}function W(oe){return i[oe.getUTCDay()]}function ee(oe){return c[oe.getUTCMonth()]}function te(oe){return l[oe.getUTCMonth()]}function ne(oe){return s[+(oe.getUTCHours()>=12)]}function se(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var G=D(oe+="",N);return G.toString=function(){return oe},G},parse:function(oe){var G=E(oe+="",!1);return G.toString=function(){return oe},G},utcFormat:function(oe){var G=D(oe+="",k);return G.toString=function(){return oe},G},utcParse:function(oe){var G=E(oe+="",!0);return G.toString=function(){return oe},G}}}var kF={"-":"",_:" ",0:"0"},_i=/^\s*\d+/,ooe=/^%/,loe=/[\\^$*+?|[\]().{}]/g;function ea(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function coe(e){return e.replace(loe,"\\$&")}function ub(e){return new RegExp("^(?:"+e.map(coe).join("|")+")","i")}function hb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function doe(e,t,r){var n=_i.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function uoe(e,t,r){var n=_i.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function hoe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function foe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function moe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function _F(e,t,r){var n=_i.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function EF(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function poe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xoe(e,t,r){var n=_i.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function voe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function DF(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function goe(e,t,r){var n=_i.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function AF(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function boe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function yoe(e,t,r){var n=_i.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function joe(e,t,r){var n=_i.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Noe(e,t,r){var n=_i.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function woe(e,t,r){var n=ooe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Soe(e,t,r){var n=_i.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Coe(e,t,r){var n=_i.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function TF(e,t){return ea(e.getDate(),t,2)}function koe(e,t){return ea(e.getHours(),t,2)}function _oe(e,t){return ea(e.getHours()%12||12,t,2)}function Eoe(e,t){return ea(1+Gy.count(nf(e),e),t,3)}function w$(e,t){return ea(e.getMilliseconds(),t,3)}function Doe(e,t){return w$(e,t)+"000"}function Aoe(e,t){return ea(e.getMonth()+1,t,2)}function Toe(e,t){return ea(e.getMinutes(),t,2)}function Ioe(e,t){return ea(e.getSeconds(),t,2)}function Poe(e){var t=e.getDay();return t===0?7:t}function Ooe(e,t){return ea(eS.count(nf(e)-1,e),t,2)}function S$(e){var t=e.getDay();return t>=4||t===0?_v(e):_v.ceil(e)}function Moe(e,t){return e=S$(e),ea(_v.count(nf(e),e)+(nf(e).getDay()===4),t,2)}function Roe(e){return e.getDay()}function Foe(e,t){return ea(x2.count(nf(e)-1,e),t,2)}function Loe(e,t){return ea(e.getFullYear()%100,t,2)}function Boe(e,t){return e=S$(e),ea(e.getFullYear()%100,t,2)}function Uoe(e,t){return ea(e.getFullYear()%1e4,t,4)}function $oe(e,t){var r=e.getDay();return e=r>=4||r===0?_v(e):_v.ceil(e),ea(e.getFullYear()%1e4,t,4)}function Voe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ea(t/60|0,"0",2)+ea(t%60,"0",2)}function IF(e,t){return ea(e.getUTCDate(),t,2)}function qoe(e,t){return ea(e.getUTCHours(),t,2)}function zoe(e,t){return ea(e.getUTCHours()%12||12,t,2)}function Hoe(e,t){return ea(1+Zw.count(af(e),e),t,3)}function C$(e,t){return ea(e.getUTCMilliseconds(),t,3)}function Woe(e,t){return C$(e,t)+"000"}function Goe(e,t){return ea(e.getUTCMonth()+1,t,2)}function Yoe(e,t){return ea(e.getUTCMinutes(),t,2)}function Koe(e,t){return ea(e.getUTCSeconds(),t,2)}function Xoe(e){var t=e.getUTCDay();return t===0?7:t}function Qoe(e,t){return ea(tS.count(af(e)-1,e),t,2)}function k$(e){var t=e.getUTCDay();return t>=4||t===0?Ev(e):Ev.ceil(e)}function Joe(e,t){return e=k$(e),ea(Ev.count(af(e),e)+(af(e).getUTCDay()===4),t,2)}function Zoe(e){return e.getUTCDay()}function ele(e,t){return ea(v2.count(af(e)-1,e),t,2)}function tle(e,t){return ea(e.getUTCFullYear()%100,t,2)}function rle(e,t){return e=k$(e),ea(e.getUTCFullYear()%100,t,2)}function nle(e,t){return ea(e.getUTCFullYear()%1e4,t,4)}function ale(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ev(e):Ev.ceil(e),ea(e.getUTCFullYear()%1e4,t,4)}function sle(){return"+0000"}function PF(){return"%"}function OF(e){return+e}function MF(e){return Math.floor(+e/1e3)}var E0,_$,E$;ile({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ile(e){return E0=ioe(e),_$=E0.format,E0.parse,E$=E0.utcFormat,E0.utcParse,E0}function ole(e){return new Date(e)}function lle(e){return e instanceof Date?+e:+new Date(+e)}function EA(e,t,r,n,s,i,o,l,c,d){var u=mA(),h=u.invert,m=u.domain,p=d(".%L"),v=d(":%S"),g=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),C=d("%b %d"),N=d("%B"),k=d("%Y");function S(D){return(c(D)<D?p:l(D)<D?v:o(D)<D?g:i(D)<D?b:n(D)<D?s(D)<D?y:C:r(D)<D?N:k)(D)}return u.invert=function(D){return new Date(h(D))},u.domain=function(D){return arguments.length?m(Array.from(D,lle)):m().map(ole)},u.ticks=function(D){var E=m();return e(E[0],E[E.length-1],D??10)},u.tickFormat=function(D,E){return E==null?S:d(E)},u.nice=function(D){var E=m();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?m(m$(E,D)):u},u.copy=function(){return Wy(u,EA(e,t,r,n,s,i,o,l,c,d))},u}function cle(){return Yc.apply(EA(aoe,soe,nf,kA,eS,Gy,SA,NA,Yp,_$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dle(){return Yc.apply(EA(roe,noe,af,_A,tS,Zw,CA,wA,Yp,E$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rS(){var e=0,t=1,r,n,s,i,o=Fo,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(m){var p,v;return arguments.length?([p,v]=m,o=h(p,v),d):[o(0),o(1)]}}return d.range=u(Jv),d.rangeRound=u(fA),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),d}}function Xm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D$(){var e=Km(rS()(Fo));return e.copy=function(){return Xm(e,D$())},uf.apply(e,arguments)}function A$(){var e=vA(rS()).domain([1,10]);return e.copy=function(){return Xm(e,A$()).base(e.base())},uf.apply(e,arguments)}function T$(){var e=gA(rS());return e.copy=function(){return Xm(e,T$()).constant(e.constant())},uf.apply(e,arguments)}function DA(){var e=bA(rS());return e.copy=function(){return Xm(e,DA()).exponent(e.exponent())},uf.apply(e,arguments)}function ule(){return DA.apply(null,arguments).exponent(.5)}function I$(){var e=[],t=Fo;function r(n){if(n!=null&&!isNaN(n=+n))return t((zy(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Xse(e,i/n))},r.copy=function(){return I$(t).domain(e)},uf.apply(r,arguments)}function nS(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,d=Fo,u,h=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+u(g))-i)*(n*g<n*i?l:c),d(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(d=g,p):d};function v(g){return function(b){var y,C,N;return arguments.length?([y,C,N]=b,d=wie(g,[y,C,N]),p):[d(0),d(.5),d(1)]}}return p.range=v(Jv),p.rangeRound=v(fA),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return u=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function P$(){var e=Km(nS()(Fo));return e.copy=function(){return Xm(e,P$())},uf.apply(e,arguments)}function O$(){var e=vA(nS()).domain([.1,1,10]);return e.copy=function(){return Xm(e,O$()).base(e.base())},uf.apply(e,arguments)}function M$(){var e=gA(nS());return e.copy=function(){return Xm(e,M$()).constant(e.constant())},uf.apply(e,arguments)}function AA(){var e=bA(nS());return e.copy=function(){return Xm(e,AA()).exponent(e.exponent())},uf.apply(e,arguments)}function hle(){return AA.apply(null,arguments).exponent(.5)}const Db=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dA,scaleDiverging:P$,scaleDivergingLog:O$,scaleDivergingPow:AA,scaleDivergingSqrt:hle,scaleDivergingSymlog:M$,scaleIdentity:f$,scaleImplicit:X5,scaleLinear:h$,scaleLog:p$,scaleOrdinal:cA,scalePoint:Zse,scalePow:yA,scaleQuantile:g$,scaleQuantize:b$,scaleRadial:v$,scaleSequential:D$,scaleSequentialLog:A$,scaleSequentialPow:DA,scaleSequentialQuantile:I$,scaleSequentialSqrt:ule,scaleSequentialSymlog:T$,scaleSqrt:Wie,scaleSymlog:x$,scaleThreshold:y$,scaleTime:cle,scaleUtc:dle,tickFormat:u$},Symbol.toStringTag,{value:"Module"}));var Mx=e=>e.chartData,fle=Gt([Mx],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),R$=(e,t,r,n)=>n?fle(e):Mx(e);function Dv(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Uo(t)&&Uo(r))return!0}return!1}function RF(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function mle(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(Uo(r))s=r;else if(typeof r=="function")return;if(Uo(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Dv(o))return o}}function ple(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Dv(n))return RF(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Tr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&wR.test(s)){var c=wR.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Tr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&SR.test(i)){var u=SR.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var m=[o,l];if(Dv(m))return t==null?m:RF(m,t,r)}}}var Zv=1e9,xle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IA,Xa=!0,qc="[DecimalError] ",ix=qc+"Invalid argument: ",TA=qc+"Exponent out of range: ",eg=Math.floor,Mp=Math.pow,vle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vl,bi=1e7,$a=7,F$=9007199254740991,g2=eg(F$/$a),Er={};Er.absoluteValue=Er.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Er.comparedTo=Er.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Er.decimalPlaces=Er.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*$a;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Er.dividedBy=Er.div=function(e){return qh(this,new this.constructor(e))};Er.dividedToIntegerBy=Er.idiv=function(e){var t=this,r=t.constructor;return Ta(qh(t,new r(e),0,1),r.precision)};Er.equals=Er.eq=function(e){return!this.cmp(e)};Er.exponent=function(){return ei(this)};Er.greaterThan=Er.gt=function(e){return this.cmp(e)>0};Er.greaterThanOrEqualTo=Er.gte=function(e){return this.cmp(e)>=0};Er.isInteger=Er.isint=function(){return this.e>this.d.length-2};Er.isNegative=Er.isneg=function(){return this.s<0};Er.isPositive=Er.ispos=function(){return this.s>0};Er.isZero=function(){return this.s===0};Er.lessThan=Er.lt=function(e){return this.cmp(e)<0};Er.lessThanOrEqualTo=Er.lte=function(e){return this.cmp(e)<1};Er.logarithm=Er.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Vl))throw Error(qc+"NaN");if(r.s<1)throw Error(qc+(r.s?"NaN":"-Infinity"));return r.eq(Vl)?new n(0):(Xa=!1,t=qh(iy(r,i),iy(e,i),i),Xa=!0,Ta(t,s))};Er.minus=Er.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?U$(t,e):L$(t,(e.s=-e.s,e))};Er.modulo=Er.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(qc+"NaN");return r.s?(Xa=!1,t=qh(r,e,0,1).times(e),Xa=!0,r.minus(t)):Ta(new n(r),s)};Er.naturalExponential=Er.exp=function(){return B$(this)};Er.naturalLogarithm=Er.ln=function(){return iy(this)};Er.negated=Er.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Er.plus=Er.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?L$(t,e):U$(t,(e.s=-e.s,e))};Er.precision=Er.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ix+e);if(t=ei(s)+1,n=s.d.length-1,r=n*$a+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Er.squareRoot=Er.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(qc+"NaN")}for(e=ei(l),Xa=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Du(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=eg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(qh(l,i,o+2)).times(.5),Du(i.d).slice(0,o)===(t=Du(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Ta(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Xa=!0,Ta(n,r)};Er.times=Er.mul=function(e){var t,r,n,s,i,o,l,c,d,u=this,h=u.constructor,m=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=m.length,d=p.length,c<d&&(i=m,m=p,p=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+p[n]*m[s-n-1]+t,i[s--]=l%bi|0,t=l/bi|0;i[s]=(i[s]+t)%bi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Xa?Ta(e,h.precision):e};Er.toDecimalPlaces=Er.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Vu(e,0,Zv),t===void 0?t=n.rounding:Vu(t,0,8),Ta(r,e+ei(r)+1,t))};Er.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=jx(n,!0):(Vu(e,0,Zv),t===void 0?t=s.rounding:Vu(t,0,8),n=Ta(new s(n),e+1,t),r=jx(n,!0,e+1)),r};Er.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?jx(s):(Vu(e,0,Zv),t===void 0?t=i.rounding:Vu(t,0,8),n=Ta(new i(s),e+ei(s)+1,t),r=jx(n.abs(),!1,e+ei(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Er.toInteger=Er.toint=function(){var e=this,t=e.constructor;return Ta(new t(e),ei(e)+1,t.rounding)};Er.toNumber=function(){return+this};Er.toPower=Er.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Vl);if(l=new c(l),!l.s){if(e.s<1)throw Error(qc+"Infinity");return l}if(l.eq(Vl))return l;if(n=c.precision,e.eq(Vl))return Ta(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=F$){for(s=new c(Vl),t=Math.ceil(n/$a+4),Xa=!1;r%2&&(s=s.times(l),LF(s.d,t)),r=eg(r/2),r!==0;)l=l.times(l),LF(l.d,t);return Xa=!0,e.s<0?new c(Vl).div(s):Ta(s,n)}}else if(i<0)throw Error(qc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Xa=!1,s=e.times(iy(l,n+d)),Xa=!0,s=B$(s),s.s=i,s};Er.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ei(s),n=jx(s,r<=i.toExpNeg||r>=i.toExpPos)):(Vu(e,1,Zv),t===void 0?t=i.rounding:Vu(t,0,8),s=Ta(new i(s),e,t),r=ei(s),n=jx(s,e<=r||r<=i.toExpNeg,e)),n};Er.toSignificantDigits=Er.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Vu(e,1,Zv),t===void 0?t=n.rounding:Vu(t,0,8)),Ta(new n(r),e,t)};Er.toString=Er.valueOf=Er.val=Er.toJSON=Er[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ei(e),r=e.constructor;return jx(e,t<=r.toExpNeg||t>=r.toExpPos)};function L$(e,t){var r,n,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Xa?Ta(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(h/$a),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/bi|0,c[i]%=bi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Xa?Ta(t,h):t}function Vu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ix+e)}function Du(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=$a-n.length,r&&(i+=Nm(r)),i+=n;o=e[t],n=o+"",r=$a-n.length,r&&(i+=Nm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var qh=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%bi|0,o=i/bi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*bi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A=n.constructor,L=n.s==s.s?1:-1,P=n.d,O=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(qc+"Division by zero");for(c=n.e-s.e,E=O.length,S=P.length,p=new A(L),v=p.d=[],d=0;O[d]==(P[d]||0);)++d;if(O[d]>(P[d]||0)&&--c,i==null?C=i=A.precision:o?C=i+(ei(n)-ei(s))+1:C=i,C<0)return new A(0);if(C=C/$a+2|0,d=0,E==1)for(u=0,O=O[0],C++;(d<S||u)&&C--;d++)N=u*bi+(P[d]||0),v[d]=N/O|0,u=N%O|0;else{for(u=bi/(O[0]+1)|0,u>1&&(O=e(O,u),P=e(P,u),E=O.length,S=P.length),k=E,g=P.slice(0,E),b=g.length;b<E;)g[b++]=0;T=O.slice(),T.unshift(0),D=O[0],O[1]>=bi/2&&++D;do u=0,l=t(O,g,E,b),l<0?(y=g[0],E!=b&&(y=y*bi+(g[1]||0)),u=y/D|0,u>1?(u>=bi&&(u=bi-1),h=e(O,u),m=h.length,b=g.length,l=t(h,g,m,b),l==1&&(u--,r(h,E<m?T:O,m))):(u==0&&(l=u=1),h=O.slice()),m=h.length,m<b&&h.unshift(0),r(g,h,b),l==-1&&(b=g.length,l=t(O,g,E,b),l<1&&(u++,r(g,E<b?T:O,b))),b=g.length):l===0&&(u++,g=[0]),v[d++]=u,l&&g[0]?g[b++]=P[k]||0:(g=[P[k]],b=1);while((k++<S||g[0]!==void 0)&&C--)}return v[0]||v.shift(),p.e=c,Ta(p,o?i+ei(p)+1:i)}}();function B$(e,t){var r,n,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(ei(e)>16)throw Error(TA+ei(e));if(!e.s)return new u(Vl);for(Xa=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Mp(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new u(Vl),u.precision=l;;){if(s=Ta(s.times(e),l),r=r.times(++c),o=i.plus(qh(s,r,l)),Du(o.d).slice(0,l)===Du(i.d).slice(0,l)){for(;d--;)i=Ta(i.times(i),l);return u.precision=h,t==null?(Xa=!0,Ta(i,h)):i}i=o}}function ei(e){for(var t=e.e*$a,r=e.d[0];r>=10;r/=10)t++;return t}function M_(e,t,r){if(t>e.LN10.sd())throw Xa=!0,r&&(e.precision=r),Error(qc+"LN10 precision limit exceeded");return Ta(new e(e.LN10),t)}function Nm(e){for(var t="";e--;)t+="0";return t}function iy(e,t){var r,n,s,i,o,l,c,d,u,h=1,m=10,p=e,v=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(qc+(p.s?"NaN":"-Infinity"));if(p.eq(Vl))return new g(0);if(t==null?(Xa=!1,d=b):d=t,p.eq(10))return t==null&&(Xa=!0),M_(g,d);if(d+=m,g.precision=d,r=Du(v),n=r.charAt(0),i=ei(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Du(p.d),n=r.charAt(0),h++;i=ei(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=M_(g,d+2,b).times(i+""),p=iy(new g(n+"."+r.slice(1)),d-m).plus(c),g.precision=b,t==null?(Xa=!0,Ta(p,b)):p;for(l=o=p=qh(p.minus(Vl),p.plus(Vl),d),u=Ta(p.times(p),d),s=3;;){if(o=Ta(o.times(u),d),c=l.plus(qh(o,new g(s),d)),Du(c.d).slice(0,d)===Du(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(M_(g,d+2,b).times(i+""))),l=qh(l,new g(h),d),g.precision=b,t==null?(Xa=!0,Ta(l,b)):l;l=c,s+=2}}function FF(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=eg(r/$a),e.d=[],n=(r+1)%$a,r<0&&(n+=$a),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=$a;n<s;)e.d.push(+t.slice(n,n+=$a));t=t.slice(n),n=$a-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Xa&&(e.e>g2||e.e<-g2))throw Error(TA+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ta(e,t,r){var n,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=$a,s=t,d=h[u=0];else{if(u=Math.ceil((n+1)/$a),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=$a,s=n-$a+o}if(r!==void 0&&(i=Mp(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/Mp(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=ei(e),h.length=1,t=t-i-1,h[0]=Mp(10,($a-t%$a)%$a),e.e=eg(-t/$a)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=Mp(10,$a-n),h[u]=s>0?(d/Mp(10,o-s)%Mp(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==bi&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=bi)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Xa&&(e.e>g2||e.e<-g2))throw Error(TA+ei(e));return e}function U$(e,t){var r,n,s,i,o,l,c,d,u,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Xa?Ta(t,p):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),s=Math.max(Math.ceil(p/$a),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=bi-1;--c[i],c[s]+=bi}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Xa?Ta(t,p):t):new m(0)}function jx(e,t,r){var n,s=ei(e),i=Du(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Nm(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Nm(-s-1)+i,r&&(n=r-o)>0&&(i+=Nm(n))):s>=o?(i+=Nm(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Nm(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Nm(n))),e.s<0?"-"+i:i}function LF(e,t){if(e.length>t)return e.length=t,!0}function $$(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ix+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return FF(o,i.toString())}else if(typeof i!="string")throw Error(ix+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,vle.test(i))FF(o,i);else throw Error(ix+i)}if(s.prototype=Er,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$$,s.config=s.set=gle,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function gle(e){if(!e||typeof e!="object")throw Error(qc+"Object expected");var t,r,n,s=["precision",1,Zv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(eg(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(ix+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ix+r+": "+n);return this}var IA=$$(xle);Vl=new IA(1);const va=IA;var ble=e=>e,V$={},q$=e=>e===V$,BF=e=>function t(){return arguments.length===0||arguments.length===1&&q$(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},z$=(e,t)=>e===1?t:BF(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==V$).length;return i>=e?t(...n):z$(e-i,BF(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>q$(u)?l.shift():u);return t(...d,...l)}))}),aS=e=>z$(e.length,e),eD=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},yle=aS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),jle=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return ble;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},tD=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),H$=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function W$(e){var t;return e===0?t=1:t=Math.floor(new va(e).abs().log(10).toNumber())+1,t}function G$(e,t,r){for(var n=new va(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}aS((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});aS((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});aS((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Y$=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},K$=(e,t,r)=>{if(e.lte(0))return new va(0);var n=W$(e.toNumber()),s=new va(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new va(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new va(c.toNumber()):new va(Math.ceil(c.toNumber()))},Nle=(e,t,r)=>{var n=new va(1),s=new va(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new va(10).pow(W$(e)-1),s=new va(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new va(Math.floor(e)))}else e===0?s=new va(Math.floor((t-1)/2)):r||(s=new va(Math.floor(e)));var o=Math.floor((t-1)/2),l=jle(yle(c=>s.add(new va(c-o).mul(n)).toNumber()),eD);return l(0,t)},X$=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new va(0),tickMin:new va(0),tickMax:new va(0)};var o=K$(new va(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new va(0):(l=new va(t).add(r).div(2),l=l.sub(new va(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new va(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?X$(t,r,n,s,i+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new va(c).mul(o)),tickMax:l.add(new va(d).mul(o))})};function wle(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=Y$([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...eD(0,n-1).map(()=>1/0)]:[...eD(0,n-1).map(()=>-1/0),l];return t>r?tD(c):c}if(o===l)return Nle(o,n,s);var{step:d,tickMin:u,tickMax:h}=X$(o,l,i,s,0),m=G$(u,h.add(new va(.1).mul(d)),d);return t>r?tD(m):m}function Sle(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Y$([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=K$(new va(o).sub(i).div(l-1),s,0),d=[...G$(new va(i),new va(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>n?tD(d):d}var Cle=H$(wle),kle=H$(Sle),_le=e=>e.rootProps.barCategoryGap,sS=e=>e.rootProps.stackOffset,PA=e=>e.options.chartName,OA=e=>e.rootProps.syncId,Q$=e=>e.rootProps.syncMethod,MA=e=>e.options.eventEmitter,Mh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Rl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Ele={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Mh.angleAxisId,includeHidden:!1,name:void 0,reversed:Mh.reversed,scale:Mh.scale,tick:Mh.tick,tickCount:void 0,ticks:void 0,type:Mh.type,unit:void 0},Dle={allowDataOverflow:Rl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rl.scale,tick:Rl.tick,tickCount:Rl.tickCount,ticks:void 0,type:Rl.type,unit:void 0},Ale={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Mh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Mh.scale,tick:Mh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tle={allowDataOverflow:Rl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rl.scale,tick:Rl.tick,tickCount:Rl.tickCount,ticks:void 0,type:"category",unit:void 0},RA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Ale:Ele,FA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Tle:Dle,oS=e=>e.polarOptions,LA=Gt([cf,df,Ki],Nne),J$=Gt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.innerRadius,t,0)}),Z$=Gt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.outerRadius,t,t*.8)}),Ile=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},eV=Gt([oS],Ile);Gt([RA,eV],iS);var tV=Gt([LA,J$,Z$],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Gt([FA,tV],iS);var Ple=Gt([Za,oS,J$,Z$,cf,df],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Fm(o,s,s/2),cy:Fm(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Ei=(e,t)=>t,lS=(e,t,r)=>r;function UF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(r),!0).forEach(function(n){Ole(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ole(e,t,r){return(t=Mle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mle(e){var t=Rle(e,"string");return typeof t=="symbol"?t:t+""}function Rle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rD=[0,"auto"],Ol={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},hf=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Ol},Ml={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yw},Qm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ml},Fle={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BA=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Fle},fl=(e,t,r)=>{switch(t){case"xAxis":return hf(e,r);case"yAxis":return Qm(e,r);case"zAxis":return BA(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Lle=(e,t,r)=>{switch(t){case"xAxis":return hf(e,r);case"yAxis":return Qm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Yy=(e,t,r)=>{switch(t){case"xAxis":return hf(e,r);case"yAxis":return Qm(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rV=e=>e.graphicalItems.countOfBars>0;function nV(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var aV=e=>e.graphicalItems.cartesianItems,Ble=Gt([Ei,lS],nV),sV=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Ky=Gt([aV,fl,Ble],sV),iV=e=>e.filter(t=>t.stackId===void 0),Ule=Gt([Ky],iV),oV=e=>e.map(t=>t.data).filter(Boolean).flat(1),$le=Gt([Ky],oV),lV=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},cS=Gt([$le,R$],lV),cV=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Xl(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Xl(s,n)}))):e.map(n=>({value:n})),dS=Gt([cS,fl,Ky],cV);function dV(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Rx(e){return e.filter(t=>$u(t)||t instanceof Date).map(Number).filter(t=>ec(t)===!1)}function Vle(e,t,r){return!r||typeof t!="number"||ec(t)?[]:r.length?Rx(r.flatMap(n=>{var s=Xl(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!Uo(i)||!Uo(o)))return[t-i,t+o]})):[]}var uV=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:Fne(e,c,r),graphicalItems:l}]}))},nD=Gt([cS,Ky,sS],uV),hV=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Une(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},qle=Gt([nD,Mx,Ei],hV),fV=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>dV(n,u)),d=Xl(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:Vle(s,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Xl(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),zle=Gt(cS,fl,Ule,Ei,fV);function Hle(e){var{value:t}=e;if($u(t)||t instanceof Date)return t}var Wle=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Rx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gle=(e,t,r)=>{var n=e.map(Hle).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&O9(n))?t$(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UA=e=>{var t;if(e==null||!("domain"in e))return rD;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Rx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:rD},$A=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},mV=e=>e.referenceElements.dots,tg=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Yle=Gt([mV,Ei,lS],tg),pV=e=>e.referenceElements.areas,Kle=Gt([pV,Ei,lS],tg),xV=e=>e.referenceElements.lines,Xle=Gt([xV,Ei,lS],tg),vV=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Qle=Gt(Yle,Ei,vV),gV=(e,t)=>{var r=Rx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Jle=Gt([Kle,Ei],gV),bV=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Zle=Gt(Xle,Ei,bV),ece=Gt(Qle,Zle,Jle,(e,t,r)=>$A(e,r,t)),tce=Gt([fl],UA),yV=(e,t,r,n,s)=>{var i=mle(t,e.allowDataOverflow);return i??ple(t,$A(r,s,Wle(n)),e.allowDataOverflow)},rce=Gt([fl,tce,qle,zle,ece],yV),nce=[0,1],jV=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,d=lf(t,i);return d&&l==null?t$(0,r.length):c==="category"?Gle(n,e,d):s==="expand"?nce:o}},VA=Gt([fl,Za,cS,dS,sS,Ei,rce],jV),NV=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat($y(i));return l in Db?l:"point"}}},Xy=Gt([fl,Za,rV,PA,Ei],NV);function ace(e){if(e!=null){if(e in Db)return Db[e]();var t="scale".concat($y(e));if(t in Db)return Db[t]()}}function qA(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=ace(t);if(s!=null){var i=s.domain(r).range(n);return Pne(i),i}}}var wV=(e,t,r)=>{var n=UA(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Dv(e))return Cle(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Dv(e))return kle(e,t.tickCount,t.allowDecimals)}},zA=Gt([VA,Yy,Xy],wV),SV=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Dv(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},sce=Gt([fl,VA,zA,Ei],SV),ice=Gt(dS,fl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Rx(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),CV=Gt(ice,Za,_le,Ki,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!Uo(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Fm(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),oce=(e,t)=>{var r=hf(e,t);return r==null||typeof r.padding!="string"?0:CV(e,"xAxis",t,r.padding)},lce=(e,t)=>{var r=Qm(e,t);return r==null||typeof r.padding!="string"?0:CV(e,"yAxis",t,r.padding)},cce=Gt(hf,oce,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),dce=Gt(Qm,lce,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),uce=Gt([Ki,cce,Xw,Kw,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),hce=Gt([Ki,Za,dce,Xw,Kw,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qy=(e,t,r,n)=>{var s;switch(t){case"xAxis":return uce(e,r,n);case"yAxis":return hce(e,r,n);case"zAxis":return(s=BA(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return eV(e);case"radiusAxis":return tV(e,r);default:return}},kV=Gt([fl,Qy],iS),rg=Gt([fl,Xy,sce,kV],qA);Gt(Ky,Ei,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>dV(t,r)));function _V(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var uS=(e,t)=>t,hS=(e,t,r)=>r,fce=Gt(eA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_V)),mce=Gt(tA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_V)),EV=(e,t)=>({width:e.width,height:t.height}),pce=(e,t)=>{var r=typeof t.width=="number"?t.width:Yw;return{width:r,height:e.height}},xce=Gt(Ki,hf,EV),vce=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gce=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},bce=Gt(df,Ki,fce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=EV(t,l);o==null&&(o=vce(t,n,e));var d=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),yce=Gt(cf,Ki,mce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=pce(t,l);o==null&&(o=gce(t,n,e));var d=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),jce=(e,t)=>{var r=Ki(e),n=hf(e,t);if(n!=null){var s=bce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Nce=(e,t)=>{var r=Ki(e),n=Qm(e,t);if(n!=null){var s=yce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},wce=Gt(Ki,Qm,(e,t)=>{var r=typeof t.width=="number"?t.width:Yw;return{width:r,height:e.height}}),DV=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=lf(e,n),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&O9(c))return c}},HA=Gt([Za,dS,fl,Ei],DV),AV=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=lf(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},WA=Gt([Za,dS,Yy,Ei],AV),$F=Gt([Za,Lle,Xy,rg,HA,WA,Qy,zA,Ei],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var d=lf(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}),Sce=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var d=lf(e,c),{type:u,ticks:h,tickCount:m}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/p:0;v=c==="angleAxis"&&i!=null&&i.length>=2?Lc(i[0]-i[1])*2*v:v;var g=h||s;if(g){var b=g.map((y,C)=>{var N=o?o.indexOf(y):y;return{index:C,coordinate:n(N)+v,value:y,offset:v}});return b.filter(y=>!ec(y.coordinate))}return d&&l?l.map((y,C)=>({coordinate:n(y)+v,value:y,index:C,offset:v})):n.ticks?n.ticks(m).map(y=>({coordinate:n(y)+v,value:y,offset:v})):n.domain().map((y,C)=>({coordinate:n(y)+v,value:o?o[y]:y,index:C,offset:v}))}},TV=Gt([Za,Yy,Xy,rg,zA,Qy,HA,WA,Ei],Sce),Cce=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=lf(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&n?.length>=2?Lc(n[0]-n[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},IV=Gt([Za,Yy,rg,Qy,HA,WA,Ei],Cce),PV=Gt(fl,rg,(e,t)=>{if(!(e==null||t==null))return b2(b2({},e),{},{scale:t})}),kce=Gt([fl,Xy,VA,kV],qA);Gt((e,t,r)=>BA(e,r),kce,(e,t)=>{if(!(e==null||t==null))return b2(b2({},e),{},{scale:t})});var _ce=Gt([Za,eA,tA],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),OV=e=>e.options.defaultTooltipEventType,MV=e=>e.options.validateTooltipEventTypes;function RV(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function GA(e,t){var r=OV(e),n=MV(e);return RV(t,r,n)}function Ece(e){return Xr(t=>GA(t,e))}var FV=(e,t)=>{var r,n=Number(t);if(!(ec(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Dce=e=>e.tooltip.settings,wm={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ace={itemInteraction:{click:wm,hover:wm},axisInteraction:{click:wm,hover:wm},keyboardInteraction:wm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},LV=Wc({name:"tooltip",initialState:Ace,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Vh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Tce,removeTooltipEntrySettings:Ice,setTooltipSettingsState:Pce,setActiveMouseOverItemIndex:Oce,mouseLeaveItem:iBe,mouseLeaveChart:BV,setActiveClickItemIndex:oBe,setMouseOverAxisIndex:UV,setMouseClickAxisIndex:Mce,setSyncInteraction:aD,setKeyboardInteraction:sD}=LV.actions,Rce=LV.reducer;function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VF(Object(r),!0).forEach(function(n){Fce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fce(e,t,r){return(t=Lce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lce(e){var t=Bce(e,"string");return typeof t=="symbol"?t:t+""}function Bce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uce(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $ce(e){return e.index!=null}var $V=(e,t,r,n)=>{if(t==null)return wm;var s=Uce(e,t,r);if(s==null)return wm;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($ce(s)){if(i)return Pj(Pj({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Pj(Pj({},wm),{},{coordinate:s.coordinate})},YA=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!Uo(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},VV=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=s?.[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},qV=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Jy=e=>e.options.tooltipPayloadSearcher,ng=e=>e.tooltip;function qF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(r),!0).forEach(function(n){Vce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vce(e,t,r){return(t=qce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qce(e){var t=zce(e,"string");return typeof t=="symbol"?t:t+""}function zce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hce(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Wce(e,t){return e??t}var zV=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((m,p)=>{var v,{dataDefinedOnItem:g,settings:b}=p,y=Wce(g,l),C=Hce(y,d,u),N=(v=b?.dataKey)!==null&&v!==void 0?v:n?.dataKey,k=b?.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?S=M9(C,n.dataKey,s):S=i(C,t,c,k),Array.isArray(S))S.forEach(E=>{var T=zF(zF({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});m.push(CR({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:Xl(E.payload,E.dataKey),name:E.name}))});else{var D;m.push(CR({tooltipEntrySettings:b,dataKey:N,payload:S,value:Xl(S,N),name:(D=Xl(S,k))!==null&&D!==void 0?D:b?.name}))}return m},h)}},Di=e=>{var t=Za(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ag=e=>e.tooltip.settings.axisId,Xi=e=>{var t=Di(e),r=ag(e);return Yy(e,t,r)},KA=Gt([Xi,Za,rV,PA,Di],NV),Gce=Gt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Yce=Gt([Di,ag],nV),fS=Gt([Gce,Xi,Yce],sV),Kce=Gt([fS],oV),Fx=Gt([Kce,Mx],lV),XA=Gt([Fx,Xi,fS],cV),Xce=Gt([Xi],UA),Qce=Gt([Fx,fS,sS],uV),Jce=Gt([Qce,Mx,Di],hV),Zce=Gt([fS],iV),ede=Gt([Fx,Xi,Zce,Di],fV),tde=Gt([mV,Di,ag],tg),rde=Gt([tde,Di],vV),nde=Gt([pV,Di,ag],tg),ade=Gt([nde,Di],gV),sde=Gt([xV,Di,ag],tg),ide=Gt([sde,Di],bV),ode=Gt([rde,ide,ade],$A),lde=Gt([Xi,Xce,Jce,ede,ode],yV),HV=Gt([Xi,Za,Fx,XA,sS,Di,lde],jV),cde=Gt([HV,Xi,KA],wV),dde=Gt([Xi,HV,cde,Di],SV),WV=e=>{var t=Di(e),r=ag(e),n=!1;return Qy(e,t,r,n)},GV=Gt([Xi,WV],iS),YV=Gt([Xi,KA,dde,GV],qA),ude=Gt([Za,XA,Xi,Di],DV),hde=Gt([Za,XA,Xi,Di],AV),fde=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,d=lf(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?Lc(s[0]-s[1])*2*h:h,d&&o?o.map((m,p)=>({coordinate:n(m)+h,value:m,index:p,offset:h})):n.domain().map((m,p)=>({coordinate:n(m)+h,value:i?i[m]:m,index:p,offset:h}))}}},ff=Gt([Za,Xi,KA,YV,WV,ude,hde,Di],fde),QA=Gt([OV,MV,Dce],(e,t,r)=>RV(r.shared,e,t)),KV=e=>e.tooltip.settings.trigger,JA=e=>e.tooltip.settings.defaultIndex,mS=Gt([ng,QA,KV,JA],$V),oy=Gt([mS,Fx],YA),XV=Gt([ff,oy],FV),mde=Gt([mS],e=>{if(e)return e.dataKey}),QV=Gt([ng,QA,KV,JA],qV),pde=Gt([cf,df,Za,Ki,ff,JA,QV,Jy],VV),xde=Gt([mS,pde],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),vde=Gt([mS],e=>e.active),gde=Gt([QV,oy,Mx,Xi,XV,Jy,QA],zV),bde=Gt([gde],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function HF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HF(Object(r),!0).forEach(function(n){yde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yde(e,t,r){return(t=jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jde(e){var t=Nde(e,"string");return typeof t=="symbol"?t:t+""}function Nde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wde=()=>Xr(Xi),Sde=()=>{var e=wde(),t=Xr(ff),r=Xr(YV);return F5(WF(WF({},e),{},{scale:r}),t)},JV=()=>Xr(PA),ZA=(e,t)=>t,ZV=(e,t,r)=>r,e4=(e,t,r,n)=>n,Cde=Gt(ff,e=>$w(e,t=>t.coordinate)),t4=Gt([ng,ZA,ZV,e4],$V),eq=Gt([t4,Fx],YA),kde=(e,t,r)=>{if(t!=null){var n=ng(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tq=Gt([ng,ZA,ZV,e4],qV),y2=Gt([cf,df,Za,Ki,ff,e4,tq,Jy],VV),_de=Gt([t4,y2],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rq=Gt(ff,eq,FV),Ede=Gt([tq,eq,Mx,Xi,rq,Jy,ZA],zV),Dde=Gt([t4],e=>({isActive:e.active,activeIndex:e.index})),Ade=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=$ne(e.chartX,e.chartY,t,r,l);if(c){var d=qne(c,t),u=Tne(d,o,i,n,s),h=Vne(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function iD(){return iD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iD.apply(null,arguments)}function GF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GF(Object(r),!0).forEach(function(n){Tde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tde(e,t,r){return(t=Ide(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ide(e){var t=Pde(e,"string");return typeof t=="symbol"?t:t+""}function Pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ode(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,m=n;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,v;if(d==="ScatterChart")p=u,v=zae;else if(d==="BarChart")p=Hae(o,u,s,i),v=Ese;else if(o==="radial"){var{cx:g,cy:b,radius:y,startAngle:C,endAngle:N}=ZU(u);p={cx:g,cy:b,startAngle:C,endAngle:N,innerRadius:y,outerRadius:y},v=Ise}else p={points:Pse(o,u,s)},v=kN;var k=typeof l=="object"&&"className"in l?l.className:void 0,S=Oj(Oj(Oj(Oj({stroke:"#ccc",pointerEvents:"none"},s),p),Aa(l,!1)),{},{payload:h,payloadIndex:m,className:vn("recharts-tooltip-cursor",k)});return w.isValidElement(l)?w.cloneElement(l,S):w.createElement(v,S)}function Mde(e){var t=Sde(),r=GU(),n=sA(),s=JV();return w.createElement(Ode,iD({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var nq=w.createContext(null),Rde=()=>w.useContext(nq),R_={exports:{}},YF;function Fde(){return YF||(YF=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,m),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,m,p,v){var g=r?r+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,C,N;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,m),!0;case 5:return b.fn.call(b.context,u,h,m,p),!0;case 6:return b.fn.call(b.context,u,h,m,p,v),!0}for(N=1,C=new Array(y-1);N<y;N++)C[N-1]=arguments[N];b.fn.apply(b.context,C)}else{var k=b.length,S;for(N=0;N<k;N++)switch(b[N].once&&this.removeListener(d,b[N].fn,void 0,!0),y){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,u);break;case 3:b[N].fn.call(b[N].context,u,h);break;case 4:b[N].fn.call(b[N].context,u,h,m);break;default:if(!C)for(S=1,C=new Array(y-1);S<y;S++)C[S-1]=arguments[S];b[N].fn.apply(b[N].context,C)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,m){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!m||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var g=0,b=[],y=v.length;g<y;g++)(v[g].fn!==u||m&&!v[g].once||h&&v[g].context!==h)&&b.push(v[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(R_)),R_.exports}var Lde=Fde();const Bde=Hu(Lde);var ly=new Bde,oD="recharts.syncEvent.tooltip",KF="recharts.syncEvent.brush";function Ude(e,t){if(t){var r=Number.parseInt(t,10);if(!ec(r))return e?.[r]}}var $de={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},aq=Wc({name:"options",initialState:$de,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Vde=aq.reducer,{createEventEmitter:qde}=aq.actions;function zde(e){return e.tooltip.syncInteraction}var Hde={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sq=Wc({name:"chartData",initialState:Hde,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:XF,setDataStartEndIndexes:Wde,setComputedData:lBe}=sq.actions,Gde=sq.reducer,iq=()=>{};function Yde(){var e=Xr(OA),t=Xr(MA),r=Yi(),n=Xr(Q$),s=Xr(ff),i=sA(),o=rA(),l=Xr(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return iq;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){r(u);return}if(s!=null){var m;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(s,p);m=s[v]}else n==="value"&&(m=s.find(D=>String(D.value)===u.payload.label));var{coordinate:g}=u.payload;if(m==null||u.payload.active===!1||g==null||o==null){r(aD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,C=Math.min(b,o.x+o.width),N=Math.min(y,o.y+o.height),k={x:i==="horizontal"?m.coordinate:C,y:i==="horizontal"?N:m.coordinate},S=aD({active:u.payload.active,coordinate:k,dataKey:u.payload.dataKey,index:String(m.index),label:u.payload.label});r(S)}}};return ly.on(oD,c),()=>{ly.off(oD,c)}},[l,r,t,e,n,s,i,o])}function Kde(){var e=Xr(OA),t=Xr(MA),r=Yi();w.useEffect(()=>{if(e==null)return iq;var n=(s,i,o)=>{t!==o&&e===s&&r(Wde(i))};return ly.on(KF,n),()=>{ly.off(KF,n)}},[r,t,e])}function Xde(){var e=Yi();w.useEffect(()=>{e(qde())},[e]),Yde(),Kde()}function Qde(e,t,r,n,s,i){var o=Xr(m=>kde(m,e,t)),l=Xr(MA),c=Xr(OA),d=Xr(Q$),u=Xr(zde),h=u?.active;w.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=aD({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ly.emit(oD,c,m,l)}},[h,r,o,s,n,l,c,d,i])}function QF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(r),!0).forEach(function(n){Jde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jde(e,t,r){return(t=Zde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zde(e){var t=eue(e,"string");return typeof t=="symbol"?t:t+""}function eue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e){return e.dataKey}function rue(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(Nae,t)}var ZF=[],nue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!qy.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aue(e){var t=Qv(e,nue),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:v,cursor:g,shared:b,trigger:y,defaultIndex:C,portal:N,axisId:k}=t,S=Yi(),D=typeof C=="number"?String(C):C;w.useEffect(()=>{S(Pce({shared:b,trigger:y,axisId:k,active:r,defaultIndex:D}))},[S,b,y,k,r,D]);var E=rA(),T=KU(),A=Ece(b),{activeIndex:L,isActive:P}=Xr(ee=>Dde(ee,A,y,D)),O=Xr(ee=>Ede(ee,A,y,D)),Q=Xr(ee=>rq(ee,A,y,D)),z=Xr(ee=>_de(ee,A,y,D)),re=O,U=Rde(),X=r??P,[B,Y]=xU([re,X]),K=A==="axis"?Q:void 0;Qde(A,y,z,K,L,X);var ue=N??U;if(ue==null)return null;var M=re??ZF;X||(M=ZF),l&&M.length&&(M=uU(re.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),u,tue));var V=M.length>0,W=w.createElement(Dae,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:X,coordinate:z,hasPayload:V,offset:d,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:v,lastBoundingBox:B,innerRef:Y,hasPortalFromProps:!!N},rue(o,JF(JF({},t),{},{payload:M,label:K,active:X,coordinate:z,accessibilityLayer:T})));return w.createElement(w.Fragment,null,Ly.createPortal(W,ue),X&&w.createElement(Mde,{cursor:g,tooltipEventType:A,coordinate:z,payload:re,index:L}))}var F_={},L_={},eL;function sue(){return eL||(eL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,s={}){typeof s!="object"&&(s={});let i=null,o=null,l=null,c=0,d=null,u;const{leading:h=!1,trailing:m=!0,maxWait:p}=s,v="maxWait"in s,g=v?Math.max(Number(p)||0,n):0,b=E=>(i!==null&&(u=r.apply(o,i)),i=o=null,c=E,u),y=E=>(c=E,d=setTimeout(S,n),h&&i!==null?b(E):u),C=E=>(d=null,m&&i!==null?b(E):u),N=E=>{if(l===null)return!0;const T=E-l,A=T>=n||T<0,L=v&&E-c>=g;return A||L},k=E=>{const T=l===null?0:E-l,A=n-T,L=g-(E-c);return v?Math.min(A,L):A},S=()=>{const E=Date.now();if(N(E))return C(E);d=setTimeout(S,k(E))},D=function(...E){const T=Date.now(),A=N(T);if(i=E,o=this,l=T,A){if(d===null)return y(T);if(v)return clearTimeout(d),d=setTimeout(S,n),b(T)}return d===null&&(d=setTimeout(S,n)),u};return D.cancel=()=>{d!==null&&clearTimeout(d),c=0,l=i=o=d=null},D.flush=()=>d===null?u:C(Date.now()),D}e.debounce=t}(L_)),L_}var tL;function iue(){return tL||(tL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sue();function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r}(F_)),F_}var B_,rL;function oue(){return rL||(rL=1,B_=iue().throttle),B_}var lue=oue();const cue=Hu(lue);var Rb=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function nL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(r),!0).forEach(function(n){due(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function due(e,t,r){return(t=uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uue(e){var t=hue(e,"string");return typeof t=="symbol"?t:t+""}function hue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fue=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:m,onResize:p,style:v={}}=e,g=w.useRef(null),b=w.useRef();b.current=p,w.useImperativeHandle(t,()=>g.current);var[y,C]=w.useState({containerWidth:n.width,containerHeight:n.height}),N=w.useCallback((S,D)=>{C(E=>{var T=Math.round(S),A=Math.round(D);return E.containerWidth===T&&E.containerHeight===A?E:{containerWidth:T,containerHeight:A}})},[]);w.useEffect(()=>{var S=A=>{var L,{width:P,height:O}=A[0].contentRect;N(P,O),(L=b.current)===null||L===void 0||L.call(b,P,O)};u>0&&(S=cue(S,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(S),{width:E,height:T}=g.current.getBoundingClientRect();return N(E,T),D.observe(g.current),()=>{D.disconnect()}},[N,u]);var k=w.useMemo(()=>{var{containerWidth:S,containerHeight:D}=y;if(S<0||D<0)return null;Rb(Hp(s)||Hp(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Hp(s)?S:s,T=Hp(i)?D:i;return r&&r>0&&(E?T=E/r:T&&(E=T*r),c&&T>c&&(T=c)),Rb(E>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,T,s,i,o,l,r),w.Children.map(d,A=>w.cloneElement(A,{width:E,height:T,style:U_({width:E,height:T},A.props.style)}))},[r,d,i,c,l,o,y,s]);return w.createElement("div",{id:h?"".concat(h):void 0,className:vn("recharts-responsive-container",m),style:U_(U_({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))});function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mue(e,t,r){return(t=pue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pue(e){var t=xue(e,"string");return typeof t=="symbol"?t:t+""}function xue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D0={widthCache:{},cacheCount:0},vue=2e3,gue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sL="recharts_measurement_span";function bue(e){var t=lD({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Fb=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||qy.isSsr)return{width:0,height:0};var n=bue(r),s=JSON.stringify({text:t,copyStyle:n});if(D0.widthCache[s])return D0.widthCache[s];try{var i=document.getElementById(sL);i||(i=document.createElement("span"),i.setAttribute("id",sL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=lD(lD({},gue),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return D0.widthCache[s]=c,++D0.cacheCount>vue&&(D0.cacheCount=0,D0.widthCache={}),c}catch{return{width:0,height:0}}},iL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Nue=Object.keys(oq),X0="NaN";function wue(e,t){return e*oq[t]}class el{static parse(t){var r,[,n,s]=(r=jue.exec(t))!==null&&r!==void 0?r:[];return new el(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ec(t)&&(this.unit=""),r!==""&&!yue.test(r)&&(this.num=NaN,this.unit=""),Nue.includes(r)&&(this.num=wue(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new el(NaN,""):new el(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new el(NaN,""):new el(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new el(NaN,""):new el(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new el(NaN,""):new el(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ec(this.num)}}function lq(e){if(e.includes(X0))return X0;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=iL.exec(t))!==null&&r!==void 0?r:[],o=el.parse(n??""),l=el.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return X0;t=t.replace(iL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,m]=(d=oL.exec(t))!==null&&d!==void 0?d:[],p=el.parse(u??""),v=el.parse(m??""),g=h==="+"?p.add(v):p.subtract(v);if(g.isNaN())return X0;t=t.replace(oL,g.toString())}return t}var lL=/\(([^()]*)\)/;function Sue(e){for(var t=e,r;(r=lL.exec(t))!=null;){var[,n]=r;t=t.replace(lL,lq(n))}return t}function Cue(e){var t=e.replace(/\s+/g,"");return t=Sue(t),t=lq(t),t}function kue(e){try{return Cue(e)}catch{return X0}}function $_(e){var t=kue(e.slice(5,-1));return t===X0?"":t}var _ue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eue=["dx","dy","angle","className","breakAll"];function cD(){return cD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cD.apply(null,arguments)}function cL(e,t){if(e==null)return{};var r,n,s=Due(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Due(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cq=/[ \f\n\r\t\v\u2028\u2029]+/,dq=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Zs(t)||(r?s=t.toString().split(""):s=t.toString().split(cq));var i=s.map(l=>({word:l,width:Fb(l,n).width})),o=r?0:Fb("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Aue=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Tr(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,Q)=>{var{word:z,width:re}=Q,U=O[O.length-1];if(U&&(n==null||s||U.width+re+r<Number(n)))U.words.push(z),U.width+=re+r;else{var X={words:[z],width:re};O.push(X)}return O},[])},m=h(t),p=L=>L.reduce((P,O)=>P.width>O.width?P:O);if(!d||s)return m;var v=m.length>i||p(m).width>Number(n);if(!v)return m;for(var g="",b=L=>{var P=u.slice(0,L),O=dq({breakAll:c,style:l,children:P+g}).wordsWithComputedWidth,Q=h(O),z=Q.length>i||p(Q).width>Number(n);return[z,Q]},y=0,C=u.length-1,N=0,k;y<=C&&N<=u.length-1;){var S=Math.floor((y+C)/2),D=S-1,[E,T]=b(D),[A]=b(S);if(!E&&!A&&(y=S+1),E&&A&&(C=S-1),!E&&A){k=T;break}N++}return k||m},dL=e=>{var t=Zs(e)?[]:e.toString().split(cq);return[{words:t}]},Tue=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!qy.isSsr){var l,c,d=dq({breakAll:i,children:n,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return dL(n);return Aue({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return dL(n)},uL="#808080",r4=w.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=uL}=e,u=cL(e,_ue),h=w.useMemo(()=>Tue({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:m,dy:p,angle:v,className:g,breakAll:b}=u,y=cL(u,Eue);if(!$u(r)||!$u(n))return null;var C=r+(Tr(m)?m:0),N=n+(Tr(p)?p:0),k;switch(c){case"start":k=$_("calc(".concat(i,")"));break;case"middle":k=$_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:k=$_("calc(".concat(h.length-1," * -").concat(s,")"));break}var S=[];if(o){var D=h[0].width,{width:E}=u;S.push("scale(".concat(Tr(E)?E/D:1,")"))}return v&&S.push("rotate(".concat(v,", ").concat(C,", ").concat(N,")")),S.length&&(y.transform=S.join(" ")),w.createElement("text",cD({},Aa(y,!0),{ref:t,x:C,y:N,className:vn("recharts-text",g),textAnchor:l,fill:d.includes("url")?uL:d}),h.map((T,A)=>{var L=T.words.join(b?"":" ");return w.createElement("tspan",{x:C,dy:A===0?k:s,key:"".concat(L,"-").concat(A)},L)}))});r4.displayName="Text";var Iue=["offset"],Pue=["labelRef"];function hL(e,t){if(e==null)return{};var r,n,s=Oue(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(n){Mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mue(e,t,r){return(t=Rue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rue(e){var t=Fue(e,"string");return typeof t=="symbol"?t:t+""}function Fue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rh.apply(null,arguments)}var Lue=e=>{var{value:t,formatter:r}=e,n=Zs(e.children)?t:e.children;return typeof r=="function"?r(n):n},n4=e=>e!=null&&typeof e=="function",Bue=(e,t)=>{var r=Lc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Uue=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:m,clockWise:p}=s,v=(d+u)/2,g=Bue(h,m),b=g>=0?1:-1,y,C;n==="insideStart"?(y=h+b*i,C=p):n==="insideEnd"?(y=m-b*i,C=!p):n==="end"&&(y=m+b*i,C=p),C=g<=0?C:!C;var N=Gi(l,c,v,y),k=Gi(l,c,v,y+(C?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),D=Zs(e.id)?Jb("recharts-radial-line-"):e.id;return w.createElement("text",Rh({},r,{dominantBaseline:"central",className:vn("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:D,d:S})),w.createElement("textPath",{xlinkHref:"#".concat(D)},t))},$ue=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(n==="outside"){var{x:h,y:m}=Gi(s,i,l+r,u);return{x:h,y:m,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:g}=Gi(s,i,p,u);return{x:v,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Vue=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,v=p*n,g=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Ys(Ys({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var C={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m};return Ys(Ys({},C),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var N={x:i-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Ys(Ys({},N),r?{width:Math.max(N.x-r.x,0),height:c}:{})}if(s==="right"){var k={x:i+l+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"};return Ys(Ys({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:c}:{})}var S=r?{width:l,height:c}:{};return s==="insideLeft"?Ys({x:i+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?Ys({x:i+l-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},S):s==="insideTop"?Ys({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},S):s==="insideBottom"?Ys({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},S):s==="insideTopLeft"?Ys({x:i+v,y:o+u,textAnchor:b,verticalAnchor:m},S):s==="insideTopRight"?Ys({x:i+l-v,y:o+u,textAnchor:g,verticalAnchor:m},S):s==="insideBottomLeft"?Ys({x:i+v,y:o+c-u,textAnchor:b,verticalAnchor:h},S):s==="insideBottomRight"?Ys({x:i+l-v,y:o+c-u,textAnchor:g,verticalAnchor:h},S):s&&typeof s=="object"&&(Tr(s.x)||Hp(s.x))&&(Tr(s.y)||Hp(s.y))?Ys({x:i+Fm(s.x,l),y:o+Fm(s.y,c),textAnchor:"end",verticalAnchor:"end"},S):Ys({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},que=e=>"cx"in e&&Tr(e.cx);function Ll(e){var{offset:t=5}=e,r=hL(e,Iue),n=Ys({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=n,m=rA(),p=s||m;if(!p||Zs(o)&&Zs(l)&&!w.isValidElement(c)&&typeof c!="function")return null;if(w.isValidElement(c)){var{labelRef:v}=n,g=hL(n,Pue);return w.cloneElement(c,g)}var b;if(typeof c=="function"){if(b=w.createElement(c,n),w.isValidElement(b))return b}else b=Lue(n);var y=que(p),C=Aa(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Uue(n,b,C);var N=y?$ue(n):Vue(n,p);return w.createElement(r4,Rh({ref:h,className:vn("recharts-label",d)},C,N,{breakAll:u}),b)}Ll.displayName="Label";var uq=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:m,left:p,width:v,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(Tr(v)&&Tr(g)){if(Tr(u)&&Tr(h))return{x:u,y:h,width:v,height:g};if(Tr(m)&&Tr(p))return{x:m,y:p,width:v,height:g}}if(Tr(u)&&Tr(h))return{x:u,y:h,width:0,height:0};if(Tr(t)&&Tr(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},zue=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement(Ll,Rh({key:"label-implicit"},n)):$u(e)?w.createElement(Ll,Rh({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===Ll?w.cloneElement(e,Ys({key:"label-implicit"},n)):w.createElement(Ll,Rh({key:"label-implicit",content:e},n)):n4(e)?w.createElement(Ll,Rh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement(Ll,Rh({},e,{key:"label-implicit"},n)):null},Hue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=uq(t),l=L9(s,Ll).map((d,u)=>w.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!n)return l;var c=zue(t.label,r||o,i);return[c,...l]};Ll.parseViewBox=uq;Ll.renderCallByParent=Hue;var V_={},q_={},mL;function Wue(){return mL||(mL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(q_)),q_}var z_={},pL;function Gue(){return pL||(pL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(z_)),z_}var xL;function Yue(){return xL||(xL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wue(),r=Gue(),n=q3();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(V_)),V_}var H_,vL;function Kue(){return vL||(vL=1,H_=Yue().last),H_}var Xue=Kue();const Que=Hu(Xue);var Jue=["valueAccessor"],Zue=["data","dataKey","clockWise","id","textBreakAll"];function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j2.apply(null,arguments)}function gL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(r),!0).forEach(function(n){ehe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ehe(e,t,r){return(t=the(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function the(e){var t=rhe(e,"string");return typeof t=="symbol"?t:t+""}function rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yL(e,t){if(e==null)return{};var r,n,s=nhe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ahe=e=>Array.isArray(e.value)?Que(e.value):e.value;function ox(e){var{valueAccessor:t=ahe}=e,r=yL(e,Jue),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=yL(r,Zue);return!n||!n.length?null:w.createElement(ef,{className:"recharts-label-list"},n.map((d,u)=>{var h=Zs(s)?t(d,u):Xl(d&&d.payload,s),m=Zs(o)?{}:{id:"".concat(o,"-").concat(u)};return w.createElement(Ll,j2({},Aa(d,!0),c,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:Ll.parseViewBox(Zs(i)?d:bL(bL({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}ox.displayName="LabelList";function she(e,t){return e?e===!0?w.createElement(ox,{key:"labelList-implicit",data:t}):w.isValidElement(e)||n4(e)?w.createElement(ox,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(ox,j2({data:t},e,{key:"labelList-implicit"})):null:null}function ihe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=L9(n,ox).map((o,l)=>w.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=she(e.label,t);return[i,...s]}ox.renderCallByParent=ihe;function dD(){return dD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dD.apply(null,arguments)}var hq=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=vn("recharts-dot",s);return t===+t&&r===+r&&n===+n?w.createElement("circle",dD({},Aa(e,!1),R3(e),{className:i,cx:t,cy:r,r:n})):null},ohe={radiusAxis:{},angleAxis:{}},fq=Wc({name:"polarAxis",initialState:ohe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:cBe,removeRadiusAxis:dBe,addAngleAxis:uBe,removeAngleAxis:hBe}=fq.actions,lhe=fq.reducer,che={countOfBars:0,cartesianItems:[],polarItems:[]},mq=Wc({name:"graphicalItems",initialState:che,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=Vh(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=Vh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Vh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:fBe,removeBar:mBe,addCartesianGraphicalItem:dhe,replaceCartesianGraphicalItem:uhe,removeCartesianGraphicalItem:hhe,addPolarGraphicalItem:pBe,removePolarGraphicalItem:xBe}=mq.actions,fhe=mq.reducer;function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(n){mhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mhe(e,t,r){return(t=phe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function phe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vhe(e){var t=Yi(),r=w.useRef(null);return w.useEffect(()=>{var n=NL(NL({},e),{},{stackId:qU(e.stackId)});r.current===null?t(dhe(n)):r.current!==n&&t(uhe({prev:r.current,next:n})),r.current=n},[t,e]),w.useEffect(()=>()=>{r.current&&(t(hhe(r.current)),r.current=null)},[t]),null}function ghe(e){var{fn:t,args:r}=e,n=Yi(),s=Gc();return w.useEffect(()=>{if(!s){var i=t(r);return n(Tce(i)),()=>{n(Ice(i))}}},[t,r,n,s]),null}var bhe=()=>{};function yhe(e){var{legendPayload:t}=e,r=Yi(),n=Gc();return w.useEffect(()=>n?bhe:(r(aae(t)),()=>{r(sae(t))}),[r,n,t]),null}function jhe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(Jb(t)),n=w.useRef(e);return n.current!==e&&(r.current=Jb(t),n.current=e),r.current}var Nhe=Gt([Ki],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),whe=Gt([Nhe,cf,df],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),a4=()=>Xr(whe),She=()=>Xr(bde);function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return(t=khe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function khe(e){var t=_he(e,"string");return typeof t=="symbol"?t:t+""}function _he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ehe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=SL(SL({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Aa(s,!1)),R3(s)),l;return w.isValidElement(s)?l=w.cloneElement(s,o):typeof s=="function"?l=s(o):l=w.createElement(hq,o),w.createElement(ef,{className:"recharts-active-dot"},l)};function CL(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Xr(oy),o=She();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Zs(l)?null:Ehe({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var kL=()=>{},Dhe=w.createContext({addErrorBar:kL,removeErrorBar:kL}),Ahe=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,m]=w.useState([]),p=w.useCallback(b=>{m(y=>[...y,b])},[m]),v=w.useCallback(b=>{m(y=>y.filter(C=>C!==b))},[m]),g=Gc();return w.createElement(Dhe.Provider,{value:{addErrorBar:p,removeErrorBar:v}},w.createElement(vhe,{type:d,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:g}),t)};function pq(e,t){var r,n,s=Xr(d=>hf(d,e)),i=Xr(d=>Qm(d,t)),o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Ol.allowDataOverflow,l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Ml.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function The(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=a4(),{needClipX:i,needClipY:o,needClip:l}=pq(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var Ihe=e=>{var{chartData:t}=e,r=Yi(),n=Gc();return w.useEffect(()=>n?()=>{}:(r(XF(t)),()=>{r(XF(void 0))}),[t,r,n]),null},_L={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xq=Wc({name:"brush",initialState:_L,reducers:{setBrushSettings(e,t){return t.payload==null?_L:t.payload}}}),{setBrushSettings:vBe}=xq.actions,Phe=xq.reducer;function Ohe(e,t,r){return(t=Mhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mhe(e){var t=Rhe(e,"string");return typeof t=="symbol"?t:t+""}function Rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class s4{static create(t){return new s4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}Ohe(s4,"EPS",1e-4);function Fhe(e){return(e%180+180)%180}var Lhe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fhe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Bhe={dots:[],areas:[],lines:[]},vq=Wc({name:"referenceElements",initialState:Bhe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Vh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Vh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Vh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:gBe,removeDot:bBe,addArea:yBe,removeArea:jBe,addLine:NBe,removeLine:wBe}=vq.actions,Uhe=vq.reducer,$he=w.createContext(void 0),Vhe=e=>{var{children:t}=e,[r]=w.useState("".concat(Jb("recharts"),"-clip")),n=a4();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return w.createElement($he.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function W_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gq(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function qhe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Lhe(n,r)}function zhe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function N2(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Hhe(e,t){return gq(e,t+1)}function Whe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var v=n?.[c];if(v===void 0)return{v:gq(n,d)};var g=c,b,y=()=>(b===void 0&&(b=r(v,g)),b),C=v.coordinate,N=c===0||N2(e,C,y,u,l);N||(c=0,u=o,d+=1),N&&(u=C+e*(y()/2+s),c+=d)},m;d<=i.length;)if(m=h(),m)return m.v;return[]}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(n){Ghe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ghe(e,t,r){return(t=Yhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yhe(e){var t=Khe(e,"string");return typeof t=="symbol"?t:t+""}function Khe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xhe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(m){var p=i[m],v,g=()=>(v===void 0&&(v=r(p,m)),v);if(m===o-1){var b=e*(p.coordinate+e*g()/2-c);i[m]=p=uo(uo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=uo(uo({},p),{},{tickCoord:p.coordinate});var y=N2(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+s),i[m]=uo(uo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Qhe(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=n[l-1],h=r(u,l-1),m=e*(u.coordinate+e*h/2-d);o[l-1]=u=uo(uo({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var p=N2(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=uo(uo({},u),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(C){var N=o[C],k,S=()=>(k===void 0&&(k=r(N,C)),k);if(C===0){var D=e*(N.coordinate-e*S()/2-c);o[C]=N=uo(uo({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else o[C]=N=uo(uo({},N),{},{tickCoord:N.coordinate});var E=N2(e,N.tickCoord,S,c,d);E&&(c=N.tickCoord+e*(S()/2+s),o[C]=uo(uo({},N),{},{isShow:!0}))},b=0;b<v;b++)g(b);return o}function i4(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Tr(c)||qy.isSsr){var m;return(m=Hhe(s,Tr(c)?c:0))!==null&&m!==void 0?m:[]}var p=[],v=l==="top"||l==="bottom"?"width":"height",g=u&&v==="width"?Fb(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(N,k)=>{var S=typeof d=="function"?d(N.value,k):N.value;return v==="width"?qhe(Fb(S,{fontSize:t,letterSpacing:r}),g,h):Fb(S,{fontSize:t,letterSpacing:r})[v]},y=s.length>=2?Lc(s[1].coordinate-s[0].coordinate):1,C=zhe(i,y,v);return c==="equidistantPreserveStart"?Whe(y,C,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Qhe(y,C,b,s,o,c==="preserveStartEnd"):p=Xhe(y,C,b,s,o),p.filter(N=>N.isShow))}var Jhe=["viewBox"],Zhe=["viewBox"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(null,arguments)}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){o4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AL(e,t){if(e==null)return{};var r,n,s=efe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function efe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o4(e,t,r){return(t=tfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tfe(e){var t=rfe(e,"string");return typeof t=="symbol"?t:t+""}function rfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Jm extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=AL(t,Jhe),i=this.props,{viewBox:o}=i,l=AL(i,Zhe);return!W_(n,o)||!W_(s,l)||!W_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,m,p,v,g,b=c?-1:1,y=t.tickSize||l,C=Tr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!c*i,m=p-b*y,g=m-b*d,v=C;break;case"left":m=p=t.coordinate,h=r+ +!c*s,u=h-b*y,v=u-b*d,g=C;break;case"right":m=p=t.coordinate,h=r+ +c*s,u=h+b*y,v=u+b*d,g=C;break;default:u=h=t.coordinate,p=n+ +c*i,m=p+b*y,g=m+b*d,v=C;break}return{line:{x1:u,y1:m,x2:h,y2:p},tick:{x:v,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=ni(ni(ni({},Aa(this.props,!1)),Aa(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=ni(ni({},c),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=ni(ni({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return w.createElement("line",Q0({},c,{className:vn("recharts-cartesian-axis-line",gx(l,"className"))}))}static renderTickItem(t,r,n){var s,i=vn(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))s=w.cloneElement(t,ni(ni({},r),{},{className:i}));else if(typeof t=="function")s=t(ni(ni({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=vn(o,t.className)),s=w.createElement(r4,Q0({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=i4(ni(ni({},this.props),{},{ticks:n}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=Aa(this.props,!1),p=Aa(o,!1),v=ni(ni({},m),{},{fill:"none"},Aa(s,!1)),g=d.map((b,y)=>{var{line:C,tick:N}=this.getTickLineCoord(b),k=ni(ni(ni(ni({textAnchor:u,verticalAnchor:h},m),{},{stroke:"none",fill:i},p),N),{},{index:y,payload:b,visibleTicksCount:d.length,tickFormatter:l});return w.createElement(ef,Q0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},R9(this.props,b,y)),s&&w.createElement("line",Q0({},v,C,{className:vn("recharts-cartesian-axis-tick-line",gx(s,"className"))})),o&&Jm.renderTickItem(o,k,"".concat(typeof l=="function"?l(b.value,y):b.value).concat(c||"")))});return g.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:w.createElement(ef,{className:vn("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Ll.renderCallByParent(this.props))}}o4(Jm,"displayName","CartesianAxis");o4(Jm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var nfe=["x1","y1","x2","y2","key"],afe=["offset"],sfe=["xAxisId","yAxisId"],ife=["xAxisId","yAxisId"];function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){ofe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ofe(e,t,r){return(t=lfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lfe(e){var t=cfe(e,"string");return typeof t=="symbol"?t:t+""}function cfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(null,arguments)}function w2(e,t){if(e==null)return{};var r,n,s=dfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ufe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return w.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function bq(e,t){var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=w2(t,nfe),d=Aa(c,!1),{offset:u}=d,h=w2(d,afe);r=w.createElement("line",Kp({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function hfe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=w2(e,sfe),c=s.map((d,u)=>{var h=po(po({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return bq(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function ffe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=w2(e,ife),c=s.map((d,u)=>{var h=po(po({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return bq(n,h)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function mfe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%t.length;return w.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function pfe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%r.length;return w.createElement("rect",{key:"react-".concat(m),x:h,y:i,width:v,height:l,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var xfe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return $U(i4(po(po(po({},Jm.defaultProps),r),{},{ticks:VU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},vfe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return $U(i4(po(po(po({},Jm.defaultProps),r),{},{ticks:VU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},gfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function yq(e){var t=nA(),r=aA(),n=GU(),s=po(po({},Qv(e,gfe)),{},{x:Tr(e.x)?e.x:n.left,y:Tr(e.y)?e.y:n.top,width:Tr(e.width)?e.width:n.width,height:Tr(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:p}=s,v=Gc(),g=Xr(A=>$F(A,"xAxis",i,v)),b=Xr(A=>$F(A,"yAxis",o,v));if(!Tr(d)||d<=0||!Tr(u)||u<=0||!Tr(l)||l!==+l||!Tr(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||xfe,C=s.horizontalCoordinatesGenerator||vfe,{horizontalPoints:N,verticalPoints:k}=s;if((!N||!N.length)&&typeof C=="function"){var S=m&&m.length,D=C({yAxis:b?po(po({},b),{},{ticks:S?m:b.ticks}):void 0,width:t,height:r,offset:n},S?!0:h);Rb(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}if((!k||!k.length)&&typeof y=="function"){var E=p&&p.length,T=y({xAxis:g?po(po({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:n},E?!0:h);Rb(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(k=T)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(ufe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),w.createElement(mfe,Kp({},s,{horizontalPoints:N})),w.createElement(pfe,Kp({},s,{verticalPoints:k})),w.createElement(hfe,Kp({},s,{offset:n,horizontalPoints:N,xAxis:g,yAxis:b})),w.createElement(ffe,Kp({},s,{offset:n,verticalPoints:k,xAxis:g,yAxis:b})))}yq.displayName="CartesianGrid";var jq=(e,t,r,n)=>PV(e,"xAxis",t,n),Nq=(e,t,r,n)=>IV(e,"xAxis",t,n),wq=(e,t,r,n)=>PV(e,"yAxis",r,n),Sq=(e,t,r,n)=>IV(e,"yAxis",r,n),bfe=Gt([Za,jq,wq,Nq,Sq],(e,t,r,n,s)=>lf(e,"xAxis")?F5(t,n,!1):F5(r,s,!1)),yfe=(e,t,r,n,s)=>{var i,o=Za(e),l=lf(o,"xAxis"),c;if(l?c=nD(e,"yAxis",r,n):c=nD(e,"xAxis",t,n),c!=null){var{dataKey:d,stackId:u}=s;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h?.find(m=>m.key===d)}}},jfe=(e,t,r,n,s)=>s,Nfe=Gt([aV,jfe],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&qU(t.stackId)===r.stackId&&t.data===r.data))return t}),wfe=Gt([Za,jq,wq,Nq,Sq,yfe,R$,bfe,Nfe],(e,t,r,n,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||s==null||n.length===0||s.length===0||l==null)){var{data:m}=c,p;if(m&&m.length>0?p=m:p=d?.slice(u,h+1),p!=null){var v=void 0;return Vfe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:v,bandSize:l})}}}),Sfe=["layout","type","stroke","connectNulls","isRange"],Cfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Cq(e,t){if(e==null)return{};var r,n,s=kfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(n){pS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pS(e,t,r){return(t=_fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _fe(e){var t=Efe(e,"string");return typeof t=="symbol"?t:t+""}function Efe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(null,arguments)}function S2(e,t){return e&&e!=="none"?e:t}var Dfe=e=>{var{dataKey:t,name:r,stroke:n,fill:s,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:S2(n,s),value:zU(r,t),payload:e}]};function Afe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:zU(o,t),hide:l,type:e.tooltipType,color:S2(n,i),unit:c}}}var Tfe=(e,t)=>{var r;if(w.isValidElement(e))r=w.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=vn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=w.createElement(hq,Tm({},t,{className:n}))}return r};function Ife(e,t){return e==null?!1:t?!0:e.length===1}function Pfe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:s,dot:i,dataKey:o}=n;if(!Ife(r,i))return null;var l=B9(i),c=Aa(n,!1),d=Aa(i,!0),u=r.map((m,p)=>{var v=Xp(Xp(Xp({key:"dot-".concat(p),r:3},c),d),{},{index:p,cx:m.x,cy:m.y,dataKey:o,value:m.value,payload:m.payload,points:r});return Tfe(i,v)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return w.createElement(ef,Tm({className:"recharts-area-dots"},h),u)}function uD(e){var{points:t,baseLine:r,needClip:n,clipPathId:s,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,m=Cq(i,Sfe);return w.createElement(w.Fragment,null,t?.length>1&&w.createElement(ef,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},w.createElement(kN,Tm({},Aa(m,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&w.createElement(kN,Tm({},Aa(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&w.createElement(kN,Tm({},Aa(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),w.createElement(Pfe,{points:t,props:i,clipPathId:s}),o&&ox.renderCallByParent(i,t))}function Ofe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].y,o=n[n.length-1].y;if(!Uo(i)||!Uo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.x||0));return Tr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Tr(c)?w.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function Mfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].x,o=n[n.length-1].x;if(!Uo(i)||!Uo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.y||0));return Tr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Tr(c)?w.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function Rfe(e){var{alpha:t,layout:r,points:n,baseLine:s,strokeWidth:i}=e;return r==="vertical"?w.createElement(Ofe,{alpha:t,points:n,baseLine:s,strokeWidth:i}):w.createElement(Mfe,{alpha:t,points:n,baseLine:s,strokeWidth:i})}function Ffe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=n,v=jhe(n,"recharts-area-"),[g,b]=w.useState(!0),y=w.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),C=w.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]),N=s.current,k=i.current;return w.createElement(H5,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:C,key:v},S=>{var{t:D}=S;if(N){var E=N.length/o.length,T=D===1?o:o.map((L,P)=>{var O=Math.floor(P*E);if(N[O]){var Q=N[O];return Xp(Xp({},L),{},{x:_0(Q.x,L.x,D),y:_0(Q.y,L.y,D)})}return L}),A;return Tr(l)?A=_0(k,l,D):Zs(l)||ec(l)?A=_0(k,0,D):A=l.map((L,P)=>{var O=Math.floor(P*E);if(Array.isArray(k)&&k[O]){var Q=k[O];return Xp(Xp({},L),{},{x:_0(Q.x,L.x,D),y:_0(Q.y,L.y,D)})}return L}),D>0&&(s.current=T,i.current=A),w.createElement(uD,{points:T,baseLine:A,needClip:t,clipPathId:r,props:n,showLabels:!g})}return D>0&&(s.current=o,i.current=l),w.createElement(ef,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(r)},w.createElement(Rfe,{alpha:D,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),w.createElement(ef,{clipPath:"url(#animationClipPath-".concat(r,")")},w.createElement(uD,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function Lfe(e){var{needClip:t,clipPathId:r,props:n}=e,{points:s,baseLine:i,isAnimationActive:o}=n,l=w.useRef(null),c=w.useRef(),d=l.current,u=c.current;return o&&s&&s.length&&(d!==s||u!==i)?w.createElement(Ffe,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:c}):w.createElement(uD,{points:s,baseLine:i,needClip:t,clipPathId:r,props:n,showLabels:!0})}class Bfe extends w.PureComponent{constructor(){super(...arguments),pS(this,"id",Jb("recharts-area-"))}render(){var t,{hide:r,dot:n,points:s,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:m,id:p,baseLine:v}=this.props;if(r)return null;var g=vn("recharts-area",i),b=Zs(p)?this.id:p,{r:y=3,strokeWidth:C=2}=(t=Aa(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},N=B9(n),k=y*2+C;return w.createElement(w.Fragment,null,w.createElement(ef,{className:g},c&&w.createElement("defs",null,w.createElement(The,{clipPathId:b,xAxisId:d,yAxisId:u}),!N&&w.createElement("clipPath",{id:"clipPath-dots-".concat(b)},w.createElement("rect",{x:l-k/2,y:o-k/2,width:h+k,height:m+k}))),w.createElement(Lfe,{needClip:c,clipPathId:b,props:this.props})),w.createElement(CL,{points:s,mainColor:S2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&w.createElement(CL,{points:v,mainColor:S2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kq={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!qy.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Ufe(e){var t,r=Qv(e,kq),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:m,legendType:p,stroke:v,xAxisId:g,yAxisId:b}=r,y=Cq(r,Cfe),C=sA(),N=JV(),{needClip:k}=pq(g,b),S=Gc(),D=w.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:E,isRange:T,baseLine:A}=(t=Xr(z=>wfe(z,g,b,S,D)))!==null&&t!==void 0?t:{},{height:L,width:P,x:O,y:Q}=a4();return C!=="horizontal"&&C!=="vertical"||N!=="AreaChart"&&N!=="ComposedChart"?null:w.createElement(Bfe,Tm({},y,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:A,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:L,hide:h,layout:C,isAnimationActive:m,isRange:T,legendType:p,needClip:k,points:E,stroke:v,width:P,left:O,top:Q,xAxisId:g,yAxisId:b}))}var $fe=(e,t,r,n,s)=>{var i=r??t;if(Tr(i))return i;var o=e==="horizontal"?s:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Vfe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,v=s&&s.length,g=$fe(i,o,r,l,c),b=i==="horizontal",y=!1,C=d.map((k,S)=>{var D;v?D=s[u+S]:(D=Xl(k,n),Array.isArray(D)?y=!0:D=[g,D]);var E=D[1]==null||v&&!t&&Xl(k,n)==null;return b?{x:NR({axis:l,ticks:h,bandSize:p,entry:k,index:S}),y:E?null:c.scale(D[1]),value:D,payload:k}:{x:E?null:l.scale(D[1]),y:NR({axis:c,ticks:m,bandSize:p,entry:k,index:S}),value:D,payload:k}}),N;return v||y?N=C.map(k=>{var S=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:S!=null&&k.y!=null?c.scale(S):null}:{x:S!=null?l.scale(S):null,y:k.y}}):N=b?c.scale(g):l.scale(g),{points:C,baseLine:N,isRange:y}}class J0 extends w.PureComponent{render(){return w.createElement(Ahe,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},w.createElement(yhe,{legendPayload:Dfe(this.props)}),w.createElement(ghe,{fn:Afe,args:this.props}),w.createElement(Ufe,this.props))}}pS(J0,"displayName","Area");pS(J0,"defaultProps",kq);function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){qfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qfe(e,t,r){return(t=zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zfe(e){var t=Hfe(e,"string");return typeof t=="symbol"?t:t+""}function Hfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wfe={xAxis:{},yAxis:{},zAxis:{}},_q=Wc({name:"cartesianAxis",initialState:Wfe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=OL(OL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Gfe,removeXAxis:Yfe,addYAxis:Kfe,removeYAxis:Xfe,addZAxis:SBe,removeZAxis:CBe,updateYAxisWidth:Qfe}=_q.actions,Jfe=_q.reducer,Zfe=["children"],eme=["dangerouslySetInnerHTML","ticks"];function Eq(e,t,r){return(t=tme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tme(e){var t=rme(e,"string");return typeof t=="symbol"?t:t+""}function rme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(null,arguments)}function Dq(e,t){if(e==null)return{};var r,n,s=nme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ame(e){var t=Yi(),r=w.useMemo(()=>{var{children:i}=e,o=Dq(e,Zfe);return o},[e]),n=Xr(i=>hf(i,r.id)),s=r===n;return w.useEffect(()=>(t(Gfe(r)),()=>{t(Yfe(r))}),[r,t]),s?e.children:null}var sme=e=>{var{xAxisId:t,className:r}=e,n=Xr(WU),s=Gc(),i="xAxis",o=Xr(p=>rg(p,i,t,s)),l=Xr(p=>TV(p,i,t,s)),c=Xr(p=>xce(p,t)),d=Xr(p=>jce(p,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,m=Dq(e,eme);return w.createElement(Jm,hD({},m,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:vn("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},ime=e=>{var t,r,n,s,i;return w.createElement(ame,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},w.createElement(sme,e))};class l4 extends w.Component{render(){return w.createElement(ime,this.props)}}Eq(l4,"displayName","XAxis");Eq(l4,"defaultProps",{allowDataOverflow:Ol.allowDataOverflow,allowDecimals:Ol.allowDecimals,allowDuplicatedCategory:Ol.allowDuplicatedCategory,height:Ol.height,hide:!1,mirror:Ol.mirror,orientation:Ol.orientation,padding:Ol.padding,reversed:Ol.reversed,scale:Ol.scale,tickCount:Ol.tickCount,type:Ol.type,xAxisId:0});var ome=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(r?n:0);return Math.round(d)}return 0},lme=["dangerouslySetInnerHTML","ticks"];function Aq(e,t,r){return(t=cme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cme(e){var t=dme(e,"string");return typeof t=="symbol"?t:t+""}function dme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fD(){return fD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fD.apply(null,arguments)}function ume(e,t){if(e==null)return{};var r,n,s=hme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fme(e){var t=Yi();return w.useEffect(()=>(t(Kfe(e)),()=>{t(Xfe(e))}),[e,t]),null}var mme=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=w.useRef(null),l=w.useRef(null),c=Xr(WU),d=Gc(),u=Yi(),h="yAxis",m=Xr(N=>rg(N,h,r,d)),p=Xr(N=>wce(N,r)),v=Xr(N=>Nce(N,r)),g=Xr(N=>TV(N,h,r,d));if(w.useLayoutEffect(()=>{var N;if(!(s!=="auto"||!p||n4(i)||w.isValidElement(i))){var k=o.current,S=k==null||(N=k.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:D,tickMargin:E}=k.props,T=ome({ticks:S,label:l.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(p.width)!==Math.round(T)&&u(Qfe({id:r,width:T}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p?.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,C=ume(e,lme);return w.createElement(Jm,fD({},C,{ref:o,labelRef:l,scale:m,x:v.x,y:v.y,width:p.width,height:p.height,className:vn("recharts-".concat(h," ").concat(h),n),viewBox:c,ticks:g}))},pme=e=>{var t,r,n,s,i;return w.createElement(w.Fragment,null,w.createElement(fme,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),w.createElement(mme,e))},xme={allowDataOverflow:Ml.allowDataOverflow,allowDecimals:Ml.allowDecimals,allowDuplicatedCategory:Ml.allowDuplicatedCategory,hide:!1,mirror:Ml.mirror,orientation:Ml.orientation,padding:Ml.padding,reversed:Ml.reversed,scale:Ml.scale,tickCount:Ml.tickCount,type:Ml.type,width:Ml.width,yAxisId:0};class c4 extends w.Component{render(){return w.createElement(pme,this.props)}}Aq(c4,"displayName","YAxis");Aq(c4,"defaultProps",xme);var G_={exports:{}},Y_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function vme(){if(ML)return Y_;ML=1;var e=Hv();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Y_.useSyncExternalStoreWithSelector=function(c,d,u,h,m){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(S){if(!y){if(y=!0,C=S,S=h(S),m!==void 0&&v.hasValue){var D=v.value;if(m(D,S))return N=D}return N=S}if(D=N,r(C,S))return D;var E=h(S);return m!==void 0&&m(D,E)?(C=S,D):(C=S,N=E)}var y=!1,C,N,k=u===void 0?null:u;return[function(){return b(d())},k===null?void 0:function(){return b(k())}]},[d,u,h,m]);var g=n(c,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),l(g),g},Y_}var RL;function gme(){return RL||(RL=1,G_.exports=vme()),G_.exports}gme();function bme(e){e()}function yme(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bme(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var FL={notify(){},get:()=>[]};function jme(e,t){let r,n=FL,s=0,i=!1;function o(g){u();const b=n.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){s++,r||(r=e.subscribe(c),n=yme())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=FL)}function m(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return v}var Nme=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wme=Nme(),Sme=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cme=Sme(),kme=()=>wme||Cme?w.useLayoutEffect:w.useEffect,_me=kme(),Eme=Symbol.for("react-redux-context"),Dme=typeof globalThis<"u"?globalThis:{};function Ame(){if(!w.createContext)return{};const e=Dme[Eme]??=new Map;let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var Tme=Ame();function Ime(e){const{children:t,context:r,serverState:n,store:s}=e,i=w.useMemo(()=>{const c=jme(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=w.useMemo(()=>s.getState(),[s]);_me(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||Tme;return w.createElement(l.Provider,{value:i},t)}var Pme=Ime,Ome=(e,t)=>t,d4=Gt([Ome,Za,Ple,Di,GV,ff,Cde,Ki],Ade),u4=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Tq=Vc("mouseClick"),Iq=Vy();Iq.startListening({actionCreator:Tq,effect:(e,t)=>{var r=e.payload,n=d4(t.getState(),u4(r));n?.activeIndex!=null&&t.dispatch(Mce({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var mD=Vc("mouseMove"),Pq=Vy();Pq.startListening({actionCreator:mD,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared),i=d4(n,u4(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(UV({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(BV()))}});function Mme(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var LL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Oq=Wc({name:"rootProps",initialState:LL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:LL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Rme=Oq.reducer,{updateOptions:Fme}=Oq.actions,Mq=Wc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:kBe}=Mq.actions,Lme=Mq.reducer,Rq=Vc("keyDown"),Fq=Vc("focus"),h4=Vy();h4.startListening({actionCreator:Rq,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(YA(s,Fx(r))),l=ff(r);if(i==="Enter"){var c=y2(r,"axis","hover",String(s.index));t.dispatch(sD({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=_ce(r),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,m=o+h*u;if(!(l==null||m>=l.length||m<0)){var p=y2(r,"axis","hover",String(m));t.dispatch(sD({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});h4.startListening({actionCreator:Fq,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=y2(r,"axis","hover",String(i));t.dispatch(sD({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var kc=Vc("externalEvent"),Lq=Vy();Lq.startListening({actionCreator:kc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:xde(r),activeDataKey:mde(r),activeIndex:oy(r),activeLabel:XV(r),activeTooltipIndex:oy(r),isTooltipActive:vde(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Bme=Gt([ng],e=>e.tooltipItemPayloads),Ume=Gt([Bme,Jy,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),Bq=Vc("touchMove"),Uq=Vy();Uq.startListening({actionCreator:Bq,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared);if(s==="axis"){var i=d4(n,u4({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(UV({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(Hne),u=(o=c.getAttribute(Wne))!==null&&o!==void 0?o:void 0,h=Ume(t.getState(),d,u);t.dispatch(Oce({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var $me=gU({brush:Phe,cartesianAxis:Jfe,chartData:Gde,graphicalItems:fhe,layout:vne,legend:iae,options:Vde,polarAxis:lhe,polarOptions:Lme,referenceElements:Uhe,rootProps:Rme,tooltip:Rce}),Vme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Vre({reducer:$me,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Iq.middleware,Pq.middleware,h4.middleware,Lq.middleware,Uq.middleware]),devTools:{serialize:{replacer:Mme},name:"recharts-".concat(r)}})};function qme(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Gc(),i=w.useRef(null);if(s)return r;i.current==null&&(i.current=Vme(t,n));var o=Y3;return w.createElement(Pme,{context:o,store:i.current},r)}function zme(e){var{layout:t,width:r,height:n,margin:s}=e,i=Yi(),o=Gc();return w.useEffect(()=>{o||(i(mne(t)),i(pne({width:r,height:n})),i(fne(s)))},[i,o,t,r,n,s]),null}function Hme(e){var t=Yi();return w.useEffect(()=>{t(Fme(e))},[t,e]),null}var Wme=["children"];function Gme(e,t){if(e==null)return{};var r,n,s=Yme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function C2(){return C2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C2.apply(null,arguments)}var Kme={width:"100%",height:"100%"},Xme=w.forwardRef((e,t)=>{var r=nA(),n=aA(),s=KU();if(!s2(r)||!s2(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,w.createElement(F3,C2({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:Kme,ref:t}),i)}),Qme=e=>{var{children:t}=e,r=Xr(Xw);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return w.createElement(F3,{width:n,height:s,x:o,y:i},t)},BL=w.forwardRef((e,t)=>{var{children:r}=e,n=Gme(e,Wme),s=Gc();return s?w.createElement(Qme,null,r):w.createElement(Xme,C2({ref:t},n),r)});function Jme(){var e=Yi(),[t,r]=w.useState(null),n=Xr(zne);return w.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Uo(i)&&i!==n&&e(xne(i))}},[t,e,n]),r}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zme(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){epe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function epe(e,t,r){return(t=tpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tpe(e){var t=rpe(e,"string");return typeof t=="symbol"?t:t+""}function rpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var npe=w.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:v,onTouchStart:g,style:b,width:y}=e,C=Yi(),[N,k]=w.useState(null),[S,D]=w.useState(null);Xde();var E=Jme(),T=w.useCallback(M=>{E(M),typeof t=="function"&&t(M),k(M),D(M)},[E,t,k,D]),A=w.useCallback(M=>{C(Tq(M)),C(kc({handler:i,reactEvent:M}))},[C,i]),L=w.useCallback(M=>{C(mD(M)),C(kc({handler:d,reactEvent:M}))},[C,d]),P=w.useCallback(M=>{C(BV()),C(kc({handler:u,reactEvent:M}))},[C,u]),O=w.useCallback(M=>{C(mD(M)),C(kc({handler:h,reactEvent:M}))},[C,h]),Q=w.useCallback(()=>{C(Fq())},[C]),z=w.useCallback(M=>{C(Rq(M.key))},[C]),re=w.useCallback(M=>{C(kc({handler:o,reactEvent:M}))},[C,o]),U=w.useCallback(M=>{C(kc({handler:l,reactEvent:M}))},[C,l]),X=w.useCallback(M=>{C(kc({handler:c,reactEvent:M}))},[C,c]),B=w.useCallback(M=>{C(kc({handler:m,reactEvent:M}))},[C,m]),Y=w.useCallback(M=>{C(kc({handler:g,reactEvent:M}))},[C,g]),K=w.useCallback(M=>{C(Bq(M)),C(kc({handler:v,reactEvent:M}))},[C,v]),ue=w.useCallback(M=>{C(kc({handler:p,reactEvent:M}))},[C,p]);return w.createElement(nq.Provider,{value:N},w.createElement(U9.Provider,{value:S},w.createElement("div",{className:vn("recharts-wrapper",n),style:Zme({position:"relative",cursor:"default",width:y,height:s},b),onClick:A,onContextMenu:re,onDoubleClick:U,onFocus:Q,onKeyDown:z,onMouseDown:X,onMouseEnter:L,onMouseLeave:P,onMouseMove:O,onMouseUp:B,onTouchEnd:ue,onTouchMove:K,onTouchStart:Y,ref:T},r)))}),ape=["children","className","width","height","style","compact","title","desc"];function spe(e,t){if(e==null)return{};var r,n,s=ipe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ipe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ope=w.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=spe(e,ape),h=Aa(u,!1);return l?w.createElement(BL,{otherAttributes:h,title:c,desc:d},r):w.createElement(npe,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(BL,{otherAttributes:h,title:c,desc:d,ref:t},w.createElement(Vhe,null,r)))}),lpe=["width","height"];function pD(){return pD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pD.apply(null,arguments)}function cpe(e,t){if(e==null)return{};var r,n,s=dpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var upe={top:5,right:5,bottom:5,left:5},hpe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:upe,reverseStackOrder:!1,syncMethod:"index"},fpe=w.forwardRef(function(t,r){var n,s=Qv(t.categoricalChartProps,hpe),{width:i,height:o}=s,l=cpe(s,lpe);if(!s2(i)||!s2(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:m}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(qme,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},w.createElement(Ihe,{chartData:m.data}),w.createElement(zme,{width:i,height:o,layout:s.layout,margin:s.margin}),w.createElement(Hme,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),w.createElement(ope,pD({},l,{width:i,height:o,ref:r})))}),mpe=["axis"],ppe=w.forwardRef((e,t)=>w.createElement(fpe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mpe,tooltipPayloadSearcher:Ude,categoricalChartProps:e,ref:t}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vpe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),$L=e=>{const t=vpe(e);return t.charAt(0).toUpperCase()+t.slice(1)},$q=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),gpe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...bpe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$q("lucide",s),...!i&&!gpe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>w.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=(e,t)=>{const r=w.forwardRef(({className:n,...s},i)=>w.createElement(ype,{ref:i,iconNode:t,className:$q(`lucide-${xpe($L(e))}`,`lucide-${e}`,n),...s}));return r.displayName=$L(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Npe=Zy("credit-card",jpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Spe=Zy("dollar-sign",wpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kpe=Zy("file-text",Cpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Epe=Zy("shopping-cart",_pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ape=Zy("trending-up",Dpe),Tpe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[u,h]=w.useState(!0),[m,p]=w.useState(new Date().getFullYear()),[v]=w.useState(localStorage.getItem("selectedCompanyId")||""),[g]=w.useState(localStorage.getItem("financialYear")||""),b=new Date().getFullYear(),y=[b-1,b,b+1],C=(k,S)=>{const D=new URL(k);return Object.entries(S).forEach(([E,T])=>{T&&D.searchParams.append(E,T)}),D.toString()};w.useEffect(()=>{(async()=>{h(!0);try{const S={companyId:v,financialYear:g},[D,E,T,A,L]=await Promise.all([fetch(C("/api/purchase-orders",S)),fetch(C("/api/sales-orders",S)),fetch(C("/api/stock/data",S)),fetch(C("/api/invoiceform",S)),fetch(C("/api/billingform",S))]),[P,O,Q,z,re]=await Promise.all([D.json(),E.json(),T.json(),A.json(),L.json()]);t(P),n(O),i(Q),l(z),d(re)}catch(S){console.error("Data fetch error:",S)}finally{h(!1)}})()},[v,g]);const N=w.useMemo(()=>{const k=Array.from({length:12},(D,E)=>({month:new Date(2e3,E).toLocaleString("default",{month:"short"}),purchases:0,sales:0,inventory:0,invoices:0,billings:0})),S=(D,E,T,A)=>{D?.forEach(L=>{const P=new Date(L[E]);if(!isNaN(P)&&P.getFullYear()===Number(m)){const O=P.getMonth();k[O][A]+=T?L[T]||0:1}})};return S(e,"date","finalTotal","purchases"),S(r,"date","finalTotal","sales"),S(s,"createdAt",null,"inventory"),S(o,"documentDate","finalTotal","invoices"),S(c,"documentDate","finalTotal","billings"),k},[e,r,s,o,c,m]);return e.reduce((k,S)=>k+(S.finalTotal||0),0),r.reduce((k,S)=>k+(S.finalTotal||0),0),o.reduce((k,S)=>k+(S.finalTotal||0),0),c.reduce((k,S)=>k+(S.finalTotal||0),0),u?a.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"spinner-border text-light mb-3",role:"status",style:{width:"4rem",height:"4rem"},children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"fs-5",children:"Loading your dashboard..."})]})}):a.jsxs("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[a.jsx("style",{children:`
        .card-hover {
          transition: all 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
          border: none;
          border-radius: 15px;
          overflow: hidden;
          position: relative;
        }
        .metric-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .chart-container {
          border-radius: 15px;
          border: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .stat-item {
          padding: 12px;
          margin: 5px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.7);
          transition: all 0.3s ease;
        }
        .stat-item:hover {
          background: rgba(255,255,255,0.9);
          transform: translateX(5px);
        }
        .progress-custom {
          height: 8px;
          border-radius: 10px;
          background: rgba(0,0,0,0.1);
        }
        .progress-bar-custom {
          border-radius: 10px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
      `}),a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"d-grid gap-4 mb-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[{title:"Purchase Orders",value:e.length,icon:Epe,color:"primary",bgColor:"bg-primary"},{title:"Sales Orders",value:r.length,icon:Spe,color:"success",bgColor:"bg-success"},{title:"Vendor Invoices",value:o.length,icon:kpe,color:"info",bgColor:"bg-info"},{title:"Customer Invoices",value:c.length,icon:Npe,color:"danger",bgColor:"bg-danger"}].map((k,S)=>a.jsx("div",{className:"card metric-card card-hover h-100",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("div",{className:`${k.bgColor} bg-opacity-10 p-3 rounded-3 text-center`,children:a.jsx(k.icon,{size:24,className:`text-${k.color}`})})}),a.jsxs("div",{className:"col-8 text-end",children:[a.jsx("div",{className:`h4 fw-bold text-${k.color} mb-1`,children:k.value}),a.jsx("div",{className:"small text-muted",children:k.title})]})]})})},S))}),a.jsx("div",{className:"row g-4 mb-4",children:a.jsx("div",{className:"col-lg-12",children:a.jsxs("div",{className:"card chart-container",children:[a.jsxs("div",{className:"card-header bg-transparent border-0 d-flex justify-content-between align-items-center",children:[a.jsxs("h5",{className:"card-title fw-bold mb-0 d-flex align-items-center",children:[a.jsx(Ape,{size:20,className:"text-primary me-2"}),"Monthly Financial Trends (",m,")"]}),a.jsx("select",{className:"form-select w-auto",value:m,onChange:k=>p(Number(k.target.value)),children:y.map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsx("div",{className:"card-body",children:a.jsx(fue,{width:"100%",height:350,children:a.jsxs(ppe,{data:N,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#28a745",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#28a745",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorPurchases",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#007bff",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#007bff",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorInvoices",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6f42c1",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#6f42c1",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorBillings",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#dc3545",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#dc3545",stopOpacity:0})]})]}),a.jsx(yq,{strokeDasharray:"3 3",stroke:"#e9ecef"}),a.jsx(l4,{dataKey:"month",stroke:"#6c757d"}),a.jsx(c4,{tickFormatter:k=>`${(k/1e3).toFixed(0)}k`,stroke:"#6c757d"}),a.jsx(aue,{formatter:(k,S)=>["inventory"].includes(S.toLowerCase())?[`${k}`,S]:[`${k.toLocaleString()}`,S],contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),a.jsx(Qw,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),a.jsx(J0,{type:"monotone",dataKey:"sales",stroke:"#28a745",fillOpacity:1,fill:"url(#colorSales)",strokeWidth:2,name:"Sales Orders"}),a.jsx(J0,{type:"monotone",dataKey:"purchases",stroke:"#007bff",fillOpacity:1,fill:"url(#colorPurchases)",strokeWidth:2,name:"Purchase Orders"}),a.jsx(J0,{type:"monotone",dataKey:"invoices",stroke:"#6f42c1",fillOpacity:1,fill:"url(#colorInvoices)",strokeWidth:2,name:"Invoices"}),a.jsx(J0,{type:"monotone",dataKey:"billings",stroke:"#dc3545",fillOpacity:1,fill:"url(#colorBillings)",strokeWidth:2,name:"Billings"})]})})})]})})})]})]})},Ipe=()=>{const e=Gu(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,u]=w.useState(""),h=async m=>{m.preventDefault(),o(!0);try{const p=await Oe.post("/api/users/login",{identifier:d,password:n});console.log(" Logged in user:",p.data.user);const v=p.data.user;localStorage.setItem("user",JSON.stringify(v)),console.log("User data:",v),alert("Login successful!"),e("/loginscreen")}catch(p){alert("Login failed: "+(p.response?.data?.error||"Unknown error"))}finally{o(!1)}};return a.jsx("div",{className:"container-fluid min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundImage:'url("/assets/img/loginbg.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:a.jsx("div",{className:"row w-100 justify-content-center",children:a.jsxs("div",{className:"col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4",children:[a.jsxs("div",{className:"card shadow-lg border-0 rounded-4",style:{maxHeight:"90vh",height:"auto"},children:[a.jsxs("div",{className:"card-body p-4 overflow-auto",children:[a.jsx("div",{className:"text-center mb-3",children:a.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"60px",height:"60px"},children:a.jsx("i",{className:"ti ti-building text-white",style:{fontSize:"1.8rem"}})})}),a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("h1",{className:"fw-bold text-primary mb-1",style:{fontSize:"1.5rem"},children:"Jyothi Cloud ERP"}),a.jsx("p",{style:{textAlign:"center"},children:"(Endless Possibilities)"}),a.jsx("p",{className:"text-muted mb-0 small",children:"Enter your credentials to access your account"})]}),a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-mail me-2 text-primary"}),"Email or Phone"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-user text-muted"})}),a.jsx("input",{type:"text",id:"identifier",value:d,onChange:m=>u(m.target.value),className:"form-control border-start-0 py-2",placeholder:"Enter your email or phone number",required:!0,disabled:i})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-lock me-2 text-primary"}),"Password"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-key text-muted"})}),a.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:m=>s(m.target.value),className:"form-control border-start-0 border-end-0 py-2",placeholder:"Enter your password",required:!0,disabled:i}),a.jsx("span",{className:"input-group-text bg-light border-start-0 cursor-pointer",onClick:()=>c(!l),style:{cursor:"pointer"},children:a.jsx("i",{className:`ti ${l?"ti-eye text-primary":"ti-eye-off text-muted"}`})})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-semibold",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ti ti-login me-2"}),"Sign In"]})})})]})]}),a.jsx("div",{className:"card-footer bg-light border-0 text-center py-3",children:a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(qp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsx("div",{className:"bg-white bg-opacity-90 rounded-3 p-2 d-inline-block",children:a.jsxs("div",{className:"d-flex gap-3 justify-content-center",children:[a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-phone me-1"}),"Support"]}),a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-mail me-1"}),"Contact"]}),a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-book me-1"}),"Guide"]})]})})})]})})})},Ppe=({onOpen:e})=>{const[t,r]=w.useState([]),[n,s]=w.useState(""),[i,o]=w.useState(()=>new Date().toISOString().split("T")[0]),[l,c]=w.useState([]),[d,u]=w.useState(""),[h,m]=w.useState(!1),p=Gu(),v=JSON.parse(localStorage.getItem("user"))?.id;console.log("User ID from localStorage:",localStorage.getItem("user")),console.log("Fetching companies for user ID:",v),w.useEffect(()=>{if(!v)return;m(!0),Oe.get(`/api/users/${v}/companies`).then(N=>{r(N.data),N.data.length>0&&s(N.data[0]._id)}).catch(N=>{console.error("Error fetching companies:",N)}).finally(()=>{m(!1)});const b=[],C=new Date().getFullYear();for(let N=2020;N<=C;N++)b.push(`01/04/${N} - 31/03/${N+1}`);c(b.reverse())},[v]);const g=()=>{if(!n||!i||!d)return alert("Please select all fields");localStorage.setItem("selectedCompanyId",n),localStorage.setItem("financialYear",d),console.log("financial",localStorage.getItem("financialYear")),console.log("company",localStorage.getItem("selectedCompanyId")),e?.({companyId:n,financialYear:d}),p("/")};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"row w-100",children:a.jsx("div",{className:"col-12 col-md-6 col-lg-4 mx-auto",children:a.jsxs("div",{className:"card shadow-lg border-0",children:[a.jsx("div",{className:"card-header bg-primary  py-4",children:a.jsx("h3",{className:"mb-0 text-white text-center ",children:"Jyothi Cloud ERP"})}),a.jsx("div",{className:"card-body p-4",children:h?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading companies..."})]}):a.jsxs("form",{children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"ti ti-building me-2 text-primary"}),"Company"]}),a.jsxs("select",{className:"form-select form-select-lg",value:n,onChange:b=>s(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Choose a company..."}),t.map(b=>a.jsx("option",{value:b._id,children:b.name},b._id))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"bi bi-calendar-range me-2 text-primary"}),"Transaction Period"]}),a.jsxs("select",{className:"form-select form-select-lg",value:d,onChange:b=>u(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select financial year..."}),l.map((b,y)=>a.jsx("option",{value:b,children:b},y))]})]}),a.jsx("div",{className:"d-grid gap-2",children:a.jsxs("button",{type:"button",onClick:g,className:"btn btn-primary btn-sm",disabled:!n||!i||!d,children:[a.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"Open Transaction"]})})]})}),a.jsxs("div",{className:"card-footer text-center py-3 bg-light",children:[a.jsxs("small",{className:"text-muted",children:[a.jsx("i",{className:"bi bi-shield-check me-1"}),"Secure transaction portal"]}),a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(qp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})]})]})})})}),a.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css",rel:"stylesheet"})]})},Ope=()=>{const[e,t]=w.useState({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]}),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!0);w.useEffect(()=>{(async()=>{try{const[p,v]=await Promise.all([Oe.get("/api/companies"),Oe.get("/api/roles")]);n(p.data),i(v.data)}catch(p){console.error("Error fetching data:",p),alert("Error loading companies and roles")}finally{l(!1)}})()},[]);const c=(m,p)=>{t({...e,[m]:p})},d=m=>{const v=e.roles.includes(m)?e.roles.filter(g=>g!==m):[...e.roles,m];t({...e,roles:v})},u=async m=>{m.preventDefault();try{await Oe.post("/api/users/create",e),alert("User created successfully!"),t({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]})}catch(p){console.error("Error creating user:",p),alert("Error creating user. Please try again.")}},h=m=>e.roles.includes(m);return o?a.jsx("div",{className:"container mt-5",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading form data..."})]})})})}):a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-10 col-lg-8",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create New User"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Basic Information"]})})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"username",className:"form-label",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Username ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"username",className:"form-control",placeholder:"Enter username",value:e.username,onChange:m=>c("username",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"email",className:"form-label",children:[a.jsx("i",{className:"fas fa-envelope me-2"}),"Email ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email address",value:e.email,onChange:m=>c("email",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"phone",className:"form-label",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Phone ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"tel",id:"phone",className:"form-control",placeholder:"Enter phone number",value:e.phone,onChange:m=>{const p=m.target.value.replace(/[^0-9]/g,"").slice(0,10);(p.length===0||/^[6-9]/.test(p))&&c("phone",p)},required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"password",className:"form-label",children:[a.jsx("i",{className:"fas fa-lock me-2"}),"Password ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",value:e.password,onChange:m=>c("password",m.target.value),required:!0})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("label",{htmlFor:"address",className:"form-label",children:[a.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Address ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("textarea",{id:"address",className:"form-control",rows:"3",placeholder:"Enter full address",value:e.address,onChange:m=>c("address",m.target.value),required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"companies",className:"form-label",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Select Companies ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("select",{id:"companies",multiple:!0,className:"form-select",style:{minHeight:"120px"},value:e.companies,onChange:m=>c("companies",Array.from(m.target.selectedOptions,p=>p.value)),required:!0,children:r.map(m=>a.jsx("option",{value:m._id,children:m.name},m._id))}),a.jsxs("div",{className:"form-text",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"Hold Ctrl (Cmd on Mac) to select multiple companies"]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-2",children:[a.jsx("i",{className:"fas fa-users-cog me-2"}),"Assign Roles"]})})}),a.jsx("div",{className:"row",children:s.map(m=>a.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:`role-${m._id}`,checked:h(m._id),onChange:()=>d(m._id)}),a.jsxs("label",{className:"form-check-label",htmlFor:`role-${m._id}`,children:[a.jsx("strong",{children:m.roleName}),a.jsx("br",{}),a.jsxs("small",{className:"text-muted",children:["(",m.roleId,")"]})]})]})},m._id))}),a.jsx("div",{className:"d-grid mt-4",children:a.jsxs("button",{type:"submit",className:"btn btn-success btn-lg",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create User"]})})]})})]})})})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var k2={};k2.version="0.18.5";var Vq=1252,Mpe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],f4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},m4=function(e){Mpe.indexOf(e)!=-1&&(Vq=f4[0]=e)};function Rpe(){m4(1252)}var Cd=function(e){m4(e)};function p4(){Cd(1200),Rpe()}function VL(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Fpe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function qq(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ab=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Fpe(e.slice(2)):t==254&&r==255?qq(e.slice(2)):t==65279?e.slice(1):e},Mj=function(t){return String.fromCharCode(t)},qL=function(t){return String.fromCharCode(t)},cy,Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function dy(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Sm.charAt(i)+Sm.charAt(o)+Sm.charAt(l)+Sm.charAt(c);return t}function nc(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Sm.indexOf(e.charAt(d++)),o=Sm.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Sm.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Sm.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),mf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Lm(e){return En?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function zL(e){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ql=function(t){return En?mf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function xS(e){if(typeof ArrayBuffer>"u")return ql(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Zm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Lpe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function x4(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return x4(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ni=En?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:mf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Bpe(e){for(var t=[],r=0,n=e.length+250,s=Lm(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Lm(65535),n=65530)}return t.push(s.slice(0,r)),Ni(t)}var Bo=/\u0000/g,Tb=/[\u0001-\u0006]/g;function av(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function kd(e,t){var r=""+e;return r.length>=t?r:ys("0",t-r.length)+r}function v4(e,t){var r=""+e;return r.length>=t?r:ys(" ",t-r.length)+r}function _2(e,t){var r=""+e;return r.length>=t?r:r+ys(" ",t-r.length)}function Upe(e,t){var r=""+Math.round(e);return r.length>=t?r:ys("0",t-r.length)+r}function $pe(e,t){var r=""+e;return r.length>=t?r:ys("0",t-r.length)+r}var HL=Math.pow(2,32);function A0(e,t){if(e>HL||e<-HL)return Upe(e,t);var r=Math.round(e);return $pe(r,t)}function E2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var WL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],K_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Vpe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var nn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},GL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},qpe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function D2(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<t&&(h=Math.floor(s),l=h*o+i,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,n*l,u];var m=Math.floor(n*l/u);return[m,n*l-m*u,u]}function Qp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Kpe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var zq=new Date(1899,11,31,0,0,0),zpe=zq.getTime(),Hpe=new Date(1900,2,1,0,0,0);function Hq(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Hpe&&(r+=24*60*60*1e3),(r-(zpe+(e.getTimezoneOffset()-zq.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function g4(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Wpe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Gpe(e){var t=e<0?12:11,r=g4(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ype(e){var t=g4(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function uy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Gpe(e):t===10?r=e.toFixed(10).substr(0,12):r=Ype(e),g4(Wpe(r.toUpperCase()))}function Nx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):uy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return zc(14,Hq(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Kpe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Xpe(e,t,r,n){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return K_[r.m-1][1];case 5:return K_[r.m-1][0];default:return K_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return WL[r.q][0];default:return WL[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?kd(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=kd(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?kd(c,d):"";return u}function Cm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Wq=/%/g;function Qpe(e,t,r){var n=t.replace(Wq,""),s=t.length-n.length;return zh(e,n,r*Math.pow(10,2*s))+ys("%",s)}function Jpe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return zh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Gq(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Gq(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Yq=/# (\?+)( ?)\/( ?)(\d+)/;function Zpe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?ys(" ",e[1].length+1+e[4].length):v4(o,e[1].length)+e[2]+"/"+e[3]+kd(l,e[4].length))}function exe(e,t,r){return r+(t===0?"":""+t)+ys(" ",e[1].length+2+e[4].length)}var Kq=/^#*0*\.([0#]+)/,Xq=/\).*[0#]/,Qq=/\(###\) ###\\?-####/;function Oo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function YL(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function KL(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function txe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function rxe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function _c(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Xq)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_c("n",n,r):"("+_c("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Jpe(e,t,r);if(t.indexOf("%")!==-1)return Qpe(e,t,r);if(t.indexOf("E")!==-1)return Gq(t,r);if(t.charCodeAt(0)===36)return"$"+_c(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+A0(c,t.length);if(t.match(/^[#?]+$/))return s=A0(r,0),s==="0"&&(s=""),s.length>t.length?s:Oo(t.substr(0,t.length-s.length))+s;if(i=t.match(Yq))return Zpe(i,c,d);if(t.match(/^#+0+$/))return d+A0(c,t.length-t.indexOf("0"));if(i=t.match(Kq))return s=YL(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Oo(i[1])).replace(/\.$/,"."+Oo(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+ys("0",Oo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+YL(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(A0(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_c(e,t,-r):Cm(""+(Math.floor(r)+txe(r,i[1].length)))+"."+kd(KL(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return _c(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=av(_c(e,t.replace(/[\\-]/g,""),r)),o=0,av(av(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(Qq))return s=_c(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=D2(c,Math.pow(10,o)-1,!1),s=""+d,u=zh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_2(l[2],o),u.length<i[4].length&&(u=Oo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=D2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?v4(l[1],o)+i[2]+"/"+i[3]+_2(l[2],o):ys(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=A0(r,0),t.length<=s.length?s:Oo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Oo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=KL(r,i[1].length),r<0?"-"+_c(e,t,-r):Cm(rxe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?kd(0,3-v.length):"")+v})+"."+kd(o,i[1].length);switch(t){case"###,##0.00":return _c(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Cm(A0(c,0));return p!=="0"?d+p:"";case"###,###.00":return _c(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return _c(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function nxe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return zh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function axe(e,t,r){var n=t.replace(Wq,""),s=t.length-n.length;return zh(e,n,r*Math.pow(10,2*s))+ys("%",s)}function Jq(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Jq(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Xq)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xu("n",n,r):"("+xu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return nxe(e,t,r);if(t.indexOf("%")!==-1)return axe(e,t,r);if(t.indexOf("E")!==-1)return Jq(t,r);if(t.charCodeAt(0)===36)return"$"+xu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+kd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Oo(t.substr(0,t.length-s.length))+s;if(i=t.match(Yq))return exe(i,c,d);if(t.match(/^#+0+$/))return d+kd(c,t.length-t.indexOf("0"));if(i=t.match(Kq))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Oo(i[1])).replace(/\.$/,"."+Oo(i[1])),s=s.replace(/\.(\d*)$/,function(v,g){return"."+g+ys("0",Oo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xu(e,t,-r):Cm(""+r)+"."+ys("0",i[1].length);if(i=t.match(/^#,#*,#0/))return xu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=av(xu(e,t.replace(/[\\-]/g,""),r)),o=0,av(av(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(Qq))return s=xu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=D2(c,Math.pow(10,o)-1,!1),s=""+d,u=zh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_2(l[2],o),u.length<i[4].length&&(u=Oo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=D2(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?v4(l[1],o)+i[2]+"/"+i[3]+_2(l[2],o):ys(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Oo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Oo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xu(e,t,-r):Cm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?kd(0,3-v.length):"")+v})+"."+kd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Cm(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return xu(e,t.slice(0,t.lastIndexOf(".")),r)+Oo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function zh(e,t,r){return(r|0)===r?xu(e,t,r):_c(e,t,r)}function sxe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Zq=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sg(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":E2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Zq))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ixe(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",d,u,h,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!E2(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),v=p==="("||p===")"?p:"t";s[s.length]={t:v,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=Qp(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=Qp(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=Qp(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",o+=5,m="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Zq)){if(d==null&&(d=Qp(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sg(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,y=0,C;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",b<1&&(b=1);break;case"s":(C=s[o].v.match(/\.0+$/))&&(y=Math.max(y,C[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",k;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Xpe(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(k=o+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[o].v+=s[k].v,s[k]={v:"",t:";"},++k;N+=s[o].v,o=k-1;break;case"G":s[o].t="t",s[o].v=Nx(t,r);break}var S="",D,E;if(N.length>0){N.charCodeAt(0)==40?(D=t<0&&N.charCodeAt(0)===45?-t:t,E=zh("n",N,D)):(D=t<0&&n>1?-t:t,E=zh("n",N,D),D<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),k=E.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var A=s.length;if(T===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(k>=s[o].v.length-1?(k-=s[o].v.length,s[o].v=E.substr(k+1,s[o].v.length)):k<0?s[o].v="":(s[o].v=E.substr(0,k+1),k=-1),s[o].t="t",A=o);k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(k=E.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)k>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=E.charAt(k--)+S);s[o].v=S,s[o].t="t",A=o}for(k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v),k=E.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)k<E.length&&(S+=E.charAt(k++));s[o].v=S,s[o].t="t",A=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(D=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=zh(s[o].t,s[o].v,D),s[o].t="t");var L="";for(o=0;o!==s.length;++o)s[o]!=null&&(L+=s[o].v);return L}var XL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function QL(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function oxe(e,t){var r=sxe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(XL),l=r[1].match(XL);return QL(t,o)?[n,r[0]]:QL(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function zc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:nn)[e],n==null&&(n=r.table&&r.table[GL[e]]||nn[GL[e]]),n==null&&(n=qpe[e]||"General");break}if(E2(n,0))return Nx(t,r);t instanceof Date&&(t=Hq(t,r.date1904));var s=oxe(n,t);if(E2(s[1]))return Nx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ixe(s[1],t,r,s[0])}function Hh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(nn[r]==null){t<0&&(t=r);continue}if(nn[r]==e){t=r;break}}t<0&&(t=391)}return nn[t]=e,t}function vS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Hh(e[t],t)}function ig(){nn=Vpe()}var lxe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ez=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function cxe(e){var t=typeof e=="number"?nn[e]:e;return t=t.replace(ez,"(\\d+)"),new RegExp("^"+t+"$")}function dxe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(ez)||[]).forEach(function(h,m){var p=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:n==-1&&s==-1&&i==-1?u:d+"T"+u}var uxe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,T=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[A]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(E){var T=0,A=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=E[L];for(L=0;L!=256;++L)for(A=E[L],T=256+L;T<4096;T+=256)A=P[T]=A>>>8^E[A&255];var O=[];for(L=1;L!=16;++L)O[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],m=s[7],p=s[8],v=s[9],g=s[10],b=s[11],y=s[12],C=s[13],N=s[14];function k(E,T){for(var A=T^-1,L=0,P=E.length;L<P;)A=A>>>8^r[(A^E.charCodeAt(L++))&255];return~A}function S(E,T){for(var A=T^-1,L=E.length-15,P=0;P<L;)A=N[E[P++]^A&255]^C[E[P++]^A>>8&255]^y[E[P++]^A>>16&255]^b[E[P++]^A>>>24]^g[E[P++]]^v[E[P++]]^p[E[P++]]^m[E[P++]]^h[E[P++]]^u[E[P++]]^d[E[P++]]^c[E[P++]]^l[E[P++]]^o[E[P++]]^i[E[P++]]^r[E[P++]];for(L+=15;P<L;)A=A>>>8^r[(A^E[P++])&255];return~A}function D(E,T){for(var A=T^-1,L=0,P=E.length,O=0,Q=0;L<P;)O=E.charCodeAt(L++),O<128?A=A>>>8^r[(A^O)&255]:O<2048?(A=A>>>8^r[(A^(192|O>>6&31))&255],A=A>>>8^r[(A^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,Q=E.charCodeAt(L++)&1023,A=A>>>8^r[(A^(240|O>>8&7))&255],A=A>>>8^r[(A^(128|O>>2&63))&255],A=A>>>8^r[(A^(128|Q>>6&15|(O&3)<<4))&255],A=A>>>8^r[(A^(128|Q&63))&255]):(A=A>>>8^r[(A^(224|O>>12&15))&255],A=A>>>8^r[(A^(128|O>>6&63))&255],A=A>>>8^r[(A^(128|O&63))&255]);return~A}return e.table=r,e.bstr=k,e.buf=S,e.str=D,e}(),Hr=function(){var t={};t.version="1.2.1";function r(me,Be){for(var Ae=me.split("/"),ke=Be.split("/"),Me=0,$e=0,pt=Math.min(Ae.length,ke.length);Me<pt;++Me){if($e=Ae[Me].length-ke[Me].length)return $e;if(Ae[Me]!=ke[Me])return Ae[Me]<ke[Me]?-1:1}return Ae.length-ke.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(0,Be+1)}function s(me){if(me.charAt(me.length-1)=="/")return s(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(Be+1)}function i(me,Be){typeof Be=="string"&&(Be=new Date(Be));var Ae=Be.getHours();Ae=Ae<<6|Be.getMinutes(),Ae=Ae<<5|Be.getSeconds()>>>1,me.write_shift(2,Ae);var ke=Be.getFullYear()-1980;ke=ke<<4|Be.getMonth()+1,ke=ke<<5|Be.getDate(),me.write_shift(2,ke)}function o(me){var Be=me.read_shift(2)&65535,Ae=me.read_shift(2)&65535,ke=new Date,Me=Ae&31;Ae>>>=5;var $e=Ae&15;Ae>>>=4,ke.setMilliseconds(0),ke.setFullYear(Ae+1980),ke.setMonth($e-1),ke.setDate(Me);var pt=Be&31;Be>>>=5;var jt=Be&63;return Be>>>=6,ke.setHours(Be),ke.setMinutes(jt),ke.setSeconds(pt<<1),ke}function l(me){qi(me,0);for(var Be={},Ae=0;me.l<=me.length-4;){var ke=me.read_shift(2),Me=me.read_shift(2),$e=me.l+Me,pt={};switch(ke){case 21589:Ae=me.read_shift(1),Ae&1&&(pt.mtime=me.read_shift(4)),Me>5&&(Ae&2&&(pt.atime=me.read_shift(4)),Ae&4&&(pt.ctime=me.read_shift(4))),pt.mtime&&(pt.mt=new Date(pt.mtime*1e3));break}me.l=$e,Be[ke]=pt}return Be}var c;function d(){return c||(c={})}function u(me,Be){if(me[0]==80&&me[1]==75)return Te(me,Be);if((me[0]|32)==109&&(me[1]|32)==105)return rr(me,Be);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var Ae=3,ke=512,Me=0,$e=0,pt=0,jt=0,ot=0,bt=[],yt=me.slice(0,512);qi(yt,0);var Yt=h(yt);switch(Ae=Yt[0],Ae){case 3:ke=512;break;case 4:ke=4096;break;case 0:if(Yt[1]==0)return Te(me,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ae)}ke!==512&&(yt=me.slice(0,ke),qi(yt,28));var sr=me.slice(0,ke);m(yt,Ae);var mr=yt.read_shift(4,"i");if(Ae===3&&mr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mr);yt.l+=4,pt=yt.read_shift(4,"i"),yt.l+=4,yt.chk("00100000","Mini Stream Cutoff Size: "),jt=yt.read_shift(4,"i"),Me=yt.read_shift(4,"i"),ot=yt.read_shift(4,"i"),$e=yt.read_shift(4,"i");for(var ir=-1,Ve=0;Ve<109&&(ir=yt.read_shift(4,"i"),!(ir<0));++Ve)bt[Ve]=ir;var dr=p(me,ke);b(ot,$e,dr,ke,bt);var or=C(dr,pt,bt,ke);or[pt].name="!Directory",Me>0&&jt!==Q&&(or[jt].name="!MiniFAT"),or[bt[0]].name="!FAT",or.fat_addrs=bt,or.ssz=ke;var $r={},gn=[],vt=[],br=[];N(pt,or,dr,gn,Me,$r,vt,jt),v(vt,br,gn),gn.shift();var hr={FileIndex:vt,FullPaths:br};return Be&&Be.raw&&(hr.raw={header:sr,sectors:dr}),hr}function h(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(z,"Header Signature: "),me.l+=16;var Be=me.read_shift(2,"u");return[me.read_shift(2,"u"),Be]}function m(me,Be){var Ae=9;switch(me.l+=2,Ae=me.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ae);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ae)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function p(me,Be){for(var Ae=Math.ceil(me.length/Be)-1,ke=[],Me=1;Me<Ae;++Me)ke[Me-1]=me.slice(Me*Be,(Me+1)*Be);return ke[Ae-1]=me.slice(Ae*Be),ke}function v(me,Be,Ae){for(var ke=0,Me=0,$e=0,pt=0,jt=0,ot=Ae.length,bt=[],yt=[];ke<ot;++ke)bt[ke]=yt[ke]=ke,Be[ke]=Ae[ke];for(;jt<yt.length;++jt)ke=yt[jt],Me=me[ke].L,$e=me[ke].R,pt=me[ke].C,bt[ke]===ke&&(Me!==-1&&bt[Me]!==Me&&(bt[ke]=bt[Me]),$e!==-1&&bt[$e]!==$e&&(bt[ke]=bt[$e])),pt!==-1&&(bt[pt]=ke),Me!==-1&&ke!=bt[ke]&&(bt[Me]=bt[ke],yt.lastIndexOf(Me)<jt&&yt.push(Me)),$e!==-1&&ke!=bt[ke]&&(bt[$e]=bt[ke],yt.lastIndexOf($e)<jt&&yt.push($e));for(ke=1;ke<ot;++ke)bt[ke]===ke&&($e!==-1&&bt[$e]!==$e?bt[ke]=bt[$e]:Me!==-1&&bt[Me]!==Me&&(bt[ke]=bt[Me]));for(ke=1;ke<ot;++ke)if(me[ke].type!==0){if(jt=ke,jt!=bt[jt])do jt=bt[jt],Be[ke]=Be[jt]+"/"+Be[ke];while(jt!==0&&bt[jt]!==-1&&jt!=bt[jt]);bt[ke]=-1}for(Be[0]+="/",ke=1;ke<ot;++ke)me[ke].type!==2&&(Be[ke]+="/")}function g(me,Be,Ae){for(var ke=me.start,Me=me.size,$e=[],pt=ke;Ae&&Me>0&&pt>=0;)$e.push(Be.slice(pt*O,pt*O+O)),Me-=O,pt=Up(Ae,pt*4);return $e.length===0?Ut(0):Ni($e).slice(0,me.size)}function b(me,Be,Ae,ke,Me){var $e=Q;if(me===Q){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var pt=Ae[me],jt=(ke>>>2)-1;if(!pt)return;for(var ot=0;ot<jt&&($e=Up(pt,ot*4))!==Q;++ot)Me.push($e);b(Up(pt,ke-4),Be-1,Ae,ke,Me)}}function y(me,Be,Ae,ke,Me){var $e=[],pt=[];Me||(Me=[]);var jt=ke-1,ot=0,bt=0;for(ot=Be;ot>=0;){Me[ot]=!0,$e[$e.length]=ot,pt.push(me[ot]);var yt=Ae[Math.floor(ot*4/ke)];if(bt=ot*4&jt,ke<4+bt)throw new Error("FAT boundary crossed: "+ot+" 4 "+ke);if(!me[yt])break;ot=Up(me[yt],bt)}return{nodes:$e,data:c6([pt])}}function C(me,Be,Ae,ke){var Me=me.length,$e=[],pt=[],jt=[],ot=[],bt=ke-1,yt=0,Yt=0,sr=0,mr=0;for(yt=0;yt<Me;++yt)if(jt=[],sr=yt+Be,sr>=Me&&(sr-=Me),!pt[sr]){ot=[];var ir=[];for(Yt=sr;Yt>=0;){ir[Yt]=!0,pt[Yt]=!0,jt[jt.length]=Yt,ot.push(me[Yt]);var Ve=Ae[Math.floor(Yt*4/ke)];if(mr=Yt*4&bt,ke<4+mr)throw new Error("FAT boundary crossed: "+Yt+" 4 "+ke);if(!me[Ve]||(Yt=Up(me[Ve],mr),ir[Yt]))break}$e[sr]={nodes:jt,data:c6([ot])}}return $e}function N(me,Be,Ae,ke,Me,$e,pt,jt){for(var ot=0,bt=ke.length?2:0,yt=Be[me].data,Yt=0,sr=0,mr;Yt<yt.length;Yt+=128){var ir=yt.slice(Yt,Yt+128);qi(ir,64),sr=ir.read_shift(2),mr=C4(ir,0,sr-bt),ke.push(mr);var Ve={name:mr,type:ir.read_shift(1),color:ir.read_shift(1),L:ir.read_shift(4,"i"),R:ir.read_shift(4,"i"),C:ir.read_shift(4,"i"),clsid:ir.read_shift(16),state:ir.read_shift(4,"i"),start:0,size:0},dr=ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2);dr!==0&&(Ve.ct=k(ir,ir.l-8));var or=ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2);or!==0&&(Ve.mt=k(ir,ir.l-8)),Ve.start=ir.read_shift(4,"i"),Ve.size=ir.read_shift(4,"i"),Ve.size<0&&Ve.start<0&&(Ve.size=Ve.type=0,Ve.start=Q,Ve.name=""),Ve.type===5?(ot=Ve.start,Me>0&&ot!==Q&&(Be[ot].name="!StreamData")):Ve.size>=4096?(Ve.storage="fat",Be[Ve.start]===void 0&&(Be[Ve.start]=y(Ae,Ve.start,Be.fat_addrs,Be.ssz)),Be[Ve.start].name=Ve.name,Ve.content=Be[Ve.start].data.slice(0,Ve.size)):(Ve.storage="minifat",Ve.size<0?Ve.size=0:ot!==Q&&Ve.start!==Q&&Be[ot]&&(Ve.content=g(Ve,Be[ot].data,(Be[jt]||{}).data))),Ve.content&&qi(Ve.content,0),$e[mr]=Ve,pt.push(Ve)}}function k(me,Be){return new Date((Ul(me,Be+4)/1e7*Math.pow(2,32)+Ul(me,Be)/1e7-11644473600)*1e3)}function S(me,Be){return d(),u(c.readFileSync(me),Be)}function D(me,Be){var Ae=Be&&Be.type;switch(Ae||En&&Buffer.isBuffer(me)&&(Ae="buffer"),Ae||"base64"){case"file":return S(me,Be);case"base64":return u(ql(nc(me)),Be);case"binary":return u(ql(me),Be)}return u(me,Be)}function E(me,Be){var Ae=Be||{},ke=Ae.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=ke+"/",me.FileIndex[0]={name:ke,type:5}),Ae.CLSID&&(me.FileIndex[0].clsid=Ae.CLSID),T(me)}function T(me){var Be="Sh33tJ5";if(!Hr.find(me,"/"+Be)){var Ae=Ut(4);Ae[0]=55,Ae[1]=Ae[3]=50,Ae[2]=54,me.FileIndex.push({name:Be,type:2,content:Ae,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Be),A(me)}}function A(me,Be){E(me);for(var Ae=!1,ke=!1,Me=me.FullPaths.length-1;Me>=0;--Me){var $e=me.FileIndex[Me];switch($e.type){case 0:ke?Ae=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:ke=!0,isNaN($e.R*$e.L*$e.C)&&(Ae=!0),$e.R>-1&&$e.L>-1&&$e.R==$e.L&&(Ae=!0);break;default:Ae=!0;break}}if(!(!Ae&&!Be)){var pt=new Date(1987,1,19),jt=0,ot=Object.create?Object.create(null):{},bt=[];for(Me=0;Me<me.FullPaths.length;++Me)ot[me.FullPaths[Me]]=!0,me.FileIndex[Me].type!==0&&bt.push([me.FullPaths[Me],me.FileIndex[Me]]);for(Me=0;Me<bt.length;++Me){var yt=n(bt[Me][0]);ke=ot[yt],ke||(bt.push([yt,{name:s(yt).replace("/",""),type:1,clsid:U,ct:pt,mt:pt,content:null}]),ot[yt]=!0)}for(bt.sort(function(mr,ir){return r(mr[0],ir[0])}),me.FullPaths=[],me.FileIndex=[],Me=0;Me<bt.length;++Me)me.FullPaths[Me]=bt[Me][0],me.FileIndex[Me]=bt[Me][1];for(Me=0;Me<bt.length;++Me){var Yt=me.FileIndex[Me],sr=me.FullPaths[Me];if(Yt.name=s(sr).replace("/",""),Yt.L=Yt.R=Yt.C=-(Yt.color=1),Yt.size=Yt.content?Yt.content.length:0,Yt.start=0,Yt.clsid=Yt.clsid||U,Me===0)Yt.C=bt.length>1?1:-1,Yt.size=0,Yt.type=5;else if(sr.slice(-1)=="/"){for(jt=Me+1;jt<bt.length&&n(me.FullPaths[jt])!=sr;++jt);for(Yt.C=jt>=bt.length?-1:jt,jt=Me+1;jt<bt.length&&n(me.FullPaths[jt])!=n(sr);++jt);Yt.R=jt>=bt.length?-1:jt,Yt.type=1}else n(me.FullPaths[Me+1]||"")==n(sr)&&(Yt.R=Me+1),Yt.type=2}}}function L(me,Be){var Ae=Be||{};if(Ae.fileType=="mad")return Ot(me,Ae);switch(A(me),Ae.fileType){case"zip":return Ge(me,Ae)}var ke=function(mr){for(var ir=0,Ve=0,dr=0;dr<mr.FileIndex.length;++dr){var or=mr.FileIndex[dr];if(or.content){var $r=or.content.length;$r>0&&($r<4096?ir+=$r+63>>6:Ve+=$r+511>>9)}}for(var gn=mr.FullPaths.length+3>>2,vt=ir+7>>3,br=ir+127>>7,hr=vt+Ve+gn+br,qr=hr+127>>7,Qr=qr<=109?0:Math.ceil((qr-109)/127);hr+qr+Qr+127>>7>qr;)Qr=++qr<=109?0:Math.ceil((qr-109)/127);var da=[1,Qr,qr,br,gn,Ve,ir,0];return mr.FileIndex[0].size=ir<<6,da[7]=(mr.FileIndex[0].start=da[0]+da[1]+da[2]+da[3]+da[4]+da[5])+(da[6]+7>>3),da}(me),Me=Ut(ke[7]<<9),$e=0,pt=0;{for($e=0;$e<8;++$e)Me.write_shift(1,re[$e]);for($e=0;$e<8;++$e)Me.write_shift(2,0);for(Me.write_shift(2,62),Me.write_shift(2,3),Me.write_shift(2,65534),Me.write_shift(2,9),Me.write_shift(2,6),$e=0;$e<3;++$e)Me.write_shift(2,0);for(Me.write_shift(4,0),Me.write_shift(4,ke[2]),Me.write_shift(4,ke[0]+ke[1]+ke[2]+ke[3]-1),Me.write_shift(4,0),Me.write_shift(4,4096),Me.write_shift(4,ke[3]?ke[0]+ke[1]+ke[2]-1:Q),Me.write_shift(4,ke[3]),Me.write_shift(-4,ke[1]?ke[0]-1:Q),Me.write_shift(4,ke[1]),$e=0;$e<109;++$e)Me.write_shift(-4,$e<ke[2]?ke[1]+$e:-1)}if(ke[1])for(pt=0;pt<ke[1];++pt){for(;$e<236+pt*127;++$e)Me.write_shift(-4,$e<ke[2]?ke[1]+$e:-1);Me.write_shift(-4,pt===ke[1]-1?Q:pt+1)}var jt=function(mr){for(pt+=mr;$e<pt-1;++$e)Me.write_shift(-4,$e+1);mr&&(++$e,Me.write_shift(-4,Q))};for(pt=$e=0,pt+=ke[1];$e<pt;++$e)Me.write_shift(-4,X.DIFSECT);for(pt+=ke[2];$e<pt;++$e)Me.write_shift(-4,X.FATSECT);jt(ke[3]),jt(ke[4]);for(var ot=0,bt=0,yt=me.FileIndex[0];ot<me.FileIndex.length;++ot)yt=me.FileIndex[ot],yt.content&&(bt=yt.content.length,!(bt<4096)&&(yt.start=pt,jt(bt+511>>9)));for(jt(ke[6]+7>>3);Me.l&511;)Me.write_shift(-4,X.ENDOFCHAIN);for(pt=$e=0,ot=0;ot<me.FileIndex.length;++ot)yt=me.FileIndex[ot],yt.content&&(bt=yt.content.length,!(!bt||bt>=4096)&&(yt.start=pt,jt(bt+63>>6)));for(;Me.l&511;)Me.write_shift(-4,X.ENDOFCHAIN);for($e=0;$e<ke[4]<<2;++$e){var Yt=me.FullPaths[$e];if(!Yt||Yt.length===0){for(ot=0;ot<17;++ot)Me.write_shift(4,0);for(ot=0;ot<3;++ot)Me.write_shift(4,-1);for(ot=0;ot<12;++ot)Me.write_shift(4,0);continue}yt=me.FileIndex[$e],$e===0&&(yt.start=yt.size?yt.start-1:Q);var sr=$e===0&&Ae.root||yt.name;if(bt=2*(sr.length+1),Me.write_shift(64,sr,"utf16le"),Me.write_shift(2,bt),Me.write_shift(1,yt.type),Me.write_shift(1,yt.color),Me.write_shift(-4,yt.L),Me.write_shift(-4,yt.R),Me.write_shift(-4,yt.C),yt.clsid)Me.write_shift(16,yt.clsid,"hex");else for(ot=0;ot<4;++ot)Me.write_shift(4,0);Me.write_shift(4,yt.state||0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,yt.start),Me.write_shift(4,yt.size),Me.write_shift(4,0)}for($e=1;$e<me.FileIndex.length;++$e)if(yt=me.FileIndex[$e],yt.size>=4096)if(Me.l=yt.start+1<<9,En&&Buffer.isBuffer(yt.content))yt.content.copy(Me,Me.l,0,yt.size),Me.l+=yt.size+511&-512;else{for(ot=0;ot<yt.size;++ot)Me.write_shift(1,yt.content[ot]);for(;ot&511;++ot)Me.write_shift(1,0)}for($e=1;$e<me.FileIndex.length;++$e)if(yt=me.FileIndex[$e],yt.size>0&&yt.size<4096)if(En&&Buffer.isBuffer(yt.content))yt.content.copy(Me,Me.l,0,yt.size),Me.l+=yt.size+63&-64;else{for(ot=0;ot<yt.size;++ot)Me.write_shift(1,yt.content[ot]);for(;ot&63;++ot)Me.write_shift(1,0)}if(En)Me.l=Me.length;else for(;Me.l<Me.length;)Me.write_shift(1,0);return Me}function P(me,Be){var Ae=me.FullPaths.map(function(ot){return ot.toUpperCase()}),ke=Ae.map(function(ot){var bt=ot.split("/");return bt[bt.length-(ot.slice(-1)=="/"?2:1)]}),Me=!1;Be.charCodeAt(0)===47?(Me=!0,Be=Ae[0].slice(0,-1)+Be):Me=Be.indexOf("/")!==-1;var $e=Be.toUpperCase(),pt=Me===!0?Ae.indexOf($e):ke.indexOf($e);if(pt!==-1)return me.FileIndex[pt];var jt=!$e.match(Tb);for($e=$e.replace(Bo,""),jt&&($e=$e.replace(Tb,"!")),pt=0;pt<Ae.length;++pt)if((jt?Ae[pt].replace(Tb,"!"):Ae[pt]).replace(Bo,"")==$e||(jt?ke[pt].replace(Tb,"!"):ke[pt]).replace(Bo,"")==$e)return me.FileIndex[pt];return null}var O=64,Q=-2,z="d0cf11e0a1b11ae1",re=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function B(me,Be,Ae){d();var ke=L(me,Ae);c.writeFileSync(Be,ke)}function Y(me){for(var Be=new Array(me.length),Ae=0;Ae<me.length;++Ae)Be[Ae]=String.fromCharCode(me[Ae]);return Be.join("")}function K(me,Be){var Ae=L(me,Be);switch(Be&&Be.type||"buffer"){case"file":return d(),c.writeFileSync(Be.filename,Ae),Ae;case"binary":return typeof Ae=="string"?Ae:Y(Ae);case"base64":return dy(typeof Ae=="string"?Ae:Y(Ae));case"buffer":if(En)return Buffer.isBuffer(Ae)?Ae:mf(Ae);case"array":return typeof Ae=="string"?ql(Ae):Ae}return Ae}var ue;function M(me){try{var Be=me.InflateRaw,Ae=new Be;if(Ae._processChunk(new Uint8Array([3,0]),Ae._finishFlushFlag),Ae.bytesRead)ue=me;else throw new Error("zlib does not expose bytesRead")}catch(ke){console.error("cannot use native zlib: "+(ke.message||ke))}}function V(me,Be){if(!ue)return ze(me,Be);var Ae=ue.InflateRaw,ke=new Ae,Me=ke._processChunk(me.slice(me.l),ke._finishFlushFlag);return me.l+=ke.bytesRead,Me}function W(me){return ue?ue.deflateRawSync(me):ve(me)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(me){var Be=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var oe=typeof Uint8Array<"u",G=oe?new Uint8Array(256):[],ce=0;ce<256;++ce)G[ce]=se(ce);function Z(me,Be){var Ae=G[me&255];return Be<=8?Ae>>>8-Be:(Ae=Ae<<8|G[me>>8&255],Be<=16?Ae>>>16-Be:(Ae=Ae<<8|G[me>>16&255],Ae>>>24-Be))}function ae(me,Be){var Ae=Be&7,ke=Be>>>3;return(me[ke]|(Ae<=6?0:me[ke+1]<<8))>>>Ae&3}function je(me,Be){var Ae=Be&7,ke=Be>>>3;return(me[ke]|(Ae<=5?0:me[ke+1]<<8))>>>Ae&7}function de(me,Be){var Ae=Be&7,ke=Be>>>3;return(me[ke]|(Ae<=4?0:me[ke+1]<<8))>>>Ae&15}function ie(me,Be){var Ae=Be&7,ke=Be>>>3;return(me[ke]|(Ae<=3?0:me[ke+1]<<8))>>>Ae&31}function be(me,Be){var Ae=Be&7,ke=Be>>>3;return(me[ke]|(Ae<=1?0:me[ke+1]<<8))>>>Ae&127}function Ne(me,Be,Ae){var ke=Be&7,Me=Be>>>3,$e=(1<<Ae)-1,pt=me[Me]>>>ke;return Ae<8-ke||(pt|=me[Me+1]<<8-ke,Ae<16-ke)||(pt|=me[Me+2]<<16-ke,Ae<24-ke)||(pt|=me[Me+3]<<24-ke),pt&$e}function Fe(me,Be,Ae){var ke=Be&7,Me=Be>>>3;return ke<=5?me[Me]|=(Ae&7)<<ke:(me[Me]|=Ae<<ke&255,me[Me+1]=(Ae&7)>>8-ke),Be+3}function Xe(me,Be,Ae){var ke=Be&7,Me=Be>>>3;return Ae=(Ae&1)<<ke,me[Me]|=Ae,Be+1}function ct(me,Be,Ae){var ke=Be&7,Me=Be>>>3;return Ae<<=ke,me[Me]|=Ae&255,Ae>>>=8,me[Me+1]=Ae,Be+8}function xt(me,Be,Ae){var ke=Be&7,Me=Be>>>3;return Ae<<=ke,me[Me]|=Ae&255,Ae>>>=8,me[Me+1]=Ae&255,me[Me+2]=Ae>>>8,Be+16}function Re(me,Be){var Ae=me.length,ke=2*Ae>Be?2*Ae:Be+5,Me=0;if(Ae>=Be)return me;if(En){var $e=zL(ke);if(me.copy)me.copy($e);else for(;Me<me.length;++Me)$e[Me]=me[Me];return $e}else if(oe){var pt=new Uint8Array(ke);if(pt.set)pt.set(me);else for(;Me<Ae;++Me)pt[Me]=me[Me];return pt}return me.length=ke,me}function ht(me){for(var Be=new Array(me),Ae=0;Ae<me;++Ae)Be[Ae]=0;return Be}function At(me,Be,Ae){var ke=1,Me=0,$e=0,pt=0,jt=0,ot=me.length,bt=oe?new Uint16Array(32):ht(32);for($e=0;$e<32;++$e)bt[$e]=0;for($e=ot;$e<Ae;++$e)me[$e]=0;ot=me.length;var yt=oe?new Uint16Array(ot):ht(ot);for($e=0;$e<ot;++$e)bt[Me=me[$e]]++,ke<Me&&(ke=Me),yt[$e]=0;for(bt[0]=0,$e=1;$e<=ke;++$e)bt[$e+16]=jt=jt+bt[$e-1]<<1;for($e=0;$e<ot;++$e)jt=me[$e],jt!=0&&(yt[$e]=bt[jt+16]++);var Yt=0;for($e=0;$e<ot;++$e)if(Yt=me[$e],Yt!=0)for(jt=Z(yt[$e],ke)>>ke-Yt,pt=(1<<ke+4-Yt)-1;pt>=0;--pt)Be[jt|pt<<Yt]=Yt&15|$e<<4;return ke}var _t=oe?new Uint16Array(512):ht(512),Wt=oe?new Uint16Array(32):ht(32);if(!oe){for(var Ke=0;Ke<512;++Ke)_t[Ke]=0;for(Ke=0;Ke<32;++Ke)Wt[Ke]=0}(function(){for(var me=[],Be=0;Be<32;Be++)me.push(5);At(me,Wt,32);var Ae=[];for(Be=0;Be<=143;Be++)Ae.push(8);for(;Be<=255;Be++)Ae.push(9);for(;Be<=279;Be++)Ae.push(7);for(;Be<=287;Be++)Ae.push(8);At(Ae,_t,288)})();var ge=function(){for(var Be=oe?new Uint8Array(32768):[],Ae=0,ke=0;Ae<ne.length-1;++Ae)for(;ke<ne[Ae+1];++ke)Be[ke]=Ae;for(;ke<32768;++ke)Be[ke]=29;var Me=oe?new Uint8Array(259):[];for(Ae=0,ke=0;Ae<te.length-1;++Ae)for(;ke<te[Ae+1];++ke)Me[ke]=Ae;function $e(jt,ot){for(var bt=0;bt<jt.length;){var yt=Math.min(65535,jt.length-bt),Yt=bt+yt==jt.length;for(ot.write_shift(1,+Yt),ot.write_shift(2,yt),ot.write_shift(2,~yt&65535);yt-- >0;)ot[ot.l++]=jt[bt++]}return ot.l}function pt(jt,ot){for(var bt=0,yt=0,Yt=oe?new Uint16Array(32768):[];yt<jt.length;){var sr=Math.min(65535,jt.length-yt);if(sr<10){for(bt=Fe(ot,bt,+(yt+sr==jt.length)),bt&7&&(bt+=8-(bt&7)),ot.l=bt/8|0,ot.write_shift(2,sr),ot.write_shift(2,~sr&65535);sr-- >0;)ot[ot.l++]=jt[yt++];bt=ot.l*8;continue}bt=Fe(ot,bt,+(yt+sr==jt.length)+2);for(var mr=0;sr-- >0;){var ir=jt[yt];mr=(mr<<5^ir)&32767;var Ve=-1,dr=0;if((Ve=Yt[mr])&&(Ve|=yt&-32768,Ve>yt&&(Ve-=32768),Ve<yt))for(;jt[Ve+dr]==jt[yt+dr]&&dr<250;)++dr;if(dr>2){ir=Me[dr],ir<=22?bt=ct(ot,bt,G[ir+1]>>1)-1:(ct(ot,bt,3),bt+=5,ct(ot,bt,G[ir-23]>>5),bt+=3);var or=ir<8?0:ir-4>>2;or>0&&(xt(ot,bt,dr-te[ir]),bt+=or),ir=Be[yt-Ve],bt=ct(ot,bt,G[ir]>>3),bt-=3;var $r=ir<4?0:ir-2>>1;$r>0&&(xt(ot,bt,yt-Ve-ne[ir]),bt+=$r);for(var gn=0;gn<dr;++gn)Yt[mr]=yt&32767,mr=(mr<<5^jt[yt])&32767,++yt;sr-=dr-1}else ir<=143?ir=ir+48:bt=Xe(ot,bt,1),bt=ct(ot,bt,G[ir]),Yt[mr]=yt&32767,++yt}bt=ct(ot,bt,0)-1}return ot.l=(bt+7)/8|0,ot.l}return function(ot,bt){return ot.length<8?$e(ot,bt):pt(ot,bt)}}();function ve(me){var Be=Ut(50+Math.floor(me.length*1.1)),Ae=ge(me,Be);return Be.slice(0,Ae)}var xe=oe?new Uint16Array(32768):ht(32768),Ie=oe?new Uint16Array(32768):ht(32768),Ze=oe?new Uint16Array(128):ht(128),Ft=1,Qe=1;function Ye(me,Be){var Ae=ie(me,Be)+257;Be+=5;var ke=ie(me,Be)+1;Be+=5;var Me=de(me,Be)+4;Be+=4;for(var $e=0,pt=oe?new Uint8Array(19):ht(19),jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ot=1,bt=oe?new Uint8Array(8):ht(8),yt=oe?new Uint8Array(8):ht(8),Yt=pt.length,sr=0;sr<Me;++sr)pt[ee[sr]]=$e=je(me,Be),ot<$e&&(ot=$e),bt[$e]++,Be+=3;var mr=0;for(bt[0]=0,sr=1;sr<=ot;++sr)yt[sr]=mr=mr+bt[sr-1]<<1;for(sr=0;sr<Yt;++sr)(mr=pt[sr])!=0&&(jt[sr]=yt[mr]++);var ir=0;for(sr=0;sr<Yt;++sr)if(ir=pt[sr],ir!=0){mr=G[jt[sr]]>>8-ir;for(var Ve=(1<<7-ir)-1;Ve>=0;--Ve)Ze[mr|Ve<<ir]=ir&7|sr<<3}var dr=[];for(ot=1;dr.length<Ae+ke;)switch(mr=Ze[be(me,Be)],Be+=mr&7,mr>>>=3){case 16:for($e=3+ae(me,Be),Be+=2,mr=dr[dr.length-1];$e-- >0;)dr.push(mr);break;case 17:for($e=3+je(me,Be),Be+=3;$e-- >0;)dr.push(0);break;case 18:for($e=11+be(me,Be),Be+=7;$e-- >0;)dr.push(0);break;default:dr.push(mr),ot<mr&&(ot=mr);break}var or=dr.slice(0,Ae),$r=dr.slice(Ae);for(sr=Ae;sr<286;++sr)or[sr]=0;for(sr=ke;sr<30;++sr)$r[sr]=0;return Ft=At(or,xe,286),Qe=At($r,Ie,30),Be}function Le(me,Be){if(me[0]==3&&!(me[1]&3))return[Lm(Be),2];for(var Ae=0,ke=0,Me=zL(Be||1<<18),$e=0,pt=Me.length>>>0,jt=0,ot=0;(ke&1)==0;){if(ke=je(me,Ae),Ae+=3,ke>>>1)ke>>1==1?(jt=9,ot=5):(Ae=Ye(me,Ae),jt=Ft,ot=Qe);else{Ae&7&&(Ae+=8-(Ae&7));var bt=me[Ae>>>3]|me[(Ae>>>3)+1]<<8;if(Ae+=32,bt>0)for(!Be&&pt<$e+bt&&(Me=Re(Me,$e+bt),pt=Me.length);bt-- >0;)Me[$e++]=me[Ae>>>3],Ae+=8;continue}for(;;){!Be&&pt<$e+32767&&(Me=Re(Me,$e+32767),pt=Me.length);var yt=Ne(me,Ae,jt),Yt=ke>>>1==1?_t[yt]:xe[yt];if(Ae+=Yt&15,Yt>>>=4,(Yt>>>8&255)===0)Me[$e++]=Yt;else{if(Yt==256)break;Yt-=257;var sr=Yt<8?0:Yt-4>>2;sr>5&&(sr=0);var mr=$e+te[Yt];sr>0&&(mr+=Ne(me,Ae,sr),Ae+=sr),yt=Ne(me,Ae,ot),Yt=ke>>>1==1?Wt[yt]:Ie[yt],Ae+=Yt&15,Yt>>>=4;var ir=Yt<4?0:Yt-2>>1,Ve=ne[Yt];for(ir>0&&(Ve+=Ne(me,Ae,ir),Ae+=ir),!Be&&pt<mr&&(Me=Re(Me,mr+100),pt=Me.length);$e<mr;)Me[$e]=Me[$e-Ve],++$e}}}return Be?[Me,Ae+7>>>3]:[Me.slice(0,$e),Ae+7>>>3]}function ze(me,Be){var Ae=me.slice(me.l||0),ke=Le(Ae,Be);return me.l+=ke[1],ke[0]}function ut(me,Be){if(me)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function Te(me,Be){var Ae=me;qi(Ae,0);var ke=[],Me=[],$e={FileIndex:ke,FullPaths:Me};E($e,{root:Be.root});for(var pt=Ae.length-4;(Ae[pt]!=80||Ae[pt+1]!=75||Ae[pt+2]!=5||Ae[pt+3]!=6)&&pt>=0;)--pt;Ae.l=pt+4,Ae.l+=4;var jt=Ae.read_shift(2);Ae.l+=6;var ot=Ae.read_shift(4);for(Ae.l=ot,pt=0;pt<jt;++pt){Ae.l+=20;var bt=Ae.read_shift(4),yt=Ae.read_shift(4),Yt=Ae.read_shift(2),sr=Ae.read_shift(2),mr=Ae.read_shift(2);Ae.l+=8;var ir=Ae.read_shift(4),Ve=l(Ae.slice(Ae.l+Yt,Ae.l+Yt+sr));Ae.l+=Yt+sr+mr;var dr=Ae.l;Ae.l=ir+4,We(Ae,bt,yt,$e,Ve),Ae.l=dr}return $e}function We(me,Be,Ae,ke,Me){me.l+=2;var $e=me.read_shift(2),pt=me.read_shift(2),jt=o(me);if($e&8257)throw new Error("Unsupported ZIP encryption");for(var ot=me.read_shift(4),bt=me.read_shift(4),yt=me.read_shift(4),Yt=me.read_shift(2),sr=me.read_shift(2),mr="",ir=0;ir<Yt;++ir)mr+=String.fromCharCode(me[me.l++]);if(sr){var Ve=l(me.slice(me.l,me.l+sr));(Ve[21589]||{}).mt&&(jt=Ve[21589].mt),((Me||{})[21589]||{}).mt&&(jt=Me[21589].mt)}me.l+=sr;var dr=me.slice(me.l,me.l+bt);switch(pt){case 8:dr=V(me,yt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pt)}var or=!1;$e&8&&(ot=me.read_shift(4),ot==134695760&&(ot=me.read_shift(4),or=!0),bt=me.read_shift(4),yt=me.read_shift(4)),bt!=Be&&ut(or,"Bad compressed size: "+Be+" != "+bt),yt!=Ae&&ut(or,"Bad uncompressed size: "+Ae+" != "+yt),fr(ke,mr,dr,{unsafe:!0,mt:jt})}function Ge(me,Be){var Ae=Be||{},ke=[],Me=[],$e=Ut(1),pt=Ae.compression?8:0,jt=0,ot=0,bt=0,yt=0,Yt=0,sr=me.FullPaths[0],mr=sr,ir=me.FileIndex[0],Ve=[],dr=0;for(ot=1;ot<me.FullPaths.length;++ot)if(mr=me.FullPaths[ot].slice(sr.length),ir=me.FileIndex[ot],!(!ir.size||!ir.content||mr=="Sh33tJ5")){var or=yt,$r=Ut(mr.length);for(bt=0;bt<mr.length;++bt)$r.write_shift(1,mr.charCodeAt(bt)&127);$r=$r.slice(0,$r.l),Ve[Yt]=uxe.buf(ir.content,0);var gn=ir.content;pt==8&&(gn=W(gn)),$e=Ut(30),$e.write_shift(4,67324752),$e.write_shift(2,20),$e.write_shift(2,jt),$e.write_shift(2,pt),ir.mt?i($e,ir.mt):$e.write_shift(4,0),$e.write_shift(-4,Ve[Yt]),$e.write_shift(4,gn.length),$e.write_shift(4,ir.content.length),$e.write_shift(2,$r.length),$e.write_shift(2,0),yt+=$e.length,ke.push($e),yt+=$r.length,ke.push($r),yt+=gn.length,ke.push(gn),$e=Ut(46),$e.write_shift(4,33639248),$e.write_shift(2,0),$e.write_shift(2,20),$e.write_shift(2,jt),$e.write_shift(2,pt),$e.write_shift(4,0),$e.write_shift(-4,Ve[Yt]),$e.write_shift(4,gn.length),$e.write_shift(4,ir.content.length),$e.write_shift(2,$r.length),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(4,0),$e.write_shift(4,or),dr+=$e.l,Me.push($e),dr+=$r.length,Me.push($r),++Yt}return $e=Ut(22),$e.write_shift(4,101010256),$e.write_shift(2,0),$e.write_shift(2,0),$e.write_shift(2,Yt),$e.write_shift(2,Yt),$e.write_shift(4,dr),$e.write_shift(4,yt),$e.write_shift(2,0),Ni([Ni(ke),Ni(Me),$e])}var It={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Bt(me,Be){if(me.ctype)return me.ctype;var Ae=me.name||"",ke=Ae.match(/\.([^\.]+)$/);return ke&&It[ke[1]]||Be&&(ke=(Ae=Be).match(/[\.\\]([^\.\\])+$/),ke&&It[ke[1]])?It[ke[1]]:"application/octet-stream"}function Ee(me){for(var Be=dy(me),Ae=[],ke=0;ke<Be.length;ke+=76)Ae.push(Be.slice(ke,ke+76));return Ae.join(`\r
`)+`\r
`}function _e(me){var Be=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(bt){var yt=bt.charCodeAt(0).toString(16).toUpperCase();return"="+(yt.length==1?"0"+yt:yt)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ae=[],ke=Be.split(`\r
`),Me=0;Me<ke.length;++Me){var $e=ke[Me];if($e.length==0){Ae.push("");continue}for(var pt=0;pt<$e.length;){var jt=76,ot=$e.slice(pt,pt+jt);ot.charAt(jt-1)=="="?jt--:ot.charAt(jt-2)=="="?jt-=2:ot.charAt(jt-3)=="="&&(jt-=3),ot=$e.slice(pt,pt+jt),pt+=jt,pt<$e.length&&(ot+="="),Ae.push(ot)}}return Ae.join(`\r
`)}function st(me){for(var Be=[],Ae=0;Ae<me.length;++Ae){for(var ke=me[Ae];Ae<=me.length&&ke.charAt(ke.length-1)=="=";)ke=ke.slice(0,ke.length-1)+me[++Ae];Be.push(ke)}for(var Me=0;Me<Be.length;++Me)Be[Me]=Be[Me].replace(/[=][0-9A-Fa-f]{2}/g,function($e){return String.fromCharCode(parseInt($e.slice(1),16))});return ql(Be.join(`\r
`))}function wt(me,Be,Ae){for(var ke="",Me="",$e="",pt,jt=0;jt<10;++jt){var ot=Be[jt];if(!ot||ot.match(/^\s*$/))break;var bt=ot.match(/^(.*?):\s*([^\s].*)$/);if(bt)switch(bt[1].toLowerCase()){case"content-location":ke=bt[2].trim();break;case"content-type":$e=bt[2].trim();break;case"content-transfer-encoding":Me=bt[2].trim();break}}switch(++jt,Me.toLowerCase()){case"base64":pt=ql(nc(Be.slice(jt).join("")));break;case"quoted-printable":pt=st(Be.slice(jt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Me)}var yt=fr(me,ke.slice(Ae.length),pt,{unsafe:!0});$e&&(yt.ctype=$e)}function rr(me,Be){if(Y(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ae=Be&&Be.root||"",ke=(En&&Buffer.isBuffer(me)?me.toString("binary"):Y(me)).split(`\r
`),Me=0,$e="";for(Me=0;Me<ke.length;++Me)if($e=ke[Me],!!/^Content-Location:/i.test($e)&&($e=$e.slice($e.indexOf("file")),Ae||(Ae=$e.slice(0,$e.lastIndexOf("/")+1)),$e.slice(0,Ae.length)!=Ae))for(;Ae.length>0&&(Ae=Ae.slice(0,Ae.length-1),Ae=Ae.slice(0,Ae.lastIndexOf("/")+1),$e.slice(0,Ae.length)!=Ae););var pt=(ke[1]||"").match(/boundary="(.*?)"/);if(!pt)throw new Error("MAD cannot find boundary");var jt="--"+(pt[1]||""),ot=[],bt=[],yt={FileIndex:ot,FullPaths:bt};E(yt);var Yt,sr=0;for(Me=0;Me<ke.length;++Me){var mr=ke[Me];mr!==jt&&mr!==jt+"--"||(sr++&&wt(yt,ke.slice(Yt,Me),Ae),Yt=Me)}return yt}function Ot(me,Be){var Ae=Be||{},ke=Ae.boundary||"SheetJS";ke="------="+ke;for(var Me=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ke.slice(2)+'"',"","",""],$e=me.FullPaths[0],pt=$e,jt=me.FileIndex[0],ot=1;ot<me.FullPaths.length;++ot)if(pt=me.FullPaths[ot].slice($e.length),jt=me.FileIndex[ot],!(!jt.size||!jt.content||pt=="Sh33tJ5")){pt=pt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dr){return"_x"+dr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dr){return"_u"+dr.charCodeAt(0).toString(16)+"_"});for(var bt=jt.content,yt=En&&Buffer.isBuffer(bt)?bt.toString("binary"):Y(bt),Yt=0,sr=Math.min(1024,yt.length),mr=0,ir=0;ir<=sr;++ir)(mr=yt.charCodeAt(ir))>=32&&mr<128&&++Yt;var Ve=Yt>=sr*4/5;Me.push(ke),Me.push("Content-Location: "+(Ae.root||"file:///C:/SheetJS/")+pt),Me.push("Content-Transfer-Encoding: "+(Ve?"quoted-printable":"base64")),Me.push("Content-Type: "+Bt(jt,pt)),Me.push(""),Me.push(Ve?_e(yt):Ee(yt))}return Me.push(ke+`--\r
`),Me.join(`\r
`)}function er(me){var Be={};return E(Be,me),Be}function fr(me,Be,Ae,ke){var Me=ke&&ke.unsafe;Me||E(me);var $e=!Me&&Hr.find(me,Be);if(!$e){var pt=me.FullPaths[0];Be.slice(0,pt.length)==pt?pt=Be:(pt.slice(-1)!="/"&&(pt+="/"),pt=(pt+Be).replace("//","/")),$e={name:s(Be),type:2},me.FileIndex.push($e),me.FullPaths.push(pt),Me||Hr.utils.cfb_gc(me)}return $e.content=Ae,$e.size=Ae?Ae.length:0,ke&&(ke.CLSID&&($e.clsid=ke.CLSID),ke.mt&&($e.mt=ke.mt),ke.ct&&($e.ct=ke.ct)),$e}function yr(me,Be){E(me);var Ae=Hr.find(me,Be);if(Ae){for(var ke=0;ke<me.FileIndex.length;++ke)if(me.FileIndex[ke]==Ae)return me.FileIndex.splice(ke,1),me.FullPaths.splice(ke,1),!0}return!1}function Yr(me,Be,Ae){E(me);var ke=Hr.find(me,Be);if(ke){for(var Me=0;Me<me.FileIndex.length;++Me)if(me.FileIndex[Me]==ke)return me.FileIndex[Me].name=s(Ae),me.FullPaths[Me]=Ae,!0}return!1}function ur(me){A(me,!0)}return t.find=P,t.read=D,t.parse=u,t.write=K,t.writeFile=B,t.utils={cfb_new:er,cfb_add:fr,cfb_del:yr,cfb_mov:Yr,cfb_gc:ur,ReadShift:Lb,CheckField:Nz,prep_blob:qi,bconcat:Ni,use_zlib:M,_deflateRaw:ve,_inflateRaw:ze,consts:X},t}();function hxe(e){return typeof e=="string"?xS(e):Array.isArray(e)?Lpe(e):e}function e1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=xS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Au(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([hxe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Zm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function fxe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ws(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function JL(e,t){for(var r=[],n=ws(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function gS(e){for(var t=[],r=ws(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function bS(e){for(var t=[],r=ws(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function mxe(e){for(var t=[],r=ws(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var A2=new Date(1899,11,30,0,0,0);function li(e,t){var r=e.getTime(),n=A2.getTime()+(e.getTimezoneOffset()-A2.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var tz=new Date,pxe=A2.getTime()+(tz.getTimezoneOffset()-A2.getTimezoneOffset())*6e4,ZL=tz.getTimezoneOffset();function yS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+pxe),t.getTimezoneOffset()!==ZL&&t.setTime(t.getTime()+(t.getTimezoneOffset()-ZL)*6e4),t}function xxe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var e6=new Date("2017-02-19T19:06:09.000Z"),rz=isNaN(e6.getFullYear())?new Date("2/19/17"):e6,vxe=rz.getFullYear()==2017;function za(e,t){var r=new Date(e);if(vxe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(rz.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function wx(e,t){if(En&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Au(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Au(qq(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Au(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Au(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function ys(e,t){for(var r="";r.length<t;)r+=e;return r}function Ed(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var gxe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Av(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&gxe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var bxe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function nz(e){return e?e.content&&e.type?wx(e.content,!0):e.data?Ab(e.data):e.asNodeBuffer&&En?Ab(e.asNodeBuffer().toString("binary")):e.asBinary?Ab(e.asBinary()):e._data&&e._data.getContent?Ab(wx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function az(e){if(!e)return null;if(e.data)return VL(e.data);if(e.asNodeBuffer&&En)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?VL(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yxe(e){return e&&e.name.slice(-4)===".bin"?az(e):nz(e)}function Ac(e,t){for(var r=e.FullPaths||ws(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function b4(e,t){var r=Ac(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ks(e,t,r){if(!r)return yxe(b4(e,t));if(!t)return null;try{return Ks(e,t)}catch{return null}}function zl(e,t,r){if(!r)return nz(b4(e,t));if(!t)return null;try{return zl(e,t)}catch{return null}}function jxe(e,t,r){return az(b4(e,t))}function t6(e){for(var t=e.FullPaths||ws(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Sn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return En?n=mf(r):n=Bpe(r),Hr.utils.cfb_add(e,t,n)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function y4(){return Hr.utils.cfb_new()}function sz(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ib(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Us=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Nxe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,r6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,wxe=/<[^>]*>/g,Eo=Us.match(r6)?r6:wxe,Sxe=/<\w*:/,Cxe=/<(\/?)\w+:/;function cn(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(Nxe),l=0,c="",d=0,u="",h="",m=1;if(o)for(d=0;d!=o.length;++d){for(h=o[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(m=(s=h.charCodeAt(i+1))==34||s==39?1:0,c=h.slice(i+1+m,h.length-m),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=c,n[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(n[p]&&u.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Yu(e){return e.replace(Cxe,"<$1")}var iz={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},j4=gS(iz),Gn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return iz[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),N4=/[&<>'"]/g,kxe=/[\u0000-\u0008\u000b-\u001f]/g;function ga(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(kxe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function n6(e){return ga(e).replace(/ /g,"_x0020_")}var oz=/[\u0000-\u001f]/g;function w4(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(/\n/g,"<br/>").replace(oz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function _xe(e){var t=e+"";return t.replace(N4,function(r){return j4[r]}).replace(oz,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var a6=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Exe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Va(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function X_(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function s6(e){var t=Lm(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function i6(e){return mf(e,"binary").toString("utf8")}var Rj="foo bar baz",Ca=En&&(i6(Rj)==X_(Rj)&&i6||s6(Rj)==X_(Rj)&&s6)||X_,Au=En?function(e){return mf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},hy=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),lz=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),Dxe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Axe=/<\/?(?:vt:)?variant>/g,Txe=/<(?:vt:)([^>]*)>([\s\S]*)</;function o6(e,t){var r=cn(e),n=e.match(Dxe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Axe,"").match(Txe);o&&s.push({v:Ca(o[2]),t:o[1]})}),s}var cz=/(^\s|\s$|\n)/;function Wi(e,t){return"<"+e+(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function fy(e){return ws(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function pr(e,t,r){return"<"+e+(r!=null?fy(r):"")+(t!=null?(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function xD(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Ixe(e,t){switch(typeof e){case"string":var r=pr("vt:lpwstr",ga(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return pr((e|0)==e?"vt:i4":"vt:r8",ga(String(e)));case"boolean":return pr("vt:bool",e?"true":"false")}if(e instanceof Date)return pr("vt:filetime",xD(e));throw new Error("Unable to serialize "+e)}function S4(e){if(En&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ca(Zm(x4(e)));throw new Error("Bad input format: expected Buffer or string")}var my=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,si={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Lx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pxe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Oxe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var l6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},c6=En?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:mf(t)})):l6(e)}:l6,d6=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Uh(e,s)));return n.join("").replace(Bo,"")},C4=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Bo,""):d6(e,t,r)}:d6,u6=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},dz=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):u6(e,t,r)}:u6,h6=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(V0(e,s)));return n.join("")},t1=En?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):h6(t,r,n)}:h6,uz=function(e,t){var r=Ul(e,t);return r>0?t1(e,t+4,t+4+r-1):""},hz=uz,fz=function(e,t){var r=Ul(e,t);return r>0?t1(e,t+4,t+4+r-1):""},mz=fz,pz=function(e,t){var r=2*Ul(e,t);return r>0?t1(e,t+4,t+4+r-1):""},xz=pz,vz=function(t,r){var n=Ul(t,r);return n>0?C4(t,r+4,r+4+n):""},gz=vz,bz=function(e,t){var r=Ul(e,t);return r>0?t1(e,t+4,t+4+r):""},yz=bz,jz=function(e,t){return Pxe(e,t)},T2=jz,k4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};En&&(hz=function(t,r){if(!Buffer.isBuffer(t))return uz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},mz=function(t,r){if(!Buffer.isBuffer(t))return fz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xz=function(t,r){if(!Buffer.isBuffer(t))return pz(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},gz=function(t,r){if(!Buffer.isBuffer(t))return vz(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},yz=function(t,r){if(!Buffer.isBuffer(t))return bz(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},T2=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):jz(t,r)},k4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var V0=function(e,t){return e[t]},Uh=function(e,t){return e[t+1]*256+e[t]},Mxe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ul=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Up=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Rxe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Lb(e,t){var r="",n,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,En&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Uh(this,d)),d+=2;e*=2;break;case"utf8":r=t1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=C4(this,this.l,this.l+e);break;case"wstr":return Lb.call(this,e,"dbcs");case"lpstr-ansi":r=hz(this,this.l),e=4+Ul(this,this.l);break;case"lpstr-cp":r=mz(this,this.l),e=4+Ul(this,this.l);break;case"lpwstr":r=xz(this,this.l),e=4+2*Ul(this,this.l);break;case"lpp4":e=4+Ul(this,this.l),r=gz(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ul(this,this.l),r=yz(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=V0(this,this.l+e++))!==0;)i.push(Mj(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Uh(this,this.l+e))!==0;)i.push(Mj(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=V0(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj(Uh(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=V0(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj(V0(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=V0(this,this.l),this.l++,n;case 2:return n=(t==="i"?Mxe:Uh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Up:Rxe)(this,this.l),this.l+=4,n):(s=Ul(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=T2(this,this.l):s=T2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=dz(this,this.l,e);break}}return this.l+=e,r}var Fxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Lxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Bxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Uxe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Bxe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Fxe(this,t,this.l);break;case 8:if(n=8,r==="f"){Oxe(this,t,this.l);break}case 16:break;case-4:n=4,Lxe(this,t,this.l);break}return this.l+=n,this}function Nz(e,t){var r=dz(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function qi(e,t){e.l=t,e.read_shift=Lb,e.chk=Nz,e.write_shift=Uxe}function ko(e,t){e.l+=t}function Ut(e){var t=Lm(e);return qi(t,0),t}function pf(e,t,r){if(e){var n,s,i;qi(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=yy[l]||yy[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function ol(){var e=[],t=En?256:2048,r=function(d){var u=Ut(d);return qi(u,0),u},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),Ni(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function nr(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=yy[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&k4(r)&&e.push(r)}}function Bb(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function f6(e,t,r){var n=Ha(e);return n.s=Bb(n.s,t.s,r),n.e=Bb(n.e,t.s,r),n}function Ub(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=on(e);return!e.cRel&&e.cRel!=null&&(r=qxe(r)),!e.rRel&&e.rRel!=null&&(r=$xe(r)),r}function Q_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+cs(e.s.c)+":"+(e.e.cRel?"":"$")+cs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ls(e.s.r)+":"+(e.e.rRel?"":"$")+Ls(e.e.r):Ub(e.s,t.biff)+":"+Ub(e.e,t.biff)}function _4(e){return parseInt(Vxe(e),10)-1}function Ls(e){return""+(e+1)}function $xe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Vxe(e){return e.replace(/\$(\d+)$/,"$1")}function E4(e){for(var t=zxe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function cs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function qxe(e){return e.replace(/^([A-Z])/,"$$$1")}function zxe(e){return e.replace(/^\$([A-Z])/,"$1")}function Hxe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function on(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function cl(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function yn(e,t){return typeof t>"u"||typeof t=="number"?yn(e.s,e.e):(typeof e!="string"&&(e=on(e)),typeof t!="string"&&(t=on(t)),e==t?e:e+":"+t)}function Yn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function m6(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=zc(e.z,r?li(t):t)}catch{}try{return e.w=zc((e.XF||{}).numFmtId||(r?14:0),r?li(t):t)}catch{return""+t}}function sf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?xf[e.v]||e.v:t==null?m6(e,e.v):m6(e,t))}function ep(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function wz(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Yn(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[h].length;++m)if(!(typeof t[h][m]>"u")){var p={v:t[h][m]},v=o+h,g=l+m;if(d.s.r>v&&(d.s.r=v),d.s.c>g&&(d.s.c=g),d.e.r<v&&(d.e.r=v),d.e.c<g&&(d.e.c=g),t[h][m]&&typeof t[h][m]=="object"&&!Array.isArray(t[h][m])&&!(t[h][m]instanceof Date))p=t[h][m];else if(Array.isArray(p.v)&&(p.f=t[h][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||nn[14],n.cellDates?(p.t="d",p.w=zc(p.z,li(p.v))):(p.t="n",p.v=li(p.v),p.w=zc(p.z,p.v))):p.t="s";if(s)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var b=on({c:g,r:v});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return d.s.c<1e7&&(i["!ref"]=yn(d)),i}function og(e,t){return wz(null,e,t)}function Wxe(e){return e.read_shift(4,"i")}function Dd(e,t){return t||(t=Ut(4)),t.write_shift(4,e),t}function Co(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function wi(e,t){var r=!1;return t==null&&(r=!0,t=Ut(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Gxe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Yxe(e,t){return t||(t=Ut(4)),t.write_shift(2,0),t.write_shift(2,0),t}function D4(e,t){var r=e.l,n=e.read_shift(1),s=Co(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Gxe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Kxe(e,t){var r=!1;return t==null&&(r=!0,t=Ut(15+4*e.t.length)),t.write_shift(1,0),wi(e.t,t),r?t.slice(0,t.l):t}var Xxe=D4;function Qxe(e,t){var r=!1;return t==null&&(r=!0,t=Ut(23+4*e.t.length)),t.write_shift(1,1),wi(e.t,t),t.write_shift(4,1),Yxe({},t),r?t.slice(0,t.l):t}function Kc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Bx(e,t){return t==null&&(t=Ut(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ux(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $x(e,t){return t==null&&(t=Ut(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Jxe=Co,Sz=wi;function A4(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function I2(e,t){var r=!1;return t==null&&(r=!0,t=Ut(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Zxe=Co,vD=A4,T4=I2;function I4(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?T2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Up(t,0)>>2;return r?s/100:s}function Cz(e,t){t==null&&(t=Ut(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function kz(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function e0e(e,t){return t||(t=Ut(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Vx=kz,lg=e0e;function bo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Sx(e,t){return(t||Ut(8)).write_shift(8,e,"f")}function t0e(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=lx[s];d&&(t.rgb=xy(d));break;case 2:t.rgb=xy([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function P2(e,t){if(t||(t=Ut(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function r0e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function n0e(e,t){t||(t=Ut(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function _z(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function a0e(e){return _z(e,1)}function s0e(e){return _z(e,2)}var P4=2,tl=3,Fj=11,p6=12,O2=19,Lj=64,i0e=65,o0e=71,l0e=4108,c0e=4126,yi=80,Ez=81,d0e=[yi,Ez],gD={1:{n:"CodePage",t:P4},2:{n:"Category",t:yi},3:{n:"PresentationFormat",t:yi},4:{n:"ByteCount",t:tl},5:{n:"LineCount",t:tl},6:{n:"ParagraphCount",t:tl},7:{n:"SlideCount",t:tl},8:{n:"NoteCount",t:tl},9:{n:"HiddenCount",t:tl},10:{n:"MultimediaClipCount",t:tl},11:{n:"ScaleCrop",t:Fj},12:{n:"HeadingPairs",t:l0e},13:{n:"TitlesOfParts",t:c0e},14:{n:"Manager",t:yi},15:{n:"Company",t:yi},16:{n:"LinksUpToDate",t:Fj},17:{n:"CharacterCount",t:tl},19:{n:"SharedDoc",t:Fj},22:{n:"HyperlinksChanged",t:Fj},23:{n:"AppVersion",t:tl,p:"version"},24:{n:"DigSig",t:i0e},26:{n:"ContentType",t:yi},27:{n:"ContentStatus",t:yi},28:{n:"Language",t:yi},29:{n:"Version",t:yi},255:{},2147483648:{n:"Locale",t:O2},2147483651:{n:"Behavior",t:O2},1919054434:{}},bD={1:{n:"CodePage",t:P4},2:{n:"Title",t:yi},3:{n:"Subject",t:yi},4:{n:"Author",t:yi},5:{n:"Keywords",t:yi},6:{n:"Comments",t:yi},7:{n:"Template",t:yi},8:{n:"LastAuthor",t:yi},9:{n:"RevNumber",t:yi},10:{n:"EditTime",t:Lj},11:{n:"LastPrinted",t:Lj},12:{n:"CreatedDate",t:Lj},13:{n:"ModifiedDate",t:Lj},14:{n:"PageCount",t:tl},15:{n:"WordCount",t:tl},16:{n:"CharCount",t:tl},17:{n:"Thumbnail",t:o0e},18:{n:"Application",t:yi},19:{n:"DocSecurity",t:tl},255:{},2147483648:{n:"Locale",t:O2},2147483651:{n:"Behavior",t:O2},1919054434:{}},x6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},u0e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function h0e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var f0e=h0e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lx=Ha(f0e),xf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},yD={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Bj={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function O4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function m0e(e){var t=O4();if(!e||!e.match)return t;var r={};if((e.match(Eo)||[]).forEach(function(n){var s=cn(n);switch(s[0].replace(Sxe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[yD[s.ContentType]]!==void 0&&t[yD[s.ContentType]].push(s.PartName);break}}),t.xmlns!==si.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Az(e,t){var r=mxe(yD),n=[],s;n[n.length]=Us,n[n.length]=pr("Types",null,{xmlns:si.CT,"xmlns:xsd":si.xsd,"xmlns:xsi":si.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return pr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=pr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Bj[c][t.bookType]||Bj[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=pr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Bj[c][t.bookType]||Bj[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=pr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Tn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function py(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $b(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Eo)||[]).forEach(function(s){var i=cn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Ib(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function sv(e){var t=[Us,pr("Relationships",null,{xmlns:si.RELS})];return ws(e["!id"]).forEach(function(r){t[t.length]=pr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function xa(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Tn.HLINK,Tn.XPATH,Tn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var p0e="application/vnd.oasis.opendocument.spreadsheet";function x0e(e,t){for(var r=S4(e),n,s;n=my.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=cn(n[0],!1),s.path=="/"&&s.type!==p0e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function v0e(e){var t=[Us];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function v6(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function g0e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function b0e(e){var t=[Us];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(v6(e[r][0],e[r][1])),t.push(g0e("",e[r][0]));return t.push(v6("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Tz(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+k2.version+"</meta:generator></office:meta></office:document-meta>"}var $c=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],y0e=function(){for(var e=new Array($c.length),t=0;t<$c.length;++t){var r=$c[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Iz(e){var t={};e=Ca(e);for(var r=0;r<$c.length;++r){var n=$c[r],s=e.match(y0e[r]);s!=null&&s.length>0&&(t[n[1]]=Gn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=za(t[n[1]]))}return t}function J_(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=ga(t),n[n.length]=r?pr(e,t,r):Wi(e,t))}function Pz(e,t){var r=t||{},n=[Us,pr("cp:coreProperties",null,{"xmlns:cp":si.CORE_PROPS,"xmlns:dc":si.dc,"xmlns:dcterms":si.dcterms,"xmlns:dcmitype":si.dcmitype,"xmlns:xsi":si.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&J_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:xD(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&J_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:xD(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=$c.length;++i){var o=$c[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&J_(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Oz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Mz(e,t,r,n){var s=[];if(typeof e=="string")s=o6(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?o6(t,n).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function j0e(e,t,r){var n={};return t||(t={}),e=Ca(e),cx.forEach(function(s){var i=(e.match(hy(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Gn(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Mz(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Rz(e){var t=[],r=pr;return e||(e={}),e.Application="SheetJS",t[t.length]=Us,t[t.length]=pr("Properties",null,{xmlns:si.EXT_PROPS,"xmlns:vt":si.vt}),cx.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ga(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ga(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var N0e=/<[^>]+>[^<]*/g;function w0e(e,t){var r={},n="",s=e.match(N0e);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=cn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Gn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Gn(u);break;case"bool":r[n]=Va(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=za(u);break;case"cy":case"error":r[n]=Gn(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Fz(e){var t=[Us,pr("Properties",null,{xmlns:si.CUST_PROPS,"xmlns:vt":si.vt})];if(!e)return t.join("");var r=1;return ws(e).forEach(function(s){++r,t[t.length]=pr("property",Ixe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ga(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var jD={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Z_;function S0e(e,t,r){Z_||(Z_=gS(jD)),t=Z_[t]||t,e[t]=r}function C0e(e,t){var r=[];return ws(jD).map(function(n){for(var s=0;s<$c.length;++s)if($c[s][1]==n)return $c[s];for(s=0;s<cx.length;++s)if(cx[s][1]==n)return cx[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Wi(jD[n[1]]||n[1],s))}}),pr("DocumentProperties",r.join(""),{xmlns:Bl.o})}function k0e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ws(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<$c.length;++o)if(i==$c[o][1])return;for(o=0;o<cx.length;++o)if(i==cx[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(pr(n6(i),l,{"dt:dt":c}))}}),t&&ws(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(pr(n6(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Bl.o+'">'+s.join("")+"</"+n+">"}function M4(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function _0e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Ut(8);return o.write_shift(4,n),o.write_shift(4,s),o}function Lz(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function Bz(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Uz(e,t,r){return t===31?Bz(e):Lz(e,t,r)}function ND(e,t,r){return Uz(e,t,r===!1?0:4)}function E0e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Uz(e,t,0)}function D0e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Bo,""),e.l-s&2&&(e.l+=2)}return r}function A0e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Bo,"");return r}function T0e(e){var t=e.l,r=M2(e,Ez);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=M2(e,tl);return[r,n]}function I0e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(T0e(e));return r}function g6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Bo,"").replace(Tb,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function $z(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function P0e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function M2(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==p6&&n!==t&&d0e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===p6?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return Lz(e,n,4).replace(Bo,"");case 31:return Bz(e);case 64:return M4(e);case 65:return $z(e);case 71:return P0e(e);case 80:return ND(e,n,!i.raw).replace(Bo,"");case 81:return E0e(e,n).replace(Bo,"");case 4108:return I0e(e);case 4126:case 4127:return n==4127?D0e(e):A0e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function b6(e,t){var r=Ut(4),n=Ut(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ut(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=_0e(t);break;case 31:case 80:for(n=Ut(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ni([r,n])}function y6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),h=e.read_shift(4);i[o]=[u,h+r]}i.sort(function(C,N){return C[1]-N[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(m[v.n]=M2(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Cd(l=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(i[o][0]===1){if(l=m.CodePage=M2(e,P4),Cd(l),c!==-1){var g=e.l;e.l=i[c][1],d=g6(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=g6(e,l)}else{var b=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=$z(e);break;case 30:e.l+=4,y=ND(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=ND(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Is(e,4);break;case 64:e.l+=4,y=za(M4(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=y}}return e.l=r+n,m}var Vz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function O0e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function j6(e,t,r){var n=Ut(8),s=[],i=[],o=8,l=0,c=Ut(8),d=Ut(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=Ut(8),d.write_shift(4,0),s.unshift(d);var u=[Ut(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var h=e[l][0];for(c=Ut(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Ni(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Vz.indexOf(e[l][0])>-1||Oz.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof m=="string"){var g=m.split(".");m=(+g[0]<<16)+(+g[1]||0)}c=b6(v.t,m)}else{var b=O0e(m);b==-1&&(b=31,m=String(m)),c=b6(b,m)}i.push(c),d=Ut(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Ni([n].concat(s).concat(i))}function N6(e,t,r){var n=e.content;if(!n)return{};qi(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),u=n.read_shift(16);if(u!==Hr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var h=y6(n,t),m={SystemIdentifier:d};for(var p in h)m[p]=h[p];if(m.FMTID=i,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var v;try{v=y6(n,null)}catch{}for(p in v)m[p]=v[p];return m.FMTID=[i,o],m}function w6(e,t,r,n,s,i){var o=Ut(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=j6(e,r,n);if(l.push(c),s){var d=j6(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return Ni(l)}function pm(e,t){return e.read_shift(t),null}function M0e(e,t){t||(t=Ut(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function R0e(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Is(e,t){return e.read_shift(t)===1}function Mo(e,t){return t||(t=Ut(2)),t.write_shift(2,+!!e),t}function Xs(e){return e.read_shift(2,"u")}function Tc(e,t){return t||(t=Ut(2)),t.write_shift(2,e),t}function qz(e,t){return R0e(e,t,Xs)}function F0e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function zz(e,t,r){return r||(r=Ut(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function r1(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function L0e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function B0e(e){var t=e.t||"",r=Ut(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ut(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Ni(s)}function Cx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function n1(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Cx(e,n,r)}function qx(e,t,r){if(r.biff>5)return n1(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Hz(e,t,r){return r||(r=Ut(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function U0e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function $0e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Bo,"");return n&&(e.l+=24),s}function V0e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Bo,"");return r+o}function q0e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return $0e(e);case"0303000000000000c000000000000046":return V0e(e);default:throw new Error("Unsupported Moniker "+r)}}function Uj(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Bo,""):"";return r}function S6(e,t){t||(t=Ut(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function z0e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,h;s&16&&(i=Uj(e,r-e.l)),s&128&&(o=Uj(e,r-e.l)),(s&257)===257&&(l=Uj(e,r-e.l)),(s&257)===1&&(c=q0e(e,r-e.l)),s&8&&(d=Uj(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(h=M4(e)),e.l=r;var m=o||l||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return u&&(p.guid=u),h&&(p.time=h),i&&(p.Tooltip=i),p}function H0e(e){var t=Ut(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),S6(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&S6(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Wz(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function Gz(e,t){var r=Wz(e);return r[3]=0,r}function Ku(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function kx(e,t,r,n){return n||(n=Ut(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function W0e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function G0e(e,t,r){return t===0?"":qx(e,t,r)}function Y0e(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function Yz(e){var t=e.read_shift(2),r=I4(e);return[t,r]}function K0e(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=r1(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function jS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function Kz(e,t){return t||(t=Ut(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Xz(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var X0e=Xz;function Qz(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Q0e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function J0e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ao(e){e.l+=2,e.l+=e.read_shift(2)}var Z0e={0:ao,4:ao,5:ao,6:ao,7:J0e,8:ao,9:ao,10:ao,11:ao,12:ao,13:Q0e,14:ao,15:ao,16:ao,17:ao,18:ao,19:ao,20:ao,21:Qz};function eve(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Z0e[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function $j(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function R4(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ut(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function tve(e,t){return t===0||e.read_shift(2),1200}function rve(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=qx(e,0,r);return e.read_shift(t+n-e.l),s}function nve(e,t){var r=!t||t.biff==8,n=Ut(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ave(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function sve(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=r1(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function ive(e,t){var r=!t||t.biff>=8?2:1,n=Ut(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function ove(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(L0e(e));return i.Count=n,i.Unique=s,i}function lve(e,t){var r=Ut(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=B0e(e[s]);var i=Ni([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function cve(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function dve(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function uve(e){var t=W0e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function hve(e){return e.read_shift(2),e.read_shift(4)}function C6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function fve(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function mve(){var e=Ut(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function pve(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function xve(e){var t=Ut(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function vve(){}function gve(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=r1(e,0,r),n}function bve(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=Ut(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function yve(e){var t=Ku(e);return t.isst=e.read_shift(4),t}function jve(e,t,r,n){var s=Ut(10);return kx(e,t,n,s),s.write_shift(4,r),s}function Nve(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ku(e);r.biff==2&&e.l++;var i=n1(e,n-e.l,r);return s.val=i,s}function wve(e,t,r,n,s){var i=!s||s.biff==8,o=Ut(8+ +i+(1+i)*r.length);return kx(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Sve(e,t,r){var n=e.read_shift(2),s=qx(e,0,r);return[n,s]}function Cve(e,t,r,n){var s=r&&r.biff==5;n||(n=Ut(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var kve=qx;function k6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function _ve(e,t){var r=t.biff==8||!t.biff?4:2,n=Ut(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Eve(e){var t=e.read_shift(2),r=e.read_shift(2),n=Yz(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Dve(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(Yz(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function Ave(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Tve(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=u0e[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function Ive(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Tve(e,t,n.fStyle,r),n}function _6(e,t,r,n){var s=r&&r.biff==5;n||(n=Ut(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Pve(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Ove(e){var t=Ut(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function E6(e,t,r){var n=Ku(e);(r.biff==2||t==9)&&++e.l;var s=F0e(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Mve(e,t,r,n,s,i){var o=Ut(8);return kx(e,t,n,o),zz(r,i,o),o}function Rve(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ku(e),s=bo(e);return n.val=s,n}function Fve(e,t,r,n){var s=Ut(14);return kx(e,t,n,s),Sx(r,s),s}var D6=G0e;function Lve(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Cx(e,i),l=[];n>e.l;)l.push(n1(e));return[i,s,o,l]}function A6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=K0e(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Bve=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function T6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Cx(e,o,r);s&32&&(d=Bve[d.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var h=n==e.l||l===0||!(u>0)?[]:eje(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function Jz(e,t,r){if(r.biff<8)return Uve(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Y0e(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Uve(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=r1(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function $ve(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=Cx(e,n,r),o=Cx(e,s,r);return[i,o]}function Vve(e,t,r){var n=Xz(e);e.l++;var s=e.read_shift(1);return t-=8,[tje(e,t,r),s,n]}function I6(e,t,r){var n=X0e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,J1e(e,t,r)]}function qve(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function zve(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=qx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function Hve(e,t,r){return zve(e,t,r)}function Wve(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(jS(e));return r}function Gve(e){var t=Ut(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Kz(e[r],t);return t}function Yve(e,t,r){if(r&&r.biff<8)return Xve(e,t,r);var n=Qz(e),s=eve(e,t-22,n[1]);return{cmo:n,ft:s}}var Kve={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Xve(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Kve[n]||ko)(e,t,r)),{cmo:[s,n,i],ft:o}}function Qve(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=U0e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Xs(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=Cx(e,e.lens[d+1]-e.lens[d]-1);if(s+=h,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Jve(e,t){var r=jS(e);e.l+=16;var n=z0e(e,t-24);return[r,n]}function Zve(e){var t=Ut(24),r=ds(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Ni([t,H0e(e[1])])}function ege(e,t){e.read_shift(2);var r=jS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Bo,""),[r,n]}function tge(e){var t=e[1].Tooltip,r=Ut(10+2*(t.length+1));r.write_shift(2,2048);var n=ds(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function rge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=x6[r]||r,r=e.read_shift(2),t[1]=x6[r]||r,t}function nge(e){return e||(e=Ut(4)),e.write_shift(2,1),e.write_shift(2,1),e}function age(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function sge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function ige(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Zz(e,t,r){if(!r.cellStyles)return ko(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function oge(e,t){var r=Ut(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function lge(e,t){var r={};return t<32||(e.l+=16,r.header=bo(e),r.footer=bo(e),e.l+=2),r}function cge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function dge(e){for(var t=Ut(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var uge=Ku,hge=qz,fge=n1;function mge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function pge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ku(e);++e.l;var s=qx(e,t-7,r);return n.t="str",n.val=s,n}function xge(e){var t=Ku(e);++e.l;var r=bo(e);return t.t="n",t.val=r,t}function vge(e,t,r){var n=Ut(15);return o1(n,e,t),n.write_shift(8,r,"f"),n}function gge(e){var t=Ku(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function bge(e,t,r){var n=Ut(9);return o1(n,e,t),n.write_shift(2,r),n}function yge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function jge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Nge(e,t,r){var n=e.l+t,s=Ku(e),i=e.read_shift(2),o=Cx(e,i,r);return e.l=n,s.t="str",s.val=o,s}var wge=[2,3,48,49,131,139,140,245],wD=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Lm(1);switch(c.type){case"base64":u=ql(nc(l));break;case"binary":u=ql(l);break;case"buffer":case"array":u=l;break}qi(u,0);var h=u.read_shift(1),m=!!(h&136),p=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,b=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(b=u.read_shift(2));var y=u.read_shift(2),C=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(C=e[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var N=[],k={},S=Math.min(u.length,h==2?521:b-10-(p?264:0)),D=v?32:11;u.l<S&&u[u.l]!=13;)switch(k={},k.name=cy.utils.decode(C,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&N.push(k),h!=2&&(u.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var E=0,T=0;for(d[0]=[],T=0;T!=N.length;++T)d[0][T]=N[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++E]=[],T=0,T=0;T!=N.length;++T){var A=u.slice(u.l,u.l+N[T].len);u.l+=N[T].len,qi(A,0);var L=cy.utils.decode(C,A);switch(N[T].type){case"C":L.trim().length&&(d[E][T]=L.replace(/\s+$/,""));break;case"D":L.length===8?d[E][T]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):d[E][T]=L;break;case"F":d[E][T]=parseFloat(L.trim());break;case"+":case"I":d[E][T]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":d[E][T]=!0;break;case"N":case"F":d[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][T]="##MEMO##"+(v?parseInt(L.trim(),10):A.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(d[E][T]=+L||0);break;case"@":d[E][T]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":d[E][T]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":d[E][T]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][T]=-A.read_shift(-8,"f");break;case"B":if(p&&N[T].len==8){d[E][T]=A.read_shift(8,"f");break}case"G":case"P":A.l+=N[T].len;break;case"0":if(N[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[T].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=N,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=og(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return ep(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Cd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=ol(),h=L2(l,{header:1,raw:!0,cellDates:!0}),m=h[0],p=h.slice(1),v=l["!cols"]||[],g=0,b=0,y=0,C=1;for(g=0;g<m.length;++g){if(((v[g]||{}).DBF||{}).name){m[g]=v[g].DBF.name,++y;continue}if(m[g]!=null){if(++y,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(b=0;b<1024;++b)if(m.indexOf(m[g]+"_"+b)==-1){m[g]+="_"+b;break}}}}var N=Yn(l["!ref"]),k=[],S=[],D=[];for(g=0;g<=N.e.c-N.s.c;++g){var E="",T="",A=0,L=[];for(b=0;b<p.length;++b)p[b][g]!=null&&L.push(p[b][g]);if(L.length==0||m[g]==null){k[g]="?";continue}for(b=0;b<L.length;++b){switch(typeof L[b]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=L[b]instanceof Date?"D":"C";break;default:T="C"}A=Math.max(A,String(L[b]).length),E=E&&E!=T?"C":T}A>250&&(A=250),T=((v[g]||{}).DBF||{}).type,T=="C"&&v[g].DBF.len>A&&(A=v[g].DBF.len),E=="B"&&T=="N"&&(E="N",D[g]=v[g].DBF.dec,A=v[g].DBF.len),S[g]=E=="C"||T=="N"?A:i[E]||0,C+=S[g],k[g]=E}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*y),P.write_shift(2,C),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[Vq]||3)<<8),g=0,b=0;g<m.length;++g)if(m[g]!=null){var O=u.next(32),Q=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,Q,"sbcs"),O.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),O.write_shift(4,b),O.write_shift(1,S[g]||i[k[g]]||0),O.write_shift(1,D[g]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=S[g]||i[k[g]]||0}var z=u.next(264);for(z.write_shift(4,13),g=0;g<65;++g)z.write_shift(4,0);for(g=0;g<p.length;++g){var re=u.next(C);for(re.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(k[b]){case"L":re.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":re.write_shift(8,p[g][b]||0,"f");break;case"N":var U="0";for(typeof p[g][b]=="number"&&(U=p[g][b].toFixed(D[b]||0)),y=0;y<S[b]-U.length;++y)re.write_shift(1,32);re.write_shift(1,U,"sbcs");break;case"D":p[g][b]?(re.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var X=String(p[g][b]!=null?p[g][b]:"").slice(0,S[b]);for(re.write_shift(1,X,"sbcs"),y=0;y<S[b]-X.length;++y)re.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),eH=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ws(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var v=e[p];return typeof v=="number"?qL(v):v},n=function(m,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?m:qL(g)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(nc(m),p);case"binary":return i(m,p);case"buffer":return i(En&&Buffer.isBuffer(m)?m.toString("binary"):Zm(m),p);case"array":return i(wx(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var v=m.split(/[\n\r]+/),g=-1,b=-1,y=0,C=0,N=[],k=[],S=null,D={},E=[],T=[],A=[],L=0,P;for(+p.codepage>=0&&Cd(+p.codepage);y!==v.length;++y){L=0;var O=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Q=O.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),z=Q[0],re;if(O.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&k.push(O.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,X=!1,B=!1,Y=!1,K=-1,ue=-1;for(C=1;C<Q.length;++C)switch(Q[C].charAt(0)){case"A":break;case"X":b=parseInt(Q[C].slice(1))-1,X=!0;break;case"Y":for(g=parseInt(Q[C].slice(1))-1,X||(b=0),P=N.length;P<=g;++P)N[P]=[];break;case"K":re=Q[C].slice(1),re.charAt(0)==='"'?re=re.slice(1,re.length-1):re==="TRUE"?re=!0:re==="FALSE"?re=!1:isNaN(Ed(re))?isNaN(Av(re).getDate())||(re=za(re)):(re=Ed(re),S!==null&&sg(S)&&(re=yS(re))),U=!0;break;case"E":Y=!0;var M=iv(Q[C].slice(1),{r:g,c:b});N[g][b]=[N[g][b],M];break;case"S":B=!0,N[g][b]=[N[g][b],"S5S"];break;case"G":break;case"R":K=parseInt(Q[C].slice(1))-1;break;case"C":ue=parseInt(Q[C].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(U&&(N[g][b]&&N[g][b].length==2?N[g][b][0]=re:N[g][b]=re,S=null),B){if(Y)throw new Error("SYLK shared formula cannot have own formula");var V=K>-1&&N[K][ue];if(!V||!V[1])throw new Error("SYLK shared formula cannot find base");N[g][b][1]=gH(V[1],{r:g-K,c:b-ue})}break;case"F":var W=0;for(C=1;C<Q.length;++C)switch(Q[C].charAt(0)){case"X":b=parseInt(Q[C].slice(1))-1,++W;break;case"Y":for(g=parseInt(Q[C].slice(1))-1,P=N.length;P<=g;++P)N[P]=[];break;case"M":L=parseInt(Q[C].slice(1))/20;break;case"F":break;case"G":break;case"P":S=k[parseInt(Q[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=Q[C].slice(1).split(" "),P=parseInt(A[0],10);P<=parseInt(A[1],10);++P)L=parseInt(A[2],10),T[P-1]=L===0?{hidden:!0}:{wch:L},Bm(T[P-1]);break;case"C":b=parseInt(Q[C].slice(1))-1,T[b]||(T[b]={});break;case"R":g=parseInt(Q[C].slice(1))-1,E[g]||(E[g]={}),L>0?(E[g].hpt=L,E[g].hpx=Iv(L)):L===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}W<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(D["!rows"]=E),T.length>0&&(D["!cols"]=T),p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),[N,D]}function o(m,p){var v=s(m,p),g=v[0],b=v[1],y=og(g,p);return ws(b).forEach(function(C){y[C]=b[C]}),y}function l(m,p){return ep(o(m,p),p)}function c(m,p,v,g){var b="C;Y"+(v+1)+";X"+(g+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+V4(m.f,{r:v,c:g}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(m,p){p.forEach(function(v,g){var b="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=vy(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=gy(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function u(m,p){p.forEach(function(v,g){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*by(v.hpx)+";"),b.length>2&&m.push(b+"R"+(g+1))})}function h(m,p){var v=["ID;PWXL;N;E"],g=[],b=Yn(m["!ref"]),y,C=Array.isArray(m),N=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&d(v,m["!cols"]),m["!rows"]&&u(v,m["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var S=b.s.c;S<=b.e.c;++S){var D=on({r:k,c:S});y=C?(m[k]||[])[S]:m[D],!(!y||y.v==null&&(!y.f||y.F))&&g.push(c(y,m,k,S))}return v.join(N)+N+g.join(N)+N+"E"+N}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),tH=function(){function e(i,o){switch(o.type){case"base64":return t(nc(i),o);case"binary":return t(i,o);case"buffer":return t(En&&Buffer.isBuffer(i)?i.toString("binary"):Zm(i),o);case"array":return t(wx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var m=l[u].trim().split(","),p=m[0],v=m[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Ed(v))?isNaN(Av(v).getDate())?h[c][d]=v:h[c][d]=za(v):h[c][d]=Ed(v),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return og(e(i,o),o)}function n(i,o){return ep(r(i,o),o)}var s=function(){var i=function(c,d,u,h,m){c.push(d),c.push(u+","+h),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Yn(c["!ref"]),h,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var g=on({r:p,c:v});if(h=m?(c[p]||[])[v]:c[g],!h){o(d,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(d,1,0,"="+h.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=zc(h.z||nn[14],li(za(h.v)))),o(d,0,h.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,C=d.join(y);return C}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),rH=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var p=h.split(`
`),v=-1,g=-1,b=0,y=[];b!==p.length;++b){var C=p[b].trim().split(":");if(C[0]==="cell"){var N=ds(C[1]);if(y.length<=N.r)for(v=y.length;v<=N.r;++v)y[v]||(y[v]=[]);switch(v=N.r,g=N.c,C[2]){case"t":y[v][g]=e(C[3]);break;case"v":y[v][g]=+C[3];break;case"vtf":var k=C[C.length-1];case"vtc":switch(C[3]){case"nl":y[v][g]=!!+C[4];break;default:y[v][g]=+C[4];break}C[2]=="vtf"&&(y[v][g]=[y[v][g],k])}}}return m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),y}function n(h,m){return og(r(h,m),m)}function s(h,m){return ep(n(h,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var m=[],p=[],v,g="",b=cl(h["!ref"]),y=Array.isArray(h),C=b.s.r;C<=b.e.r;++C)for(var N=b.s.c;N<=b.e.c;++N)if(g=on({r:C,c:N}),v=y?(h[C]||[])[N]:h[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=li(za(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||zc(v.z||nn[14],k);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(h){return[i,o,l,o,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),Tv=function(){function e(u,h,m,p,v){v.raw?h[m][p]=u:u===""||(u==="TRUE"?h[m][p]=!0:u==="FALSE"?h[m][p]=!1:isNaN(Ed(u))?isNaN(Av(u).getDate())?h[m][p]=u:h[m][p]=za(u):h[m][p]=Ed(u))}function t(u,h){var m=h||{},p=[];if(!u||u.length===0)return p;for(var v=u.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var b=10,y=0,C=0;C<=g;++C)y=v[C].indexOf(" "),y==-1?y=v[C].length:y++,b=Math.max(b,y);for(C=0;C<=g;++C){p[C]=[];var N=0;for(e(v[C].slice(0,b).trim(),p,C,N,m),N=1;N<=(v[C].length-b)/10+1;++N)e(v[C].slice(b+(N-1)*10,b+N*10).trim(),p,C,N,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var h={},m=!1,p=0,v=0;p<u.length;++p)(v=u.charCodeAt(p))==34?m=!m:!m&&v in r&&(h[v]=(h[v]||0)+1);v=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p]);if(!v.length){h=n;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p])}return v.sort(function(g,b){return g[0]-b[0]||n[g[1]]-n[b[1]]}),r[v.pop()[1]]||44}function i(u,h){var m=h||{},p="",v=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):m&&m.FS?p=m.FS:p=s(u.slice(0,1024));var b=0,y=0,C=0,N=0,k=0,S=p.charCodeAt(0),D=!1,E=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var A=m.dateNF!=null?cxe(m.dateNF):null;function L(){var P=u.slice(N,k),O={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)O.t="z";else if(m.raw)O.t="s",O.v=P;else if(P.trim().length===0)O.t="s",O.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(O.t="s",O.v=P.slice(2,-1).replace(/""/g,'"')):Lye(P)?(O.t="n",O.f=P.slice(1)):(O.t="s",O.v=P);else if(P=="TRUE")O.t="b",O.v=!0;else if(P=="FALSE")O.t="b",O.v=!1;else if(!isNaN(C=Ed(P)))O.t="n",m.cellText!==!1&&(O.w=P),O.v=C;else if(!isNaN(Av(P).getDate())||A&&P.match(A)){O.z=m.dateNF||nn[14];var Q=0;A&&P.match(A)&&(P=dxe(P,m.dateNF,P.match(A)||[]),Q=1),m.cellDates?(O.t="d",O.v=za(P,Q)):(O.t="n",O.v=li(za(P,Q))),m.cellText!==!1&&(O.w=zc(O.z,O.v instanceof Date?li(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=P;if(O.t=="z"||(m.dense?(v[b]||(v[b]=[]),v[b][y]=O):v[on({c:y,r:b})]=O),N=k+1,T=u.charCodeAt(N),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==S)++y;else if(y=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;k<u.length;++k)switch(E=u.charCodeAt(k)){case 34:T===34&&(D=!D);break;case S:case 10:case 13:if(!D&&L())break e;break}return k-N>0&&L(),v["!ref"]=yn(g),v}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):og(t(u,h),h)}function l(u,h){var m="",p=h.type=="string"?[0,0,0,0]:X4(u,h);switch(h.type){case"base64":m=nc(u);break;case"binary":m=u;break;case"buffer":h.codepage==65001?m=u.toString("utf8"):h.codepage&&typeof cy<"u"||(m=En&&Buffer.isBuffer(u)?u.toString("binary"):Zm(u));break;case"array":m=wx(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ca(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=Ca(m):h.type=="binary"&&typeof cy<"u",m.slice(0,19)=="socialcalc:version:"?rH.to_sheet(h.type=="string"?m:Ca(m),h):o(m,h)}function c(u,h){return ep(l(u,h),h)}function d(u){for(var h=[],m=Yn(u["!ref"]),p,v=Array.isArray(u),g=m.s.r;g<=m.e.r;++g){for(var b=[],y=m.s.c;y<=m.e.c;++y){var C=on({r:g,c:y});if(p=v?(u[g]||[])[y]:u[C],!p||p.v==null){b.push("          ");continue}for(var N=(p.w||(sf(p),p.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function Sge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=eH.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Tv.to_workbook(e,t)}}var dx=function(){function e(M,V,W){if(M){qi(M,M.l||0);for(var ee=W.Enum||K;M.l<M.length;){var te=M.read_shift(2),ne=ee[te]||ee[65535],se=M.read_shift(2),oe=M.l+se,G=ne.f&&ne.f(M,se,W);if(M.l=oe,V(G,ne,te))return}}}function t(M,V){switch(V.type){case"base64":return r(ql(nc(M)),V);case"binary":return r(ql(M),V);case"buffer":case"array":return r(M,V)}throw"Unsupported type "+V.type}function r(M,V){if(!M)return M;var W=V||{},ee=W.dense?[]:{},te="Sheet1",ne="",se=0,oe={},G=[],ce=[],Z={s:{r:0,c:0},e:{r:0,c:0}},ae=W.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)W.Enum=K,e(M,function(be,Ne,Fe){switch(Fe){case 0:W.vers=be,be>=4096&&(W.qpro=!0);break;case 6:Z=be;break;case 204:be&&(ne=be);break;case 222:ne=be;break;case 15:case 51:W.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:Fe==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=W.dateNF||nn[14],W.cellDates&&(be[1].t="d",be[1].v=yS(be[1].v))),W.qpro&&be[3]>se&&(ee["!ref"]=yn(Z),oe[te]=ee,G.push(te),ee=W.dense?[]:{},Z={s:{r:0,c:0},e:{r:0,c:0}},se=be[3],te=ne||"Sheet"+(se+1),ne="");var Xe=W.dense?(ee[be[0].r]||[])[be[0].c]:ee[on(be[0])];if(Xe){Xe.t=be[1].t,Xe.v=be[1].v,be[1].z!=null&&(Xe.z=be[1].z),be[1].f!=null&&(Xe.f=be[1].f);break}W.dense?(ee[be[0].r]||(ee[be[0].r]=[]),ee[be[0].r][be[0].c]=be[1]):ee[on(be[0])]=be[1];break}},W);else if(M[2]==26||M[2]==14)W.Enum=ue,M[2]==14&&(W.qpro=!0,M.l=0),e(M,function(be,Ne,Fe){switch(Fe){case 204:te=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>se&&(ee["!ref"]=yn(Z),oe[te]=ee,G.push(te),ee=W.dense?[]:{},Z={s:{r:0,c:0},e:{r:0,c:0}},se=be[3],te="Sheet"+(se+1)),ae>0&&be[0].r>=ae)break;W.dense?(ee[be[0].r]||(ee[be[0].r]=[]),ee[be[0].r][be[0].c]=be[1]):ee[on(be[0])]=be[1],Z.e.c<be[0].c&&(Z.e.c=be[0].c),Z.e.r<be[0].r&&(Z.e.r=be[0].r);break;case 27:be[14e3]&&(ce[be[14e3][0]]=be[14e3][1]);break;case 1537:ce[be[0]]=be[1],be[0]==se&&(te=be[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(ee["!ref"]=yn(Z),oe[ne||te]=ee,G.push(ne||te),!ce.length)return{SheetNames:G,Sheets:oe};for(var je={},de=[],ie=0;ie<ce.length;++ie)oe[G[ie]]?(de.push(ce[ie]||G[ie]),je[ce[ie]]=oe[ce[ie]]||oe[G[ie]]):(de.push(ce[ie]),je[ce[ie]]={"!ref":"A1"});return{SheetNames:de,Sheets:je}}function n(M,V){var W=V||{};if(+W.codepage>=0&&Cd(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=ol(),te=Yn(M["!ref"]),ne=Array.isArray(M),se=[];xr(ee,0,i(1030)),xr(ee,6,c(te));for(var oe=Math.min(te.e.r,8191),G=te.s.r;G<=oe;++G)for(var ce=Ls(G),Z=te.s.c;Z<=te.e.c;++Z){G===te.s.r&&(se[Z]=cs(Z));var ae=se[Z]+ce,je=ne?(M[G]||[])[Z]:M[ae];if(!(!je||je.t=="z"))if(je.t=="n")(je.v|0)==je.v&&je.v>=-32768&&je.v<=32767?xr(ee,13,p(G,Z,je.v)):xr(ee,14,g(G,Z,je.v));else{var de=sf(je);xr(ee,15,h(G,Z,de.slice(0,239)))}}return xr(ee,1),ee.end()}function s(M,V){var W=V||{};if(+W.codepage>=0&&Cd(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=ol();xr(ee,0,o(M));for(var te=0,ne=0;te<M.SheetNames.length;++te)(M.Sheets[M.SheetNames[te]]||{})["!ref"]&&xr(ee,27,Y(M.SheetNames[te],ne++));var se=0;for(te=0;te<M.SheetNames.length;++te){var oe=M.Sheets[M.SheetNames[te]];if(!(!oe||!oe["!ref"])){for(var G=Yn(oe["!ref"]),ce=Array.isArray(oe),Z=[],ae=Math.min(G.e.r,8191),je=G.s.r;je<=ae;++je)for(var de=Ls(je),ie=G.s.c;ie<=G.e.c;++ie){je===G.s.r&&(Z[ie]=cs(ie));var be=Z[ie]+de,Ne=ce?(oe[je]||[])[ie]:oe[be];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")xr(ee,23,L(je,ie,se,Ne.v));else{var Fe=sf(Ne);xr(ee,22,E(je,ie,se,Fe.slice(0,239)))}}++se}}return xr(ee,1),ee.end()}function i(M){var V=Ut(2);return V.write_shift(2,M),V}function o(M){var V=Ut(26);V.write_shift(2,4096),V.write_shift(2,4),V.write_shift(4,0);for(var W=0,ee=0,te=0,ne=0;ne<M.SheetNames.length;++ne){var se=M.SheetNames[ne],oe=M.Sheets[se];if(!(!oe||!oe["!ref"])){++te;var G=cl(oe["!ref"]);W<G.e.r&&(W=G.e.r),ee<G.e.c&&(ee=G.e.c)}}return W>8191&&(W=8191),V.write_shift(2,W),V.write_shift(1,te),V.write_shift(1,ee),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(1,1),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(4,0),V}function l(M,V,W){var ee={s:{c:0,r:0},e:{c:0,r:0}};return V==8&&W.qpro?(ee.s.c=M.read_shift(1),M.l++,ee.s.r=M.read_shift(2),ee.e.c=M.read_shift(1),M.l++,ee.e.r=M.read_shift(2),ee):(ee.s.c=M.read_shift(2),ee.s.r=M.read_shift(2),V==12&&W.qpro&&(M.l+=2),ee.e.c=M.read_shift(2),ee.e.r=M.read_shift(2),V==12&&W.qpro&&(M.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function c(M){var V=Ut(8);return V.write_shift(2,M.s.c),V.write_shift(2,M.s.r),V.write_shift(2,M.e.c),V.write_shift(2,M.e.r),V}function d(M,V,W){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(ee[0].c=M.read_shift(1),ee[3]=M.read_shift(1),ee[0].r=M.read_shift(2),M.l+=2):(ee[2]=M.read_shift(1),ee[0].c=M.read_shift(2),ee[0].r=M.read_shift(2)),ee}function u(M,V,W){var ee=M.l+V,te=d(M,V,W);if(te[1].t="s",W.vers==20768){M.l++;var ne=M.read_shift(1);return te[1].v=M.read_shift(ne,"utf8"),te}return W.qpro&&M.l++,te[1].v=M.read_shift(ee-M.l,"cstr"),te}function h(M,V,W){var ee=Ut(7+W.length);ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(1,39);for(var te=0;te<ee.length;++te){var ne=W.charCodeAt(te);ee.write_shift(1,ne>=128?95:ne)}return ee.write_shift(1,0),ee}function m(M,V,W){var ee=d(M,V,W);return ee[1].v=M.read_shift(2,"i"),ee}function p(M,V,W){var ee=Ut(7);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(2,W,"i"),ee}function v(M,V,W){var ee=d(M,V,W);return ee[1].v=M.read_shift(8,"f"),ee}function g(M,V,W){var ee=Ut(13);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(8,W,"f"),ee}function b(M,V,W){var ee=M.l+V,te=d(M,V,W);if(te[1].v=M.read_shift(8,"f"),W.qpro)M.l=ee;else{var ne=M.read_shift(2);k(M.slice(M.l,M.l+ne),te),M.l+=ne}return te}function y(M,V,W){var ee=V&32768;return V&=-32769,V=(ee?M:0)+(V>=8192?V-16384:V),(ee?"":"$")+(W?cs(V):Ls(V))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,V){qi(M,0);for(var W=[],ee=0,te="",ne="",se="",oe="";M.l<M.length;){var G=M[M.l++];switch(G){case 0:W.push(M.read_shift(8,"f"));break;case 1:ne=y(V[0].c,M.read_shift(2),!0),te=y(V[0].r,M.read_shift(2),!1),W.push(ne+te);break;case 2:{var ce=y(V[0].c,M.read_shift(2),!0),Z=y(V[0].r,M.read_shift(2),!1);ne=y(V[0].c,M.read_shift(2),!0),te=y(V[0].r,M.read_shift(2),!1),W.push(ce+Z+":"+ne+te)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(M.read_shift(2));break;case 6:{for(var ae="";G=M[M.l++];)ae+=String.fromCharCode(G);W.push('"'+ae.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:oe=W.pop(),se=W.pop(),W.push(["AND","OR"][G-20]+"("+se+","+oe+")");break;default:if(G<32&&N[G])oe=W.pop(),se=W.pop(),W.push(se+N[G]+oe);else if(C[G]){if(ee=C[G][1],ee==69&&(ee=M[M.l++]),ee>W.length){console.error("WK1 bad formula parse 0x"+G.toString(16)+":|"+W.join("|")+"|");return}var je=W.slice(-ee);W.length-=ee,W.push(C[G][0]+"("+je.join(",")+")")}else return G<=7?console.error("WK1 invalid opcode "+G.toString(16)):G<=24?console.error("WK1 unsupported op "+G.toString(16)):G<=30?console.error("WK1 invalid opcode "+G.toString(16)):G<=115?console.error("WK1 unsupported function opcode "+G.toString(16)):console.error("WK1 unrecognized opcode "+G.toString(16))}}W.length==1?V[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function S(M){var V=[{c:0,r:0},{t:"n",v:0},0];return V[0].r=M.read_shift(2),V[3]=M[M.l++],V[0].c=M[M.l++],V}function D(M,V){var W=S(M);return W[1].t="s",W[1].v=M.read_shift(V-4,"cstr"),W}function E(M,V,W,ee){var te=Ut(6+ee.length);te.write_shift(2,M),te.write_shift(1,W),te.write_shift(1,V),te.write_shift(1,39);for(var ne=0;ne<ee.length;++ne){var se=ee.charCodeAt(ne);te.write_shift(1,se>=128?95:se)}return te.write_shift(1,0),te}function T(M,V){var W=S(M);W[1].v=M.read_shift(2);var ee=W[1].v>>1;if(W[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return W[1].v=ee,W}function A(M,V){var W=S(M),ee=M.read_shift(4),te=M.read_shift(4),ne=M.read_shift(2);if(ne==65535)return ee===0&&te===3221225472?(W[1].t="e",W[1].v=15):ee===0&&te===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var se=ne&32768;return ne=(ne&32767)-16446,W[1].v=(1-se*2)*(te*Math.pow(2,ne+32)+ee*Math.pow(2,ne)),W}function L(M,V,W,ee){var te=Ut(14);if(te.write_shift(2,M),te.write_shift(1,W),te.write_shift(1,V),ee==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var ne=0,se=0,oe=0,G=0;return ee<0&&(ne=1,ee=-ee),se=Math.log2(ee)|0,ee/=Math.pow(2,se-31),G=ee>>>0,(G&2147483648)==0&&(ee/=2,++se,G=ee>>>0),ee-=G,G|=2147483648,G>>>=0,ee*=Math.pow(2,32),oe=ee>>>0,te.write_shift(4,oe),te.write_shift(4,G),se+=16383+(ne?32768:0),te.write_shift(2,se),te}function P(M,V){var W=A(M);return M.l+=V-14,W}function O(M,V){var W=S(M),ee=M.read_shift(4);return W[1].v=ee>>6,W}function Q(M,V){var W=S(M),ee=M.read_shift(8,"f");return W[1].v=ee,W}function z(M,V){var W=Q(M);return M.l+=V-10,W}function re(M,V){return M[M.l+V-1]==0?M.read_shift(V,"cstr"):""}function U(M,V){var W=M[M.l++];W>V-1&&(W=V-1);for(var ee="";ee.length<W;)ee+=String.fromCharCode(M[M.l++]);return ee}function X(M,V,W){if(!(!W.qpro||V<21)){var ee=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var te=M.read_shift(V-21,"cstr");return[ee,te]}}function B(M,V){for(var W={},ee=M.l+V;M.l<ee;){var te=M.read_shift(2);if(te==14e3){for(W[te]=[0,""],W[te][0]=M.read_shift(2);M[M.l];)W[te][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return W}function Y(M,V){var W=Ut(5+M.length);W.write_shift(2,14e3),W.write_shift(2,V);for(var ee=0;ee<M.length;++ee){var te=M.charCodeAt(ee);W[W.l++]=te>127?95:te}return W[W.l++]=0,W}var K={0:{n:"BOF",f:Xs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:re},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},ue={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:B},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function Cge(e){var t={},r=e.match(Eo),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=cn(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=f4[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var kge=function(){var e=hy("t"),t=hy("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Gn(o[1])},c=i.match(t);return c&&(l.s=Cge(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),_ge=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Ege=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Dge=/<(?:\w+:)?r>/,Age=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function F4(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Gn(Ca(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ca(e),r&&(n.h=w4(n.t))):e.match(Dge)&&(n.r=Ca(e),n.t=Gn(Ca((e.replace(Age,"").match(Ege)||[]).join("").replace(Eo,""))),r&&(n.h=_ge(kge(n.r)))),n):{t:""}}var Tge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ige=/<(?:\w+:)?(?:si|sstItem)>/g,Pge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Oge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Tge);if(s){n=s[2].replace(Ige,"").split(Pge);for(var i=0;i!=n.length;++i){var o=F4(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=cn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Mge=/^\s|\s$|[\t\n\r]/;function nH(e,t){if(!t.bookSST)return"";var r=[Us];r[r.length]=pr("sst",null,{xmlns:Lx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Mge)&&(i+=' xml:space="preserve"'),i+=">"+ga(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Rge(e){return[e.read_shift(4),e.read_shift(4)]}function Fge(e,t){var r=[],n=!1;return pf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Lge(e,t){return t||(t=Ut(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Bge=Kxe;function Uge(e){var t=ol();nr(t,159,Lge(e));for(var r=0;r<e.length;++r)nr(t,19,Bge(e[r]));return nr(t,160),t.end()}function aH(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Wh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function $ge(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Wh(e,4),t.U=Wh(e,4),t.W=Wh(e,4),t}function Vge(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function qge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Vge(e));return t}function zge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Hge(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Wh(e,4),t.U=Wh(e,4),t.W=Wh(e,4),t}function Wge(e){var t=Hge(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function sH(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function iH(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Gge(e){var t=Wh(e);switch(t.Minor){case 2:return[t.Minor,Yge(e)];case 3:return[t.Minor,Kge()];case 4:return[t.Minor,Xge(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Yge(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=sH(e,r),s=iH(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Kge(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xge(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Eo,function(i){var o=cn(i);switch(Yu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Qge(e,t){var r={},n=r.EncryptionVersionInfo=Wh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=sH(e,s),t-=s,r.EncryptionVerifier=iH(e,t),r}function Jge(e){var t={},r=t.EncryptionVersionInfo=Wh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function L4(e){var t=0,r,n=aH(e),s=n.length+1,i,o,l,c,d;for(r=Lm(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var oH=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=aH(o),c=i(l),d=l.length,u=Lm(16),h=0;h!=16;++h)u[h]=0;var m,p,v;for((d&1)===1&&(m=c>>8,u[d]=s(e[0],m),--d,m=c&255,p=l[l.length-1],u[d]=s(p,m));d>0;)--d,m=c>>8,u[d]=s(l[d],m),--d,m=c&255,u[d]=s(l[d],m);for(d=15,v=15-l.length;v>0;)m=c>>8,u[d]=s(e[v],m),--d,--v,m=c&255,u[d]=s(l[d],m),--d,--v;return u}}(),Zge=function(e,t,r,n,s){s||(s=t),n||(n=oH(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},ebe=function(e){var t=0,r=oH(e);return function(n){var s=Zge("",n,t,r);return t=s[1],s[0]}};function tbe(e,t,r,n){var s={key:Xs(e),verificationBytes:Xs(e)};return r.password&&(s.verifier=L4(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=ebe(r.password)),s}function rbe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Jge(e):n.Data=Qge(e,t),n}function nbe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?rbe(e,t-2,n):tbe(e,r.biff>=8?t:t-2,r,n),n}var lH=function(){function e(s,i){switch(i.type){case"base64":return t(nc(s),i);case"binary":return t(s,i);case"buffer":return t(En&&Buffer.isBuffer(s)?s.toString("binary"):Zm(s),i);case"array":return t(wx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var m=/\\\w+\b/g,p=0,v,g=-1;v=m.exec(u);){switch(v[0]){case"\\cell":var b=u.slice(p,m.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][g]=y:l[on({r:h,c:g})]=y}break}p=m.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=yn(d),l}function r(s,i){return ep(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Yn(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=on({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(sf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function abe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function xy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function sbe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,d/2]}function ibe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function R2(e,t){if(t===0)return e;var r=sbe(abe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),xy(ibe(r))}var cH=6,obe=15,lbe=1,xo=cH;function vy(e){return Math.floor((e+Math.round(128/xo)/256)*xo)}function gy(e){return Math.floor((e-5)/xo*100+.5)/100}function F2(e){return Math.round((e*xo+5)/xo*256)/256}function eE(e){return F2(gy(vy(e)))}function B4(e){var t=Math.abs(e-eE(e)),r=xo;if(t>.005)for(xo=lbe;xo<obe;++xo)Math.abs(e-eE(e))<=t&&(t=Math.abs(e-eE(e)),r=xo);xo=r}function Bm(e){e.width?(e.wpx=vy(e.width),e.wch=gy(e.wpx),e.MDW=xo):e.wpx?(e.wch=gy(e.wpx),e.width=F2(e.wch),e.MDW=xo):typeof e.wch=="number"&&(e.width=F2(e.wch),e.wpx=vy(e.width),e.MDW=xo),e.customWidth&&delete e.customWidth}var cbe=96,dH=cbe;function by(e){return e*96/dH}function Iv(e){return e*dH/96}var dbe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ube(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(Eo)||[]).forEach(function(o){var l=cn(o);switch(Yu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Va(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Va(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function hbe(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(Eo)||[]).forEach(function(o){var l=cn(o);switch(Yu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function fbe(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(Eo)||[]).forEach(function(o){var l=cn(o);switch(Yu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ca(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Va(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Va(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Va(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Va(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Va(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Va(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Va(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=f4[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Va(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=lx[s.color.index];s.color.index==81&&(c=lx[1]),c||(c=lx[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=R2(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function mbe(e,t,r){t.NumberFmt=[];for(var n=ws(nn),s=0;s<n.length;++s)t.NumberFmt[n[s]]=nn[n[s]];var i=e[0].match(Eo);if(i)for(s=0;s<i.length;++s){var o=cn(i[s]);switch(Yu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Gn(Ca(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Hh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function pbe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=pr("numFmt",null,{numFmtId:n,formatCode:ga(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=pr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Vj=["numFmtId","fillId","fontId","borderId","xfId"],qj=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function xbe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Eo)||[]).forEach(function(i){var o=cn(i),l=0;switch(Yu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Vj.length;++l)n[Vj[l]]&&(n[Vj[l]]=parseInt(n[Vj[l]],10));for(l=0;l<qj.length;++l)n[qj[l]]&&(n[qj[l]]=Va(n[qj[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Va(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function vbe(e){var t=[];return t[t.length]=pr("cellXfs",null),e.forEach(function(r){t[t.length]=pr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=pr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gbe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&mbe(h,u,d),(h=l.match(s))&&fbe(h,u,c,d),(h=l.match(n))&&hbe(h,u,c,d),(h=l.match(i))&&ube(h,u,c,d),(h=l.match(r))&&xbe(h,u,d),u}}();function uH(e,t){var r=[Us,pr("styleSheet",null,{xmlns:Lx[0],"xmlns:vt":si.vt})],n;return e.SSF&&(n=pbe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=vbe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function bbe(e,t){var r=e.read_shift(2),n=Co(e);return[r,n]}function ybe(e,t,r){r||(r=Ut(6+4*t.length)),r.write_shift(2,e),wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function jbe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=r0e(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=t0e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Co(e),n}function Nbe(e,t){t||(t=Ut(25+4*32)),t.write_shift(2,e.sz*20),n0e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),P2(e.color,t);var n=0;return n=2,t.write_shift(1,n),wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var wbe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tE,Sbe=ko;function P6(e,t){t||(t=Ut(4*3+8*7+16*1)),tE||(tE=gS(wbe));var r=tE[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(P2({auto:1},t),P2({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Cbe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function hH(e,t,r){r||(r=Ut(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function fb(e,t){return t||(t=Ut(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var kbe=ko;function _be(e,t){return t||(t=Ut(51)),t.write_shift(1,0),fb(null,t),fb(null,t),fb(null,t),fb(null,t),fb(null,t),t.length>t.l?t.slice(0,t.l):t}function Ebe(e,t){return t||(t=Ut(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),I2(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Dbe(e,t,r){var n=Ut(2052);return n.write_shift(4,e),I2(t,n),I2(r,n),n.length>n.l?n.slice(0,n.l):n}function Abe(e,t,r){var n={};n.NumberFmt=[];for(var s in nn)n.NumberFmt[s]=nn[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return pf(e,function(c,d,u){switch(u){case 44:n.NumberFmt[c[0]]=c[1],Hh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=R2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function Tbe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(nr(e,615,Dd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&nr(e,44,ybe(s,t[s]))}),nr(e,616))}}function Ibe(e){var t=1;nr(e,611,Dd(t)),nr(e,43,Nbe({sz:12,color:{theme:1},name:"Calibri",family:2})),nr(e,612)}function Pbe(e){var t=2;nr(e,603,Dd(t)),nr(e,45,P6({patternType:"none"})),nr(e,45,P6({patternType:"gray125"})),nr(e,604)}function Obe(e){var t=1;nr(e,613,Dd(t)),nr(e,46,_be()),nr(e,614)}function Mbe(e){var t=1;nr(e,626,Dd(t)),nr(e,47,hH({numFmtId:0},65535)),nr(e,627)}function Rbe(e,t){nr(e,617,Dd(t.length)),t.forEach(function(r){nr(e,47,hH(r,0))}),nr(e,618)}function Fbe(e){var t=1;nr(e,619,Dd(t)),nr(e,48,Ebe({xfId:0,name:"Normal"})),nr(e,620)}function Lbe(e){var t=0;nr(e,505,Dd(t)),nr(e,506)}function Bbe(e){var t=0;nr(e,508,Dbe(t,"TableStyleMedium9","PivotStyleMedium4")),nr(e,509)}function Ube(e,t){var r=ol();return nr(r,278),Tbe(r,e.SSF),Ibe(r),Pbe(r),Obe(r),Mbe(r),Rbe(r,t.cellXfs),Fbe(r),Lbe(r),Bbe(r),nr(r,279),r.end()}var $be=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vbe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Eo)||[]).forEach(function(s){var i=cn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[$be.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function qbe(){}function zbe(){}var Hbe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Wbe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Gbe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ybe(e,t,r){t.themeElements={};var n;[["clrScheme",Hbe,Vbe],["fontScheme",Wbe,qbe],["fmtScheme",Gbe,zbe]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Kbe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function fH(e,t){(!e||e.length===0)&&(e=U4());var r,n={};if(!(r=e.match(Kbe)))throw new Error("themeElements not found in theme");return Ybe(r[0],n,t),n.raw=e,n}function U4(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Us];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xbe(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=sz(i,{type:"array"})}catch{return}var l=zl(o,"theme/theme/theme1.xml",!0);if(l)return fH(l,r)}}function Qbe(e){return e.read_shift(4)}function Jbe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Zbe(e,4);break;case 2:t.xclrValue=Wz(e);break;case 3:t.xclrValue=Qbe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Zbe(e,t){return ko(e,t)}function eye(e,t){return ko(e,t)}function tye(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Jbe(e);break;case 6:n[1]=eye(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function rye(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(tye(e,r-e.l));return{ixfe:n,ext:i}}function nye(e,t){t.forEach(function(r){r[0]})}function aye(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Co(e)}}function sye(e){var t=Ut(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),wi(e.name,t),t.slice(0,t.l)}function iye(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function oye(e){var t=Ut(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function lye(e,t){var r=Ut(8+2*t.length);return r.write_shift(4,e),wi(t,r),r.slice(0,r.l)}function cye(e){return e.l+=4,e.read_shift(4)!=0}function dye(e,t){var r=Ut(8);return r.write_shift(4,e),r.write_shift(4,1),r}function uye(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return pf(e,function(c,d,u){switch(u){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):l==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function hye(){var e=ol();return nr(e,332),nr(e,334,Dd(1)),nr(e,335,sye({name:"XLDAPR",version:12e4,flags:3496657072})),nr(e,336),nr(e,339,lye(1,"XLDAPR")),nr(e,52),nr(e,35,Dd(514)),nr(e,4096,Dd(0)),nr(e,4097,Tc(1)),nr(e,36),nr(e,53),nr(e,340),nr(e,337,dye(1)),nr(e,51,oye([[1,0]])),nr(e,338),nr(e,333),e.end()}function fye(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(Eo,function(l){var c=cn(l);switch(Yu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function mH(){var e=[Us];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function mye(e){var t=[];if(!e)return t;var r=1;return(e.match(Eo)||[]).forEach(function(n){var s=cn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function pye(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=on(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function xye(e,t,r){var n=[];return pf(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function vye(e,t,r,n){if(!e)return e;var s=n||{},i=!1;pf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function gye(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Z0=1024;function pH(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[pr("xml",null,{"xmlns:v":Bl.v,"xmlns:o":Bl.o,"xmlns:x":Bl.x,"xmlns:mv":Bl.mv}).replace(/\/>/,">"),pr("o:shapelayout",pr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),pr("v:shapetype",[pr("v:stroke",null,{joinstyle:"miter"}),pr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Z0<e*1e3;)Z0+=1e3;return t.forEach(function(i){var o=ds(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?pr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=pr("v:fill",c,l),u={on:"t",obscured:"t"};++Z0,s=s.concat(["<v:shape"+fy({id:"_x0000_s"+Z0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,pr("v:shadow",null,u),pr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Wi("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Wi("x:AutoFill","False"),Wi("x:Row",String(o.r)),Wi("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function O6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=ds(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Yn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=yn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(u.a==n[h].id){u.a=n[h].name||u.a;break}}i.c.push(u)})}function bye(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=cn(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=ds(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&F4(h[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function xH(e){var t=[Us,pr("comments",null,{xmlns:Lx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=ga(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(ga(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Wi("t",ga(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Wi("t",ga(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function yye(e,t){var r=[],n=!1,s={},i=0;return e.replace(Eo,function(l,c){var d=cn(l);switch(Yu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function jye(e,t,r){var n=[Us,pr("ThreadedComments",null,{xmlns:si.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(pr("threadedComment",Wi("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Nye(e,t){var r=[],n=!1;return e.replace(Eo,function(i){var o=cn(i);switch(Yu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function wye(e){var t=[Us,pr("personList",null,{xmlns:si.TCMNT,"xmlns:x":Lx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(pr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Sye(e){var t={};t.iauthor=e.read_shift(4);var r=Vx(e);return t.rfx=r.s,t.ref=on(r.s),e.l+=16,t}function Cye(e,t){return t==null&&(t=Ut(36)),t.write_shift(4,e[1].iauthor),lg(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var kye=Co;function _ye(e){return wi(e.slice(0,54))}function Eye(e,t){var r=[],n=[],s={},i=!1;return pf(e,function(l,c,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Dye(e){var t=ol(),r=[];return nr(t,628),nr(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),nr(t,632,_ye(s.a)))})}),nr(t,631),nr(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:ds(n[0]),e:ds(n[0])};nr(t,635,Cye([i,s])),s.t&&s.t.length>0&&nr(t,637,Qxe(s)),nr(t,636),delete s.iauthor})}),nr(t,634),nr(t,629),t.end()}var Aye="application/vnd.ms-office.vbaProject";function Tye(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Hr.write(t)}function Iye(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var vH=["xlsb","xlsm","xlam","biff8","xla"];function Pye(){return{"!type":"dialog"}}function Oye(){return{"!type":"dialog"}}function Mye(){return{"!type":"macro"}}function Rye(){return{"!type":"macro"}}var iv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+cs(u)+(c?"":"$")+Ls(d)}return function(s,i){return t=i,s.replace(e,r)}}(),$4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,V4=function(){return function(t,r){return t.replace($4,function(n,s,i,o,l,c){var d=E4(o)-(i?0:r.c),u=_4(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+h+"C"+m})}}();function gH(e,t){return e.replace($4,function(r,n,s,i,o,l){return n+(s=="$"?s+i:cs(E4(i)+t.c))+(o=="$"?o+l:Ls(_4(l)+t.r))})}function Fye(e,t,r){var n=cl(t),s=n.s,i=ds(r),o={r:i.r-s.r,c:i.c-s.c};return gH(e,o)}function Lye(e){return e.length!=1}function M6(e){return e.replace(/_xlfn\./g,"")}function Gs(e){e.l+=1}function Um(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function bH(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return yH(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=Um(e),l=Um(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function yH(e){var t=Um(e),r=Um(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Bye(e,t,r){if(r.biff<8)return yH(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Um(e),o=Um(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function jH(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Uye(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Um(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Uye(e){var t=Um(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function $ye(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Vye(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return qye(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function qye(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function zye(e,t,r){var n=(e[e.l++]&96)>>5,s=bH(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Hye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=bH(e,i,r);return[n,s,o]}function Wye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Gye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Yye(e,t,r){var n=(e[e.l++]&96)>>5,s=Bye(e,t-1,r);return[n,s]}function Kye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function R6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Xye(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Qye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Jye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Zye(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function e1e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function NH(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function t1e(e){return e.read_shift(2),NH(e)}function r1e(e){return e.read_shift(2),NH(e)}function n1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=jH(e,0,r);return[n,s]}function a1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Vye(e,0,r);return[n,s]}function s1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=jH(e,0,r);return[n,s,i]}function i1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[cje[s],CH[s],n]}function o1e(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:l1e(e);return[s,(i[0]===0?CH:lje)[i[1]]]}function l1e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function c1e(e,t,r){e.l+=r&&r.biff==2?3:4}function d1e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function u1e(e){return e.l++,xf[e.read_shift(1)]}function h1e(e){return e.l++,e.read_shift(2)}function f1e(e){return e.l++,e.read_shift(1)!==0}function m1e(e){return e.l++,bo(e)}function p1e(e,t,r){return e.l++,r1(e,t-1,r)}function x1e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Is(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=xf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=bo(e);break;case 2:r[1]=qx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function v1e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Vx:jS)(e));return s}function g1e(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=x1e(e,r.biff);return o}function b1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function y1e(e,t,r){if(r.biff==5)return j1e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function j1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function N1e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function w1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function S1e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function C1e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var k1e=ko,_1e=ko,E1e=ko;function a1(e,t,r){return e.l+=2,[$ye(e)]}function q4(e){return e.l+=6,[]}var D1e=a1,A1e=q4,T1e=q4,I1e=a1;function wH(e){return e.l+=2,[Xs(e),e.read_shift(2)&1]}var P1e=a1,O1e=wH,M1e=q4,R1e=a1,F1e=a1,L1e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B1e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=L1e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function U1e(e){return e.l+=2,[e.read_shift(4)]}function $1e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function V1e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function q1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function z1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function H1e(e){return e.l+=4,[0,0]}var F6={1:{n:"PtgExp",f:d1e},2:{n:"PtgTbl",f:E1e},3:{n:"PtgAdd",f:Gs},4:{n:"PtgSub",f:Gs},5:{n:"PtgMul",f:Gs},6:{n:"PtgDiv",f:Gs},7:{n:"PtgPower",f:Gs},8:{n:"PtgConcat",f:Gs},9:{n:"PtgLt",f:Gs},10:{n:"PtgLe",f:Gs},11:{n:"PtgEq",f:Gs},12:{n:"PtgGe",f:Gs},13:{n:"PtgGt",f:Gs},14:{n:"PtgNe",f:Gs},15:{n:"PtgIsect",f:Gs},16:{n:"PtgUnion",f:Gs},17:{n:"PtgRange",f:Gs},18:{n:"PtgUplus",f:Gs},19:{n:"PtgUminus",f:Gs},20:{n:"PtgPercent",f:Gs},21:{n:"PtgParen",f:Gs},22:{n:"PtgMissArg",f:Gs},23:{n:"PtgStr",f:p1e},26:{n:"PtgSheet",f:$1e},27:{n:"PtgEndSheet",f:V1e},28:{n:"PtgErr",f:u1e},29:{n:"PtgBool",f:f1e},30:{n:"PtgInt",f:h1e},31:{n:"PtgNum",f:m1e},32:{n:"PtgArray",f:Kye},33:{n:"PtgFunc",f:i1e},34:{n:"PtgFuncVar",f:o1e},35:{n:"PtgName",f:b1e},36:{n:"PtgRef",f:n1e},37:{n:"PtgArea",f:zye},38:{n:"PtgMemArea",f:N1e},39:{n:"PtgMemErr",f:k1e},40:{n:"PtgMemNoMem",f:_1e},41:{n:"PtgMemFunc",f:w1e},42:{n:"PtgRefErr",f:S1e},43:{n:"PtgAreaErr",f:Wye},44:{n:"PtgRefN",f:a1e},45:{n:"PtgAreaN",f:Yye},46:{n:"PtgMemAreaN",f:q1e},47:{n:"PtgMemNoMemN",f:z1e},57:{n:"PtgNameX",f:y1e},58:{n:"PtgRef3d",f:s1e},59:{n:"PtgArea3d",f:Hye},60:{n:"PtgRefErr3d",f:C1e},61:{n:"PtgAreaErr3d",f:Gye},255:{}},W1e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},G1e={1:{n:"PtgElfLel",f:wH},2:{n:"PtgElfRw",f:R1e},3:{n:"PtgElfCol",f:D1e},6:{n:"PtgElfRwV",f:F1e},7:{n:"PtgElfColV",f:I1e},10:{n:"PtgElfRadical",f:P1e},11:{n:"PtgElfRadicalS",f:M1e},13:{n:"PtgElfColS",f:A1e},15:{n:"PtgElfColSV",f:T1e},16:{n:"PtgElfRadicalLel",f:O1e},25:{n:"PtgList",f:B1e},29:{n:"PtgSxName",f:U1e},255:{}},Y1e={0:{n:"PtgAttrNoop",f:H1e},1:{n:"PtgAttrSemi",f:e1e},2:{n:"PtgAttrIf",f:Jye},4:{n:"PtgAttrChoose",f:Xye},8:{n:"PtgAttrGoto",f:Qye},16:{n:"PtgAttrSum",f:c1e},32:{n:"PtgAttrBaxcel",f:R6},33:{n:"PtgAttrBaxcel",f:R6},64:{n:"PtgAttrSpace",f:t1e},65:{n:"PtgAttrSpaceSemi",f:r1e},128:{n:"PtgAttrIfError",f:Zye},255:{}};function s1(e,t,r,n){if(n.biff<8)return ko(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=g1e(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=v1e(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(ko(e,t)),i}function i1(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=F6[i]||F6[W1e[i]],(i===24||i===25)&&(s=(i===24?G1e:Y1e)[e[e.l+1]]),!s||!s.f?ko(e,t):o.push([s.n,s.f(e,t,r)]);return o}function K1e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var X1e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Q1e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function SH(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function L6(e,t,r){var n=SH(e,t,r);return n=="#REF"?n:Q1e(n,r)}function mo(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,h=0,m=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,C=e[0].length;y<C;++y){var N=e[0][y];switch(N[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=ys(" ",e[0][g][1][1]);break;case 1:b=ys("\r",e[0][g][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+b,g=-1}l.push(d+X1e[N[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Bb(N[1][1],o,s),l.push(Ub(u,i));break;case"PtgRefN":u=r?Bb(N[1][1],r,s):N[1][1],l.push(Ub(u,i));break;case"PtgRef3d":h=N[1][1],u=Bb(N[1][2],o,s),v=L6(n,h,s),l.push(v+"!"+Ub(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=N[1][0],S=N[1][1];k||(k=0),k&=127;var D=k==0?[]:l.slice(-k);l.length-=k,S==="User"&&(S=D.shift()),l.push(S+"("+D.join(",")+")");break;case"PtgBool":l.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(N[1]);break;case"PtgNum":l.push(String(N[1]));break;case"PtgStr":l.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(N[1]);break;case"PtgAreaN":p=f6(N[1][1],r?{s:r}:o,s),l.push(Q_(p,s));break;case"PtgArea":p=f6(N[1][1],o,s),l.push(Q_(p,s));break;case"PtgArea3d":h=N[1][1],p=N[1][2],v=L6(n,h,s),l.push(v+"!"+Q_(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=N[1][2];var E=(n.names||[])[m-1]||(n[0]||[])[m],T=E?E.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var A=N[1][1];m=N[1][2];var L;if(s.biff<=5)A<0&&(A=-A),n[A]&&(L=n[A][m]);else{var P="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][m]&&n[A][m].itab>0&&(P=n.SheetNames[n[A][m].itab-1]+"!"):P=n.SheetNames[m-1]+"!"),n[A]&&n[A][m])P+=n[A][m].Name;else if(n[0]&&n[0][m])P+=n[0][m].Name;else{var O=(SH(n,A,s)||"").split(";;");O[m-1]?P=O[m-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var Q="(",z=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:Q=ys(" ",e[0][g][1][1])+Q;break;case 3:Q=ys("\r",e[0][g][1][1])+Q;break;case 4:z=ys(" ",e[0][g][1][1])+z;break;case 5:z=ys("\r",e[0][g][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(Q+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var re={c:r.c,r:r.r};if(n.sharedf[on(u)]){var U=n.sharedf[on(u)];l.push(mo(U,o,re,n,s))}else{var X=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(mo(d[1],o,re,n,s)),X=!0;break}X||l.push(N[1])}break;case"PtgArray":l.push("{"+K1e(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var B=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&B.indexOf(e[0][y][0])==-1){N=e[0][g];var Y=!0;switch(N[1][0]){case 4:Y=!1;case 0:b=ys(" ",N[1][1]);break;case 5:Y=!1;case 1:b=ys("\r",N[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}l.push((Y?b:"")+l.pop()+(Y?"":b)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function J1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],ko(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function Z1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],ko(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function eje(e,t,r,n){var s=e.l+t,i=i1(e,n,r),o;return s!==e.l&&(o=s1(e,s-e.l,i,r)),[i,o]}function tje(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=i1(e,i,r);return i==65535?[[],ko(e,t-2)]:(t!==i+2&&(s=s1(e,n-i-2,o,r)),[o,s])}function rje(e){var t;if(Uh(e,e.l+6)!==65535)return[bo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function nje(e){if(e==null){var t=Ut(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Sx(e);return Sx(0)}function rE(e,t,r){var n=e.l+t,s=Ku(e);r.biff==2&&++e.l;var i=rje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Z1e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function aje(e,t,r,n,s){var i=kx(t,r,s),o=nje(e.v),l=Ut(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Ut(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var h=Ni([i,o,l,d]);return h}function NS(e,t,r){var n=e.read_shift(4),s=i1(e,n,r),i=e.read_shift(4),o=i>0?s1(e,i,s,r):null;return[s,o]}var sje=NS,wS=NS,ije=NS,oje=NS,lje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},CH={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function B6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function dje(e){var t="of:="+e.replace($4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function nE(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function uje(e){return e.replace(/\./,"!")}var Vb={},ov={},qb=typeof Map<"u";function z4(e,t,r){var n=0,s=e.length;if(r){if(qb?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=qb?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(qb?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function SS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(xo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=gy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=F2(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function ux(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function tp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Hh(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function kH(e,t,r,n,s,i){try{n.cellNF&&(e.z=nn[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=za(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(nn[t]==null&&Hh(lxe[t]||"General",t),e.t==="e")e.w=e.w||xf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v);else if(e.t==="d"){var o=li(e.v);(o|0)===o?e.w=o.toString(10):e.w=uy(o)}else{if(e.v===void 0)return"";e.w=Nx(e.v,ov)}else e.t==="d"?e.w=zc(t,li(e.v),ov):e.w=zc(t,e.v,ov)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=R2(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=R2(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function hje(e,t,r){if(e&&e["!ref"]){var n=Yn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function fje(e,t){var r=Yn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=yn(r))}var mje=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,pje=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,xje=/<(?:\w:)?hyperlink [^>]*>/mg,vje=/"(\w*:\w*)"/,gje=/<(?:\w:)?col\b[^>]*[\/]?>/g,bje=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,yje=/<(?:\w:)?pageMargins[^>]*\/>/g,_H=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,jje=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Nje=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function wje(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(pje);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var m=d.match(_H);m?H4(m[0],l,s,r):(m=d.match(jje))&&Cje(m[0],m[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=d.slice(p,p+50).match(vje);v&&fje(l,v[1])}var g=d.match(Nje);g&&g[1]&&Lje(g[1],s);var b=[];if(t.cellStyles){var y=d.match(gje);y&&Pje(b,y)}h&&$je(h[1],l,t,c,i,o);var C=u.match(bje);C&&(l["!autofilter"]=Mje(C[0]));var N=[],k=u.match(mje);if(k)for(p=0;p!=k.length;++p)N[p]=Yn(k[p].slice(k[p].indexOf('"')+1));var S=u.match(xje);S&&Aje(l,S,n);var D=u.match(yje);if(D&&(l["!margins"]=Tje(cn(D[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=yn(c)),t.sheetRows>0&&l["!ref"]){var E=Yn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=yn(E))}return b.length>0&&(l["!cols"]=b),N.length>0&&(l["!merges"]=N),l}function Sje(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+yn(e[r])+'"/>';return t+"</mergeCells>"}function H4(e,t,r,n){var s=cn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Gn(Ca(s.codeName)))}function Cje(e,t,r,n,s){H4(e.slice(0,e.indexOf(">")),r,n,s)}function kje(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Au(ga(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+pr("outlinePr",null,d)}!i&&!l||(s[s.length]=pr("sheetPr",l,o))}var _je=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Eje=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Dje(e){var t={sheet:1};return _je.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Eje.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=L4(e.password).toString(16).toUpperCase()),pr("sheetProtection",null,t)}function Aje(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=cn(Ca(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Gn(i.location))):(i.Target="#"+Gn(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Yn(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=on({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function Tje(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Ije(e){return ux(e),pr("pageMargins",null,e)}function Pje(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=cn(t[n],!0);s.hidden&&(s.hidden=Va(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,B4(s.width)),Bm(s);i<=o;)e[i++]=Ha(s)}}function Oje(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=pr("col",null,SS(s,n)));return r[r.length]="</cols>",r.join("")}function Mje(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Rje(e,t,r,n){var s=typeof e.ref=="string"?e.ref:yn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=cl(s);o.s.r==o.e.r&&(o.e.r=cl(t["!ref"]).e.r,s=yn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),pr("autoFilter",null,{ref:s})}var Fje=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Lje(e,t){t.Views||(t.Views=[{}]),(e.match(Fje)||[]).forEach(function(r,n){var s=cn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Va(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Bje(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),pr("sheetViews",pr("sheetView",null,s),{})}function Uje(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=xf[e.v];break;case"d":n&&n.cellDates?s=za(e.v,-1).toISOString():(e=Ha(e),e.t="n",s=""+(e.v=li(za(e.v)))),typeof e.z>"u"&&(e.z=nn[14]);break;default:s=e.v;break}var l=Wi("v",ga(s)),c={r:t},d=tp(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Wi("v",""+z4(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=pr("f",ga(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),pr("c",l,c)}var $je=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=hy("v"),o=hy("f");return function(c,d,u,h,m,p){for(var v=0,g="",b=[],y=[],C=0,N=0,k=0,S="",D,E,T=0,A=0,L,P,O=0,Q=0,z=Array.isArray(p.CellXf),re,U=[],X=[],B=Array.isArray(d),Y=[],K={},ue=!1,M=!!u.sheetStubs,V=c.split(t),W=0,ee=V.length;W!=ee;++W){g=V[W].trim();var te=g.length;if(te!==0){var ne=0;e:for(v=0;v<te;++v)switch(g[v]){case">":if(g[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(E=cn(g.slice(ne,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,u.sheetRows&&u.sheetRows<T)continue;K={},ue=!1,E.ht&&(ue=!0,K.hpt=parseFloat(E.ht),K.hpx=Iv(K.hpt)),E.hidden=="1"&&(ue=!0,K.hidden=!0),E.outlineLevel!=null&&(ue=!0,K.level=+E.outlineLevel),ue&&(Y[T-1]=K)}break;case"<":ne=v;break}if(ne>=v)break;if(E=cn(g.slice(ne,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,!(u.sheetRows&&u.sheetRows<T)){h.s.r>T-1&&(h.s.r=T-1),h.e.r<T-1&&(h.e.r=T-1),u&&u.cellStyles&&(K={},ue=!1,E.ht&&(ue=!0,K.hpt=parseFloat(E.ht),K.hpx=Iv(K.hpt)),E.hidden=="1"&&(ue=!0,K.hidden=!0),E.outlineLevel!=null&&(ue=!0,K.level=+E.outlineLevel),ue&&(Y[T-1]=K)),b=g.slice(v).split(e);for(var se=0;se!=b.length&&b[se].trim().charAt(0)=="<";++se);for(b=b.slice(se),v=0;v!=b.length;++v)if(g=b[v].trim(),g.length!==0){if(y=g.match(r),C=v,N=0,k=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(C=0,S=y[1],N=0;N!=S.length&&!((k=S.charCodeAt(N)-64)<1||k>26);++N)C=26*C+k;--C,A=C}else++A;for(N=0;N!=g.length&&g.charCodeAt(N)!==62;++N);if(++N,E=cn(g.slice(0,N),!0),E.r||(E.r=on({r:T-1,c:A})),S=g.slice(N),D={t:""},(y=S.match(i))!=null&&y[1]!==""&&(D.v=Gn(y[1])),u.cellFormula){if((y=S.match(o))!=null&&y[1]!==""){if(D.f=Gn(Ca(y[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=M6(D.f)),y[0].indexOf('t="array"')>-1)D.F=(S.match(s)||[])[1],D.F.indexOf(":")>-1&&U.push([Yn(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){P=cn(y[0]);var oe=Gn(Ca(y[1]));u.xlfn||(oe=M6(oe)),X[parseInt(P.si,10)]=[P,oe,E.r]}}else(y=S.match(/<f[^>]*\/>/))&&(P=cn(y[0]),X[P.si]&&(D.f=Fye(X[P.si][1],X[P.si][2],E.r)));var G=ds(E.r);for(N=0;N<U.length;++N)G.r>=U[N][0].s.r&&G.r<=U[N][0].e.r&&G.c>=U[N][0].s.c&&G.c<=U[N][0].e.c&&(D.F=U[N][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(M)D.t="z";else continue;else D.t=E.t||"n";switch(h.s.c>A&&(h.s.c=A),h.e.c<A&&(h.e.c=A),D.t){case"n":if(D.v==""||D.v==null){if(!M)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!M)continue;D.t="z"}else L=Vb[parseInt(D.v,10)],D.v=L.t,D.r=L.r,u.cellHTML&&(D.h=L.h);break;case"str":D.t="s",D.v=D.v!=null?Ca(D.v):"",u.cellHTML&&(D.h=w4(D.v));break;case"inlineStr":y=S.match(n),D.t="s",y!=null&&(L=F4(y[1]))?(D.v=L.t,u.cellHTML&&(D.h=L.h)):D.v="";break;case"b":D.v=Va(D.v);break;case"d":u.cellDates?D.v=za(D.v,1):(D.v=li(za(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=Dz[D.v];break}if(O=Q=0,re=null,z&&E.s!==void 0&&(re=p.CellXf[E.s],re!=null&&(re.numFmtId!=null&&(O=re.numFmtId),u.cellStyles&&re.fillId!=null&&(Q=re.fillId))),kH(D,O,Q,u,m,p),u.cellDates&&z&&D.t=="n"&&sg(nn[O])&&(D.t="d",D.v=yS(D.v)),E.cm&&u.xlmeta){var ce=(u.xlmeta.Cell||[])[+E.cm-1];ce&&ce.type=="XLDAPR"&&(D.D=!0)}if(B){var Z=ds(E.r);d[Z.r]||(d[Z.r]=[]),d[Z.r][Z.c]=D}else d[E.r]=D}}}}Y.length>0&&(d["!rows"]=Y)}}();function Vje(e,t,r,n){var s=[],i=[],o=Yn(e["!ref"]),l="",c,d="",u=[],h=0,m=0,p=e["!rows"],v=Array.isArray(e),g={r:d},b,y=-1;for(m=o.s.c;m<=o.e.c;++m)u[m]=cs(m);for(h=o.s.r;h<=o.e.r;++h){for(i=[],d=Ls(h),m=o.s.c;m<=o.e.c;++m){c=u[m]+d;var C=v?(e[h]||[])[m]:e[c];C!==void 0&&(l=Uje(C,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[h])&&(g={r:d},p&&p[h]&&(b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),s[s.length]=pr("row",i.join(""),g))}if(p)for(;h<p.length;++h)p&&p[h]&&(g={r:h+1},b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),s[s.length]=pr("row","",g));return s.join("")}function EH(e,t,r,n){var s=[Us,pr("worksheet",null,{xmlns:Lx[0],"xmlns:r":si.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Yn(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=yn(u)}n||(n={}),c["!comments"]=[];var h=[];kje(c,r,e,t,s),s[s.length]=pr("dimension",null,{ref:d}),s[s.length]=Bje(c,t,e,r),t.sheetFormat&&(s[s.length]=pr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Oje(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Vje(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=Dje(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Rje(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Sje(c["!merges"]));var m=-1,p,v=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=xa(n,-1,ga(g[1].Target).replace(/#.*$/,""),Tn.HLINK),p["r:id"]="rId"+v),(m=g[1].Target.indexOf("#"))>-1&&(p.location=ga(g[1].Target.slice(m+1))),g[1].Tooltip&&(p.tooltip=ga(g[1].Tooltip)),s[s.length]=pr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Ije(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Wi("ignoredErrors",pr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(v=xa(n,-1,"../drawings/drawing"+(e+1)+".xml",Tn.DRAW),s[s.length]=pr("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=h),c["!comments"].length>0&&(v=xa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Tn.VML),s[s.length]=pr("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function qje(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function zje(e,t,r){var n=Ut(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=by(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,m=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var v=Array.isArray(r)?(r[d.r]||[])[d.c]:r[on(d)];v&&(h<0&&(h=p),m=p)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,m))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Hje(e,t,r,n){var s=zje(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&nr(e,0,s)}var Wje=Vx,Gje=lg;function Yje(){}function Kje(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Jxe(e),r}function Xje(e,t,r){r==null&&(r=Ut(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return P2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Sz(e,r),r.slice(0,r.l)}function Qje(e){var t=Kc(e);return[t]}function Jje(e,t,r){return r==null&&(r=Ut(8)),Bx(t,r)}function Zje(e){var t=Ux(e);return[t]}function eNe(e,t,r){return r==null&&(r=Ut(4)),$x(t,r)}function tNe(e){var t=Kc(e),r=e.read_shift(1);return[t,r,"b"]}function rNe(e,t,r){return r==null&&(r=Ut(9)),Bx(t,r),r.write_shift(1,e.v?1:0),r}function nNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"b"]}function aNe(e,t,r){return r==null&&(r=Ut(5)),$x(t,r),r.write_shift(1,e.v?1:0),r}function sNe(e){var t=Kc(e),r=e.read_shift(1);return[t,r,"e"]}function iNe(e,t,r){return r==null&&(r=Ut(9)),Bx(t,r),r.write_shift(1,e.v),r}function oNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"e"]}function lNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function cNe(e){var t=Kc(e),r=e.read_shift(4);return[t,r,"s"]}function dNe(e,t,r){return r==null&&(r=Ut(12)),Bx(t,r),r.write_shift(4,t.v),r}function uNe(e){var t=Ux(e),r=e.read_shift(4);return[t,r,"s"]}function hNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),r.write_shift(4,t.v),r}function fNe(e){var t=Kc(e),r=bo(e);return[t,r,"n"]}function mNe(e,t,r){return r==null&&(r=Ut(16)),Bx(t,r),Sx(e.v,r),r}function DH(e){var t=Ux(e),r=bo(e);return[t,r,"n"]}function pNe(e,t,r){return r==null&&(r=Ut(12)),$x(t,r),Sx(e.v,r),r}function xNe(e){var t=Kc(e),r=I4(e);return[t,r,"n"]}function vNe(e,t,r){return r==null&&(r=Ut(12)),Bx(t,r),Cz(e.v,r),r}function gNe(e){var t=Ux(e),r=I4(e);return[t,r,"n"]}function bNe(e,t,r){return r==null&&(r=Ut(8)),$x(t,r),Cz(e.v,r),r}function yNe(e){var t=Kc(e),r=D4(e);return[t,r,"is"]}function jNe(e){var t=Kc(e),r=Co(e);return[t,r,"str"]}function NNe(e,t,r){return r==null&&(r=Ut(12+4*e.v.length)),Bx(t,r),wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wNe(e){var t=Ux(e),r=Co(e);return[t,r,"str"]}function SNe(e,t,r){return r==null&&(r=Ut(8+4*e.v.length)),$x(t,r),wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function CNe(e,t,r){var n=e.l+t,s=Kc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=mo(l,null,s,r.supbooks,r)}else e.l=n;return o}function kNe(e,t,r){var n=e.l+t,s=Kc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=mo(l,null,s,r.supbooks,r)}else e.l=n;return o}function _Ne(e,t,r){var n=e.l+t,s=Kc(e);s.r=r["!row"];var i=bo(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=mo(l,null,s,r.supbooks,r)}else e.l=n;return o}function ENe(e,t,r){var n=e.l+t,s=Kc(e);s.r=r["!row"];var i=Co(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=mo(l,null,s,r.supbooks,r)}else e.l=n;return o}var DNe=Vx,ANe=lg;function TNe(e,t){return t==null&&(t=Ut(4)),t.write_shift(4,e),t}function INe(e,t){var r=e.l+t,n=Vx(e),s=A4(e),i=Co(e),o=Co(e),l=Co(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function PNe(e,t){var r=Ut(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));lg({s:ds(e[0]),e:ds(e[0])},r),T4("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return wi(s||"",r),wi(e[1].Tooltip||"",r),wi("",r),r.slice(0,r.l)}function ONe(){}function MNe(e,t,r){var n=e.l+t,s=kz(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=sje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function RNe(e,t,r){var n=e.l+t,s=Vx(e),i=[s];if(r.cellFormula){var o=oje(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function FNe(e,t,r){r==null&&(r=Ut(18));var n=SS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var AH=["left","right","top","bottom","header","footer"];function LNe(e){var t={};return AH.forEach(function(r){t[r]=bo(e)}),t}function BNe(e,t){return t==null&&(t=Ut(6*8)),ux(e),AH.forEach(function(r){Sx(e[r],t)}),t}function UNe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function $Ne(e,t,r){r==null&&(r=Ut(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function VNe(e){var t=Ut(24);return t.write_shift(4,4),t.write_shift(4,1),lg(e,t),t}function qNe(e,t){return t==null&&(t=Ut(16*4+2)),t.write_shift(2,e.password?L4(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function zNe(){}function HNe(){}function WNe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,p,v,g,b,y,C,N,k,S,D=[];l.biff=12,l["!row"]=0;var E=0,T=!1,A=[],L={},P=l.supbooks||s.supbooks||[[]];if(P.sharedf=L,P.arrayf=A,P.SheetNames=s.SheetNames||s.Sheets.map(function(B){return B.name}),!l.supbooks&&(l.supbooks=P,s.Names))for(var O=0;O<s.Names.length;++O)P[0][O+1]=s.Names[O];var Q=[],z=[],re=!1;yy[16]={n:"BrtShortReal",f:DH};var U;if(pf(e,function(Y,K,ue){if(!m)switch(ue){case 148:d=Y;break;case 0:p=Y,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),k=Ls(b=p.r),l["!row"]=p.r,(Y.hidden||Y.hpt||Y.level!=null)&&(Y.hpt&&(Y.hpx=Iv(Y.hpt)),z[Y.r]=Y);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:Y[2]},Y[2]){case"n":v.v=Y[1];break;case"s":N=Vb[Y[1]],v.v=N.t,v.r=N.r;break;case"b":v.v=!!Y[1];break;case"e":v.v=Y[1],l.cellText!==!1&&(v.w=xf[v.v]);break;case"str":v.t="s",v.v=Y[1];break;case"is":v.t="s",v.v=Y[1].t;break}if((g=o.CellXf[Y[0].iStyleRef])&&kH(v,g.numFmtId,null,l,i,o),y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,l.cellFormula){for(T=!1,E=0;E<A.length;++E){var M=A[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(v.F=yn(M[0]),T=!0)}!T&&Y.length>3&&(v.f=Y[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),l.cellDates&&g&&v.t=="n"&&sg(nn[g.numFmtId])){var V=Qp(v.v);V&&(v.t="d",v.v=new Date(V.y,V.m-1,V.d,V.H,V.M,V.S,V.u))}U&&(U.type=="XLDAPR"&&(v.D=!0),U=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;v={t:"z",v:void 0},y=Y[0].c==-1?y+1:Y[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),U&&(U.type=="XLDAPR"&&(v.D=!0),U=void 0);break;case 176:D.push(Y);break;case 49:U=((l.xlmeta||{}).Cell||[])[Y-1];break;case 494:var W=n["!id"][Y.relId];for(W?(Y.Target=W.Target,Y.loc&&(Y.Target+="#"+Y.loc),Y.Rel=W):Y.relId==""&&(Y.Target="#"+Y.loc),b=Y.rfx.s.r;b<=Y.rfx.e.r;++b)for(y=Y.rfx.s.c;y<=Y.rfx.e.c;++y)l.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=Y):(C=on({c:y,r:b}),c[C]||(c[C]={t:"z",v:void 0}),c[C].l=Y);break;case 426:if(!l.cellFormula)break;A.push(Y),S=l.dense?c[b][y]:c[cs(y)+k],S.f=mo(Y[1],u,{r:p.r,c:y},P,l),S.F=yn(Y[0]);break;case 427:if(!l.cellFormula)break;L[on(Y[0].s)]=Y[1],S=l.dense?c[b][y]:c[cs(y)+k],S.f=mo(Y[1],u,{r:p.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;Y.e>=Y.s;)Q[Y.e--]={width:Y.w/256,hidden:!!(Y.flags&1),level:Y.level},re||(re=!0,B4(Y.w/256)),Bm(Q[Y.e+1]);break;case 161:c["!autofilter"]={ref:yn(Y)};break;case 476:c["!margins"]=Y;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),Y.name&&(s.Sheets[r].CodeName=Y.name),(Y.above||Y.left)&&(c["!outline"]={above:Y.above,left:Y.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),Y.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!K.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+ue.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=yn(d||u)),l.sheetRows&&c["!ref"]){var X=Yn(c["!ref"]);l.sheetRows<=+X.e.r&&(X.e.r=l.sheetRows-1,X.e.r>u.e.r&&(X.e.r=u.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>u.e.c&&(X.e.c=u.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),c["!fullref"]=c["!ref"],c["!ref"]=yn(X))}return D.length>0&&(c["!merges"]=D),Q.length>0&&(c["!cols"]=Q),z.length>0&&(c["!rows"]=z),c}function GNe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||nn[14],t.v=li(za(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=tp(s.cellXfs,t,s),t.l&&i["!links"].push([on(c),t.l]),t.c&&i["!comments"].push([on(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=z4(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?nr(e,18,hNe(t,c)):nr(e,7,dNe(t,c))):(c.t="str",o?nr(e,17,SNe(t,c)):nr(e,6,NNe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?nr(e,13,bNe(t,c)):nr(e,2,vNe(t,c)):o?nr(e,16,pNe(t,c)):nr(e,5,mNe(t,c)),!0;case"b":return c.t="b",o?nr(e,15,aNe(t,c)):nr(e,4,rNe(t,c)),!0;case"e":return c.t="e",o?nr(e,14,lNe(t,c)):nr(e,3,iNe(t,c)),!0}return o?nr(e,12,eNe(t,c)):nr(e,1,Jje(t,c)),!0}function YNe(e,t,r,n){var s=Yn(t["!ref"]||"A1"),i,o="",l=[];nr(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=Ls(u),Hje(e,t,s,u);var h=!1;if(u<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){u===s.s.r&&(l[m]=cs(m)),i=l[m]+o;var p=c?(t[u]||[])[m]:t[i];if(!p){h=!1;continue}h=GNe(e,p,u,m,n,t,h)}}nr(e,146)}function KNe(e,t){!t||!t["!merges"]||(nr(e,177,TNe(t["!merges"].length)),t["!merges"].forEach(function(r){nr(e,176,ANe(r))}),nr(e,178))}function XNe(e,t){!t||!t["!cols"]||(nr(e,390),t["!cols"].forEach(function(r,n){r&&nr(e,60,FNe(n,r))}),nr(e,391))}function QNe(e,t){!t||!t["!ref"]||(nr(e,648),nr(e,649,VNe(Yn(t["!ref"]))),nr(e,650))}function JNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=xa(r,-1,n[1].Target.replace(/#.*$/,""),Tn.HLINK);nr(e,494,PNe(n,s))}}),delete t["!links"]}function ZNe(e,t,r,n){if(t["!comments"].length>0){var s=xa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Tn.VML);nr(e,551,T4("rId"+s)),t["!legacy"]=s}}function e2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:yn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=cl(i);l.s.r==l.e.r&&(l.e.r=cl(t["!ref"]).e.r,i=yn(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),nr(e,161,lg(Yn(i))),nr(e,162)}}function t2e(e,t,r){nr(e,133),nr(e,137,$Ne(t,r)),nr(e,138),nr(e,134)}function r2e(e,t){t["!protect"]&&nr(e,535,qNe(t["!protect"]))}function n2e(e,t,r,n){var s=ol(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Yn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],nr(s,129),(r.vbaraw||o["!outline"])&&nr(s,147,Xje(l,o["!outline"])),nr(s,148,Gje(c)),t2e(s,o,r.Workbook),XNe(s,o),YNe(s,o,e,t),r2e(s,o),e2e(s,o,r,e),KNe(s,o),JNe(s,o,n),o["!margins"]&&nr(s,476,BNe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&QNe(s,o),ZNe(s,o,e,n),nr(s,130),s.end()}function a2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Gn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function s2e(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=a2e(h);u.s.r=u.s.c=0,u.e.c=l,d=cs(l),m[0].forEach(function(p,v){o[d+Ls(v)]={t:"n",v:p,z:m[1]},c=v}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=yn(u)),o}function i2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(_H);return l&&H4(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function o2e(e,t){e.l+=10;var r=Co(e);return{name:r}}function l2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return pf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var W4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],c2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],d2e=[],u2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function U6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Va(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function $6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Va(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function TH(e){$6(e.WBProps,W4),$6(e.CalcPr,u2e),U6(e.WBView,c2e),U6(e.Sheets,d2e),ov.date1904=Va(e.WBProps.date1904)}function h2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Va(e.Workbook.WBProps.date1904)?"true":"false"}var f2e="][*?/\\".split("");function IH(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return f2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function m2e(e,t,r){e.forEach(function(n,s){IH(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function p2e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];m2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)hje(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var x2e=/<\w+:workbook/;function v2e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(Eo,function(c,d){var u=cn(c);switch(Yu(u[0])){case"<?xml":break;case"<workbook":c.match(x2e)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":W4.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=Va(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=Ca(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Gn(Ca(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ca(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Va(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Gn(Ca(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Lx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return TH(r),r}function PH(e){var t=[Us];t[t.length]=pr("workbook",null,{xmlns:Lx[0],"xmlns:r":si.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(W4.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=pr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:ga(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=pr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=pr("definedName",ga(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function g2e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=vD(e),r.name=Co(e),r}function b2e(e,t){return t||(t=Ut(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),T4(e.strRelID,t),wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function y2e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Co(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function j2e(e,t){t||(t=Ut(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Sz(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function N2e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function w2e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Zxe(e),o=ije(e,0,r),l=A4(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function S2e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],yy[16]={n:"BrtFRTArchID$",f:N2e},pf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=mo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),TH(r),r.Names=i,r.supbooks=o,r}function C2e(e,t){nr(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};nr(e,156,b2e(s))}nr(e,144)}function k2e(e,t){t||(t=Ut(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return wi("SheetJS",t),wi(k2.version,t),wi(k2.version,t),wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function _2e(e,t){t||(t=Ut(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function E2e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(nr(e,135),nr(e,158,_2e(s)),nr(e,136))}}function D2e(e,t){var r=ol();return nr(r,131),nr(r,128,k2e()),nr(r,153,j2e(e.Workbook&&e.Workbook.WBProps||null)),E2e(r,e),C2e(r,e),nr(r,132),r.end()}function A2e(e,t,r){return t.slice(-4)===".bin"?S2e(e,r):v2e(e,r)}function T2e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?WNe(e,n,r,s,i,o,l):wje(e,n,r,s,i,o,l)}function I2e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?l2e(e,n,r,s,i):i2e(e,n,r,s,i)}function P2e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Mye():Rye()}function O2e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Pye():Oye()}function M2e(e,t,r,n){return t.slice(-4)===".bin"?Abe(e,r,n):gbe(e,r,n)}function R2e(e,t,r){return fH(e,r)}function F2e(e,t,r){return t.slice(-4)===".bin"?Fge(e,r):Oge(e,r)}function L2e(e,t,r){return t.slice(-4)===".bin"?Eye(e,r):bye(e,r)}function B2e(e,t,r){return t.slice(-4)===".bin"?xye(e):mye(e)}function U2e(e,t,r,n){return r.slice(-4)===".bin"?vye(e,t,r,n):void 0}function $2e(e,t,r){return t.slice(-4)===".bin"?uye(e,t,r):fye(e,t,r)}function V2e(e,t,r){return(t.slice(-4)===".bin"?D2e:PH)(e)}function q2e(e,t,r,n,s){return(t.slice(-4)===".bin"?n2e:EH)(e,r,n,s)}function z2e(e,t,r){return(t.slice(-4)===".bin"?Ube:uH)(e,r)}function H2e(e,t,r){return(t.slice(-4)===".bin"?Uge:nH)(e,r)}function W2e(e,t,r){return(t.slice(-4)===".bin"?Dye:xH)(e)}function G2e(e){return(e.slice(-4)===".bin"?hye:mH)()}var OH=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,MH=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function gd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(OH),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(MH),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Y2e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(OH),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(MH),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var zb;function K2e(e,t){var r=zb[e]||Gn(e);return r==="General"?Nx(t):zc(r,t)}function X2e(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Va(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=za(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Gn(t)]=s}function Q2e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||xf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=K2e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=zb[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&sg(n)){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function J2e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=dbe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Z2e(e,t,r,n,s,i,o,l,c,d){var u="General",h=n.StyleID,m={};d=d||{};var p=[],v=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&p.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Va(e);break;case"String":n.t="s",n.r=a6(Gn(e)),n.v=e.indexOf("<")>-1?Gn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(za(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Gn(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Dz[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=a6(t||e));break}if(Q2e(n,u,d),d.cellFormula!==!1)if(n.Formula){var g=Gn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=iv(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=iv("RC:RC",s):n.ArrayRange&&(n.F=iv(n.ArrayRange,s),c.push([Yn(n.F),n.F]))}else for(v=0;v<c.length;++v)s.r>=c[v][0].s.r&&s.r<=c[v][0].e.r&&s.c>=c[v][0].s.c&&s.c<=c[v][0].e.c&&(n.F=c[v][1]);d.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function ewe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function aE(e,t){var r=t||{};ig();var n=Ab(S4(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ca(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Ha(r);return o.type="string",Tv.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){s.indexOf("<"+Ne)>=0&&(i=!0)}),i)return Bwe(n,r);zb={"General Number":"General","General Date":nn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":nn[15],"Short Date":nn[14],"Long Time":nn[19],"Medium Time":nn[18],"Short Time":nn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:nn[2],Standard:nn[4],Percent:nn[10],Scientific:nn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],m=r.dense?[]:{},p="",v={},g={},b=gd('<Data ss:Type="String">'),y=0,C=0,N=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},D={},E="",T=0,A=[],L={},P={},O=0,Q=[],z=[],re={},U=[],X,B=!1,Y=[],K=[],ue={},M=0,V=0,W={Sheets:[],WBProps:{date1904:!1}},ee={};my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";l=my.exec(n);)switch(l[3]=(te=l[3]).toLowerCase()){case"data":if(te=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Z2e(n.slice(y,l.index),E,b,c[c.length-1][0]=="comment"?re:v,{c:C,r:N},S,U[C],g,Y,r):(E="",b=gd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(z.length>0&&(v.c=z),(!r.sheetRows||r.sheetRows>N)&&v.v!==void 0&&(r.dense?(m[N]||(m[N]=[]),m[N][C]=v):m[cs(C)+Ls(N)]=v),v.HRef&&(v.l={Target:Gn(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=C+(parseInt(v.MergeAcross,10)|0),V=N+(parseInt(v.MergeDown,10)|0),A.push({s:{c:C,r:N},e:{c:M,r:V}})),!r.sheetStubs)v.MergeAcross?C=M+1:++C;else if(v.MergeAcross||v.MergeDown){for(var ne=C;ne<=M;++ne)for(var se=N;se<=V;++se)(ne>C||se>N)&&(r.dense?(m[se]||(m[se]=[]),m[se][ne]={t:"z"}):m[cs(ne)+Ls(se)]={t:"z"});C=M+1}else++C;else v=Y2e(l[0]),v.Index&&(C=+v.Index-1),C<k.s.c&&(k.s.c=C),C>k.e.c&&(k.e.c=C),l[0].slice(-2)==="/>"&&++C,z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(N<k.s.r&&(k.s.r=N),N>k.e.r&&(k.e.r=N),l[0].slice(-2)==="/>"&&(g=gd(l[0]),g.Index&&(N=+g.Index-1)),C=0,++N):(g=gd(l[0]),g.Index&&(N=+g.Index-1),ue={},(g.AutoFitHeight=="0"||g.Height)&&(ue.hpx=parseInt(g.Height,10),ue.hpt=by(ue.hpx),K[N]=ue),g.Hidden=="1"&&(ue.hidden=!0,K[N]=ue));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(m["!ref"]=yn(k),r.sheetRows&&r.sheetRows<=k.e.r&&(m["!fullref"]=m["!ref"],k.e.r=r.sheetRows-1,m["!ref"]=yn(k))),A.length&&(m["!merges"]=A),U.length>0&&(m["!cols"]=U),K.length>0&&(m["!rows"]=K),u[p]=m}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=C=0,c.push([l[3],!1]),d=gd(l[0]),p=Gn(d.Name),m=r.dense?[]:{},A=[],Y=[],K=[],ee={name:p,Hidden:0},W.Sheets.push(ee);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),U=[],B=!1}break;case"style":l[1]==="/"?J2e(S,D,r):D=gd(l[0]);break;case"numberformat":D.nf=Gn(gd(l[0]).Format||"General"),zb[D.nf]&&(D.nf=zb[D.nf]);for(var oe=0;oe!=392&&nn[oe]!=D.nf;++oe);if(oe==392){for(oe=57;oe!=392;++oe)if(nn[oe]==null){Hh(D.nf,oe);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(X=gd(l[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!B&&X.wpx>10){B=!0,xo=cH;for(var G=0;G<U.length;++G)U[G]&&Bm(U[G])}B&&Bm(X),U[X.Index-1||U.length]=X;for(var ce=0;ce<+X.Span;++ce)U[U.length]=Ha(X);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var Z=cn(l[0]),ae={Name:Z.Name,Ref:iv(Z.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(ae.Sheet=W.Sheets.length-1),W.Names.push(ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=gd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?S0e(L,te,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));ewe(re),z.push(re)}else c.push([l[3],!1]),d=gd(l[0]),re={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var je=gd(l[0]);m["!autofilter"]={ref:iv(je.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return W6(n,r);var de=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:de=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:de=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:de=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:de=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+cn(l[0]).Margin)||(m["!margins"].header=+cn(l[0]).Margin);break;case"footer":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+cn(l[0]).Margin)||(m["!margins"].footer=+cn(l[0]).Margin);break;case"pagemargins":var ie=cn(l[0]);m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+ie.Top)||(m["!margins"].top=+ie.Top),isNaN(+ie.Left)||(m["!margins"].left=+ie.Left),isNaN(+ie.Right)||(m["!margins"].right=+ie.Right),isNaN(+ie.Bottom)||(m["!margins"].bottom=+ie.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:de=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:de=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:de=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:de=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:de=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:de=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:de=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:de=!1}break;case"smarttags":break;default:de=!1;break}if(de||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?X2e(P,te,Q,n.slice(O,l.index)):(Q=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var be={};return!r.bookSheets&&!r.bookProps&&(be.Sheets=u),be.SheetNames=h,be.Workbook=W,be.SSF=Ha(nn),be.Props=L,be.Custprops=P,be}function SD(e,t){switch(Y4(t=t||{}),t.type||"base64"){case"base64":return aE(nc(e),t);case"binary":case"buffer":case"file":return aE(e,t);case"array":return aE(Zm(e),t)}}function twe(e,t){var r=[];return e.Props&&r.push(C0e(e.Props,t)),e.Custprops&&r.push(k0e(e.Props,e.Custprops)),r.join("")}function rwe(){return""}function nwe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(pr("NumberFormat",null,{"ss:Format":ga(nn[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(pr("Style",i.join(""),o))}),pr("Styles",r.join(""))}function RH(e){return pr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+V4(e.Ref,{r:0,c:0})})}function awe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(RH(s)))}return pr("Names",r.join(""))}function swe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(RH(l)))}return i.join("")}function iwe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(pr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(pr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(pr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(pr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Wi("ProtectContents","True")),e["!protect"].objects&&s.push(Wi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Wi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Wi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Wi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":pr("WorksheetOptions",s.join(""),{xmlns:Bl.x})}function owe(e){return e.map(function(t){var r=Exe(t.t||""),n=pr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return pr("Comment",n,{"ss:Author":t.a})}).join("")}function lwe(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+ga(V4(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ds(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=ga(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=ga(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(e.v);break;case"b":h="Boolean",m=e.v?"1":"0";break;case"e":h="Error",m=xf[e.v];break;case"d":h="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||nn[14]);break;case"s":h="String",m=_xe(e.v||"");break}var p=tp(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var v=e.v!=null?m:"",g=e.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=owe(e.c)),pr("Cell",g,l)}function cwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Iv(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function dwe(e,t,r,n){if(!e["!ref"])return"";var s=Yn(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,y){Bm(b);var C=!!b.width,N=SS(y,b),k={"ss:Index":y+1};C&&(k["ss:Width"]=vy(N.width)),b.hidden&&(k["ss:Hidden"]="1"),l.push(pr("Column",null,k))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[cwe(d,(e["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>h)&&!(i[o].s.r>d)&&!(i[o].e.c<h)&&!(i[o].e.r<d)){(i[o].s.c!=h||i[o].s.r!=d)&&(m=!0);break}if(!m){var p={r:d,c:h},v=on(p),g=c?(e[d]||[])[h]:e[v];u.push(lwe(g,v,e,t,r,n,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function uwe(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?swe(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?dwe(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(iwe(i,t,e,r)),n.join("")}function hwe(e,t){t||(t={}),e.SSF||(e.SSF=Ha(nn)),e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(twe(e,t)),r.push(rwe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(pr("Worksheet",uwe(n,t,e),{"ss:Name":ga(e.SheetNames[n])}));return r[2]=nwe(e,t),r[3]=awe(e),Us+pr("Workbook",r.join(""),{xmlns:Bl.ss,"xmlns:o":Bl.o,"xmlns:x":Bl.x,"xmlns:ss":Bl.ss,"xmlns:dt":Bl.dt,"xmlns:html":Bl.html})}function fwe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=a0e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=s0e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var mwe=[60,1084,2066,2165,2175];function pwe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Uh(r,r.l),d=CD[c],u=0;d!=null&&mwe.indexOf(c)>-1;)i=Uh(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=CD[c=Uh(r,r.l)];var h=Ni(o);qi(h,0);var m=0;h.lens=[];for(var p=0;p<o.length;++p)h.lens.push(m),m+=o[p].length;if(h.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+n;return t.f(h,h.length,s)}function mu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=nn[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||xf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=zc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&sg(nn[n]||String(n))){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function zj(e,t,r){return{v:e,ixfe:t,t:r}}function xwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},h,m="",p,v,g,b,y={},C=[],N,k,S=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},A=function(ve){return ve<8?lx[ve]:ve<64&&D[ve-8]||lx[ve]},L=function(ve,xe,Ie){var Ze=xe.XF.data;if(!(!Ze||!Ze.patternType||!Ie||!Ie.cellStyles)){xe.s={},xe.s.patternType=Ze.patternType;var Ft;(Ft=xy(A(Ze.icvFore)))&&(xe.s.fgColor={rgb:Ft}),(Ft=xy(A(Ze.icvBack)))&&(xe.s.bgColor={rgb:Ft})}},P=function(ve,xe,Ie){if(!(ue>1)&&!(Ie.sheetRows&&ve.r>=Ie.sheetRows)){if(Ie.cellStyles&&xe.XF&&xe.XF.data&&L(ve,xe,Ie),delete xe.ixfe,delete xe.XF,h=ve,m=on(ve),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<o.s.r&&(o.s.r=ve.r),ve.c<o.s.c&&(o.s.c=ve.c),ve.r+1>o.e.r&&(o.e.r=ve.r+1),ve.c+1>o.e.c&&(o.e.c=ve.c+1),Ie.cellFormula&&xe.f){for(var Ze=0;Ze<C.length;++Ze)if(!(C[Ze][0].s.c>ve.c||C[Ze][0].s.r>ve.r)&&!(C[Ze][0].e.c<ve.c||C[Ze][0].e.r<ve.r)){xe.F=yn(C[Ze][0]),(C[Ze][0].s.c!=ve.c||C[Ze][0].s.r!=ve.r)&&delete xe.f,xe.f&&(xe.f=""+mo(C[Ze][1],o,ve,Y,O));break}}Ie.dense?(s[ve.r]||(s[ve.r]=[]),s[ve.r][ve.c]=xe):s[m]=xe}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var Q,z=[],re=[],U=[],X=[],B=!1,Y=[];Y.SheetNames=O.snames,Y.sharedf=O.sharedf,Y.arrayf=O.arrayf,Y.names=[],Y.XTI=[];var K=0,ue=0,M=0,V=[],W=[],ee;O.codepage=1200,Cd(1200);for(var te=!1;e.l<e.length-1;){var ne=e.l,se=e.read_shift(2);if(se===0&&K===10)break;var oe=e.l===e.length?0:e.read_shift(2),G=CD[se];if(G&&G.f){if(t.bookSheets&&K===133&&se!==133)break;if(K=se,G.r===2||G.r==12){var ce=e.read_shift(2);if(oe-=2,!O.enc&&ce!==se&&((ce&255)<<8|ce>>8)!==se)throw new Error("rt mismatch: "+ce+"!="+se);G.r==12&&(e.l+=10,oe-=10)}var Z={};if(se===10?Z=G.f(e,oe,O):Z=pwe(se,G,e,oe,O),ue==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(se){case 34:r.opts.Date1904=E.WBProps.date1904=Z;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=Z,!t.password)throw new Error("File is password-protected");if(Z.valid==null)throw new Error("Encryption scheme unsupported");if(!Z.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=Z;break;case 66:var ae=Number(Z);switch(ae){case 21010:ae=1200;break;case 32768:ae=1e4;break;case 32769:ae=1252;break}Cd(O.codepage=ae),te=!0;break;case 317:O.rrtabid=Z;break;case 25:O.winlocked=Z;break;case 439:r.opts.RefreshAll=Z;break;case 12:r.opts.CalcCount=Z;break;case 16:r.opts.CalcDelta=Z;break;case 17:r.opts.CalcIter=Z;break;case 13:r.opts.CalcMode=Z;break;case 14:r.opts.CalcPrecision=Z;break;case 95:r.opts.CalcSaveRecalc=Z;break;case 15:O.CalcRefMode=Z;break;case 2211:r.opts.FullCalc=Z;break;case 129:Z.fDialog&&(s["!type"]="dialog"),Z.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),Z.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(Z);break;case 430:Y.push([Z]),Y[Y.length-1].XTI=[];break;case 35:case 547:Y[Y.length-1].push(Z);break;case 24:case 536:ee={Name:Z.Name,Ref:mo(Z.rgce,o,null,Y,O)},Z.itab>0&&(ee.Sheet=Z.itab-1),Y.names.push(ee),Y[0]||(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].push(Z),Z.Name=="_xlnm._FilterDatabase"&&Z.itab>0&&Z.rgce&&Z.rgce[0]&&Z.rgce[0][0]&&Z.rgce[0][0][0]=="PtgArea3d"&&(W[Z.itab-1]={ref:yn(Z.rgce[0][0][1][2])});break;case 22:O.ExternCount=Z;break;case 23:Y.length==0&&(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].XTI=Y[Y.length-1].XTI.concat(Z),Y.XTI=Y.XTI.concat(Z);break;case 2196:if(O.biff<8)break;ee!=null&&(ee.Comment=Z[1]);break;case 18:s["!protect"]=Z;break;case 19:Z!==0&&O.WTF&&console.error("Password verifier: "+Z);break;case 133:i[Z.pos]=Z,O.snames.push(Z.name);break;case 10:{if(--ue)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=yn(o),t.sheetRows&&t.sheetRows<=o.e.r){var je=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=yn(o),o.e.r=je}o.e.r++,o.e.c++}z.length>0&&(s["!merges"]=z),re.length>0&&(s["!objects"]=re),U.length>0&&(s["!cols"]=U),X.length>0&&(s["!rows"]=X),E.Sheets.push(T)}d===""?u=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Z.BIFFVer]||8),O.biffguess=Z.BIFFVer==0,Z.BIFFVer==0&&Z.dt==4096&&(O.biff=5,te=!0,Cd(O.codepage=28591)),O.biff==8&&Z.BIFFVer==0&&Z.dt==16&&(O.biff=2),ue++)break;if(s=t.dense?[]:{},O.biff<8&&!te&&(te=!0,Cd(O.codepage=t.codepage||1252)),O.biff<5||Z.BIFFVer==0&&Z.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var de={pos:e.l-oe,name:d};i[de.pos]=de,O.snames.push(d)}else d=(i[ne]||{name:""}).name;Z.dt==32&&(s["!type"]="chart"),Z.dt==64&&(s["!type"]="macro"),z=[],re=[],O.arrayf=C=[],U=[],X=[],B=!1,T={Hidden:(i[ne]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[Z.r]||[])[Z.c]:s[on({c:Z.c,r:Z.r})])&&++Z.c,N={ixfe:Z.ixfe,XF:S[Z.ixfe]||{},v:Z.val,t:"n"},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t);break;case 5:case 517:N={ixfe:Z.ixfe,XF:S[Z.ixfe],v:Z.val,t:Z.t},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t);break;case 638:N={ixfe:Z.ixfe,XF:S[Z.ixfe],v:Z.rknum,t:"n"},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t);break;case 189:for(var ie=Z.c;ie<=Z.C;++ie){var be=Z.rkrec[ie-Z.c][0];N={ixfe:be,XF:S[be],v:Z.rkrec[ie-Z.c][1],t:"n"},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:ie,r:Z.r},N,t)}break;case 6:case 518:case 1030:{if(Z.val=="String"){l=Z;break}if(N=zj(Z.val,Z.cell.ixfe,Z.tt),N.XF=S[N.ixfe],t.cellFormula){var Ne=Z.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var Fe=Ne[0][0][1][0],Xe=Ne[0][0][1][1],ct=on({r:Fe,c:Xe});y[ct]?N.f=""+mo(Z.formula,o,Z.cell,Y,O):N.F=((t.dense?(s[Fe]||[])[Xe]:s[ct])||{}).F}else N.f=""+mo(Z.formula,o,Z.cell,Y,O)}M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P(Z.cell,N,t),l=Z}break;case 7:case 519:if(l)l.val=Z,N=zj(Z,l.cell.ixfe,"s"),N.XF=S[N.ixfe],t.cellFormula&&(N.f=""+mo(l.formula,o,l.cell,Y,O)),M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P(l.cell,N,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{C.push(Z);var xt=on(Z[0].s);if(p=t.dense?(s[Z[0].s.r]||[])[Z[0].s.c]:s[xt],t.cellFormula&&p){if(!l||!xt||!p)break;p.f=""+mo(Z[1],o,Z[0],Y,O),p.F=yn(Z[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;y[on(l.cell)]=Z[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[on(l.cell)],(p||{}).f=""+mo(Z[0],o,h,Y,O)}}break;case 253:N=zj(c[Z.isst].t,Z.ixfe,"s"),c[Z.isst].h&&(N.h=c[Z.isst].h),N.XF=S[N.ixfe],M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:Z.ixfe,XF:S[Z.ixfe],t:"z"},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t));break;case 190:if(t.sheetStubs)for(var Re=Z.c;Re<=Z.C;++Re){var ht=Z.ixfe[Re-Z.c];N={ixfe:ht,XF:S[ht],t:"z"},M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Re,r:Z.r},N,t)}break;case 214:case 516:case 4:N=zj(Z.val,Z.ixfe,"s"),N.XF=S[N.ixfe],M>0&&(N.z=V[N.ixfe>>8&63]),mu(N,t,r.opts.Date1904),P({c:Z.c,r:Z.r},N,t);break;case 0:case 512:ue===1&&(o=Z);break;case 252:c=Z;break;case 1054:if(O.biff==4){V[M++]=Z[1];for(var At=0;At<M+163&&nn[At]!=Z[1];++At);At>=163&&Hh(Z[1],M+163)}else Hh(Z[1],Z[0]);break;case 30:{V[M++]=Z;for(var _t=0;_t<M+163&&nn[_t]!=Z;++_t);_t>=163&&Hh(Z,M+163)}break;case 229:z=z.concat(Z);break;case 93:re[Z.cmo[0]]=O.lastobj=Z;break;case 438:O.lastobj.TxO=Z;break;case 127:O.lastobj.ImData=Z;break;case 440:for(b=Z[0].s.r;b<=Z[0].e.r;++b)for(g=Z[0].s.c;g<=Z[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[on({c:g,r:b})],p&&(p.l=Z[1]);break;case 2048:for(b=Z[0].s.r;b<=Z[0].e.r;++b)for(g=Z[0].s.c;g<=Z[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[on({c:g,r:b})],p&&p.l&&(p.l.Tooltip=Z[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(s[Z[0].r]||[])[Z[0].c]:s[on(Z[0])];var Wt=re[Z[2]];p||(t.dense?(s[Z[0].r]||(s[Z[0].r]=[]),p=s[Z[0].r][Z[0].c]={t:"z"}):p=s[on(Z[0])]={t:"z"},o.e.r=Math.max(o.e.r,Z[0].r),o.s.r=Math.min(o.s.r,Z[0].r),o.e.c=Math.max(o.e.c,Z[0].c),o.s.c=Math.min(o.s.c,Z[0].c)),p.c||(p.c=[]),v={a:Z[1],t:Wt.TxO.t},p.c.push(v)}break;case 2173:nye(S[Z.ixfe],Z.ext);break;case 125:{if(!O.cellStyles)break;for(;Z.e>=Z.s;)U[Z.e--]={width:Z.w/256,level:Z.level||0,hidden:!!(Z.flags&1)},B||(B=!0,B4(Z.w/256)),Bm(U[Z.e+1])}break;case 520:{var Ke={};Z.level!=null&&(X[Z.r]=Ke,Ke.level=Z.level),Z.hidden&&(X[Z.r]=Ke,Ke.hidden=!0),Z.hpt&&(X[Z.r]=Ke,Ke.hpt=Z.hpt,Ke.hpx=Iv(Z.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||ux(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=Z;break;case 161:s["!margins"]||ux(s["!margins"]={}),s["!margins"].header=Z.header,s["!margins"].footer=Z.footer;break;case 574:Z.RTL&&(E.Views[0].RTL=!0);break;case 146:D=Z;break;case 2198:Q=Z;break;case 140:k=Z;break;case 442:d?T.CodeName=Z||T.name:E.WBProps.CodeName=Z||"ThisWorkbook";break}}else G||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=oe}return r.SheetNames=ws(i).sort(function(ge,ve){return Number(ge)-Number(ve)}).map(function(ge){return i[ge].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&W.forEach(function(ge,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=ge}),r.Strings=c,r.SSF=Ha(nn),O.enc&&(r.Encryption=O.enc),Q&&(r.Themes=Q),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),Y.names.length>0&&(E.Names=Y.names),r.Workbook=E,r}var Hb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function vwe(e,t,r){var n=Hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=N6(n,gD,Hb.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Hr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=N6(o,bD,Hb.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(Mz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function gwe(e,t){var r=[],n=[],s=[],i=0,o,l=JL(gD,"n"),c=JL(bD,"n");if(e.Props)for(o=ws(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=ws(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)Vz.indexOf(s[i][0])>-1||Oz.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);n.length&&Hr.utils.cfb_add(t,"/SummaryInformation",w6(n,Hb.SI,c,bD)),(r.length||d.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",w6(r,Hb.DSI,l,gD,d.length?d:null,Hb.UDI))}function FH(e,t){t||(t={}),Y4(t),p4(),t.codepage&&m4(t.codepage);var r,n;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),n=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=ql(nc(e));break;case"binary":e=ql(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}qi(e,0),n={content:e}}var s,i;if(r&&fwe(r),t.bookProps&&!t.bookSheets)s={};else{var o=En?"buffer":"array";if(n&&n.content)s=xwe(n.content,t);else if((i=Hr.find(e,"PerfectOffice_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else if((i=Hr.find(e,"NativeContent_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else throw(i=Hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Tye(e))}var l={};return e.FullPaths&&vwe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function bwe(e,t){var r=t||{},n=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(n,s,LH(e,r)),r.biff==8&&(e.Props||e.Custprops)&&gwe(e,n),r.biff==8&&e.vbaraw&&Iye(n,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var yy={0:{f:qje},1:{f:Qje},2:{f:xNe},3:{f:sNe},4:{f:tNe},5:{f:fNe},6:{f:jNe},7:{f:cNe},8:{f:ENe},9:{f:_Ne},10:{f:CNe},11:{f:kNe},12:{f:Zje},13:{f:gNe},14:{f:oNe},15:{f:nNe},16:{f:DH},17:{f:wNe},18:{f:uNe},19:{f:D4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:w2e},40:{},42:{},43:{f:jbe},44:{f:bbe},45:{f:Sbe},46:{f:kbe},47:{f:Cbe},48:{},49:{f:Wxe},50:{},51:{f:iye},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zz},62:{f:yNe},63:{f:pye},64:{f:zNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ko,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:UNe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Kje},148:{f:Wje,p:16},151:{f:ONe},152:{},153:{f:y2e},154:{},155:{},156:{f:g2e},157:{},158:{},159:{T:1,f:Rge},160:{T:-1},161:{T:1,f:Vx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:DNe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:aye},336:{T:-1},337:{f:cye,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vD},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Jz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:MNe},427:{f:RNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:LNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Yje},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:INe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vD},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kye},633:{T:1},634:{T:-1},635:{T:1,f:Sye},636:{T:-1},637:{f:Xxe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:o2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:HNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},CD={6:{f:rE},10:{f:pm},12:{f:Xs},13:{f:Xs},14:{f:Is},15:{f:Is},16:{f:bo},17:{f:Is},18:{f:Is},19:{f:Xs},20:{f:D6},21:{f:D6},23:{f:Jz},24:{f:T6},25:{f:Is},26:{},27:{},28:{f:Hve},29:{},34:{f:Is},35:{f:A6},38:{f:bo},39:{f:bo},40:{f:bo},41:{f:bo},42:{f:Is},43:{f:Is},47:{f:nbe},49:{f:gve},51:{f:Xs},60:{},61:{f:fve},64:{f:Is},65:{f:vve},66:{f:Xs},77:{},80:{},81:{},82:{},85:{f:Xs},89:{},90:{},91:{},92:{f:rve},93:{f:Yve},94:{},95:{f:Is},96:{},97:{},99:{f:Is},125:{f:Zz},128:{f:Pve},129:{f:ave},130:{f:Xs},131:{f:Is},132:{f:Is},133:{f:sve},134:{},140:{f:rge},141:{f:Xs},144:{},146:{f:sge},151:{},152:{},153:{},154:{},155:{},156:{f:Xs},157:{},158:{},160:{f:hge},161:{f:lge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Dve},190:{f:Ave},193:{f:pm},197:{},198:{},199:{},200:{},201:{},202:{f:Is},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xs},220:{},221:{f:Is},222:{},224:{f:Ive},225:{f:tve},226:{f:pm},227:{},229:{f:Wve},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ove},253:{f:yve},255:{f:cve},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:qz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Is},353:{f:pm},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Lve},431:{f:Is},432:{},433:{},434:{},437:{},438:{f:Qve},439:{f:Is},440:{f:Jve},441:{},442:{f:n1},443:{},444:{f:Xs},445:{},446:{},448:{f:pm},449:{f:hve,r:2},450:{f:pm},512:{f:k6},513:{f:uge},515:{f:Rve},516:{f:Nve},517:{f:E6},519:{f:fge},520:{f:dve},523:{},545:{f:I6},549:{f:C6},566:{},574:{f:pve},638:{f:Eve},659:{},1048:{},1054:{f:Sve},1084:{},1212:{f:Vve},2048:{f:ege},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$j},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:pm},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ige,r:12},2173:{f:rye,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Is,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:$ve,r:12},2197:{},2198:{f:Xbe,r:12},2199:{},2200:{},2201:{},2202:{f:qve,r:12},2203:{f:pm},2204:{},2205:{},2206:{},2207:{},2211:{f:uve},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:cge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:age},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:k6},1:{},2:{f:gge},3:{f:xge},4:{f:pge},5:{f:E6},7:{f:yge},8:{},9:{f:$j},11:{},22:{f:Xs},30:{f:kve},31:{},32:{},33:{f:I6},36:{},37:{f:C6},50:{f:jge},62:{},52:{},67:{},68:{f:Xs},69:{},86:{},126:{},127:{f:mge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Nge},223:{},234:{},354:{},421:{},518:{f:rE},521:{f:$j},536:{f:T6},547:{f:A6},561:{},579:{},1030:{f:rE},1033:{f:$j},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function xr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&k4(r)&&e.push(r)}}function ywe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return xr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function o1(e,t,r){return e||(e=Ut(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function jwe(e,t,r,n){var s=Ut(9);return o1(s,e,t),zz(r,n||"b",s),s}function Nwe(e,t,r){var n=Ut(8+2*r.length);return o1(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function wwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?li(za(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?xr(e,2,bge(r,n,s)):xr(e,3,vge(r,n,s));return;case"b":case"e":xr(e,5,jwe(r,n,t.v,t.t));return;case"s":case"str":xr(e,4,Nwe(r,n,(t.v||"").slice(0,255)));return}xr(e,1,o1(null,r,n))}function Swe(e,t,r,n){var s=Array.isArray(t),i=Yn(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=yn(i)}for(var d=i.s.r;d<=i.e.r;++d){l=Ls(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=cs(u)),o=c[u]+l;var h=s?(t[d]||[])[u]:t[o];h&&wwe(e,h,d,u)}}}function Cwe(e,t){for(var r=t||{},n=ol(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return xr(n,r.biff==4?1033:r.biff==3?521:9,R4(e,16,r)),Swe(n,e.Sheets[e.SheetNames[s]],s,r),xr(n,10),n.end()}function kwe(e,t,r){xr(e,49,bve({sz:12,name:"Arial"},r))}function _we(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&xr(e,1054,Cve(s,t[s],r))})}function Ewe(e,t){var r=Ut(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),xr(e,2151,r),r=Ut(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Kz(Yn(t["!ref"]||"A1"),r),r.write_shift(4,4),xr(e,2152,r)}function Dwe(e,t){for(var r=0;r<16;++r)xr(e,224,_6({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){xr(e,224,_6(n,0,t))})}function Awe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];xr(e,440,Zve(n)),n[1].Tooltip&&xr(e,2048,tge(n))}delete t["!links"]}function Twe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&xr(e,125,oge(SS(s,n),s))})}}function Iwe(e,t,r,n,s){var i=16+tp(s.cellXfs,t,s);if(t.v==null&&!t.bf){xr(e,513,kx(r,n,i));return}if(t.bf)xr(e,6,aje(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?li(za(t.v)):t.v;xr(e,515,Fve(r,n,o,i));break;case"b":case"e":xr(e,517,Mve(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=z4(s.Strings,t.v,s.revStrings);xr(e,253,jve(r,n,l,i))}else xr(e,516,wve(r,n,(t.v||"").slice(0,255),i,s));break;default:xr(e,513,kx(r,n,i))}}function Pwe(e,t,r){var n=ol(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,h="",m=[],p=Yn(i["!ref"]||"A1"),v=d?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}xr(n,2057,R4(r,16,t)),xr(n,13,Tc(1)),xr(n,12,Tc(100)),xr(n,15,Mo(!0)),xr(n,17,Mo(!1)),xr(n,16,Sx(.001)),xr(n,95,Mo(!0)),xr(n,42,Mo(!1)),xr(n,43,Mo(!1)),xr(n,130,Tc(1)),xr(n,128,Ove()),xr(n,131,Mo(!1)),xr(n,132,Mo(!1)),d&&Twe(n,i["!cols"]),xr(n,512,_ve(p,t)),d&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){h=Ls(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(m[b]=cs(b)),u=m[b]+h;var y=c?(i[g]||[])[b]:i[u];y&&(Iwe(n,y,g,b,t),d&&y.l&&i["!links"].push([u,y.l]))}}var C=l.CodeName||l.name||s;return d&&xr(n,574,xve((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&xr(n,229,Gve(i["!merges"])),d&&Awe(n,i),xr(n,442,Hz(C)),d&&Ewe(n,i),xr(n,10),n.end()}function Owe(e,t,r){var n=ol(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(xr(n,2057,R4(e,5,r)),r.bookType=="xla"&&xr(n,135),xr(n,225,l?Tc(1200):null),xr(n,193,M0e(2)),c&&xr(n,191),c&&xr(n,192),xr(n,226),xr(n,92,nve("SheetJS",r)),xr(n,66,Tc(l?1200:1252)),l&&xr(n,353,Tc(0)),l&&xr(n,448),xr(n,317,dge(e.SheetNames.length)),l&&e.vbaraw&&xr(n,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";xr(n,442,Hz(d))}xr(n,156,Tc(17)),xr(n,25,Mo(!1)),xr(n,18,Mo(!1)),xr(n,19,Tc(0)),l&&xr(n,431,Mo(!1)),l&&xr(n,444,Tc(0)),xr(n,61,mve()),xr(n,64,Mo(!1)),xr(n,141,Tc(0)),xr(n,34,Mo(h2e(e)=="true")),xr(n,14,Mo(!0)),l&&xr(n,439,Mo(!1)),xr(n,218,Tc(0)),kwe(n,e,r),_we(n,e.SSF,r),Dwe(n,r),l&&xr(n,352,Mo(!1));var u=n.end(),h=ol();l&&xr(h,140,nge()),l&&r.Strings&&ywe(h,252,lve(r.Strings)),xr(h,10);var m=h.end(),p=ol(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var b=u.length+v+m.length;for(g=0;g<e.SheetNames.length;++g){var y=i[g]||{};xr(p,133,ive({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var C=p.end();if(v!=C.length)throw new Error("BS8 "+v+" != "+C.length);var N=[];return u.length&&N.push(u),C.length&&N.push(C),m.length&&N.push(m),Ni(N)}function Mwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(nn)),e&&e.SSF&&(ig(),vS(e.SSF),r.revssf=bS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,K4(r),r.cellXfs=[],tp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Pwe(s,r,e);return n.unshift(Owe(e,n,r)),Ni(n)}function LH(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=cl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Mwe(e,t);case 4:case 3:case 2:return Cwe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function V6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=bxe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var g=c[o].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var C=y[l].trim();if(C.match(/<t[dh]/i)){for(var N=C,k=0;N.charAt(0)=="<"&&(k=N.indexOf(">"))>-1;)N=N.slice(k+1);for(var S=0;S<v.length;++S){var D=v[S];D.s.c==u&&D.s.r<d&&d<=D.e.r&&(u=D.e.c+1,S=-1)}var E=cn(C.slice(0,C.indexOf(">")));m=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||m>1)&&v.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+m-1}});var T=E.t||E["data-t"]||"";if(!N.length){u+=m;continue}if(N=lz(N),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!N.length){u+=m;continue}var A={t:"s",v:N};r.raw||!N.trim().length||T=="s"||(N==="TRUE"?A={t:"b",v:!0}:N==="FALSE"?A={t:"b",v:!1}:isNaN(Ed(N))?isNaN(Av(N).getDate())||(A={t:"d",v:za(N)},r.cellDates||(A={t:"n",v:li(A.v)}),A.z=r.dateNF||nn[14]):A={t:"n",v:Ed(N)}),r.dense?(n[d]||(n[d]=[]),n[d][u]=A):n[on({r:d,c:u})]=A,u+=m}}}}return n["!ref"]=yn(p),v.length&&(n["!merges"]=v),n}function Rwe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=on({r,c:o}),h=n.dense?(e[r]||[])[o]:e[u],m=h&&h.v!=null&&(h.h||w4(h.w||(sf(h),h.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(pr("td",m,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var Fwe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Lwe="</body></html>";function Bwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ep(V6(r[0],t),t);var n=J4();return r.forEach(function(s,i){Z4(n,V6(s,t),"Sheet"+(i+1))}),n}function Uwe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function BH(e,t){var r=t||{},n=r.header!=null?r.header:Fwe,s=r.footer!=null?r.footer:Lwe,i=[n],o=cl(e["!ref"]);r.dense=Array.isArray(e),i.push(Uwe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Rwe(e,o,l,r));return i.push("</table>"+s),i.join("")}function UH(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?ds(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=cl(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],m=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,b=0,y=0,C=0,N=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var k=l[v];if(q6(k)){if(n.display)continue;p[g]={hidden:!0}}var S=k.children;for(b=y=0;b<S.length;++b){var D=S[b];if(!(n.display&&q6(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):lz(D.innerHTML),T=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var A=h[m];A.s.c==y+i&&A.s.r<g+s&&g+s<=A.e.r&&(y=A.e.c+1-i,m=-1)}N=+D.getAttribute("colspan")||1,((C=+D.getAttribute("rowspan")||1)>1||N>1)&&h.push({s:{r:g+s,c:y+i},e:{r:g+s+(C||1)-1,c:y+i+(N||1)-1}});var L={t:"s",v:E},P=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?L.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(Ed(E))?isNaN(Av(E).getDate())||(L={t:"d",v:za(E)},n.cellDates||(L={t:"n",v:li(L.v)}),L.z=n.dateNF||nn[14]):L={t:"n",v:Ed(E)})),L.z===void 0&&T!=null&&(L.z=T);var O="",Q=D.getElementsByTagName("A");if(Q&&Q.length)for(var z=0;z<Q.length&&!(Q[z].hasAttribute("href")&&(O=Q[z].getAttribute("href"),O.charAt(0)!="#"));++z);O&&O.charAt(0)!="#"&&(L.l={Target:O}),n.dense?(e[g+s]||(e[g+s]=[]),e[g+s][y+i]=L):e[on({c:y+i,r:g+s})]=L,d.e.c<y+i&&(d.e.c=y+i),y+=N}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=yn(d),g>=c&&(e["!fullref"]=yn((d.e.r=l.length-v+g-1+s,d))),e}function $H(e,t){var r=t||{},n=r.dense?[]:{};return UH(n,e,t)}function $we(e,t){return ep($H(e,t),t)}function q6(e){var t="",r=Vwe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Vwe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function qwe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Gn(t.replace(/<[^>]*>/g,""));return[r]}var z6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VH(e,t){var r=t||{},n=S4(e),s=[],i,o,l={name:""},c="",d=0,u,h,m={},p=[],v=r.dense?[]:{},g,b,y={value:""},C="",N=0,k=[],S=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,A={},L=[],P={},O=0,Q=0,z=[],re=1,U=1,X=[],B={Names:[]},Y={},K=["",""],ue=[],M={},V="",W=0,ee=!1,te=!1,ne=0;for(my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=my.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=yn(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=yn(E)),L.length&&(v["!merges"]=L),z.length&&(v["!rows"]=z),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),m[u.name]=v,te=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=cn(g[0],!1),S=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},L=[],z=[],te=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"":if(g[1]==="/"){S+=re,re=1;break}if(h=cn(g[0],!1),h.?S=h.-1:S==-1&&(S=0),re=+h["number-rows-repeated"]||1,re<10)for(ne=0;ne<re;++ne)T>0&&(z[S+ne]={level:T});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[S]||(v[S]=[]),v[S][D]={t:"z"}):v[on({r:S,c:D})]={t:"z"}),C="",k=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++D,y=cn(g[0],!1),U=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=B6(Gn(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Gn(y["string-value"]||""),r.dense?(v[S]||(v[S]=[]),v[S][D]=b):v[on({r:S,c:D})]=b),D+=U-1;else if(g[1]!=="/"){++D,C="",N=0,k=[],U=1;var se=re?S+re-1:S;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),S<E.s.r&&(E.s.r=S),se>E.e.r&&(E.e.r=se),y=cn(g[0],!1),ue=[],M={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Gn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,Q=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+Q-1}},b.F=yn(P),X.push([P,b.F])),y.formula)b.f=B6(y.formula);else for(ne=0;ne<X.length;++ne)S>=X[ne][0].s.r&&S<=X[ne][0].e.r&&D>=X[ne][0].s.c&&D<=X[ne][0].e.c&&(b.F=X[ne][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,Q=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+Q-1}},L.push(P)),y["number-columns-repeated"]&&(U=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Va(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=za(y["date-value"]),r.cellDates||(b.t="n",b.v=li(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=xxe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=yS(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(C=Gn(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(ee=!1,b.t==="s"&&(b.v=C||"",k.length&&(b.R=k),ee=N==0),Y.Target&&(b.l=Y),ue.length>0&&(b.c=ue,ue=[]),C&&r.cellText!==!1&&(b.w=C),ee&&(b.t="z",delete b.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var oe=0;oe<re;++oe){if(U=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(v[S+oe]||(v[S+oe]=[]),v[S+oe][D]=oe==0?b:Ha(b);--U>0;)v[S+oe][D+U]=Ha(b);else for(v[on({r:S+oe,c:D})]=b;--U>0;)v[on({r:S+oe,c:D+U})]=Ha(b);E.e.c<=D&&(E.e.c=D)}U=parseInt(y["number-columns-repeated"]||"1",10),D+=U-1,U=0,b={},C="",k=[]}Y={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;M.t=C,k.length&&(M.R=k),M.a=V,ue.push(M)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);V="",W=0,C="",N=0,k=[];break;case"creator":g[1]==="/"?V=n.slice(W,g.index):W=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);C="",N=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(A[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=cn(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=cn(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=cn(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=cn(g[0],!1),K=nE(o["cell-range-address"]);var G={Name:o.name,Ref:K[0]+"!"+K[1]};te&&(G.Sheet=p.length),B.Names.push(G);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var ce=qwe(n.slice(N,g.index));C=(C.length>0?C+`
`:"")+ce[0]}else cn(g[0],!1),N=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{K=nE(cn(g[0])["target-range-address"]),m[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(Y=cn(g[0],!1),!Y.href)break;Y.Target=Gn(Y.href),delete Y.href,Y.Target.charAt(0)=="#"&&Y.Target.indexOf(".")>-1?(K=nE(Y.Target.slice(1)),Y.Target="#"+K[0]+"!"+K[1]):Y.Target.match(/^\.\.[\\\/]/)&&(Y.Target=Y.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var Z={Sheets:m,SheetNames:p,Workbook:B};return r.bookSheets&&delete Z.Sheets,Z}function H6(e,t){t=t||{},Ac(e,"META-INF/manifest.xml")&&x0e(Ks(e,"META-INF/manifest.xml"),t);var r=zl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=VH(Ca(r),t);return Ac(e,"meta.xml")&&(n.Props=Iz(Ks(e,"meta.xml"))),n}function W6(e,t){return VH(e,t)}var zwe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Us+t}}(),G6=function(){var e=function(i){return ga(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+ga(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=cl(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",b=i["!rows"]||[];for(d=0;d<h.s.r;++d)g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(t);for(;u<=h.e.c;++u){var y=!1,C={},N="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>u)&&!(m[p].s.r>d)&&!(m[p].e.c<u)&&!(m[p].e.r<d)){(m[p].s.c!=u||m[p].s.r!=d)&&(y=!0),C["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,C["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(y){c.push(r);continue}var k=on({r:d,c:u}),S=v?(i[d]||[])[u]:i[k];if(S&&S.f&&(C["table:formula"]=ga(dje(S.f)),S.F&&S.F.slice(0,k.length)==k)){var D=cl(S.F);C["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,C["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":N=S.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=S.v?"true":"false";break;case"n":N=S.w||String(S.v||0),C["office:value-type"]="float",C["office:value"]=S.v||0;break;case"s":case"str":N=S.v==null?"":S.v,C["office:value-type"]="string";break;case"d":N=S.w||za(S.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=za(S.v).toISOString(),C["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(N);if(S.l&&S.l.Target){var T=S.l.Target;T=T.charAt(0)=="#"?"#"+uje(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),E=pr("text:a",E,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+pr("table:table-cell",pr("text:p",E,{}),C)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Bm(h),h.ods=l;var m=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Us],d=fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=fy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(Tz().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function qH(e,t){if(t.bookType=="fods")return G6(e,t);var r=y4(),n="",s=[],i=[];return n="mimetype",Sn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Sn(r,n,G6(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Sn(r,n,zwe(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Sn(r,n,Us+Tz()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Sn(r,n,b0e(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Sn(r,n,v0e(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _x(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function kD(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ca(Zm(e))}function Hwe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):ql(Au(e))}function Wwe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function $m(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function Y6(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Gwe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Ywe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function jy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ma(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function js(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Zn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=jy(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=jy(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Li(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(ma(n*8+s.type)),s.type==2&&t.push(ma(s.data.length)),t.push(s.data))})}),$m(t)}function G4(e,t){return e?.map(function(r){return t(r.data)})||[]}function Ec(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=jy(e,n),i=Zn(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:js(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Zn(l.data),d=js(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=js(i[3][0].data)>>>0>0),r.push(o)}return r}function T0(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ma(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ma(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:ma(o.data.length)}],n[2].push({data:Li(o.meta),type:2})});var i=Li(n);t.push(ma(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),$m(t)}function Kwe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=jy(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[$m(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=$m(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Dc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Kwe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return $m(t)}function I0(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=ma(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return $m(t)}function Xwe(e,t,r,n){var s=_x(e),i=s.getUint32(4,!0),o=(n>1?12:8)+Y6(i&(n>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=Y6(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function Qwe(e,t,r){var n=_x(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=Gwe(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return h}function sE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Ywe(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function iE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function Jwe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Xwe(e,t,r,e[0]);case 5:return Qwe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ho(e){var t=Zn(e);return jy(t[1][0].data)}function K6(e,t){var r=Zn(t.data),n=js(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Zn(o.data),c=js(l[1][0].data)>>>0;switch(n){case 1:i[c]=kD(l[3][0].data);break;case 8:{var d=e[ho(l[9][0].data)][0],u=Zn(d.data),h=e[ho(u[1][0].data)][0],m=js(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Zn(h.data);i[c]=p[3].map(function(v){return kD(v.data)}).join("")}break}}),i}function Zwe(e,t){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b=Zn(e),y=js(b[1][0].data)>>>0,C=js(b[2][0].data)>>>0,N=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&js(b[8][0].data)>0||!1,k,S;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)k=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=b[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=b[4])==null?void 0:u[0])!=null&&h.data&&t!=1)k=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,S=(g=(v=b[3])==null?void 0:v[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=N?4:1,E=_x(k),T=[],A=0;A<k.length/2;++A){var L=E.getUint16(A*2,!0);L<65535&&T.push([A,L])}if(T.length!=C)throw"Expected ".concat(C," cells, found ").concat(T.length);var P=[];for(A=0;A<T.length-1;++A)P[T[A][0]]=S.subarray(T[A][1]*D,T[A+1][1]*D);return T.length>=1&&(P[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*D)),{R:y,cells:P}}function eSe(e,t){var r,n=Zn(t.data),s=(r=n?.[7])!=null&&r[0]?js(n[7][0].data)>>>0>0?1:0:-1,i=G4(n[5],function(o){return Zwe(o,s)});return{nrows:js(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function tSe(e,t,r){var n,s=Zn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(js(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(js(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=yn(i);var o=Zn(s[4][0].data),l=K6(e,e[ho(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?K6(e,e[ho(o[17][0].data)][0]):[],d=Zn(o[3][0].data),u=0;d[1].forEach(function(h){var m=Zn(h.data),p=e[ho(m[2][0].data)][0],v=js(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var g=eSe(e,p);g.data.forEach(function(b,y){b.forEach(function(C,N){var k=on({r:u+y,c:N}),S=Jwe(C,l,c);S&&(r[k]=S)})}),u+=g.nrows})}function rSe(e,t){var r=Zn(t.data),n={"!ref":"A1"},s=e[ho(r[2][0].data)],i=js(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return tSe(e,s[0],n),n}function nSe(e,t){var r,n=Zn(t.data),s={name:(r=n[1])!=null&&r[0]?kD(n[1][0].data):"",sheets:[]},i=G4(n[2],ho);return i.forEach(function(o){e[o].forEach(function(l){var c=js(l.meta[1][0].data);c==6e3&&s.sheets.push(rSe(e,l))})}),s}function aSe(e,t){var r=J4(),n=Zn(t.data),s=G4(n[1],ho);if(s.forEach(function(i){e[i].forEach(function(o){var l=js(o.meta[1][0].data);if(l==2){var c=nSe(e,o);c.sheets.forEach(function(d,u){Z4(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function oE(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Dc(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Ec(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&js(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=js(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return aSe(i,l)}function sSe(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&js(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=_x(e[7][0].data),u=0,h=[],m=_x(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),m.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=sE({t:"s",v:t[g]},r),y=iE({t:"s",v:t[g]},r);break;case"number":b=sE({t:"n",v:t[g]},r),y=iE({t:"n",v:t[g]},r);break;case"boolean":b=sE({t:"b",v:t[g]},r),y=iE({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}h.push(b),u+=b.length,v.push(y),p+=y.length,++c}for(e[2][0].data=ma(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535,!0);return e[6][0].data=$m(h),e[3][0].data=$m(v),c}function iSe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=cl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(yn(n)));var i=L2(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(V){return V.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],d=Hr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(V,W){return[V,d.FullPaths[W]]}).forEach(function(V){var W=V[0],ee=V[1];if(W.type==2&&W.name.match(/\.iwa/)){var te=W.content,ne=Dc(te),se=Ec(ne);se.forEach(function(oe){c.push(oe.id),l[oe.id]={deps:[],location:ee,type:js(oe.messages[0].meta[1][0].data)}})}}),c.sort(function(V,W){return V-W});var u=c.filter(function(V){return V>1}).map(function(V){return[V,ma(V)]});d.FileIndex.map(function(V,W){return[V,d.FullPaths[W]]}).forEach(function(V){var W=V[0];if(V[1],!!W.name.match(/\.iwa/)){var ee=Ec(Dc(W.content));ee.forEach(function(te){te.messages.forEach(function(ne){u.forEach(function(se){te.messages.some(function(oe){return js(oe.meta[1][0].data)!=11006&&Wwe(oe.data,se[1])})&&l[se[0]].deps.push(te.id)})})})}});for(var h=Hr.find(d,l[1].location),m=Ec(Dc(h.content)),p,v=0;v<m.length;++v){var g=m[v];g.id==1&&(p=g)}var b=ho(Zn(p.messages[0].data)[1][0].data);for(h=Hr.find(d,l[b].location),m=Ec(Dc(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=ho(Zn(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),m=Ec(Dc(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=ho(Zn(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),m=Ec(Dc(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);var y=Zn(p.messages[0].data);{y[6][0].data=ma(n.e.r+1),y[7][0].data=ma(n.e.c+1);var C=ho(y[46][0].data),N=Hr.find(d,l[C].location),k=Ec(Dc(N.content));{for(var S=0;S<k.length&&k[S].id!=C;++S);if(k[S].id!=C)throw"Bad ColumnRowUIDMapArchive";var D=Zn(k[S].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=n.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:ma(E+420690)}],D[1].push({type:2,data:Li(T)}),D[2].push({type:0,data:ma(E)}),D[3].push({type:0,data:ma(E)})}D[4]=[],D[5]=[],D[6]=[];for(var A=0;A<=n.e.r;++A)T=[],T[1]=T[2]=[{type:0,data:ma(A+726270)}],D[4].push({type:2,data:Li(T)}),D[5].push({type:0,data:ma(A)}),D[6].push({type:0,data:ma(A)});k[S].messages[0].data=Li(D)}N.content=I0(T0(k)),N.size=N.content.length,delete y[46];var L=Zn(y[4][0].data);{L[7][0].data=ma(n.e.r+1);var P=Zn(L[1][0].data),O=ho(P[2][0].data);N=Hr.find(d,l[O].location),k=Ec(Dc(N.content));{if(k[0].id!=O)throw"Bad HeaderStorageBucket";var Q=Zn(k[0].messages[0].data);for(A=0;A<i.length;++A){var z=Zn(Q[2][0].data);z[1][0].data=ma(A),z[4][0].data=ma(i[A].length),Q[2][A]={type:Q[2][0].type,data:Li(z)}}k[0].messages[0].data=Li(Q)}N.content=I0(T0(k)),N.size=N.content.length;var re=ho(L[2][0].data);N=Hr.find(d,l[re].location),k=Ec(Dc(N.content));{if(k[0].id!=re)throw"Bad HeaderStorageBucket";for(Q=Zn(k[0].messages[0].data),E=0;E<=n.e.c;++E)z=Zn(Q[2][0].data),z[1][0].data=ma(E),z[4][0].data=ma(n.e.r+1),Q[2][E]={type:Q[2][0].type,data:Li(z)};k[0].messages[0].data=Li(Q)}N.content=I0(T0(k)),N.size=N.content.length;var U=ho(L[4][0].data);(function(){for(var V=Hr.find(d,l[U].location),W=Ec(Dc(V.content)),ee,te=0;te<W.length;++te){var ne=W[te];ne.id==U&&(ee=ne)}var se=Zn(ee.messages[0].data);{se[3]=[];var oe=[];o.forEach(function(Z,ae){oe[1]=[{type:0,data:ma(ae)}],oe[2]=[{type:0,data:ma(1)}],oe[3]=[{type:2,data:Hwe(Z)}],se[3].push({type:2,data:Li(oe)})})}ee.messages[0].data=Li(se);var G=T0(W),ce=I0(G);V.content=ce,V.size=V.content.length})();var X=Zn(L[3][0].data);{var B=X[1][0];delete X[2];var Y=Zn(B.data);{var K=ho(Y[2][0].data);(function(){for(var V=Hr.find(d,l[K].location),W=Ec(Dc(V.content)),ee,te=0;te<W.length;++te){var ne=W[te];ne.id==K&&(ee=ne)}var se=Zn(ee.messages[0].data);{delete se[6],delete X[7];var oe=new Uint8Array(se[5][0].data);se[5]=[];for(var G=0,ce=0;ce<=n.e.r;++ce){var Z=Zn(oe);G+=sSe(Z,i[ce],o),Z[1][0].data=ma(ce),se[5].push({data:Li(Z),type:2})}se[1]=[{type:0,data:ma(n.e.c+1)}],se[2]=[{type:0,data:ma(n.e.r+1)}],se[3]=[{type:0,data:ma(G)}],se[4]=[{type:0,data:ma(n.e.r+1)}]}ee.messages[0].data=Li(se);var ae=T0(W),je=I0(ae);V.content=je,V.size=V.content.length})()}B.data=Li(Y)}L[3][0].data=Li(X)}y[4][0].data=Li(L)}p.messages[0].data=Li(y);var ue=T0(m),M=I0(ue);return h.content=M,h.size=h.content.length,d}function zH(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Y4(e){zH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function K4(e){zH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function oSe(e){return Tn.WS.indexOf(e)>-1?"sheet":e==Tn.CS?"chart":e==Tn.DS?"dialog":e==Tn.MS?"macro":e&&e.length?e:"sheet"}function lSe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,oSe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function cSe(e,t,r,n,s,i,o,l,c,d,u,h){try{i[n]=$b(zl(e,r,!0),t);var m=Ks(e,t),p;switch(l){case"sheet":p=T2e(m,t,s,c,i[n],d,u,h);break;case"chart":if(p=I2e(m,t,s,c,i[n],d,u,h),!p||!p["!drawel"])break;var v=Ib(p["!drawel"].Target,t),g=py(v),b=gye(zl(e,v,!0),$b(zl(e,g,!0),v)),y=Ib(b,v),C=py(y);p=s2e(zl(e,y,!0),y,c,$b(zl(e,C,!0),y),d,p);break;case"macro":p=P2e(m,t,s,c,i[n],d,u,h);break;case"dialog":p=O2e(m,t,s,c,i[n],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var N=[];i&&i[n]&&ws(i[n]).forEach(function(k){var S="";if(i[n][k].Type==Tn.CMNT){S=Ib(i[n][k].Target,t);var D=L2e(Ks(e,S,!0),S,c);if(!D||!D.length)return;O6(p,D,!1)}i[n][k].Type==Tn.TCMNT&&(S=Ib(i[n][k].Target,t),N=N.concat(yye(Ks(e,S,!0),c)))}),N&&N.length&&O6(p,N,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Cc(e){return e.charAt(0)=="/"?e.slice(1):e}function dSe(e,t){if(ig(),t=t||{},Y4(t),Ac(e,"META-INF/manifest.xml")||Ac(e,"objectdata.xml"))return H6(e,t);if(Ac(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof oE<"u"){if(e.FileIndex)return oE(e);var r=Hr.utils.cfb_new();return t6(e).forEach(function(z){Sn(r,z,jxe(e,z))}),oE(r)}throw new Error("Unsupported NUMBERS file")}if(!Ac(e,"[Content_Types].xml"))throw Ac(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ac(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=t6(e),s=m0e(zl(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Ks(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Ks(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(Vb=[],s.sst)try{Vb=F2e(Ks(e,Cc(s.sst)),s.sst,t)}catch(z){if(t.WTF)throw z}t.cellStyles&&s.themes.length&&(c=R2e(zl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=M2e(Ks(e,Cc(s.style)),s.style,c,t))}s.links.map(function(z){try{var re=$b(zl(e,py(Cc(z))),z);return U2e(Ks(e,Cc(z)),re,z,t)}catch{}});var u=A2e(Ks(e,Cc(s.workbooks[0])),s.workbooks[0],t),h={},m="";s.coreprops.length&&(m=Ks(e,Cc(s.coreprops[0]),!0),m&&(h=Iz(m)),s.extprops.length!==0&&(m=Ks(e,Cc(s.extprops[0]),!0),m&&j0e(m,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=zl(e,Cc(s.custprops[0]),!0),m&&(p=w0e(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(re){return re.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(v.Props=h,v.Custprops=p),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var g={};t.bookDeps&&s.calcchain&&(g=B2e(Ks(e,Cc(s.calcchain)),s.calcchain));var b=0,y={},C,N;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var S=0;S!=k.length;++S)h.SheetNames[S]=k[S].name}var D=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Ac(e,T)||(T="xl/_rels/workbook."+D+".rels");var A=$b(zl(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=$2e(Ks(e,Cc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Nye(Ks(e,Cc(s.people[0])),t)),A&&(A=lSe(A,u.Sheets));var L=Ks(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var P="sheet";if(A&&A[b]?(C="xl/"+A[b][1].replace(/[\/]?xl\//,""),Ac(e,C)||(C=A[b][1]),Ac(e,C)||(C=T.replace(/_rels\/.*$/,"")+A[b][1]),P=A[b][2]):(C="xl/worksheets/sheet"+(b+1-L)+"."+D,C=C.replace(/sheet0\./,"sheet.")),N=C.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,Q=0;Q!=t.sheets.length;++Q)typeof t.sheets[Q]=="number"&&t.sheets[Q]==b&&(O=1),typeof t.sheets[Q]=="string"&&t.sheets[Q].toLowerCase()==h.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}cSe(e,C,N,h.SheetNames[b],b,y,o,P,t,u,c,d)}return v={Directory:s,Workbook:u,Props:h,Custprops:p,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:Vb,Styles:d,Themes:c,SSF:Ha(nn)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(z,re){z=z.replace(/^Root Entry[\/]/,""),v.keys.push(z),v.files[z]=e.FileIndex[re]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=Ks(e,Cc(s.vba[0]),!0):s.defaults&&s.defaults.bin===Aye&&(v.vbaraw=Ks(e,"xl/vbaProject.bin",!0))),v}function uSe(e,t){var r=t||{},n="Workbook",s=Hr.find(e,n);try{if(n="/!DataSpaces/Version",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if($ge(s.content),n="/!DataSpaces/DataSpaceMap",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=qge(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=zge(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Wge(s.content)}catch{}if(n="/EncryptionInfo",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Gge(s.content);if(n="/EncryptedPackage",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function hSe(e,t){return t.bookType=="ods"?qH(e,t):t.bookType=="numbers"?iSe(e,t):t.bookType=="xlsb"?fSe(e,t):mSe(e,t)}function fSe(e,t){Z0=1024,e&&!e.SSF&&(e.SSF=Ha(nn)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,qb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=vH.indexOf(t.bookType)>-1,s=O4();K4(t=t||{});var i=y4(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Sn(i,o,Pz(e.Props,t)),s.coreprops.push(o),xa(t.rels,2,o,Tn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Sn(i,o,Rz(e.Props)),s.extprops.push(o),xa(t.rels,3,o,Tn.EXT_PROPS),e.Custprops!==e.Props&&ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Sn(i,o,Fz(e.Custprops)),s.custprops.push(o),xa(t.rels,4,o,Tn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Sn(i,o,q2e(l-1,o,t,e,u)),s.sheets.push(o),xa(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(h){var p=h["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,Sn(i,g,W2e(p,g)),s.comments.push(g),xa(u,-1,"../comments"+l+"."+r,Tn.CMNT),v=!0),h["!legacy"]&&v&&Sn(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Sn(i,py(o),sv(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Sn(i,o,H2e(t.Strings,o,t)),s.strs.push(o),xa(t.wbrels,-1,"sharedStrings."+r,Tn.SST)),o="xl/workbook."+r,Sn(i,o,V2e(e,o)),s.workbooks.push(o),xa(t.rels,1,o,Tn.WB),o="xl/theme/theme1.xml",Sn(i,o,U4(e.Themes,t)),s.themes.push(o),xa(t.wbrels,-1,"theme/theme1.xml",Tn.THEME),o="xl/styles."+r,Sn(i,o,z2e(e,o,t)),s.styles.push(o),xa(t.wbrels,-1,"styles."+r,Tn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Sn(i,o,e.vbaraw),s.vba.push(o),xa(t.wbrels,-1,"vbaProject.bin",Tn.VBA)),o="xl/metadata."+r,Sn(i,o,G2e(o)),s.metadata.push(o),xa(t.wbrels,-1,"metadata."+r,Tn.XLMETA),Sn(i,"[Content_Types].xml",Az(s,t)),Sn(i,"_rels/.rels",sv(t.rels)),Sn(i,"xl/_rels/workbook."+r+".rels",sv(t.wbrels)),delete t.revssf,delete t.ssf,i}function mSe(e,t){Z0=1024,e&&!e.SSF&&(e.SSF=Ha(nn)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,qb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=vH.indexOf(t.bookType)>-1,s=O4();K4(t=t||{});var i=y4(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Sn(i,o,Pz(e.Props,t)),s.coreprops.push(o),xa(t.rels,2,o,Tn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Sn(i,o,Rz(e.Props)),s.extprops.push(o),xa(t.rels,3,o,Tn.EXT_PROPS),e.Custprops!==e.Props&&ws(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Sn(i,o,Fz(e.Custprops)),s.custprops.push(o),xa(t.rels,4,o,Tn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var h={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Sn(i,o,EH(l-1,t,e,h)),s.sheets.push(o),xa(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(m){var v=m["!comments"],g=!1,b="";if(v&&v.length>0){var y=!1;v.forEach(function(C){C[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+r,Sn(i,b,jye(v,u,t)),s.threadedcomments.push(b),xa(h,-1,"../threadedComments/threadedComment"+l+"."+r,Tn.TCMNT)),b="xl/comments"+l+"."+r,Sn(i,b,xH(v)),s.comments.push(b),xa(h,-1,"../comments"+l+"."+r,Tn.CMNT),g=!0}m["!legacy"]&&g&&Sn(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Sn(i,py(o),sv(h))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Sn(i,o,nH(t.Strings,t)),s.strs.push(o),xa(t.wbrels,-1,"sharedStrings."+r,Tn.SST)),o="xl/workbook."+r,Sn(i,o,PH(e)),s.workbooks.push(o),xa(t.rels,1,o,Tn.WB),o="xl/theme/theme1.xml",Sn(i,o,U4(e.Themes,t)),s.themes.push(o),xa(t.wbrels,-1,"theme/theme1.xml",Tn.THEME),o="xl/styles."+r,Sn(i,o,uH(e,t)),s.styles.push(o),xa(t.wbrels,-1,"styles."+r,Tn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Sn(i,o,e.vbaraw),s.vba.push(o),xa(t.wbrels,-1,"vbaProject.bin",Tn.VBA)),o="xl/metadata."+r,Sn(i,o,mH()),s.metadata.push(o),xa(t.wbrels,-1,"metadata."+r,Tn.XLMETA),u.length>1&&(o="xl/persons/person.xml",Sn(i,o,wye(u)),s.people.push(o),xa(t.wbrels,-1,"persons/person.xml",Tn.PEOPLE)),Sn(i,"[Content_Types].xml",Az(s,t)),Sn(i,"_rels/.rels",sv(t.rels)),Sn(i,"xl/_rels/workbook."+r+".rels",sv(t.wbrels)),delete t.revssf,delete t.ssf,i}function X4(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=nc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function pSe(e,t){return Hr.find(e,"EncryptedPackage")?uSe(e,t):FH(e,t)}function xSe(e,t){var r,n=e,s=t||{};return s.type||(s.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r=sz(n,s),dSe(r,s)}function HH(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return SD(e.slice(r),t);default:break e}return Tv.to_workbook(e,t)}function vSe(e,t){var r="",n=X4(e,t);switch(t.type){case"base64":r=nc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=wx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ca(r)),t.type="binary",HH(r,t)}function gSe(e,t){var r=e;return t.type=="base64"&&(r=nc(r)),r=cy.utils.decode(1200,r.slice(2),"str"),t.type="binary",HH(r,t)}function bSe(e){return e.match(/[^\x00-\x7F]/)?Au(e):e}function lE(e,t,r,n){return n?(r.type="string",Tv.to_workbook(e,r)):Tv.to_workbook(t,r)}function _D(e,t){p4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return _D(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),ov={},r.dateNF&&(ov.dateNF=r.dateNF),r.type||(r.type=En&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=En?"buffer":"binary",n=fxe(e),typeof Uint8Array<"u"&&!En&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=bSe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Ha(r),r.type="array",_D(x4(n),r)}switch((s=X4(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return pSe(Hr.read(n,r),r);break;case 9:if(s[1]<=8)return FH(n,r);break;case 60:return SD(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Sge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return tH.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?xSe(n,r):lE(e,n,r,i);case 239:return s[3]===60?SD(n,r):lE(e,n,r,i);case 255:if(s[1]===254)return gSe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return dx.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return dx.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return wD.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return lH.to_workbook(n,r);break;case 10:case 13:case 32:return vSe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return wge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?wD.to_workbook(n,r):lE(e,n,r,i)}function WH(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return e1(t.file,Hr.write(e,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function ySe(e,t){var r=Ha(t||{}),n=hSe(e,r);return jSe(n,r)}function jSe(e,t){var r={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(xS(s))}return t.password&&typeof encrypt_agile<"u"?WH(encrypt_agile(s,t.password),t):t.type==="file"?e1(t.file,s):t.type=="string"?Ca(s):s}function NSe(e,t){var r=t||{},n=bwe(e,r);return WH(n,r)}function vu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return dy(Au(n));case"binary":return Au(n);case"string":return e;case"file":return e1(t.file,n,"utf8");case"buffer":return En?mf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):vu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function wSe(e,t){switch(t.type){case"base64":return dy(e);case"binary":return e;case"string":return e;case"file":return e1(t.file,e,"binary");case"buffer":return En?mf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Hj(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?dy(r):t.type=="string"?Ca(r):r;case"file":return e1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function GH(e,t){p4(),p2e(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=GH(e,r);return r.type="array",xS(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return vu(hwe(e,r),r);case"slk":case"sylk":return vu(eH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return vu(BH(e.Sheets[e.SheetNames[s]],r),r);case"txt":return wSe(YH(e.Sheets[e.SheetNames[s]],r),r);case"csv":return vu(Q4(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return vu(tH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Hj(wD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return vu(Tv.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return vu(lH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return vu(rH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return vu(qH(e,r),r);case"wk1":return Hj(dx.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Hj(dx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Hj(LH(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),NSe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ySe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function SSe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Xu(e,t,r){var n={};return n.type="file",n.file=t,SSe(n),GH(e,n)}function CSe(e,t,r,n,s,i,o,l){var c=Ls(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=o?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[p]!=null&&(m[i[p]]=d);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)m[i[p]]=null;else if(d!==void 0)m[i[p]]=d;else if(u&&g===null)m[i[p]]=null;else continue;else m[i[p]]=u&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:sf(v,g,l);g!=null&&(h=!1)}}return{row:m,isempty:h}}function L2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof u){case"string":c=Yn(u);break;case"number":c=Yn(e["!ref"]),c.s.r=u;break;default:c=u}n>0&&(s=0);var h=Ls(c.s.r),m=[],p=[],v=0,g=0,b=Array.isArray(e),y=c.s.r,C=0,N={};b&&!e[y]&&(e[y]=[]);var k=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(C=c.s.c;C<=c.e.c;++C)if(!(k[C]||{}).hidden)switch(m[C]=cs(C),r=b?e[y][C]:e[m[C]+h],n){case 1:i[C]=C-c.s.c;break;case 2:i[C]=m[C];break;case 3:i[C]=d.header[C-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=sf(r,null,d),g=N[o]||0,!g)N[o]=1;else{do l=o+"_"+g++;while(N[l]);N[o]=g,N[l]=1}i[C]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(S[y]||{}).hidden){var D=CSe(e,c,y,m,n,i,b,d);(D.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(p[v++]=D.row)}return p.length=v,p}var X6=/"/g;function kSe(e,t,r,n,s,i,o,l){for(var c=!0,d=[],u="",h=Ls(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=l.dense?(e[r]||[])[m]:e[n[m]+h];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:sf(p,null,l));for(var v=0,g=0;v!==u.length;++v)if((g=u.charCodeAt(v))===s||g===i||g===34||l.forceQuotes){u='"'+u.replace(X6,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(X6,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function Q4(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Yn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(m[v]||{}).hidden||(h[v]=cs(v));for(var g=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(u=kSe(e,s,b,h,o,c,i,n),u!=null&&(n.strip&&(u=u.replace(d,"")),(u||n.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete n.dense,r.join("")}function YH(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Q4(e,t);return r}function _Se(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Yn(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=cs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=Ls(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function KH(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var h=Yn(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(g,b){ws(g).forEach(function(y){(p=m.indexOf(y))==-1&&(m[p=m.length]=y);var C=g[y],N="z",k="",S=on({c:l+p,r:o+b+s});d=Ny(i,S),C&&typeof C=="object"&&!(C instanceof Date)?i[S]=C:(typeof C=="number"?N="n":typeof C=="boolean"?N="b":typeof C=="string"?N="s":C instanceof Date?(N="d",n.cellDates||(N="n",C=li(C)),k=n.dateNF||nn[14]):C===null&&n.nullError&&(N="e",C=0),d?(d.t=N,d.v=C,delete d.w,delete d.R,k&&(d.z=k)):i[S]=d={t:N,v:C},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+m.length-1);var v=Ls(o);if(s)for(p=0;p<m.length;++p)i[cs(p+l)+v]={t:"s",v:m[p]};return i["!ref"]=yn(u),i}function ESe(e,t){return KH(null,e,t)}function Ny(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ny(e,on(t)):Ny(e,on({r:t,c:r||0}))}function DSe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function J4(){return{SheetNames:[],Sheets:{}}}function Z4(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(IH(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ASe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=DSe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function TSe(e,t){return e.z=t,e}function XH(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function ISe(e,t,r){return XH(e,"#"+t,r)}function PSe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function OSe(e,t,r,n){for(var s=typeof t!="string"?t:Yn(t),i=typeof t=="string"?t:yn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Ny(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var aa={encode_col:cs,encode_row:Ls,encode_cell:on,encode_range:yn,decode_col:E4,decode_row:_4,split_cell:Hxe,decode_cell:ds,decode_range:cl,format_cell:sf,sheet_add_aoa:wz,sheet_add_json:KH,sheet_add_dom:UH,aoa_to_sheet:og,json_to_sheet:ESe,table_to_sheet:$H,table_to_book:$we,sheet_to_csv:Q4,sheet_to_txt:YH,sheet_to_json:L2,sheet_to_html:BH,sheet_to_formulae:_Se,sheet_to_row_object_array:L2,sheet_get_cell:Ny,book_new:J4,book_append_sheet:Z4,book_set_sheet_visibility:ASe,cell_set_number_format:TSe,cell_set_hyperlink:XH,cell_set_internal_link:ISe,cell_add_comment:PSe,sheet_set_array_formula:OSe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const vf=({show:e,onClose:t,onImport:r,masterDataType:n,templateFields:s=[],apiEndpoint:i})=>{const[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState(!1),[m,p]=w.useState(0),[v,g]=w.useState([]),[b,y]=w.useState([]),[C,N]=w.useState(!1),[k,S]=w.useState(null),D=w.useRef(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("selectedFinancialYear");const E={material:{name:"Material Master",fields:["materialId","categoryName","description","baseUnit","orderUnit","conversionValue","dimension","hsn","mpn","minstock","safetyStock","maxstock","pdt","materialgroup","location"],sampleData:{materialId:"MAT001",categoryName:"Raw Materials",description:"Sample Raw Material Description",baseUnit:"KG",orderUnit:"KG",conversionValue:1,dimension:"10x10x10",hsn:"1234567890",mpn:"MPN001",minstock:10,safetyStock:5,maxstock:100,pdt:7,materialgroup:"RAW_MATERIAL",location:"WH01"}},customer:{name:"Customer Master",fields:["cnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","name","email","isDeleted","isBlocked"],sampleData:{cnNo:"CUST000001",categoryName:"Retail Customers",name1:"Sample Customer Pvt Ltd",name2:"Sample Customer",search:"SAMPLE_CUSTOMER",address1:"123, Business Street",address2:"Near Business Park",extraAddresses:"Alternative Address 1, Alternative Address 2",city:"Mumbai",pincode:"400001",region:"Maharashtra",country:"India",contactNo:"9876543210",name:"Contact Person Name",email:"customer@example.com",isDeleted:!1,isBlocked:!1}},vendor:{name:"Vendor Master",fields:["vnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","contactname","email","isDeleted","isBlocked"],sampleData:{vnNo:"VEND000001",categoryName:"Raw Material Suppliers",name1:"Sample Vendor Pvt Ltd",name2:"Sample Vendor",search:"SAMPLE_VENDOR",address1:"456, Supplier Avenue",address2:"Industrial Area",extraAddresses:"Warehouse Address 1, Backup Address 2",city:"Delhi",pincode:"110001",region:"Delhi",country:"India",contactNo:"9876543210",contactname:"Vendor Contact Person",email:"vendor@example.com",isDeleted:!1,isBlocked:!1}},customerPriceList:{name:"Customer Price List",fields:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup","taxCode","tandc"],sampleData:{categoryName:"Retail Customers",customerCode:"CUST000001",materialCode:"MAT001",unit:"KG",bum:250.75,orderUnit:"BOX",salesGroup:"RETAIL",taxCode:"GST1",tandc:"Payment terms: 30 days net. Delivery: FOB warehouse."}},vendorPriceList:{name:"Vendor Price List",fields:["categoryName","vendorCode","materialCode","unit","bum","orderUnit","buyer","taxCode"],sampleData:{categoryName:"Raw Material Suppliers",vendorCode:"VEND000001",materialCode:"MAT001",unit:"KG",bum:150.5,orderUnit:100,buyer:"John Doe",taxCode:"GST1"}},tax:{name:"Tax Master",fields:["taxCode","taxName","cgst","sgst","igst"],sampleData:{taxCode:"GST1",taxName:"GST Standard Rate 18%",cgst:"9",sgst:"9",igst:"18"}},location:{name:"Location Master",fields:["name","address","city","state","country","postalCode","contactPerson","contactNumber"],sampleData:{name:"Main Warehouse",address:"123, Industrial Area, Sector 5",city:"Bangalore",state:"Karnataka",country:"India",postalCode:"560001",contactPerson:"Warehouse Manager",contactNumber:"+91-9876543210"}},generalCondition:{name:"General Condition Master",fields:["name","description","isDeleted","isBlocked"],sampleData:{name:"Standard Terms and Conditions",description:"Default terms and conditions applicable to all transactions. Payment due within 30 days. Quality complaints must be reported within 48 hours.",isDeleted:!1,isBlocked:!1}},process:{name:"Process Master",fields:["processId","processDescription","isDeleted","isBlocked"],sampleData:{processId:"PROC001",processDescription:"Standard manufacturing process for raw material conversion. Includes quality checks at each stage.",isDeleted:!1,isBlocked:!1}}},T=()=>E[n]||E.material,A=X=>{const B=X.target.files[0];if(!B)return;if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"].includes(B.type)){alert("Please select a valid file format (CSV, Excel, or JSON)");return}l(B),g([]),S(null),L(B)},L=async X=>{h(!0),p(10);try{if(X.type==="application/json"){const B=await X.text(),Y=JSON.parse(B);d(Array.isArray(Y)?Y:[Y])}else if(X.type==="text/csv"){const Y=(await X.text()).split(`
`),K=Y[0].split(",").map(M=>M.trim().replace(/"/g,"")),ue=Y.slice(1).filter(M=>M.trim()).map(M=>{const V=[];let W="",ee=!1;for(let ne=0;ne<M.length;ne++){const se=M[ne];se==='"'&&(ne===0||M[ne-1]===",")?ee=!0:se==='"'&&ee&&(ne===M.length-1||M[ne+1]===",")?ee=!1:se===","&&!ee?(V.push(W.trim()),W=""):W+=se}V.push(W.trim());const te={};return K.forEach((ne,se)=>{te[ne]=V[se]||""}),te});d(ue)}else{const B=await X.arrayBuffer(),Y=_D(B,{type:"buffer"}),K=Y.SheetNames[0],ue=Y.Sheets[K],M=aa.sheet_to_json(ue);d(M)}p(50),P()}catch(B){console.error("Error parsing file:",B),g([{row:0,error:"Failed to parse file: "+B.message}])}finally{h(!1),p(100)}},P=()=>{const X=[],B=c.slice(0,5);c.forEach((Y,K)=>{({material:["materialId","categoryName","description","baseUnit","orderUnit"],customer:["cnNo","categoryName","name1","search","address1","contactNo","region","country"],vendor:["vnNo","categoryName","name1","search","address1","contactNo","region","country"],vendorPriceList:["categoryName","vendorCode","materialCode","unit","bum","orderUnit"],customerPriceList:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup"],tax:["taxCode","taxName","cgst","sgst","igst"],location:["name"],generalCondition:[],process:[]}[n]||[]).forEach(V=>{(!Y[V]||Y[V].toString().trim()==="")&&X.push({row:K+1,field:V,error:`${V} is required`})}),n==="tax"&&(Y.taxCode&&Y.taxCode.length>4&&X.push({row:K+1,field:"taxCode",error:"taxCode must be 4 characters or less"}),Y.taxName&&Y.taxName.length>25&&X.push({row:K+1,field:"taxName",error:"taxName must be 25 characters or less"}),Y.cgst&&Y.cgst.length>2&&X.push({row:K+1,field:"cgst",error:"cgst must be 2 characters or less"}),Y.sgst&&Y.sgst.length>2&&X.push({row:K+1,field:"sgst",error:"sgst must be 2 characters or less"}),Y.igst&&Y.igst.length>2&&X.push({row:K+1,field:"igst",error:"igst must be 2 characters or less"}))}),g(X),y(B)},O=X=>{const B=T(),Y=[B.sampleData];if(X==="csv"){const K=[B.fields.join(","),B.fields.map(W=>{const ee=B.sampleData[W]||"";return typeof ee=="string"&&ee.includes(",")?`"${ee}"`:ee}).join(",")].join(`
`),ue=new Blob([K],{type:"text/csv"}),M=window.URL.createObjectURL(ue),V=document.createElement("a");V.href=M,V.download=`${B.name.replace(/\s+/g,"_")}_Template.csv`,V.click(),window.URL.revokeObjectURL(M)}else if(X==="excel"){const K=aa.json_to_sheet(Y),ue=aa.book_new();aa.book_append_sheet(ue,K,"Template"),Xu(ue,`${B.name.replace(/\s+/g,"_")}_Template.xlsx`)}else if(X==="json"){const K=JSON.stringify(Y,null,2),ue=new Blob([K],{type:"application/json"}),M=window.URL.createObjectURL(ue),V=document.createElement("a");V.href=M,V.download=`${B.name.replace(/\s+/g,"_")}_Template.json`,V.click(),window.URL.revokeObjectURL(M)}},Q=async()=>{if(v.length>0){alert("Please fix validation errors before importing");return}h(!0);try{const X=localStorage.getItem("selectedCompanyId"),B=localStorage.getItem("financialYear"),Y=await fetch(`/api/master-data/${n}/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c,companyId:X,financialYear:B})}),K=await Y.json();Y.ok?(S(K),r&&r(K)):alert("Import failed: "+K.message)}catch(X){console.error("Import error:",X),alert("Import failed: "+X.message)}finally{h(!1)}},z=()=>{l(null),d([]),g([]),y([]),N(!1),S(null),p(0),D.current&&(D.current.value="")},re=()=>{z(),t()};if(!e)return null;const U=T();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Import ",U.name]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:re})]}),a.jsx("div",{className:"modal-body",children:k?a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-check-circle me-2"}),"Import Complete"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-success",children:k.results?.imported||0}),a.jsx("p",{className:"text-muted",children:"Records Imported"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-warning",children:k.results?.updated||0}),a.jsx("p",{className:"text-muted",children:"Records Updated"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-danger",children:k.results?.failed||0}),a.jsx("p",{className:"text-muted",children:"Records Failed"})]})})]}),k.results?.errors&&k.results.errors.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Error Details:"}),a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:k.results.errors.map((X,B)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsx("small",{children:X})},B))})]}),a.jsx("div",{className:"mt-3 d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:re,children:"Close"})})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-download me-2"}),"Download Template"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("p",{className:"text-muted",children:"Download the template in your preferred format and fill in your data:"}),a.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:()=>O("csv"),children:[a.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Template"]}),a.jsxs("button",{className:"btn btn-outline-info btn-sm",onClick:()=>O("excel"),children:[a.jsx("i",{className:"fas fa-file-excel me-1"}),"Excel Template"]}),a.jsxs("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>O("json"),children:[a.jsx("i",{className:"fas fa-file-code me-1"}),"JSON Template"]})]}),a.jsx("div",{className:"mt-3",children:a.jsxs("small",{className:"text-muted",children:[a.jsx("strong",{children:"Template Fields:"})," ",U.fields.join(", ")]})})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Upload File"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"mb-3 col-xl-6",children:[a.jsx("input",{ref:D,type:"file",className:"form-control form-control-sm",accept:".csv,.xlsx,.xls,.json",onChange:A}),a.jsx("div",{className:"form-text",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]}),m>0&&m<100&&a.jsx("div",{className:"progress mb-3",children:a.jsxs("div",{className:"progress-bar",style:{width:`${m}%`},children:[m,"%"]})})]})]}),v.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-danger text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"Validation Errors (",v.length,")"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:v.map((X,B)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsxs("small",{children:["Row ",X.row,": ",X.field&&`${X.field} - `,X.error]})},B))})})]}),b.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-eye me-2"}),"Preview (First 5 records)"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsx("tr",{children:U.fields.map(X=>a.jsx("th",{style:{minWidth:"120px"},children:X},X))})}),a.jsx("tbody",{children:b.map((X,B)=>a.jsx("tr",{children:U.fields.map(Y=>a.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:X[Y]!==void 0&&X[Y]!==null?X[Y].toString():"-"},Y))},B))})]})})})]}),!k&&c.length>0&&a.jsx("div",{className:"d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-primary",onClick:Q,disabled:u||v.length>0,children:u?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-upload me-1"}),"Import Data (",c.length," records)"]})})})]})})]})})})]})},Q6=["Piece","Box","Kg","Ltr"],MSe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",minstock:"",safetyStock:"",maxstock:"",pdt:"",mpn:"",location:"",materialgroup:"",hsn:""}),[m,p]=w.useState(""),[v,g]=w.useState(1),[b]=w.useState(10),[y,C]=w.useState(!1),[N,k]=w.useState(!1),[S,D]=w.useState(""),[E,T]=w.useState(""),[A,L]=w.useState(null);w.useEffect(()=>{P(),z()},[]),w.useEffect(()=>{if(!m)l(r);else{const Ne=r.filter(Fe=>{const Xe=m.toLowerCase();return(Fe.materialId||"").toLowerCase().includes(Xe)||(Fe.description||"").toLowerCase().includes(Xe)||(Fe.baseUnit||"").toLowerCase().includes(Xe)||(Fe.orderUnit||"").toLowerCase().includes(Xe)||(Fe.conversionValue||"").toString().toLowerCase().includes(Xe)||(Fe.dimension||"").toLowerCase().includes(Xe)||(Fe.mpn||"").toLowerCase().includes(Xe)||(Fe.hsn||"").toLowerCase().includes(Xe)||(Fe.location||"").toLowerCase().includes(Xe)||(Fe.materialgroup||"").toLowerCase().includes(Xe)});l(Ne)}g(1)},[m,r]);const P=async()=>{const Ne=await Oe.get("/api/category",{params:{companyId:O,financialYear:Q}});t(Ne.data)},O=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear"),z=async()=>{const Ne=await Oe.get("/api/material",{params:{companyId:O,financialYear:Q}});console.log(Ne);const Fe=Ne.data.sort((Xe,ct)=>new Date(ct.createdAt)-new Date(Xe.createdAt));n(Fe)},re=Ne=>{const{name:Fe,value:Xe}=Ne.target;h(ct=>({...ct,[Fe]:Xe}))},U=Ne=>{p(Ne.target.value)},X=Ne=>{d(Ne),h({categoryId:Ne.categoryId?._id||Ne.categoryId,description:Ne.description,baseUnit:Ne.baseUnit,orderUnit:Ne.orderUnit,conversionValue:Ne.conversionValue||"",dimension:Ne.dimension||"",mpn:Ne.mpn||"",location:Ne.location||"",materialgroup:Ne.materialgroup||"",hsn:Ne.hsn||"",minstock:Ne.minstock||"",safetyStock:Ne.safetyStock||"",maxstock:Ne.maxstock||"",pdt:Ne.pdt||""})},B=()=>{d(null),h({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",hsn:"",mpn:"",location:"",materialgroup:"",minstock:"",safetyStock:"",maxstock:"",pdt:""}),D(""),T(""),L(null)},Y=async Ne=>{Ne.preventDefault();try{c?(await Oe.put(`/api/material/${c._id}`,u),alert("Material updated!"),z(),B(),W()):(L(u),C(!1),k(!0))}catch(Fe){console.error(Fe),alert("Operation failed!")}},K=async()=>{try{let Ne;const Fe=localStorage.getItem("selectedCompanyId"),Xe=localStorage.getItem("financialYear");S==="external"?Ne=E:Ne=(await Oe.post("/api/material/generate-id",{categoryId:A.categoryId})).data.materialId,await Oe.post("/api/material",{...A,materialId:Ne,materialIdType:S,companyId:Fe,financialYear:Xe}),alert("Material added!"),z(),B(),W()}catch(Ne){console.error(Ne),alert("Operation failed!")}},ue=async(Ne,Fe,Xe)=>{try{const ct={[Fe]:Xe};await Oe.put(`/api/material/status/${Ne}`,ct),n(r.map(xt=>xt._id===Ne?{...xt,[Fe]:Xe}:xt)),alert("Status updated successfully!")}catch(ct){console.error("Error updating status:",ct),alert("Failed to update status!")}},M=()=>{const Ne=o.map(_t=>({"Material ID":_t.materialId||"",Description:_t.description||"","Base Unit":_t.baseUnit||"","Order Unit":_t.orderUnit||"","Conversion Value":_t.conversionValue||"",Dimension:_t.dimension||"",MPN:_t.mpn||"",HSN:_t.hsn||"","Min Stock":_t.minstock||"","Safety Stock":_t.safetyStock||"","Max Stock":_t.maxstock||"",PDT:_t.pdt||"",Location:_t.location||"","Material Group":_t.materialgroup||"","Is Deleted":_t.isDeleted?"Yes":"No","Is Blocked":_t.isBlocked?"Yes":"No","Created Date":_t.createdAt?new Date(_t.createdAt).toLocaleDateString():"","Updated Date":_t.updatedAt?new Date(_t.updatedAt).toLocaleDateString():""})),Fe=aa.book_new(),Xe=aa.json_to_sheet(Ne),ct=[{wch:15},{wch:30},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:15},{wch:12},{wch:15},{wch:12},{wch:10},{wch:20},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Xe["!cols"]=ct,aa.book_append_sheet(Fe,Xe,"Materials");const xt=new Date,Re=xt.toLocaleDateString("en-GB").replace(/\//g,"-"),ht=xt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),At=`Material-Master-${Re}-${ht}.xlsx`;Xu(Fe,At),oe()},V=()=>C(!0),W=()=>{C(!1),k(!1),L(null)},ee=()=>{k(!1),D(""),T(""),L(null),C(!0)},te=Ne=>{D(Ne),Ne==="internal"&&K()},[ne,se]=w.useState(!1),oe=()=>se(!1),[G,ce]=w.useState([]);w.useEffect(()=>{(async()=>{try{const Fe=await Oe.get("/api/locations",{params:{companyId:O}});ce(Fe.data)}catch(Fe){console.error("Error fetching locations:",Fe)}})()},[]);const Z=v*b,ae=Z-b,je=o.slice(ae,Z),de=Math.ceil(o.length/b),ie=Ne=>{g(Ne)},be=Ne=>{console.log("Import successful:",Ne),z()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:m,onChange:U})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-info btn-sm me-2",onClick:()=>i(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:M,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{V(),B()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Material"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base"}),a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Conversion"}),a.jsx("th",{children:"Dimension"}),a.jsx("th",{children:"MPN"}),a.jsx("th",{children:"HSN"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"safety Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"PDT"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:je.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"16",className:"text-center",children:m?"No materials found matching your search":"No materials found"})}):je.map(Ne=>a.jsxs("tr",{children:[a.jsx("td",{children:Ne.materialId}),a.jsx("td",{className:"text-wrap",children:Ne.description}),a.jsx("td",{children:Ne.baseUnit}),a.jsx("td",{children:Ne.orderUnit}),a.jsx("td",{children:Ne.conversionValue||"-"}),a.jsx("td",{className:"text-wrap",children:Ne.dimension||"-"}),a.jsx("td",{children:Ne.mpn||"_"}),a.jsx("td",{children:Ne.hsn||"_"}),a.jsx("td",{children:Ne.minstock||"_"}),a.jsx("td",{children:Ne.safetyStock||"_"}),a.jsx("td",{children:Ne.maxstock||"_"}),a.jsx("td",{children:Ne.pdt||"_"}),a.jsx("td",{className:"text-wrap",children:Ne.location||"_"}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isDeleted||!1,onChange:Fe=>ue(Ne._id,"isDeleted",Fe.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isBlocked||!1,onChange:Fe=>ue(Ne._id,"isBlocked",Fe.target.checked)})})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!Ne.isDeleted&&!Ne.isBlocked?"bg-success":Ne.isDeleted&&Ne.isBlocked?"bg-dark":Ne.isDeleted?"bg-secondary":"bg-danger"}`,children:!Ne.isDeleted&&!Ne.isBlocked?"Active":Ne.isDeleted&&Ne.isBlocked?"Deleted & Blocked":Ne.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{X(Ne),V()},children:"Edit"})})]},Ne._id))})]})})})]}),de>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>ie(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Fe=[],Xe=[];Fe.push(1);for(let Re=Math.max(2,v-2);Re<=Math.min(de-1,v+2);Re++)Fe.push(Re);de>1&&Fe.push(de);const ct=[...new Set(Fe)].sort((Re,ht)=>Re-ht);let xt;for(let Re of ct)xt&&(Re-xt===2?Xe.push(xt+1):Re-xt!==1&&Xe.push("...")),Xe.push(Re),xt=Re;return Xe.map((Re,ht)=>Re==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ht}`):a.jsx("li",{className:`page-item ${v===Re?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(Re),children:Re})},Re))})(),a.jsx("li",{className:`page-item ${v===de?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>ie(v+1),disabled:v===de,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})}),N&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Material ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Material ID:"}),S==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3 ",children:[a.jsx("label",{className:"form-label",children:"External Material ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:E,onChange:Ne=>T(Ne.target.value),maxLength:50,required:!0,placeholder:"Enter custom material ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[E.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:K,disabled:!E.trim(),children:"Create Material"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>D(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>te("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>te("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Custom ID)"]})})]})]})]})})})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:c?"Edit Material":"Add New Material"}),a.jsx("button",{type:"button",className:"btn-close",onClick:W,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:Y,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:u.categoryId,onChange:re,className:"form-select",placeholder:"Select Category",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),e.map(Ne=>a.jsx("option",{value:Ne._id,children:Ne.categoryName},Ne._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"description",value:u.description,onChange:re,className:"form-control",placeholder:"Enter Description",maxLength:100,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"HSN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"hsn",value:u.hsn,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Base Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"baseUnit",value:u.baseUnit,onChange:re,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Order Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"orderUnit",value:u.orderUnit,onChange:re,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),u.baseUnit&&u.orderUnit&&u.baseUnit!==u.orderUnit&&a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label text-primary",children:"Unit Conversion"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{name:"conversionValue",value:u.conversionValue,onChange:re,className:"form-control",required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Min Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"minstock",value:u.minstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Safety Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"safetyStock",value:u.safetyStock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Max Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"maxstock",value:u.maxstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),re(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Material Group"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"materialgroup",value:u.materialgroup,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"MPN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"mpn",value:u.mpn,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Packing"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"dimension",value:u.dimension,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Shipping Note"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"pdt",type:"text",value:u.pdt,onChange:re,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"location",value:u.location,onChange:re,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"Select Location"}),G.map(Ne=>a.jsx("option",{value:Ne.name,children:Ne.name},Ne.name))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:B,children:"Clear"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update Material":"Save Material"})]})]})})]})})})]}),a.jsx(vf,{show:s,onClose:()=>i(!1),onImport:be,masterDataType:"material",apiEndpoint:"materials"})]})};function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tn.apply(null,arguments)}function RSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ED(e,t){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ED(e,t)}function FSe(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),[b,y]=w.useState({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},N=e.filter(U=>{if(!v)return!0;const X=v.toLowerCase(),B=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.processId?.toLowerCase().includes(X)||U.processDescription?.toLowerCase().includes(X)||B.toLowerCase().includes(X)||(U.isDeleted?"yes deleted":"no active").includes(X)||(U.isBlocked?"yes blocked":"no active").includes(X)}),k=Math.ceil(N.length/m),S=(u-1)*m,D=S+m,E=N.slice(S,D),T=U=>{g(U.target.value),h(1)},A=U=>{h(U)},L=()=>{const X=(v?N:e).map((ne,se)=>({"S.No":se+1,"Process ID":ne.processId||"","Process Description":ne.processDescription||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=aa.book_new(),Y=aa.json_to_sheet(X),K=[{wch:8},{wch:15},{wch:40},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];Y["!cols"]=K,aa.book_append_sheet(B,Y,"Process List Master");const ue=new Date,M=ue.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ue.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Process-List-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Xu(B,ee);const te=v?N.length:e.length;alert(`Excel file exported successfully: ${te} records exported as ${ee}`)},P=async()=>{try{const U=await Oe.get("/api/processes",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Fetch failed:",U),alert("Error loading processes")}},O=(U=null)=>{U?(y({processId:U.processId||"",processDescription:U.processDescription||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},Q=async()=>{try{if(!b.processId.trim()){alert("Process ID is required");return}if(!b.processDescription.trim()){alert("Process Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/processes/${s._id}`,U),alert("Process updated successfully!")):(await Oe.post("/api/processes",U),alert("Process added successfully!")),P(),n(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving process. Please try again.")}},z=async(U,X,B)=>{try{const Y={[X]:B,companyId:o,financialYear:l};await Oe.put(`/api/processes/${U}`,Y),alert(`Process ${X==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(Y){console.error("Status update failed:",Y),alert("Error updating status")}},re=()=>{n(!1),i(null),y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1})};return w.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Process List Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Process List Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by ID, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:N.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Process"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Process ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Is Deleted"}),a.jsx("th",{children:"Is Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No processes found matching your search criteria":"No processes found"})}):E.map((U,X)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+X+1}),a.jsx("td",{children:a.jsx("strong",{children:U.processId})}),a.jsx("td",{className:"text-wrap",children:U.processDescription}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:B=>z(U._id,"isDeleted",B.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:B=>z(U._id,"isBlocked",B.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,X)=>a.jsx("li",{className:`page-item ${u===X+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),A(X+1)},children:X+1})},X)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:s?"Edit Process":"Add New Process"}),a.jsx("button",{type:"button",className:"btn-close",onClick:re,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"d-flex  align-items-center",children:[a.jsxs("div",{className:" col-md-2 row me-4",children:[a.jsx("label",{className:"form-label col-xl-7",children:"Process_ID"}),a.jsx("input",{type:"text",className:" col-xl-5  form-control-sm",placeholder:"Enter Process ID",value:b.processId,onChange:U=>y({...b,processId:U.target.value}),required:!0})]}),a.jsxs("div",{className:"col-md-10 row",children:[a.jsx("label",{className:"form-label col-xl-2 mt-4",children:"Process Description"}),a.jsx("textarea",{type:"text",className:"form-control-sm col-xl-10",rows:"4",placeholder:"Enter Process Description",value:b.processDescription,onChange:U=>y({...b,processDescription:U.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary me-3",onClick:re,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:Q,children:[s?"Update":"Save"," Process"]})]})]})})})]}),a.jsx(vf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"process"})]})}function LSe(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),[b,y]=w.useState({name:"",description:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),P()},N=e.filter(U=>{if(!v)return!0;const X=v.toLowerCase(),B=!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked";return U.name?.toLowerCase().includes(X)||U.description?.toLowerCase().includes(X)||B.toLowerCase().includes(X)||(U.isDeleted?"yes deleted":"no active").includes(X)||(U.isBlocked?"yes blocked":"no active").includes(X)}),k=Math.ceil(N.length/m),S=(u-1)*m,D=S+m,E=N.slice(S,D),T=U=>{g(U.target.value),h(1)},A=U=>{h(U)},L=()=>{const X=(v?N:e).map((ne,se)=>({"S.No":se+1,"Condition Name":ne.name||"",Description:ne.description||"","Is Deleted":ne.isDeleted?"Yes":"No","Is Blocked":ne.isBlocked?"Yes":"No",Status:!ne.isDeleted&&!ne.isBlocked?"Active":ne.isDeleted&&ne.isBlocked?"Deleted & Blocked":ne.isDeleted?"Deleted":"Blocked","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=aa.book_new(),Y=aa.json_to_sheet(X),K=[{wch:8},{wch:25},{wch:50},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];Y["!cols"]=K,aa.book_append_sheet(B,Y,"General Condition Master");const ue=new Date,M=ue.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ue.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`General-Condition-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Xu(B,ee);const te=v?N.length:e.length;alert(`Excel file exported successfully: ${te} records exported as ${ee}`)},P=async()=>{try{const U=await Oe.get("/api/general-conditions",{params:{companyId:o,financialYear:l}});t(U.data),h(1)}catch(U){console.error("Failed to fetch:",U),alert("Error loading general conditions")}},O=(U=null)=>{U?(y({name:U.name||"",description:U.description||"",isDeleted:U.isDeleted||!1,isBlocked:U.isBlocked||!1}),i(U)):(y({name:"",description:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},Q=async()=>{try{if(!b.name.trim()){alert("Condition name is required");return}if(!b.description.trim()){alert("Description is required");return}const U={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/general-conditions/${s._id}`,U),alert("General condition updated successfully!")):(await Oe.post("/api/general-conditions",U),alert("General condition added successfully!")),P(),n(!1),i(null)}catch(U){console.error("Save failed:",U),alert("Error saving general condition. Please try again.")}},z=async(U,X,B)=>{try{const Y={[X]:B,companyId:o,financialYear:l};await Oe.put(`/api/general-conditions/${U}`,Y),alert(`General condition ${X==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(Y){console.error("Status update failed:",Y),alert("Error updating status")}},re=()=>{n(!1),i(null),y({name:"",description:"",isDeleted:!1,isBlocked:!1})};return w.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"General Condition Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"General Condition Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:N.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add General Condition"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Condition Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Deleted"}),a.jsx("th",{children:"Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No general conditions found matching your search criteria":"No general conditions found"})}):E.map((U,X)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+X+1}),a.jsx("td",{children:a.jsx("strong",{children:U.name})}),a.jsx("td",{className:"text-wrap",children:U.description}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isDeleted||!1,onChange:B=>z(U._id,"isDeleted",B.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:U.isBlocked||!1,onChange:B=>z(U._id,"isBlocked",B.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!U.isDeleted&&!U.isBlocked?"bg-success":U.isDeleted&&U.isBlocked?"bg-danger":U.isDeleted?"bg-warning":"bg-secondary"}`,children:!U.isDeleted&&!U.isBlocked?"Active":U.isDeleted&&U.isBlocked?"Deleted & Blocked":U.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),k>1&&a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(U,X)=>a.jsx("li",{className:`page-item ${u===X+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),A(X+1)},children:X+1})},X)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," General Condition"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:re,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:" form-label col-xl-6",children:"Condition Name"}),a.jsx("input",{type:"text",className:"form-control col-xl-6",placeholder:"Enter General Condition Name",value:b.name,onChange:U=>y({...b,name:U.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-9",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:"form-label col-xl-2",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",placeholder:"Enter Description",value:b.description,onChange:U=>y({...b,description:U.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"row ",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:U=>y({...b,isDeleted:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:U=>y({...b,isBlocked:U.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"me-3 btn btn-secondary",onClick:re,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:Q,children:[s?"Update":"Save"," Condition"]})]})]})})})]}),a.jsx(vf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"generalCondition"})]})}const J6=["Piece","Box","Kg","Ltr"],BSe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState(""),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(new Date().toISOString().split("T")[0]),[C,N]=w.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}]),[k,S]=w.useState(!1),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState("materialId"),[O,Q]=w.useState(null),[z,re]=w.useState(!1),[U,X]=w.useState([]),[B,Y]=w.useState(""),[K,ue]=w.useState(""),[M,V]=w.useState(1),[W]=w.useState(5),[ee,te]=w.useState(1),[ne]=w.useState(3),se="MMNR-",oe=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:oe}}).then(Ie=>{const Ze=Ie.data.filter(Ft=>!Ft.isDeleted&&!Ft.isBlocked);t(Ze),console.log("Fetched materials:",Ze)}).catch(Ie=>console.error(Ie)),Oe.get("/api/locations").then(Ie=>X(Ie.data))},[]),w.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:oe,financialYear:G}}).then(Ie=>d(Ie.data)).catch(Ie=>console.error(Ie))},[]);const ce=()=>{N(Ie=>[...Ie,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}])},Z=Ie=>{N(Ft=>Ft.filter((Qe,Ye)=>Ye!==Ie));const Ze=Math.ceil((C.length-1)/W);M>Ze&&Ze>0&&V(Ze)},ae=async(Ie,Ze,Ft)=>{const Qe=[...C];if(Qe[Ie][Ze]=Ft,Ze==="materialId"&&Qe[Ie].isManual)try{const Le=(await Oe.get(`/api/material/byId/${Ft}`)).data;Le&&(Qe[Ie]={...Qe[Ie],materialId:Le.materialId,description:Le.description,baseUnit:Le.baseUnit,orderUnit:Le.orderUnit,location:Le.location,materialgroup:Le.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",Ft)}N(Qe)},je=()=>{if(!D.trim()){A([]);return}if(L==="materialId"){let Ie=D;/^\d+$/.test(D)&&(Ie=se+D);const Ze=e.filter(Ft=>(Ft.materialId||"").toLowerCase().includes(Ie.toLowerCase()));A(Ze)}else{const Ie=e.filter(Ze=>(Ze.description||"").toLowerCase().includes(D.toLowerCase()));A(Ie)}};w.useEffect(()=>{const Ie=setTimeout(()=>{D.trim()?je():A([])},300);return()=>clearTimeout(Ie)},[D,L,e]);const de=Ie=>{const Ze=Ie.target.value;E(Ze)},ie=()=>{A(e),E("")},be=()=>{A([]),E("")},Ne=Ie=>{Q(Ie),S(!0),E(""),A([])},Fe=()=>{S(!1),Q(null),E(""),A([])},Xe=Ie=>{if(O!==null){const Ze=[...C];Ze[O]={...Ze[O],materialId:Ie.materialId,description:Ie.description,baseUnit:Ie.baseUnit,orderUnit:Ie.orderUnit,location:Ie.location,materialgroup:Ie.materialgroup,isManual:!0},N(Ze)}Fe()},[ct,xt]=w.useState([]);w.useEffect(()=>{Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Ie=>xt(Ie.data)).catch(Ie=>console.error("Failed to fetch saved indents",Ie))},[]);const Re=async()=>{if(!u){alert("Please select a purchase category");return}if(!m||!v){alert("Please fill in Location and Buyer Group");return}const Ie=C.filter(Ye=>Ye.materialId&&Ye.materialId.trim()!==""&&Ye.description&&Ye.description.trim()!==""&&Ye.qty&&Ye.qty>0);if(Ie.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const Ze=c.find(Ye=>Ye.name===u||Ye.categoryName===u||Ye._id===u),Ft=localStorage.getItem("selectedCompanyId"),Qe=localStorage.getItem("financialYear");try{const Ye={indentIdType:B,externalIndentId:K,categoryId:Ze._id,categoryName:Ze.name||Ze.categoryName,location:m,buyerGroup:v,documentDate:b,items:Ie,companyId:Ft,financialYear:Qe};if(B==="")l(Ye),n(!1),re(!0);else{if(B==="internal"){const Le=await Oe.post("/api/indent/create",Ye);alert(`Indent saved successfully with ID: ${Le.data.indentId}`)}else if(B==="external"){if(!K||K.trim()===""){alert("Please enter an External Indent ID");return}Ye.indentId=K;const Le=await Oe.post("/api/indent/create",Ye);alert(`Indent saved successfully with External ID: ${Le.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);re(!1),N([]),p(""),g(""),y(new Date().toISOString().split("T")[0]),V(1)}Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Le=>xt(Le.data)).catch(Le=>console.error("Failed to fetch saved indents",Le))}catch(Ye){console.error(Ye),alert("Failed to save indent")}},ht=M*W,At=ht-W,_t=C.slice(At,ht),Wt=Math.ceil(C.length/W),Ke=Ie=>V(Ie),ge=({currentPage:Ie,totalPages:Ze,onPageChange:Ft,size:Qe="normal"})=>{if(Ze<=1)return null;const Ye=[],Le=5;let ze=Math.max(1,Ie-Math.floor(Le/2)),ut=Math.min(Ze,ze+Le-1);ut-ze+1<Le&&(ze=Math.max(1,ut-Le+1));for(let We=ze;We<=ut;We++)Ye.push(We);const Te=Qe==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation mt-2",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${Ie===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Te}`,onClick:()=>Ft(Ie-1),disabled:Ie===1,children:"Previous"})}),ze>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Te}`,onClick:()=>Ft(1),children:"1"})}),ze>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Te}`,children:"..."})})]}),Ye.map(We=>a.jsx("li",{className:`page-item ${Ie===We?"active":""}`,children:a.jsx("button",{className:`page-link ${Te}`,onClick:()=>Ft(We),children:We})},We)),ut<Ze&&a.jsxs(a.Fragment,{children:[ut<Ze-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Te}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Te}`,onClick:()=>Ft(Ze),children:Ze})})]}),a.jsx("li",{className:`page-item ${Ie===Ze?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Te}`,onClick:()=>Ft(Ie+1),disabled:Ie===Ze,children:"Next"})})]})})},ve=()=>{re(!1),Y(""),ue(""),l(null),n(!0)},xe=Ie=>{Y(Ie),Re()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto mb-2",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-6",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Purchase Category",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-6",children:a.jsxs("select",{className:"form-select form-select-sm",value:u,onChange:Ie=>h(Ie.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),c.map((Ie,Ze)=>a.jsx("option",{value:Ie.name||Ie.categoryName||Ie._id,children:Ie.name||Ie.categoryName||`Category ${Ze+1}`},Ze))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Doc Date",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:Ie=>y(Ie.target.value)})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Location",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:m,onChange:Ie=>p(Ie.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),U.map((Ie,Ze)=>a.jsx("option",{value:Ie.name||Ie._id,children:Ie.name||Ie._id},Ze))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Buyer Group",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:Ie=>g(Ie.target.value),placeholder:"Buyer Group"})})]})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",C.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body ",children:[C.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:" table-bordered table-sm mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:_t.map((Ie,Ze)=>{const Ft=At+Ze;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:Ft+1}),a.jsx("td",{children:Ie.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm w-50",value:Ie.materialId,onChange:Qe=>ae(Ft,"materialId",Qe.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>Ne(Ft),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:Ie.materialId})}),a.jsx("td",{children:Ie.isManual?a.jsx("input",{className:"form-control form-control-sm",value:Ie.description,onChange:Qe=>ae(Ft,"description",Qe.target.value),placeholder:"Description",readOnly:!!Ie.materialId}):a.jsx("span",{title:Ie.description,children:Ie.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ie.qty,onChange:Qe=>ae(Ft,"qty",Qe.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:Ie.baseUnit,onChange:Qe=>ae(Ft,"baseUnit",Qe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Qe=>a.jsx("option",{value:Qe,children:Qe},Qe))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ie.deliveryDate,onChange:Qe=>ae(Ft,"deliveryDate",Qe.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:Ie.orderUnit,onChange:Qe=>ae(Ft,"orderUnit",Qe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Qe=>a.jsx("option",{value:Qe,children:Qe},Qe))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>Z(Ft),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},Ft)})})]})}),a.jsx(ge,{currentPage:M,totalPages:Wt,onPageChange:Ke,size:"small"})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]}),"   ",a.jsx("div",{className:"col-xl-2",children:a.jsxs("button",{onClick:ce,className:"btn btn-outline-primary btn-sm me-2 mt-2",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})})]})]}),a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-6 col-xl-2 col-sm-12",children:a.jsxs("button",{onClick:Re,className:"btn btn-success btn-sm",disabled:!u||C.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]})})}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Fe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select form-select-sm",value:L,onChange:Ie=>P(Ie.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:L==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:D,onChange:de})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info btn-sm",onClick:ie,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),T.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:T.length>0?a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((Ie,Ze)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{children:Ie.materialId})}),a.jsx("td",{children:Ie.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.baseUnit})}),a.jsx("td",{children:Ie.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ie.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Xe(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ze))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":D?`No materials found matching "${D}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Fe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),z&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ve,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>xe("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Y("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),B==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Indent ID (max 50 characters)",value:K,onChange:Ie=>ue(Ie.target.value),onKeyPress:Ie=>{Ie.key==="Enter"&&K.trim()&&Re()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[K.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:Re,disabled:!K.trim(),children:"Create Indent"})})]})]})]})})})]})]})},USe=()=>{const[e,t]=w.useState(1),[r]=w.useState(10),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(""),[d,u]=w.useState("indentId"),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState([]),[y]=w.useState(10),[C,N]=w.useState(null),[k,S]=w.useState(null);w.useEffect(()=>{D()},[]),w.useEffect(()=>{const ne=n.find(se=>se._id===C);S(ne)},[C,n]);const D=()=>{m(!0);const ne=localStorage.getItem("selectedCompanyId"),se=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:ne,financialYear:se}}).then(oe=>{const G=oe.data.sort((ce,Z)=>new Date(Z.createdAt||Z.documentDate)-new Date(ce.createdAt||ce.documentDate));s(G),console.log("Fetched saved indents:",G),o(G)}).catch(oe=>console.error("Failed to fetch saved indents",oe)).finally(()=>m(!1))},E=async(ne,se,oe)=>{try{const G={[se]:oe};await Oe.put(`/api/indent/status/${ne}`,G);const ce=Z=>Z.map(ae=>ae._id===ne?{...ae,[se]:oe}:ae);s(ce),o(Z=>ce(Z)),alert("Status updated successfully!")}catch(G){console.error("Error updating status:",G),alert("Failed to update status!")}},T=()=>{v(!0),b(n)},A=()=>{v(!1),c(""),b([])},L=ne=>{const se=ne.target.value;if(c(se),se.trim()===""){b(n);return}const oe=n.filter(G=>{if(d==="indentId"){const ce=se.toLowerCase(),Z=G.indentId.toLowerCase();return Z.includes(ce)||Z.replace(/[^0-9]/g,"").includes(ce.replace(/[^0-9]/g,""))}else{if(d==="location")return G.location.toLowerCase().includes(se.toLowerCase());if(d==="buyerGroup")return G.buyerGroup.toLowerCase().includes(se.toLowerCase());if(d==="categoryName")return G.categoryName.toLowerCase().includes(se.toLowerCase())}return!1});b(oe)},P=()=>{b(n),c("")},O=()=>{b([]),c("")},Q=ne=>{o([ne]),t(1),A()},z=()=>{o(n),t(1)},re=ne=>{const se=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${ne.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(ne.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${ne.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${ne.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${ne.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${ne.items.map((G,ce)=>`
                                <tr style="${ce%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ce+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${G.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,oe=window.open("","","width=900,height=700");oe.document.write("<html><head><title>Indent Print - "+ne.indentId+"</title></head><body>"),oe.document.write(se),oe.document.write("</body></html>"),oe.document.close(),oe.print()},U=e*r,X=U-r,B=i.slice(X,U),Y=Math.ceil(i.length/r),K=ne=>t(ne),ue=({currentPage:ne,totalPages:se,onPageChange:oe})=>{if(se<=1)return null;const G=[],ce=5;let Z=Math.max(1,ne-Math.floor(ce/2)),ae=Math.min(se,Z+ce-1);ae-Z+1<ce&&(Z=Math.max(1,ae-ce+1));for(let je=Z;je<=ae;je++)G.push(je);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ne-1),disabled:ne===1,children:"Previous"})}),Z>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>oe(1),children:"1"})}),Z>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(je=>a.jsx("li",{className:`page-item ${ne===je?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(je),children:je})},je)),ae<se&&a.jsxs(a.Fragment,{children:[ae<se-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>oe(se),children:se})})]}),a.jsx("li",{className:`page-item ${ne===se?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ne+1),disabled:ne===se,children:"Next"})})]})})},M=e*y,V=M-y,W=g.slice(V,M);Math.ceil(g.length/y);const ee=ne=>t(ne),te=({currentPage:ne,totalPages:se,onPageChange:oe})=>{if(se<=1)return null;const G=[],ce=5;let Z=Math.max(1,ne-Math.floor(ce/2)),ae=Math.min(se,Z+ce-1);ae-Z+1<ce&&(Z=Math.max(1,ae-ce+1));for(let je=Z;je<=ae;je++)G.push(je);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ne===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ne-1),disabled:ne===1,children:"Previous"})}),Z>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>oe(1),children:"1"})}),Z>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(je=>a.jsx("li",{className:`page-item ${ne===je?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(je),children:je})},je)),ae<se&&a.jsxs(a.Fragment,{children:[ae<se-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>oe(se),children:se})})]}),a.jsx("li",{className:`page-item ${ne===se?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ne+1),disabled:ne===se,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Indent List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Indent List"})]})})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-dark btn-sm",onClick:T,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:z,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):B.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered table-sm align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60px"},children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{style:{width:"100px"},children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{style:{width:"100px"},children:"Action"})]})}),a.jsx("tbody",{children:B.map((ne,se)=>{const oe=X+se;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:oe+1}),a.jsx("td",{children:ne.indentId}),a.jsx("td",{children:(()=>{const G=new Date(ne.documentDate),ce=String(G.getDate()).padStart(2,"0"),Z=String(G.getMonth()+1).padStart(2,"0"),ae=G.getFullYear();return`${ce}/${Z}/${ae}`})()}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),a.jsx("td",{children:ne.buyerGroup}),a.jsx("td",{children:ne.categoryName}),a.jsxs("td",{className:"text-center",children:[ne.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isDeleted||!1,onChange:G=>E(ne._id,"isDeleted",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ne.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ne.isBlocked||!1,onChange:G=>E(ne._id,"isBlocked",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ne.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>re(ne),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>N(ne._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},ne._id)})})]})}),Y>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(ue,{currentPage:e,totalPages:Y,onPageChange:K})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:z,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:A})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:ne=>u(ne.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:L})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:P,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:O,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{children:W.length>0?a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:W.map((ne,se)=>a.jsxs("tr",{children:[a.jsx("td",{children:se+1}),a.jsx("td",{children:ne.indentId}),a.jsx("td",{children:new Date(ne.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ne.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:ne.buyerGroup})}),a.jsx("td",{children:ne.categoryName}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[ne.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Q(ne),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},se))}),Y>1&&a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx(te,{currentPage:e,totalPages:Y,onPageChange:ee})})})})})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:A,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:k?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:k?.items.map((ne,se)=>a.jsxs("tr",{children:[a.jsx("td",{children:se+1}),a.jsx("td",{children:ne.materialId}),a.jsx("td",{children:ne.description}),a.jsx("td",{children:ne.qty}),a.jsx("td",{children:ne.baseUnit}),a.jsx("td",{children:ne.orderUnit}),a.jsx("td",{children:k.location}),a.jsx("td",{children:k.buyerGroup}),a.jsx("td",{children:new Date(ne.deliveryDate).toLocaleDateString()})]},ne._id))})]})})})]})})})]})};function $Se(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]);Gu();const[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,Q]=w.useState(""),[z,re]=w.useState(!1),[U,X]=w.useState(null),[B,Y]=w.useState(0),[K,ue]=w.useState(!1),[M,V]=w.useState(!1),[W,ee]=w.useState(""),[te,ne]=w.useState(""),[se,oe]=w.useState(""),[G,ce]=w.useState(""),[Z,ae]=w.useState(""),[je,de]=w.useState(""),[ie,be]=w.useState(null);console.log("cat",r),w.useEffect(()=>{if(Z){const Ye=e.filter(Le=>Le.indentId.toLowerCase().includes(Z.toLowerCase()));setFilteredIndents(Ye)}},[Z]);const[Ne,Fe]=w.useState([]);w.useEffect(()=>{const Ye=localStorage.getItem("selectedCompanyId"),Le=localStorage.getItem("financialYear"),ze={params:{companyId:Ye,financialYear:Le}};Oe.get("/api/indent/get",ze).then(ut=>{const Te=ut.data.filter(We=>!We.isDeleted&&!We.isBlocked);t(Te.map(We=>({label:`${We.indentId} (${We.categoryName})`,value:We}))),t(Te.map(We=>({label:`${We.indentId} (${We.categoryName})`,value:We})))}),Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(ut=>{n(ut.data.map(Te=>({label:`${Te.categoryName}`,value:Te._id})))}),Oe.get("/api/vendors",ze).then(ut=>{const Te=ut.data.filter(We=>!We.isDeleted&&!We.isBlocked);i(Te.map(We=>({label:`${We.name1} ${We.name2||""}`,value:We._id,vnNo:We.vnNo||""})))}),Oe.get("/api/locations",ze).then(ut=>{console.log("Locations API response:",ut.data),Array.isArray(ut.data)?Fe(ut.data):ut.data&&Array.isArray(ut.data.locations)?Fe(ut.data.locations):Fe([])}).catch(ut=>{console.error("Failed to fetch locations:",ut),Fe([])}),console.log("location",T),Oe.get("/api/material",ze).then(ut=>{console.log("Fetched materials:",ut.data);const Te=ut.data.filter(We=>!We.isDeleted&&!We.isBlocked);l(Te),console.log("Filtered materials:",Te)}).catch(ut=>console.error("Failed to fetch materials:",ut))},[]);const Xe=Ye=>{h(Ye);const{buyerGroup:Le,materialGroup:ze,deliveryDate:ut,location:Te}=Ye.value;A(Te||""),P(Le||"");const We=Ye.value.items.map(Ge=>({...Ge,unit:Ge.unit||"",price:Ge.price||"",materialGroup:Ge.materialGroup||ze||"",deliveryDate:Ge.deliveryDate||ut||""}));E(We)},ct=(Ye,Le,ze)=>{const ut=[...D];ut[Ye][Le]=ze,E(ut)},xt=Ye=>{console.log("Opening modal for item at index:",Ye),X(Ye),re(!0)},Re=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date().toISOString().slice(0,10),price:0}])},[ht,At]=w.useState(!1),[_t,Wt]=w.useState("internal"),[Ke,ge]=w.useState(""),ve=async Ye=>{Ye.preventDefault(),At(!0)};w.useEffect(()=>{const Ye=D.reduce((Le,ze)=>{const ut=parseFloat(ze.price)||0,Te=parseFloat(ze.qty)||0;return Le+ut*Te},0);Y(Ye)},[D]);const xe=async()=>{const Ye=localStorage.getItem("selectedCompanyId"),Le=localStorage.getItem("financialYear"),ze={indentId:u?.value?.indentId,categoryId:u?.value?.categoryId,rfqCategoryId:m?.value,vendor:v,vendorName:b,quotationReference:c,validityDate:O,vnNo:k,companyId:Ye,financialYear:Le,note:C,buyerGroup:L,location:T,totalPrice:B,items:D,quotationGenType:_t,externalQuotationNumber:_t==="external"?Ke:null};console.log("Payload for submission:",ze);try{const ut=await Oe.post("/api/quotations/create",ze);alert("Quotation Created Successfully"),console.log(ut.data),At(!1)}catch(ut){console.error(ut),alert("Failed to create quotation")}},Ie=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Quotation Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>At(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Wt("internal"),xe()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Wt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),_t==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Ke,onChange:Ye=>{Ye.target.value.length<=50&&ge(Ye.target.value)},onKeyPress:Ye=>{Ye.key==="Enter"&&Ke.trim()&&xe()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[Ke.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:xe,disabled:!Ke.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Quotation"]})})]}),_t==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Quotation number will be auto-generated based on category and range count."})})]})]})})})]}),Ze=()=>{const[Ye,Le]=w.useState([]),[ze,ut]=w.useState("materialId"),[Te,We]=w.useState(""),Ge=_e=>{const st=_e.target.value;We(st);const wt=o.filter(rr=>(ze==="materialId"?rr.materialId:rr.description)?.toLowerCase().includes(st.toLowerCase()));Le(wt)},It=()=>{Le(o),We("")},Bt=()=>{Le([]),We("")},Ee=_e=>{if(console.log("selectedItemIndex when selecting:",U),U==null){console.error("No item selected for update");return}E(st=>{console.log("Previous items:",st);const wt=[...st];return wt[U]={...wt[U],materialId:_e.materialId,description:_e.description,materialGroup:_e.materialgroup||"",baseUnit:_e.baseUnit,orderUnit:_e.orderUnit},console.log("Updated items:",wt),wt}),re(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>re(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ze,onChange:_e=>ut(_e.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:ze==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Te,onChange:Ge})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:It,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ye.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Bt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ye.map((_e,st)=>a.jsxs("tr",{children:[a.jsx("td",{children:_e.materialId}),a.jsx("td",{children:_e.description}),a.jsx("td",{children:_e.baseUnit}),a.jsx("td",{children:_e.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ee(_e),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},st))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Te?`No materials found matching "${Te}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Ft=()=>{const[Ye,Le]=w.useState("indentId"),[ze,ut]=w.useState([]),[Te,We]=w.useState(""),Ge=Ee=>{const _e=Ee.target.value;We(_e);const st=e.filter(wt=>(Ye==="indentId"?wt?.value?.indentId:wt?.value?.categoryName)?.toLowerCase().includes(_e.toLowerCase()));ut(st)},It=()=>{ut(e),We("")},Bt=()=>{ut([]),We("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ue(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:Ee=>Le(Ee.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Te,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:It,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ze.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Bt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ze.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ze.map((Ee,_e)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ee.value.indentId})}),a.jsx("td",{children:Ee.value.categoryName}),a.jsx("td",{children:Ee.value.buyerGroup}),a.jsx("td",{children:Ee.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{Xe(Ee),ue(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},_e))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ue(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Qe=()=>{const[Ye,Le]=w.useState("name1"),[ze,ut]=w.useState([]),[Te,We]=w.useState(""),Ge=Ee=>{const _e=Ee.target.value;We(_e);const st=s.filter(wt=>(Ye==="vnNo"?wt.vnNo:wt.label)?.toLowerCase().includes(_e.toLowerCase()));ut(st)},It=()=>{ut(s),We("")},Bt=()=>{ut([]),We("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:Ee=>Le(Ee.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Te,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:It,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ze.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Bt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ze.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ze.map((Ee,_e)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ee.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ee.vnNo})}),a.jsx("td",{children:Ee.city||"-"}),a.jsx("td",{children:Ee.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(Ee.value),y(Ee.label),S(Ee.vnNo||""),V(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},_e))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Quotation"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:Ye=>{const Le=Ye.target.value;ce(Le);const ze=e.find(ut=>ut.indentId.toLowerCase()===Le.toLowerCase());h(ze||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ae(G),ue(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:Ye=>p(r.find(Le=>Le.value===Ye.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((Ye,Le)=>a.jsx("option",{value:Ye.value,children:Ye.label},Le))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:Ye=>{const Le=Ye.target.value;y(Le);const ze=s.find(ut=>ut.name.toLowerCase()===Le.toLowerCase());be(ze||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{V(!0),de(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Quotation Reference",value:c,onChange:Ye=>d(Ye.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:Ye=>A(Ye.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Ne)&&Ne.map((Ye,Le)=>a.jsx("option",{value:Ye.name||Ye._id||Ye,children:Ye.name||Ye.locationName||Ye},Le))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:Ye=>P(Ye.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:Ye=>Q(Ye.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:Ye=>N(Ye.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:ve,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((Ye,Le)=>a.jsxs("tr",{children:[a.jsx("td",{children:Le+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Ye.materialId}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>xt(Le),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Ye.description,onChange:ze=>ct(Le,"description",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Ye.qty,onChange:ze=>ct(Le,"qty",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Ye.baseUnit,onChange:ze=>ct(Le,"baseUnit",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Ye.orderUnit,onChange:ze=>ct(Le,"orderUnit",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Ye.materialGroup,onChange:ze=>ct(Le,"materialGroup",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ye.deliveryDate,onChange:ze=>ct(Le,"deliveryDate",ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Ye.price,onChange:ze=>{ze.target.value=ze.target.value.replace(/[^0-9.]/g,""),ct(Le,"price",ze.target.value)}})})]},Le))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:Re,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["",B.toFixed(2)]})]})})]})})})]})]}),z&&a.jsx(Ze,{}),K&&a.jsx(Ft,{}),M&&a.jsx(Qe,{}),ht&&a.jsx(Ie,{})]})]})})}function Vn(e){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}function VSe(e,t){if(Vn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QH(e){var t=VSe(e,"string");return Vn(t)=="symbol"?t:t+""}function Pb(e,t,r){return(t=QH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z6(Object(r),!0).forEach(function(n){Pb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qSe(e){if(Array.isArray(e))return e}function zSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function DD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function JH(e,t){if(e){if(typeof e=="string")return DD(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DD(e,t):void 0}}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gh(e,t){return qSe(e)||zSe(e,t)||JH(e,t)||HSe()}function gf(e,t){if(e==null)return{};var r,n,s=RSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var WSe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function GSe(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,s=n===void 0?!1:n,i=e.defaultValue,o=i===void 0?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,m=e.onMenuOpen,p=e.value,v=gf(e,WSe),g=w.useState(l!==void 0?l:r),b=Gh(g,2),y=b[0],C=b[1],N=w.useState(c!==void 0?c:s),k=Gh(N,2),S=k[0],D=k[1],E=w.useState(p!==void 0?p:o),T=Gh(E,2),A=T[0],L=T[1],P=w.useCallback(function(B,Y){typeof d=="function"&&d(B,Y),L(B)},[d]),O=w.useCallback(function(B,Y){var K;typeof u=="function"&&(K=u(B,Y)),C(K!==void 0?K:B)},[u]),Q=w.useCallback(function(){typeof m=="function"&&m(),D(!0)},[m]),z=w.useCallback(function(){typeof h=="function"&&h(),D(!1)},[h]),re=l!==void 0?l:y,U=c!==void 0?c:S,X=p!==void 0?p:A;return Kr(Kr({},v),{},{inputValue:re,menuIsOpen:U,onChange:P,onInputChange:O,onMenuClose:z,onMenuOpen:Q,value:X})}function YSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QH(n.key),n)}}function KSe(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ED(e,t)}function B2(e){return B2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B2(e)}function ZH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZH=function(){return!!e})()}function QSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JSe(e,t){if(t&&(Vn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QSe(e)}function ZSe(e){var t=ZH();return function(){var r,n=B2(e);if(t){var s=B2(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return JSe(this,r)}}function eCe(e){if(Array.isArray(e))return DD(e)}function tCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eT(e){return eCe(e)||tCe(e)||JH(e)||rCe()}function nCe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function aCe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var sCe=function(){function e(r){var n=this;this._insertTag=function(s){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,i),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(aCe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=nCe(s);try{i.insertRule(n,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},e}(),co="-ms-",U2="-moz-",ta="-webkit-",eW="comm",tT="rule",rT="decl",iCe="@import",tW="@keyframes",oCe="@layer",lCe=Math.abs,CS=String.fromCharCode,cCe=Object.assign;function dCe(e,t){return zi(e,0)^45?(((t<<2^zi(e,0))<<2^zi(e,1))<<2^zi(e,2))<<2^zi(e,3):0}function rW(e){return e.trim()}function uCe(e,t){return(e=t.exec(e))?e[0]:e}function ra(e,t,r){return e.replace(t,r)}function AD(e,t){return e.indexOf(t)}function zi(e,t){return e.charCodeAt(t)|0}function wy(e,t,r){return e.slice(t,r)}function ju(e){return e.length}function nT(e){return e.length}function Wj(e,t){return t.push(e),e}function hCe(e,t){return e.map(t).join("")}var kS=1,Pv=1,nW=0,dl=0,Qs=0,cg="";function _S(e,t,r,n,s,i,o){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:kS,column:Pv,length:o,return:""}}function mb(e,t){return cCe(_S("",null,null,"",null,null,0),e,{length:-e.length},t)}function fCe(){return Qs}function mCe(){return Qs=dl>0?zi(cg,--dl):0,Pv--,Qs===10&&(Pv=1,kS--),Qs}function Ql(){return Qs=dl<nW?zi(cg,dl++):0,Pv++,Qs===10&&(Pv=1,kS++),Qs}function Mu(){return zi(cg,dl)}function _N(){return dl}function l1(e,t){return wy(cg,e,t)}function Sy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aW(e){return kS=Pv=1,nW=ju(cg=e),dl=0,[]}function sW(e){return cg="",e}function EN(e){return rW(l1(dl-1,TD(e===91?e+2:e===40?e+1:e)))}function pCe(e){for(;(Qs=Mu())&&Qs<33;)Ql();return Sy(e)>2||Sy(Qs)>3?"":" "}function xCe(e,t){for(;--t&&Ql()&&!(Qs<48||Qs>102||Qs>57&&Qs<65||Qs>70&&Qs<97););return l1(e,_N()+(t<6&&Mu()==32&&Ql()==32))}function TD(e){for(;Ql();)switch(Qs){case e:return dl;case 34:case 39:e!==34&&e!==39&&TD(Qs);break;case 40:e===41&&TD(e);break;case 92:Ql();break}return dl}function vCe(e,t){for(;Ql()&&e+Qs!==57;)if(e+Qs===84&&Mu()===47)break;return"/*"+l1(t,dl-1)+"*"+CS(e===47?e:Ql())}function gCe(e){for(;!Sy(Mu());)Ql();return l1(e,dl)}function bCe(e){return sW(DN("",null,null,null,[""],e=aW(e),0,[0],e))}function DN(e,t,r,n,s,i,o,l,c){for(var d=0,u=0,h=o,m=0,p=0,v=0,g=1,b=1,y=1,C=0,N="",k=s,S=i,D=n,E=N;b;)switch(v=C,C=Ql()){case 40:if(v!=108&&zi(E,h-1)==58){AD(E+=ra(EN(C),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=EN(C);break;case 9:case 10:case 13:case 32:E+=pCe(v);break;case 92:E+=xCe(_N()-1,7);continue;case 47:switch(Mu()){case 42:case 47:Wj(yCe(vCe(Ql(),_N()),t,r),c);break;default:E+="/"}break;case 123*g:l[d++]=ju(E)*y;case 125*g:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:y==-1&&(E=ra(E,/\f/g,"")),p>0&&ju(E)-h&&Wj(p>32?r8(E+";",n,r,h-1):r8(ra(E," ","")+";",n,r,h-2),c);break;case 59:E+=";";default:if(Wj(D=t8(E,t,r,d,u,s,l,N,k=[],S=[],h),i),C===123)if(u===0)DN(E,t,D,D,k,i,h,l,S);else switch(m===99&&zi(E,3)===110?100:m){case 100:case 108:case 109:case 115:DN(e,D,D,n&&Wj(t8(e,D,D,0,0,s,l,N,s,k=[],h),S),s,S,h,l,n?k:S);break;default:DN(E,D,D,D,[""],S,0,l,S)}}d=u=p=0,g=y=1,N=E="",h=o;break;case 58:h=1+ju(E),p=v;default:if(g<1){if(C==123)--g;else if(C==125&&g++==0&&mCe()==125)continue}switch(E+=CS(C),C*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(ju(E)-1)*y,y=1;break;case 64:Mu()===45&&(E+=EN(Ql())),m=Mu(),u=h=ju(N=E+=gCe(_N())),C++;break;case 45:v===45&&ju(E)==2&&(g=0)}}return i}function t8(e,t,r,n,s,i,o,l,c,d,u){for(var h=s-1,m=s===0?i:[""],p=nT(m),v=0,g=0,b=0;v<n;++v)for(var y=0,C=wy(e,h+1,h=lCe(g=o[v])),N=e;y<p;++y)(N=rW(g>0?m[y]+" "+C:ra(C,/&\f/g,m[y])))&&(c[b++]=N);return _S(e,t,r,s===0?tT:l,c,d,u)}function yCe(e,t,r){return _S(e,t,r,eW,CS(fCe()),wy(e,2,-2),0)}function r8(e,t,r,n){return _S(e,t,r,rT,wy(e,0,n),wy(e,n+1,-1),n)}function lv(e,t){for(var r="",n=nT(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function jCe(e,t,r,n){switch(e.type){case oCe:if(e.children.length)break;case iCe:case rT:return e.return=e.return||e.value;case eW:return"";case tW:return e.return=e.value+"{"+lv(e.children,n)+"}";case tT:e.value=e.props.join(",")}return ju(r=lv(e.children,n))?e.return=e.value+"{"+r+"}":""}function NCe(e){var t=nT(e);return function(r,n,s,i){for(var o="",l=0;l<t;l++)o+=e[l](r,n,s,i)||"";return o}}function wCe(e){return function(t){t.root||(t=t.return)&&e(t)}}function SCe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var CCe=function(t,r,n){for(var s=0,i=0;s=i,i=Mu(),s===38&&i===12&&(r[n]=1),!Sy(i);)Ql();return l1(t,dl)},kCe=function(t,r){var n=-1,s=44;do switch(Sy(s)){case 0:s===38&&Mu()===12&&(r[n]=1),t[n]+=CCe(dl-1,r,n);break;case 2:t[n]+=EN(s);break;case 4:if(s===44){t[++n]=Mu()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=CS(s)}while(s=Ql());return t},_Ce=function(t,r){return sW(kCe(aW(t),r))},n8=new WeakMap,ECe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!n8.get(n))&&!s){n8.set(t,!0);for(var i=[],o=_Ce(r,i),l=n.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},DCe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function iW(e,t){switch(dCe(e,t)){case 5103:return ta+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ta+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ta+e+U2+e+co+e+e;case 6828:case 4268:return ta+e+co+e+e;case 6165:return ta+e+co+"flex-"+e+e;case 5187:return ta+e+ra(e,/(\w+).+(:[^]+)/,ta+"box-$1$2"+co+"flex-$1$2")+e;case 5443:return ta+e+co+"flex-item-"+ra(e,/flex-|-self/,"")+e;case 4675:return ta+e+co+"flex-line-pack"+ra(e,/align-content|flex-|-self/,"")+e;case 5548:return ta+e+co+ra(e,"shrink","negative")+e;case 5292:return ta+e+co+ra(e,"basis","preferred-size")+e;case 6060:return ta+"box-"+ra(e,"-grow","")+ta+e+co+ra(e,"grow","positive")+e;case 4554:return ta+ra(e,/([^-])(transform)/g,"$1"+ta+"$2")+e;case 6187:return ra(ra(ra(e,/(zoom-|grab)/,ta+"$1"),/(image-set)/,ta+"$1"),e,"")+e;case 5495:case 3959:return ra(e,/(image-set\([^]*)/,ta+"$1$`$1");case 4968:return ra(ra(e,/(.+:)(flex-)?(.*)/,ta+"box-pack:$3"+co+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ta+e+e;case 4095:case 3583:case 4068:case 2532:return ra(e,/(.+)-inline(.+)/,ta+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ju(e)-1-t>6)switch(zi(e,t+1)){case 109:if(zi(e,t+4)!==45)break;case 102:return ra(e,/(.+:)(.+)-([^]+)/,"$1"+ta+"$2-$3$1"+U2+(zi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~AD(e,"stretch")?iW(ra(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(zi(e,t+1)!==115)break;case 6444:switch(zi(e,ju(e)-3-(~AD(e,"!important")&&10))){case 107:return ra(e,":",":"+ta)+e;case 101:return ra(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ta+(zi(e,14)===45?"inline-":"")+"box$3$1"+ta+"$2$3$1"+co+"$2box$3")+e}break;case 5936:switch(zi(e,t+11)){case 114:return ta+e+co+ra(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ta+e+co+ra(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ta+e+co+ra(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ta+e+co+e+e}return e}var ACe=function(t,r,n,s){if(t.length>-1&&!t.return)switch(t.type){case rT:t.return=iW(t.value,t.length);break;case tW:return lv([mb(t,{value:ra(t.value,"@","@"+ta)})],s);case tT:if(t.length)return hCe(t.props,function(i){switch(uCe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lv([mb(t,{props:[ra(i,/:(read-\w+)/,":"+U2+"$1")]})],s);case"::placeholder":return lv([mb(t,{props:[ra(i,/:(plac\w+)/,":"+ta+"input-$1")]}),mb(t,{props:[ra(i,/:(plac\w+)/,":"+U2+"$1")]}),mb(t,{props:[ra(i,/:(plac\w+)/,co+"input-$1")]})],s)}return""})}},TCe=[ACe],ICe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||TCe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;l.push(g)});var c,d=[ECe,DCe];{var u,h=[jCe,wCe(function(g){u.insert(g)})],m=NCe(d.concat(s,h)),p=function(b){return lv(bCe(b),m)};c=function(b,y,C,N){u=C,p(b?b+"{"+y.styles+"}":y.styles),N&&(v.inserted[y.name]=!0)}}var v={key:r,sheet:new sCe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},cE={exports:{}},oa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8;function PCe(){if(a8)return oa;a8=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(S){if(typeof S=="object"&&S!==null){var D=S.$$typeof;switch(D){case t:switch(S=S.type,S){case c:case d:case n:case i:case s:case h:return S;default:switch(S=S&&S.$$typeof,S){case l:case u:case v:case p:case o:return S;default:return D}}case r:return D}}}function k(S){return N(S)===d}return oa.AsyncMode=c,oa.ConcurrentMode=d,oa.ContextConsumer=l,oa.ContextProvider=o,oa.Element=t,oa.ForwardRef=u,oa.Fragment=n,oa.Lazy=v,oa.Memo=p,oa.Portal=r,oa.Profiler=i,oa.StrictMode=s,oa.Suspense=h,oa.isAsyncMode=function(S){return k(S)||N(S)===c},oa.isConcurrentMode=k,oa.isContextConsumer=function(S){return N(S)===l},oa.isContextProvider=function(S){return N(S)===o},oa.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},oa.isForwardRef=function(S){return N(S)===u},oa.isFragment=function(S){return N(S)===n},oa.isLazy=function(S){return N(S)===v},oa.isMemo=function(S){return N(S)===p},oa.isPortal=function(S){return N(S)===r},oa.isProfiler=function(S){return N(S)===i},oa.isStrictMode=function(S){return N(S)===s},oa.isSuspense=function(S){return N(S)===h},oa.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===d||S===i||S===s||S===h||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===v||S.$$typeof===p||S.$$typeof===o||S.$$typeof===l||S.$$typeof===u||S.$$typeof===b||S.$$typeof===y||S.$$typeof===C||S.$$typeof===g)},oa.typeOf=N,oa}var s8;function OCe(){return s8||(s8=1,cE.exports=PCe()),cE.exports}var dE,i8;function MCe(){if(i8)return dE;i8=1;var e=OCe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=s;function o(v){return e.isMemo(v)?s:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function p(v,g,b){if(typeof g!="string"){if(m){var y=h(g);y&&y!==m&&p(v,y,b)}var C=c(g);d&&(C=C.concat(d(g)));for(var N=o(v),k=o(g),S=0;S<C.length;++S){var D=C[S];if(!r[D]&&!(b&&b[D])&&!(k&&k[D])&&!(N&&N[D])){var E=u(g,D);try{l(v,D,E)}catch{}}}}return v}return dE=p,dE}MCe();var RCe=!0;function FCe(e,t,r){var n="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(n+=s+" ")}),n}var oW=function(t,r,n){var s=t.key+"-"+r.name;(n===!1||RCe===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},LCe=function(t,r,n){oW(t,r,n);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function BCe(e){for(var t=0,r,n=0,s=e.length;s>=4;++n,s-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var UCe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$Ce=/[A-Z]|^ms/g,VCe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lW=function(t){return t.charCodeAt(1)===45},o8=function(t){return t!=null&&typeof t!="boolean"},uE=SCe(function(e){return lW(e)?e:e.replace($Ce,"-$&").toLowerCase()}),l8=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(VCe,function(n,s,i){return Nu={name:s,styles:i,next:Nu},s})}return UCe[t]!==1&&!lW(t)&&typeof r=="number"&&r!==0?r+"px":r};function Cy(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Nu={name:s.name,styles:s.styles,next:Nu},s.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Nu={name:o.name,styles:o.styles,next:Nu},o=o.next;var l=i.styles+";";return l}return qCe(e,t,r)}case"function":{if(e!==void 0){var c=Nu,d=r(e);return Nu=c,Cy(e,t,d)}break}}var u=r;return u}function qCe(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=Cy(e,t,r[s])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var l=o;o8(l)&&(n+=uE(i)+":"+l8(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)o8(o[c])&&(n+=uE(i)+":"+l8(i,o[c])+";");else{var d=Cy(e,t,o);switch(i){case"animation":case"animationName":{n+=uE(i)+":"+d+";";break}default:n+=i+"{"+d+"}"}}}return n}var c8=/label:\s*([^\s;{]+)\s*(;|$)/g,Nu;function cW(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,s="";Nu=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,s+=Cy(r,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=Cy(r,t,e[l]),n){var c=i;s+=c[l]}c8.lastIndex=0;for(var d="",u;(u=c8.exec(s))!==null;)d+="-"+u[1];var h=BCe(s)+d;return{name:h,styles:s,next:Nu}}var zCe=function(t){return t()},HCe=VN.useInsertionEffect?VN.useInsertionEffect:!1,WCe=HCe||zCe,dW=w.createContext(typeof HTMLElement<"u"?ICe({key:"css"}):null);dW.Provider;var GCe=function(t){return w.forwardRef(function(r,n){var s=w.useContext(dW);return t(r,s,n)})},YCe=w.createContext({}),aT={}.hasOwnProperty,ID="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KCe=function(t,r){var n={};for(var s in r)aT.call(r,s)&&(n[s]=r[s]);return n[ID]=t,n},XCe=function(t){var r=t.cache,n=t.serialized,s=t.isStringTag;return oW(r,n,s),WCe(function(){return LCe(r,n,s)}),null},QCe=GCe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=e[ID],i=[n],o="";typeof e.className=="string"?o=FCe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=cW(i,void 0,w.useContext(YCe));o+=t.key+"-"+l.name;var c={};for(var d in e)aT.call(e,d)&&d!=="css"&&d!==ID&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),w.createElement(w.Fragment,null,w.createElement(XCe,{cache:t,serialized:l,isStringTag:typeof s=="string"}),w.createElement(s,c))}),JCe=QCe,Wr=function(t,r){var n=arguments;if(r==null||!aT.call(r,"css"))return w.createElement.apply(void 0,n);var s=n.length,i=new Array(s);i[0]=JCe,i[1]=KCe(t,r);for(var o=2;o<s;o++)i[o]=n[o];return w.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Wr||(Wr={}));function sT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return cW(t)}function ZCe(){var e=sT.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function eke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Ov=Math.min,hx=Math.max,$2=Math.round,Gj=Math.floor,Ru=e=>({x:e,y:e}),tke={left:"right",right:"left",bottom:"top",top:"bottom"},rke={start:"end",end:"start"};function nke(e,t,r){return hx(e,Ov(t,r))}function ES(e,t){return typeof e=="function"?e(t):e}function Mv(e){return e.split("-")[0]}function c1(e){return e.split("-")[1]}function ake(e){return e==="x"?"y":"x"}function iT(e){return e==="y"?"height":"width"}const ske=new Set(["top","bottom"]);function Jp(e){return ske.has(Mv(e))?"y":"x"}function oT(e){return ake(Jp(e))}function ike(e,t,r){r===void 0&&(r=!1);const n=c1(e),s=oT(e),i=iT(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=V2(o)),[o,V2(o)]}function oke(e){const t=V2(e);return[PD(e),t,PD(t)]}function PD(e){return e.replace(/start|end/g,t=>rke[t])}const d8=["left","right"],u8=["right","left"],lke=["top","bottom"],cke=["bottom","top"];function dke(e,t,r){switch(e){case"top":case"bottom":return r?t?u8:d8:t?d8:u8;case"left":case"right":return t?lke:cke;default:return[]}}function uke(e,t,r,n){const s=c1(e);let i=dke(Mv(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(PD)))),i}function V2(e){return e.replace(/left|right|bottom|top/g,t=>tke[t])}function hke(e){return{top:0,right:0,bottom:0,left:0,...e}}function uW(e){return typeof e!="number"?hke(e):{top:e,right:e,bottom:e,left:e}}function q2(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function h8(e,t,r){let{reference:n,floating:s}=e;const i=Jp(t),o=oT(t),l=iT(o),c=Mv(t),d=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(c1(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const fke=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=h8(d,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:C,y:N,data:k,reset:S}=await y({x:u,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=C??u,h=N??h,p={...p,[b]:{...p[b],...k}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:h}=h8(d,m,c)),g=-1)}return{x:u,y:h,placement:m,strategy:s,middlewareData:p}};async function mke(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ES(t,e),v=uW(p),b=l[m?h==="floating"?"reference":"floating":h],y=q2(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),C=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},S=q2(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:N,strategy:c}):C);return{top:(y.top-S.top+v.top)/k.y,bottom:(S.bottom-y.bottom+v.bottom)/k.y,left:(y.left-S.left+v.left)/k.x,right:(S.right-y.right+v.right)/k.x}}const pke=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ES(e,t)||{};if(d==null)return{};const h=uW(u),m={x:r,y:n},p=oT(s),v=iT(p),g=await o.getDimensions(d),b=p==="y",y=b?"top":"left",C=b?"bottom":"right",N=b?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[p]-m[p]-i.floating[v],S=m[p]-i.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=D?D[N]:0;(!E||!await(o.isElement==null?void 0:o.isElement(D)))&&(E=l.floating[N]||i.floating[v]);const T=k/2-S/2,A=E/2-g[v]/2-1,L=Ov(h[y],A),P=Ov(h[C],A),O=L,Q=E-g[v]-P,z=E/2-g[v]/2+T,re=nke(O,z,Q),U=!c.arrow&&c1(s)!=null&&z!==re&&i.reference[v]/2-(z<O?L:P)-g[v]/2<0,X=U?z<O?z-O:z-Q:0;return{[p]:m[p]+X,data:{[p]:re,centerOffset:z-re-X,...U&&{alignmentOffset:X}},reset:U}}}),xke=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=ES(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=Mv(s),C=Jp(l),N=Mv(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(N||!g?[V2(l)]:oke(l)),D=v!=="none";!m&&D&&S.push(...uke(l,g,v,k));const E=[l,...S],T=await mke(t,b),A=[];let L=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(T[y]),h){const z=ike(s,o,k);A.push(T[z[0]],T[z[1]])}if(L=[...L,{placement:s,overflows:A}],!A.every(z=>z<=0)){var P,O;const z=(((P=i.flip)==null?void 0:P.index)||0)+1,re=E[z];if(re&&(!(h==="alignment"?C!==Jp(re):!1)||L.every(B=>Jp(B.placement)===C?B.overflows[0]>0:!0)))return{data:{index:z,overflows:L},reset:{placement:re}};let U=(O=L.filter(X=>X.overflows[0]<=0).sort((X,B)=>X.overflows[1]-B.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(p){case"bestFit":{var Q;const X=(Q=L.filter(B=>{if(D){const Y=Jp(B.placement);return Y===C||Y==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(Y=>Y>0).reduce((Y,K)=>Y+K,0)]).sort((B,Y)=>B[1]-Y[1])[0])==null?void 0:Q[0];X&&(U=X);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}},vke=new Set(["left","top"]);async function gke(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Mv(r),l=c1(r),c=Jp(r)==="y",d=vke.has(o)?-1:1,u=i&&c?-1:1,h=ES(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const bke=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await gke(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function DS(){return typeof window<"u"}function dg(e){return hW(e)?(e.nodeName||"").toLowerCase():"#document"}function Jl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qu(e){var t;return(t=(hW(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hW(e){return DS()?e instanceof Node||e instanceof Jl(e).Node:!1}function Lo(e){return DS()?e instanceof Element||e instanceof Jl(e).Element:!1}function qu(e){return DS()?e instanceof HTMLElement||e instanceof Jl(e).HTMLElement:!1}function f8(e){return!DS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jl(e).ShadowRoot}const yke=new Set(["inline","contents"]);function d1(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Hc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!yke.has(s)}const jke=new Set(["table","td","th"]);function Nke(e){return jke.has(dg(e))}const wke=[":popover-open",":modal"];function AS(e){return wke.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ske=["transform","translate","scale","rotate","perspective"],Cke=["transform","translate","scale","rotate","perspective","filter"],kke=["paint","layout","strict","content"];function lT(e){const t=cT(),r=Lo(e)?Hc(e):e;return Ske.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Cke.some(n=>(r.willChange||"").includes(n))||kke.some(n=>(r.contain||"").includes(n))}function _ke(e){let t=Vm(e);for(;qu(t)&&!Rv(t);){if(lT(t))return t;if(AS(t))return null;t=Vm(t)}return null}function cT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Eke=new Set(["html","body","#document"]);function Rv(e){return Eke.has(dg(e))}function Hc(e){return Jl(e).getComputedStyle(e)}function TS(e){return Lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vm(e){if(dg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f8(e)&&e.host||Qu(e);return f8(t)?t.host:t}function fW(e){const t=Vm(e);return Rv(t)?e.ownerDocument?e.ownerDocument.body:e.body:qu(t)&&d1(t)?t:fW(t)}function ky(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=fW(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=Jl(s);if(i){const l=OD(o);return t.concat(o,o.visualViewport||[],d1(s)?s:[],l&&r?ky(l):[])}return t.concat(s,ky(s,[],r))}function OD(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mW(e){const t=Hc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=qu(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=$2(r)!==i||$2(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function dT(e){return Lo(e)?e:e.contextElement}function cv(e){const t=dT(e);if(!qu(t))return Ru(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=mW(t);let o=(i?$2(r.width):r.width)/n,l=(i?$2(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Dke=Ru(0);function pW(e){const t=Jl(e);return!cT()||!t.visualViewport?Dke:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ake(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Jl(e)?!1:t}function Ex(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=dT(e);let o=Ru(1);t&&(n?Lo(n)&&(o=cv(n)):o=cv(e));const l=Ake(i,r,n)?pW(i):Ru(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const m=Jl(i),p=n&&Lo(n)?Jl(n):n;let v=m,g=OD(v);for(;g&&n&&p!==v;){const b=cv(g),y=g.getBoundingClientRect(),C=Hc(g),N=y.left+(g.clientLeft+parseFloat(C.paddingLeft))*b.x,k=y.top+(g.clientTop+parseFloat(C.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=N,d+=k,v=Jl(g),g=OD(v)}}return q2({width:u,height:h,x:c,y:d})}function uT(e,t){const r=TS(e).scrollLeft;return t?t.left+r:Ex(Qu(e)).left+r}function xW(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:uT(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function Tke(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=Qu(n),l=t?AS(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Ru(1);const u=Ru(0),h=qu(n);if((h||!h&&!i)&&((dg(n)!=="body"||d1(o))&&(c=TS(n)),qu(n))){const p=Ex(n);d=cv(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const m=o&&!h&&!i?xW(o,c,!0):Ru(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function Ike(e){return Array.from(e.getClientRects())}function Pke(e){const t=Qu(e),r=TS(e),n=e.ownerDocument.body,s=hx(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=hx(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+uT(e);const l=-r.scrollTop;return Hc(n).direction==="rtl"&&(o+=hx(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Oke(e,t){const r=Jl(e),n=Qu(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=cT();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const Mke=new Set(["absolute","fixed"]);function Rke(e,t){const r=Ex(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=qu(e)?cv(e):Ru(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function m8(e,t,r){let n;if(t==="viewport")n=Oke(e,r);else if(t==="document")n=Pke(Qu(e));else if(Lo(t))n=Rke(t,r);else{const s=pW(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return q2(n)}function vW(e,t){const r=Vm(e);return r===t||!Lo(r)||Rv(r)?!1:Hc(r).position==="fixed"||vW(r,t)}function Fke(e,t){const r=t.get(e);if(r)return r;let n=ky(e,[],!1).filter(l=>Lo(l)&&dg(l)!=="body"),s=null;const i=Hc(e).position==="fixed";let o=i?Vm(e):e;for(;Lo(o)&&!Rv(o);){const l=Hc(o),c=lT(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&Mke.has(s.position)||d1(o)&&!c&&vW(e,o))?n=n.filter(u=>u!==o):s=l,o=Vm(o)}return t.set(e,n),n}function Lke(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?AS(t)?[]:Fke(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=m8(t,u,s);return d.top=hx(h.top,d.top),d.right=Ov(h.right,d.right),d.bottom=Ov(h.bottom,d.bottom),d.left=hx(h.left,d.left),d},m8(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Bke(e){const{width:t,height:r}=mW(e);return{width:t,height:r}}function Uke(e,t,r){const n=qu(t),s=Qu(t),i=r==="fixed",o=Ex(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ru(0);function d(){c.x=uT(s)}if(n||!n&&!i)if((dg(t)!=="body"||d1(s))&&(l=TS(t)),n){const p=Ex(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();i&&!n&&s&&d();const u=s&&!n&&!i?xW(s,l):Ru(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function hE(e){return Hc(e).position==="static"}function p8(e,t){if(!qu(e)||Hc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Qu(e)===r&&(r=r.ownerDocument.body),r}function gW(e,t){const r=Jl(e);if(AS(e))return r;if(!qu(e)){let s=Vm(e);for(;s&&!Rv(s);){if(Lo(s)&&!hE(s))return s;s=Vm(s)}return r}let n=p8(e,t);for(;n&&Nke(n)&&hE(n);)n=p8(n,t);return n&&Rv(n)&&hE(n)&&!lT(n)?r:n||_ke(e)||r}const $ke=async function(e){const t=this.getOffsetParent||gW,r=this.getDimensions,n=await r(e.floating);return{reference:Uke(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Vke(e){return Hc(e).direction==="rtl"}const qke={convertOffsetParentRelativeRectToViewportRelativeRect:Tke,getDocumentElement:Qu,getClippingRect:Lke,getOffsetParent:gW,getElementRects:$ke,getClientRects:Ike,getDimensions:Bke,getScale:cv,isElement:Lo,isRTL:Vke};function bW(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zke(e,t){let r=null,n;const s=Qu(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:p}=d;if(l||t(),!m||!p)return;const v=Gj(h),g=Gj(s.clientWidth-(u+m)),b=Gj(s.clientHeight-(h+p)),y=Gj(u),N={rootMargin:-v+"px "+-g+"px "+-b+"px "+-y+"px",threshold:hx(0,Ov(1,c))||1};let k=!0;function S(D){const E=D[0].intersectionRatio;if(E!==c){if(!k)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!bW(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(S,{...N,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,N)}r.observe(e)}return o(!0),i}function yW(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=dT(e),u=s||i?[...d?ky(d):[],...ky(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=d&&l?zke(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[C]=y;C&&C.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let v,g=c?Ex(e):null;c&&b();function b(){const y=Ex(e);g&&!bW(g,y)&&r(),g=y,v=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(C=>{s&&C.removeEventListener("scroll",r),i&&C.removeEventListener("resize",r)}),h?.(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Hke=bke,Wke=xke,x8=pke,Gke=(e,t,r)=>{const n=new Map,s={platform:qke,...r},i={...s.platform,_c:n};return fke(e,t,{...s,platform:i})};var MD=w.useLayoutEffect,Yke=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],z2=function(){};function Kke(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Xke(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];var i=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(Kke(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var v8=function(t){return s_e(t)?t.filter(Boolean):Vn(t)==="object"&&t!==null?[t]:[]},jW=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=gf(t,Yke);return Kr({},r)},Ns=function(t,r,n){var s=t.cx,i=t.getStyles,o=t.getClassNames,l=t.className;return{css:i(r,t),className:s(n??{},o(r,t),l)}};function IS(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Qke(e){return IS(e)?window.innerHeight:e.clientHeight}function NW(e){return IS(e)?window.pageYOffset:e.scrollTop}function H2(e,t){if(IS(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Jke(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function Zke(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Yj(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z2,s=NW(e),i=t-s,o=10,l=0;function c(){l+=o;var d=Zke(l,s,i,r);H2(e,d),l<r?window.requestAnimationFrame(c):n(e)}c()}function g8(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),s=t.offsetHeight/3;n.bottom+s>r.bottom?H2(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):n.top-s<r.top&&H2(e,Math.max(t.offsetTop-s,0))}function e_e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function b8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function t_e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var wW=!1,r_e={get passive(){return wW=!0}},Kj=typeof window<"u"?window:{};Kj.addEventListener&&Kj.removeEventListener&&(Kj.addEventListener("p",z2,r_e),Kj.removeEventListener("p",z2,!1));var n_e=wW;function a_e(e){return e!=null}function s_e(e){return Array.isArray(e)}function Xj(e,t,r){return e?t:r}var i_e=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var i=Object.entries(t).filter(function(o){var l=Gh(o,1),c=l[0];return!n.includes(c)});return i.reduce(function(o,l){var c=Gh(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},o_e=["children","innerProps"],l_e=["children","innerProps"];function c_e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,s=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=Jke(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),h=u.height,m=r.getBoundingClientRect(),p=m.bottom,v=m.height,g=m.top,b=r.offsetParent.getBoundingClientRect(),y=b.top,C=o?window.innerHeight:Qke(c),N=NW(c),k=parseInt(getComputedStyle(r).marginBottom,10),S=parseInt(getComputedStyle(r).marginTop,10),D=y-S,E=C-g,T=D+N,A=h-N-g,L=p-C+N+k,P=N+g-S,O=160;switch(s){case"auto":case"bottom":if(E>=v)return{placement:"bottom",maxHeight:t};if(A>=v&&!o)return i&&Yj(c,L,O),{placement:"bottom",maxHeight:t};if(!o&&A>=n||o&&E>=n){i&&Yj(c,L,O);var Q=o?E-k:A-k;return{placement:"bottom",maxHeight:Q}}if(s==="auto"||o){var z=t,re=o?D:T;return re>=n&&(z=Math.min(re-k-l,t)),{placement:"top",maxHeight:z}}if(s==="bottom")return i&&H2(c,L),{placement:"bottom",maxHeight:t};break;case"top":if(D>=v)return{placement:"top",maxHeight:t};if(T>=v&&!o)return i&&Yj(c,P,O),{placement:"top",maxHeight:t};if(!o&&T>=n||o&&D>=n){var U=t;return(!o&&T>=n||o&&D>=n)&&(U=o?D-S:T-S),i&&Yj(c,P,O),{placement:"top",maxHeight:U}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return d}function d_e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var SW=function(t){return t==="auto"?"bottom":t},u_e=function(t,r){var n,s=t.placement,i=t.theme,o=i.borderRadius,l=i.spacing,c=i.colors;return Kr((n={label:"menu"},Pb(n,d_e(s),"100%"),Pb(n,"position","absolute"),Pb(n,"width","100%"),Pb(n,"zIndex",1),n),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},CW=w.createContext(null),h_e=function(t){var r=t.children,n=t.minMenuHeight,s=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=w.useContext(CW)||{},u=d.setPortalPlacement,h=w.useRef(null),m=w.useState(s),p=Gh(m,2),v=p[0],g=p[1],b=w.useState(null),y=Gh(b,2),C=y[0],N=y[1],k=c.spacing.controlHeight;return MD(function(){var S=h.current;if(S){var D=o==="fixed",E=l&&!D,T=c_e({maxHeight:s,menuEl:S,minHeight:n,placement:i,shouldScroll:E,isFixedPosition:D,controlHeight:k});g(T.maxHeight),N(T.placement),u?.(T.placement)}},[s,i,o,l,n,u,k]),r({ref:h,placerProps:Kr(Kr({},t),{},{placement:C||SW(i),maxHeight:v})})},f_e=function(t){var r=t.children,n=t.innerRef,s=t.innerProps;return Wr("div",tn({},Ns(t,"menu",{menu:!0}),{ref:n},s),r)},m_e=f_e,p_e=function(t,r){var n=t.maxHeight,s=t.theme.spacing.baseUnit;return Kr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},x_e=function(t){var r=t.children,n=t.innerProps,s=t.innerRef,i=t.isMulti;return Wr("div",tn({},Ns(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},n),r)},kW=function(t,r){var n=t.theme,s=n.spacing.baseUnit,i=n.colors;return Kr({textAlign:"center"},r?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},v_e=kW,g_e=kW,b_e=function(t){var r=t.children,n=r===void 0?"No options":r,s=t.innerProps,i=gf(t,o_e);return Wr("div",tn({},Ns(Kr(Kr({},i),{},{children:n,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),n)},y_e=function(t){var r=t.children,n=r===void 0?"Loading...":r,s=t.innerProps,i=gf(t,l_e);return Wr("div",tn({},Ns(Kr(Kr({},i),{},{children:n,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),n)},j_e=function(t){var r=t.rect,n=t.offset,s=t.position;return{left:r.left,position:s,top:n,width:r.width,zIndex:1}},N_e=function(t){var r=t.appendTo,n=t.children,s=t.controlElement,i=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=w.useRef(null),d=w.useRef(null),u=w.useState(SW(o)),h=Gh(u,2),m=h[0],p=h[1],v=w.useMemo(function(){return{setPortalPlacement:p}},[]),g=w.useState(null),b=Gh(g,2),y=b[0],C=b[1],N=w.useCallback(function(){if(s){var E=e_e(s),T=l==="fixed"?0:window.pageYOffset,A=E[m]+T;(A!==y?.offset||E.left!==y?.rect.left||E.width!==y?.rect.width)&&C({offset:A,rect:E})}},[s,l,m,y?.offset,y?.rect.left,y?.rect.width]);MD(function(){N()},[N]);var k=w.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),s&&c.current&&(d.current=yW(s,c.current,N,{elementResize:"ResizeObserver"in window}))},[s,N]);MD(function(){k()},[k]);var S=w.useCallback(function(E){c.current=E,k()},[k]);if(!r&&l!=="fixed"||!y)return null;var D=Wr("div",tn({ref:S},Ns(Kr(Kr({},t),{},{offset:y.offset,position:l,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),n);return Wr(CW.Provider,{value:v},r?Ly.createPortal(D,r):D)},w_e=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},S_e=function(t){var r=t.children,n=t.innerProps,s=t.isDisabled,i=t.isRtl;return Wr("div",tn({},Ns(t,"container",{"--is-disabled":s,"--is-rtl":i}),n),r)},C_e=function(t,r){var n=t.theme.spacing,s=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Kr({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},k_e=function(t){var r=t.children,n=t.innerProps,s=t.isMulti,i=t.hasValue;return Wr("div",tn({},Ns(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),n),r)},__e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},E_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",tn({},Ns(t,"indicatorsContainer",{indicators:!0}),n),r)},y8,D_e=["size"],A_e=["innerProps","isRtl","size"],T_e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},_W=function(t){var r=t.size,n=gf(t,D_e);return Wr("svg",tn({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:T_e},n))},hT=function(t){return Wr(_W,tn({size:20},t),Wr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},EW=function(t){return Wr(_W,tn({size:20},t),Wr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},DW=function(t,r){var n=t.isFocused,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Kr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?o.neutral60:o.neutral20,padding:i*2,":hover":{color:n?o.neutral80:o.neutral40}})},I_e=DW,P_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",tn({},Ns(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||Wr(EW,null))},O_e=DW,M_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",tn({},Ns(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||Wr(hT,null))},R_e=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Kr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},F_e=function(t){var r=t.innerProps;return Wr("span",tn({},r,Ns(t,"indicatorSeparator",{"indicator-separator":!0})))},L_e=ZCe(y8||(y8=eke([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),B_e=function(t,r){var n=t.isFocused,s=t.size,i=t.theme,o=i.colors,l=i.spacing.baseUnit;return Kr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?o.neutral60:o.neutral20,padding:l*2})},fE=function(t){var r=t.delay,n=t.offset;return Wr("span",{css:sT({animation:"".concat(L_e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},U_e=function(t){var r=t.innerProps,n=t.isRtl,s=t.size,i=s===void 0?4:s,o=gf(t,A_e);return Wr("div",tn({},Ns(Kr(Kr({},o),{},{innerProps:r,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Wr(fE,{delay:0,offset:n}),Wr(fE,{delay:160,offset:!0}),Wr(fE,{delay:320,offset:!n}))},$_e=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.theme,o=i.colors,l=i.borderRadius,c=i.spacing;return Kr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:s?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},V_e=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return Wr("div",tn({ref:i},Ns(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":s,"control--menu-is-open":l}),o,{"aria-disabled":n||void 0}),r)},q_e=V_e,z_e=["data"],H_e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},W_e=function(t){var r=t.children,n=t.cx,s=t.getStyles,i=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,h=t.selectProps;return Wr("div",tn({},Ns(t,"group",{group:!0}),c),Wr(o,tn({},l,{selectProps:h,theme:u,getStyles:s,getClassNames:i,cx:n}),d),Wr("div",null,r))},G_e=function(t,r){var n=t.theme,s=n.colors,i=n.spacing;return Kr({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},Y_e=function(t){var r=jW(t);r.data;var n=gf(r,z_e);return Wr("div",tn({},Ns(t,"groupHeading",{"group-heading":!0}),n))},K_e=W_e,X_e=["innerRef","isDisabled","isHidden","inputClassName"],Q_e=function(t,r){var n=t.isDisabled,s=t.value,i=t.theme,o=i.spacing,l=i.colors;return Kr(Kr({visibility:n?"hidden":"visible",transform:s?"translateZ(0)":""},J_e),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},AW={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},J_e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Kr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AW)},Z_e=function(t){return Kr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},AW)},eEe=function(t){var r=t.cx,n=t.value,s=jW(t),i=s.innerRef,o=s.isDisabled,l=s.isHidden,c=s.inputClassName,d=gf(s,X_e);return Wr("div",tn({},Ns(t,"input",{"input-container":!0}),{"data-value":n||""}),Wr("input",tn({className:r({input:!0},c),ref:i,style:Z_e(l),disabled:o},d)))},tEe=eEe,rEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors;return Kr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},nEe=function(t,r){var n=t.theme,s=n.borderRadius,i=n.colors,o=t.cropWithEllipsis;return Kr({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},aEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors,l=t.isFocused;return Kr({alignItems:"center",display:"flex"},r?{}:{borderRadius:i/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},TW=function(t){var r=t.children,n=t.innerProps;return Wr("div",n,r)},sEe=TW,iEe=TW;function oEe(e){var t=e.children,r=e.innerProps;return Wr("div",tn({role:"button"},r),t||Wr(hT,{size:14}))}var lEe=function(t){var r=t.children,n=t.components,s=t.data,i=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=n.Container,u=n.Label,h=n.Remove;return Wr(d,{data:s,innerProps:Kr(Kr({},Ns(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},Wr(u,{data:s,innerProps:Kr({},Ns(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),Wr(h,{data:s,innerProps:Kr(Kr({},Ns(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},cEe=lEe,dEe=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Kr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:n?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:i?c.primary:c.primary50}})},uEe=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.innerRef,l=t.innerProps;return Wr("div",tn({},Ns(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":n},l),r)},hEe=uEe,fEe=function(t,r){var n=t.theme,s=n.spacing,i=n.colors;return Kr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},mEe=function(t){var r=t.children,n=t.innerProps;return Wr("div",tn({},Ns(t,"placeholder",{placeholder:!0}),n),r)},pEe=mEe,xEe=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing,o=s.colors;return Kr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},vEe=function(t){var r=t.children,n=t.isDisabled,s=t.innerProps;return Wr("div",tn({},Ns(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),s),r)},gEe=vEe,bEe={ClearIndicator:M_e,Control:q_e,DropdownIndicator:P_e,DownChevron:EW,CrossIcon:hT,Group:K_e,GroupHeading:Y_e,IndicatorsContainer:E_e,IndicatorSeparator:F_e,Input:tEe,LoadingIndicator:U_e,Menu:m_e,MenuList:x_e,MenuPortal:N_e,LoadingMessage:y_e,NoOptionsMessage:b_e,MultiValue:cEe,MultiValueContainer:sEe,MultiValueLabel:iEe,MultiValueRemove:oEe,Option:hEe,Placeholder:pEe,SelectContainer:S_e,SingleValue:gEe,ValueContainer:k_e},yEe=function(t){return Kr(Kr({},bEe),t.components)},j8=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jEe(e,t){return!!(e===t||j8(e)&&j8(t))}function NEe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!jEe(e[r],t[r]))return!1;return!0}function wEe(e,t){t===void 0&&(t=NEe);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}var SEe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},CEe=function(t){return Wr("span",tn({css:SEe},t))},N8=CEe,kEe={guidance:function(t){var r=t.isSearchable,n=t.isMulti,s=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,s=n===void 0?"":n,i=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,s=t.options,i=t.label,o=i===void 0?"":i,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,h=function(g,b){return g&&g.length?"".concat(g.indexOf(b)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(h(l,n),".");if(r==="menu"&&u){var m=c?" disabled":"",p="".concat(d?" selected":"").concat(m);return"".concat(o).concat(p,", ").concat(h(s,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},_Ee=function(t){var r=t.ariaSelection,n=t.focusedOption,s=t.focusedValue,i=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,h=c.ariaLiveMessages,m=c.getOptionLabel,p=c.inputValue,v=c.isMulti,g=c.isOptionDisabled,b=c.isSearchable,y=c.menuIsOpen,C=c.options,N=c.screenReaderStatus,k=c.tabSelectsValue,S=c.isLoading,D=c["aria-label"],E=c["aria-live"],T=w.useMemo(function(){return Kr(Kr({},kEe),h||{})},[h]),A=w.useMemo(function(){var re="";if(r&&T.onChange){var U=r.option,X=r.options,B=r.removedValue,Y=r.removedValues,K=r.value,ue=function(se){return Array.isArray(se)?null:se},M=B||U||ue(K),V=M?m(M):"",W=X||Y||void 0,ee=W?W.map(m):[],te=Kr({isDisabled:M&&g(M,l),label:V,labels:ee},r);re=T.onChange(te)}return re},[r,T,g,l,m]),L=w.useMemo(function(){var re="",U=n||s,X=!!(n&&l&&l.includes(n));if(U&&T.onFocus){var B={focused:U,label:m(U),isDisabled:g(U,l),isSelected:X,options:i,context:U===n?"menu":"value",selectValue:l,isAppleDevice:u};re=T.onFocus(B)}return re},[n,s,m,g,T,i,l,u]),P=w.useMemo(function(){var re="";if(y&&C.length&&!S&&T.onFilter){var U=N({count:i.length});re=T.onFilter({inputValue:p,resultsMessage:U})}return re},[i,p,y,T,C,N,S]),O=r?.action==="initial-input-focus",Q=w.useMemo(function(){var re="";if(T.guidance){var U=s?"value":y?"menu":"input";re=T.guidance({"aria-label":D,context:U,isDisabled:n&&g(n,l),isMulti:v,isSearchable:b,tabSelectsValue:k,isInitialFocus:O})}return re},[D,n,s,v,g,b,y,T,l,k,O]),z=Wr(w.Fragment,null,Wr("span",{id:"aria-selection"},A),Wr("span",{id:"aria-focused"},L),Wr("span",{id:"aria-results"},P),Wr("span",{id:"aria-guidance"},Q));return Wr(w.Fragment,null,Wr(N8,{id:d},O&&z),Wr(N8,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!O&&z))},EEe=_Ee,RD=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],DEe=new RegExp("["+RD.map(function(e){return e.letters}).join("")+"]","g"),IW={};for(var mE=0;mE<RD.length;mE++)for(var pE=RD[mE],xE=0;xE<pE.letters.length;xE++)IW[pE.letters[xE]]=pE.base;var PW=function(t){return t.replace(DEe,function(r){return IW[r]})},AEe=wEe(PW),w8=function(t){return t.replace(/^\s+|\s+$/g,"")},TEe=function(t){return"".concat(t.label," ").concat(t.value)},IEe=function(t){return function(r,n){if(r.data.__isNew__)return!0;var s=Kr({ignoreCase:!0,ignoreAccents:!0,stringify:TEe,trim:!0,matchFrom:"any"},t),i=s.ignoreCase,o=s.ignoreAccents,l=s.stringify,c=s.trim,d=s.matchFrom,u=c?w8(n):n,h=c?w8(l(r)):l(r);return i&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=AEe(u),h=PW(h)),d==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},PEe=["innerRef"];function OEe(e){var t=e.innerRef,r=gf(e,PEe),n=i_e(r,"onExited","in","enter","exit","appear");return Wr("input",tn({ref:t},n,{css:sT({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var MEe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function REe(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,s=e.onTopArrive,i=e.onTopLeave,o=w.useRef(!1),l=w.useRef(!1),c=w.useRef(0),d=w.useRef(null),u=w.useCallback(function(b,y){if(d.current!==null){var C=d.current,N=C.scrollTop,k=C.scrollHeight,S=C.clientHeight,D=d.current,E=y>0,T=k-S-N,A=!1;T>y&&o.current&&(n&&n(b),o.current=!1),E&&l.current&&(i&&i(b),l.current=!1),E&&y>T?(r&&!o.current&&r(b),D.scrollTop=k,A=!0,o.current=!0):!E&&-y>N&&(s&&!l.current&&s(b),D.scrollTop=0,A=!0,l.current=!0),A&&MEe(b)}},[r,n,s,i]),h=w.useCallback(function(b){u(b,b.deltaY)},[u]),m=w.useCallback(function(b){c.current=b.changedTouches[0].clientY},[]),p=w.useCallback(function(b){var y=c.current-b.changedTouches[0].clientY;u(b,y)},[u]),v=w.useCallback(function(b){if(b){var y=n_e?{passive:!1}:!1;b.addEventListener("wheel",h,y),b.addEventListener("touchstart",m,y),b.addEventListener("touchmove",p,y)}},[p,m,h]),g=w.useCallback(function(b){b&&(b.removeEventListener("wheel",h,!1),b.removeEventListener("touchstart",m,!1),b.removeEventListener("touchmove",p,!1))},[p,m,h]);return w.useEffect(function(){if(t){var b=d.current;return v(b),function(){g(b)}}},[t,v,g]),function(b){d.current=b}}var S8=["boxSizing","height","overflow","paddingRight","position"],C8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function k8(e){e.cancelable&&e.preventDefault()}function _8(e){e.stopPropagation()}function E8(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function D8(){return"ontouchstart"in window||navigator.maxTouchPoints}var A8=!!(typeof window<"u"&&window.document&&window.document.createElement),pb=0,P0={capture:!1,passive:!1};function FEe(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,s=w.useRef({}),i=w.useRef(null),o=w.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;if(n&&S8.forEach(function(v){var g=u&&u[v];s.current[v]=g}),n&&pb<1){var h=parseInt(s.current.paddingRight,10)||0,m=document.body?document.body.clientWidth:0,p=window.innerWidth-m+h||0;Object.keys(C8).forEach(function(v){var g=C8[v];u&&(u[v]=g)}),u&&(u.paddingRight="".concat(p,"px"))}d&&D8()&&(d.addEventListener("touchmove",k8,P0),c&&(c.addEventListener("touchstart",E8,P0),c.addEventListener("touchmove",_8,P0))),pb+=1}},[n]),l=w.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;pb=Math.max(pb-1,0),n&&pb<1&&S8.forEach(function(h){var m=s.current[h];u&&(u[h]=m)}),d&&D8()&&(d.removeEventListener("touchmove",k8,P0),c&&(c.removeEventListener("touchstart",E8,P0),c.removeEventListener("touchmove",_8,P0)))}},[n]);return w.useEffect(function(){if(t){var c=i.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){i.current=c}}var LEe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},BEe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function UEe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,s=n===void 0?!0:n,i=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=REe({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=FEe({isEnabled:r}),h=function(p){d(p),u(p)};return Wr(w.Fragment,null,r&&Wr("div",{onClick:LEe,css:BEe}),t(h))}var $Ee={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},VEe=function(t){var r=t.name,n=t.onFocus;return Wr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:$Ee,value:"",onChange:function(){}})},qEe=VEe;function fT(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function zEe(){return fT(/^iPhone/i)}function OW(){return fT(/^Mac/i)}function HEe(){return fT(/^iPad/i)||OW()&&navigator.maxTouchPoints>1}function WEe(){return zEe()||HEe()}function GEe(){return OW()||WEe()}var YEe=function(t){return t.label},KEe=function(t){return t.label},XEe=function(t){return t.value},QEe=function(t){return!!t.isDisabled},JEe={clearIndicator:O_e,container:w_e,control:$_e,dropdownIndicator:I_e,group:H_e,groupHeading:G_e,indicatorsContainer:__e,indicatorSeparator:R_e,input:Q_e,loadingIndicator:B_e,loadingMessage:g_e,menu:u_e,menuList:p_e,menuPortal:j_e,multiValue:rEe,multiValueLabel:nEe,multiValueRemove:aEe,noOptionsMessage:v_e,option:dEe,placeholder:fEe,singleValue:xEe,valueContainer:C_e},ZEe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},e5e=4,MW=4,t5e=38,r5e=MW*2,n5e={baseUnit:MW,controlHeight:t5e,menuGutter:r5e},vE={borderRadius:e5e,colors:ZEe,spacing:n5e},a5e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:b8(),captureMenuScroll:!b8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:IEe(),formatGroupLabel:YEe,getOptionLabel:KEe,getOptionValue:XEe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:QEe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!t_e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function T8(e,t,r,n){var s=LW(e,t,r),i=BW(e,t,r),o=FW(e,t),l=W2(e,t);return{type:"option",data:t,isDisabled:s,isSelected:i,label:o,value:l,index:n}}function AN(e,t){return e.options.map(function(r,n){if("options"in r){var s=r.options.map(function(o,l){return T8(e,o,t,l)}).filter(function(o){return P8(e,o)});return s.length>0?{type:"group",data:r,options:s,index:n}:void 0}var i=T8(e,r,t,n);return P8(e,i)?i:void 0}).filter(a_e)}function RW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,eT(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function I8(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,eT(n.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(n.index,"-").concat(s.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function s5e(e,t){return RW(AN(e,t))}function P8(e,t){var r=e.inputValue,n=r===void 0?"":r,s=t.data,i=t.isSelected,o=t.label,l=t.value;return(!$W(e)||!i)&&UW(e,{label:o,value:l,data:s},n)}function i5e(e,t){var r=e.focusedValue,n=e.selectValue,s=n.indexOf(r);if(s>-1){var i=t.indexOf(r);if(i>-1)return r;if(s<t.length)return t[s]}return null}function o5e(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var gE=function(t,r){var n,s=(n=t.find(function(i){return i.data===r}))===null||n===void 0?void 0:n.id;return s||null},FW=function(t,r){return t.getOptionLabel(r)},W2=function(t,r){return t.getOptionValue(r)};function LW(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function BW(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=W2(e,t);return r.some(function(s){return W2(e,s)===n})}function UW(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var $W=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},l5e=1,VW=function(e){XSe(r,e);var t=ZSe(r);function r(n){var s;if(YSe(this,r),s=t.call(this,n),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,d){var u=s.props,h=u.onChange,m=u.name;d.name=m,s.ariaOnChange(c,d),h(c,d)},s.setValue=function(c,d,u){var h=s.props,m=h.closeMenuOnSelect,p=h.isMulti,v=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:v}),m&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:d,option:u})},s.selectOption=function(c){var d=s.props,u=d.blurInputOnSelect,h=d.isMulti,m=d.name,p=s.state.selectValue,v=h&&s.isOptionSelected(c,p),g=s.isOptionDisabled(c,p);if(v){var b=s.getOptionValue(c);s.setValue(p.filter(function(y){return s.getOptionValue(y)!==b}),"deselect-option",c)}else if(!g)h?s.setValue([].concat(eT(p),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:m});return}u&&s.blurInput()},s.removeValue=function(c){var d=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(c),m=u.filter(function(v){return s.getOptionValue(v)!==h}),p=Xj(d,m,m[0]||null);s.onChange(p,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(Xj(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,d=s.state.selectValue,u=d[d.length-1],h=d.slice(0,d.length-1),m=Xj(c,h,h[0]||null);u&&s.onChange(m,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(c){return gE(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return I8(AN(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return Xke.apply(void 0,[s.props.classNamePrefix].concat(d))},s.getOptionLabel=function(c){return FW(s.props,c)},s.getOptionValue=function(c){return W2(s.props,c)},s.getStyles=function(c,d){var u=s.props.unstyled,h=JEe[c](d,u);h.boxSizing="border-box";var m=s.props.styles[c];return m?m(h,d):h},s.getClassNames=function(c,d){var u,h;return(u=(h=s.props.classNames)[c])===null||u===void 0?void 0:u.call(h,d)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return yEe(s.props)},s.buildCategorizedOptions=function(){return AN(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return RW(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,d){s.setState({ariaSelection:Kr({value:c},d)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():d&&s.openMenu("first"):(d&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var d=s.props,u=d.isMulti,h=d.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&IS(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),m=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||m>p}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var d=s.props.inputValue,u=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:d}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var d=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:d}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var d=s.getFocusableOptions(),u=d.indexOf(c);s.setState({focusedOption:c,focusedOptionId:u>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return $W(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var d=s.props,u=d.isMulti,h=d.backspaceRemovesValue,m=d.escapeClearsValue,p=d.inputValue,v=d.isClearable,g=d.isDisabled,b=d.menuIsOpen,y=d.onKeyDown,C=d.tabSelectsValue,N=d.openMenuOnFocus,k=s.state,S=k.focusedOption,D=k.focusedValue,E=k.selectValue;if(!g&&!(typeof y=="function"&&(y(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(D)s.removeValue(D);else{if(!h)return;u?s.popValue():v&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!b||!C||!S||N&&s.isOptionSelected(S,E))return;s.selectOption(S);break;case"Enter":if(c.keyCode===229)break;if(b){if(!S||s.isComposing)return;s.selectOption(S);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):v&&m&&s.clearValue();break;case" ":if(p)return;if(!b){s.openMenu("first");break}if(!S)return;s.selectOption(S);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++l5e),s.state.selectValue=v8(n.value),n.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),l=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[l],s.state.focusedOptionId=gE(i,o[l])}return s}return KSe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&g8(this.menuListRef,this.focusedOptionRef),GEe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,l=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&l&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(g8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=s==="first"?0:d.length-1;if(!this.props.isMulti){var h=d.indexOf(l[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,l=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(s){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),s==="up"?c=d>0?d-1:l.length-1:s==="down"?c=(d+1)%l.length:s==="pageup"?(c=d-i,c<0&&(c=0)):s==="pagedown"?(c=d+i,c>l.length-1&&(c=l.length-1)):s==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(vE):Kr(Kr({},vE),this.props.theme):vE}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,h=this.props,m=h.isMulti,p=h.isRtl,v=h.options,g=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:m,isRtl:p,options:v,selectOption:d,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return LW(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return BW(this.props,s,i)}},{key:"filterOption",value:function(s,i){return UW(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:l})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,l=s.inputId,c=s.inputValue,d=s.tabIndex,u=s.form,h=s.menuIsOpen,m=s.required,p=this.getComponents(),v=p.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,C=this.commonProps,N=l||this.getElementId("input"),k=Kr(Kr(Kr({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":m,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?y?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?w.createElement(v,tn({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:N,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},k)):w.createElement(OEe,tn({id:N,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:z2,onFocus:this.onInputFocus,disabled:i,tabIndex:d,inputMode:"none",form:u,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,l=i.MultiValueContainer,c=i.MultiValueLabel,d=i.MultiValueRemove,u=i.SingleValue,h=i.Placeholder,m=this.commonProps,p=this.props,v=p.controlShouldRenderValue,g=p.isDisabled,b=p.isMulti,y=p.inputValue,C=p.placeholder,N=this.state,k=N.selectValue,S=N.focusedValue,D=N.isFocused;if(!this.hasValue()||!v)return y?null:w.createElement(h,tn({},m,{key:"placeholder",isDisabled:g,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),C);if(b)return k.map(function(T,A){var L=T===S,P="".concat(s.getOptionLabel(T),"-").concat(s.getOptionValue(T));return w.createElement(o,tn({},m,{components:{Container:l,Label:c,Remove:d},isFocused:L,isDisabled:g,key:P,index:A,removeProps:{onClick:function(){return s.removeValue(T)},onTouchEnd:function(){return s.removeValue(T)},onMouseDown:function(Q){Q.preventDefault()}},data:T}),s.formatOptionLabel(T,"value"))});if(y)return null;var E=k[0];return w.createElement(u,tn({},m,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(i,tn({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!i||!d)return null;var h={"aria-hidden":"true"};return w.createElement(i,tn({},o,{innerProps:h,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return w.createElement(o,tn({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(i,tn({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,l=i.GroupHeading,c=i.Menu,d=i.MenuList,u=i.MenuPortal,h=i.LoadingMessage,m=i.NoOptionsMessage,p=i.Option,v=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,C=b.inputValue,N=b.isLoading,k=b.loadingMessage,S=b.minMenuHeight,D=b.maxMenuHeight,E=b.menuIsOpen,T=b.menuPlacement,A=b.menuPosition,L=b.menuPortalTarget,P=b.menuShouldBlockScroll,O=b.menuShouldScrollIntoView,Q=b.noOptionsMessage,z=b.onMenuScrollToTop,re=b.onMenuScrollToBottom;if(!E)return null;var U=function(V,W){var ee=V.type,te=V.data,ne=V.isDisabled,se=V.isSelected,oe=V.label,G=V.value,ce=g===te,Z=ne?void 0:function(){return s.onOptionHover(te)},ae=ne?void 0:function(){return s.selectOption(te)},je="".concat(s.getElementId("option"),"-").concat(W),de={id:je,onClick:ae,onMouseMove:Z,onMouseOver:Z,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:se};return w.createElement(p,tn({},v,{innerProps:de,data:te,isDisabled:ne,isSelected:se,key:je,label:oe,type:ee,value:G,isFocused:ce,innerRef:ce?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(V.data,"menu"))},X;if(this.hasOptions())X=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var V=M.data,W=M.options,ee=M.index,te="".concat(s.getElementId("group"),"-").concat(ee),ne="".concat(te,"-heading");return w.createElement(o,tn({},v,{key:te,data:V,options:W,Heading:l,headingProps:{id:ne,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(se){return U(se,"".concat(ee,"-").concat(se.index))}))}else if(M.type==="option")return U(M,"".concat(M.index))});else if(N){var B=k({inputValue:C});if(B===null)return null;X=w.createElement(h,v,B)}else{var Y=Q({inputValue:C});if(Y===null)return null;X=w.createElement(m,v,Y)}var K={minMenuHeight:S,maxMenuHeight:D,menuPlacement:T,menuPosition:A,menuShouldScrollIntoView:O},ue=w.createElement(h_e,tn({},v,K),function(M){var V=M.ref,W=M.placerProps,ee=W.placement,te=W.maxHeight;return w.createElement(c,tn({},v,K,{innerRef:V,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:N,placement:ee}),w.createElement(UEe,{captureEnabled:y,onTopArrive:z,onBottomArrive:re,lockEnabled:P},function(ne){return w.createElement(d,tn({},v,{innerRef:function(oe){s.getMenuListRef(oe),ne(oe)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:s.getElementId("listbox")},isLoading:N,maxHeight:te,focusedOption:g}),X)}))});return L||A==="fixed"?w.createElement(u,tn({},v,{appendTo:L,controlElement:this.controlRef,menuPlacement:T,menuPosition:A}),ue):ue}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,l=i.isDisabled,c=i.isMulti,d=i.name,u=i.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!l)return w.createElement(qEe,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var m=h.map(function(g){return s.getOptionValue(g)}).join(o);return w.createElement("input",{name:d,type:"hidden",value:m})}else{var p=h.length>0?h.map(function(g,b){return w.createElement("input",{key:"i-".concat(b),name:d,type:"hidden",value:s.getOptionValue(g)})}):w.createElement("input",{name:d,type:"hidden",value:""});return w.createElement("div",null,p)}else{var v=h[0]?this.getOptionValue(h[0]):"";return w.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,l=i.focusedOption,c=i.focusedValue,d=i.isFocused,u=i.selectValue,h=this.getFocusableOptions();return w.createElement(EEe,tn({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,l=s.SelectContainer,c=s.ValueContainer,d=this.props,u=d.className,h=d.id,m=d.isDisabled,p=d.menuIsOpen,v=this.state.isFocused,g=this.commonProps=this.getCommonProps();return w.createElement(l,tn({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:m,isFocused:v}),this.renderLiveRegion(),w.createElement(i,tn({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:m,isFocused:v,menuIsOpen:p}),w.createElement(c,tn({},g,{isDisabled:m}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(o,tn({},g,{isDisabled:m}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,l=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,d=i.ariaSelection,u=i.isFocused,h=i.prevWasFocused,m=i.instancePrefix,p=s.options,v=s.value,g=s.menuIsOpen,b=s.inputValue,y=s.isMulti,C=v8(v),N={};if(o&&(v!==o.value||p!==o.options||g!==o.menuIsOpen||b!==o.inputValue)){var k=g?s5e(s,C):[],S=g?I8(AN(s,C),"".concat(m,"-option")):[],D=l?i5e(i,C):null,E=o5e(i,k),T=gE(S,E);N={selectValue:C,focusedOption:E,focusedOptionId:T,focusableOptionsWithIds:S,focusedValue:D,clearFocusValueOnUpdate:!1}}var A=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},L=d,P=u&&h;return u&&!P&&(L={value:Xj(y,C,C[0]||null),options:C,action:"initial-input-focus"},P=!h),d?.action==="initial-input-focus"&&(L=null),Kr(Kr(Kr({},N),A),{},{prevProps:s,ariaSelection:L,prevWasFocused:P})}}]),r}(w.Component);VW.defaultProps=a5e;var c5e=w.forwardRef(function(e,t){var r=GSe(e);return w.createElement(VW,tn({ref:t},r))}),G2=c5e;const bE=10;function d5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState([]),[k,S]=w.useState([]),D=async()=>{try{const ce=(await Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(Z=>({label:`${Z.categoryName} (${Z.prefix})`,value:Z._id}));h(ce),y(ce)}catch(G){console.error("Failed to fetch categories:",G)}},E=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear"),je=(await Oe.get("/api/vendors",{params:{companyId:G,financialYear:ce}})).data.filter(de=>!de.isDeleted&&!de.isBlocked).map(de=>({label:`${de.name1} ${de.name2||""}`,value:de._id,vnNo:de.vnNo||""}));d(je),N(je)}catch(G){console.error("Failed to fetch vendors:",G)}},T=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear"),Z=await Oe.get("/api/locations",{params:{companyId:G,financialYear:ce}});Array.isArray(Z.data)?S(Z.data):Z.data&&Array.isArray(Z.data.locations)?S(Z.data.locations):S([])}catch(G){console.error("Failed to fetch locations:",G),S([])}};w.useEffect(()=>{P(),E(),D(),T()},[]);const A=async G=>{try{const Z=(await Oe.get(`/api/quotations/${G}`)).data;l({...Z,validityDate:Z.validityDate?new Date(Z.validityDate).toISOString().split("T")[0]:"",items:Z.items.map(ae=>({...ae,deliveryDate:ae.deliveryDate?new Date(ae.deliveryDate).toISOString().split("T")[0]:""}))})}catch(ce){console.error("Failed to fetch quotation details:",ce),alert("Failed to load quotation details")}},L=async()=>{try{const G=o.items.reduce((Z,ae)=>Z+(parseFloat(ae.price)||0),0),ce={...o,totalPrice:G,items:o.items.map(Z=>({...Z,deliveryDate:Z.deliveryDate||null}))};await Oe.put(`/api/quotations/${o._id}`,ce),alert("Quotation updated successfully!"),l(null),P()}catch(G){console.error("Failed to update quotation:",G),alert("Failed to update quotation")}};w.useEffect(()=>{P(),E(),D()},[]);const P=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear");n(!0);const ae=(await Oe.get("/api/quotations/get",{params:{companyId:G,financialYear:ce}})).data.sort((je,de)=>new Date(de.createdAt)-new Date(je.createdAt));t(ae),i(null)}catch(G){console.error("Failed to fetch quotations:",G),i("Failed to load quotations. Please try again.")}finally{n(!1)}},O=()=>{l(null)},Q=(G,ce)=>{l(Z=>({...Z,[G]:ce}))},z=(G,ce,Z)=>{const ae=[...o.items];ae[G][ce]=Z,l(je=>({...je,items:ae}))},re=G=>{const ce=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Quotation - ${G._id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div className="header">
          <h1>QUOTATION</h1>
          <h3>Quotation ID: ${G._id}</h3>
        </div>
        
        <div className="info-grid">
          <div>
            <div className="info-item"><strong>Indent ID:</strong> ${G.indentId}</div>
            <div className="info-item"><strong>Category ID:</strong> ${G.categoryId}</div>
            <div className="info-item"><strong>RFQ Category:</strong> ${G.rfqCategoryId}</div>
          </div>
          <div>
            <div className="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div className="info-item"><strong>Date:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div className="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((ae,je)=>`
              <tr>
                <td>${je+1}</td>
                <td>${ae.materialId}</td>
                <td>${ae.description}</td>
                <td>${ae.qty}</td>
                <td>${ae.unit||ae.baseUnit}</td>
                <td>${ae.price?parseFloat(ae.price).toFixed(2):"0.00"}</td>
                <td>${ae.price&&ae.qty?(parseFloat(ae.price)*parseFloat(ae.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr className="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${G.items.reduce((ae,je)=>{const de=je.price&&je.qty?parseFloat(je.price)*parseFloat(je.qty):0;return ae+de},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div className="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,Z=window.open("","_blank");Z.document.write(ce),Z.document.close(),Z.focus(),Z.print()},[U,X]=w.useState(""),[B,Y]=w.useState(1),[K,ue]=w.useState(null),M=w.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(ce=>{const Z=new Date(ce.createdAt),ae=m?new Date(m):null,je=v?new Date(v):null;return ae&&je?Z>=ae&&Z<=je:ae?Z>=ae:je?Z<=je:!0})),U&&(G=G.filter(ce=>[ce.quotationNumber,ce.indentId,ce.vendorName,ce.vnNo,ce.note,ce.vendor,ce.location,ce.quotationReference].join(" ").toLowerCase().includes(U.toLowerCase())),G=G.sort((ce,Z)=>{const ae=parseFloat(ce.totalPrice)||0,je=parseFloat(Z.totalPrice)||0;return ae-je})),G},[U,e,m,v]),V=()=>{X(""),p(""),g(""),Y(1)},W=async G=>{try{const ce=await Oe.get(`/api/quotations/${G}`);ue(ce.data)}catch(ce){console.error("Failed to fetch quotation details:",ce),alert("Failed to load quotation details")}},ee=(G,ce)=>{if(!ce)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},te=Math.ceil(M.length/bE),ne=w.useMemo(()=>{const G=(B-1)*bE;return M.slice(G,G+bE)},[M,B]),se=G=>{X(G.target.value),Y(1)},oe=G=>{G<1||G>te||Y(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px",marginLeft:"300px"},children:[a.jsx("h2",{children:"Quotations"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:P,style:{padding:"10px 20px"},children:"Retry"})]}):K?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Quotation Preview - ",K.quotationNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>ue(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Indent ID"}),a.jsx("div",{className:"fw-bold",children:K.indentId})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:K.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor No"}),a.jsx("div",{className:"fw-bold",children:K.vnNo||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Quotation Reference"}),a.jsx("div",{className:"fw-bold",children:K.quotationReference||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Validity Date"}),a.jsx("div",{className:"fw-bold",children:K.validityDate?new Date(K.validityDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:K.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Buyer Group"}),a.jsx("div",{className:"fw-bold",children:K.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(K.createdAt).toLocaleDateString()})]})})})]}),K.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",K.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:K.items.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsx("td",{children:G.deliveryDate?new Date(G.deliveryDate).toLocaleDateString():"-"}),a.jsxs("td",{children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},ce))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"7",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",K.items.reduce((G,ce)=>{const Z=ce.price&&ce.qty?parseFloat(ce.price)*parseFloat(ce.qty):0;return G+Z},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Quotation - ",o.quotationNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:L,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Indent ID"}),a.jsx("input",{type:"text",className:"form-control",value:o.indentId||"",onChange:G=>Q("indentId",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"RFQ Category"}),a.jsx(G2,{options:b,value:b.find(G=>G.value===o.rfqCategoryId),onChange:G=>Q("rfqCategoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(G2,{options:C,value:C.find(G=>G.value===o.vendor),onChange:G=>{o.vendor||(Q("vendor",G?.value),Q("vendorName",G?.label),Q("vnNo",G?.vnNo||""))},placeholder:"Select Vendor",isDisabled:!!o.vendor})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Quotation Reference"}),a.jsx("input",{type:"text",className:"form-control",value:o.quotationReference||"",onChange:G=>Q("quotationReference",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityDate||"",onChange:G=>Q("validityDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>Q("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),k.map((G,ce)=>a.jsx("option",{value:G.name||G,children:G.name||G},ce))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Buyer Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>Q("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>Q("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:Z=>z(ce,"materialId",Z.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:Z=>z(ce,"description",Z.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:Z=>z(ce,"qty",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:Z=>z(ce,"baseUnit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:Z=>z(ce,"orderUnit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:Z=>z(ce,"unit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialgroup||"",onChange:Z=>z(ce,"materialgroup",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:G.deliveryDate||"",onChange:Z=>z(ce,"deliveryDate",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:Z=>z(ce,"price",Z.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},ce))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"10",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((G,ce)=>{const Z=ce.price&&ce.qty?parseFloat(ce.price)*parseFloat(ce.qty):0;return G+Z},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Quotations"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Quotation Reference etc.......",value:U,onChange:se,className:"form-control",style:{width:250,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),Y(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),Y(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:V,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:P,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",id:"DataTables_Table_0","aria-describedby":"DataTables_Table_0_info",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Quotation ID"}),a.jsx("th",{children:"Quotation Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),"              ",a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"TotalPrice"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{children:G.quotationNumber}),a.jsx("td",{children:G.quotationReference}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location}),a.jsx("td",{children:new Date(G.validityDate).toLocaleDateString()}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsx("td",{style:{backgroundColor:ee(ce,!!U)},children:G.totalPrice}),a.jsx("td",{className:"text-wrap",children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>W(G._id),className:"btn btn-sm ",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>A(G._id),className:"btn btn-sm ",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>re(G),className:"btn btn-sm ",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||ce))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end mt-2",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${B===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(B-1),disabled:B===1,children:a.jsx("i",{className:"fas fa-angle-left"})})}),(()=>{const G=[];let ce=[1,2],Z=[te-1,te].filter(de=>de>2),ae=[];B<=4?(ce=[1,2,3,4,5].filter(de=>de<=te),Z=[te-1,te].filter(de=>de>5)):B>=te-3?(ce=[1,2].filter(de=>de<te-4),Z=[te-4,te-3,te-2,te-1,te].filter(de=>de>2&&de<=te)):(ce=[1,2],ae=[B-1,B,B+1],Z=[te-1,te]);const je=de=>de.map(ie=>a.jsx("li",{className:`page-item${B===ie?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ie),children:ie})},ie));return G.push(...je(ce)),(ae.length>0&&ae[0]>ce[ce.length-1]+1||ae.length===0&&Z[0]>ce[ce.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),G.push(...je(ae)),Z.length>0&&(ae.length>0&&Z[0]>ae[ae.length-1]+1||ae.length===0&&Z[0]>ce[ce.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),G.push(...je(Z)),G})(),a.jsx("li",{className:`page-item${B===te?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(B+1),disabled:B===te,children:a.jsx("i",{className:"fas fa-angle-right"})})})]})})})]})}function u5e(){const[e,t]=w.useState("enquiry"),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(new Date().toISOString().substring(0,10)),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState(0),[O,Q]=w.useState([]),[z,re]=w.useState([]),[U,X]=w.useState(!1),[B,Y]=w.useState(""),[K,ue]=w.useState([]),[M,V]=w.useState(""),[W,ee]=w.useState([]),[te,ne]=w.useState(""),[se,oe]=w.useState([]);console.log("enquirySearchResults",K);const[G,ce]=w.useState(!1),[Z,ae]=w.useState(""),[je,de]=w.useState([]),[ie,be]=w.useState(""),[Ne,Fe]=w.useState(""),[Xe,ct]=w.useState(""),[xt,Re]=w.useState(""),[ht,At]=w.useState(""),[_t,Wt]=w.useState(0),[Ke,ge]=w.useState(0),[ve,xe]=w.useState(0),[Ie,Ze]=w.useState(),[Ft,Qe]=w.useState(),[Ye,Le]=w.useState(),[ze,ut]=w.useState([]),[Te,We]=w.useState(null),[Ge,It]=w.useState(0),[Bt,Ee]=w.useState(0),[_e,st]=w.useState(0),[wt,rr]=w.useState(0),[Ot,er]=w.useState(0),[fr,yr]=w.useState([]),[Yr,ur]=w.useState(!1),[me,Be]=w.useState(""),[Ae,ke]=w.useState(null),[Me,$e]=w.useState([]),[pt,jt]=w.useState([]),[ot,bt]=w.useState([]),[yt,Yt]=w.useState([]),[sr,mr]=w.useState([]);w.useEffect(()=>{const rt=localStorage.getItem("selectedCompanyId"),lr=localStorage.getItem("financialYear"),Zt={params:{companyId:rt,financialYear:lr}};Oe.get("/api/po-categories",{params:{companyId:rt,financialYear:lr}}).then(_r=>n(_r.data)),Oe.get("/api/indent/get",Zt).then(_r=>{l(_r.data)}),Oe.get("/api/quotations/get",Zt).then(_r=>{i(_r.data);const Cr=[];_r.data.forEach(_a=>{_a.items.forEach(qo=>{qo.buyerGroup&&!Cr.includes(qo.buyerGroup)&&Cr.push(qo.buyerGroup)})}),re(Cr)}),Oe.get("/api/contracts/get",Zt).then(_r=>{d(_r.data)}).catch(_r=>{console.error("Error fetching contracts:",_r),d([])}),Oe.get("/api/general-conditions",Zt).then(_r=>{const Cr=_r.data.filter(_a=>!_a.isDeleted).map(_a=>({_id:_a._id,name:_a.name,description:_a.description}));jt(Cr)}),Oe.get("/api/processes",Zt).then(_r=>{const Cr=_r.data.filter(_a=>!_a.isDeleted).map(_a=>({_id:_a._id,processId:_a.processId,processDescription:_a.processDescription}));bt(Cr)}),Oe.get("/api/locations",Zt).then(_r=>$e(_r.data)),Oe.get("/api/tax",Zt).then(_r=>ut(_r.data)),Oe.get("/api/material",Zt).then(_r=>yr(_r.data)),Oe.get("/api/vendors",Zt).then(_r=>Q(_r.data)),A([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]);const ir=(rt,lr,Zt)=>{lr.includes(rt)?Zt(lr.filter(_r=>_r!==rt)):Zt([...lr,rt])},Ve=rt=>{if(Y(rt),rt.trim()){const lr=s.filter(Zt=>Zt.quotationNumber.toLowerCase().includes(rt.toLowerCase()));ue(lr)}else ue([])},dr=()=>{ue(s)},or=rt=>{if(V(rt),rt.trim()){const lr=o.filter(Zt=>Zt.quotationNumber?.toLowerCase().includes(rt.toLowerCase())||Zt.indentId?.toLowerCase().includes(rt.toLowerCase()));ee(lr)}else ee([])},$r=()=>{ee(o)},gn=rt=>{if(ne(rt),rt.trim()){const lr=c.filter(Zt=>Zt.contractNumber?.toLowerCase().includes(rt.toLowerCase())||Zt.contractId?.toLowerCase().includes(rt.toLowerCase()));oe(lr)}else oe([])},vt=()=>{oe(c)},br=rt=>{p(rt.quotationNumber),$s(rt.quotationNumber),X(!1),Y(""),ue([])},hr=rt=>{p(rt.indentId),Qi(rt.indentId),X(!1),Y(""),ue([])},qr=rt=>{p(rt.contractNumber||rt.contractId),nh(rt.contractNumber||rt.contractId),X(!1),ne(""),oe([])},Qr=()=>{X(!1),Y(""),ue([]),V(""),ee([]),ne(""),oe([])},da=rt=>{if(ae(rt),rt.trim()){const lr=O.filter(Zt=>Zt.vendorName?.toLowerCase().includes(rt.toLowerCase())||Zt.vendorCode?.toLowerCase().includes(rt.toLowerCase()));de(lr)}else de([])},Fn=()=>{de(O)},Ia=rt=>{N(rt.name1||rt.vendorName),ce(!1),ae(""),de([])},Ti=()=>{ce(!1),ae(""),de([])},ya=(rt,lr,Zt,_r,Cr)=>{const _a=rt.reduce((Df,Zc)=>Df+(Zc.quantity||0)*(Zc.price||0),0);P(_a.toFixed(2));const qo=lr!==void 0?lr:Ge,Ef=Zt!==void 0?Zt:Bt,lc=_r!==void 0?_r:_e,zo=Cr!==void 0?Cr:wt,Ho=_a*(parseFloat(qo)||0)/100,Cs=_a*(parseFloat(Ef)||0)/100,fi=_a*(parseFloat(lc)||0)/100,cc=parseFloat(zo)||0;Wt(Ho.toFixed(2)),ge(Cs.toFixed(2)),xe(fi.toFixed(2));const Wo=_a+Ho+Cs+fi-cc;er(Wo.toFixed(2))},ka=rt=>{It(rt),ya(T,rt,Bt,_e,wt)},pl=rt=>{Ee(rt),ya(T,Ge,rt,_e,wt)},es=rt=>{st(rt),ya(T,Ge,Bt,rt,wt)},$o=rt=>{rr(rt),ya(T,Ge,Bt,_e,rt)},Or=(rt,lr,Zt)=>{const _r=[...T];_r[rt][lr]=lr==="quantity"||lr==="price"?parseFloat(Zt)||0:Zt,A(_r),ya(_r,Ge,Bt,_e,wt)},$s=rt=>{p(rt);const lr=s.find(Zt=>Zt.quotationNumber===rt);if(lr){N(lr.name1||lr.vendorName),S(lr.items[0]?.location||"");const Zt=lr.items.find(Cr=>Cr.buyerGroup);Zt&&be(Zt.buyerGroup);const _r=lr.items.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(_r),ya(_r)}},Qi=rt=>{p(rt);const lr=o.find(Zt=>Zt.indentId===rt);if(lr){N(lr.name1||lr.vendorName),S(lr.items[0]?.location||"");const Zt=lr.items.find(Cr=>Cr.buyerGroup);Zt&&be(Zt.buyerGroup);const _r=lr.items.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(_r),ya(_r)}},nh=rt=>{p(rt);const lr=c.find(Zt=>Zt.contractNumber===rt||Zt.contractId===rt);if(lr){N(lr.vendorName||lr.name1),S(lr.items?.[0]?.location||"");const Zt=lr.items?.find(Cr=>Cr.buyerGroup);Zt&&be(Zt.buyerGroup);const _r=lr.items?.map(Cr=>({materialId:Cr.materialId,description:Cr.description,quantity:Cr.qty||Cr.quantity,baseUnit:Cr.baseUnit,unit:Cr.unit,orderUnit:Cr.orderUnit,price:Cr.price,priceUnit:Cr.priceUnit,materialgroup:Cr.materialgroup,deliveryDate:Cr.deliveryDate?String(Cr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}))||[];A(_r),ya(_r)}},xl=()=>{A([...T,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},kf=rt=>{const lr=[...T];lr.splice(rt,1),A(lr),ya(lr)},[ah,Vo]=w.useState(!1),[ac,Qc]=w.useState(""),[vl,Jc]=w.useState(""),[gl,sc]=w.useState(null),bl=async rt=>{if(rt.preventDefault(),!u||!m)return alert("Please select both category and quotation");const Zt={quotationId:s.find(_r=>_r.quotationNumber===m)?._id,quotationNumber:m,categoryId:u._id,category:u.categoryName,date:b,vendor:C,notes:xt,contactPerson:Ne,generalConditions:pt,processes:ot,preparedby:Ye,approvedby:Ft,remarks:Ie,validityDate:ht,buyerGroup:ie,deliveryLocation:k,deliveryAddress:D,items:T,total:parseFloat(L)||0,taxName:Te?.taxName||"",cgst:parseFloat(Ge)||0,sgst:parseFloat(Bt)||0,igst:parseFloat(_e)||0,taxDiscount:parseFloat(wt)||0,finalTotal:parseFloat(Ot)||0};sc(Zt),Vo(!0)},ic=async()=>{try{const rt=localStorage.getItem("selectedCompanyId"),lr=localStorage.getItem("financialYear");let Zt={...gl,companyId:rt,financialYear:lr};if(ac==="internal")Zt.poGenerationType="internal";else if(ac==="external"){if(!vl.trim())return alert("Please enter external PO number");Zt.poGenerationType="external",Zt.poNumber=vl.trim()}const _r=await Oe.post("/api/purchase-orders",Zt);console.log("Saved PO:",_r.data),fs(),Vo(!1),Qc(""),Jc(""),sc(null),alert("PO Created Successfully!")}catch(rt){console.error("Error during PO creation:",rt),alert("Failed to create PO")}},fs=()=>{h(null),p(""),y(new Date().toISOString().substring(0,10)),N(""),S(""),E(""),A([]),P(""),We(null),It(""),Ee(""),st(""),rr(""),er(""),ct(""),Re(""),be(""),Fe(""),At("")},oc=()=>{Vo(!1),Qc(""),Jc(""),sc(null)},yl=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-cog me-2"}),"PO Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:oc,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the PO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Qc("internal"),ic()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Qc("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ac==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom PO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"External PO Number (max 50 characters)",value:vl,onChange:rt=>Jc(rt.target.value),onKeyPress:rt=>{rt.key==="Enter"&&vl.trim()&&ic()},maxLength:50,autoComplete:"off",spellCheck:"false",autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[vl.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:ic,disabled:!vl.trim(),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Create PO"]})})]}),ac==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("strong",{children:"System Generated Number"}),a.jsx("br",{}),"Format: ",u?.prefix,"-XXXXXX"]})})]})]})})})]}),Zr=()=>{const rt=fr.filter(Zt=>Zt.materialId.toLowerCase().includes(me.toLowerCase())||Zt.description.toLowerCase().includes(me.toLowerCase())),lr=Zt=>{const _r=[...T];_r[Ae]={..._r[Ae],materialId:Zt.materialId,description:Zt.description,baseUnit:Zt.baseUnit,unit:Zt.unit,price:Zt.price,buyerGroup:Zt.buyerGroup,materialgroup:Zt.materialgroup},A(_r),ya(_r),ur(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:me,onChange:Zt=>Be(Zt.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:rt.map((Zt,_r)=>a.jsxs("tr",{children:[a.jsx("td",{children:Zt.materialId}),a.jsx("td",{children:Zt.description}),a.jsx("td",{children:Zt.baseUnit}),a.jsx("td",{children:Zt.unit}),a.jsx("td",{children:Zt.price}),a.jsx("td",{children:Zt.priceUnit}),a.jsx("td",{children:Zt.buyerGroup}),a.jsx("td",{children:Zt.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>lr(Zt),children:"Select"})})]},_r))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>ur(!1),style:{marginTop:10},children:"Close"})]})})},sh=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header text-white",children:[a.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="enquiry"?"active":""}`,onClick:()=>t("enquiry"),href:"#",children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="quotation"?"active":""}`,onClick:()=>t("quotation"),href:"#",children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="contract"?"active":""}`,onClick:()=>t("contract"),href:"#",children:"Contract"})})]}),a.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:Qr})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"tab-content",children:[e==="enquiry"&&a.jsxs("div",{className:`tab-pane ${e==="enquiry"?"show active":""}`,id:"bottom-tab1",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Enquiry Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Enquiry number...",value:M,onChange:rt=>or(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:$r,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:W.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Enquiry Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:W.map((rt,lr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.indentId}),a.jsx("td",{children:new Date(rt.documentDate).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>hr(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:M?`No enquiries found matching "${M}"`:'Enter search term or click "View All"'})]})})]}),e==="quotation"&&a.jsxs("div",{className:`tab-pane ${e==="quotation"?"show active":""}`,id:"bottom-tab2",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Quotation Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter quotation number...",value:B,onChange:rt=>Ve(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:dr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:K.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:K.map((rt,lr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.quotationNumber}),a.jsx("td",{className:"text-flex",children:rt.vendorName}),a.jsx("td",{children:new Date(rt.validityDate).toLocaleDateString()}),a.jsxs("td",{children:["",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>br(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:B?`No quotations found matching "${B}"`:'Enter search term or click "View All"'})]})})]}),e==="contract"&&a.jsxs("div",{className:`tab-pane ${e==="contract"?"show active":""}`,id:"bottom-tab3",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Contract Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter contract number...",value:te,onChange:rt=>gn(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:vt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:se.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:se.map((rt,lr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:rt.contractNumber||rt.contractId})}),a.jsx("td",{children:rt.vendorName||rt.name1}),a.jsx("td",{children:new Date(rt.validityFDate).toLocaleDateString()}),a.jsx("td",{children:new Date(rt.validityTDate).toLocaleDateString()}),a.jsxs("td",{children:["",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>qr(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:te?`No contracts found matching "${te}"`:'Enter search term or click "View All"'})]})})]})]})})})})]})})}),_f=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Ti})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:Z,onChange:rt=>da(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Fn,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:je.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:je.map((rt,lr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:rt.vnNo})}),a.jsx("td",{children:rt.name1}),a.jsx("td",{children:rt.email}),a.jsx("td",{children:rt.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ia(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Z?`No vendors found matching "${Z}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Ti,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Reference_Document:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference document number",value:m,onChange:rt=>{p(rt.target.value),rt.target.value&&$s(rt.target.value)},required:!0}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>X(!0),style:{border:"0px solid"},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",onChange:rt=>{const lr=r.find(Zt=>Zt._id===rt.target.value);h(lr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),r.map(rt=>a.jsx("option",{value:rt._id,children:rt.categoryName},rt._id))]})})]}),a.jsxs("div",{className:"col-lg-3  row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Header Note:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Xe,onChange:rt=>ct(rt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:Ie,onChange:rt=>Ze(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:Ye,onChange:rt=>Le(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:Ft,onChange:rt=>Qe(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:v,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:rt=>y(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:C,onChange:rt=>N(rt.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>ce(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:k,onChange:rt=>S(rt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),Me.map(rt=>a.jsx("option",{value:rt.name||rt.locationName||rt._id,children:rt.name||rt.locationName||rt._id},rt._id||rt.id||rt.name))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:ie,onChange:rt=>be(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:rt=>Fe(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:ht,onChange:rt=>At(rt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:yt.length===0?"Select...":`${yt.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:pt.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:yt.includes(rt._id),onChange:()=>ir(rt._id,yt,Yt)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.name})]})},rt._id))})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Processes"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:sr.length===0?"Select...":`${sr.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:ot.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:sr.includes(rt._id),onChange:()=>ir(rt._id,sr,mr)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.processId})]})},rt._id))})]})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((rt,lr)=>a.jsxs("tr",{children:[a.jsx("td",{children:lr+1}),a.jsx("td",{children:a.jsx("input",{value:rt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{ke(lr),ur(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.description,onChange:Zt=>Or(lr,"description",Zt.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.quantity,onChange:Zt=>Or(lr,"quantity",Zt.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.baseUnit,onChange:Zt=>Or(lr,"baseUnit",Zt.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.orderUnit,onChange:Zt=>Or(lr,"orderUnit",Zt.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.materialgroup,onChange:Zt=>Or(lr,"materialgroup",Zt.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.price,onChange:Zt=>Or(lr,"price",Zt.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:rt.priceUnit,onChange:Zt=>Or(lr,"priceUnit",Zt.target.value),required:!0,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(rt.quantity*rt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:rt.deliveryDate,onChange:Zt=>Or(lr,"deliveryDate",Zt.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:rt.note,onChange:Zt=>Or(lr,"note",Zt.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>kf(lr),children:a.jsx("i",{className:"ti ti-trash"})})})]},lr))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",className:"btn btn-link",onClick:xl,children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:bl,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:D,onChange:rt=>E(rt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{className:"",children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-12  row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-sm",onChange:rt=>{const lr=ze.find(Zt=>Zt.taxName===rt.target.value);if(We(lr),lr){const Zt=lr.cgst||0,_r=lr.sgst||0,Cr=lr.igst||0;It(Zt),Ee(_r),st(Cr),ya(T,Zt,_r,Cr,wt)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),ze.map(rt=>a.jsx("option",{value:rt.taxName,children:rt.taxName},rt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ge,onChange:rt=>ka(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Bt,onChange:rt=>pl(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:_e,onChange:rt=>es(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:wt,onChange:rt=>$o(rt.target.value)})})]})]}),a.jsx("div",{className:"border-top ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["",L]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["",_t]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["",Ke]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["",ve]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ",wt]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["",Ot]})]})]})})})]})]})})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit PO"})})]})})})})})]}),Yr&&a.jsx(Zr,{}),U&&a.jsx(sh,{}),G&&a.jsx(_f,{}),ah&&a.jsx(yl,{})]})})]})}function h5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(""),[c,d]=w.useState({fromDate:"",toDate:""}),[u,h]=w.useState(!1),[m,p]=w.useState("poNumber"),[v,g]=w.useState([]),[b,y]=w.useState(1),[C]=w.useState(10);w.useEffect(()=>{N()},[]);const N=()=>{i(!0);const B=localStorage.getItem("selectedCompanyId"),Y=localStorage.getItem("financialYear");Oe.get("/api/purchase-orders",{params:{companyId:B,financialYear:Y}}).then(K=>{const ue=K.data.sort((M,V)=>new Date(V.createdAt)-new Date(M.createdAt));t(ue),n(ue),console.log("data fo po",r),i(!1)}).catch(K=>{console.error("Error fetching POs:",K),alert("Failed to fetch POs"),i(!1)})},k=()=>{let B=e;o.trim()&&(B=B.filter(Y=>[Y.poNumber,Y.vendor,Y.category,Y.quotationNumber,Y.deliveryLocation,Y.deliveryAddress,Y.date].some(ue=>ue&&ue.toString().toLowerCase().includes(o.toLowerCase())))),(c.fromDate||c.toDate)&&(B=B.filter(Y=>{const K=new Date(Y.date),ue=c.fromDate?new Date(c.fromDate):null,M=c.toDate?new Date(c.toDate):null;M&&M.setHours(23,59,59,999);let V=!0;return ue&&K<ue&&(V=!1),M&&K>M&&(V=!1),V})),n(B),y(1)},S=B=>{l(B.target.value)},D=(B,Y)=>{d(K=>({...K,[B]:Y}))};w.useEffect(()=>{k()},[o,c,e]);const E=B=>{const Y=B.target.value;if(l(Y),Y.trim()===""){g([]);return}const K=e.filter(ue=>{switch(m){case"poNumber":return ue.poNumber.toLowerCase().includes(Y.toLowerCase());case"vendor":return ue.vendor.toLowerCase().includes(Y.toLowerCase());case"category":return ue.category.toLowerCase().includes(Y.toLowerCase());case"quotationNumber":return ue.quotationNumber.toLowerCase().includes(Y.toLowerCase());default:return ue.poNumber.toLowerCase().includes(Y.toLowerCase())}});g(K)},T=()=>{g(e),l("")},A=()=>{g([]),l("")},L=B=>{n([B]),y(1),P()},P=()=>{h(!1),g([]),l("")},O=b*C,Q=O-C,z=r.slice(Q,O),re=Math.ceil(r.length/C),U=B=>y(B),X=async B=>{try{const Y=localStorage.getItem("selectedCompanyId"),K=localStorage.getItem("financialYear"),[ue,M]=await Promise.all([Oe.get(`/api/vendors/${B.vendor}`,{params:{companyId:Y,financialYear:K}}),Oe.get(`/api/companies/${Y}`)]),V=ue.data,W=M.data,ee=async ae=>{try{console.log("=== getImageAsBase64 called ==="),console.log("Input imagePath:",ae);const je=ae.includes("/")?ae.split("/").pop():ae;console.log("Extracted filename:",je);const de=`/api/image/${je}`;console.log("Request URL:",de);const ie=await Oe.get(de,{responseType:"arraybuffer"});return console.log("Response status:",ie.status),console.log("Response data length:",ie.data.byteLength),`data:image/jpeg;base64,${btoa(new Uint8Array(ie.data).reduce((Ne,Fe)=>Ne+String.fromCharCode(Fe),""))}`}catch(je){return console.error("Error fetching image:",je.message),console.error("Error status:",je.response?.status),console.error("Error URL:",je.config?.url),null}};let te=null;W.logo&&(te=await ee(W.logo));const ne=B.items.map((ae,je)=>`
     <tr>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${je+1}</td>
       <td style="border: 1px solid #000; padding: 4px;">${ae.materialId||""}</td>
       <td style="border: 1px solid #000; padding: 4px;">${ae.description||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${ae.deliveryDate||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${ae.quantity||""} ${ae.unit||""}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${ae.price||0}</td>
       
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${ae.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((ae.price||0)*(ae.quantity||0)).toFixed(2)}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">${((ae.price||0)*(ae.quantity||0)).toFixed(2)}</td>
     </tr>
   `).join(""),se=(()=>{if(B.notes){if(typeof B.notes=="string"){const ae=B.notes.split(`
`).filter(je=>je.trim()!=="");if(ae.length>0)return ae.map((je,de)=>`
           <tr>
             <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${de+1}.</td>
             <td style="border: 1px solid #000; padding: 4px;">${je.trim()}</td>
           </tr>
         `).join("")}else if(Array.isArray(B.notes)&&B.notes.length>0)return B.notes.map((ae,je)=>`
         <tr>
           <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${je+1}.</td>
           <td style="border: 1px solid #000; padding: 4px;">${ae}</td>
         </tr>
       `).join("")}return`
     <tr>
       <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">-</td>
       <td style="border: 1px solid #000; padding: 4px; color: #666; font-style: italic;">No notes available</td>
     </tr>
   `})(),oe=B.generalConditions&&B.generalConditions.length>0?B.generalConditions.map((ae,je)=>`
           <div style="margin-bottom: 8px;">
             <strong>${je+1}. ${ae.name}:</strong><br>
             ${ae.description}
           </div>
         `).join(""):"",G=ae=>{const je=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],de=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],ie=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return ae===0?"Zero":ae<10?je[ae]:ae<20?de[ae-10]:ae<100?ie[Math.floor(ae/10)]+(ae%10?" "+je[ae%10]:""):ae<1e3?je[Math.floor(ae/100)]+" Hundred"+(ae%100?" "+G(ae%100):""):ae<1e5?G(Math.floor(ae/1e3))+" Thousand"+(ae%1e3?" "+G(ae%1e3):""):ae<1e7?G(Math.floor(ae/1e5))+" Lakh"+(ae%1e5?" "+G(ae%1e5):""):G(Math.floor(ae/1e7))+" Crore"+(ae%1e7?" "+G(ae%1e7):"")},ce=`
     <!DOCTYPE html>
     <html>
     <head>
       <title>Purchase Order - ${B.poNumber}</title>
       <style>
         @page {
           size: A4;
           margin: 0.5in;
         }
         body {
           font-family: Arial, sans-serif;
           font-size: 11px;
           line-height: 1.2;
           margin: 0;
           padding: 0;
           color: #000;
         }
         .header-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-bottom: 0;
         }
         .header-table td {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .main-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-top: 0;
         }
         .main-table td, .main-table th {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .center {
           text-align: center;
         }
         .bold {
           font-weight: bold;
         }
         .section-header {
           background-color: #f0f0f0;
           font-weight: bold;
           text-align: center;
           padding: 6px;
         }
         .amount-cell {
           text-align: right;
           padding-right: 8px;
         }
         .signature-section {
           margin-top: 20px;
           text-align: center;
         }
         .print-note {
           font-size: 10px;
           color: #666;
           text-align: center;
           margin-top: 10px;
         }
         .no-border {
           border: none !important;
         }
         .logo-img {
           max-width: 100px;
           max-height: 80px;
           object-fit: contain;
         }
         .general-conditions {
           padding: 8px;
           font-size: 10px;
           line-height: 1.3;
         }
       </style>
     </head>
     <body>
       <!-- Header Section -->
       <table class="header-table">
         <tr>
           <td colspan="6" class="section-header">PURCHASE ORDER</td>
         </tr>
         <tr>
           <td class="bold" style="width: 120px;">PO No.:</td>
           <td style="width: 150px;">${B.poNumber}</td>
           <td rowspan="6" style="text-align: center; vertical-align: middle; width: 200px;">
           ${te?`<img src="${te}" alt="Company Logo" class="logo-img">`:'<div style="border: 1px dashed #ccc; padding: 20px; color: #999;">No Logo</div>'}
  
           </td>
         </tr>
         <tr>
           <td class="bold">PO Date:</td>
           <td>${B.date}</td>
         </tr>
         <tr>
           <td class="bold">Rev. No.:</td>
           <td>${B.revisionNumber||"1.0"}</td>
         </tr>
         <tr>
           <td class="bold">Rev. Date:</td>
           <td>${B.revisionDate||B.date}</td>
         </tr>
         <tr>
           <td class="bold">Ref No.:</td>
           <td>${B.refNumber||""}</td>
         </tr>
         <tr>
           <td class="bold">Ref Date:</td>
           <td>${B.refDate||B.date}</td>
         </tr>
         <tr>
           <td class="bold">Supplier Details:</td>
           <td colspan="2">
             <strong>M/s. ${V.name1||V.name}</strong><br>
             ${V.address1||""}<br>
             ${V.address2||""}<br>
             ${V.city||""}, ${V.region||""}<br>
             ${V.country||""}<br>
             ${V.pincode||""}<br>
             Contact Details: ${V.contactNo||""}<br>
             ${V.email||""}
           </td>
         </tr>
         <tr>
           <td class="bold">GSTIN:</td>
           <td>${W.gstin||""}</td>
           <td></td>
         </tr>
       </table>
 
       <!-- Bill To and Ship To -->
       <table class="main-table">
         <tr>
           <td class="bold section-header">BILL TO:</td>
           <td class="bold section-header">SHIP TO:</td>
         </tr>
         <tr>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${W.name||""}</strong><br>
             ${W.address1||""}<br>
             ${W.address||""}<br>
             ${W.city||""} ${W.state||""}<br>
        
             <strong>Tel:</strong> ${W.phone||""}<br>
             <strong>Email:</strong> ${W.email||""}
           </td>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${W.name||""}</strong><br>
             ${W.address1||""}<br>
             ${W.address||""}<br>
             ${W.city||""} ${W.state||""}<br>
            
             <strong>Tel:</strong> ${W.phone||""}<br>
             <strong>Email:</strong> ${W.email||""}
           </td>
         </tr>
       </table>
 
       <!-- Items Section -->
       <table class="main-table">
         <tr>
           <td colspan="9" class="section-header">PLEASE SUPPLY THE FOLLOWING ITEMS AS PER THE DETAILS MENTIONED BELOW:</td>
         </tr>
         <tr class="bold" style="background-color: #f0f0f0;">
           <td class="center">SI No</td>
           <td class="center">Part No</td>
           <td class="center">Description</td>
           <td class="center">Schedule</td>
           <td class="center">Quantity & Unit</td>
           <td class="center">Unit Price</td>
          
           <td class="center">Unit Price ()</td>
           <td class="center">Int ()</td>
            <td class="center">Total</td>
         </tr>
         ${ne}
         <tr>
           <td colspan="6" class="bold">Basic Total:</td>
           <td class="amount-cell bold">${B.total||0}</td>
           <td colspan="2"></td>
         </tr>
       </table>
 
       <!-- Notes Section -->
       <table class="main-table">
         <tr>
           <td colspan="2" class="section-header">NOTES:</td>
         </tr>
         ${se}
       </table>
 
       <!-- Tax Summary -->
       <table class="main-table">
         <tr>
           <td style="width: 60%;">
             <strong>Total Amount (In Words):</strong><br>
             Rupees ${G(Math.floor(B.finalTotal||B.total||0))} Only
           </td>
           <td style="width: 40%;">
             <table style="width: 100%; border-collapse: collapse;">
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>SGST(${B.sgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(B.total*(B.sgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>CGST(${B.cgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">${(B.total*(B.cgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr style="border-top: 1px solid #000;">
                 <td class="no-border" style="padding: 2px;"><strong>Net Total:</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;"><strong>${B.finalTotal||B.total||0}</strong></td>
               </tr>
             </table>
           </td>
         </tr>
       </table>
 
       <!-- Remarks -->
       <table class="main-table">
         <tr>
           <td class="bold" style="width: 100px;">REMARKS:</td>
           <td>${B.remarks||""}</td>
         </tr>
       </table>
 
       <!-- Terms and Conditions -->
       <table class="main-table">
         <tr>
           <td style="width: 50%;">
             <strong>TERMS & CONDITIONS:</strong><br>
             <div class="general-conditions">
               ${oe||B.termsAndConditions||""}
             </div>
           </td>
           <td style="width: 50%;">
             <strong>PREPARED BY:</strong> ${B.preparedby||""}<br><br>
             <strong>APPROVED BY:</strong> ${B.approvedby||""}
           </td>
         </tr>
       </table>
 
       <!-- Footer -->
      
 
       <div class="print-note">
         This is an electronically generated document and does not require signature.
       </div>
     </body>
     </html>
   `,Z=window.open("","_blank","width=800,height=600");Z.document.write(ce),Z.document.close(),Z.focus(),Z.onload=function(){Z.print()}}catch(Y){console.error("Error generating print:",Y),alert("Error generating print. Please try again.")}};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order Display"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order Display"})]})})]})}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search All Fields"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search across all fields (PO Number, Vendor, Category, etc.)...",value:o,onChange:S})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:c.fromDate,onChange:B=>D("fromDate",B.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:c.toDate,onChange:B=>D("toDate",B.target.value)})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Delivery Address"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:z.length>0?z.map(B=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:B.poNumber})}),a.jsx("td",{children:B.date}),a.jsx("td",{children:B.vendor}),a.jsx("td",{children:B.category}),a.jsx("td",{children:B.quotationNumber}),a.jsx("td",{children:B.deliveryLocation}),a.jsx("td",{children:B.deliveryAddress}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>X(B),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})]},B._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No purchase orders found"})]})})})]})})})]}),re>1&&a.jsx("nav",{"aria-label":"Purchase Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${b===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>U(b-1),disabled:b===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:re},(B,Y)=>Y+1).map(B=>a.jsx("li",{className:`page-item ${b===B?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>U(B),children:B})},B)),a.jsx("li",{className:`page-item ${b===re?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>U(b+1),disabled:b===re,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]}),u&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:P})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search By"}),a.jsxs("select",{className:"form-select",value:m,onChange:B=>p(B.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"category",children:"Category"}),a.jsx("option",{value:"quotationNumber",children:"Quotation Number"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${m==="poNumber"?"PO Number":m}...`,value:o,onChange:E})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:T,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),v.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:A,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:v.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:v.map((B,Y)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:B.poNumber})}),a.jsx("td",{children:B.date}),a.jsx("td",{children:B.vendor}),a.jsx("td",{children:B.category}),a.jsx("td",{children:B.quotationNumber}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>L(B),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Y))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No purchase orders loaded from API":o?`No purchase orders found matching "${o}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:P,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const O8=["Piece","Box","Kg","Ltr"],f5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(!1),[o,l]=w.useState([]),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(new Date().toISOString().split("T")[0]),[L,P]=w.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}]),[O,Q]=w.useState(!1),[z,re]=w.useState(""),[U,X]=w.useState([]),[B,Y]=w.useState("materialId"),[K,ue]=w.useState(null),[M,V]=w.useState(1),[W]=w.useState(5),ee="MMNR-",te=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),se=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:te,financialYear:ne}}).then(Ke=>{const ge=Ke.data.filter(ve=>!ve.isDeleted&&!ve.isBlocked);console.log("Filtered materials:",ge),t(ge)}).catch(Ke=>console.error(Ke)),Oe.get("/api/locations",{params:{companyId:te,financialYear:ne}}).then(Ke=>l(Ke.data))},[]),w.useEffect(()=>{Oe.get("/api/salecategory",{params:{companyId:te,financialYear:ne}}).then(Ke=>y(Ke.data)).catch(Ke=>console.error(Ke))},[]);const oe=()=>{P(Ke=>[...Ke,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}])},G=Ke=>{P(ve=>ve.filter((xe,Ie)=>Ie!==Ke));const ge=Math.ceil((L.length-1)/W);M>ge&&ge>0&&V(ge)},ce=async(Ke,ge,ve)=>{const xe=[...L];if(xe[Ke][ge]=ve,ge==="materialId"&&xe[Ke].isManual)try{const Ze=(await Oe.get(`/api/material/byId/${ve}`)).data;Ze&&(xe[Ke]={...xe[Ke],materialId:Ze.materialId,description:Ze.description,baseUnit:Ze.baseUnit,orderUnit:Ze.orderUnit,location:Ze.location,materialgroup:Ze.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",ve)}P(xe)},Z=()=>{if(!z.trim()){X([]);return}if(console.log("Searching with query:",z,"Type:",B),console.log("Available materials:",e),B==="materialId"){let Ke=z;/^\d+$/.test(z)&&(Ke=ee+z);const ge=e.filter(ve=>(ve.materialId||"").toLowerCase().includes(Ke.toLowerCase()));console.log("Filtered results for materialId:",ge),X(ge)}else{const Ke=e.filter(ge=>(ge.description||"").toLowerCase().includes(z.toLowerCase()));console.log("Filtered results for description:",Ke),X(Ke)}};w.useEffect(()=>{const Ke=setTimeout(()=>{z.trim()?Z():X([])},300);return()=>clearTimeout(Ke)},[z,B,e]);const ae=Ke=>{const ge=Ke.target.value;re(ge)},je=()=>{X(e),re("")},de=()=>{X([]),re("")},ie=Ke=>{ue(Ke),Q(!0),re(""),X([])},be=()=>{Q(!1),ue(null),re(""),X([])},Ne=Ke=>{if(K!==null){const ge=[...L];ge[K]={...ge[K],materialId:Ke.materialId,description:Ke.description,baseUnit:Ke.baseUnit,orderUnit:Ke.orderUnit,location:Ke.location,materialgroup:Ke.materialgroup,isManual:!0},P(ge)}be()},Fe=async()=>{if(!C){alert("Please select a purchase category");return}if(!k||!D){alert("Please fill in Location and Buyer Group");return}const Ke=L.filter(ve=>ve.materialId&&ve.materialId.trim()!==""&&ve.description&&ve.description.trim()!==""&&ve.qty&&ve.qty>0);if(Ke.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const ge=b.find(ve=>ve.name===C||ve.categoryName===C||ve._id===C);try{const ve={indentIdType:m,externalIndentId:v,categoryId:ge._id,categoryName:ge.name||ge.categoryName,location:k,salesGroup:D,documentDate:T,items:Ke,companyId:se,financialYear:ne};if(m==="")h(ve),d(!1),i(!0);else{if(m==="internal"){const xe=await Oe.post("/api/salerequest/create",ve);alert(`Indent saved successfully with ID: ${xe.data.indentId}`)}else if(m==="external"){if(!v||v.trim()===""){alert("Please enter an External Indent ID");return}ve.indentId=v;const xe=await Oe.post("/api/indent/create",ve);alert(`Indent saved successfully with External ID: ${xe.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);i(!1),P([]),S(""),E(""),A(new Date().toISOString().split("T")[0]),V(1)}}catch(ve){console.error(ve),alert("Failed to save indent")}},Xe=M*W,ct=Xe-W,xt=L.slice(ct,Xe),Re=Math.ceil(L.length/W),ht=Ke=>V(Ke),At=({currentPage:Ke,totalPages:ge,onPageChange:ve,size:xe="normal"})=>{if(ge<=1)return null;const Ie=[],Ze=5;let Ft=Math.max(1,Ke-Math.floor(Ze/2)),Qe=Math.min(ge,Ft+Ze-1);Qe-Ft+1<Ze&&(Ft=Math.max(1,Qe-Ze+1));for(let Le=Ft;Le<=Qe;Le++)Ie.push(Le);const Ye=xe==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${Ke===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ye}`,onClick:()=>ve(Ke-1),disabled:Ke===1,children:"Previous"})}),Ft>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ye}`,onClick:()=>ve(1),children:"1"})}),Ft>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ye}`,children:"..."})})]}),Ie.map(Le=>a.jsx("li",{className:`page-item ${Ke===Le?"active":""}`,children:a.jsx("button",{className:`page-link ${Ye}`,onClick:()=>ve(Le),children:Le})},Le)),Qe<ge&&a.jsxs(a.Fragment,{children:[Qe<ge-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ye}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ye}`,onClick:()=>ve(ge),children:ge})})]}),a.jsx("li",{className:`page-item ${Ke===ge?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ye}`,onClick:()=>ve(Ke+1),disabled:Ke===ge,children:"Next"})})]})})},_t=()=>{i(!1),p(""),g(""),h(null),d(!0)},Wt=Ke=>{p(Ke),Ke==="internal"&&Fe()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-lg",value:C,onChange:Ke=>N(Ke.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),b.map((Ke,ge)=>a.jsx("option",{value:Ke.name||Ke.categoryName||Ke._id,children:Ke.name||Ke.categoryName||`Category ${ge+1}`},ge))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Doc Date ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:Ke=>A(Ke.target.value)})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Location ",a.jsx("span",{className:"text-danger",children:"*"})]})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-control-sm",value:k,onChange:Ke=>S(Ke.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),o.map((Ke,ge)=>a.jsx("option",{value:Ke.name||Ke._id,children:Ke.name||Ke._id},ge))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Group ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:Ke=>E(Ke.target.value),placeholder:"Buyer Group"})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",L.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-body p-0",children:L.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:"table-sm table-bordered table-striped mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xt.map((Ke,ge)=>{const ve=ct+ge;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:ve+1}),a.jsx("td",{children:Ke.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",value:Ke.materialId,onChange:xe=>ce(ve,"materialId",xe.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>ie(ve),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:Ke.materialId})}),a.jsx("td",{children:Ke.isManual?a.jsx("input",{className:"form-control form-control-sm",value:Ke.description,onChange:xe=>ce(ve,"description",xe.target.value),placeholder:"Description",readOnly:!!Ke.materialId}):a.jsx("span",{title:Ke.description,children:Ke.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ke.qty,onChange:xe=>ce(ve,"qty",xe.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:Ke.baseUnit,onChange:xe=>ce(ve,"baseUnit",xe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(xe=>a.jsx("option",{value:xe,children:xe},xe))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ke.deliveryDate,onChange:xe=>ce(ve,"deliveryDate",xe.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:Ke.orderUnit,onChange:xe=>ce(ve,"orderUnit",xe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(xe=>a.jsx("option",{value:xe,children:xe},xe))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ke.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>G(ve),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},ve)})})]})}),a.jsx("div",{className:"card-footer bg-light",children:a.jsx(At,{currentPage:M,totalPages:Re,onPageChange:ht,size:"small"})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]})}),a.jsx("div",{className:"col-md-6 d-flex align-items-end",children:a.jsxs("button",{onClick:oe,className:"btn btn-outline-primary me-2 btn-sm",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})]})]}),a.jsxs("button",{onClick:Fe,className:"btn btn-success btn-sm",disabled:!C||L.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]}),O&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:be})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:B,onChange:Ke=>Y(Ke.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:B==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:z,onChange:ae})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:je,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),U.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:de,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:U.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:U.map((Ke,ge)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge ",children:Ke.materialId})}),a.jsx("td",{children:Ke.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ke.baseUnit})}),a.jsx("td",{children:Ke.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ke.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Ke),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ge))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":z?`No materials found matching "${z}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:_t,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),m==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:Ke=>g(Ke.target.value),maxLength:50,required:!0,placeholder:"Enter custom Indent ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[v.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:Fe,disabled:!v.trim(),children:"Create Indent"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>p(""),children:"Back"})]})]}):a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>Wt("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]}),a.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>Wt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External(Custom ID)"]})]})})]})]})})})]})]})},m5e=()=>{const[e,t]=w.useState(1),[r]=w.useState(10),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(""),[d,u]=w.useState("indentId"),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState([]),[y,C]=w.useState(null),[N,k]=w.useState(null),S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear");w.useEffect(()=>{E()},[]);const E=()=>{m(!0),Oe.get("/api/salerequest/get",{params:{companyId:S,financialYear:D}}).then(V=>{const W=V.data.sort((ee,te)=>new Date(te.createdAt||te.documentDate)-new Date(ee.createdAt||ee.documentDate));s(W),o(W)}).catch(V=>console.error("Failed to fetch saved indents",V)).finally(()=>m(!1))},T=async(V,W,ee)=>{try{const te={[W]:ee};await Oe.put(`/api/salerequest/status/${V}`,te);const ne=se=>se.map(oe=>oe._id===V?{...oe,[W]:ee}:oe);s(ne),o(se=>ne(se)),alert("Status updated successfully!")}catch(te){console.error("Error updating status:",te),alert("Failed to update status!")}},A=()=>{v(!0),b(n)},L=()=>{v(!1),c(""),b([])},P=V=>{const W=V.target.value;if(c(W),W.trim()===""){b(n);return}const ee=n.filter(te=>{if(d==="indentId"){const ne=W.toLowerCase(),se=te.indentId.toLowerCase();return se.includes(ne)||se.replace(/[^0-9]/g,"").includes(ne.replace(/[^0-9]/g,""))}else{if(d==="location")return te.location.toLowerCase().includes(W.toLowerCase());if(d==="buyerGroup")return te.buyerGroup.toLowerCase().includes(W.toLowerCase());if(d==="categoryName")return te.categoryName.toLowerCase().includes(W.toLowerCase())}return!1});b(ee)};w.useEffect(()=>{const V=n.find(W=>W._id===y);k(V)},[y,n]);const O=()=>{b(n),c("")},Q=()=>{b([]),c("")},z=V=>{o([V]),t(1),L()},re=()=>{o(n),t(1)},U=V=>{const W=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${V.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(V.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${V.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${V.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${V.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${V.items.map((te,ne)=>`
                                <tr style="${ne%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ne+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${te.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${te.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ee=window.open("","","width=900,height=700");ee.document.write("<html><head><title>Indent Print - "+V.indentId+"</title></head><body>"),ee.document.write(W),ee.document.write("</body></html>"),ee.document.close(),ee.print()},X=e*r,B=X-r,Y=i.slice(B,X),K=Math.ceil(i.length/r),ue=V=>t(V),M=({currentPage:V,totalPages:W,onPageChange:ee})=>{if(W<=1)return null;const te=[],ne=5;let se=Math.max(1,V-Math.floor(ne/2)),oe=Math.min(W,se+ne-1);oe-se+1<ne&&(se=Math.max(1,oe-ne+1));for(let G=se;G<=oe;G++)te.push(G);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${V===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(V-1),disabled:V===1,children:"Previous"})}),se>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ee(1),children:"1"})}),se>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),te.map(G=>a.jsx("li",{className:`page-item ${V===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(G),children:G})},G)),oe<W&&a.jsxs(a.Fragment,{children:[oe<W-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ee(W),children:W})})]}),a.jsx("li",{className:`page-item ${V===W?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(V+1),disabled:V===W,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("div",{}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-light btn-sm",onClick:A,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:re,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):Y.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table-sm table table-bordered align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Y.map((V,W)=>{const ee=B+W;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:ee+1}),a.jsx("td",{children:V.indentId}),a.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),a.jsx("td",{children:V.salesGroup}),a.jsx("td",{children:V.categoryName}),a.jsxs("td",{className:"text-center",children:[V.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isDeleted||!1,onChange:te=>T(V._id,"isDeleted",te.target.checked)}),a.jsx("label",{className:"form-check-label",children:V.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isBlocked||!1,onChange:te=>T(V._id,"isBlocked",te.target.checked)}),a.jsx("label",{className:"form-check-label",children:V.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>U(V),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>C(V._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},V._id)})})]})}),K>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(M,{currentPage:e,totalPages:K,onPageChange:ue})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:re,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:L})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:V=>u(V.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:P})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:O,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Q,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:g.map((V,W)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:V.indentId})}),a.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:V.buyerGroup})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:V.categoryName})}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[V.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(V),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},W))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:L,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:N?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:N?.items.map((V,W)=>a.jsxs("tr",{children:[a.jsx("td",{children:W+1}),a.jsx("td",{children:V.materialId}),a.jsx("td",{children:V.description}),a.jsx("td",{children:V.qty}),a.jsx("td",{children:V.baseUnit}),a.jsx("td",{children:V.orderUnit}),a.jsx("td",{children:V.location}),a.jsx("td",{children:new Date(V.deliveryDate).toLocaleDateString()})]},V._id))})]})})})]})})})]})};function p5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,Q]=w.useState(""),[z,re]=w.useState(!1),[U,X]=w.useState(!1),[B,Y]=w.useState(!1),[K,ue]=w.useState(null),[M,V]=w.useState(""),[W,ee]=w.useState([]),te=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear"),se=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:te,financialYear:ne}}).then(ge=>{const ve=ge.data.filter(xe=>!xe.isBlocked&&!xe.isDeleted);t(ve)}).catch(console.error),Oe.get("/api/sale-quotation-categories",{params:{companyId:te,financialYear:ne}}).then(ge=>n(ge.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:te,financialYear:ne}}).then(ge=>{console.log("Locations API response:",ge.data),Array.isArray(ge.data)?ee(ge.data):ge.data&&Array.isArray(ge.data.locations)?ee(ge.data.locations):ee([])}).catch(ge=>{console.error("Failed to fetch locations:",ge),ee([])}),console.log("location",M),Oe.get("/api/customers",{params:{companyId:te,financialYear:ne}}).then(ge=>{const ve=ge.data.filter(xe=>!xe.isBlocked&&!xe.isDeleted);i(ve)}).catch(console.error),Oe.get("/api/material").then(ge=>l(ge.data)).catch(console.error),oe()},[]);const oe=()=>{Oe.get("/api/salesquotations").then(ge=>h(ge.data)).catch(console.error)},G=ge=>{p({label:ge.indentId,value:ge._id}),d(ge.salesGroup||""),E(ge.items.map(ve=>({...ve,customerName:b?.name1||"",price:"",unit:""}))),Y(!1)},ce=ge=>{y({label:`${ge.name1} ${ge.name2}`,value:ge._id}),E(ve=>ve.map(xe=>({...xe,customerName:ge.name1}))),X(!1)},Z=ge=>{const ve=[...D];ve[K]={...ve[K],materialId:ge.materialId,description:ge.description,baseUnit:ge.baseUnit,unit:ge.unit,price:ge.price},E(ve),re(!1)},ae=(ge,ve,xe)=>{const Ie=[...D];Ie[ge][ve]=xe,E(Ie)},je=()=>{E(ge=>[...ge,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[de,ie]=w.useState(!1),[be,Ne]=w.useState("internal"),[Fe,Xe]=w.useState(""),ct=ge=>{ge.preventDefault(),ie(!0)},xt=()=>{const ge={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:se,financialYear:ne,validityDate:k,salesGroup:c,location:M,items:D,quotationNumberType:be,externalQuotationNumber:be==="external"?Fe:null};Oe.post("/api/salesquotations",ge).then(()=>{alert("Quotation saved successfully!"),oe(),ht(),ie(!1),Ne("internal"),Xe("")}).catch(ve=>{console.error(ve),alert("Error saving quotation")})},Re=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Quotation Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>ie(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ne("internal"),xt()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ne("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),be==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Fe,onChange:ge=>{ge.target.value.length<=50&&Xe(ge.target.value)},onKeyPress:ge=>{ge.key==="Enter"&&Fe.trim()&&xt()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[Fe.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:xt,disabled:!Fe.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Quotation"]})})]})]})]})})})]}),ht=()=>{p(null),g(null),y(null),N(""),S(""),E([])},At=({children:ge,onClose:ve})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ve})]}),a.jsx("div",{className:"modal-body",children:ge})]})})}),_t=()=>{const[ge,ve]=w.useState([]),[xe,Ie]=w.useState("materialId"),Ze=Ye=>{const Le=Ye.target.value;A(Le);const ze=o.filter(ut=>(xe==="materialId"?ut.materialId:ut.description)?.toLowerCase().includes(Le.toLowerCase()));ve(ze)},Ft=()=>{ve(o),A("")},Qe=()=>{ve([]),A("")};return a.jsxs(At,{onClose:()=>re(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:xe,onChange:Ye=>Ie(Ye.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:xe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:T,onChange:Ze})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ge.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ge.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ge.map((Ye,Le)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ye.materialId})}),a.jsx("td",{children:Ye.description}),a.jsx("td",{children:Ye.baseUnit}),a.jsx("td",{children:Ye.unit}),a.jsx("td",{children:Ye.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(Ye),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Le))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":T?`No materials found matching "${T}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},Wt=()=>{const[ge,ve]=w.useState("name1"),[xe,Ie]=w.useState([]),Ze=Ye=>{const Le=Ye.target.value;P(Le);const ze=s.filter(ut=>(ge==="name1"?ut.name1:ge==="city"?ut.city:ge==="region"?ut.region:`${ut.name1} ${ut.name2}`)?.toLowerCase().includes(Le.toLowerCase()));Ie(ze)},Ft=()=>{Ie(s),P("")},Qe=()=>{Ie([]),P("")};return a.jsxs(At,{onClose:()=>X(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ge,onChange:Ye=>ve(Ye.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:L,onChange:Ze})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),xe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((Ye,Le)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[Ye.name1," ",Ye.name2]}),a.jsx("td",{children:Ye.city}),a.jsx("td",{children:Ye.region}),a.jsx("td",{children:Ye.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ce(Ye),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Le))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":L?`No match found for "${L}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>X(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},Ke=()=>{const[ge,ve]=w.useState([]),[xe,Ie]=w.useState("indentId"),[Ze,Ft]=w.useState(""),Qe=ze=>{const ut=ze.target.value;Ft(ut);const Te=e.filter(We=>(xe==="indentId"?We.indentId:xe==="categoryName"?We.categoryName:We.location)?.toLowerCase().includes(ut.toLowerCase()));ve(Te)},Ye=()=>{ve(e),Ft("")},Le=()=>{ve([]),Ft("")};return a.jsxs(At,{onClose:()=>Y(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:xe,onChange:ze=>Ie(ze.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Ze,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ge.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Le,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ge.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ge.map((ze,ut)=>a.jsxs("tr",{children:[a.jsx("td",{children:ze.indentId}),a.jsx("td",{children:ze.categoryName}),a.jsx("td",{children:ze.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>G(ze),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ut))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Ze?`No match for "${Ze}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>Y(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:ge=>{const ve=ge.target.value;p({label:ve,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Y(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:ge=>{const ve=ge.target.value;y({label:ve,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>X(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:M,onChange:ge=>V(ge.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(W)&&W.map((ge,ve)=>a.jsx("option",{value:ge.name||ge._id||ge,children:ge.name||ge.locationName||ge},ve))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category:"})}),"  ",a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:ge=>{const ve=ge.target.value,xe=r.find(Ie=>Ie._id===ve);g(xe?{label:xe.categoryName,value:xe._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(ge=>a.jsxs("option",{value:ge._id,children:[ge.categoryName," (",ge.prefix,")"]},ge._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:ge=>S(ge.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:ge=>d(ge.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})})," ",a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:ge=>N(ge.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:ct,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((ge,ve)=>a.jsxs("tr",{children:[a.jsx("td",{children:ve+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:ge.materialId,onChange:xe=>ae(ve,"materialId",xe.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{ue(ve),re(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.description,onChange:xe=>ae(ve,"description",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:ge.qty,onChange:xe=>ae(ve,"qty",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.baseUnit,onChange:xe=>ae(ve,"baseUnit",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.orderUnit,onChange:xe=>ae(ve,"orderUnit",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.location,onChange:xe=>ae(ve,"location",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.customerName,onChange:xe=>ae(ve,"customerName",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ge.unit,onChange:xe=>ae(ve,"unit",xe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:ge.price,onChange:xe=>ae(ve,"price",xe.target.value)})})]},ve))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:je,children:"+ Add Quotation Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})})})})})]}),z&&a.jsx(_t,{}),U&&a.jsx(Wt,{}),B&&a.jsx(Ke,{}),de&&a.jsx(Re,{})]})]})}function x5e(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),o=10,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/salesquotations",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch quotations",k),alert("Error loading quotations")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Quotation</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Quotation: ${k.quotationNumber}</h2>
          <p><strong>Indent ID:</strong> ${k.indentId}</p>
          <p><strong>Customer Name:</strong> ${k.customerName}</p>
          <p><strong>Validity Date:</strong> ${k.validityDate}</p>
          <p><strong>Note:</strong> ${k.note}</p>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId}</td>
                      <td>${E.description}</td>
                      <td>${E.qty}</td>
                      <td>${E.baseUnit}</td>
                      <td>${E.orderUnit}</td>
                      <td>${E.location}</td>
                      <td>${E.unit}</td>
                      <td>${E.price}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=w.useState(""),[m,p]=w.useState(""),v=e.filter(k=>{const S=k.quotationNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),N=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item",children:"Sales Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6"}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Quotation No, Indent ID or Customer Name",value:r,onChange:k=>{n(k.target.value),i(1)}})]})}),a.jsxs("div",{className:" col-xl-3  d-flex gap-2",children:[a.jsx("label",{children:"From:"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}}),a.jsx("label",{children:"To:"}),a.jsx("input",{type:"date",className:"form-control",value:m,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-flex",children:k.quotationNumber}),a.jsx("td",{className:"text-flex",children:k.indentId}),a.jsx("td",{className:"text-flex",children:k.customerName}),a.jsx("td",{className:"text-flex",children:k.location}),a.jsx("td",{className:"text-flex",children:k.validityDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>d(k),children:[a.jsx("i",{className:"fas fa-print"})," Print"]})})]},S))})]})})]}),C>1&&a.jsx("nav",{className:"ms-auto",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>N(s-1),className:"page-link",disabled:s===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>N(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>N(s+1),className:"page-link",disabled:s===C,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})}function v5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(new Date().toISOString().substring(0,10)),[m,p]=w.useState([]),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState(0),[T,A]=w.useState([]),[L,P]=w.useState([]),[O,Q]=w.useState([]),[z,re]=w.useState(""),[U,X]=w.useState(!1),[B,Y]=w.useState(""),[K,ue]=w.useState([]),[M,V]=w.useState(!1),[W,ee]=w.useState(""),[te,ne]=w.useState([]),[se,oe]=w.useState(""),[G,ce]=w.useState(""),[Z,ae]=w.useState(""),[je,de]=w.useState(""),[ie,be]=w.useState(0),[Ne,Fe]=w.useState(0),[Xe,ct]=w.useState(0),[xt,Re]=w.useState([]),[ht,At]=w.useState(null),[_t,Wt]=w.useState(0),[Ke,ge]=w.useState(0),[ve,xe]=w.useState(0),[Ie,Ze]=w.useState(0),[Ft,Qe]=w.useState(0),[Ye,Le]=w.useState([]),[ze,ut]=w.useState(!1),[Te,We]=w.useState(""),[Ge,It]=w.useState(null),Bt=localStorage.getItem("selectedCompanyId"),Ee=localStorage.getItem("financialYear"),_e=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>t(vt.data)),Oe.get("/api/salesquotations",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>{n(vt.data);const br=[];vt.data.forEach(hr=>{hr.items.forEach(qr=>{qr.salesGroup&&!br.includes(qr.salesGroup)&&br.push(qr.salesGroup)})}),Q(br)}),Oe.get("/api/locations",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>p(vt.data)),Oe.get("/api/tax",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>Re(vt.data)),Oe.get("/api/material",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>Le(vt.data)),Oe.get("/api/customers",{params:{companyId:Bt,financialYear:Ee}}).then(vt=>A(vt.data)),S([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]),console.log("customers",T);const st=vt=>{console.log("Selected Quotation/Contract/Enquiry:",vt);const br=hr=>hr?.map(qr=>({...qr,quantity:qr.qty||qr.quantity||0}))||[];vt.contractNumber?(l(vt.contractNumber),P(vt.customerName||""),y(vt.location||""),S(br(vt.items)),oe(vt.salesGroup||"")):vt.quotationNumber?(l(vt.quotationNumber),P(vt.customerName||""),y(vt.location||""),S(br(vt.items)),oe(vt.salesGroup||"")):vt.indentId&&(l(vt.indentId),y(vt.location||""),S(br(vt.items)),oe(vt.salesGroup||"")),X(!1)},wt=()=>{X(!1),Y(""),ue([])},rr=vt=>{if(ee(vt),vt.trim()){const br=T.filter(hr=>hr.name1?.toLowerCase().includes(vt.toLowerCase())||hr.cnNo?.toLowerCase().includes(vt.toLowerCase()));ne(br)}else ne([])},Ot=()=>{ne(T)},er=vt=>{P(vt.name1||vt.customerName),V(!1),ee(""),ne([])},fr=vt=>{l(vt);const br=r.find(hr=>hr.quotationNumber===vt);if(br){P(br.name1||br.customerName),y(br.items[0]?.location||"");const hr=br.items.find(Qr=>Qr.salesGroup);hr&&setSalesGroup(hr.salesGroup);const qr=br.items.map(Qr=>({materialId:Qr.materialId,description:Qr.description,quantity:Qr.qty,baseUnit:Qr.baseUnit,unit:Qr.unit,orderUnit:Qr.orderUnit,price:Qr.price,priceUnit:Qr.priceUnit,materialgroup:Qr.materialgroup,deliveryDate:Qr.deliveryDate?String(Qr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));S(qr),Yr(qr)}},yr=()=>{V(!1),ee(""),ne([])},Yr=(vt,br,hr,qr,Qr)=>{const da=vt.reduce(($s,Qi)=>$s+(Qi.quantity||0)*(Qi.price||0),0);E(da.toFixed(2));const Fn=br!==void 0?br:_t,Ia=hr!==void 0?hr:Ke,Ti=qr!==void 0?qr:ve,ya=Qr!==void 0?Qr:Ie,ka=da*(parseFloat(Fn)||0)/100,pl=da*(parseFloat(Ia)||0)/100,es=da*(parseFloat(Ti)||0)/100,$o=parseFloat(ya)||0;be(ka.toFixed(2)),Fe(pl.toFixed(2)),ct(es.toFixed(2));const Or=da+ka+pl+es-$o;Qe(Or.toFixed(2))},ur=vt=>{Wt(vt),Yr(k,vt,Ke,ve,Ie)},me=vt=>{ge(vt),Yr(k,_t,vt,ve,Ie)},Be=vt=>{xe(vt),Yr(k,_t,Ke,vt,Ie)},Ae=vt=>{Ze(vt),Yr(k,_t,Ke,ve,vt)},ke=(vt,br,hr)=>{const qr=[...k];qr[vt][br]=br==="quantity"||br==="price"?parseFloat(hr)||0:hr,S(qr),Yr(qr,_t,Ke,ve,Ie)},Me=()=>{S([...k,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},$e=vt=>{const br=[...k];br.splice(vt,1),S(br),Yr(br)},[pt,jt]=w.useState(!1),[ot,bt]=w.useState("internal"),[yt,Yt]=w.useState(""),[sr,mr]=w.useState(""),ir=async vt=>{if(vt.preventDefault(),!s||!o)return alert("Please select both category and quotation");jt(!0)},Ve=async(vt=null)=>{const br=r.find(qr=>qr.quotationNumber===o),hr={soNumber:z,quotationId:br?._id,quotationNumber:o,categoryId:s._id,category:s.categoryName,date:u,customerName:L,contactPerson:G,salesGroup:se,payTerms:Z,validityDate:je,deliveryLocation:b,deliveryAddress:C,items:k,companyId:_e,financialYear:Ee,total:parseFloat(D)||0,taxName:ht?.taxName||"",cgst:parseFloat(_t)||0,sgst:parseFloat(Ke)||0,igst:parseFloat(ve)||0,taxDiscount:parseFloat(Ie)||0,finalTotal:parseFloat(Ft)||0,soNumberType:vt?"external":"internal",customSONumber:vt};try{const qr=await Oe.post("/api/sales-orders",hr);console.log("Saved SO:",qr.data),i(null),l(""),h(new Date().toISOString().substring(0,10)),A(""),y(""),N(""),S([]),E(""),At(null),Wt(""),ge(""),xe(""),Ze(""),Qe(""),ae(""),oe(""),ce(""),jt(!1),bt("internal"),Yt(""),mr(""),alert("Sales Order Created Successfully with SO Number: "+qr.data.soNumber)}catch(qr){console.error("Error during SO creation:",qr),alert("Failed to create Sales Order")}},dr=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Generate Sales Order Number"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{jt(!1),bt("internal"),Yt("")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the SO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{bt("internal"),Ve(null)},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>bt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ot==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom SO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number (max 50 characters)",value:yt,onChange:vt=>Yt(vt.target.value),onKeyPress:vt=>{vt.key==="Enter"&&yt.trim()&&Ve(yt)},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[yt.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>Ve(yt),disabled:!yt.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save SO"]})})]}),ot==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"SO number will be auto-generated based on category: ",a.jsx("strong",{children:s?.categoryName}),a.jsx("br",{}),a.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]}),or=()=>{const vt=Ye.filter(hr=>hr.materialId.toLowerCase().includes(Te.toLowerCase())||hr.description.toLowerCase().includes(Te.toLowerCase())),br=hr=>{const qr=[...k];qr[Ge]={...qr[Ge],materialId:hr.materialId,description:hr.description,baseUnit:hr.baseUnit,unit:hr.unit,price:hr.price,salesGroup:hr.salesGroup,materialgroup:hr.materialgroup},S(qr),Yr(qr),ut(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:Te,onChange:hr=>We(hr.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:vt.map((hr,qr)=>a.jsxs("tr",{children:[a.jsx("td",{children:hr.materialId}),a.jsx("td",{children:hr.description}),a.jsx("td",{children:hr.baseUnit}),a.jsx("td",{children:hr.unit}),a.jsx("td",{children:hr.price}),a.jsx("td",{children:hr.priceUnit}),a.jsx("td",{children:hr.salesGroup}),a.jsx("td",{children:hr.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>br(hr),children:"Select"})})]},qr))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>ut(!1),style:{marginTop:10},children:"Close"})]})})};function $r({show:vt,onClose:br,onSelect:hr,selectedTab:qr="enquiry"}){const[Qr,da]=w.useState(qr),[Fn,Ia]=w.useState(""),[Ti,ya]=w.useState([]);w.useEffect(()=>{Ia(""),ya([]),ka()},[Qr]);const ka=async()=>{let Or="";Qr==="enquiry"?Or="/api/salerequest/get":Qr==="quotation"?Or="/api/salesquotations":Qr==="contract"&&(Or="/api/salescontracts");const $s=await Oe.get(`${Or}`,{params:{companyId:Bt,financialYear:Ee}});ya($s.data)},pl=async Or=>{if(Ia(Or),!Or){ka();return}ya($s=>$s.filter(Qi=>(Qi.quotationNumber||Qi.enquiryNumber||Qi.contractNumber||"").toLowerCase().includes(Or.toLowerCase())))},es=Or=>Or.quotationNumber||Or.indentId||Or.contractNumber||"",$o=Or=>new Date(Or.date||Or.validityDate||Or.createdAt||"").toLocaleDateString();return vt?a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),Qr==="enquiry"?"Search Enquiries":Qr==="quotation"?"Search Quotations":"Search Contracts"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:br})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Qr==="enquiry"?"active":""}`,onClick:()=>da("enquiry"),children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Qr==="quotation"?"active":""}`,onClick:()=>da("quotation"),children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Qr==="contract"?"active":""}`,onClick:()=>da("contract"),children:"Contract"})})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${Qr} number...`,value:Fn,onChange:Or=>pl(Or.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:ka,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ti.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ti.map((Or,$s)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:es(Or)})}),a.jsx("td",{children:$o(Or)}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{hr(Or),br()},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},$s))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Fn?`No ${Qr}s found matching "${Fn}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:br,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const gn=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:yr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Custmore"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:W,onChange:vt=>rr(vt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Ot,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:te.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer Code"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"address1"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:te.map((vt,br)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:vt.cnNo})}),a.jsx("td",{children:vt.name1}),a.jsx("td",{children:vt.email}),a.jsx("td",{children:vt.address1}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>er(vt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},br))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:W?`No vendors found matching "${W}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:yr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Sales Order Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Reference Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference number",value:o,onChange:vt=>{l(vt.target.value),vt.target.value&&fr(vt.target.value)},required:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>X(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"SO Category:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",onChange:vt=>{const br=e.find(hr=>hr._id===vt.target.value);i(br)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),e.map(vt=>a.jsx("option",{value:vt._id,children:vt.categoryName},vt._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"SO Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:z,readOnly:!0})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"SO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:vt=>h(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:L,onChange:vt=>P(vt.target.value),placeholder:"Enter customer name"}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>V(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:b,onChange:vt=>y(vt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),m.map(vt=>a.jsx("option",{value:vt.name||vt.locationName||vt._id,children:vt.name||vt.locationName||vt._id},vt._id||vt.id||vt.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:se,onChange:vt=>oe(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:G,onChange:vt=>ce(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Payment Terms:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Z,onChange:vt=>ae(vt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:je,onChange:vt=>de(vt.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",style:{width:"100%",tableLayout:"fixed"},children:a.jsxs("table",{className:" table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.map((vt,br)=>a.jsxs("tr",{children:[a.jsx("td",{children:br+1}),a.jsx("td",{children:a.jsx("input",{value:vt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{It(br),ut(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.description,onChange:hr=>ke(br,"description",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.quantity,onChange:hr=>ke(br,"quantity",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.baseUnit,onChange:hr=>ke(br,"baseUnit",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.orderUnit,onChange:hr=>ke(br,"orderUnit",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.materialgroup,onChange:hr=>ke(br,"materialgroup",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.price,onChange:hr=>ke(br,"price",hr.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:vt.priceUnit,onChange:hr=>ke(br,"priceUnit",hr.target.value),required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(vt.quantity*vt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:vt.deliveryDate,onChange:hr=>ke(br,"deliveryDate",hr.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:vt.note,onChange:hr=>ke(br,"note",hr.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>$e(br),children:a.jsx("i",{className:"ti ti-trash"})})})]},br))})]})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:Me,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:ir,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:C,onChange:vt=>N(vt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-6 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",onChange:vt=>{const br=xt.find(hr=>hr.taxName===vt.target.value);if(At(br),br){const hr=br.cgst||0,qr=br.sgst||0,Qr=br.igst||0;Wt(hr),ge(qr),xe(Qr),Yr(k,hr,qr,Qr,Ie)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),xt.map(vt=>a.jsx("option",{value:vt.taxName,children:vt.taxName},vt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:_t,onChange:vt=>ur(vt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ke,onChange:vt=>me(vt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:ve,onChange:vt=>Be(vt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Tax Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ie,onChange:vt=>Ae(vt.target.value),step:"0.01"})})]})]}),a.jsx("div",{className:"border-top pt-3 ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["",D]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["",ie]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["",Ne]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["",Xe]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ",Ie]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["",Ft]})]})]})})})]})]})})]}),a.jsx("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:"Submit SO"})]})})})})})]}),ze&&a.jsx(or,{}),U&&a.jsx($r,{show:U,onClose:wt,onSelect:st}),M&&a.jsx(gn,{}),pt&&a.jsx(dr,{})]})})]})})}function g5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=w.useState(""),[u,h]=w.useState(""),[m,p]=w.useState("");w.useEffect(()=>{const T=e.filter(A=>{const L=A.soNumber?.toLowerCase().includes(c.toLowerCase())||A.poNumber?.toLowerCase().includes(c.toLowerCase())||A.vendor?.toLowerCase().includes(c.toLowerCase())||A.customer?.toLowerCase().includes(c.toLowerCase())||A.category?.toLowerCase().includes(c.toLowerCase())||A.quotationNumber?.toLowerCase().includes(c.toLowerCase())||A.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||A.deliveryAddress?.toLowerCase().includes(c.toLowerCase()),P=new Date(A.createdAt),O=u?new Date(u):null,Q=m?new Date(m):null,z=(!O||P>=O)&&(!Q||P<=Q);return L&&z});n(T)},[c,u,m,e]);const[v,g]=w.useState(1),[b]=w.useState(10);w.useEffect(()=>{y()},[]);const y=()=>{i(!0),Oe.get("/api/sales-orders",{params:{companyId:o,financialYear:l}}).then(T=>{const A=T.data.sort((L,P)=>new Date(P.createdAt)-new Date(L.createdAt));t(A),n(A),i(!1)}).catch(T=>{console.error("Error fetching POs:",T),alert("Failed to fetch POs"),i(!1)})},C=v*b,N=C-b,k=r.slice(N,C),S=Math.ceil(r.length/b),D=T=>g(T),E=T=>{const A=T.items.map((O,Q)=>`
      <tr>
        <td>${Q+1}</td>
        <td>${O.materialId}</td>
        <td>${O.description}</td>
        <td>${O.quantity}</td>
        <td>${O.baseUnit}</td>
        <td>${O.unit}</td>
        <td>${O.orderUnit}</td>
        <td>${O.price}</td>
        <td>${O.salesGroup}</td>
        <td>${O.materialgroup}</td>
        <td>${O.deliveryDate}</td>
      </tr>
    `).join(""),L=`
      <html>
      <head>
        <title>Sales Order - ${T.soNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; }
          th { background-color: #f0f0f0; }
        </style>
      </head>
      <body>
        <h2>sales Order Details</h2>
        <p><strong>PO Number:</strong> ${T.poNumber}</p>
        <p><strong>Date:</strong> ${T.date}</p>
        <p><strong>Vendor:</strong> ${T.vendor}</p>
        <p><strong>Category:</strong> ${T.category}</p>
        <p><strong>Quotation Number:</strong> ${T.quotationNumber}</p>
        <p><strong>Delivery Location:</strong> ${T.deliveryLocation}</p>
        <p><strong>Delivery Address:</strong> ${T.deliveryAddress}</p>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Base Unit</th>
              <th>Unit</th>
              <th>Order Unit</th>
              <th>Price</th>
              <th>Buyer Group</th>
              <th>Material Group</th>
              <th>Delivery Date</th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>

        <h3>Tax Summary</h3>
        <p><strong>Total:</strong> ${T.total}</p>
        <p><strong>Tax Name:</strong> ${T.taxName}</p>
        <p><strong>CGST:</strong> ${T.cgst}%</p>
        <p><strong>SGST:</strong> ${T.sgst}%</p>
        <p><strong>IGST:</strong> ${T.igst}%</p>
        <p><strong>Tax Discount:</strong> ${T.taxDiscount}</p>
        <p><strong>Final Total:</strong> ${T.finalTotal}</p>
      </body>
      </html>
    `,P=window.open("","","width=800,height=600");P.document.write(L),P.document.close(),P.print()};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsx("h2",{children:"Sales Order Display"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search PO Number, Vendor, Category, etc.",value:c,onChange:T=>{d(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:u,onChange:T=>{h(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:m,onChange:T=>{p(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-2 mb-1",children:a.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(1)},children:"Reset Filters"})})]})]}),s?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Delivery Address"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.length>0?k.map(T=>a.jsxs("tr",{children:[a.jsx("td",{children:T.soNumber}),a.jsx("td",{children:T.date}),a.jsx("td",{children:T.customerName}),a.jsx("td",{children:T.category}),a.jsx("td",{children:T.quotationNumber}),a.jsx("td",{children:T.deliveryLocation}),a.jsx("td",{children:T.deliveryAddress}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>E(T),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})]},T._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No sales orders found"})]})})})]})})})}),S>1&&a.jsx("nav",{"aria-label":"sales Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v-1),disabled:v===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const A=[],L=[];A.push(1);for(let Q=Math.max(2,v-2);Q<=Math.min(S-1,v+2);Q++)A.push(Q);S>1&&A.push(S);const P=[...new Set(A)].sort((Q,z)=>Q-z);let O;for(let Q of P)O&&(Q-O===2?L.push(O+1):Q-O!==1&&L.push("...")),L.push(Q),O=Q;return L.map((Q,z)=>Q==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${z}`):a.jsx("li",{className:`page-item ${v===Q?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(Q),children:Q})},Q))})(),a.jsx("li",{className:`page-item ${v===S?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v+1),disabled:v===S,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}const b5e=()=>{const[e,t]=w.useState({name:"",address:"",pincode:"",country:"",phone:"",email:""}),r=l=>{t(c=>({...c,[l.target.name]:l.target.value}))},[n,s]=w.useState(null),i=l=>{s(l.target.files[0])},o=async l=>{l.preventDefault();const c=new FormData;Object.entries(e).forEach(([d,u])=>{c.append(d,u)}),n&&c.append("logo",n);try{await Oe.post("/api/companies/create",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Company added successfully!"),t({name:"",address:"",pincode:"",country:"",phone:"",email:""}),s(null),document.getElementById("logoInput").value=""}catch(d){alert("Error adding company. Please try again."),console.error("Error:",d)}};return a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8 col-lg-6",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-primary text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Create Company"]})}),a.jsx("div",{className:"card-body",children:a.jsx("form",{onSubmit:o,children:a.jsxs("div",{className:"row",children:[[{label:"Company Name",name:"name",icon:"fas fa-building"},{label:"Address",name:"address",icon:"fas fa-map-marker-alt"},{label:"Pincode",name:"pincode",icon:"fas fa-map-pin"},{label:"Country",name:"country",icon:"fas fa-globe"},{label:"Phone",name:"phone",icon:"fas fa-phone"},{label:"Email",name:"email",type:"email",icon:"fas fa-envelope"}].map(({label:l,name:c,type:d="text",icon:u})=>a.jsxs("div",{className:"col-xl-4 mb-3",children:[a.jsxs("label",{htmlFor:c,className:"form-label",children:[a.jsx("i",{className:`${u} me-2`}),l,c==="name"&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:d,id:c,name:c,value:e[c],onChange:r,placeholder:`Enter ${l.toLowerCase()}`,className:"form-control",required:c==="name"})]},c)),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"logoInput",className:"form-label",children:[a.jsx("i",{className:"fas fa-image me-2"}),"Company Logo"]}),a.jsx("input",{type:"file",id:"logoInput",accept:"image/*",onChange:i,className:"form-control form-control-sm"}),a.jsx("div",{className:"form-text",children:"Upload your company logo (PNG, JPG, or GIF format)"})]}),a.jsx("div",{className:"d-grid",children:a.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Company"]})})]})})})]})})})})};function y5e(){const[e,t]=w.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState({}),[v,g]=w.useState([]),[b,y]=w.useState(!1),[C,N]=w.useState(!1),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(!1),L=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","West Bengal","Odisha","Bihar","Jharkhand","Madhya Pradesh","Chhattisgarh","Uttar Pradesh"],P=["India","USA","Germany","France","UK"];w.useEffect(()=>{O(),Q()},[]);const O=async()=>{try{const Re=await Oe.get("/api/customer-categories",{params:{companyId:r,financialYear:n}});i(Re.data)}catch(Re){console.error("Error fetching categories:",Re)}},Q=async()=>{try{const ht=(await Oe.get("/api/customers",{params:{companyId:r,financialYear:n}})).data.sort((At,_t)=>new Date(_t.createdAt)-new Date(At.createdAt));l(ht)}catch(Re){console.error("Error fetching customers:",Re)}},z=Re=>{const{name:ht,value:At}=Re.target;ht==="email"&&At&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(At)?Re.target.setCustomValidity(""):Re.target.setCustomValidity("Please enter a valid email address")),t(_t=>({..._t,[ht]:At})),m[ht]&&p(_t=>({..._t,[ht]:""}))},re=()=>{const Re={};return e.categoryId||(Re.categoryId="Category is required."),e.name1.trim()||(Re.name1="Name 1 is required."),e.search.trim()||(Re.search="Search term is required."),e.address1.trim()||(Re.address1="Address 1 is required."),e.region||(Re.region="Region is required."),e.country||(Re.country="Country is required."),e.contactNo.trim()?/^[0-9]{10}$/.test(e.contactNo.trim())||(Re.contactNo="Contact No must be exactly 10 digits."):Re.contactNo="Contact No is required.",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())&&(Re.email="Please enter a valid email address."),e.pincode.trim()&&!/^[0-9]{6}$/.test(e.pincode.trim())&&(Re.pincode="Pincode must be exactly 6 digits."),k==="external"&&!D.trim()&&(Re.externalCustomerId="External Customer ID is required."),k==="external"&&D.length>50&&(Re.externalCustomerId="External Customer ID cannot exceed 50 characters."),p(Re),Object.keys(Re).length===0},U=async Re=>{if(Re.preventDefault(),!re()){const ht=Object.values(m).filter(At=>At);alert(ht.join(`
`));return}N(!0),A(!1)},X=async(Re=k)=>{try{const ht={...e,customerType:Re,companyId:r,financialYear:n,externalCustomerId:Re==="external"?D:null};if(u)await Oe.put(`/api/customers/${u}`,ht),alert("Customer updated successfully!");else{const At=await Oe.post("/api/customers",ht);d(At.data.cnNo),alert(`Customer saved successfully! CNNo: ${At.data.cnNo}`)}Q(),B(),A(!1),N(!1)}catch(ht){console.error("Error saving customer:",ht),alert("Error saving customer. Please try again.")}},B=()=>{t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),h(null),p({}),d(""),S(""),E("")},Y=Re=>{t({categoryId:Re.categoryId?._id||"",name1:Re.name1||"",name2:Re.name2||"",search:Re.search||"",address1:Re.address1||"",address2:Re.address2||"",city:Re.city||"",pincode:Re.pincode||"",region:Re.region||"",country:Re.country||"",contactNo:Re.contactNo||"",name:Re.name||"",email:Re.email||""}),h(Re._id),d(Re.cnNo),S(Re.customerType||"internal"),E(Re.externalCustomerId||""),p({}),A(!0)},K=()=>{N(!1),S(""),E("")},ue=Re=>{S(Re),Re==="internal"&&X("internal")},M=()=>{if(!D.trim()){alert("Please enter External Customer ID");return}if(D.length>50){alert("External Customer ID cannot exceed 50 characters");return}X("external")},[V,W]=w.useState(""),[ee,te]=w.useState(1),ne=10,se=o.filter(Re=>{const ht=V.toLowerCase();return Re.cnNo?.toLowerCase().includes(ht)||Re.name1?.toLowerCase().includes(ht)||Re.categoryId?.categoryName?.toLowerCase().includes(ht)||Re.search?.toLowerCase().includes(ht)||Re.address1?.toLowerCase().includes(ht)||Re.city?.toLowerCase().includes(ht)||Re.pincode?.toLowerCase().includes(ht)||Re.region?.toLowerCase().includes(ht)||Re.country?.toLowerCase().includes(ht)||Re.contactNo?.includes(ht)||Re.email?.toLowerCase().includes(ht)}).sort((Re,ht)=>new Date(ht.createdAt)-new Date(Re.createdAt)),oe=ee*ne,G=oe-ne,ce=se.slice(G,oe),Z=Math.ceil(se.length/ne),ae=()=>{A(!1),B()},[je,de]=w.useState(!1),ie=()=>de(!1),be=()=>{const Re=se.map(xe=>({"Customer No":xe.cnNo||"","Name 1":xe.name1||"","Name 2":xe.name2||"",Category:xe.categoryId?.categoryName||"","Search Term":xe.search||"","Address 1":xe.address1||"","Address 2":xe.address2||"","Extra Addresses":xe.extraAddresses?xe.extraAddresses.join(", "):"",City:xe.city||"",Pincode:xe.pincode||"",Region:xe.region||"",Country:xe.country||"","Contact No":xe.contactNo||"",Email:xe.email||"","Contact Person":xe.name||"","Customer Type":xe.customerType||"internal","External Customer ID":xe.externalCustomerId||"","Is Deleted":xe.isDeleted?"Yes":"No","Is Blocked":xe.isBlocked?"Yes":"No","Created Date":xe.createdAt?new Date(xe.createdAt).toLocaleDateString():"","Updated Date":xe.updatedAt?new Date(xe.updatedAt).toLocaleDateString():""})),ht=aa.book_new(),At=aa.json_to_sheet(Re),_t=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];At["!cols"]=_t,aa.book_append_sheet(ht,At,"Customers");const Wt=new Date,Ke=Wt.toLocaleDateString("en-GB").replace(/\//g,"-"),ge=Wt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ve=`Customer-Master-${Ke}-${ge}.xlsx`;Xu(ht,ve),ie(),alert(`Excel file exported successfully as: ${ve}`)},Ne=()=>{t(Re=>({...Re,extraAddresses:[...Re.extraAddresses,""]}))},Fe=(Re,ht)=>{const At=[...e.extraAddresses];At[Re]=ht,t(_t=>({..._t,extraAddresses:At}))},Xe=Re=>{const ht=[...e.extraAddresses];ht.splice(Re,1),t(At=>({...At,extraAddresses:ht}))},ct=async(Re,ht,At)=>{try{const _t={[ht]:At};await Oe.put(`/api/customers/status/${Re}`,_t),l(o.map(Wt=>Wt._id===Re?{...Wt,[ht]:At}:Wt)),alert("Status updated successfully!")}catch(_t){console.error("Error updating status:",_t),alert("Failed to update status!")}},xt=Re=>{console.log("Import successful:",Re),Q()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search customers...",value:V,onChange:Re=>W(Re.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:be,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("a",{onClick:()=>A(!0),className:"btn btn-primary btn-sm",children:"New Customer"})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"CNNo"}),a.jsx("th",{children:"Name 1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address 1"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Pincode"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact No"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ce.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"13",children:"No customers found"})}):ce.map(Re=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Re.cnNo}),a.jsx("td",{className:"text-wrap",children:Re.name1}),a.jsx("td",{className:"text-wrap",children:Re.categoryId?.categoryName||"N/A"}),a.jsx("td",{className:"text-wrap",children:Re.search}),a.jsx("td",{className:"text-wrap",children:Re.address1}),a.jsx("td",{className:"text-wrap",children:Re.city}),a.jsx("td",{className:"text-wrap",children:Re.pincode}),a.jsx("td",{className:"text-wrap",children:Re.region}),a.jsx("td",{className:"text-wrap",children:Re.contactNo}),a.jsx("td",{className:"text-wrap",children:Re.email}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Re.isDeleted||!1,onChange:ht=>ct(Re._id,"isDeleted",ht.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Re.isBlocked||!1,onChange:ht=>ct(Re._id,"isBlocked",ht.target.checked)})})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>Y(Re),className:"btn btn-primary btn-sm",children:"Edit"})})]},Re._id))})]})})})]}),a.jsx("div",{className:"d-flex justify-content-end align-items-center mt-3",children:Z>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item ${ee===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>te(Re=>Math.max(Re-1,1)),disabled:ee===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const ht=[],At=[];ht.push(1);for(let Ke=Math.max(2,ee-2);Ke<=Math.min(Z-1,ee+2);Ke++)ht.push(Ke);Z>1&&ht.push(Z);const _t=[...new Set(ht)].sort((Ke,ge)=>Ke-ge);let Wt;for(let Ke of _t)Wt&&(Ke-Wt===2?At.push(Wt+1):Ke-Wt!==1&&At.push("...")),At.push(Ke),Wt=Ke;return At.map((Ke,ge)=>Ke==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ge}`):a.jsx("li",{className:`page-item ${ee===Ke?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>te(Ke),children:Ke})},Ke))})(),a.jsx("li",{className:`page-item ${ee===Z?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>te(Re=>Math.min(Re+1,Z)),disabled:ee===Z,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),C&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Customer Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the ID:"}),k==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Customer ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:Re=>E(Re.target.value),maxLength:50,required:!0,placeholder:"Enter External Customer ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[D.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:M,disabled:!D.trim(),children:"Continue"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>S(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>ue("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ue("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]})]})]})})})]}),T&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[u?"Edit Customer":"Add New Customer",k&&a.jsx("span",{className:"badge bg-info ms-2",children:k==="internal"?"Internal":"External"})]}),a.jsx("button",{type:"button",className:"btn-close",onClick:ae,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:U,children:[k==="external"&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("strong",{children:"External Customer ID:"})," ",D]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:e.categoryId,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(Re=>a.jsx("option",{value:Re._id,children:Re.categoryName},Re._id))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Name1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",placeholder:"Enter Name 1",value:e.name1,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2 (Optional)",value:e.name2,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["SearchTerm ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",value:e.search,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Address1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:z,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Ne,children:"+"})})]}),e?.extraAddresses?.map((Re,ht)=>a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:`Address ${ht+3}`})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",placeholder:`Enter Address ${ht+3}`,value:Re,onChange:At=>Fe(ht,At.target.value),className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>Xe(ht),children:a.jsx("i",{className:"ti ti-x"})})})]},ht)),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",value:e.city,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit Pincode",value:e.pincode,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Region ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",value:e.region,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Region"}),L.map(Re=>a.jsx("option",{value:Re,children:Re},Re))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Country ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",value:e.country,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Country"}),P.map(Re=>a.jsx("option",{value:Re,children:Re},Re))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Contact No ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter 10-digit Contact No",value:e.contactNo,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email (Optional)",value:e.email,pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name",placeholder:"Enter name (Optional)",value:e.name,onChange:z,className:"form-control"})})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("button",{type:"submit",className:"btn btn-success",children:u?"Update Customer":"Save Customer"}),u&&a.jsx("button",{type:"button",onClick:B,className:"btn btn-danger ms-2",children:"Cancel"})]})]})})]})})})]}),a.jsx(vf,{show:b,onClose:()=>y(!1),onImport:xt,masterDataType:"customer",apiEndpoint:"/api/customers/import"})]})}function j5e(){const e="MMNR-",[t,r]=w.useState([]),[n,s]=w.useState(!1),[i,o]=w.useState({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear"),[d,u]=w.useState(1),[h,m]=w.useState([]),[p,v]=w.useState([]),[g,b]=w.useState([]),[y,C]=w.useState([]),[N,k]=w.useState([]),[S,D]=w.useState(!1),[E,T]=w.useState([]),[A,L]=w.useState("materialId"),[P,O]=w.useState(null),[Q,z]=w.useState(!1),[re,U]=w.useState(1),X=10,[B,Y]=w.useState(""),[K,ue]=w.useState(!1),[M,V]=w.useState([]),[W,ee]=w.useState("customerId"),[te,ne]=w.useState(""),se=Le=>{s(!1),je()},oe=()=>{const Le=Ne.map(Ee=>({"Customer Name":Ee.customerId?.name1||"","Customer ID":Ee.customerId?.cnNo||"",Category:Ee.categoryId?.categoryName||"","Material ID":Ee.materialId?.materialId||"","Material Description":Ee.materialId?.description||"",Unit:Ee.unit||"","BUM (Base Unit Measure)":Ee.bum||"","Order Unit":Ee.orderUnit||"",Price:Ee.price||"","Sales Group":Ee.salesGroup||"","Tax Name":Ee.taxId?.taxName||"","CGST %":Ee.taxId?.cgst||"","SGST %":Ee.taxId?.sgst||"","IGST %":Ee.taxId?.igst||"","Terms & Conditions":Ee.tandc||"","Company ID":Ee.companyId||"","Financial Year":Ee.financialYear||"","Created Date":Ee.createdAt?new Date(Ee.createdAt).toLocaleDateString():"","Updated Date":Ee.updatedAt?new Date(Ee.updatedAt).toLocaleDateString():""})),ze=aa.book_new(),ut=aa.json_to_sheet(Le),Te=[{wch:25},{wch:15},{wch:20},{wch:20},{wch:35},{wch:10},{wch:15},{wch:15},{wch:12},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];ut["!cols"]=Te,aa.book_append_sheet(ze,ut,"Customer Price List");const We=new Date,Ge=We.toLocaleDateString("en-GB").replace(/\//g,"-"),It=We.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Bt=`Customer-Price-List-${Ge}-${It}.xlsx`;Xu(ze,Bt),alert(`Excel file exported successfully as: ${Bt}`)};w.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:l,financialYear:c}}).then(Le=>r(Le.data))},[]),w.useEffect(()=>{G(),ce(),Z(),ae(),je()},[]);const G=async()=>{try{const Le=await Oe.get("/api/customer-categories",{params:{companyId:l,financialYear:c}});m(Le.data)}catch(Le){console.error("Error fetching categories:",Le),alert("Error loading categories")}},ce=async()=>{try{const Le=await Oe.get("/api/customers",{params:{companyId:l,financialYear:c}});v(Le.data),console.log("customers",Le.data)}catch(Le){console.error("Error fetching customers:",Le),alert("Error loading customers")}},Z=async()=>{try{const Le=await Oe.get("/api/material",{params:{companyId:l,financialYear:c}});b(Le.data)}catch(Le){console.error("Error fetching materials:",Le),alert("Error loading materials")}},ae=async()=>{try{const Le=await Oe.get("/api/tax",{params:{companyId:l,financialYear:c}});C(Le.data)}catch(Le){console.error("Error fetching taxes:",Le),alert("Error loading taxes")}},je=async()=>{try{const Le=await Oe.get("/api/customer-price-lists",{params:{companyId:l,financialYear:c}});k(Le.data)}catch(Le){console.error("Error fetching price lists:",Le),alert("Error loading price lists")}},de=async Le=>{const{name:ze,value:ut}=Le.target;let Te={...i,[ze]:ut};if(ze==="materialId")try{const Ge=(await Oe.get(`/api/material/${ut}`)).data.conversionValue||1;u(Ge)}catch(We){console.error("Error fetching material conversion:",We),u(1)}o(Te)},ie=async Le=>{Le.preventDefault();const ze={...i,companyId:l,financialYear:c};try{i._id?(await Oe.put(`/api/customer-price-lists/${i._id}`,ze),alert("Updated successfully")):(await Oe.post("/api/customer-price-lists",ze),alert("Saved successfully")),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),u(1),Re(),je()}catch(ut){alert("Error saving data"),console.error("Submit error:",ut)}},be=Le=>{const ze=Ee=>Ee?typeof Ee=="object"&&Ee._id?Ee._id:typeof Ee=="string"?Ee:"":"",ut=ze(Le.categoryId),Te=ze(Le.customerId),We=ze(Le.materialId),Ge=ze(Le.taxId),It=ze(Le.tandc),Bt={_id:Le._id,categoryId:ut,customerId:Te,materialId:We,unit:Le.unit||"",bum:Le.bum||"",orderUnit:Le.orderUnit||"",salesGroup:Le.salesGroup||"",taxId:Ge,tandc:It,price:Le.price||""};o(Bt),z(!0),We&&Oe.get(`/api/material/${We}`).then(Ee=>{const _e=Ee.data.conversionValue||1;u(_e),console.log("Conversion value set to:",_e)}).catch(Ee=>{console.error("Error fetching material conversion:",Ee),u(1)})},Ne=N.filter(Le=>{const ze=Le.customerId?.name1?.toLowerCase()||"",ut=Le.categoryId?.categoryName?.toLowerCase()||"",Te=Le.materialId?.description?.toLowerCase()||"";return ze.includes(B.toLowerCase())||ut.includes(B.toLowerCase())||Te.includes(B.toLowerCase())}),Fe=Ne.slice((re-1)*X,re*X),Xe=Math.ceil(Ne.length/X),ct=Le=>{Le>=1&&Le<=Xe&&U(Le)},xt=()=>z(!0),Re=()=>{z(!1),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",orderUnit:"",price:"",salesGroup:"",taxId:"",tandc:""})},ht=()=>{O(null),D(!0),T([])},At=()=>{D(!1),O(null),T([])},_t=Le=>{console.log("Selected material:",Le),de({target:{name:"materialId",value:Le._id}}),At()},Wt=()=>{const Le=B.trim();if(!Le){T([]);return}if(console.log("Searching with query:",Le,"Type:",A),console.log("Available materials:",g),A==="materialId"){let ze=Le;/^\d+$/.test(Le)&&(ze=e+Le);const ut=g.filter(Te=>(Te.materialId||"").toLowerCase().includes(ze.toLowerCase()));console.log("Filtered results for materialId:",ut),T(ut)}else{const ze=g.filter(ut=>(ut.description||"").toLowerCase().includes(Le.toLowerCase()));console.log("Filtered results for description:",ze),T(ze)}};w.useEffect(()=>{const Le=setTimeout(()=>{B.trim()?Wt():T([])},300);return()=>clearTimeout(Le)},[B,A]);const Ke=()=>{T(g),Y("")},ge=()=>{T([]),Y("")},ve=()=>{ue(!0),ne(""),V([])},xe=()=>{ue(!1),ne(""),V([])},Ie=Le=>{const ze=Le.target.value;ne(ze)},Ze=()=>{if(!te.trim()){V([]);return}if(W==="customerId"){const Le=p.filter(ze=>(ze.customerId||"").toLowerCase().includes(te.toLowerCase()));V(Le)}else{const Le=p.filter(ze=>(ze.name1||"").toLowerCase().includes(te.toLowerCase()));V(Le)}},Ft=()=>{V(p),ne("")},Qe=()=>{V([]),ne("")},Ye=Le=>{de({target:{name:"customerId",value:Le._id}}),xe()};return w.useEffect(()=>{const Le=setTimeout(()=>{te.trim()?Ze():V([])},300);return()=>clearTimeout(Le)},[te,W]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:B,onChange:Le=>Y(Le.target.value)})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsx("div",{children:a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>s(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]})}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:oe,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("div",{children:a.jsxs("a",{onClick:xt,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Customer Price List"]})})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Fe.map(Le=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("div",{children:a.jsx("h6",{className:"fs-14 fw-medium mb-0",children:a.jsx("a",{href:"#",children:Le.customerId?.name1})})})})}),a.jsx("td",{children:Le.categoryId?.categoryName}),a.jsx("td",{children:Le.materialId?.description}),a.jsx("td",{className:"text-dark",children:Le.unit}),a.jsx("td",{className:"text-dark",children:Le.bum}),a.jsx("td",{className:"text-dark",children:Le.orderUnit}),a.jsxs("td",{className:"text-dark",children:["Rs",Le.price]})," ",a.jsx("td",{className:"text-dark",children:Le.salesGroup}),a.jsx("td",{className:"text-dark",children:Le.taxId?.taxName}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{be(Le)},children:"Edit"})})]},Le._id))})]})})]}),Xe>1&&a.jsx("nav",{"aria-label":"Page navigation",className:"",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${re===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Le=>{Le.preventDefault(),re>1&&ct(re-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Le=[];if(Xe<=5)for(let ut=1;ut<=Xe;ut++)Le.push(a.jsx("li",{className:`page-item ${re===ut?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Te=>{Te.preventDefault(),ct(ut)},children:ut})},ut));else{Le.push(a.jsx("li",{className:`page-item ${re===1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:We=>{We.preventDefault(),ct(1)},children:"1"})},1)),re>3&&Le.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis1"));const ut=Math.max(2,re-1),Te=Math.min(Xe-1,re+1);for(let We=ut;We<=Te;We++)We!==1&&We!==Xe&&Le.push(a.jsx("li",{className:`page-item ${re===We?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ge=>{Ge.preventDefault(),ct(We)},children:We})},We));re<Xe-2&&Le.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis2")),Xe>1&&Le.push(a.jsx("li",{className:`page-item ${re===Xe?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:We=>{We.preventDefault(),ct(Xe)},children:Xe})},Xe))}return Le})(),a.jsx("li",{className:`page-item ${re===Xe?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Le=>{Le.preventDefault(),re<Xe&&ct(re+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),Q&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:"Customer Price"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Re,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:ie,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:de,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),h.map(Le=>a.jsx("option",{value:Le._id,children:Le.categoryName},Le._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"customerId",className:"form-select me-2",value:i.customerId,onChange:de,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),p.map(Le=>a.jsx("option",{value:Le._id,children:Le.name1},Le._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Customer",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:i.materialId,onChange:de,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),g.map(Le=>a.jsx("option",{value:Le._id,children:Le.description},Le._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ht,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:i.unit,onChange:de,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),t.map(Le=>a.jsx("option",{value:Le.name,children:Le.name},Le.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"BUM (Base Unit):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter BUM",value:i.bum,onChange:Le=>{Le.target.value=Le.target.value.replace(/[^0-9.]/g,""),de(Le)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Enter Order Unit",value:i.orderUnit,onChange:Le=>{Le.target.value=Le.target.value.replace(/[^0-9.]/g,""),de(Le)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter price",value:i.price,onChange:de,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"salesGroup",className:"form-control",placeholder:"Enter Sales Group",value:i.salesGroup,onChange:de,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"T&C:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"tandc",className:"form-control",placeholder:"Enter T&C",value:i.tandc,onChange:de,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:i.taxId,onChange:de,children:[a.jsx("option",{value:"",children:"Select"}),y.map(Le=>a.jsxs("option",{value:Le._id,children:[Le.taxName," (CGST: ",Le.cgst,"%, SGST: ",Le.sgst,"%, IGST: ",Le.igst,"%)"]},Le._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Re,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:i._id?"Update":"Save"})]})]})})]})})})]}),S&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:At})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Le=>L(Le.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:A==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:B,onChange:Le=>Y(Le.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ke,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),E.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ge,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:E.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.map((Le,ze)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Le.materialId}),a.jsx("td",{className:"text-wrap",children:Le.description}),a.jsx("td",{className:"text-wrap",children:Le.baseUnit}),a.jsx("td",{className:"text-wrap",children:Le.location}),a.jsx("td",{className:"text-wrap",children:Le.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>_t(Le),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ze))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g.length===0?"No materials loaded from API":B?`No materials found matching "${B}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:At,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),K&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customers"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:xe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:W,onChange:Le=>ee(Le.target.value),children:[a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"name",children:"Customer Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:W==="customerId"?"Enter Customer ID...":"Search by Customer Name...",value:te,onChange:Ie})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),M.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:M.map((Le,ze)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Le.cnNo}),a.jsx("td",{className:"text-wrap",children:Le.name1}),a.jsx("td",{className:"text-wrap",children:Le.city}),a.jsx("td",{className:"text-wrap",children:Le.email}),a.jsx("td",{className:"text-wrap",children:Le.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ye(Le),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ze))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:p.length===0?"No customers loaded from API":te?`No customers found matching "${te}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:xe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(vf,{show:n,onClose:()=>s(!1),onImportSuccess:se,masterDataType:"customerPriceList"})]})}const xb={code:"",name:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactNumber:""},N5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(xb),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState(""),b=U=>{alert(`Import completed: ${U.results.imported} records imported`),d(!1),A()},y=e.filter(U=>{if(!v)return!0;const X=v.toLowerCase();return U.code?.toLowerCase().includes(X)||U.name?.toLowerCase().includes(X)||U.address?.toLowerCase().includes(X)||U.city?.toLowerCase().includes(X)||U.state?.toLowerCase().includes(X)||U.country?.toLowerCase().includes(X)||U.postalCode?.toLowerCase().includes(X)||U.contactPerson?.toLowerCase().includes(X)||U.contactNumber?.toLowerCase().includes(X)}),C=Math.ceil(y.length/m),N=(u-1)*m,k=N+m,S=y.slice(N,k),D=U=>{g(U.target.value),h(1)},E=U=>{h(U)},T=()=>{const X=(v?y:e).map((ne,se)=>({"S.No":se+1,"Location Name":ne.name||"",Address:ne.address||"",City:ne.city||"",State:ne.state||"",Country:ne.country||"","Postal Code":ne.postalCode||"","Contact Person":ne.contactPerson||"","Contact Number":ne.contactNumber||"","Company ID":ne.companyId||"","Financial Year":ne.financialYear||"","Created Date":ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"","Updated Date":ne.updatedAt?new Date(ne.updatedAt).toLocaleDateString():""})),B=aa.book_new(),Y=aa.json_to_sheet(X),K=[{wch:8},{wch:25},{wch:40},{wch:20},{wch:20},{wch:15},{wch:12},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];Y["!cols"]=K,aa.book_append_sheet(B,Y,"Location Master");const ue=new Date,M=ue.toLocaleDateString("en-GB").replace(/\//g,"-"),V=ue.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Location-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Xu(B,ee);const te=v?y.length:e.length;alert(`Excel file exported successfully: ${te} records exported as ${ee}`)},A=async()=>{try{const U=localStorage.getItem("selectedCompanyId"),X=localStorage.getItem("financialYear"),B=await Oe.get("/api/locations",{params:{companyId:U,financialYear:X}});t(B.data),h(1)}catch(U){console.error("Error fetching locations:",U),alert("Error loading locations")}};w.useEffect(()=>{A()},[]);const L=U=>{n({...r,[U.target.name]:U.target.value})},P=async U=>{U.preventDefault();try{const X=localStorage.getItem("selectedCompanyId"),B=localStorage.getItem("financialYear"),Y={...r,companyId:X,financialYear:B};o?(await Oe.put(`/api/locations/${o}`,Y),alert("Location updated successfully!")):(await Oe.post("/api/locations",Y),alert("Location created successfully!")),n(xb),l(null),i(!1),A()}catch(X){console.error("Error saving location:",X),alert("Error saving location. Please try again.")}},O=U=>{n({name:U.name||"",address:U.address||"",city:U.city||"",state:U.state||"",country:U.country||"",postalCode:U.postalCode||"",contactPerson:U.contactPerson||"",contactNumber:U.contactNumber||""}),l(U._id),i(!0)},Q=()=>{n(xb),l(null),i(!0)},z=()=>{i(!1),n(xb),l(null)},re=U=>({code:"Location Code",name:"Location Name",address:"Address",city:"City",state:"State",country:"Country",postalCode:"Postal Code",contactPerson:"Contact Person",contactNumber:"Contact Number"})[U]||U.charAt(0).toUpperCase()+U.slice(1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Location Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Location Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search locations...",value:v,onChange:D})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>d(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:T,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:y.length})]}),a.jsx("div",{children:a.jsxs("button",{onClick:Q,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Location"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Location Name"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"State"}),a.jsx("th",{children:"Country"}),a.jsx("th",{children:"Postal Code"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Contact Number"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:S.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:v?"No locations found matching your search criteria":"No locations found"})}):S.map((U,X)=>a.jsxs("tr",{children:[a.jsx("td",{children:N+X+1}),a.jsx("td",{children:a.jsx("strong",{children:U.name})}),a.jsx("td",{children:U.address}),a.jsx("td",{children:U.city}),a.jsx("td",{children:U.state}),a.jsx("td",{children:U.country}),a.jsx("td",{children:U.postalCode}),a.jsx("td",{children:U.contactPerson}),a.jsx("td",{children:U.contactNumber}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(U),children:"Edit"})})]},U._id))})]})})})]}),C>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:U=>{U.preventDefault(),u>1&&E(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:C},(U,X)=>a.jsx("li",{className:`page-item ${u===X+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:B=>{B.preventDefault(),E(X+1)},children:X+1})},X)),a.jsx("li",{className:`page-item ${u===C?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:U=>{U.preventDefault(),u<C&&E(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),a.jsx(vf,{show:c,onClose:()=>d(!1),onImportSuccess:b,masterDataType:"location"}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:o?"Edit Location":"Add New Location"}),a.jsx("button",{type:"button",className:"btn-close",onClick:z})]}),a.jsxs("form",{onSubmit:P,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:Object.keys(xb).map(U=>a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-md-3":"col-md-4"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-5":"col-4"}`,children:a.jsx("label",{className:"form-label",children:re(U)})}),a.jsx("div",{className:`${U==="code"||U==="city"||U==="postalCode"?"col-7":"col-8"} `,children:a.jsx("input",{type:U==="contactNumber"?"tel":"text",name:U,className:"form-control",placeholder:`Enter ${re(U)}`,value:r[U],onChange:L,required:U==="name"})})]})},U))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Location":"Create Location"})]})]})]})})})]})]})},w5e=()=>{const[e,t]=w.useState({}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=w.useState(1),[m,p]=w.useState(10),[v,g]=w.useState("");w.useEffect(()=>{N()},[]);const[b,y]=w.useState({taxCode:"",taxName:"",cgst:"",sgst:"",igst:"",companyId:c,financialYear:d}),C=M=>{alert(`Import completed: ${M.results.imported} records imported`),l(!1),N()},N=async()=>{const M=await Oe.get("/api/tax",{params:{companyId:c,financialYear:d}});n(M.data),h(1)},k=r.filter(M=>{if(!v)return!0;const V=v.toLowerCase();return M.taxCode?.toLowerCase().includes(V)||M.taxName?.toLowerCase().includes(V)||M.cgst?.toString().includes(V)||M.sgst?.toString().includes(V)||M.igst?.toString().includes(V)||((parseFloat(M.cgst)||0)+(parseFloat(M.sgst)||0)+(parseFloat(M.igst)||0)).toString().includes(V)}),S=Math.ceil(k.length/m),D=(u-1)*m,E=D+m,T=k.slice(D,E),A=M=>{g(M.target.value),h(1)},L=M=>{h(M)},P=()=>{const V=(v?k:r).map(ae=>({"Tax Code":ae.taxCode||"","Tax Name":ae.taxName||"","CGST %":ae.cgst||"","SGST %":ae.sgst||"","IGST %":ae.igst||"","Total Tax %":(parseFloat(ae.cgst)||0)+(parseFloat(ae.sgst)||0)+(parseFloat(ae.igst)||0),"Tax Type":parseFloat(ae.igst)>0?"IGST":"CGST + SGST","Created Date":ae.createdAt?new Date(ae.createdAt).toLocaleDateString():"","Updated Date":ae.updatedAt?new Date(ae.updatedAt).toLocaleDateString():""})),W=aa.book_new(),ee=aa.json_to_sheet(V),te=[{wch:12},{wch:25},{wch:10},{wch:10},{wch:10},{wch:12},{wch:15},{wch:15},{wch:15}];ee["!cols"]=te,aa.book_append_sheet(W,ee,"Tax Master");const ne=new Date,se=ne.toLocaleDateString("en-GB").replace(/\//g,"-"),oe=ne.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ce=`Tax-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${se}-${oe}.xlsx`;Xu(W,ce);const Z=v?k.length:r.length;alert(`Excel file exported successfully: ${Z} records exported as ${ce}`)},O=(M,V)=>{switch(M){case"taxCode":if(!V)return"Required";if(V.length>4)return"Max 4 characters";break;case"taxName":if(!V)return"Required";if(V.length>25)return"Max 25 characters";break;case"cgst":case"igst":if(!V)return"Required";if(V.length>2)return"Max 2 digits";break;default:return""}return""},Q=M=>{const{name:V,value:W}=M.target;let ee=W;switch(V){case"taxCode":ee=W.replace(/[^A-Za-z0-9 ]/g,"").slice(0,4);break;case"taxName":ee=W.replace(/[^A-Za-z0-9 ]/g,"").slice(0,25);break;case"cgst":case"sgst":case"igst":ee=W.replace(/[^0-9]/g,"").slice(0,2);break}const te=O(V,ee);y({...b,[V]:ee}),t({...e,[V]:te})},z=()=>Object.keys(b).every(M=>!O(M,b[M])),re=()=>{y({taxCode:"",taxName:"",cgst:"",sgst:"",igst:""}),t({}),i(null)},U=async M=>{M.preventDefault();const V={};if(Object.entries(b).forEach(([ee,te])=>{const ne=O(ee,te);ne&&(V[ee]=ne)}),Object.keys(V).length>0){t(V);return}const W={...b,companyId:c,financialYear:d};try{s?(await Oe.put(`/api/tax/${s}`,W),alert("Tax updated!")):(await Oe.post("/api/tax",W),alert("Tax added!")),re(),N(),ue()}catch(ee){console.error(ee),alert("Failed to save")}},X=M=>{y({taxCode:M.taxCode,taxName:M.taxName,cgst:M.cgst,sgst:M.sgst,igst:M.igst}),i(M._id)},[B,Y]=w.useState(!1),K=()=>Y(!0),ue=()=>{Y(!1),s||re()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Taxes Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Taxes Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code, name, or percentage...",value:v,onChange:A})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>l(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:P,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:k.length})]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{re(),K()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Tax"]})})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Code"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"CGST %"}),a.jsx("th",{children:"SGST %"}),a.jsx("th",{children:"IGST %"}),a.jsx("th",{children:"Total %"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No taxes found matching your search criteria":"No taxes found"})}):T.map(M=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:M.taxCode})}),a.jsx("td",{children:M.taxName}),a.jsxs("td",{className:"text-center",children:[M.cgst,"%"]}),a.jsxs("td",{className:"text-center",children:[M.sgst,"%"]}),a.jsxs("td",{className:"text-center",children:[M.igst,"%"]}),a.jsx("td",{className:"text-center",children:a.jsxs("strong",{children:[(parseFloat(M.cgst)||0)+(parseFloat(M.sgst)||0)+(parseFloat(M.igst)||0),"%"]})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{X(M),K()},children:"Edit"})})]},M._id))})]})}),S>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Page ",u," of ",S]}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:M=>{M.preventDefault(),u>1&&L(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:S},(M,V)=>a.jsx("li",{className:`page-item ${u===V+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:W=>{W.preventDefault(),L(V+1)},children:V+1})},V)),a.jsx("li",{className:`page-item ${u===S?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:M=>{M.preventDefault(),u<S&&L(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})]})]}),B&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," Tax Code"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:ue,"aria-label":"Close"})]}),a.jsxs("form",{onSubmit:U,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:["taxCode","taxName","cgst","sgst","igst"].map(M=>a.jsx("div",{className:` ${M==="taxName"?"col-md-4":"col-md-2"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${M==="taxName"?"col-3":"col-6"}`,children:a.jsx("label",{className:"form-label ",children:M==="taxCode"?"Tax Code":M==="taxName"?"Tax Name":M==="sgst"?"SGST/UGST%":`${M.toUpperCase()}%`})}),a.jsxs("div",{className:`${M==="taxName"?"col-9":"col-6"}`,children:[a.jsx("input",{type:"text",name:M,value:b[M],onChange:Q,className:`form-control ${e[M]?"is-invalid":""}`,placeholder:M==="taxCode"?"Enter tax code (max 4 chars)":M==="taxName"?"Enter tax name (max 25 chars)":"Enter percentage (max 2 digits)"}),e[M]&&a.jsx("div",{className:"invalid-feedback",children:e[M]})]})]})},M))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:ue,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",type:"submit",disabled:!z(),children:s?"Update Tax":"Save Tax"})]})]})]})})})]}),a.jsx(vf,{show:o,onClose:()=>l(!1),onImportSuccess:C,masterDataType:"tax"})]})};function S5e(){const[e,t]=w.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState([]),[v,g]=w.useState(!1),[b,y]=w.useState(!1),[C,N]=w.useState("internal"),[k,S]=w.useState(""),[D,E]=w.useState(""),T=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","Maharashtra","Gujarat","Rajasthan","Punjab","Haryana"],A=["India","USA","Germany","France","UK"],[L,P]=w.useState(!1),[O,Q]=w.useState(1),[z,re]=w.useState(""),U=10;w.useEffect(()=>{X(),B()},[]),w.useEffect(()=>{Q(1)},[z]);const X=async()=>{const de=await Oe.get("/api/vendor-categories",{params:{companyId:r,financialYear:n}});i(de.data)},B=async()=>{const ie=(await Oe.get("/api/vendors",{params:{companyId:r,financialYear:n}})).data.sort((be,Ne)=>new Date(Ne.createdAt)-new Date(be.createdAt));l(ie)},Y=o.filter(de=>{const ie=de.vnNo?.toLowerCase()||"",be=de.name1?.toLowerCase()||"",Ne=de.categoryId?.categoryName?.toLowerCase()||"",Fe=z.toLowerCase();return ie.includes(Fe)||be.includes(Fe)||Ne.includes(Fe)}),K=Math.ceil(Y.length/U),ue=O*U,M=ue-U,V=Y.slice(M,ue),W=de=>{de>=1&&de<=K&&Q(de)},ee=de=>{const{name:ie,value:be}=de.target;ie==="email"&&be&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(be)?de.target.setCustomValidity(""):de.target.setCustomValidity("Please enter a valid email address")),t(Ne=>({...Ne,[ie]:be}))},te=()=>{const de=Y.map(Re=>({"Vendor No":Re.vnNo||"","Name 1":Re.name1||"","Name 2":Re.name2||"",Category:Re.categoryId?.categoryName||"","Search Term":Re.search||"","Address 1":Re.address1||"","Address 2":Re.address2||"","Extra Addresses":Re.extraAddresses?Re.extraAddresses.join(", "):"",City:Re.city||"",Pincode:Re.pincode||"",Region:Re.region||"",Country:Re.country||"","Contact No":Re.contactNo||"","Contact Person":Re.contactname||"",Email:Re.email||"","Vendor Type":Re.vendorIdType||"internal","External Vendor ID":Re.externalVendorId||"","Is Deleted":Re.isDeleted?"Yes":"No","Is Blocked":Re.isBlocked?"Yes":"No","Created Date":Re.createdAt?new Date(Re.createdAt).toLocaleDateString():"","Updated Date":Re.updatedAt?new Date(Re.updatedAt).toLocaleDateString():""})),ie=aa.book_new(),be=aa.json_to_sheet(de),Ne=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:25},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];be["!cols"]=Ne,aa.book_append_sheet(ie,be,"Vendors");const Fe=new Date,Xe=Fe.toLocaleDateString("en-GB").replace(/\//g,"-"),ct=Fe.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),xt=`Vendor-Master-${Xe}-${ct}.xlsx`;Xu(ie,xt),alert(`Excel file exported successfully as: ${xt}`)},ne=async()=>{try{const de={...e,companyId:r,financialYear:n,vendorIdType:C,externalVendorId:C==="external"?k:null};if(u)await Oe.put(`/api/vendors/${u}`,de),alert("Vendor updated!");else{const ie=await Oe.post("/api/vendors",de);d(ie.data.vnNo),alert(`Vendor saved! VNNo: ${ie.data.vnNo}`)}B(),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null),y(!1),P(!1),S(""),N("internal")}catch(de){console.error(de),alert("Error saving vendor")}},se=async de=>{if(de.preventDefault(),!e.categoryId||!e.name1){alert("Please fill in required fields");return}y(!0)},oe=de=>{t({categoryId:de.categoryId?._id,name1:de.name1,name2:de.name2,search:de.search,address1:de.address1,address2:de.address2,city:de.city,pincode:de.pincode,region:de.region,country:de.country,contactNo:de.contactNo,contactname:de.contactname,email:de.email}),h(de._id),d(de.vnNo),P(!0)},G=()=>{t(de=>({...de,extraAddresses:[...de.extraAddresses,""]}))},ce=(de,ie)=>{const be=[...e.extraAddresses];be[de]=ie,t(Ne=>({...Ne,extraAddresses:be}))},Z=de=>{const ie=[...e.extraAddresses];ie.splice(de,1),t(be=>({...be,extraAddresses:ie}))},ae=async(de,ie,be)=>{try{const Ne=await Oe.put(`/api/vendors/status/${de}`,{[ie]:be});l(Fe=>Fe.map(Xe=>Xe._id===de?{...Xe,[ie]:be}:Xe)),alert(`${ie} updated successfully!`)}catch(Ne){console.error(Ne),alert("Failed to update vendor status")}},je=de=>{alert(`Import completed: ${de.results.imported} records imported`),g(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb ",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search Vendors...",value:z,onChange:de=>re(de.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>g(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:te,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"#",className:"btn btn-primary btn-sm",onClick:()=>{P(!0),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null)},children:[a.jsx("i",{className:"ti ti-add-circle5 me-1"}),"New Vendor"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"VNNo"}),a.jsx("th",{children:"Name1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:V.length>0?V.map(de=>a.jsxs("tr",{children:[a.jsx("td",{children:de.vnNo}),a.jsx("td",{className:"text-wrap",children:de.name1}),a.jsx("td",{children:de.categoryId?.categoryName}),a.jsx("td",{className:"text-wrap",children:de.contactNo}),a.jsx("td",{className:"text-wrap",children:de.email}),a.jsx("td",{className:"text-wrap",children:de.search}),a.jsx("td",{className:"text-wrap",children:de.address1}),a.jsx("td",{className:"text-wrap",children:de.city}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:de.isDeleted||!1,onChange:ie=>ae(de._id,"isDeleted",ie.target.checked)})}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:de.isBlocked||!1,onChange:ie=>ae(de._id,"isBlocked",ie.target.checked)})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>oe(de),children:"Edit"})})]},de._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center text-muted py-4",children:z?"No vendors found matching your search criteria":"No vendors available"})})})]})})})]}),Y.length>0&&K>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${O===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:de=>{de.preventDefault(),W(O-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const ie=[],be=[];ie.push(1);for(let Xe=Math.max(2,O-2);Xe<=Math.min(K-1,O+2);Xe++)ie.push(Xe);K>1&&ie.push(K);const Ne=[...new Set(ie)].sort((Xe,ct)=>Xe-ct);let Fe;for(let Xe of Ne)Fe&&(Xe-Fe===2?be.push(Fe+1):Xe-Fe!==1&&be.push("...")),be.push(Xe),Fe=Xe;return be.map((Xe,ct)=>Xe==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ct}`):a.jsx("li",{className:`page-item ${O===Xe?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:xt=>{xt.preventDefault(),W(Xe)},children:Xe})},Xe))})(),a.jsx("li",{className:`page-item ${O===K?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:de=>{de.preventDefault(),W(O+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),L&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:u?"Edit Vendor":"Add New Vendor"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal",onClick:()=>P(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:se,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:ee,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(de=>a.jsx("option",{value:de._id,children:de.categoryName},de._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",className:"form-control",placeholder:"Enter Name 1",value:e.name1,onChange:ee,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2",className:"form-control",value:e.name2,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Search Term:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",className:"form-control",value:e.search,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:ee,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2:"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:ee,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:G,children:"+"})})]})}),e.extraAddresses?.map((de,ie)=>a.jsx("div",{className:"col-md-4 mb-2 position-relative",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:[`Address${ie+3}`,":"]})}),a.jsxs("div",{className:"col-8 d-flex align-items-center",children:[a.jsx("input",{type:"text",placeholder:`Enter Address ${ie+3}`,value:de,onChange:be=>ce(ie,be.target.value),className:"form-control me-2"}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>Z(ie),children:a.jsx("i",{className:"ti ti-x"})})]})]})},ie)),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",className:"form-control",value:e.city,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter Pincode",className:"form-control",value:e.pincode,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Region:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",className:"form-select",placeholder:"Select Region",value:e.region,onChange:ee,children:[a.jsx("option",{value:"",children:"Select Region"}),T.map(de=>a.jsx("option",{value:de,children:de},de))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Country:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",className:"form-select",value:e.country,onChange:ee,children:[a.jsx("option",{value:"",children:"Select Country"}),A.map(de=>a.jsx("option",{value:de,children:de},de))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"ContactNo:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter Contact No",className:"form-control",value:e.contactNo,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactname",placeholder:"Enter Contact Person Name",className:"form-control",value:e.contactname,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",className:"form-control",value:e.email,onChange:ee})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>P(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Save"})]})]})]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Vendor ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(!1),E(""),S(""),N("internal")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Vendor ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-primary btn-md",onClick:()=>{N("internal"),ne()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-md",onClick:()=>N("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),C==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Vendor ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Vendor ID (max 50 characters)",value:k,onChange:de=>{de.target.value.length<=50&&(S(de.target.value),E(""))},onKeyPress:de=>{de.key==="Enter"&&k&&ne()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[k.length,"/50 characters"]}),D&&a.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:D}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:ne,disabled:!k,children:"Confirm & Save Vendor"})})]})]})]})})})]}),a.jsx(vf,{show:v,onClose:()=>g(!1),onSuccess:je,masterDataType:"vendor"})]})}function C5e(){const[e,t]=w.useState({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState("vendorId"),[v,g]=w.useState("materialId"),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState([]),[L,P]=w.useState([]),[O,Q]=w.useState([]),[z,re]=w.useState(1),[U,X]=w.useState(null),[B,Y]=w.useState(!1),K=localStorage.getItem("selectedCompanyId"),ue=localStorage.getItem("financialYear"),[M,V]=w.useState(!1);w.useEffect(()=>{ee(),te(),ne(),se(),oe(),Oe.get("/api/locations",{params:{companyId:K,financialYear:ue}}).then(Ee=>n(Ee.data))},[]);const W=()=>{const Ee=O.map(yr=>({Category:de(yr.categoryId),"Vendor Name":ie(yr.vendorId),"Vendor ID":be(yr.vendorId),"Material ID":Fe(yr.materialId),"Material Description":Ne(yr.materialId),"Unit (Location)":yr.unit||"","BUM (Base Unit Measure)":yr.bum||"","Order Unit":yr.orderUnit||"",Price:yr.price||"",Buyer:yr.buyer||"","Tax Name":Xe(yr.taxId),"Tax Details":ct(yr.taxId),"Company ID":yr.companyId||"","Financial Year":yr.financialYear||"","Created Date":yr.createdAt?new Date(yr.createdAt).toLocaleDateString():"","Updated Date":yr.updatedAt?new Date(yr.updatedAt).toLocaleDateString():""})),_e=aa.book_new(),st=aa.json_to_sheet(Ee),wt=[{wch:20},{wch:25},{wch:15},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:12},{wch:20},{wch:15},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];st["!cols"]=wt,aa.book_append_sheet(_e,st,"Vendor Price List");const rr=new Date,Ot=rr.toLocaleDateString("en-GB").replace(/\//g,"-"),er=rr.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),fr=`Vendor-Price-List-${Ot}-${er}.xlsx`;Xu(_e,fr)},ee=async()=>{try{const Ee=await Oe.get("/api/vendor-categories",{params:{companyId:K,financialYear:ue}});S(Ee.data)}catch(Ee){console.error("Error fetching categories:",Ee)}},te=async()=>{try{const Ee=await Oe.get("/api/vendors",{params:{companyId:K,financialYear:ue}});E(Ee.data)}catch(Ee){console.error("Error fetching vendors:",Ee)}},ne=async()=>{try{const Ee=await Oe.get("/api/material",{params:{companyId:K,financialYear:ue}});A(Ee.data)}catch(Ee){console.error("Error fetching materials:",Ee)}},se=async()=>{try{const _e=await(await fetch("/api/tax",{params:{companyId:K,financialYear:ue}})).json();P(_e)}catch(Ee){console.error("Error fetching taxes:",Ee)}},oe=async()=>{try{const Ee=localStorage.getItem("selectedCompanyId"),_e=localStorage.getItem("financialYear");console.log("comanyvendorpl",Ee,_e);const st=new URLSearchParams({companyId:Ee,financialYear:_e}).toString(),rr=await(await fetch(`/api/vendor-price-lists?${st}`)).json();Q(rr)}catch(Ee){console.error("Error fetching price list:",Ee)}},G=async Ee=>{const{name:_e,value:st}=Ee.target;let wt={...e,[_e]:st};if(_e==="materialId")try{const er=(await(await fetch(`/api/material/${st}`)).json()).conversionValue||1;re(er)}catch(rr){console.error("Error fetching material:",rr),re(1)}t(wt)},ce=async Ee=>{Ee.preventDefault();const _e=[];e.unit.trim()||_e.push("Unit (Location) is required."),e.categoryId||_e.push("Category is required."),e.vendorId||_e.push("Vendor is required."),e.materialId||_e.push("Material is required."),e.bum||_e.push("BUM (Base Unit Multiplier) is required."),e.buyer.trim()||_e.push("Buyer is required.");const st={...e,companyId:K,financialYear:ue};if(_e.length>0){alert(_e.join(`
`));return}try{if(U){console.log("Updating with ID:",U),console.log("Form data:",e);const wt=await fetch(`/api/vendor-price-lists/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)});if(console.log("Update response status:",wt.status),wt.ok)alert("Vendor Price List Updated Successfully!"),X(null);else{const rr=await wt.text();throw console.error("Update failed:",rr),new Error(`Update failed: ${wt.status} - ${rr}`)}}else{const wt=await fetch("/api/vendor-price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)});if(wt.ok)alert("Vendor Price List Saved Successfully!");else{const rr=await wt.text();throw console.error("Save failed:",rr),new Error(`Save failed: ${wt.status} - ${rr}`)}}Z(),Y(!1),Re(!1),oe()}catch(wt){console.error("Error saving data:",wt),alert("Failed to save Vendor Price List: "+wt.message)}},Z=()=>{t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),re(1),X(null)},ae=async Ee=>{try{console.log("Editing ID:",Ee);const _e=await fetch(`/api/vendor-price-lists/${Ee}`);if(!_e.ok)throw new Error(`Failed to fetch: ${_e.status} - ${_e.statusText}`);const st=await _e.json(),wt=rr=>rr?typeof rr=="string"?rr:typeof rr=="object"&&(rr.$oid||rr._id)||rr.toString():"";t({categoryId:wt(st.categoryId),vendorId:wt(st.vendorId),materialId:wt(st.materialId),unit:st.unit,bum:st.bum,orderUnit:st.orderUnit,price:st.price,buyer:st.buyer,taxId:wt(st.taxId)}),X(Ee),Y(!0),Re(!0)}catch(_e){console.error("Error fetching record for edit:",_e),alert("Failed to load record for editing: "+_e.message)}},je=Ee=>Ee?typeof Ee=="string"?Ee:typeof Ee=="object"&&(Ee.$oid||Ee._id)||Ee.toString():null,de=Ee=>{const _e=je(Ee),st=k.find(wt=>wt._id===_e);return st?st.categoryName:"Unknown"},ie=Ee=>{const _e=je(Ee),st=D.find(wt=>wt._id===_e);return st?st.name1:"Unknown"},be=Ee=>{const _e=je(Ee),st=D.find(wt=>wt._id===_e);return st?st.vnNo||st.vendorId:"Unknown"},Ne=Ee=>{const _e=je(Ee),st=T.find(wt=>wt._id===_e);return st?st.description:"Unknown"},Fe=Ee=>{const _e=je(Ee),st=T.find(wt=>wt._id===_e);return st?st.materialId:"Unknown"},Xe=Ee=>{if(!Ee)return"No Tax";const _e=je(Ee),st=L.find(wt=>wt._id===_e);return st?st.taxName:"Unknown"},ct=Ee=>{if(!Ee)return"No Tax";const _e=je(Ee),st=L.find(wt=>wt._id===_e);return st?`CGST: ${st.cgst}%, SGST: ${st.sgst}%, IGST: ${st.igst}%`:"Unknown"},[xt,Re]=w.useState(!1),[ht,At]=w.useState(1),_t=10,Wt=O.slice((ht-1)*_t,ht*_t),Ke=Math.ceil(O.length/_t),ge=Ee=>{Ee>=1&&Ee<=Ke&&At(Ee)},ve=()=>{i(!0),y(""),d([])},xe=()=>{i(!1),y(""),d([])},Ie=Ee=>{y(Ee.target.value)},Ze=()=>{if(!b.trim()){d([]);return}if(m==="vendorId"){const Ee=D.filter(_e=>(_e.vendorId||"").toLowerCase().includes(b.toLowerCase()));d(Ee)}else{const Ee=D.filter(_e=>(_e.name1||"").toLowerCase().includes(b.toLowerCase()));d(Ee)}},Ft=()=>{d(D),y("")},Qe=()=>{d([]),y("")},Ye=Ee=>{G({target:{name:"vendorId",value:Ee._id}}),xe()},Le=()=>{l(!0),N(""),h([])},ze=()=>{l(!1),N(""),h([])},ut=Ee=>{N(Ee.target.value)},Te=()=>{if(!C.trim()){h([]);return}if(v==="materialId"){const Ee=T.filter(_e=>(_e.materialId||"").toLowerCase().includes(C.toLowerCase()));h(Ee)}else{const Ee=T.filter(_e=>(_e.description||"").toLowerCase().includes(C.toLowerCase()));h(Ee)}},We=()=>{h(T),N("")},Ge=()=>{h([]),N("")},It=Ee=>{G({target:{name:"materialId",value:Ee._id}}),ze()};w.useEffect(()=>{const Ee=setTimeout(()=>{b.trim()?Ze():d([])},300);return()=>clearTimeout(Ee)},[b,m,D]),w.useEffect(()=>{const Ee=setTimeout(()=>{C.trim()?Te():h([])},300);return()=>clearTimeout(Ee)},[C,v,T]);const Bt=Ee=>{V(!1),oe()};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search"})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>V(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:W,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:()=>{Re(!0),t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),X(null)},children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Vendor Price List"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered datatable",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Buyer"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Wt.map(Ee=>a.jsxs("tr",{children:[a.jsx("td",{children:ie(Ee.vendorId)}),a.jsx("td",{children:de(Ee.categoryId)}),a.jsx("td",{children:Ne(Ee.materialId)}),a.jsx("td",{className:"text-wrap",children:Ee.unit}),a.jsx("td",{className:"text-wrap",children:Ee.bum}),a.jsx("td",{className:"text-wrap",children:Ee.orderUnit}),a.jsxs("td",{className:"text-wrap",children:["Rs",Ee.price||0]}),a.jsx("td",{className:"text-wrap",children:Ee.buyer}),a.jsx("td",{className:"text-wrap",children:Xe(Ee.taxId)}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>ae(je(Ee._id)),children:"Edit"})})]},je(Ee._id)))})]})})})]}),Ke>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${ht===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ee=>{Ee.preventDefault(),ge(ht-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:Ke},(Ee,_e)=>a.jsx("li",{className:`page-item ${ht===_e+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:st=>{st.preventDefault(),ge(_e+1)},children:_e+1})},_e)),a.jsx("li",{className:`page-item ${ht===Ke?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ee=>{Ee.preventDefault(),ge(ht+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),xt&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:U?"Edit Entry":"Add New Entry"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>Re(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:ce,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Unit (Location):"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:e.unit,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),r.map(Ee=>a.jsx("option",{value:Ee.name,children:Ee.name},Ee.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),k.map(Ee=>a.jsx("option",{value:Ee._id,children:Ee.categoryName},Ee._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"vendorId",className:"form-select me-2",value:e.vendorId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Vendor"}),D.map(Ee=>a.jsx("option",{value:Ee._id,children:Ee.name1},Ee._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Vendor",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:e.materialId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Material"}),T.map(Ee=>a.jsx("option",{value:Ee._id,children:Ee.description},Ee._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Le,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"Base Unit (BUM):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter Base Unit (BUM)",value:e.bum,onChange:Ee=>{Ee.target.value=Math.max(0,Ee.target.value),G(Ee)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter Price",value:e.price,onChange:G})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Buyer:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"buyer",className:"form-control",placeholder:"Enter Buyer",value:e.buyer,onChange:G,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Auto-calculated",value:e.orderUnit,onChange:Ee=>{Ee.target.value=Math.max(0,Ee.target.value),G(Ee)}})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:e.taxId,onChange:G,children:[a.jsx("option",{value:"",children:"Select Tax"}),L.map(Ee=>a.jsx("option",{value:Ee._id,children:Ee.taxName},Ee._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>Re(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:U?"Update":"Save"})]})]})]})})})]}),s&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:xe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:m,onChange:Ee=>p(Ee.target.value),children:[a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"name",children:"Vendor Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:m==="vendorId"?"Enter Vendor ID...":"Search by Vendor Name...",value:b,onChange:Ie})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),c.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:c.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((Ee,_e)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ee.vnNo}),a.jsx("td",{className:"text-wrap",children:Ee.name1}),a.jsx("td",{className:"text-wrap",children:Ee.contactNo}),a.jsx("td",{className:"text-wrap",children:Ee.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ye(Ee),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},_e))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:D.length===0?"No vendors loaded from API":b?`No vendors found matching "${b}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:xe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ze})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:v,onChange:Ee=>g(Ee.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:v==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:C,onChange:ut})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:We,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),u.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ge,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:u.map((Ee,_e)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ee.materialId}),a.jsx("td",{className:"text-wrap",children:Ee.description}),a.jsx("td",{className:"text-wrap",children:Ee.baseUnit}),a.jsx("td",{className:"text-wrap",children:Ee.location}),a.jsx("td",{className:"text-wrap",children:Ee.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>It(Ee),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},_e))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:T.length===0?"No materials loaded from API":C?`No materials found matching "${C}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ze,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(vf,{show:M,onClose:()=>V(!1),onImportSuccess:Bt,masterDataType:"vendorPriceList"})]})})}function M8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(!1),[d,u]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState([]),[g,b]=w.useState(null),[y,C]=w.useState([]),[N,k]=w.useState(!1),[S,D]=w.useState("materialId"),[E,T]=w.useState(""),[A,L]=w.useState(!1),P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:P,financialYear:O}}).then(Ge=>{v(Ge.data),console.log("Materials loaded:",Ge.data)}).catch(Ge=>console.error("Error fetching materials:",Ge))},[]),w.useEffect(()=>{if(!A&&!E){C([]);return}const Ge=p.filter(It=>{if(A&&!E)return!0;const Bt=E.toLowerCase();return(It[S]?.toString().toLowerCase()||"").includes(Bt)});C(Ge)},[p,E,S,A]);const Q=Ge=>{if(z!==null&&i?.items){const It=[...i.items];It[z]&&(It[z]={...It[z],materialId:Ge.materialId,description:Ge.description,baseUnit:Ge.baseUnit,price:Ge.price},o({...i,items:It}))}k(!1),re(null)},[z,re]=w.useState(null),[U,X]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0,isdelete:!1}),[B,Y]=w.useState(""),[K,ue]=w.useState("soNumber"),[M,V]=w.useState(!1),[W,ee]=w.useState([]),[te,ne]=w.useState(null),[se,oe]=w.useState("name1"),[G,ce]=w.useState(""),[Z,ae]=w.useState(!1),[je,de]=w.useState([]),[ie,be]=w.useState(""),[Ne,Fe]=w.useState(!1),[Xe,ct]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:P,financialYear:O}}).then(Ge=>r(Ge.data)).catch(Ge=>console.error("Error fetching sales orders",Ge)),Oe.get("/api/goodsissuecategory",{params:{companyId:P,financialYear:O}}).then(Ge=>s(Ge.data)).catch(Ge=>console.error("Error fetching categories",Ge)),Oe.get("/api/customers",{params:{companyId:P,financialYear:O}}).then(Ge=>ee(Ge.data)).catch(Ge=>console.error("Error fetching customers",Ge))},[]);const xt=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsissue",{params:{companyId:P,financialYear:O}}).then(Ge=>{console.log("Documents fetched:",Ge.data),de(Ge.data)}).catch(Ge=>{console.error("Error fetching documents",Ge)})};w.useEffect(()=>{console.log("Categories loaded:",n),n.forEach(Ge=>{console.log(`Category: "${Ge.categoryName}" (length: ${Ge.categoryName.length})`)})},[n]);const Re=Ge=>{o(Ge),X(It=>({...It,customer:Ge.sales||Ge.customer||Ge.customerName,location:Ge.deliveryLocation||""})),c(!1)},ht=Ge=>{X(It=>({...It,customer:Ge.name1})),u(!1)},At=Ge=>{if(X(It=>({...It,docnumber:Ge.docnumber,documentDate:Ge.documentDate||Ge.issueDate||e,postingDate:Ge.postingDate||e,reference:Ge.reference||"",customer:Ge.customer||"",location:Ge.location||""})),ne(Ge),Ge.salesOrderId){const It=t.find(Bt=>Bt._id===Ge.salesOrderId);It&&o(It)}else Ge.items&&o({soNumber:Ge.docnumber,items:Ge.items,sales:Ge.customer,deliveryLocation:Ge.location});m(!1)},[_t,Wt]=w.useState(!1),Ke=Ge=>{const It=Ge.target.value;console.log(`Selected category: "${It}" (length: ${It.length})`);let Bt="",Ee=!1;const _e=It.trim().toLowerCase();_e==="cancel"?(Ee=!0,Wt(!0),console.log("Cancel category selected - enabling document search"),xt()):_e==="demo"?Bt=`DMP-${Date.now()}`:_e==="display"&&(Ee=!0,console.log("Display category selected - enabling document search"),xt());const st=n.find(wt=>wt.categoryName.trim().toLowerCase()===_e);console.log("Selected category object:",st),console.log("Document number enabled:",Ee),X(wt=>({...wt,category:It,catdesc:st?.description||"",docnumber:Ee?"":Bt})),ct(Ee)},ge=Ge=>{const It=Ge.target.value;if(X(Bt=>({...Bt,docnumber:It})),It.length>2){const Bt=je.find(Ee=>Ee.docnumber&&Ee.docnumber.toLowerCase().includes(It.toLowerCase()));Bt&&At(Bt)}},ve=(Ge,It,Bt)=>{const Ee=[...i.items];Ee[Ge][It]=Bt,o({...i,items:Ee})},xe=async Ge=>{if(Ge.preventDefault(),!i)return alert("Please select a Sales Order.");const It={...U,salesOrderId:i._id,items:i.items,issueDate:e};try{if(_t){await Oe.patch(`/api/goodsissue/${te._id}`,{isdelete:!0}),alert("Goods Issue cancelled successfully!");return}else await Oe.post("/api/goodsissue",It),alert("Goods Issue saved successfully!"),X({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0}),o(null),ct(!1)}catch(Bt){console.error("Error saving goods issue",Bt),alert("Failed to save goods issue")}},Ie=t.filter(Ge=>!M&&!B?!1:(Ge[K]?.toLowerCase()||"").includes(B.toLowerCase())),Ze=W.filter(Ge=>!Z&&!G?!1:(Ge[se]?.toLowerCase()||"").includes(G.toLowerCase())),Ft=je.filter(Ge=>!Ne&&!ie?!1:(Ge.docnumber?.toLowerCase()||"").includes(ie.toLowerCase())),Qe=()=>{Y(""),V(!0)},Ye=()=>{Y(""),V(!1)},Le=()=>{ce(""),ae(!0)},ze=()=>{ce(""),ae(!1)},ut=()=>{be(""),Fe(!0),xt()},Te=()=>{be(""),Fe(!1)},We=U.category.trim().toLowerCase()==="display";return a.jsxs("div",{className:"content p-3",children:[a.jsx("h6",{children:"Goods Issue"}),a.jsxs("form",{onSubmit:xe,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header p-2",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Category"}),a.jsxs("select",{name:"category",className:"form-select",value:U.category,onChange:Ke,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Ge=>a.jsx("option",{value:Ge.categoryName,children:Ge.categoryName},Ge._id))]})]}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Description"}),a.jsx("input",{type:"text",name:"catdesc",className:"form-control",value:U.catdesc,readOnly:!0})]}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Sales Order"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",value:i?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!0),children:"Search"})]})]}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Document Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"docnumber",className:"form-control",value:U.docnumber,onChange:ge,readOnly:!Xe,placeholder:Xe?"Enter document number...":""}),Xe&&a.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>m(!0),children:"Search"})]})]})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-xl-2",children:[a.jsx("label",{children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",value:U.documentDate,onChange:Ge=>X(It=>({...It,documentDate:Ge.target.value}))})]}),a.jsxs("div",{className:"col-xl-2",children:[a.jsx("label",{children:"Posting Date"}),a.jsx("input",{type:"date",className:"form-control",value:U.postingDate,onChange:Ge=>X(It=>({...It,postingDate:Ge.target.value}))})]}),a.jsxs("div",{className:"col-xl-2",children:[a.jsx("label",{children:"DC/LLR/REF"}),a.jsx("input",{type:"text",className:"form-control",value:U.reference,onChange:Ge=>X(It=>({...It,reference:Ge.target.value}))})]}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Customer"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm  ",value:U.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(!0),children:"Search"})]})]}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("label",{children:"Location"}),a.jsx("input",{type:"text",className:"form-control",value:U.location,readOnly:!0})]})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Available Qty"}),_t&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:i?.items?.map((Ge,It)=>a.jsxs("tr",{children:[a.jsx("td",{children:It+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control",value:Ge.materialId||"",readOnly:!0}),!We&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{re(It),k(!0)},children:""})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:`form-control ${We?"bg-light":""}`,value:Ge.quantity,onChange:We?void 0:Bt=>ve(It,"quantity",Bt.target.value),readOnly:We,disabled:We})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:`form-control ${We?"bg-light":""}`,value:Ge.deliveryDate,onChange:We?void 0:Bt=>ve(It,"deliveryDate",Bt.target.value),readOnly:We,disabled:We})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${We?"bg-light":""}`,value:Ge.lotNo||"",onChange:We?void 0:Bt=>ve(It,"lotNo",Bt.target.value),readOnly:We,disabled:We})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ge.price,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${We?"bg-light":""}`,value:Ge.availableQty||"",onChange:We?void 0:Bt=>ve(It,"availableQty",Bt.target.value),readOnly:We,disabled:We})}),_t&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:Ge.isCancelled,onChange:Bt=>ve(It,"isCancelled",Bt.target.checked)})})]},It))})]})})})]}),!We&&a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),N&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:S,onChange:Ge=>D(Ge.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${S}`,value:E,onChange:Ge=>T(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>L(!0),children:"View All"}),(E||A)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),L(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:y.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((Ge,It)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.materialId})}),a.jsx("td",{children:Ge.description}),a.jsx("td",{children:Ge.baseUnit}),a.jsx("td",{children:Ge.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Q(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},It))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No materials found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),l&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>c(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:K,onChange:Ge=>ue(Ge.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:B,onChange:Ge=>Y(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Qe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(B||M)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ye,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ie.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ie.map((Ge,It)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.soNumber})}),a.jsx("td",{children:Ge.sales||Ge.customer||Ge.customerName}),a.jsx("td",{children:Ge.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Re(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},It))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:B?`No sales orders found for "${B}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),d&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:se,onChange:Ge=>oe(Ge.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${se}`,value:G,onChange:Ge=>ce(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Le,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(G||Z)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ze,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ze.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ze.map((Ge,It)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.customerId})}),a.jsx("td",{children:Ge.name1}),a.jsx("td",{children:Ge.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ht(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},It))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:G?`No customers found for "${G}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),h&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>m(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:ie,onChange:Ge=>be(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ut,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(ie||Ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Te,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ft.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ft.map((Ge,It)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ge.category})}),a.jsx("td",{children:Ge.customer}),a.jsx("td",{children:Ge.documentDate||Ge.issueDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>At(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},It))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ie?`No documents found for "${ie}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const k5e=({show:e,onClose:t,issue:r})=>r?a.jsx("div",{className:`modal fade${e?" show d-block":""}`,tabIndex:"-1",style:e?{background:"rgba(0,0,0,0.5)"}:{display:"none"},children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview: Goods Issue - ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:t})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Category:"})," ",r.category,a.jsx("br",{}),a.jsx("strong",{children:"Category Desc:"})," ",r.catdesc,a.jsx("br",{}),a.jsx("strong",{children:"Document Date:"})," ",r.documentDate,a.jsx("br",{}),a.jsx("strong",{children:"Posting Date:"})," ",r.postingDate,a.jsx("br",{}),a.jsx("strong",{children:"Reference:"})," ",r.reference,a.jsx("br",{}),a.jsx("strong",{children:"Customer:"})," ",r.customer,a.jsx("br",{})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Location:"})," ",r.location,a.jsx("br",{}),a.jsx("strong",{children:"Issue Date:"})," ",r.issueDate,a.jsx("br",{}),a.jsx("strong",{children:"Sales Order ID:"})," ",r.salesOrderId,a.jsx("br",{}),a.jsx("strong",{children:"Company ID:"})," ",r.companyId,a.jsx("br",{}),a.jsx("strong",{children:"Financial Year:"})," ",r.financialYear,a.jsx("br",{}),a.jsx("strong",{children:"Deleted:"})," ",r.isdelete?"Yes":"No",a.jsx("br",{})]})]}),a.jsx("h6",{className:"mt-3",children:"Items"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Available Qty"}),a.jsx("th",{children:"Total (Qty  Price)"})]})}),a.jsx("tbody",{children:r.items.map((n,s)=>{const i=n.quantity*n.price;return a.jsxs("tr",{children:[a.jsx("td",{children:s+1}),a.jsx("td",{children:n.materialId}),a.jsx("td",{children:n.description}),a.jsx("td",{children:n.quantity}),a.jsx("td",{children:n.baseUnit}),a.jsx("td",{children:n.deliveryDate}),a.jsx("td",{children:n.lotNo}),a.jsx("td",{children:n.price}),a.jsx("td",{children:n.availableQty}),a.jsx("td",{children:i})]},s)})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null,O0=10,R8=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(0),[o,l]=w.useState(1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=w.useState(!1);w.useEffect(()=>{m()},[o]);const m=async()=>{h(!0);try{const S=await Oe.get("/api/goodsissue",{params:{companyId:c,financialYear:d,skip:(o-1)*O0,limit:O0}});t(S.data.items||S.data),i(S.data.totalCount||S.data.total||S.data.length||0)}catch(S){console.error("Error fetching Goods Issues:",S)}h(!1)},p=S=>{const D=window.open("","","height=700,width=1000");D.document.write("<html><head><title>Print Goods Issue</title>"),D.document.write(`<style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
        body { font-family: sans-serif; }
        h5, h6 { margin-top: 10px; }
      </style>`),D.document.write("</head><body>"),D.document.write(`<h5>Preview: Goods Issue - ${S.docnumber}</h5>
      <div>
        <div style="display:flex;gap:40px;margin-bottom:16px;">
          <div>
            <strong>Category:</strong> ${S.category||""}<br/>
            <strong>Category Desc:</strong> ${S.catdesc||""}<br/>
            <strong>Document Date:</strong> ${S.documentDate||""}<br/>
            <strong>Posting Date:</strong> ${S.postingDate||""}<br/>
            <strong>Reference:</strong> ${S.reference||""}<br/>
            <strong>Customer:</strong> ${S.customer||""}<br/>
          </div>
          <div>
            <strong>Location:</strong> ${S.location||""}<br/>
            <strong>Issue Date:</strong> ${S.issueDate||""}<br/>
            <strong>Sales Order ID:</strong> ${S.salesOrderId||""}<br/>
            <strong>Company ID:</strong> ${S.companyId||""}<br/>
            <strong>Financial Year:</strong> ${S.financialYear||""}<br/>
            <strong>Deleted:</strong> ${S.isdelete?"Yes":"No"}<br/>
          </div>
        </div>
        <h6>Items</h6>
        <table style="width:100%;border:1px solid black;">
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Base Unit</th>
              <th>Delivery Date</th>
              <th>Lot No</th>
              <th>Price</th>
              <th>Available Qty</th>
              <th>Total (Qty  Price)</th>
            </tr>
          </thead>
          <tbody>
            ${S.items&&S.items.length>0?S.items.map((E,T)=>{const A=E.quantity*E.price;return`
                      <tr>
                        <td>${T+1}</td>
                        <td>${E.materialId||""}</td>
                        <td>${E.description||""}</td>
                        <td>${E.quantity}</td>
                        <td>${E.baseUnit||""}</td>
                        <td>${E.deliveryDate||""}</td>
                        <td>${E.lotNo||""}</td>
                        <td>${E.price}</td>
                        <td>${E.availableQty}</td>
                        <td>${A}</td>
                      </tr>
                    `}).join(""):'<tr><td colSpan="10">No items</td></tr>'}
          </tbody>
        </table>
      </div>`),D.document.write("</body></html>"),D.document.close(),D.focus(),D.print(),D.close()},[v,g]=w.useState(1),b=v*O0,y=b-O0,C=e.slice(y,b),N=Math.ceil(e.length/O0),k=S=>{S<1||S>N||g(S)};return a.jsxs("div",{className:"container mt-4",children:[a.jsx("h2",{className:"mb-3",children:"Goods Issue Records"}),u?a.jsx("p",{children:"Loading..."}):e.length===0?a.jsx("p",{children:"No records found."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Issue Date"}),a.jsx("th",{children:"Preview Items"}),a.jsx("th",{children:"Print"})]})}),a.jsx("tbody",{children:C.map((S,D)=>{const E=S._id?.$oid||S._id||D;return a.jsxs("tr",{children:[a.jsx("td",{children:(v-1)*O0+D+1}),a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.category}),a.jsx("td",{children:S.documentDate}),a.jsx("td",{children:S.postingDate}),a.jsx("td",{children:S.reference}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:S.issueDate}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>n(S),children:"Preview"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(S),children:"Print"})})]},E)})})]})})})}),N>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const D=[],E=[];D.push(1);for(let L=Math.max(2,v-2);L<=Math.min(N-1,v+2);L++)D.push(L);N>1&&D.push(N);const T=[...new Set(D)].sort((L,P)=>L-P);let A;for(let L of T)A&&(L-A===2?E.push(A+1):L-A!==1&&E.push("...")),E.push(L),A=L;return E.map((L,P)=>L==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${P}`):a.jsx("li",{className:`page-item ${v===L?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>k(L),children:L})},L))})(),a.jsx("li",{className:`page-item ${v===N?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v+1),disabled:v===N,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]}),a.jsx(k5e,{show:!!r,onClose:()=>n(null),issue:r})]})};function F8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),d=localStorage.getItem("selectedCompanyId"),u=localStorage.getItem("financialYear"),[h,m]=w.useState(null),[p,v]=w.useState(!1),[g,b]=w.useState(!1),[y,C]=w.useState(!1),[N,k]=w.useState(null),[S,D]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),[E,T]=w.useState(""),[A,L]=w.useState("poNumber"),[P,O]=w.useState(!1),[Q,z]=w.useState(""),[re,U]=w.useState("name1"),[X,B]=w.useState(!1),[Y,K]=w.useState(!1),[ue,M]=w.useState("materialId"),[V,W]=w.useState(""),[ee,te]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:d,financialYear:u}}).then(ve=>r(ve.data)).catch(ve=>console.error("Error fetching POs:",ve)),Oe.get("/api/vendors",{params:{companyId:d}}).then(ve=>s(ve.data)).catch(ve=>console.error("Error fetching vendors:",ve)),Oe.get("/api/material",{params:{companyId:d}}).then(ve=>o(ve.data)).catch(ve=>console.error("Error fetching materials:",ve)),Oe.get("/api/goodsreceiptcategory",{params:{companyId:d}}).then(ve=>c(ve.data)).catch(ve=>console.error("Error fetching categories:",ve))},[]);const ne=ve=>{m(ve),D(xe=>({...xe,vendor:ve.vendor||"",location:ve.deliveryLocation||""})),v(!1)},se=ve=>{D(xe=>({...xe,vendor:ve.name1})),C(!1)},oe=ve=>{if(N!==null&&h?.items){const xe=[...h.items];xe[N]&&(xe[N]={...xe[N],materialId:ve.materialId,description:ve.description,baseUnit:ve.baseUnit,price:ve.price},m(Ie=>({...Ie,items:xe})))}K(!1)},[G,ce]=w.useState(!1),[Z,ae]=w.useState(!1),je=ve=>{const xe=ve.target.value,Ie=l.find(Ft=>Ft.categoryName===xe);D(Ft=>({...Ft,category:xe,catdesc:Ie?.categoryName||""}));const Ze=Ie?.categoryName?.toLowerCase();ae(Ze==="cancel"),ce(Ze==="display")},de=(ve,xe,Ie)=>{const Ze=[...h.items];Ze[ve][xe]=Ie,m({...h,items:Ze})},ie=async ve=>{if(ve.preventDefault(),!h)return alert("Please select a Purchase Order.");const xe={...S,purchaseOrderId:h._id,items:h.items,receiptDate:e,companyId:d,financialYear:u};try{l.find(Ie=>Ie.categoryName===S.category)?.categoryName.toLowerCase()==="cancel"?await Oe.patch(`/api/goodsreceipt/${h._id}`,{isdelete:!0}):await Oe.post("/api/goodsreceipt",xe),alert("Goods Receipt saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),m(null)}catch(Ie){console.error("Error saving goods receipt",Ie),alert("Failed to save goods receipt")}},be=t.filter(ve=>!P&&!E?!1:(ve[A]?.toLowerCase()||"").includes(E.toLowerCase())),Ne=n.filter(ve=>!X&&!Q?!1:(ve[re]?.toLowerCase()||"").includes(Q.toLowerCase())),Fe=i.filter(ve=>!ee&&!V?!1:(ve[ue]?.toLowerCase()||"").includes(V.toLowerCase())),[Xe,ct]=w.useState([]),[xt,Re]=w.useState("grNumber"),[ht,At]=w.useState(""),[_t,Wt]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/goodsreceipt",{params:{companyId:d,financialYear:u}}).then(ve=>ct(ve.data)).catch(ve=>console.error("Error fetching goods receipts:",ve))},[]);const Ke=Xe.filter(ve=>!_t&&!ht?!1:(ve[xt]?.toLowerCase()||"").includes(ht.toLowerCase())),ge=ve=>{const Ie=ve.category?.toLowerCase()==="cancel";D(Ye=>({...Ye,docnumber:ve.docnumber,vendor:ve.vendor,location:ve.location,reference:ve.reference,documentDate:ve.documentDate,postingDate:ve.postingDate}));const{category:Ze,catdesc:Ft,...Qe}=ve;m(Qe),console.log("select ",ve.items),ae(!Ie),b(!1)};return console.log("selectedPO",h),console.log("isReadOnlyMode",Z),a.jsxs("div",{className:"content p-3",children:[a.jsx("h6",{children:"Goods Receipt"}),a.jsxs("form",{onSubmit:ie,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Category"}),a.jsxs("select",{className:"form-select",value:S.category,onChange:je,children:[a.jsx("option",{value:"",children:"Select"}),l.map(ve=>a.jsx("option",{value:ve.categoryName,children:ve.categoryName},ve._id))]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Description"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.catdesc,readOnly:!0})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"PO Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:h?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:Z||G,onClick:()=>v(!0),children:"Search"})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Document Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.docnumber,onChange:ve=>D(xe=>({...xe,docnumber:ve.target.value})),readOnly:!Z}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:"Search"})]})]})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",value:S.documentDate,readOnly:Z,onChange:ve=>D(xe=>({...xe,documentDate:ve.target.value}))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{children:"Posting Date"}),a.jsx("input",{type:"date",className:"form-control",value:S.postingDate,readOnly:Z,onChange:ve=>D(xe=>({...xe,postingDate:ve.target.value}))})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Reference"}),a.jsx("input",{type:"text",className:"form-control",value:S.reference,onChange:ve=>D(xe=>({...xe,reference:ve.target.value})),readOnly:G})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.vendor,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:Z||G,onClick:()=>C(!0),children:"Search"})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{children:"Location"}),a.jsx("input",{type:"text",className:"form-control",value:S.location,readOnly:!0})]})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),Z&&!G&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:(h?.items?.length?h.items:[{}]).map((ve,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:xe+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:ve.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{k(xe),K(!0)},disabled:Z||G,children:""})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:ve.quantity||"",onChange:Ie=>de(xe,"quantity",Ie.target.value),readOnly:Z||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:ve.deliveryDate||e,onChange:Ie=>de(xe,"deliveryDate",Ie.target.value),readOnly:Z||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.lotNo||"",onChange:Ie=>de(xe,"lotNo",Ie.target.value),readOnly:Z||G})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:ve.price||"",readOnly:!0})}),Z&&!G&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",onChange:Ie=>de(xe,"cancel",Ie.target.checked)})})]},xe))})]})})})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:re,onChange:ve=>U(ve.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${re}`,value:Q,onChange:ve=>z(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>B(!0),children:"View All"}),(Q||X)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{z(""),B(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ne.map((ve,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.vendorId})}),a.jsx("td",{children:ve.name1}),a.jsx("td",{children:ve.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>se(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Q?`No vendors found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:ve=>L(ve.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:ve=>T(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>O(!0),children:"View All"}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),O(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:be.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:be.map((ve,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:ve.poNumber})}),a.jsx("td",{children:ve.vendor}),a.jsx("td",{children:ve.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ne(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No purchase orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ue,onChange:ve=>M(ve.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ue}`,value:V,onChange:ve=>W(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>te(!0),children:"View All"}),(V||ee)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),te(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Fe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Fe.map((ve,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.materialId})}),a.jsx("td",{children:ve.description}),a.jsx("td",{children:ve.baseUnit}),a.jsx("td",{children:ve.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>oe(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:V?`No materials found for "${V}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Goods Receipt"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:xt,onChange:ve=>Re(ve.target.value),children:[a.jsx("option",{value:"docnumber",children:"GR Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${xt}`,value:ht,onChange:ve=>At(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>Wt(!0),children:"View All"}),(ht||_t)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{At(""),Wt(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ke.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"GR Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ke.map((ve,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.docnumber})}),a.jsx("td",{children:ve.vendor}),a.jsx("td",{children:ve.location}),a.jsx("td",{children:ve.reference}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ge(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ht?`No receipts found for "${ht}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const vb=10,L8=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[u,h]=w.useState(1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{try{const T=await Oe.get("/api/goodsreceipt",{params:{companyId:m,financialYear:p}});t(T.data)}catch(T){console.error("Error fetching Goods Receipts:",T)}},g=T=>{const A=window.open("","","height=600,width=900");A.document.write("<html><head><title>Print Goods Receipt</title>"),A.document.write("<style>table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; } h4 { margin-bottom: 10px; }</style>"),A.document.write("</head><body>"),A.document.write("<h4>Goods Receipt</h4>"),A.document.write('<table style="margin-bottom:10px;">'),A.document.write("<tbody>"),A.document.write(`<tr><td><strong>Document No:</strong></td><td>${T.docnumber}</td></tr>`),A.document.write(`<tr><td><strong>Document Date:</strong></td><td>${T.documentDate}</td></tr>`),A.document.write(`<tr><td><strong>Posting Date:</strong></td><td>${T.postingDate}</td></tr>`),A.document.write(`<tr><td><strong>Reference:</strong></td><td>${T.reference}</td></tr>`),A.document.write(`<tr><td><strong>Vendor:</strong></td><td>${T.vendor}</td></tr>`),A.document.write(`<tr><td><strong>Location:</strong></td><td>${T.location}</td></tr>`),A.document.write(`<tr><td><strong>Receipt Date:</strong></td><td>${T.receiptDate}</td></tr>`),A.document.write("</tbody></table>"),A.document.write("<h5>Items</h5>"),A.document.write('<table style="width:100%;">'),A.document.write("<thead><tr>"),A.document.write("<th>#</th>"),A.document.write("<th>Material ID</th>"),A.document.write("<th>Description</th>"),A.document.write("<th>Quantity</th>"),A.document.write("<th>Base Unit</th>"),A.document.write("<th>Delivery Date</th>"),A.document.write("<th>Lot No</th>"),A.document.write("<th>Price</th>"),A.document.write("<th>Total</th>"),A.document.write("</tr></thead><tbody>"),T.items&&T.items.length>0?T.items.forEach((L,P)=>{A.document.write("<tr>"),A.document.write(`<td>${P+1}</td>`),A.document.write(`<td>${L.materialId}</td>`),A.document.write(`<td>${L.description}</td>`),A.document.write(`<td>${L.quantity}</td>`),A.document.write(`<td>${L.baseUnit}</td>`),A.document.write(`<td>${L.deliveryDate}</td>`),A.document.write(`<td>${L.lotNo}</td>`),A.document.write(`<td>${L.price}</td>`),A.document.write(`<td>${(L.quantity*L.price).toFixed(2)}</td>`),A.document.write("</tr>")}):A.document.write('<tr><td colspan="9" style="text-align:center;">No items found</td></tr>'),A.document.write("</tbody></table>"),A.document.write("</body></html>"),A.document.close(),A.focus(),A.print(),A.close()},b=T=>{n(T)},y=()=>{n(null)},N=e.filter(T=>{if(o&&(T.postingDate?T.postingDate.slice(0,10):"")<o||c&&(T.postingDate?T.postingDate.slice(0,10):"")>c)return!1;if(s.trim()!==""){const A=s.trim().toLowerCase();if(![T.docnumber,T.reference,T.vendor,T.location].some(O=>O&&O.toLowerCase().includes(A)))return!1}return!0}),k=Math.ceil(N.length/vb)||1,S=T=>{T<1||T>k||h(T)},D=()=>{i(""),l(""),d(""),h(1)},E=N.slice((u-1)*vb,u*vb);return w.useEffect(()=>{u>k&&h(k)},[N,k]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Goods Receipt List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Goods Receipt List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-sm-12",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row ",children:[a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search (Doc No, Reference, Vendor, Location)...",value:s,onChange:T=>i(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date From"}),a.jsx("input",{type:"date",className:"form-control",value:o,onChange:T=>l(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date To"}),a.jsx("input",{type:"date",className:"form-control",value:c,onChange:T=>d(T.target.value)})]}),a.jsx("div",{className:"col-md-3 mb-2 d-flex align-items-end",children:a.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:D,children:"Reset"})})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive table-nowrap",children:a.jsxs("table",{className:"table table-sm mb-0 border",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Receipt Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No goods receipt records found."})}):E.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:(u-1)*vb+A+1}),a.jsx("td",{children:T.docnumber}),a.jsx("td",{children:T.documentDate}),a.jsx("td",{children:T.postingDate}),a.jsx("td",{children:T.reference}),a.jsx("td",{children:T.vendor}),a.jsx("td",{children:T.location}),a.jsx("td",{children:T.receiptDate}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>g(T),children:"Print"}),a.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>b(T),children:"Preview"})]})]},T._id?.$oid||(u-1)*vb+A))})]})})})]}),k>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u-1),disabled:u===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const A=[],L=[];A.push(1);for(let Q=Math.max(2,u-2);Q<=Math.min(k-1,u+2);Q++)A.push(Q);k>1&&A.push(k);const P=[...new Set(A)].sort((Q,z)=>Q-z);let O;for(let Q of P)O&&(Q-O===2?L.push(O+1):Q-O!==1&&L.push("...")),L.push(Q),O=Q;return L.map((Q,z)=>Q==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${z}`):a.jsx("li",{className:`page-item ${u===Q?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>S(Q),children:Q})},Q))})(),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u+1),disabled:u===k,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]})})]}),r&&a.jsx("div",{className:"modal show",tabIndex:"-1",style:{display:"block",background:"rgba(0,0,0,0.3)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:y,children:a.jsx("div",{className:"modal-dialog modal-xl",style:{pointerEvents:"auto",marginTop:"5vh"},onClick:T=>T.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview - Document No: ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:y})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("table",{className:"table table-borderless mb-3",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Document Date:"})}),a.jsx("td",{children:r.documentDate}),a.jsx("td",{children:a.jsx("strong",{children:"Posting Date:"})}),a.jsx("td",{children:r.postingDate})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Reference:"})}),a.jsx("td",{children:r.reference}),a.jsx("td",{children:a.jsx("strong",{children:"Vendor:"})}),a.jsx("td",{children:r.vendor})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Location:"})}),a.jsx("td",{children:r.location}),a.jsx("td",{children:a.jsx("strong",{children:"Receipt Date:"})}),a.jsx("td",{children:r.receiptDate})]})]})}),a.jsx("h6",{children:"Items"}),a.jsxs("table",{className:"table border",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:r.items&&r.items.length>0?r.items.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:A+1}),a.jsx("td",{children:T.materialId}),a.jsx("td",{children:T.description}),a.jsx("td",{children:T.quantity}),a.jsx("td",{children:T.baseUnit}),a.jsx("td",{children:T.deliveryDate}),a.jsx("td",{children:T.lotNo}),a.jsx("td",{children:T.price}),a.jsx("td",{children:(T.quantity*T.price).toFixed(2)})]},T._id?.$oid||A)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No items found"})})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Close"})})]})})})]})};function B8(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),[h,m]=w.useState([]),[p,v]=w.useState(!1),[g,b]=w.useState(""),[y,C]=w.useState(!1),[N,k]=w.useState(!1),[S,D]=w.useState(null),[E,T]=w.useState(!1),[A,L]=w.useState("materialId"),[P,O]=w.useState(""),[Q,z]=w.useState([]),re=t.category.trim().toLowerCase()==="display",U=localStorage.getItem("selectedCompanyId"),X=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/material",{params:{companyId:U,financialYear:X}}).then(ie=>c(ie.data)).catch(ie=>console.error("Error fetching materials:",ie)),Oe.get("/api/locations",{params:{companyId:U,financialYear:X}}).then(ie=>s(ie.data)),Oe.get("/api/goodsTransferCategory",{params:{companyId:U,financialYear:X}}).then(ie=>o(ie.data)).catch(ie=>console.error("Error fetching categories:",ie))},[]),w.useEffect(()=>{console.log("Categories loaded:",i),i.forEach(ie=>{console.log(`Category: "${ie.categoryName}" (length: ${ie.categoryName.length})`)})},[i]);const B=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsTransfer",{params:{companyId:U,financialYear:X}}).then(ie=>{console.log("Documents fetched:",ie.data),m(ie.data)}).catch(ie=>{console.error("Error fetching documents",ie)})},Y=ie=>{const be=ie.target.value;console.log(`Selected category: "${be}" (length: ${be.length})`);let Ne="",Fe=!1;const Xe=be.trim().toLowerCase();Xe==="cancel"?Ne=`CNL-${Date.now()}`:Xe==="demo"?Ne=`DMP-${Date.now()}`:Xe==="display"&&(Fe=!0,console.log("Display category selected - enabling document search"),B());const ct=i.find(xt=>xt.categoryName.trim().toLowerCase()===Xe);console.log("Selected category object:",ct),console.log("Document number enabled:",Fe),r(xt=>({...xt,category:be,catdesc:ct?.description||"",docnumber:Fe?"":Ne})),k(Fe)},K=(ie,be)=>{r(Ne=>({...Ne,[ie]:be}))},ue=ie=>{const be=ie.target.value;if(r(Ne=>({...Ne,docnumber:be})),be.length>=2){const Ne=h.find(Fe=>Fe.docnumber&&Fe.docnumber.toLowerCase().includes(be.toLowerCase()));Ne&&V(Ne)}},M=()=>{N&&h.length===0&&(console.log("Input field clicked - fetching documents"),B())},V=ie=>{console.log("Selected document:",ie),r(be=>({...be,docnumber:ie.docnumber||"",docDate:ie.docDate||e,postDate:ie.postDate||e,reference:ie.reference||"",location:ie.location||""})),ie.items&&ie.items.length>0&&u(ie.items),v(!1)},W=(ie,be,Ne)=>{const Fe=[...d];Fe[ie][be]=Ne,u(Fe)},ee=()=>{u([...d,{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}])},te=async ie=>{ie.preventDefault();const be={...t,companyId:U,financialYear:X,items:d,date:e};try{await Oe.post("/api/goodsTransfer",be),alert("Goods Transfer Saved Successfully!"),r({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),u([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),k(!1),m([])}catch(Ne){alert("Failed to save. See console for error."),console.error(Ne)}},ne=ie=>{O(ie.target.value);const be=l.filter(Ne=>Ne[A]?.toLowerCase().includes(ie.target.value.toLowerCase()));z(be)},se=()=>{z(l)},oe=()=>{O(""),z([])},G=()=>{T(!1),O(""),z([])},ce=ie=>{const be=[...d];be[S]={...be[S],materialId:ie.materialId,description:ie.description,baseUnit:ie.baseUnit,price:ie.price},u(be),G()},Z=h.filter(ie=>!y&&!g?!1:(ie.docnumber?.toLowerCase()||"").includes(g.toLowerCase())),ae=()=>{b(""),C(!0),h.length===0&&B()},je=()=>{b(""),C(!1)},de=ie=>{b(ie.target.value),C(!1)};return a.jsxs("div",{className:"container p-3",children:[a.jsx("h6",{children:"Matrial Transfer"}),a.jsxs("form",{onSubmit:te,children:[a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Category"}),a.jsxs("select",{className:"form-select",value:t.category,onChange:Y,children:[a.jsx("option",{value:"",children:"Select"}),i.map((ie,be)=>a.jsx("option",{value:ie.categoryName,children:ie.categoryName},be))]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Description"}),a.jsx("input",{className:"form-control",value:t.catdesc,readOnly:!0})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Document No"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control",value:t.docnumber,onChange:ue,onClick:M,readOnly:!N,placeholder:N?"Enter document number...":""}),N&&a.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{h.length===0&&B(),v(!0)},children:"Search"})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",value:t.docDate,onChange:ie=>K("docDate",ie.target.value)})]})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"Posting Date"}),a.jsx("input",{type:"date",className:"form-control",value:t.postDate,onChange:ie=>K("postDate",ie.target.value)})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{children:"REF"}),a.jsx("input",{className:"form-control",value:t.reference,onChange:ie=>K("reference",ie.target.value)})]}),a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{children:"Location:"}),a.jsxs("select",{className:"form-select",value:t.location,onChange:ie=>K("location",ie.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),n.map(ie=>a.jsx("option",{value:ie.name||ie.locationName||ie._id,children:ie.name||ie.locationName||ie._id},ie._id||ie.id||ie.name))]})]})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:d.map((ie,be)=>a.jsxs("tr",{children:[a.jsx("td",{children:be+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:ie.materialId,readOnly:!0}),!re&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{D(be),T(!0)},children:""})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:ie.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:ie.quantity,onChange:re?void 0:Ne=>W(be,"quantity",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:ie.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,type:"date",value:ie.deliveryDate,onChange:re?void 0:Ne=>W(be,"deliveryDate",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:ie.lotNo,onChange:re?void 0:Ne=>W(be,"lotNo",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:ie.price,onChange:re?void 0:Ne=>W(be,"price",Ne.target.value),readOnly:re,disabled:re})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${re?"bg-light":""}`,value:ie.text,onChange:re?void 0:Ne=>W(be,"text",Ne.target.value),readOnly:re,disabled:re})})]},be))})]})}),!re&&a.jsx("button",{type:"button",className:"btn btn-sm btn-secondary mb-2",onClick:ee,children:"+ Add Row"}),!re&&a.jsx("div",{className:"text-end",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),E&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:G})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:ie=>L(ie.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:P,onChange:ne})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:se,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Q.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:oe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Q.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Q.map((ie,be)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ie.materialId})}),a.jsx("td",{children:ie.description}),a.jsx("td",{children:ie.baseUnit}),a.jsx("td",{children:ie.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ce(ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:P?`No materials found for "${P}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:G,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:g,onChange:de})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ae,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(g||y)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Z.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Z.map((ie,be)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:ie.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:ie.category})}),a.jsx("td",{children:ie.location}),a.jsx("td",{children:ie.docDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>V(ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g?`No documents found for "${g}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function U8(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=w.useState([]),u=e.filter(h=>{const m=h.description.toLowerCase().includes(r.toLowerCase())||h.materialId.toLowerCase().includes(r.toLowerCase());console.log("matchesSearch",s);const p=s?h.categoryId?._id===s:!0;return m&&p});return w.useEffect(()=>{(async()=>{try{const p=await Oe.get("/api/category",{params:{companyId:o}});d(p.data),console.log("Categories fetched:",p.data)}catch(p){console.error("Failed to fetch categories:",p)}})(),(async()=>{try{console.log("Fetching stock for companyId:",o,"and financialYear:",l);const p=await Oe.get("/api/stock/data",{params:{companyId:o,financialYear:l}});console.log("Stock data fetched:",p.data),t(p.data),console.log("Stock data fetched:",p.data)}catch(p){console.error("Failed to fetch stock:",p)}})()},[]),a.jsxs("div",{className:"content",children:[a.jsx("h3",{className:"mb-3",children:"Stock Inventory"}),a.jsxs("div",{className:"row mb-4 ",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:" Search by Description or Material No",value:r,onChange:h=>n(h.target.value)})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",value:s,onChange:h=>i(h.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),c.map(h=>a.jsx("option",{value:h._id,children:h.categoryName},h._id))]})})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[a.jsx("thead",{className:"table-primary text-center",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Lot Number"}),a.jsx("th",{children:"Updated At"})]})}),a.jsx("tbody",{children:u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:"No stock found."})}):u.map((h,m)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:m+1}),a.jsx("td",{children:h.materialId||h.matno}),a.jsx("td",{children:h.description||h.matdesc}),a.jsx("td",{children:h.categoryId?.categoryName}),a.jsx("td",{className:"text-center",children:h.baseUnit||h.uom}),a.jsx("td",{className:"text-end",children:h.quantityAvailable??h.quantity}),a.jsx("td",{className:"text-center",children:a.jsx("span",{className:`badge ${(h.status||(h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="In Stock"?"bg-success":(h.status||(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="Low Stock"?"bg-warning text-dark":"bg-danger"}`,children:h.status||((h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")})}),a.jsx("td",{children:h.location||"-"}),a.jsx("td",{children:h.lotNumber||"-"}),a.jsx("td",{children:h.updatedAt?new Date(h.updatedAt).toLocaleString():"-"})]},m))})]})})]})}const yE=10,_5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),[o,l]=w.useState(!0),[c,d]=w.useState(null),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),w.useEffect(()=>{m()},[]);const m=async()=>{try{const k=(await Oe.get("/api/invoiceform",{params:{companyId:u,financialYear:h}})).data.sort((S,D)=>new Date(D.createdAt)-new Date(S.createdAt));t(k),d(null)}catch(N){d("Failed to fetch invoices"),console.error(N)}finally{l(!1)}},p=N=>{n(N.target.value),i(1)},v=w.useMemo(()=>r?e.filter(N=>[N.docnumber,N.vendor,N.location,N.invoiceRef,N.reference].join(" ").toLowerCase().includes(r.toLowerCase())):e,[r,e]),g=Math.ceil(v.length/yE),b=w.useMemo(()=>{const N=(s-1)*yE;return v.slice(N,N+yE)},[v,s]),y=N=>{N<1||N>g||i(N)},C=N=>{const k=`
    <html>
      <head>
        <title>Invoice - ${N.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Invoice Document</h2>
        <p><strong>Document No:</strong> ${N.docnumber}</p>
        <p><strong>Vendor:</strong> ${N.vendor}</p>
        <p><strong>Location:</strong> ${N.location}</p>
        <p><strong>Reference:</strong> ${N.reference||"-"}</p>
        <p><strong>Invoice Ref:</strong> ${N.invoiceRef||"-"}</p>
        <p><strong>Date:</strong> ${new Date(N.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${N.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId||"DEMO"}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${N.totalAmount?.toFixed(2)||"-"}</p>
          <p>Discount: ${N.discount?.toFixed(2)||"0.00"}</p>
          <p>Net Amount: ${N.netAmount?.toFixed(2)||"-"}</p>
          <p>CGST (%): ${N.cgst}%</p>
          <p>SGST (%): ${N.sgst}%</p>
          <p>IGST (%): ${N.igst}%</p>
          <p><strong>Final Total: ${N.finalTotal?.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):c?a.jsx("div",{className:"alert alert-danger",children:c}):a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between ",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Search invoices...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Invoice Ref"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.docnumber}),a.jsx("td",{children:N.vendor}),a.jsx("td",{children:N.location}),a.jsx("td",{children:N.reference||"-"}),a.jsx("td",{children:N.invoiceRef||"-"}),a.jsx("td",{children:new Date(N.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["",N.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(N),className:"btn btn-sm btn-primary",children:"Print"})})]},N._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s-1),children:""})}),Array.from({length:g},(N,k)=>a.jsx("li",{className:`page-item ${s===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${s===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s+1),children:""})})]})})]})};function E5e(){const e=new Date().toISOString().split("T")[0],[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState([]),[h,m]=w.useState({}),[p,v]=w.useState(0),g=Gu(),[b,y]=w.useState(null),[C,N]=w.useState(!1),[k,S]=w.useState(!1),[D,E]=w.useState(null),[T,A]=w.useState("po"),[L,P]=w.useState([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),O=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear"),z=localStorage.getItem("selectedCompanyId"),[re,U]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[X,B]=w.useState(""),[Y,K]=w.useState("poNumber"),[ue,M]=w.useState(!1),[V,W]=w.useState(""),[ee,te]=w.useState("name1"),[ne,se]=w.useState(!1),[oe,G]=w.useState(!1),[ce,Z]=w.useState("materialId"),[ae,je]=w.useState(""),[de,ie]=w.useState(!1);w.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:O,financialYear:Q}}).then(Te=>r(Te.data)).catch(Te=>console.error("Error fetching POs:",Te)),Oe.get("/api/vendors",{params:{companyId:O,financialYear:Q}}).then(Te=>s(Te.data)).catch(Te=>console.error("Error fetching vendors:",Te)),Oe.get("/api/material",{params:{companyId:O,financialYear:Q}}).then(Te=>o(Te.data)).catch(Te=>console.error("Error fetching materials:",Te)),Oe.get("/api/invoicecategory").then(Te=>c(Te.data)).catch(Te=>console.error("Error fetching categories:",Te)),Oe.get("/api/tax").then(Te=>u(Te.data)).catch(Te=>console.error("Error fetching tax:",Te))},[]);const be=Te=>{console.log("Selected PO:",Te),y(Te),U(We=>({...We,vendor:Te.vendor||"",location:Te.deliveryLocation||"",priceUnit:Te.priceUnit||""})),N(!1)},Ne=Te=>{U(We=>({...We,vendor:Te.name1})),S(!1)},Fe=Te=>{if(D!==null&&b?.items){const We=[...b.items];We[D]&&(We[D]={...We[D],materialId:Te.materialId,description:Te.description,baseUnit:Te.baseUnit,price:Te.price,priceUnit:Te.priceUnit||re.priceUnit},y(Ge=>({...Ge,items:We})))}G(!1)},Xe=Te=>{const We=Te.target.value,Ge=l.find(It=>It.categoryName===We);U(It=>({...It,category:We,catdesc:Ge?.description||""}))},ct=(Te,We,Ge)=>{const It=[...b.items];It[Te][We]=Ge,y({...b,items:It})},xt=(Te,We,Ge)=>{const It=[...L];if(It[Te][We]=Ge,We==="quantity"||We==="price"){const Bt=parseFloat(It[Te].quantity||0),Ee=parseFloat(It[Te].price||0);It[Te].amount=Bt*Ee}P(It)},Re=()=>{P([...L,{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}])},ht=Te=>{if(L.length>1){const We=L.filter((Ge,It)=>It!==Te);P(We)}},At=Te=>{A(Te),Te==="misc"&&(y(null),U(We=>({...We,vendor:"",location:""})))},_t=async Te=>{if(Te.preventDefault(),T==="po"&&!b)return alert("Please select a Purchase Order.");if(T==="misc"&&!re.vendor)return alert("Please select a vendor for miscellaneous invoice.");const We={...re,invoiceType:T,purchaseOrderId:T==="po"?b._id:null,items:T==="po"?b.items:L,receiptDate:e,taxCode:h.taxCode,taxName:h.taxName,cgst:Ye,sgst:Le,igst:ze,companyId:z,financialYear:Q,totalAmount:ve,discount:p,netAmount:Ie,finalTotal:ut,balance:ut};try{await Oe.post("/api/invoiceform",We),alert("Invoice saved successfully!"),g("/InvoiceList"),U({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",priceUnit:"",balance:""}),y(null),m({}),v(0),P([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),A("po")}catch(Ge){console.error("Error saving invoice:",Ge),alert("Failed to save invoice")}},Wt=t.filter(Te=>!ue&&!X?!1:(Te[Y]?.toLowerCase()||"").includes(X.toLowerCase())),Ke=n.filter(Te=>!ne&&!V?!1:(Te[ee]?.toLowerCase()||"").includes(V.toLowerCase())),ge=i.filter(Te=>!de&&!ae?!1:(Te[ce]?.toLowerCase()||"").includes(ae.toLowerCase())),ve=T==="po"?b?.items?.reduce((Te,We)=>Te+parseFloat(We.quantity||0)*parseFloat(We.price||0),0)||0:L.reduce((Te,We)=>Te+parseFloat(We.amount||0),0)||0,xe=parseFloat(p||0),Ie=ve-xe,Ze=parseFloat(h.cgst||0),Ft=parseFloat(h.sgst||0),Qe=parseFloat(h.igst||0),Ye=parseFloat((Ze/100*Ie).toFixed(2)),Le=parseFloat((Ft/100*Ie).toFixed(2)),ze=parseFloat((Qe/100*Ie).toFixed(2)),ut=parseFloat((Ie+Ye+Le+ze).toFixed(2));return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:_t,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"row mb-3",children:a.jsxs("div",{className:"col-md-12",children:[a.jsx("label",{className:"form-label",children:"Invoice Type:"}),a.jsxs("div",{className:"d-flex gap-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"poInvoice",value:"po",checked:T==="po",onChange:Te=>At(Te.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"poInvoice",children:"Purchase Order Invoice"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"miscInvoice",value:"misc",checked:T==="misc",onChange:Te=>At(Te.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"miscInvoice",children:"Miscellaneous Invoice"})]})]})]})}),a.jsxs("div",{className:"row mb-2",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Category :"})}),a.jsx("div",{className:"col-md-7",children:a.jsxs("select",{className:"form-select",value:re.category,onChange:Xe,children:[a.jsx("option",{value:"",children:"Select"}),l.map(Te=>a.jsx("option",{value:Te.categoryName,children:Te.categoryName},Te._id))]})})]}),T==="po"&&a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-md-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",placeholder:"Enter PO Number",className:"form-control form-control-sm",value:b?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>N(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Vendor :"})}),a.jsx("div",{className:"col-md-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Vendor Name",value:re.vendor,readOnly:T==="po"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>S(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Tax Code :"})}),a.jsx("div",{className:"col-md-7",children:a.jsxs("select",{className:"form-select",value:h.taxCode||"",onChange:Te=>{const We=d.find(Ge=>Ge.taxCode===Te.target.value);m(We||{})},children:[a.jsx("option",{value:"",children:"Select"}),d.map(Te=>a.jsxs("option",{value:Te.taxCode,children:[Te.taxCode," - ",Te.taxName]},Te._id))]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Tax Name :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Tax Name",value:h.taxName||"",onChange:Te=>m(We=>({...We,taxName:Te.target.value}))})})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Document Date :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:re.documentDate,onChange:Te=>U(We=>({...We,documentDate:Te.target.value}))})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Posting Date :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:re.postingDate,onChange:Te=>U(We=>({...We,postingDate:Te.target.value}))})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Reference :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Reference",value:re.reference,onChange:Te=>U(We=>({...We,reference:Te.target.value}))})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Location :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",placeholder:"Enter Location",className:"form-control",value:re.location,onChange:Te=>U(We=>({...We,location:Te.target.value})),readOnly:T==="po"})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsx("label",{className:"form-label",children:"Invoice Ref :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Invoice Reference",value:re.invoiceRef,onChange:Te=>U(We=>({...We,invoiceRef:Te.target.value}))})})]})]})]})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:T==="po"?a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(b?.items?.length?b.items:[{}]).map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:We+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Te.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(We),G(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.hsnNo||"",onChange:Ge=>ct(We,"hsnNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Te.quantity||"",onChange:Ge=>ct(We,"quantity",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Te.deliveryDate,onChange:Ge=>ct(We,"deliveryDate",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.lotNo||"",onChange:Ge=>ct(We,"lotNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Te.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.priceUnit||"",readOnly:!0})})]},We))})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h6",{children:"Miscellaneous Items"}),a.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Re,children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:L.map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:We+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.description,onChange:Ge=>xt(We,"description",Ge.target.value),placeholder:"Enter description"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.hsnNo,onChange:Ge=>xt(We,"hsnNo",Ge.target.value),placeholder:"HSN Code"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Te.quantity,onChange:Ge=>xt(We,"quantity",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Te.baseUnit,onChange:Ge=>xt(We,"baseUnit",Ge.target.value),placeholder:"Unit"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Te.price,onChange:Ge=>xt(We,"price",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Te.amount.toFixed(2),readOnly:!0})}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>ht(We),disabled:L.length===1,children:a.jsx("i",{className:"fas fa-trash"})})})]},We))})]})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:ve.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:p,onChange:Te=>v(parseFloat(Te.target.value)||0)})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:Ie.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.cgst||"",onChange:Te=>m(We=>({...We,cgst:Te.target.value}))})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.sgst||"",onChange:Te=>m(We=>({...We,sgst:Te.target.value}))})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"form-label",children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.igst||"",onChange:Te=>m(We=>({...We,igst:Te.target.value}))})]}),a.jsx("hr",{}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{className:"form-label",children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:ut.toFixed(2),readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save Invoice"})})]}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ee,onChange:Te=>te(Te.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ee}`,value:V,onChange:Te=>W(Te.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>se(!0),children:"View All"}),(V||ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{W(""),se(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ke.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ke.map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Te.vendorId})}),a.jsx("td",{children:Te.name1}),a.jsx("td",{children:Te.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Te),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},We))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:V?`No vendors found for "${V}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&C&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>N(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Y,onChange:Te=>K(Te.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Y}`,value:X,onChange:Te=>B(Te.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>M(!0),children:"View All"}),(X||ue)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{B(""),M(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Wt.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Wt.map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Te.poNumber})}),a.jsx("td",{children:Te.vendor}),a.jsx("td",{children:Te.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>be(Te),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},We))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:X?`No purchase orders found for "${X}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&oe&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>G(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ce,onChange:Te=>Z(Te.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ce}`,value:ae,onChange:Te=>je(Te.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ie(!0),children:"View All"}),(ae||de)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{je(""),ie(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ge.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ge.map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Te.materialId})}),a.jsx("td",{children:Te.description}),a.jsx("td",{children:Te.baseUnit}),a.jsx("td",{children:Te.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Fe(Te),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},We))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ae?`No materials found for "${ae}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function D5e(){const e=new Date().toISOString().split("T")[0];Gu();const[t,r]=w.useState([]),[n,s]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState({}),[d,u]=w.useState(0),[h,m]=w.useState([]),[p,v]=w.useState(null),[g,b]=w.useState(!1),[y,C]=w.useState(!1),[N,k]=w.useState(null),[S,D]=w.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[E,T]=w.useState(""),[A,L]=w.useState("soNumber"),[P,O]=w.useState(!1),[Q,z]=w.useState([]),[re,U]=w.useState("name1"),[X,B]=w.useState(""),[Y,K]=w.useState(!1),[ue,M]=w.useState(!1),[V,W]=w.useState("materialId"),[ee,te]=w.useState(""),[ne,se]=w.useState(!1),oe=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear"),ce=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:oe,financialYear:G}}).then(Qe=>m(Qe.data)).catch(Qe=>console.error("Error fetching sales orders",Qe)),Oe.get("/api/customers",{params:{companyId:oe,financialYear:G}}).then(Qe=>z(Qe.data)).catch(Qe=>console.error("Error fetching customers",Qe)),Oe.get("/api/material",{params:{companyId:oe,financialYear:G}}).then(Qe=>r(Qe.data)).catch(Qe=>console.error("Error fetching materials:",Qe)),Oe.get("/api/billingcategory",{params:{companyId:oe,financialYear:G}}).then(Qe=>s(Qe.data)).catch(Qe=>console.error("Error fetching categories:",Qe)),Oe.get("/api/tax",{params:{companyId:oe,financialYear:G}}).then(Qe=>o(Qe.data)).catch(Qe=>console.error("Error fetching tax:",Qe))},[]);const Z=Qe=>{v(Qe),D(Ye=>({...Ye,customer:Qe.sales||Qe.customer||Qe.customerName,location:Qe.deliveryLocation||""})),b(!1)},ae=Qe=>{D(Ye=>({...Ye,customer:Qe.name1})),C(!1)},je=Qe=>{if(N!==null&&p?.items){const Ye=[...p.items];Ye[N]&&(Ye[N]={...Ye[N],materialId:Qe.materialId,description:Qe.description,baseUnit:Qe.baseUnit,price:Qe.price,priceUnit:Qe.priceUnit||S.priceUnit},v(Le=>({...Le,items:Ye})))}M(!1)},de=Qe=>{const Ye=Qe.target.value,Le=n.find(ze=>ze.categoryName===Ye);D(ze=>({...ze,category:Ye,catdesc:Le?.description||""}))},ie=(Qe,Ye,Le)=>{const ze=[...p.items];ze[Qe][Ye]=Le,v({...p,items:ze})},be=p?.items?.reduce((Qe,Ye)=>Qe+parseFloat(Ye.quantity||0)*parseFloat(Ye.price||0),0)||0,Ne=parseFloat(d||0),Fe=be-Ne,Xe=parseFloat(l.cgst||0),ct=parseFloat(l.sgst||0),xt=parseFloat(l.igst||0),Re=Xe/100*Fe,ht=ct/100*Fe,At=xt/100*Fe,_t=parseFloat((Fe+Re+ht+At).toFixed(2)),Wt=async Qe=>{if(Qe.preventDefault(),!p)return alert("Please select a Purchase Order.");const Ye={...S,salesOrderId:p._id,items:p.items,receiptDate:e,taxCode:l.taxCode,taxName:l.taxName,companyId:ce,financialYear:G,cgst:Re,sgst:ht,igst:At,totalAmount:be,discount:d,netAmount:Fe,finalTotal:_t,balance:_t};console.log(Ye.finalTotal);try{await Oe.post("/api/billingform",Ye),alert("billing saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",priceUnit:"",balance:""}),v(null),c({}),u(0)}catch(Le){console.error("Error saving biiling:",Le),alert("Failed to save billing")}},Ke=h.filter(Qe=>!P&&!E?!1:(Qe[A]?.toLowerCase()||"").includes(E.toLowerCase())),ge=Q.filter(Qe=>!Y&&!X?!1:(Qe[re]?.toLowerCase()||"").includes(X.toLowerCase())),ve=t.filter(Qe=>!ne&&!ee?!1:(Qe[V]?.toLowerCase()||"").includes(ee.toLowerCase())),xe=()=>{T(""),O(!0)},Ie=()=>{T(""),O(!1)},Ze=()=>{B(""),K(!0)},Ft=()=>{B(""),K(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:Wt,children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row mb-3",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Category :"}),a.jsxs("select",{className:"form-select",value:S.category,onChange:de,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Qe=>a.jsx("option",{value:Qe.categoryName,children:Qe.categoryName},Qe._id))]})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Sales Order :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",placeholder:"Search Sales Order",value:p?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Customer :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search Customer",value:S.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>C(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Code :"}),a.jsxs("select",{className:"form-select",value:l.taxCode||"",onChange:Qe=>{const Ye=i.find(Le=>Le.taxCode===Qe.target.value);c(Ye||{})},children:[a.jsx("option",{value:"",children:"Select"}),i.map(Qe=>a.jsxs("option",{value:Qe.taxCode,children:[Qe.taxCode," - ",Qe.taxName]},Qe._id))]})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Name :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Tax Name",value:l.taxName||"",onChange:Qe=>c(Ye=>({...Ye,taxName:Qe.target.value}))})]})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Document Date :"}),a.jsx("input",{type:"date",className:"form-control",value:S.documentDate,onChange:Qe=>D(Ye=>({...Ye,documentDate:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Posting Date:"}),a.jsx("input",{type:"date",className:"form-control",value:S.postingDate,onChange:Qe=>D(Ye=>({...Ye,postingDate:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Reference :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Reference",value:S.reference,onChange:Qe=>D(Ye=>({...Ye,reference:Qe.target.value}))})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Location :"}),a.jsx("input",{type:"text",placeholder:"Location",className:"form-control",value:S.location,readOnly:!0})]})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Billing Ref :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Billing Reference",value:S.BillingRef,onChange:Qe=>D(Ye=>({...Ye,BillingRef:Qe.target.value}))})]})})]})})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(p?.items?.length?p.items:[{}]).map((Qe,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ye+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Qe.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{k(Ye),M(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Qe.hsnNo||"",onChange:Le=>ie(Ye,"hsnNo",Le.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Qe.quantity||"",onChange:Le=>ie(Ye,"quantity",Le.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Qe.deliveryDate,onChange:Le=>ie(Ye,"deliveryDate",Le.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.lotNo||"",onChange:Le=>ie(Ye,"lotNo",Le.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Qe.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Qe.priceUnit||"",readOnly:!0})})]},Ye))})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:be.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:d,onChange:Qe=>u(parseFloat(Qe.target.value)||0)})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:Fe.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.cgst||"",onChange:Qe=>c(Ye=>({...Ye,cgst:Qe.target.value}))})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.sgst||"",onChange:Qe=>c(Ye=>({...Ye,sgst:Qe.target.value}))})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.igst||"",onChange:Qe=>c(Ye=>({...Ye,igst:Qe.target.value}))})]}),a.jsx("hr",{}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:_t,readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Qe=>L(Qe.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:Qe=>T(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ke.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ke.map((Qe,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Qe.soNumber})}),a.jsx("td",{children:Qe.sales||Qe.customer||Qe.customerName}),a.jsx("td",{children:Qe.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No sales orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:re,onChange:Qe=>U(Qe.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${re}`,value:X,onChange:Qe=>B(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ze,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(X||Y)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ft,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ge.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ge.map((Qe,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Qe.customerId})}),a.jsx("td",{children:Qe.name1}),a.jsx("td",{children:Qe.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:X?`No customers found for "${X}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),ue&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:V,onChange:Qe=>W(Qe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${V}`,value:ee,onChange:Qe=>te(Qe.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>se(!0),children:"View All"}),(ee||ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{te(""),se(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ve.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ve.map((Qe,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Qe.materialId})}),a.jsx("td",{children:Qe.description}),a.jsx("td",{children:Qe.baseUnit}),a.jsx("td",{children:Qe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>je(Qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ee?`No materials found for "${ee}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const jE=10,A5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(""),[c,d]=w.useState(1),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),w.useEffect(()=>{m()},[]);const m=async()=>{try{const N=await Oe.get("/api/billingform",{params:{companyId:u,financialYear:h}});t(N.data),i(null)}catch(N){i("Failed to fetch billing data"),console.error(N)}finally{n(!1)}},p=N=>{l(N.target.value),d(1)},v=w.useMemo(()=>o?e.filter(N=>[N.docnumber,N.customer,N.reference,N.BillingRef,N.location].join(" ").toLowerCase().includes(o.toLowerCase())):e,[o,e]),g=Math.ceil(v.length/jE),b=w.useMemo(()=>{const N=(c-1)*jE;return v.slice(N,N+jE)},[v,c]),y=N=>{N<1||N>g||d(N)},C=N=>{const k=`
    <html>
      <head>
        <title>Billing - ${N.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Billing Document</h2>
        <p><strong>Document No:</strong> ${N.docnumber}</p>
        <p><strong>Customer:</strong> ${N.customer}</p>
        <p><strong>Location:</strong> ${N.location}</p>
        <p><strong>Reference:</strong> ${N.reference}</p>
        <p><strong>Invoice Ref:</strong> ${N.BillingRef}</p>
        <p><strong>Date:</strong> ${new Date(N.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${N.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>${parseFloat(D.price).toFixed(2)}</td>
                <td>${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ${N.totalAmount.toFixed(2)}</p>
          <p>Discount: ${N.discount.toFixed(2)}</p>
          <p>Net Amount: ${N.netAmount.toFixed(2)}</p>
          <p>CGST (%): ${N.cgst}%</p>
          <p>SGST (%): ${N.sgst}%</p>
          <p>IGST (%): ${N.igst}%</p>
          <p><strong>Final Total: ${N.finalTotal.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsx("div",{className:"alert alert-danger",children:s}):a.jsxs("div",{className:"content mt-4",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:o,onChange:p,placeholder:"Search billing...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Ref"}),a.jsx("th",{children:"BillingRef"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.docnumber}),a.jsx("td",{children:N.customer}),a.jsx("td",{children:N.location}),a.jsx("td",{children:N.reference}),a.jsx("td",{children:N.BillingRef}),a.jsx("td",{children:new Date(N.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["",N.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(N),className:"btn btn-sm btn-primary",children:"Print"})})]},N._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c-1),children:""})}),Array.from({length:g},(N,k)=>a.jsx("li",{className:`page-item ${c===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${c===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c+1),children:""})})]})})]})},$8={productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",taxRate:""};function T5e(){const[e,t]=w.useState("Outward"),[r,n]=w.useState({type:"",number:"",date:""}),[s,i]=w.useState({name:"",gstin:"",address:"",state:""}),[o,l]=w.useState({name:"",gstin:"",address:"",state:""}),[c,d]=w.useState([{...$8}]),[u,h]=w.useState({mode:"",transporterId:"",vehicleNo:"",distance:""}),[m,p]=w.useState(!1),[v,g]=w.useState([]);w.useEffect(()=>{const S=JSON.parse(localStorage.getItem("invoices"))||[];g(S)},[]);const b=(S,D,E)=>{const T=[...c];T[S][D]=E,d(T)},y=()=>d([...c,{...$8}]),C=S=>d(c.filter((D,E)=>E!==S)),N=S=>{S.preventDefault(),console.log("e-Way Bill Data:",{transactionType:e,document:r,consignor:s,consignee:o,items:c,transport:u}),alert("e-Way Bill data logged to console.")},k=S=>{n({type:S.category,number:S.docnumber,date:S.docdate}),i({name:"Your Company",gstin:"",address:"",state:""}),l({name:S.customer,gstin:"",address:S.location,state:""});const D=S.items.map(E=>({productName:E.matdesc,hsnCode:"",quantity:E.matqty,unit:E.unit,taxableValue:E.price*E.matqty,taxRate:18}));d(D),p(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("h3",{className:"mb-4",children:"e-Way Bill Entry"}),a.jsx("button",{className:"btn btn-outline-primary mb-3",onClick:()=>p(!0),children:"Search Billing"}),a.jsxs("form",{onSubmit:N,children:[a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Transaction Type"}),a.jsxs("div",{className:"col-sm-9 d-flex align-items-center",children:[a.jsxs("div",{className:"form-check me-3",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"outward",checked:e==="Outward",onChange:()=>t("Outward")}),a.jsx("label",{className:"form-check-label",htmlFor:"outward",children:"Outward"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"inward",checked:e==="Inward",onChange:()=>t("Inward")}),a.jsx("label",{className:"form-check-label",htmlFor:"inward",children:"Inward"})]})]})]}),a.jsx("h5",{children:"Document Details"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentType",className:"col-sm-3 col-form-label",children:"Document Type"}),a.jsx("input",{type:"text",className:"form-control",id:"documentType",placeholder:"Invoice, Bill of Supply, etc.",value:r.type,onChange:S=>n({...r,type:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentNumber",className:"col-sm-3 col-form-label",children:"Document Number"}),a.jsx("input",{type:"text",className:"form-control",id:"documentNumber",value:r.number,onChange:S=>n({...r,number:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentDate",className:"col-sm-3 col-form-label",children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",id:"documentDate",value:r.date,onChange:S=>n({...r,date:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignor (From)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorName",value:s.name,onChange:S=>i({...s,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:s.gstin,onChange:S=>i({...s,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorAddress",value:s.address,onChange:S=>i({...s,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consignorState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorState",placeholder:"State name or code",value:s.state,onChange:S=>i({...s,state:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignee (To)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeName",value:o.name,onChange:S=>l({...o,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:o.gstin,onChange:S=>l({...o,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeAddress",value:o.address,onChange:S=>l({...o,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consigneeState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeState",placeholder:"State name or code",value:o.state,onChange:S=>l({...o,state:S.target.value}),required:!0})]})]})]}),a.jsx("h5",{children:"Item Details"}),a.jsxs("table",{className:"table table-bordered table-hover table-sm mb-3",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Product Name"}),a.jsx("th",{children:"HSN Code"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Taxable Value"}),a.jsx("th",{children:"Tax Rate (%)"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.productName,onChange:E=>b(D,"productName",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.hsnCode,onChange:E=>b(D,"hsnCode",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.quantity,onChange:E=>b(D,"quantity",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.unit,onChange:E=>b(D,"unit",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.taxableValue,onChange:E=>b(D,"taxableValue",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",max:"100",className:"form-control",value:S.taxRate,onChange:E=>b(D,"taxRate",E.target.value),required:!0})}),a.jsx("td",{children:c.length>1&&a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>C(D),children:"Remove"})})]},D))})]}),a.jsx("button",{type:"button",className:"btn btn-secondary mb-4",onClick:y,children:"Add Item"}),a.jsx("h5",{children:"Transport Details"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transportMode",className:"col-sm-3 col-form-label",children:"Mode of Transport"}),a.jsx("div",{className:"col-sm-9",children:a.jsxs("select",{id:"transportMode",className:"form-select",value:u.mode,onChange:S=>h({...u,mode:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select mode"}),a.jsx("option",{value:"Road",children:"Road"}),a.jsx("option",{value:"Rail",children:"Rail"}),a.jsx("option",{value:"Air",children:"Air"}),a.jsx("option",{value:"Ship",children:"Ship"})]})})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transporterId",className:"col-sm-3 col-form-label",children:"Transporter ID / Vehicle No."}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"text",id:"transporterId",className:"form-control",placeholder:"Transporter ID or Vehicle Number",value:u.transporterId,onChange:S=>h({...u,transporterId:S.target.value}),required:!0})})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"distance",className:"col-sm-3 col-form-label",children:"Distance (km)"}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"number",min:"0",id:"distance",className:"form-control",value:u.distance,onChange:S=>h({...u,distance:S.target.value}),required:!0})})]}),a.jsx("button",{type:"submit",className:"btn btn-primary mt-4",children:"Generate e-Way Bill"})]}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Select Billing Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:v.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>k(S),children:"Select"})})]},D))})]})})]})})})]})]})}const I5e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState(!1),[m,p]=w.useState(""),[v,g]=w.useState({}),[b,y]=w.useState(""),[C,N]=w.useState([]),[k,S]=w.useState(1),[D]=w.useState(5),[E,T]=w.useState(!1),[A,L]=w.useState(!1);w.useEffect(()=>{if(e.length>0){const be=e.filter(Ne=>Ne.roleId.toLowerCase().includes(b.toLowerCase())||Ne.roleName.toLowerCase().includes(b.toLowerCase()));N(be),S(1)}},[b,e]);const P={Dashboard:["Dashboard"],"Master Data":["Material Master","Customer Master","Vendor Master","Customer Price List","Vendor Price List","Tax List","Location Master","Process List Master","General Condition Master"],MRP:["MRP"],Category:["Material Category","Customer Category","Vendor Category","Purchase Indent Category","Sales Indent Category","PO Category","Sales RFQ Category","Sales Order Category","Goods Receipt Category","Goods Issue Category","Purchase Contract Category","Billing Category","Invoice Category","Purchase Quotation Category","Sale Contract Category","Transfer Category"],Purchase:["Purchase Indent","Purchase Quotation","Purchase Contract","Purchase Order","Purchase Indent List","Purchase Quotations List","Purchase Contract List","Purchase Order List"],Sales:["Sales Indent","Sales Quotation Form","Sales Contract","Sales Order","Sales Indent List","Sales Quotations List","Sales Contract List","Sales Order List"],Inventory:["Material Receipt","Material Receipt List","Material Issue","Material Transfer","Material Issue List","Stock List"],Invoice:["Invoice Form","Invoice List"],Billing:["Billing Form","Billing List"],Accounts:["GST","Ledger","Payments"],CRM:["Contacts List","Leads","Proposals","Sources","Lost Reason","Contact Stage","Industry","Calls"],"Project Management":["Projects","Tasks","Milestones","Time Entries"],Campaigns:["Campaigns","Analytics"],HRMS:["Designation","Department","Employee","LeaveRequests","LeaveRequestManagement","Payroll","AttendanceRegister","AttendanceReports","AttendanceTaking"]},O=Object.keys(P);w.useEffect(()=>{Q(),z()},[]);const Q=async()=>{try{const be=await Oe.get("/api/roles");t(be.data)}catch(be){console.error("Error fetching roles:",be)}},z=async()=>{try{const be=await Oe.get("/api/roles/next-id");p(be.data.nextId),c||n(be.data.nextId)}catch(be){console.error("Error fetching next role ID:",be),p("R-XX")}},re=()=>{const be={};return/^[A-Za-z\s]+$/.test(s)||(be.roleName="Role name should contain only alphabets and spaces"),o.length===0&&(be.permissions="At least one permission is required"),g(be),Object.keys(be).length===0},U=async be=>{if(be.preventDefault(),!re())return;if(E){g({...v,roleName:"Role name already exists"}),alert("Role name already exists so choose another name");return}const Ne={roleId:r,roleName:s,permissions:o};try{c?(await Oe.put(`/api/roles/${c}`,Ne),alert("Role updated successfully!")):(await Oe.post("/api/roles",Ne),alert("Role created successfully!")),Q(),te(),se()}catch(Fe){console.error("Error saving role:",Fe)}},X=be=>{d(be._id),n(be.roleId),i(be.roleName),l(be.permissions||[]),ne()},B=be=>["SuperAdmin","Telecaller","Faculty","Student"].includes(be),Y=async(be,Ne)=>{if(B(Ne)){alert(`The role "${Ne}" is a system role and cannot be deleted.`);return}if(window.confirm(`Are you sure you want to delete the role "${Ne}"?`))try{await Oe.delete(`/api/roles/${be}`),Q()}catch(Fe){console.error("Error deleting role:",Fe)}},K=k*D,ue=K-D,M=C.slice(ue,K),V=Math.ceil(C.length/D),W=be=>S(be),ee=be=>{y(be.target.value)},te=()=>{g({}),c?n(""):z(),i(""),l([]),d(null),T(!1)},ne=()=>{c||z(),L(!0)},se=()=>{h(!1),L(!1),te()},oe=be=>{const Ne=[...o],Fe=P[be]||[];if(Ne.includes(be)){const Xe=Ne.filter(ct=>ct!==be&&!Fe.includes(ct));l(Xe)}else Ne.includes(be)||Ne.push(be),Fe.forEach(Xe=>{Ne.includes(Xe)||Ne.push(Xe)}),l(Ne);Ne.length>0&&v.permissions&&g({...v,permissions:null})},G=(be,Ne)=>{const Fe=[...o];if(Fe.includes(Ne)){const Xe=Fe.indexOf(Ne);if(Xe>-1&&Fe.splice(Xe,1),!(P[be]||[]).some(Re=>Fe.includes(Re))&&Fe.includes(be)){const Re=Fe.indexOf(be);Re>-1&&Fe.splice(Re,1)}}else Fe.includes(be)||Fe.push(be),Fe.push(Ne);l(Fe),Fe.length>0&&v.permissions&&g({...v,permissions:null})},ce=be=>{if(P[be]){const Ne=P[be]||[],Fe=o.filter(Xe=>Xe!==be&&!Ne.includes(Xe));l(Fe)}else{const Ne=o.filter(Fe=>Fe!==be);for(const[Fe,Xe]of Object.entries(P))if(Xe.includes(be)){if(!Xe.some(xt=>xt!==be&&Ne.includes(xt))&&Ne.includes(Fe)){const xt=Ne.indexOf(Fe);xt>-1&&Ne.splice(xt,1)}break}l(Ne)}o.length===0&&g({...v,permissions:"At least one permission is required"})},Z=be=>o.includes(be),ae=be=>(P[be]||[]).every(Fe=>o.includes(Fe)),je=be=>{if(!be||be.length===0)return"None";const Ne={};return be.forEach(Fe=>{P[Fe]&&(Ne[Fe]||(Ne[Fe]=[]))}),be.forEach(Fe=>{if(!P[Fe]){for(const[Xe,ct]of Object.entries(P))if(ct.includes(Fe)){Ne[Xe]||(Ne[Xe]=[]),Ne[Xe].push(Fe);break}}}),Object.entries(Ne).map(([Fe,Xe])=>a.jsxs("div",{className:"permission-group mb-1",children:[a.jsx("span",{className:"fw-bold",children:Fe}),Xe.length>0&&a.jsx("div",{className:"sub-permissions ms-2 small",children:Xe.join(", ")})]},Fe))},de=async be=>{if(!be){T(!1);return}try{if(c){const Fe=e.find(Xe=>Xe._id===c);if(Fe&&Fe.roleName===be){T(!1);return}}const Ne=await Oe.get(`/api/roles/check-name?name=${encodeURIComponent(be)}`);if(T(Ne.data.exists),Ne.data.exists)g({...v,roleName:"Role name already exists"});else{const Fe={...v};Fe.roleName==="Role name already exists"&&(delete Fe.roleName,g(Fe))}}catch(Ne){console.error("Error checking role name:",Ne)}},ie=be=>{const Ne=be.target.value;if(i(Ne),!/^[A-Za-z\s]*$/.test(Ne))g({...v,roleName:"Role name should contain only alphabets and spaces"});else{const Fe={...v};delete Fe.roleName,g(Fe),Ne.trim()&&de(Ne)}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"",children:a.jsx("div",{className:"page-wrapper cardhead",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("h4",{children:"Access Control"})}),a.jsx("div",{className:"col-xl-5 float-end ms-auto",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"head-icons",children:[a.jsx("a",{href:"/AccessControl","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Refresh",children:a.jsx("i",{className:"ti ti-refresh-dot"})}),a.jsx("a",{href:"javascript:void(0);","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Collapse",id:"collapse-header",children:a.jsx("i",{className:"ti ti-chevrons-up"})})]})})})})]})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"input-group",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Role ID or Role Name",value:b,onChange:ee})})}),a.jsx("div",{className:"col-md-3"}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"head-icons",children:a.jsx("button",{className:"btn btn-primary mt-2",type:"button",onClick:()=>{te(),ne()},children:"Add Role"})})})})})]})}),a.jsx("div",{className:"table-responsive mt-3",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"15%"},children:"Role ID"}),a.jsx("th",{style:{width:"15%"},children:"Role Name"}),a.jsx("th",{style:{width:"40%"},children:"Permissions"}),a.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),a.jsx("tbody",{children:M.length>0?M.map(be=>a.jsxs("tr",{children:[a.jsx("td",{children:be.roleId}),a.jsx("td",{children:be.roleName}),a.jsx("td",{style:{width:"100%"},children:a.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",fontSize:"0.85rem",textWrap:"wrap"},children:je(be.permissions)})}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{onClick:()=>X(be),className:"btn btn-icon btn-sm btn-soft-info rounded-pill",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>Y(be._id,be.roleName),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",disabled:B(be.roleName),style:{opacity:B(be.roleName)?"0.5":"1",cursor:B(be.roleName)?"not-allowed":"pointer"},children:a.jsx("i",{className:"feather-trash"})})]})})]},be._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center",children:"No roles found."})})})]})}),C.length>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",style:{gap:"0px"},children:[a.jsx("li",{className:`page-item ${k===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>W(k-1),disabled:k===1,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})}),a.jsx("li",{className:`page-item ${k===V?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>W(k+1),disabled:k===V,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})})]})})})]})})})}),A&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:c?"Edit Role":"Add New Role"}),a.jsx("button",{type:"button",className:"btn-close",onClick:se})]}),a.jsx("div",{className:"modal-body p-4",children:a.jsxs("form",{onSubmit:U,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role ID"}),a.jsx("input",{type:"text",className:"form-control",value:c?r:m,disabled:!0}),a.jsx("small",{className:"text-muted",children:"Role ID is automatically generated"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role Name"}),a.jsx("input",{type:"text",className:`form-control ${v.roleName||E?"is-invalid":""}`,value:s,onChange:ie,disabled:!!c,placeholder:"Enter role name",required:!0}),v.roleName&&a.jsx("div",{className:"invalid-feedback",children:v.roleName}),!v.roleName&&E&&a.jsx("div",{className:"invalid-feedback",children:"Role name already exists"}),!v.roleName&&!E&&s.trim()&&a.jsx("div",{className:"text-success small mt-1",children:"Role name is available"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Permissions"}),a.jsx("div",{className:`permissions-container p-3 border rounded ${v.permissions?"border-danger":""}`,style:{maxHeight:"400px",overflowY:"auto"},children:O.map(be=>a.jsxs("div",{className:"permission-item mb-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`perm-${be}`,checked:o.includes(be),onChange:()=>oe(be)}),a.jsx("label",{className:"form-check-label fw-bold",htmlFor:`perm-${be}`,children:be}),o.includes(be)&&a.jsx("span",{className:"ms-2 small",children:ae(be)?"(All selected)":"(Some selected)"})]}),P[be]?.length>0&&a.jsx("div",{className:"sub-permissions ms-4 mt-2",children:P[be].map(Ne=>a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`subperm-${Ne}`,checked:Z(Ne),onChange:()=>G(be,Ne)}),a.jsx("label",{className:"form-check-label",htmlFor:`subperm-${Ne}`,children:Ne})]},Ne))})]},be))}),v.permissions&&a.jsx("div",{className:"text-danger small mt-1",children:v.permissions}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Selected Permissions:"}),a.jsx("div",{className:"selected-permissions mt-2",children:o.length>0?o.map(be=>a.jsxs("span",{className:"badge bg-soft-primary mb-1 m-1",children:[be," ",a.jsx("button",{type:"button",className:"btn-close btn-close-primary rounded-pill",onClick:()=>ce(be)})]},be)):a.jsx("span",{className:"text-muted",children:"No permissions selected"})})]})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Role"})]})})]})})})]})})})})};function P5e(){const[e,t]=w.useState(null),[r,n]=w.useState(0),[s,i]=w.useState(0),[o,l]=w.useState("input"),[c,d]=w.useState(0),[u,h]=w.useState(0),[m,p]=w.useState([]),[v,g]=w.useState([]),[b,y]=w.useState([]),[C,N]=w.useState(!0),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(null),[O,Q]=w.useState([]),[z,re]=w.useState([]),[U,X]=w.useState([]),B=localStorage.getItem("selectedCompanyId"),Y=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId");const K=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"];w.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:B,financialYear:Y}}).then(W=>g(W.data)).catch(W=>console.error("Error fetching locations",W)),Oe.get("/api/billingform",{params:{companyId:B,financialYear:Y}}).then(W=>E(W.data)).catch(W=>console.error("Error fetching customer invoices",W)),y(K)},[]),w.useEffect(()=>{if(!Y){X([]);return}const[W,ee]=Y.split(" - ");if(!W||!ee){X(K.map(de=>({key:de,label:de})));return}const[te,ne,se]=W.split("/"),[oe,G,ce]=ee.split("/"),Z=Number(se),ae=Number(ce);let je=[];for(let de=0;de<K.length;de++){let ie="";de<9?ie=`${K[de]} ${Z}`:ie=`${K[de]} ${ae}`,je.push({key:`${K[de]}-${de<9?Z:ae}`,month:K[de],year:de<9?Z:ae,label:ie})}X(je)},[Y]);const ue=W=>{if(!Y)return!0;const[ee,te]=Y.split(" - ");if(!ee||!te)return!0;const[ne,se,oe]=ee.split("/"),[G,ce,Z]=te.split("/"),ae=new Date(`${oe}-${se}-${ne}T00:00:00`),je=new Date(`${Z}-${ce}-${G}T23:59:59`),de=new Date(W);return de>=ae&&de<=je};w.useEffect(()=>{const W=()=>{const ee={};U.forEach(ne=>{ee[ne.label]={month:ne.label,input:0,output:0,balance:0}}),k.forEach(ne=>{if(!ue(ne.createdAt))return;const se=new Date(ne.createdAt),oe=se.toLocaleString("en-US",{month:"short"}),G=(se.getMonth()<3,se.getFullYear()),ce=U.find(ae=>ae.month===oe&&ae.year===G)?.label,Z=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);ce&&ee[ce]&&(ee[ce].input+=Z)}),D.forEach(ne=>{if(!ue(ne.createdAt))return;const se=new Date(ne.createdAt),oe=se.toLocaleString("en-US",{month:"short"}),G=(se.getMonth()<3,se.getFullYear()),ce=U.find(ae=>ae.month===oe&&ae.year===G)?.label,Z=(ne.cgst||0)+(ne.sgst||0)+(ne.igst||0);ce&&ee[ce]&&(ee[ce].output+=Z)});const te=Object.values(ee).map(ne=>({...ne,balance:ne.output-ne.input}));p(te)};(k.length||D.length)&&W()},[k,D,Y,b,U]),w.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/invoiceform",{params:{companyId:B,financialYear:Y}}),te=ee.data.filter(oe=>{if(!ue(oe.createdAt))return!1;const G=!L||oe.location===L,ce=new Date(oe.createdAt),Z=ce.toLocaleString("en-US",{month:"short"}),ae=(ce.getMonth()<3,ce.getFullYear()),je=!T||`${Z} ${ae}`===T;return G&&je}),ne=te?.sort((oe,G)=>new Date(G.createdAt)-new Date(oe.createdAt)),se=te.reduce((oe,G)=>oe+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);n(se),d(se),S(ee.data),Q(ne),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{N(!1)}})()},[T,L,Y,U]),w.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/billingform",{params:{companyId:B,financialYear:Y}}),te=ee.data.filter(oe=>{if(!ue(oe.createdAt))return!1;const G=!L||oe.location===L,ce=new Date(oe.createdAt),Z=ce.toLocaleString("en-US",{month:"short"}),ae=(ce.getMonth()<3,ce.getFullYear()),je=!T||`${Z} ${ae}`===T;return G&&je}),ne=te.reduce((oe,G)=>oe+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);i(ne);const se=te?.sort((oe,G)=>new Date(G.createdAt)-new Date(oe.createdAt));E(ee.data),re(se),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{N(!1)}})()},[T,L,Y,U]);const M=s-r,V=M>0?"You need to pay GST":M<0?"You will get a GST refund":"No GST to pay or refund";return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"GST List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"GST List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-xl-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:"Month"}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{name:"month",className:"form-select",id:"month-select",onChange:W=>A(W.target.value),children:[a.jsx("option",{value:"",children:"Select Month"}),U.map((W,ee)=>a.jsx("option",{value:W.label,children:W.label},ee))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:"Location"}),a.jsx("div",{className:"col-xl-8",children:a.jsxs("select",{name:"location",className:"form-select",id:"location-select",onChange:W=>P(W.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),v.map((W,ee)=>a.jsx("option",{value:W.name,children:W.name},ee))]})})]}),a.jsxs("div",{className:"col-xl-3 ms-auto ",children:[o==="input"&&a.jsxs("h5",{style:{color:"blue"},children:["Total Input GST: ",r.toFixed(2)]}),o==="output"&&a.jsxs("h5",{style:{color:"orange"},children:["Total Output GST: ",s.toFixed(2)]}),o==="gstr"&&a.jsxs("h5",{style:{color:M>0?"red":M<0?"green":"black"},children:[V,"  ",Math.abs(M).toFixed(2)]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("ul",{className:"nav nav-tabs tab-style-6",id:"myTab-3",role:"tablist",children:[a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="input"?"active":""}`,id:"products-tab","data-bs-toggle":"tab","data-bs-target":"#products-tab-pane",type:"button",role:"tab","aria-controls":"products-tab-pane","aria-selected":o==="input",onClick:()=>l("input"),children:[a.jsx("i",{className:"feather-gift me-1 align-middle d-inline-block"}),"Input Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="output"?"active":""}`,id:"sales-tab","data-bs-toggle":"tab","data-bs-target":"#sales-tab-pane",type:"button",role:"tab","aria-controls":"sales-tab-pane","aria-selected":o==="output",onClick:()=>l("output"),children:[a.jsx("i",{className:"feather-file me-1 align-middle d-inline-block"}),"Output Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="gstr"?"active":""}`,id:"profit-tab","data-bs-toggle":"tab","data-bs-target":"#profit-tab-pane",type:"button",role:"tab","aria-controls":"profit-tab-pane","aria-selected":o==="gstr",onClick:()=>l("gstr"),children:[a.jsx("i",{className:"feather-file-text me-1 align-middle d-inline-block"}),"GSTR"]})})]}),a.jsxs("div",{className:"tab-content",id:"myTabContent2",children:[a.jsx("div",{className:`tab-pane fade ${o==="input"?"show active":""} p-0 border-bottom-0`,id:"products-tab-pane",role:"tabpanel","aria-labelledby":"products-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:O.map((W,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:W.docnumber}),a.jsx("td",{children:new Date(W.createdAt).toLocaleDateString()}),a.jsx("td",{children:W.finalTotal}),a.jsx("td",{children:W.cgst}),a.jsx("td",{children:W.sgst}),a.jsx("td",{children:W.igst}),a.jsx("td",{children:(W.cgst||0)+(W.sgst||0)+(W.igst||0)})]},ee))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="output"?"show active":""}`,id:"sales-tab-pane",role:"tabpanel","aria-labelledby":"sales-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:z.map((W,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:W.docnumber}),a.jsx("td",{children:new Date(W.createdAt).toLocaleDateString()}),a.jsx("td",{children:W.finalTotal}),a.jsx("td",{children:W.cgst}),a.jsx("td",{children:W.sgst}),a.jsx("td",{children:W.igst}),a.jsx("td",{children:((W.cgst||0)+(W.sgst||0)+(W.igst||0)).toFixed(2)})]},ee))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="gstr"?"show active":""}`,id:"profit-tab-pane",role:"tabpanel","aria-labelledby":"profit-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Month"}),a.jsx("th",{scope:"col",children:"Input"}),a.jsx("th",{scope:"col",children:"Output"}),a.jsx("th",{scope:"col",children:"Balance"})]})}),a.jsx("tbody",{children:m.map((W,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:W.month}),a.jsx("td",{children:W.input.toFixed(2)}),a.jsx("td",{children:W.output.toFixed(2)}),a.jsx("td",{children:W.balance.toFixed(2)})]},ee))})]})})})]})]})]})})})]})}const NE=10;function O5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(null),[c,d]=w.useState([]),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState([]),[C,N]=w.useState([]),[k,S]=w.useState(""),[D,E]=w.useState(1),[T,A]=w.useState(null),L=async()=>{try{const ce=(await Oe.get("/api/purchase-contract-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(Z=>({label:`${Z.categoryName} (${Z.prefix})`,value:Z._id}));h(ce)}catch(G){console.error("Failed to fetch categories:",G)}},P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear"),Q=async()=>{try{const Z=(await Oe.get("/api/vendors",{params:{companyId:P,financialYear:O}})).data.filter(ae=>!ae.isDeleted&&!ae.isBlocked).map(ae=>({label:`${ae.name1} ${ae.name2||""}`,value:ae.vendorName,vnNo:ae.vnNo||""}));d(Z),y(Z)}catch(G){console.error("Failed to fetch vendors:",G)}},z=async()=>{try{const G=await Oe.get("/api/locations",{params:{companyId:P,financialYear:O}});Array.isArray(G.data)?N(G.data):G.data&&Array.isArray(G.data.locations)?N(G.data.locations):N([])}catch(G){console.error("Failed to fetch locations:",G),N([])}},re=async()=>{try{n(!0);const G=localStorage.getItem("selectedCompanyId"),ce=localStorage.getItem("financialYear"),ae=(await Oe.get("/api/contracts/get",{params:{companyId:G,financialYear:ce}})).data.sort((je,de)=>new Date(de.createdAt)-new Date(je.createdAt));t(ae),i(null)}catch(G){console.error("Failed to fetch contracts:",G),i("Failed to load contracts. Please try again.")}finally{n(!1)}};w.useEffect(()=>{re(),Q(),L(),z()},[]);const U=async G=>{try{const Z=(await Oe.get(`/api/contracts/${G}`)).data;l({...Z,validityFDate:Z.validityFDate?new Date(Z.validityFDate).toISOString().split("T")[0]:"",validityTDate:Z.validityTDate?new Date(Z.validityTDate).toISOString().split("T")[0]:"",items:Z.items.map(ae=>({...ae}))})}catch(ce){console.error("Failed to fetch contract details:",ce),alert("Failed to load contract details")}},X=async()=>{try{const G=o.items.reduce((Z,ae)=>Z+(parseFloat(ae.price)*parseFloat(ae.qty)||0),0),ce={...o,totalPrice:G};await Oe.put(`/api/contracts/${o._id}`,ce),alert("Contract updated successfully!"),l(null),re()}catch(G){console.error("Failed to update contract:",G),alert("Failed to update contract")}},B=()=>{l(null)},Y=(G,ce)=>{l(Z=>({...Z,[G]:ce}))},K=(G,ce,Z)=>{const ae=[...o.items];ae[G][ce]=Z,l(je=>({...je,items:ae}))},ue=async G=>{try{const ce=await Oe.get(`/api/contracts/${G}`);A(ce.data)}catch(ce){console.error("Failed to fetch contract details:",ce),alert("Failed to load contract details")}},M=G=>{const ce=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Contract - ${G.contractNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PURCHASE CONTRACT</h1>
          <h3>Contract Number: ${G.contractNumber}</h3>
        </div>
        
        <div class="info-grid">
          <div>
            <div class="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div class="info-item"><strong>Location:</strong> ${G.location||"-"}</div>
            <div class="info-item"><strong>Purchase Group:</strong> ${G.buyerGroup||"-"}</div>
          </div>
          <div>
            <div class="info-item"><strong>Valid From:</strong> ${G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Valid To:</strong> ${G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Created:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div class="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((ae,je)=>`
              <tr>
                <td>${je+1}</td>
                <td>${ae.materialId}</td>
                <td>${ae.description}</td>
                <td>${ae.qty}</td>
                <td>${ae.unit||ae.baseUnit}</td>
                <td>${ae.price?parseFloat(ae.price).toFixed(2):"0.00"}</td>
                <td>${ae.price&&ae.qty?(parseFloat(ae.price)*parseFloat(ae.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>${G.items.reduce((ae,je)=>{const de=je.price&&je.qty?parseFloat(je.price)*parseFloat(je.qty):0;return ae+de},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div class="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,Z=window.open("","_blank");Z.document.write(ce),Z.document.close(),Z.focus(),Z.print()},V=w.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(ce=>{const Z=new Date(ce.createdAt),ae=m?new Date(m):null,je=v?new Date(v):null;return ae&&je?Z>=ae&&Z<=je:ae?Z>=ae:je?Z<=je:!0})),k&&(G=G.filter(ce=>[ce.contractNumber,ce.vendorName,ce.note,ce.location,ce.buyerGroup].join(" ").toLowerCase().includes(k.toLowerCase())),G=G.sort((ce,Z)=>{const ae=contract.items?.reduce((de,ie)=>{const be=ie.price&&ie.qty?parseFloat(ie.price)*parseFloat(ie.qty):0;return de+be},0)||0,je=contract.items?.reduce((de,ie)=>{const be=ie.price&&ie.qty?parseFloat(ie.price)*parseFloat(ie.qty):0;return de+be},0)||0;return ae-je})),G},[k,e,m,v]),W=()=>{S(""),p(""),g(""),E(1)},ee=(G,ce)=>{if(!ce)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},te=Math.ceil(V.length/NE),ne=w.useMemo(()=>{const G=(D-1)*NE;return V.slice(G,G+NE)},[V,D]),se=G=>{S(G.target.value),E(1)},oe=G=>{G<1||G>te||E(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px"},children:[a.jsx("h2",{children:"Purchase Contracts"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:re,style:{padding:"10px 20px"},children:"Retry"})]}):T?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Purchase Contract Preview - ",T.contractNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>A(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Contract Number"}),a.jsx("div",{className:"fw-bold",children:T.contractNumber})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:T.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:T.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Purchase Group"}),a.jsx("div",{className:"fw-bold",children:T.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid From"}),a.jsx("div",{className:"fw-bold",children:T.validityFDate?new Date(T.validityFDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid To"}),a.jsx("div",{className:"fw-bold",children:T.validityTDate?new Date(T.validityTDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Financial Year"}),a.jsx("div",{className:"fw-bold",children:T.financialYear||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(T.createdAt).toLocaleDateString()})]})})})]}),T.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",T.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:T.items.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsxs("td",{children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},ce))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"6",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",T.items.reduce((G,ce)=>{const Z=ce.price&&ce.qty?parseFloat(ce.price)*parseFloat(ce.qty):0;return G+Z},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Purchase Contract - ",o.contractNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:X,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:B,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Contract Number"}),a.jsx("input",{type:"text",className:"form-control",value:o.contractNumber||"",onChange:G=>Y("contractNumber",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsx(G2,{options:u,value:u.find(G=>G.value===o.categoryId),onChange:G=>Y("categoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(G2,{options:b,value:b.find(G=>G.value===o.vendorName),onChange:G=>{Y("vendorId",G?.value),Y("vendorName",G?.label)},placeholder:"Select Vendor"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid From Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityFDate||"",onChange:G=>Y("validityFDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid To Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityTDate||"",onChange:G=>Y("validityTDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>Y("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),C.map((G,ce)=>a.jsx("option",{value:G.name||G,children:G.name||G},ce))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Purchase Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>Y("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>Y("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:Z=>K(ce,"materialId",Z.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:Z=>K(ce,"description",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:Z=>K(ce,"qty",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:Z=>K(ce,"baseUnit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:Z=>K(ce,"orderUnit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:Z=>K(ce,"unit",Z.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:Z=>K(ce,"price",Z.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},ce))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"8",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["",o.items.reduce((G,ce)=>{const Z=ce.price&&ce.qty?parseFloat(ce.price)*parseFloat(ce.qty):0;return G+Z},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Purchase Contracts"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Contract Number, Vendor, etc...",value:k,onChange:se,className:"form-control",style:{width:300,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:W,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:re,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Valid From"}),a.jsx("th",{children:"Valid To"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Total Price"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.map((G,ce)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce+1}),a.jsx("td",{className:"text-wrap",children:G.contractNumber}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location||"-"}),a.jsx("td",{children:G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}),a.jsx("td",{children:G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsxs("td",{style:{backgroundColor:ee(ce,!!k)},children:["",G.items?.reduce((Z,ae)=>{const je=ae.price&&ae.qty?parseFloat(ae.price)*parseFloat(ae.qty):0;return Z+je},0).toFixed(2)||"0.00"]}),a.jsx("td",{children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>ue(G._id),className:"btn btn-sm",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>U(G._id),className:"btn btn-sm",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>M(G),className:"btn btn-sm",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||ce))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end ms-auto",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${D===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(D-1),disabled:D===1,children:a.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const G=[];let ce=[1,2],Z=[te-1,te].filter(de=>de>2),ae=[];D<=4?(ce=[1,2,3,4,5].filter(de=>de<=te),Z=[te-1,te].filter(de=>de>5)):D>=te-3?(ce=[1,2].filter(de=>de<te-4),Z=[te-4,te-3,te-2,te-1,te].filter(de=>de>2&&de<=te)):(ce=[1,2],ae=[D-1,D,D+1],Z=[te-1,te]);const je=de=>de.map(ie=>a.jsx("li",{className:`page-item${D===ie?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(ie),children:ie})},ie));return G.push(...je(ce)),(ae.length>0&&ae[0]>ce[ce.length-1]+1||ae.length===0&&Z[0]>ce[ce.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"start-ellipsis")),G.push(...je(ae)),Z.length>0&&(ae.length>0&&Z[0]>ae[ae.length-1]+1||ae.length===0&&Z[0]>ce[ce.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:""})},"end-ellipsis")),G.push(...je(Z)),G})(),a.jsx("li",{className:`page-item${D===te?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>oe(D+1),disabled:D===te,children:a.jsx("i",{className:"bi bi-chevron-double-right"})})})]})})})]})}function M5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]);Gu();const[c,d]=w.useState(""),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState([]),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,Q]=w.useState(""),[z,re]=w.useState(""),[U,X]=w.useState(!1),[B,Y]=w.useState(null),[K,ue]=w.useState(0),[M,V]=w.useState(!1),[W,ee]=w.useState(!1),[te,ne]=w.useState(""),[se,oe]=w.useState(""),[G,ce]=w.useState(""),[Z,ae]=w.useState(""),[je,de]=w.useState(""),[ie,be]=w.useState(""),[Ne,Fe]=w.useState(null);w.useEffect(()=>{if(je){const ze=e.filter(ut=>ut.indentId.toLowerCase().includes(je.toLowerCase()));setFilteredIndents(ze)}},[je]);const[Xe,ct]=w.useState([]);w.useEffect(()=>{const ze=localStorage.getItem("selectedCompanyId"),ut=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:ze,financialYear:ut}}).then(Te=>{const We=Te.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);t(We.map(Ge=>({label:`${Ge.indentId} (${Ge.categoryName})`,value:Ge})))}),Oe.get("/api/purchase-contract-categories",{params:{companyId:ze,financialYear:ut}}).then(Te=>{n(Te.data.map(We=>({label:`${We.categoryName}`,value:We._id})))}),Oe.get("/api/vendors",{params:{companyId:ze,financialYear:ut}}).then(Te=>{const We=Te.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);i(We.map(Ge=>({label:`${Ge.name1} ${Ge.name2||""}`,value:Ge._id,vnNo:Ge.vnNo||""})))}),Oe.get("/api/locations",{params:{companyId:ze,financialYear:ut}}).then(Te=>{console.log("Locations API response:",Te.data),Array.isArray(Te.data)?ct(Te.data):Te.data&&Array.isArray(Te.data.locations)?ct(Te.data.locations):ct([])}).catch(Te=>{console.error("Failed to fetch locations:",Te),ct([])}),console.log("location",T),Oe.get("/api/material",{params:{companyId:ze,financialYear:ut}}).then(Te=>{console.log("Fetched materials:",Te.data);const We=Te.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);l(We),console.log("Filtered materials:",We)}).catch(Te=>console.error("Failed to fetch materials:",Te))},[]);const xt=ze=>{h(ze);const{buyerGroup:ut,materialGroup:Te,deliveryDate:We,location:Ge}=ze.value;A(Ge||""),P(ut||"");const It=ze.value.items.map(Bt=>({...Bt,unit:Bt.unit||"",price:Bt.price||"",materialGroup:Bt.materialGroup||Te||"",deliveryDate:Bt.deliveryDate||We||""}));E(It)},Re=(ze,ut,Te)=>{const We=[...D];We[ze][ut]=Te,E(We)},ht=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date(new Date().setDate(new Date().getDate()+5)).toISOString().slice(0,10),price:0}])},[At,_t]=w.useState(!1),[Wt,Ke]=w.useState("internal"),[ge,ve]=w.useState(""),xe=async ze=>{ze.preventDefault(),_t(!0)};w.useEffect(()=>{const ze=D.reduce((ut,Te)=>{const We=parseFloat(Te.price)||0,Ge=parseFloat(Te.qty)||0;return ut+We*Ge},0);ue(ze)},[D]);const Ie=async()=>{const ze=localStorage.getItem("selectedCompanyId"),ut=localStorage.getItem("financialYear"),Te={indentId:u?.value?.indentId,categoryId:m?.value,rfqCategoryId:m?.value,vendor:v,vendorName:b,contractReference:c,validityFDate:O,validityTDate:z,companyId:ze,financialYear:ut,vnNo:k,note:C,buyerGroup:L,location:T,totalPrice:K,items:D,contractGenType:Wt,externalContractNumber:Wt==="external"?ge:null};console.log("Payload for submission:",Te);try{const We=await Oe.post("/api/contracts/create",Te);alert("Contract Created Successfully"),console.log(We.data),_t(!1)}catch(We){console.error(We),alert("Failed to create contract")}},Ze=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Contract Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>_t(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ke("internal"),Ie()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ke("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Wt==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:ge,onChange:ze=>{ze.target.value.length<=50&&ve(ze.target.value)},onKeyPress:ze=>{ze.key==="Enter"&&ge.trim()&&Ie()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[ge.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:Ie,disabled:!ge.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Contract"]})})]}),Wt==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Contract number will be auto-generated based on category and range count."})})]})]})})})]}),Ft=ze=>{console.log("Opening modal for item at index:",ze),Y(ze),X(!0)},Qe=()=>{const[ze,ut]=w.useState([]),[Te,We]=w.useState("materialId"),[Ge,It]=w.useState(""),Bt=wt=>{const rr=wt.target.value;It(rr);const Ot=o.filter(er=>(Te==="materialId"?er.materialId:er.description)?.toLowerCase().includes(rr.toLowerCase()));ut(Ot)},Ee=()=>{ut(o),It("")},_e=()=>{ut([]),It("")},st=wt=>{if(console.log("selectedItemIndex when selecting:",B),B==null){console.error("No item selected for update");return}E(rr=>{console.log("Previous items:",rr);const Ot=[...rr];return Ot[B]={...Ot[B],materialId:wt.materialId,description:wt.description,materialGroup:wt.materialgroup||"",baseUnit:wt.baseUnit,orderUnit:wt.orderUnit},console.log("Updated items:",Ot),Ot}),X(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>X(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Te,onChange:wt=>We(wt.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Te==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ge,onChange:Bt})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ee,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),ze.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:_e,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ze.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ze.map((wt,rr)=>a.jsxs("tr",{children:[a.jsx("td",{children:wt.materialId}),a.jsx("td",{children:wt.description}),a.jsx("td",{children:wt.baseUnit}),a.jsx("td",{children:wt.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>st(wt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},rr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ge?`No materials found matching "${Ge}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>X(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Ye=()=>{const[ze,ut]=w.useState("indentId"),[Te,We]=w.useState([]),[Ge,It]=w.useState(""),Bt=st=>{const wt=st.target.value;It(wt);const rr=e.filter(Ot=>(ze==="indentId"?Ot?.value?.indentId:Ot?.value?.categoryName)?.toLowerCase().includes(wt.toLowerCase()));We(rr)},Ee=()=>{We(e),It("")},_e=()=>{We([]),It("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ze,onChange:st=>ut(st.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ge,onChange:Bt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ee,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Te.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:_e,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Te.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Te.map((st,wt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:st.value.indentId})}),a.jsx("td",{children:st.value.categoryName}),a.jsx("td",{children:st.value.buyerGroup}),a.jsx("td",{children:st.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{xt(st),V(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},wt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Le=()=>{const[ze,ut]=w.useState("name1"),[Te,We]=w.useState([]),[Ge,It]=w.useState(""),Bt=st=>{const wt=st.target.value;It(wt);const rr=s.filter(Ot=>(ze==="vnNo"?Ot.vnNo:Ot.label)?.toLowerCase().includes(wt.toLowerCase()));We(rr)},Ee=()=>{We(s),It("")},_e=()=>{We([]),It("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ee(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ze,onChange:st=>ut(st.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ge,onChange:Bt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ee,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Te.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:_e,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Te.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Te.map((st,wt)=>a.jsxs("tr",{children:[a.jsx("td",{children:st.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:st.vnNo})}),a.jsx("td",{children:st.city||"-"}),a.jsx("td",{children:st.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(st.value),y(st.label),S(st.vnNo||""),ee(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},wt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ee(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Contract"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:ze=>{const ut=ze.target.value;ae(ut);const Te=e.find(We=>We.indentId.toLowerCase()===ut.toLowerCase());h(Te||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{de(Z),V(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Category"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:ze=>p(r.find(ut=>ut.value===ze.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((ze,ut)=>a.jsx("option",{value:ze.value,children:ze.label},ut))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:ze=>{const ut=ze.target.value;y(ut);const Te=s.find(We=>We.name.toLowerCase()===ut.toLowerCase());Fe(Te||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ee(!0),be(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Contract Reference",value:c,onChange:ze=>d(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:ze=>A(ze.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Xe)&&Xe.map((ze,ut)=>a.jsx("option",{value:ze.name||ze._id||ze,children:ze.name||ze.locationName||ze},ut))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:ze=>P(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity From"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:ze=>Q(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Till"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:z,onChange:ze=>re(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:ze=>N(ze.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("form",{onSubmit:xe,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((ze,ut)=>a.jsxs("tr",{children:[a.jsx("td",{children:ut+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:ze.materialId,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>Ft(ut),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ze.description,onChange:Te=>Re(ut,"description",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:ze.qty,onChange:Te=>Re(ut,"qty",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ze.baseUnit,onChange:Te=>Re(ut,"baseUnit",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ze.orderUnit,onChange:Te=>Re(ut,"orderUnit",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:ze.materialGroup,onChange:Te=>Re(ut,"materialGroup",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:ze.deliveryDate,onChange:Te=>Re(ut,"deliveryDate",Te.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:ze.price,onChange:Te=>Re(ut,"price",Te.target.value)})})]},ut))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:ht,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]}),U&&a.jsx(Qe,{})]}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["",K.toFixed(2)]})]})})]})})})]})]}),M&&a.jsx(Ye,{}),W&&a.jsx(Le,{}),At&&a.jsx(Ze,{})]})]})})}function R5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState([]),[L,P]=w.useState(""),[O,Q]=w.useState(""),[z,re]=w.useState(""),[U,X]=w.useState(!1),[B,Y]=w.useState(!1),[K,ue]=w.useState(!1),[M,V]=w.useState(null),[W,ee]=w.useState(""),[te,ne]=w.useState([]),se=localStorage.getItem("selectedCompanyId"),oe=localStorage.getItem("financialYear"),G=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:se,financialYear:oe}}).then(xe=>{const Ie=xe.data.filter(Ze=>!Ze.isBlocked&&!Ze.isDeleted);t(Ie)}).catch(console.error),Oe.get("/api/sale-contract-categories",{params:{companyId:se,financialYear:oe}}).then(xe=>n(xe.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:se,financialYear:oe}}).then(xe=>{console.log("Locations API response:",xe.data),Array.isArray(xe.data)?ne(xe.data):xe.data&&Array.isArray(xe.data.locations)?ne(xe.data.locations):ne([])}).catch(xe=>{console.error("Failed to fetch locations:",xe),ne([])}),Oe.get("/api/customers").then(xe=>{const Ie=xe.data.filter(Ze=>!Ze.isBlocked&&!Ze.isDeleted);i(Ie)}).catch(console.error),Oe.get("/api/material").then(xe=>l(xe.data)).catch(console.error),ce()},[]);const ce=()=>{Oe.get("/api/salescontracts",{params:{companyId:se,financialYear:oe}}).then(xe=>h(xe.data)).catch(console.error)},Z=xe=>{p({label:xe.indentId,value:xe._id}),d(xe.salesGroup||""),ee(xe.location),A(xe.items.map(Ie=>({...Ie,customerName:b?.name1||"",price:"",unit:""}))),ue(!1)},ae=xe=>{y({label:`${xe.name1} ${xe.name2}`,value:xe._id}),A(Ie=>Ie.map(Ze=>({...Ze,customerName:xe.name1}))),Y(!1)},je=xe=>{const Ie=[...T];Ie[M]={...Ie[M],materialId:xe.materialId,description:xe.description,baseUnit:xe.baseUnit,unit:xe.unit,price:xe.price},A(Ie),X(!1)},de=(xe,Ie,Ze)=>{const Ft=[...T];Ft[xe][Ie]=Ze,A(Ft)},ie=()=>{A(xe=>[...xe,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[be,Ne]=w.useState(!1),[Fe,Xe]=w.useState("internal"),[ct,xt]=w.useState(""),Re=xe=>{if(xe.preventDefault(),k&&D&&k>D){alert("Validity From date cannot be later than Validity To date");return}Ne(!0)},ht=()=>{const xe={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:G,financialYear:oe,validityFromDate:k,validityToDate:D,salesGroup:c,location:W,items:T,contractNumberType:Fe,externalContractNumber:Fe==="external"?ct:null};Oe.post("/api/salescontracts",xe).then(()=>{alert("Contract saved successfully!"),ce(),_t(),Ne(!1),Xe("internal"),xt("")}).catch(Ie=>{console.error(Ie),alert("Error saving contract")})},At=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Contract Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>Ne(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Xe("internal"),ht()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Xe("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Fe==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:ct,onChange:xe=>{xe.target.value.length<=50&&xt(xe.target.value)},onKeyPress:xe=>{xe.key==="Enter"&&ct.trim()&&ht()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[ct.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:ht,disabled:!ct.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Contract"]})})]})]})]})})})]}),_t=()=>{p(null),g(null),y(null),N(""),S(""),E(""),A([])},Wt=({children:xe,onClose:Ie})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Ie})]}),a.jsx("div",{className:"modal-body",children:xe})]})})}),Ke=()=>{const[xe,Ie]=w.useState([]),[Ze,Ft]=w.useState("materialId"),Qe=ze=>{const ut=ze.target.value;P(ut);const Te=o.filter(We=>(Ze==="materialId"?We.materialId:We.description)?.toLowerCase().includes(ut.toLowerCase()));Ie(Te)},Ye=()=>{Ie(o),P("")},Le=()=>{Ie([]),P("")};return a.jsxs(Wt,{onClose:()=>X(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ze,onChange:ze=>Ft(ze.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Ze==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:L,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),xe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Le,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((ze,ut)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ze.materialId})}),a.jsx("td",{children:ze.description}),a.jsx("td",{children:ze.baseUnit}),a.jsx("td",{children:ze.unit}),a.jsx("td",{children:ze.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>je(ze),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ut))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":L?`No materials found matching "${L}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>X(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},ge=()=>{const[xe,Ie]=w.useState("name1"),[Ze,Ft]=w.useState([]),Qe=ze=>{const ut=ze.target.value;Q(ut),Ft(filtered)},Ye=()=>{Ft(s),Q("")},Le=()=>{Ft([]),Q("")};return a.jsxs(Wt,{onClose:()=>Y(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:xe,onChange:ze=>Ie(ze.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:O,onChange:Qe})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ze.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Le,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ze.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ze.map((ze,ut)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[ze.name1," ",ze.name2]}),a.jsx("td",{children:ze.city}),a.jsx("td",{children:ze.region}),a.jsx("td",{children:ze.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(ze),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ut))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":O?`No match found for "${O}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>Y(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},ve=()=>{const[xe,Ie]=w.useState([]),[Ze,Ft]=w.useState("indentId"),[Qe,Ye]=w.useState(""),Le=Te=>{const We=Te.target.value;Ye(We);const Ge=e.filter(It=>(Ze==="indentId"?It.indentId:Ze==="categoryName"?It.categoryName:It.location)?.toLowerCase().includes(We.toLowerCase()));Ie(Ge)},ze=()=>{Ie(e),Ye("")},ut=()=>{Ie([]),Ye("")};return a.jsxs(Wt,{onClose:()=>ue(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ze,onChange:Te=>Ft(Te.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Qe,onChange:Le})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ze,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),xe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ut,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((Te,We)=>a.jsxs("tr",{children:[a.jsx("td",{children:Te.indentId}),a.jsx("td",{children:Te.categoryName}),a.jsx("td",{children:Te.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(Te),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},We))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Qe?`No match for "${Qe}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ue(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Contract"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-file-contract me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:xe=>{const Ie=xe.target.value;p({label:Ie,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>ue(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:xe=>{const Ie=xe.target.value;y({label:Ie,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Y(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:W,onChange:xe=>ee(xe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(te)&&te.map((xe,Ie)=>a.jsx("option",{value:xe.name,children:xe.name},Ie))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Contract Category:"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:xe=>{const Ie=xe.target.value,Ze=r.find(Ft=>Ft._id===Ie);g(Ze?{label:Ze.categoryName,value:Ze._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(xe=>a.jsxs("option",{value:xe._id,children:[xe.categoryName," (",xe.prefix,")"]},xe._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity From Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:xe=>S(xe.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity To Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:xe=>E(xe.target.value),min:k})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:xe=>d(xe.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:xe=>N(xe.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Re,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:T.map((xe,Ie)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ie+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:xe.materialId,onChange:Ze=>de(Ie,"materialId",Ze.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{V(Ie),X(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.description,onChange:Ze=>de(Ie,"description",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:xe.qty,onChange:Ze=>de(Ie,"qty",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.baseUnit,onChange:Ze=>de(Ie,"baseUnit",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.orderUnit,onChange:Ze=>de(Ie,"orderUnit",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.location,onChange:Ze=>de(Ie,"location",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.customerName,onChange:Ze=>de(Ie,"customerName",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.unit,onChange:Ze=>de(Ie,"unit",Ze.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:xe.price,onChange:Ze=>de(Ie,"price",Ze.target.value)})})]},Ie))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:ie,children:"+ Add Contract Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Contract"})})]})})})})})]}),U&&a.jsx(Ke,{}),B&&a.jsx(ge,{}),K&&a.jsx(ve,{}),be&&a.jsx(At,{})]})]})})}function F5e(){const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(1),o=5,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");w.useEffect(()=>{Oe.get("/api/salescontracts",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch contracts",k),alert("Error loading contracts")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Contract</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
            .contract-header { margin-bottom: 20px; }
            .validity-dates { display: flex; gap: 20px; margin: 10px 0; }
          </style>
        </head>
        <body>
          <div class="contract-header">
            <h2>Sales Contract: ${k.contractNumber}</h2>
            <p><strong>Indent ID:</strong> ${k.indentId}</p>
            <p><strong>Customer Name:</strong> ${k.customerName}</p>
            <div class="validity-dates">
              <p><strong>Validity From:</strong> ${k.validityFromDate||"N/A"}</p>
              <p><strong>Validity To:</strong> ${k.validityToDate||"N/A"}</p>
            </div>
            <p><strong>Location:</strong> ${k.location||"N/A"}</p>
            <p><strong>Sales Group:</strong> ${k.salesGroup||"N/A"}</p>
            <p><strong>Note:</strong> ${k.note||"N/A"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId||"N/A"}</td>
                      <td>${E.description||"N/A"}</td>
                      <td>${E.qty||0}</td>
                      <td>${E.baseUnit||"N/A"}</td>
                      <td>${E.orderUnit||"N/A"}</td>
                      <td>${E.location||"N/A"}</td>
                      <td>${E.unit||"N/A"}</td>
                      <td>${E.price||0}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=w.useState(""),[m,p]=w.useState(""),v=e.filter(k=>{const S=k.contractNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),N=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contracts"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Contract No, Indent ID, Customer Name, or Location",value:r,onChange:k=>{n(k.target.value),i(1)}})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:m,min:u,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:y.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-contract fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No contracts found. Create your first contract!":"No contracts match your search criteria."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity From"}),a.jsx("th",{children:"Validity To"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:k.contractNumber}),a.jsx("td",{children:k.indentId}),a.jsx("td",{children:k.customerName}),a.jsx("td",{children:k.location||"N/A"}),a.jsx("td",{children:k.validityFromDate?new Date(k.validityFromDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.validityToDate?new Date(k.validityToDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d(k),title:"Print Contract",children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})})]},S))})]})})})})]}),C>=1&&a.jsx("nav",{className:"mt-1",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>s>1&&N(s-1),className:"page-link",disabled:s===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>N(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>s<C&&N(s+1),className:"page-link",disabled:s===C,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})}function L5e(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10}),[o,l]=w.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[c,d]=w.useState({byType:[],byMethod:[]}),[u,h]=w.useState(null),[m,p]=w.useState(!1),[v,g]=w.useState(!1),[b,y]=w.useState(null),[C,N]=w.useState({type:"",text:""}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=localStorage.getItem("selectedCompanyId");w.useEffect(()=>{E(),T()},[s.page]),w.useEffect(()=>{const M=setTimeout(()=>{i(V=>({...V,page:1})),E()},500);return()=>clearTimeout(M)},[s.recordType,s.status,s.paymentMethod,s.entityName,s.startDate,s.endDate,s.limit]);const E=async()=>{n(!0);try{const M=new URLSearchParams;Object.entries(s).forEach(([W,ee])=>{ee&&M.append(W,ee)}),console.log("Fetching payments with filters:",k,S);const V=await Oe.get(`/api/payment?${M}`,{params:{companyId:k,financialYear:S}});t(V.data.payments||[]),l(V.data.pagination||{})}catch(M){console.error("Error fetching payments:",M)}finally{n(!1)}},T=async()=>{try{console.log("Fetching summary for:",{companyId:k,financialYear:S});const M=await Oe.get("/api/payment-summary",{params:{companyId:k,financialYear:S}});console.log("Summary response:",M.data),d({byType:M.data.byType||[],byMethod:M.data.byMethod||[],today:M.data.today||{totalAmount:0,count:0}})}catch(M){console.error("Error fetching summary:",M),N({type:"error",text:"Failed to fetch payment summary."})}},A=M=>{const{name:V,value:W}=M.target;i(ee=>({...ee,[V]:W}))},L=()=>{i({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10})},P=M=>{i(V=>({...V,page:M}))},O=M=>{h(M),p(!0)},Q=M=>{y({...M,paymentDate:new Date(M.paymentDate).toISOString().split("T")[0]}),g(!0)},z=M=>{const{name:V,value:W}=M.target;y(ee=>({...ee,[V]:W}))},re=async M=>{M.preventDefault();try{const V={paymentAmount:parseFloat(b.paymentAmount),paymentMethod:b.paymentMethod,status:b.status,description:b.description,companyId:D,financialYear:S,paymentDate:b.paymentDate,paymentDetails:b.paymentDetails||{}};await Oe.put(`/api/payment/${b._id}`,V),N({type:"success",text:"Payment updated successfully!"}),g(!1),E(),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(V){console.error("Error updating payment:",V),N({type:"error",text:"Failed to update payment. Please try again."})}},U=M=>{const V=window.open("","_blank"),W=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt - ${M.paymentDocNumber}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .company-name { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 5px;
          }
          .receipt-title { 
            font-size: 18px; 
            color: #666;
          }
          .details { 
            margin: 20px 0; 
          }
          .detail-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
          }
          .detail-label { 
            font-weight: bold; 
            width: 40%;
          }
          .detail-value { 
            width: 60%;
            text-align: right;
          }
          .amount { 
            font-size: 20px; 
            font-weight: bold; 
            color: #28a745;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
          }
          .footer { 
            margin-top: 40px; 
            text-align: center; 
            font-size: 12px; 
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 20px;
          }
          .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .status-cleared { background: #d4edda; color: #155724; }
          .status-pending { background: #fff3cd; color: #856404; }
          .status-bounced { background: #f8d7da; color: #721c24; }
          .status-cancelled { background: #e2e3e5; color: #383d41; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">Your Company Name</div>
          <div class="receipt-title">PAYMENT RECEIPT</div>
        </div>
        
        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Receipt Number:</span>
            <span class="detail-value">${M.paymentDocNumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date & Time:</span>
            <span class="detail-value">${X(M.paymentDate)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Type:</span>
            <span class="detail-value">${M.recordType.toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">${M.recordType==="vendor"?"Vendor":"Customer"} Name:</span>
            <span class="detail-value">${M.entityName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Original Document:</span>
            <span class="detail-value">${M.docnumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value">${M.paymentMethod.replace("_"," ").toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="status-badge status-${M.status}">${M.status.toUpperCase()}</span>
            </span>
          </div>
        </div>

        <div class="amount">
          AMOUNT PAID: ${B(M.paymentAmount)}
        </div>

        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Previous Balance:</span>
            <span class="detail-value">${B(M.previousBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">New Balance:</span>
            <span class="detail-value">${B(M.newBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Balance Reduction:</span>
            <span class="detail-value">${B(M.previousBalance-M.newBalance)}</span>
          </div>
        </div>

        ${M.description?`
          <div class="details">
            <div class="detail-row">
              <span class="detail-label">Description:</span>
              <span class="detail-value">${M.description}</span>
            </div>
          </div>
        `:""}

        ${M.paymentDetails?`
          <div class="details">
            <h4>Payment Details:</h4>
            ${M.paymentMethod==="cheque"&&M.paymentDetails.chequeNumber?`
              <div class="detail-row">
                <span class="detail-label">Cheque Number:</span>
                <span class="detail-value">${M.paymentDetails.chequeNumber}</span>
              </div>
            `:""}
            ${M.paymentMethod==="bank_transfer"&&M.paymentDetails.transactionId?`
              <div class="detail-row">
                <span class="detail-label">Transaction ID:</span>
                <span class="detail-value">${M.paymentDetails.transactionId}</span>
              </div>
            `:""}
          </div>
        `:""}

        <div class="footer">
          <p>Thank you for your payment!</p>
          <p>This is a computer-generated receipt. No signature required.</p>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>

        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>
        </div>
      </body>
      </html>
    `;V.document.write(W),V.document.close(),V.focus()},X=M=>new Date(M).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),B=M=>`${parseFloat(M).toFixed(2)}`,Y=M=>`badge bg-${{pending:"warning",cleared:"success",bounced:"danger",cancelled:"secondary"}[M]||"secondary"}`,K=M=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[M]||"ti-payment",ue=()=>{if(e.length===0){alert("No data to export");return}const M=e.map(ne=>({"Payment Doc":ne.paymentDocNumber,Date:X(ne.paymentDate),Type:ne.recordType,Entity:ne.entityName,"Doc Number":ne.docnumber,Amount:ne.paymentAmount,Method:ne.paymentMethod,Status:ne.status,"Previous Balance":ne.previousBalance,"New Balance":ne.newBalance})),V=[Object.keys(M[0]).join(","),...M.map(ne=>Object.values(ne).join(","))].join(`
`),W=new Blob([V],{type:"text/csv"}),ee=window.URL.createObjectURL(W),te=document.createElement("a");te.href=ee,te.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,te.click(),window.URL.revokeObjectURL(ee)};return console.log("Payment summary state:",c),a.jsxs("div",{className:"content",children:[C.text&&a.jsxs("div",{className:`alert alert-${C.type==="success"?"success":"danger"} alert-dismissible fade show`,children:[C.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>N({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Payment Records"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payments"})]})})]}),a.jsxs("div",{className:"",children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("button",{onClick:ue,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-download"})," Export"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-primary-light rounded",children:a.jsx("i",{className:"ti ti-receipt text-primary"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Total Payments"}),a.jsx("h4",{className:"mb-0",children:o.totalCount})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-success-light rounded",children:a.jsx("i",{className:"ti ti-building-store text-success"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Vendor Payments"}),a.jsx("h4",{className:"mb-0",children:B(c.byType.find(M=>M._id==="vendor")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-info-light rounded",children:a.jsx("i",{className:"ti ti-users text-info"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Customer Payments"}),a.jsx("h4",{className:"mb-0",children:B(c.byType.find(M=>M._id==="customer")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-warning-light rounded",children:a.jsx("i",{className:"ti ti-cash text-warning"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Today's Total"}),a.jsx("h4",{className:"mb-0",children:B(e.filter(M=>new Date(M.paymentDate).toDateString()===new Date().toDateString()).reduce((M,V)=>M+V.paymentAmount,0))})]})]})})})})]}),a.jsxs("div",{className:"card mb-4",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Filters"})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Type"}),a.jsxs("select",{className:"form-select",name:"recordType",value:s.recordType,onChange:A,children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"customer",children:"Customer"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",name:"status",value:s.status,onChange:A,children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Method"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:s.paymentMethod,onChange:A,children:[a.jsx("option",{value:"",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Entity Name"}),a.jsx("input",{type:"text",className:"form-control",name:"entityName",placeholder:"Search entity...",value:s.entityName,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",name:"startDate",value:s.startDate,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",name:"endDate",value:s.endDate,onChange:A})]})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("button",{className:"btn btn-outline-secondary",onClick:L,children:[a.jsx("i",{className:"ti ti-refresh"})," Clear Filters"]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label me-2 mb-0",children:"Show:"}),a.jsxs("select",{className:"form-select",name:"limit",value:s.limit,onChange:A,style:{width:"auto"},children:[a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"25",children:"25"}),a.jsx("option",{value:"50",children:"50"}),a.jsx("option",{value:"100",children:"100"})]})]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Payment Records"})}),a.jsx("div",{className:"card-body",children:r?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"ti ti-receipt-off text-muted",style:{fontSize:"3rem"}}),a.jsx("h5",{className:"text-muted mt-2",children:"No payments found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or record a new payment."}),a.jsxs("a",{href:"/payments",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Payment Doc"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Entity"}),a.jsx("th",{children:"Original Doc"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Method"}),a.jsx("th",{children:"Balance Change"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((M,V)=>a.jsxs("tr",{children:[a.jsx("td",{children:(o.currentPage-1)*s.limit+V+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:M.paymentDocNumber})}),a.jsx("td",{children:a.jsx("small",{children:X(M.paymentDate)})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${M.recordType==="vendor"?"success":"info"}`,children:M.recordType})}),a.jsx("td",{children:a.jsx("div",{children:a.jsx("strong",{children:M.entityName})})}),a.jsx("td",{children:a.jsx("span",{className:"text-muted",children:M.docnumber})}),a.jsx("td",{children:a.jsx("strong",{className:"text-success",children:B(M.paymentAmount)})}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${K(M.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:M.paymentMethod.replace("_"," ")})]})}),a.jsx("td",{children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"From:"})," ",B(M.previousBalance)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"To:"})," ",B(M.newBalance)]})]})}),a.jsx("td",{children:a.jsx("span",{className:Y(M.status),children:M.status})}),a.jsx("td",{children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Actions"}),a.jsxs("ul",{className:"dropdown-menu",children:[a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>O(M),children:[a.jsx("i",{className:"ti ti-eye me-2"}),"View Details"]})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>U(M),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})}),a.jsx("li",{children:a.jsx("hr",{className:"dropdown-divider"})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item text-primary",onClick:()=>Q(M),disabled:M.status==="cancelled",children:[a.jsx("i",{className:"ti ti-edit me-2"}),"Edit"]})})]})]})})]},M._id))})]})}),o.totalPages>1&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Showing ",(o.currentPage-1)*s.limit+1," to"," ",Math.min(o.currentPage*s.limit,o.totalCount)," of"," ",o.totalCount," entries"]}),a.jsx("nav",{children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${o.hasPrev?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage-1),disabled:!o.hasPrev,children:a.jsx("i",{className:"ti ti-chevron-left"})})}),[...Array(Math.min(5,o.totalPages))].map((M,V)=>{const W=Math.max(1,o.currentPage-2)+V;return W<=o.totalPages?a.jsx("li",{className:`page-item ${W===o.currentPage?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(W),children:W})},W):null}),a.jsx("li",{className:`page-item ${o.hasNext?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage+1),disabled:!o.hasNext,children:a.jsx("i",{className:"ti ti-chevron-right"})})})]})})]})]})})]}),m&&u&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Payment Details"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Payment Information"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Document:"}),a.jsx("div",{children:u.paymentDocNumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Date & Time:"}),a.jsx("div",{children:X(u.paymentDate)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Amount:"}),a.jsx("div",{className:"text-success",children:B(u.paymentAmount)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Method:"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${K(u.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:u.paymentMethod.replace("_"," ")})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Status:"}),a.jsx("div",{children:a.jsx("span",{className:Y(u.status),children:u.status})})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Entity & Transaction Details"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Type:"}),a.jsx("div",{className:"text-capitalize",children:u.recordType})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Name:"}),a.jsx("div",{children:u.entityName})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Original Document:"}),a.jsx("div",{children:u.docnumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Balance Changes:"}),a.jsxs("div",{children:[a.jsxs("div",{children:["Previous: ",B(u.previousBalance)]}),a.jsxs("div",{children:["New: ",B(u.newBalance)]}),a.jsxs("div",{className:"text-success",children:["Reduction: ",B(u.previousBalance-u.newBalance)]})]})]})]})]}),u.description&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Description"}),a.jsx("p",{className:"bg-light p-3 rounded",children:u.description})]}),u.paymentDetails&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Payment Method Details"}),a.jsxs("div",{className:"bg-light p-3 rounded",children:[u.paymentMethod==="cheque"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.chequeNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Cheque Number:"})," ",u.paymentDetails.chequeNumber]}),u.paymentDetails.bankName&&a.jsxs("div",{children:[a.jsx("strong",{children:"Bank:"})," ",u.paymentDetails.bankName]})]}),u.paymentMethod==="bank_transfer"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.accountNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Account Number:"})," ",u.paymentDetails.accountNumber]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]}),u.paymentMethod==="upi"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.upiId&&a.jsxs("div",{children:[a.jsx("strong",{children:"UPI ID:"})," ",u.paymentDetails.upiId]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Close"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>U(u),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})]})]})})}),v&&b&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Payment - ",b.paymentDocNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1)})]}),a.jsxs("form",{onSubmit:re,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:""}),a.jsx("input",{type:"number",className:"form-control",name:"paymentAmount",value:b.paymentAmount,onChange:z,min:"0",step:"0.01",required:!0})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:b.paymentMethod,onChange:z,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Date *"}),a.jsx("input",{type:"date",className:"form-control",name:"paymentDate",value:b.paymentDate,onChange:z,required:!0})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status *"}),a.jsxs("select",{className:"form-select",name:"status",value:b.status,onChange:z,required:!0,children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-12 mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:b.description||"",onChange:z,rows:"3",placeholder:"Payment description or notes..."})]})]}),a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("i",{className:"ti ti-alert-triangle me-2"}),a.jsx("strong",{children:"Note:"})," Editing payment details will not automatically update the balance in the original invoice/billing record. You may need to manually adjust balances if necessary."]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-check me-2"}),"Update Payment"]})]})]})]})})})]})}function B5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(1),[o,l]=w.useState(1),[c,d]=w.useState(!1),[u,h]=w.useState([]),[m,p]=w.useState(Date.now()),[v,g]=w.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[b,y]=w.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[C,N]=w.useState(""),[k,S]=w.useState(""),[D,E]=w.useState(""),[T,A]=w.useState(""),[L,P]=w.useState(""),[O,Q]=w.useState(""),[z,re]=w.useState(!1),[U,X]=w.useState(""),[B,Y]=w.useState(""),[K,ue]=w.useState(""),[M,V]=w.useState(""),[W,ee]=w.useState(!1),[te,ne]=w.useState(null),[se,oe]=w.useState(null),[G,ce]=w.useState(null),[Z,ae]=w.useState(new Date),[je,de]=w.useState({type:"",text:""}),ie=localStorage.getItem("selectedCompanyId"),be=localStorage.getItem("financialYear"),Ne=10;w.useEffect(()=>{Xe();const _e=st=>{st.key==="paymentUpdated"&&(de({type:"info",text:"Payment updated in another tab. Refreshing ledger..."}),Xe(),setTimeout(()=>de({type:"",text:""}),3e3))};return window.addEventListener("storage",_e),()=>{window.removeEventListener("storage",_e),G&&clearInterval(G)}},[]);const Fe=async()=>{try{return(await Oe.get("/api/payment",{params:{companyId:ie,financialYear:be,limit:1e3}})).data.payments||[]}catch(_e){return console.error("Error fetching payments:",_e),[]}},Xe=async()=>{d(!0);try{const[_e,st,wt]=await Promise.all([Oe.get("/api/invoiceform",{params:{companyId:ie,financialYear:be}}),Oe.get("/api/billingform",{params:{companyId:ie,financialYear:be}}),Fe()]);t(_e.data||[]),n(st.data||[]),h(wt||[]),p(Date.now()),ct(_e.data||[],st.data||[]),ae(new Date)}catch(_e){console.error("Error fetching data",_e),de({type:"error",text:"Failed to fetch data. Please refresh the page."})}finally{d(!1)}},ct=(_e,st)=>{const wt=_e.reduce((Ot,er)=>{const fr=er.category?.toLowerCase()==="debit"&&(er.finalTotal||er.netAmount)||0,yr=er.category?.toLowerCase()==="credit"&&(er.finalTotal||er.netAmount)||0,Yr=er.balance||0;let ur=fr,me=yr;return fr>0&&yr===0?me=-Yr:yr>0&&fr===0&&(ur=-Yr),{totalDebit:Ot.totalDebit+ur,totalCredit:Ot.totalCredit+me,totalBalance:Ot.totalBalance+(me-ur),outstandingBalance:Ot.outstandingBalance+Yr}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),rr=st.reduce((Ot,er)=>{const fr=er.category?.toLowerCase()==="debit"&&er.finalTotal||0,yr=er.category?.toLowerCase()==="credit"&&er.finalTotal||0,Yr=er.balance||0;let ur=fr,me=yr;return fr>0&&yr===0?me=-Yr:yr>0&&fr===0&&(ur=-Yr),{totalDebit:Ot.totalDebit+ur,totalCredit:Ot.totalCredit+me,totalBalance:Ot.totalBalance+(ur-me),outstandingBalance:Ot.outstandingBalance+Yr}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0});g(wt),y(rr)},xt=(_e,st,wt)=>{let rr=_e,Ot=st;return _e>0&&st===0?Ot=_e-wt:st>0&&_e===0&&(rr=st-wt),{adjustedDebit:rr,adjustedCredit:Ot}},Re=(_e,st,wt)=>!u||u.length===0?[]:u.filter(rr=>{const Ot=rr.docnumber===_e||rr.invoiceNumber===_e||rr.originalDocNumber===_e;return rr.recordType===wt&&Ot}),ht=(_e,st)=>{oe(_e),ne(st),ee(!0)},At=e.map((_e,st)=>{const wt=_e.category?.toLowerCase()==="debit"&&(_e.finalTotal||_e.netAmount)||0,rr=_e.category?.toLowerCase()==="credit"&&(_e.finalTotal||_e.netAmount)||0,Ot=_e?.vendor||"Unknown Vendor",er=_e?.docnumber||"_",fr=Re(er,Ot,"vendor"),yr=fr.filter(ke=>ke.status==="cleared"),Yr=yr.reduce((ke,Me)=>ke+(Me.paymentAmount||0),0),ur=yr.sort((ke,Me)=>new Date(Me.paymentDate)-new Date(ke.paymentDate))[0];let me=_e.balance||0;me<0&&(me=0);const{adjustedDebit:Be,adjustedCredit:Ae}=xt(wt,rr,me);return{id:_e._id||st,name:Ot,docnumber:er,debit:Be,credit:Ae,balance:me,originalAmount:_e.finalTotal||_e.netAmount||0,lastPaymentAmount:ur?.paymentAmount||0,lastPaymentDate:ur?.paymentDate||null,lastPaymentMethod:ur?.paymentMethod||null,createdAt:_e.createdAt||new Date,category:_e.category||"debit",originalDebit:wt,originalCredit:rr,totalPayments:Yr,paymentCount:yr.length,pendingPayments:fr.filter(ke=>ke.status==="pending").length,specificInvoicePayments:fr,allPaymentStatuses:fr.map(ke=>ke.status),paymentMethods:[...new Set(fr.map(ke=>ke.paymentMethod))],firstPaymentDate:fr.length>0?fr.sort((ke,Me)=>new Date(ke.paymentDate)-new Date(Me.paymentDate))[0].paymentDate:null}}),_t=r.map((_e,st)=>{const wt=_e.category?.toLowerCase()==="debit"&&_e.finalTotal||0,rr=_e.category?.toLowerCase()==="credit"&&_e.finalTotal||0,Ot=_e?.customer||"Unknown Customer",er=_e.docnumber||"_",fr=Re(er,Ot,"customer"),yr=fr.filter(ke=>ke.status==="cleared"),Yr=yr.reduce((ke,Me)=>ke+(Me.paymentAmount||0),0),ur=yr.sort((ke,Me)=>new Date(Me.paymentDate)-new Date(ke.paymentDate))[0];let me=_e.balance||0;me<0&&(me=0);const{adjustedDebit:Be,adjustedCredit:Ae}=xt(wt,rr,me);return{id:_e._id||st,docnumber:er,name:Ot,debit:Be,credit:Ae,balance:me,originalAmount:_e.finalTotal||0,lastPaymentAmount:ur?.paymentAmount||0,lastPaymentDate:ur?.paymentDate||null,lastPaymentMethod:ur?.paymentMethod||null,createdAt:_e.createdAt||new Date,category:_e.category||"debit",originalDebit:wt,originalCredit:rr,totalPayments:Yr,paymentCount:yr.length,pendingPayments:fr.filter(ke=>ke.status==="pending").length,specificInvoicePayments:fr,allPaymentStatuses:fr.map(ke=>ke.status),paymentMethods:[...new Set(fr.map(ke=>ke.paymentMethod))],firstPaymentDate:fr.length>0?fr.sort((ke,Me)=>new Date(ke.paymentDate)-new Date(Me.paymentDate))[0].paymentDate:null}}),Wt=[...new Set(At.map(_e=>_e.name))],Ke=[...new Set(_t.map(_e=>_e.name))],ge=(_e,st,wt)=>!st&&!wt?_e:_e.filter(rr=>{const Ot=new Date(rr.createdAt),er=st?new Date(st):null,fr=wt?new Date(wt):null;return!(er&&Ot<er||fr&&Ot>fr)});let ve=C?At.filter(_e=>_e.name===C):At;ve=ge(ve,D,T);let xe=k?_t.filter(_e=>_e.name===k):_t;xe=ge(xe,L,O),console.log("filteredCustomerData",xe);const Ie=ve.reduce((_e,st)=>({totalDebit:_e.totalDebit+st.debit,totalCredit:_e.totalCredit+st.credit,totalBalance:_e.totalBalance+(st.credit-st.debit),outstandingBalance:_e.outstandingBalance+st.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Ze=xe.reduce((_e,st)=>({totalDebit:_e.totalDebit+st.debit,totalCredit:_e.totalCredit+st.credit,totalBalance:_e.totalBalance+(st.debit-st.credit),outstandingBalance:_e.outstandingBalance+st.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Ft=(_e,st="")=>{X(_e),Y(st),ue(""),V(""),re(!0)},Qe=(_e,st,wt)=>{const rr=["S.No","Invoice/Doc Number",wt==="vendor"?"Vendor Name":"Customer Name","Invoice Original Amount","Current Debit","Current Credit","Outstanding Balance","Payment Status","Total Payments Made (This Invoice)","Payment Count (This Invoice)","Cleared Payments Count","Pending Payments Count","Payment Methods Used","First Payment Date","Last Payment Date","Last Payment Amount","Last Payment Method","Invoice Created Date","Detailed Payment History","Payment Status Breakdown","Balance Calculation Details"],Ot=[];Ot.push(rr.join(",")),_e.forEach((ur,me)=>{const Be=ur.specificInvoicePayments||[],Ae=Be.map(jt=>{const ot=Ge(jt.paymentDate),bt=(jt.paymentAmount||0).toFixed(2),yt=jt.paymentMethod||"N/A",Yt=jt.status||"N/A",sr=jt.paymentDocNumber||"N/A",mr=jt.description||"N/A";return`[${ot}] Amount: ${bt} | Method: ${yt} | Status: ${Yt.toUpperCase()} | Reference: ${sr} | Description: ${mr} `}).join(` 
 `),ke=ur.allPaymentStatuses.reduce((jt,ot)=>(jt[ot]=(jt[ot]||0)+1,jt),{}),Me=Object.entries(ke).map(([jt,ot])=>`${jt.toUpperCase()}: ${ot}`).join(", "),$e=`Original: ${ur.originalAmount.toFixed(2)} | Total Paid: ${ur.totalPayments.toFixed(2)} | Outstanding: ${ur.balance.toFixed(2)} | Calculation: ${ur.originalAmount.toFixed(2)} - ${ur.totalPayments.toFixed(2)} = ${ur.balance.toFixed(2)}`,pt=[me+1,`"${ur.docnumber}"`,`"${ur.name}"`,ur.originalAmount.toFixed(2),ur.debit.toFixed(2),ur.credit.toFixed(2),ur.balance.toFixed(2),It(ur.balance,ur.originalAmount).status,ur.totalPayments.toFixed(2),ur.paymentCount,Be.filter(jt=>jt.status==="cleared").length,Be.filter(jt=>jt.status==="pending").length,`"${ur.paymentMethods.join(", ")||"No payments"}"`,ur.firstPaymentDate?We(ur.firstPaymentDate):"N/A",ur.lastPaymentDate?We(ur.lastPaymentDate):"N/A",ur.lastPaymentAmount.toFixed(2),`"${ur.lastPaymentMethod||"N/A"}"`,We(ur.createdAt),`"${Ae||"No payment history for this invoice"}"`,`"${Me||"No payment status available"}"`,`"${$e}"`];Ot.push(pt.join(","))}),Ot.push(""),Ot.push("Invoice Number,Entity Name,Invoice Amount,Payments Received,Outstanding,Payment Efficiency %,First Payment,Last Payment,Payment Methods,Status"),_e.forEach(ur=>{const me=ur.originalAmount>0?(ur.totalPayments/ur.originalAmount*100).toFixed(1):0;Ot.push([`"${ur.docnumber}"`,`"${ur.name}"`,ur.originalAmount.toFixed(2),ur.totalPayments.toFixed(2),ur.balance.toFixed(2),`${me}%`,ur.firstPaymentDate?We(ur.firstPaymentDate):"No payments",ur.lastPaymentDate?We(ur.lastPaymentDate):"No payments",`"${ur.paymentMethods.join(", ")||"None"}"`,It(ur.balance,ur.originalAmount).status].join(","))}),Ot.push(""),Ot.push(`"Financial Year","${be}"`),Ot.push(`"Total Invoices","${_e.length}"`),Ot.push(`"Total Payment Records","${_e.reduce((ur,me)=>ur+me.paymentCount,0)}"`);const er=Ot.join(`
`),fr=new Blob([er],{type:"text/csv;charset=utf-8;"}),yr=document.createElement("a"),Yr=URL.createObjectURL(fr);yr.setAttribute("href",Yr),yr.setAttribute("download",st),yr.style.visibility="hidden",document.body.appendChild(yr),yr.click(),document.body.removeChild(yr)},Ye=()=>{let _e=[],st="";U==="vendor"?(_e=B?At.filter(rr=>rr.name===B):At,st=B?`${B}_vendor_detailed_invoice_payments`:"all_vendor_detailed_invoice_payments"):(_e=B?_t.filter(rr=>rr.name===B):_t,st=B?`${B}_customer_detailed_invoice_payments`:"all_customer_detailed_invoice_payments"),_e=ge(_e,K,M),(K||M)&&(st+=`_${K||"start"}_to_${M||"end"}`);const wt=new Date().toISOString().slice(0,19).replace(/:/g,"-");st+=`_${wt}.csv`,Qe(_e,st,U),re(!1)},Le=(_e,st)=>_e.slice((st-1)*Ne,st*Ne),ze=Math.ceil(ve.length/Ne)||1,ut=Math.ceil(xe.length/Ne)||1,Te=_e=>{const st=parseFloat(_e||0),rr=`${Math.abs(st).toFixed(2)}`;return st<0?`(${rr})`:rr},We=_e=>_e?new Date(_e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",Ge=_e=>_e?new Date(_e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",It=(_e,st)=>_e<=0?{status:"Paid",class:"success"}:_e===st?{status:"Unpaid",class:"danger"}:{status:"Partial",class:"warning"},Bt=_e=>_e>0?"text-success":_e<0?"text-danger":"text-muted",Ee=_e=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[_e]||"ti ti-payment";return a.jsxs("div",{className:"content",children:[je.text&&a.jsxs("div",{className:`alert alert-${je.type==="success"?"success":je.type==="info"?"info":"danger"} alert-dismissible fade show`,children:[je.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>de({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Ledger"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active",children:"Ledger"})]})})]}),a.jsxs("div",{children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("a",{href:"/paymentdisplay",className:"btn btn-outline-primary me-2",children:[a.jsx("i",{className:"ti ti-eye"})," View Payments"]}),a.jsxs("button",{onClick:Xe,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-refresh"})," Refresh Now"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Vendor Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Ft("vendor"),title:"Download Detailed Vendor Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Vendor: "}),a.jsxs("select",{value:C,onChange:_e=>{N(_e.target.value),i(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Vendors"}),Wt.map(_e=>a.jsx("option",{value:_e,children:_e},_e))]}),C&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>N(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Ft("vendor",C),title:`Download detailed ${C} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:_e=>{E(_e.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:_e=>{A(_e.target.value),i(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Te(Ie.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Te(Ie.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:Ie.totalBalance>=0?"text-success":"text-danger",children:Te(Ie.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Te(Ie.outstandingBalance)})]})]})]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Customer Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Ft("customer"),title:"Download Detailed Customer Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Customer: "}),a.jsxs("select",{value:k,onChange:_e=>{S(_e.target.value),l(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Customers"}),Ke.map(_e=>a.jsx("option",{value:_e,children:_e},_e))]}),k&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>S(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Ft("customer",k),title:`Download detailed ${k} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:L,onChange:_e=>{P(_e.target.value),l(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:_e=>{Q(_e.target.value),l(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Te(Ze.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Te(Ze.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:Ze.totalBalance>=0?"text-success":"text-danger",children:Te(Ze.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Te(Ze.outstandingBalance)})]})]})]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-12 mb-4",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Vendor Ledger"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("small",{className:"me-3",children:["Total Records: ",ve.length]}),a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Ft("vendor",C),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Le(ve,s).map((_e,st)=>{const wt=It(Number(_e.balance),_e.originalAmount),rr=_e.originalAmount>0?(_e.totalPayments/_e.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(s-1)*Ne+st+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:_e.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:_e.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Te(_e.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Bt(_e.debit)}`,children:Te(_e.totalPayments)}),a.jsx("td",{className:`text-end fw-bold ${Bt(_e.credit)}`,children:Te(_e.balance)}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${_e.balance>0?"text-danger":"text-success"}`,children:Te(_e.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${wt.class}`,children:wt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[rr,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[_e.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["",_e.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[_e.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),_e.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[_e.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",We(_e.createdAt)]}),_e.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",We(_e.firstPaymentDate)]}),_e.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",We(_e.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:_e.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>ht(_e,_e.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},_e.id)})})]})}),ze>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Vendor pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(_e=>Math.max(_e-1,1)),disabled:s===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const st=[],wt=[];st.push(1);for(let er=Math.max(2,s-2);er<=Math.min(ze-1,s+2);er++)st.push(er);ze>1&&st.push(ze);const rr=[...new Set(st)].sort((er,fr)=>er-fr);let Ot;for(let er of rr)Ot&&(er-Ot===2?wt.push(Ot+1):er-Ot!==1&&wt.push("...")),wt.push(er),Ot=er;return wt.map((er,fr)=>er==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`vendor-ellipsis-${fr}`):a.jsx("li",{className:`page-item ${s===er?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>i(er),title:`Go to page ${er}`,children:er})},`vendor-page-${er}`))})(),a.jsx("li",{className:`page-item ${s===ze?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(_e=>Math.min(_e+1,ze)),disabled:s===ze,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})}),a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Customer Ledger"}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Ft("customer",k),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Le(xe,o).map((_e,st)=>{const wt=It(_e.balance,_e.originalAmount),rr=_e.originalAmount>0?(_e.totalPayments/_e.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(o-1)*Ne+st+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:_e.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:_e.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Te(_e.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Bt(_e.debit)}`,children:Te(_e.balance)}),a.jsx("td",{className:`text-end fw-bold ${Bt(_e.credit)}`,children:Te(_e.totalPayments.toFixed(0))}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${_e.balance>0?"text-danger":"text-success"}`,children:Te(_e.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${wt.class}`,children:wt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[rr,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[_e.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["",_e.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[_e.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),_e.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[_e.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",We(_e.createdAt)]}),_e.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",We(_e.firstPaymentDate)]}),_e.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",We(_e.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:_e.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>ht(_e,_e.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},_e.id)})})]})}),ut>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Customer pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(_e=>Math.max(_e-1,1)),disabled:o===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const st=[],wt=[];st.push(1);for(let er=Math.max(2,o-2);er<=Math.min(ut-1,o+2);er++)st.push(er);ut>1&&st.push(ut);const rr=[...new Set(st)].sort((er,fr)=>er-fr);let Ot;for(let er of rr)Ot&&(er-Ot===2?wt.push(Ot+1):er-Ot!==1&&wt.push("...")),wt.push(er),Ot=er;return wt.map((er,fr)=>er==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`customer-ellipsis-${fr}`):a.jsx("li",{className:`page-item ${o===er?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>l(er),title:`Go to page ${er}`,children:er})},`customer-page-${er}`))})(),a.jsx("li",{className:`page-item ${o===ut?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(_e=>Math.min(_e+1,ut)),disabled:o===ut,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})})]}),W&&te&&se&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"ti ti-file-invoice me-2"}),"Payment Analysis - Invoice ",se.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close",onClick:()=>ee(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card ",children:[a.jsx("div",{className:"card-header ",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-clipboard-data me-2"}),"Invoice Summary & Payment Overview"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-primary",children:"Invoice Number"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-dark",children:se.docnumber})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-info",children:"Entity"}),a.jsx("br",{}),a.jsx("span",{className:"h6 text-dark",children:se.name})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-success",children:"Original Amount"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-success",children:Te(se.originalAmount)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:se.balance>0?"text-danger":"text-success",children:"Outstanding Balance"}),a.jsx("br",{}),a.jsx("span",{className:`h5 ${se.balance>0?"text-danger":"text-success"}`,children:Te(se.balance)})]})})]}),a.jsxs("div",{className:"row mt-3",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-info text-white rounded",children:[a.jsx("strong",{children:"Total Payments"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:Te(se.totalPayments)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-primary text-white rounded",children:[a.jsx("strong",{children:"Payment Count"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:se.paymentCount})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:`text-center p-2 text-white rounded bg-${It(se.balance,se.originalAmount).class}`,children:[a.jsx("strong",{children:"Status"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:It(se.balance,se.originalAmount).status})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-secondary text-white rounded",children:[a.jsx("strong",{children:"Invoice Age"}),a.jsx("br",{}),a.jsxs("span",{className:"h6",children:[Math.floor((new Date-new Date(se.createdAt))/(1e3*60*60*24))," days"]})]})})]})]})]})})}),te.length>0&&a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-dark",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-chart-bar me-2"}),"Payment Analytics & Summary"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-primary",children:"Payment Status Breakdown:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(te.reduce((_e,st)=>(_e[st.status]=(_e[st.status]||0)+1,_e),{})).map(([_e,st])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("span",{className:`badge bg-${_e==="cleared"?"success":_e==="pending"?"warning":_e==="bounced"?"danger":"secondary"}`,children:_e.toUpperCase()}),a.jsxs("span",{className:"ms-2",children:[st," transaction(s)"]})]},_e))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-success",children:"Payment Method Summary:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(te.reduce((_e,st)=>{const wt=st.paymentMethod||"Unknown";return _e[wt]=(_e[wt]||0)+(st.paymentAmount||0),_e},{})).map(([_e,st])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("i",{className:`${Ee(_e)} me-2 text-primary`}),a.jsx("span",{className:"text-capitalize",children:_e.replace("_"," ")}),a.jsx("span",{className:"ms-2 text-success",children:Te(st)})]},_e))})]})]})})]})})})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>ee(!1),children:[a.jsx("i",{className:"ti ti-x me-1"})," Close"]}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{const _e=te.map((fr,yr)=>[yr+1,se.docnumber,se.name,We(fr.paymentDate),fr.paymentDocNumber||"N/A",fr.paymentAmount||0,fr.paymentMethod||"N/A",fr.status||"N/A",fr.previousBalance||0,fr.newBalance||0,fr.description||"N/A",Ge(fr.createdAt||fr.paymentDate)]),wt=[["S.No","Invoice Number","Entity Name","Payment Date","Payment Doc Number","Payment Amount","Payment Method","Status","Balance Before","Balance After","Description","Created At"].join(","),..._e.map(fr=>fr.map(yr=>`"${yr}"`).join(","))].join(`
`),rr=new Blob([wt],{type:"text/csv;charset=utf-8;"}),Ot=document.createElement("a"),er=URL.createObjectURL(rr);Ot.setAttribute("href",er),Ot.setAttribute("download",`invoice_${se.docnumber}_payment_details_${new Date().toISOString().slice(0,10)}.csv`),Ot.style.visibility="hidden",document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot)},children:[a.jsx("i",{className:"ti ti-download me-1"})," Export to CSV"]})]})]})})}),z&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Download ",U==="vendor"?"Vendor":"Customer"," Payment Details"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>re(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"mb-3",children:a.jsx("strong",{children:B?`${U==="vendor"?"Vendor":"Customer"}: ${B}`:`All ${U==="vendor"?"Vendors":"Customers"}`})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:K,onChange:_e=>ue(_e.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:M,onChange:_e=>V(_e.target.value)})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>re(!1),children:"Cancel"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:Ye,children:[a.jsx("i",{className:"ti ti-download"})," Download Report"]})]})]})})})]})}function U5e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState({}),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState(""),[m,p]=w.useState([]),[v,g]=w.useState([]),[b,y]=w.useState(""),[C,N]=w.useState(""),[k,S]=w.useState([]),[D,E]=w.useState([]),[T,A]=w.useState(!1),[L,P]=w.useState(""),[O,Q]=w.useState([]),[z,re]=w.useState(""),[U,X]=w.useState(""),[B,Y]=w.useState("internal"),[K,ue]=w.useState(""),[M,V]=w.useState(""),[W,ee]=w.useState(""),[te,ne]=w.useState(""),[se,oe]=w.useState([]),[G,ce]=w.useState(null),[Z,ae]=w.useState(0),[je,de]=w.useState(""),[ie,be]=w.useState([]),[Ne,Fe]=w.useState([]),[Xe,ct]=w.useState(""),[xt,Re]=w.useState(""),[ht,At]=w.useState(""),[_t,Wt]=w.useState([]),[Ke,ge]=w.useState(1),[ve,xe]=w.useState(10),[Ie,Ze]=w.useState(0),[Ft,Qe]=w.useState(""),[Ye,Le]=w.useState([]),[ze,ut]=w.useState([]),[Te,We]=w.useState(""),[Ge,It]=w.useState(""),[Bt,Ee]=w.useState(""),[_e,st]=w.useState(""),wt=localStorage.getItem("selectedCompanyId"),rr=localStorage.getItem("financialYear"),Ot=async()=>{try{const dr=(await Oe.get("/api/material",{params:{companyId:wt,financialYear:rr}})).data.sort((or,$r)=>new Date($r.createdAt)-new Date(or.createdAt));t(dr),Ze(dr.length),ge(1)}catch(Ve){console.error("Failed to fetch materials:",Ve)}},er=async()=>{try{const Ve=await Oe.get("/api/stock/data",{params:{companyId:wt,financialYear:rr}});n(Ve.data),console.log("Stock data fetched:",Ve.data)}catch(Ve){console.error("Failed to fetch stock:",Ve)}},fr=(Ve,dr,or)=>{dr.includes(Ve)?or(dr.filter($r=>$r!==Ve)):or([...dr,Ve])},yr=Ve=>{Qe(Ve.target.value),ge(1)};w.useEffect(()=>{Ot(),er(),Oe.get("/api/vendors",{params:{companyId:wt,financialYear:rr}}).then(Ve=>S(Ve.data)),Oe.get("/api/tax",{params:{companyId:wt,financialYear:rr}}).then(Ve=>oe(Ve.data)),Oe.get("/api/locations",{params:{companyId:wt,financialYear:rr}}).then(Ve=>Wt(Ve.data)),Oe.get("/api/general-conditions",{params:{companyId:wt,financialYear:rr}}).then(Ve=>{const dr=Ve.data.filter(or=>!or.isDeleted).map(or=>({_id:or._id,name:or.name,description:or.description}));Le(dr)}),Oe.get("/api/processes",{params:{companyId:wt,financialYear:rr}}).then(Ve=>{const dr=Ve.data.filter(or=>!or.isDeleted).map(or=>({_id:or._id,processId:or.processId,processDescription:or.processDescription}));ut(dr)})},[]);const ur=e.map(Ve=>{const or=r.find(br=>br.materialId===Ve.materialId)?.quantityAvailable||0,$r=Ve.safetyStock||0,gn=Math.abs($r-or),vt=Math.abs($r-or);return{...Ve,inventoryStock:or,reorderPoint:gn,reorderQuantity:vt}}).filter(Ve=>{if(!Ft)return!0;const dr=Ft.toLowerCase();return Ve.materialId?.toLowerCase().includes(dr)||Ve.description?.toLowerCase().includes(dr)||Ve.minstock?.toString().includes(dr)||Ve.maxstock?.toString().includes(dr)||Ve.safetyStock?.toString().includes(dr)||Ve.inventoryStock?.toString().includes(dr)||Ve.reorderQuantity?.toString().includes(dr)}),me=Math.ceil(ur.length/ve),Be=(Ke-1)*ve,Ae=Be+ve,ke=ur.slice(Be,Ae),Me=Ve=>{Ve>=1&&Ve<=me&&ge(Ve)},$e=()=>{const Ve=[];if(me<=5)for(let or=1;or<=me;or++)Ve.push(or);else if(Ke<=3)for(let or=1;or<=5;or++)Ve.push(or);else if(Ke>=me-2)for(let or=me-5+1;or<=me;or++)Ve.push(or);else for(let or=Ke-2;or<=Ke+2;or++)Ve.push(or);return Ve},pt=async()=>{if(u==="PO"){if(!D){alert("Please select a vendor for Purchase Order");return}if(!G){alert("Please select tax for Purchase Order");return}}console.log("modalMaterial",c);const Ve=parseFloat(c.unitPrice)||0,dr=parseFloat(c.reorderQuantity)||0;if(u==="PE"){const or=m.find(vt=>vt._id===M),$r={materialId:c.materialId,description:c.description,qty:dr,baseUnit:c.baseUnit,orderUnit:c.orderUnit},gn={indentIdType:B,categoryId:or._id,categoryName:or.name||or.categoryName,location:W,buyerGroup:te,companyId:wt,financialYear:rr,deliveryDate:b,documentDate:new Date().toISOString().split("T")[0],items:[$r]};if(B==="external"){if(!K.trim()){alert("Please enter External Indent ID");return}gn.indentId=K.trim()}try{const vt=await Oe.post("/api/indent/create",gn);alert(`Indent created with ID: ${vt.data.indentId}`),jt()}catch(vt){console.error("Indent creation failed",vt),alert("Failed to create indent")}}else if(u==="PO"){const or=v.find(ka=>ka._id===M._id),$r=dr*Ve;if(isNaN($r)){alert("Please enter valid quantity and unit price");return}const gn=parseFloat(G?.cgst)||0,vt=parseFloat(G?.sgst)||0,br=parseFloat(G?.igst)||0,hr=$r*gn/100,qr=$r*vt/100,Qr=$r*br/100,da=hr+qr+Qr,Fn=parseFloat(Z)||0,Ia=$r+da-Fn,Ti={materialId:c.materialId,description:c.description,quantity:dr,price:Ve,baseUnit:c.baseUnit,orderUnit:c.orderUnit},ya={companyId:wt,financialYear:rr,categoryId:or._id,category:or.name||or.categoryName,date:new Date().toISOString().split("T")[0],vendor:D,deliveryLocation:z||"",deliveryAddress:U||"",items:[Ti],notes:C||"",remarks:Xe||"",preparedby:ht||"",approvedby:xt||"",taxName:G?.taxName||"",cgst:hr,sgst:qr,igst:Qr,taxDiscount:Fn,finalTotal:Ia,processes:Ne||[],generalConditions:ie||[],poGenerationType:B,companyId:wt,financialYear:rr};if(B==="external"){if(!K.trim()){alert("Please enter External PO ID");return}ya.poNumber=K.trim()}console.log("PO Payload:",ya);try{const ka=await Oe.post("/api/purchase-orders",ya);alert(`Purchase Order created with ID: ${ka.data.poNumber}`),jt()}catch(ka){console.error("Purchase Order creation failed",ka),alert(`Failed to create Purchase Order: ${ka.response?.data?.error||ka.message}`)}}},jt=()=>{l(!1),d(null),V(""),ee(""),ne(""),y(""),ue(""),E(""),ce(null),N(""),de(""),ct(""),At(""),Re(""),re(""),X(""),ae(0)},ot=(Ve,dr)=>{i(or=>{const $r={...or};return $r[`${Ve}_PE`]=!1,$r[`${Ve}_PO`]=!1,$r[`${Ve}_${dr}`]=!0,$r})};w.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:wt,financialYear:rr}}).then(Ve=>p(Ve.data)),Oe.get("/api/po-categories",{params:{companyId:wt,financialYear:rr}}).then(Ve=>g(Ve.data))},[]);const bt=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:mr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:L,onChange:Ve=>yt(Ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Yt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:O.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:O.map((Ve,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ve.vnNo})}),a.jsx("td",{children:Ve.name1}),a.jsx("td",{children:Ve.email}),a.jsx("td",{children:Ve.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>sr(Ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:L?`No vendors found matching "${L}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:mr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),yt=Ve=>{if(P(Ve),Ve.trim()){const dr=k.filter(or=>or.vendorName.toLowerCase().includes(Ve.toLowerCase())||or.vendorCode.toLowerCase().includes(Ve.toLowerCase()));Q(dr)}else Q([])},Yt=()=>{Q(k)},sr=Ve=>{E(Ve.name1||Ve.vendorName),A(!1),P(""),Q([])},mr=()=>{A(!1),P(""),Q([])};return a.jsxs("div",{className:"content",children:[a.jsx("style",{children:`
.checkbox-radio {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background-color: white;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
}

.checkbox-radio:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.checkbox-radio:checked::after {
    content: '';
    position: absolute;
    top: -2px;
    left: 2px;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.checkbox-radio:hover {
    border-color: #007bff;
}

.checkbox-radio:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.pagination-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    flex-wrap: wrap;
    gap: 10px;
}

.pagination-info {
    color: #6c757d;
    font-size: 14px;
}

.pagination-controls .form-select {
    width: auto;
    min-width: 80px;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-link {
    color: #007bff;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.75rem;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
`}),a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Requirements Planning"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Requirements Planning"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:Ft,onChange:yr})]})}),a.jsx("div",{})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered text-wrap",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"Safety Stock"}),a.jsx("th",{children:"INV Stock"}),a.jsx("th",{children:"ROP"}),a.jsx("th",{className:"wrap-header",children:"PE"}),a.jsx("th",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:"PO"}),a.jsx("th",{children:"Action"})]})}),a.jsxs("tbody",{children:[ke.map((Ve,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:Be+dr+1}),a.jsx("td",{children:Ve.materialId||"-"}),a.jsx("td",{children:Ve.description||"-"}),a.jsx("td",{children:Ve.minstock||0}),a.jsx("td",{children:Ve.maxstock||0}),a.jsx("td",{children:Ve.safetyStock||0}),a.jsx("td",{children:Ve.inventoryStock}),a.jsx("td",{style:{color:Ve.inventoryStock<Ve.safetyStock?Ve.inventoryStock<Ve.minstock?"red":"orange":"green",fontWeight:Ve.reorderQuantity<Ve.safetyStock?"bold":"normal"},children:Ve.reorderQuantity}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${Ve.materialId}`,value:"PE",className:"checkbox-radio",checked:!!s[`${Ve.materialId}_PE`],onChange:()=>ot(Ve.materialId,"PE")})}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${Ve.materialId}`,value:"PO",className:"checkbox-radio",checked:!!s[`${Ve.materialId}_PO`],onChange:()=>ot(Ve.materialId,"PO")})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{const or=s[`${Ve.materialId}_PE`],$r=s[`${Ve.materialId}_PO`];if(!or&&!$r){alert("Please select PE or PO before creating.");return}h(or?"PE":"PO"),d(Ve),l(!0)},children:"Create"})})]},Ve._id||dr)),ke.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"11",style:{textAlign:"center"},children:Ft?"No materials found matching your search criteria":"No materials found."})})]})]})})})]}),me>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${Ke===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ve=>{Ve.preventDefault(),Ke>1&&Me(Ke-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),$e().map(Ve=>a.jsx("li",{className:`page-item ${Ke===Ve?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:dr=>{dr.preventDefault(),Me(Ve)},children:Ve})},Ve)),a.jsx("li",{className:`page-item ${Ke===me?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ve=>{Ve.preventDefault(),Ke<me&&Me(Ke+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),o&&c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"," for ",c.description]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"ID Type"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:B,onChange:Ve=>Y(Ve.target.value),children:[a.jsx("option",{value:"internal",children:"Internal"}),a.jsx("option",{value:"external",children:"External"})]})})]}),B==="external"&&a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{children:["External ",u," ID"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control",value:K,onChange:Ve=>ue(Ve.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{children:"Buyer Group *"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:te,onChange:Ve=>ne(Ve.target.value),placeholder:"Enter buyer group",required:!0})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Delivery Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control",value:b,onChange:Ve=>y(Ve.target.value)})})]})]})]}),u==="PE"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-success mb-3",children:"Purchase Enquiry Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"PE Category"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:M,onChange:Ve=>V(Ve.target.value),children:[a.jsx("option",{value:"",children:"Select"}),m.map(Ve=>a.jsx("option",{value:Ve._id,children:Ve.name||Ve.categoryName},Ve._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:W,onChange:Ve=>ee(Ve.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),_t.map(Ve=>a.jsx("option",{value:Ve.name||Ve.locationName||Ve._id,children:Ve.name||Ve.locationName||Ve._id},Ve._id||Ve.id||Ve.name))]})})]})]})]})}),u==="PO"&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-info mb-3",children:"Purchase Order Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:M?._id||"",onChange:Ve=>{const dr=v.find(or=>or._id===Ve.target.value);V(dr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),v.map(Ve=>a.jsx("option",{value:Ve._id,children:Ve.categoryName||Ve.name},Ve._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:Bt,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:_e,onChange:Ve=>st(Ve.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Unit Price *"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:c?.unitPrice||0,onChange:Ve=>{const dr=parseFloat(Ve.target.value)||0;d(or=>({...or,unitPrice:dr}))},placeholder:"Enter unit price",required:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor *"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:D,onChange:Ve=>E(Ve.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>A(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Tax *"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:G?._id||"",onChange:Ve=>{const dr=se.find(or=>or._id===Ve.target.value);ce(dr)},children:[a.jsx("option",{value:"",children:"Select Tax"}),se.map(Ve=>a.jsx("option",{value:Ve._id,children:Ve.taxName},Ve._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Discount"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",className:"form-control",value:Z,onChange:Ve=>ae(parseFloat(Ve.target.value)||0),placeholder:"Enter discount amount"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Te,onChange:Ve=>We(Ve.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Conditions & Processes"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select General Conditions"}),Ye.map(Ve=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:ie.includes(Ve._id),onChange:()=>fr(Ve._id,ie,be)}),a.jsx("label",{children:Ve.name})]},Ve._id))]}),a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select Processes"}),ze.map(Ve=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:Ne.includes(Ve._id),onChange:()=>fr(Ve._id,Ne,Fe)}),a.jsx("label",{children:Ve.processDescription})]},Ve._id))]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Delivery Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:z,onChange:Ve=>re(Ve.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),_t.map(Ve=>a.jsx("option",{value:Ve.name||Ve.locationName||Ve._id,children:Ve.name||Ve.locationName||Ve._id},Ve._id||Ve.id||Ve.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Delivery Address"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control",rows:"2",value:U,onChange:Ve=>X(Ve.target.value),placeholder:"Enter delivery address"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:je,onChange:Ve=>de(Ve.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:te,onChange:Ve=>ne(Ve.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Authorization"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:ht,onChange:Ve=>At(Ve.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:xt,onChange:Ve=>Re(Ve.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Additional Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-4 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Payment:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Ge,onChange:Ve=>It(Ve.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:Xe,onChange:Ve=>ct(Ve.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control",rows:"2",value:C,onChange:Ve=>N(Ve.target.value),placeholder:"Enter notes"})})]})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:pt,children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"]})]})]})})})]}),T&&a.jsx(bt,{})]})}function $5e(){const[e,t]=w.useState({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),s=localStorage.getItem("selectedCompanyId"),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,u]=w.useState(!1),[h,m]=w.useState({type:"",text:""}),[p,v]=w.useState("");w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/invoiceform",{params:{companyId:r,financialYear:n}}),T=await Oe.get("/api/billingform",{params:{companyId:r,financialYear:n}});o(E.data||[]),c(T.data||[])}catch(E){console.error("Error fetching invoices",E)}},b=()=>(e.type==="vendor"?i:l).filter(T=>{const A=e.type==="vendor"?T.vendor||"":T.salesOrderId?.customer||"",L=T.docnumber||"",P=A.toLowerCase().includes(p.toLowerCase())||L.toLowerCase().includes(p.toLowerCase()),O=(T.balance||0)>0;return P&&O}),y=E=>{t(T=>({...T,recordId:E._id||E.id,selectedRecord:E,docnumber:E.docnumber||""}))},C=E=>{const{name:T,value:A}=E.target;T==="type"?(t(L=>({...L,[T]:A,recordId:"",selectedRecord:null,docnumber:""})),v("")):t(L=>({...L,[T]:A}))},N=()=>{if(!e.selectedRecord||!e.paymentAmount)return null;const E=e.selectedRecord.balance||0,T=parseFloat(e.paymentAmount);return E.toFixed(2)-T.toFixed(2)},k=async E=>{E.preventDefault(),u(!0),m({type:"",text:""});try{if(!e.selectedRecord)throw new Error("Please select a record to update");const T=parseFloat(e.paymentAmount),A=e.selectedRecord.balance||0,L=A-T,P={balance:L,lastPaymentAmount:T,companyId:s,financialYear:n,lastPaymentDocNumber:e.docnumber||"",lastPaymentMethod:e.paymentMethod,paymentDescription:e.description||`Payment via ${e.paymentMethod}`},O=e.type==="vendor"?`/api/invoiceform/${e.recordId}`:`/api/billingform/${e.recordId}`;await Oe.put(O,P);const Q=e.type==="vendor"?e.selectedRecord.vendor||"Unknown Vendor":e.selectedRecord.salesOrderId?.customer||e.selectedRecord.customer||"Unknown Customer",z={recordType:e.type,recordId:e.recordId,docnumber:e.docnumber,entityName:Q,paymentAmount:T,companyId:s,financialYear:n,previousBalance:A,newBalance:L,paymentMethod:e.paymentMethod,description:e.description,paymentDate:new Date().toISOString()};console.log("Payment History Payload:",z);try{const re=await Oe.post("/api/payment",z);console.log("Payment history saved successfully:",re.data)}catch(re){console.error("Payment history save failed:",re),console.error("Error details:",re.response?.data),m({type:"warning",text:`Payment updated successfully, but payment history could not be saved. Error: ${re.response?.data?.message||re.message}`})}h.text||m({type:"success",text:`Payment of ${T} recorded successfully for ${Q}. New balance: ${L.toFixed(2)}`}),await g(),t({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),v("")}catch(T){console.error("Error recording payment",T),m({type:"error",text:T.response?.data?.message||T.message||"Failed to record payment. Please try again."})}finally{u(!1)}},S=b(),D=N();return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Record Payment"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payment"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-white",children:a.jsx("h5",{className:"mb-0",children:"Update Balance with Payment"})}),a.jsxs("div",{className:"card-body",children:[h.text&&a.jsxs("div",{className:`alert alert-${h.type==="success"?"success":"danger"} alert-dismissible`,children:[h.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>m({type:"",text:""})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Type *"}),a.jsxs("select",{className:"form-select",name:"type",value:e.type,onChange:C,children:[a.jsx("option",{value:"vendor",children:"Vendor Payment"}),a.jsx("option",{value:"customer",children:"Customer Payment"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Search Records"}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${e.type} name or document number...`,value:p,onChange:E=>v(E.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Select Record to Update *"}),a.jsx("div",{className:"border rounded",style:{maxHeight:"300px",overflowY:"auto"},children:S.length===0?a.jsx("div",{className:"p-3 text-muted text-center",children:"No records found"}):S.map(E=>{const T=e.type==="vendor"?E.vendor:E?.customer,A=e.recordId===(E._id||E.id);return a.jsx("div",{className:`p-3 border-bottom cursor-pointer ${A?"bg-primary text-white":"bg-light"}`,onClick:()=>y(E),style:{cursor:"pointer"},children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("strong",{children:T||"Unknown"}),a.jsx("br",{}),a.jsxs("small",{children:["Doc: ",E.docnumber||"N/A"]})]}),a.jsxs("div",{className:"text-end",children:[a.jsxs("strong",{children:["",(E.balance||0).toFixed(2)]}),a.jsx("br",{}),a.jsx("small",{children:"Balance"})]})]})},E._id||E.id)})})]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("form",{onSubmit:k,children:[e.selectedRecord&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("h6",{children:"Selected Record:"}),a.jsx("p",{className:"mb-1",children:a.jsxs("strong",{children:[e.type==="vendor"?e.selectedRecord.vendor:e.selectedRecord.customer,console.log(e.selectedRecord.customer)]})}),a.jsxs("p",{className:"mb-1",children:["Document: ",e.selectedRecord.docnumber]}),a.jsxs("p",{className:"mb-0",children:["Current Balance: ",a.jsxs("strong",{children:["",(e.selectedRecord.balance||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"paymentAmount",className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-currency-rupee"})}),a.jsx("input",{type:"number",id:"paymentAmount",className:`form-control ${parseFloat(e?.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)?"is-invalid":""}`,name:"paymentAmount",value:e.paymentAmount,onChange:C,placeholder:"0.00",min:"0",step:"0.01",required:!0,max:e?.selectedRecord?.balance,disabled:!e.selectedRecord}),parseFloat(e.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)&&a.jsxs("div",{className:"invalid-feedback",children:["Amount cannot exceed current balance of ",(e?.selectedRecord?.balance||0).toFixed(2)]})]}),D!==null&&a.jsxs("small",{className:"text-muted mt-1 d-block",children:["New balance will be: ",a.jsxs("strong",{children:["",D.toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:e.paymentMethod,onChange:C,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:e.description,onChange:C,rows:"3",placeholder:"Payment description or notes..."})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!e.selectedRecord||!e.paymentAmount,children:d?"Updating...":"Update Balance"})]})]})})]})]})]})})})]})}function V5e(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),u=()=>{let D={};const E=/^\d{6}$/;return D.categoryName=e.categoryName?"":"Required",D.rangeFrom=e.rangeFrom?E.test(e.rangeFrom)?"":"Must be 6 digits":"Required",D.rangeTo=e.rangeTo?E.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(D),Object.values(D).every(T=>T==="")},h=D=>{t({...e,[D.target.name]:D.target.value})},m=async D=>{if(D.preventDefault(),!!u())try{s?(await Oe.put(`/api/purchase-contract-categories/${s}`,e),alert("Purchase contract category updated successfully!")):(await Oe.post("/api/purchase-contract-categories",e),alert("Purchase contract category added successfully!")),p(),g()}catch(E){console.error("Error saving purchase contract category:",E),alert("Error saving purchase contract category. Please try again.")}},p=async()=>{try{const D=await Oe.get("/api/purchase-contract-categories",{params:{companyId:c,financialYear:d}});n(D.data)}catch(D){console.error("Error fetching purchase contract categories:",D)}},v=D=>{t(D),i(D._id),l({})},g=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{p()},[]);const[b,y]=w.useState(!1),C=()=>y(!0),N=()=>y(!1),[k,S]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-1",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"",children:"Purchase Contract Categories"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract Categories"})]})})]})}),a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[s?"Edit":"Create"," Purchase Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{N(),g()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:m,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:h,className:`form-control ${o.categoryName?"is-invalid":""}`,placeholder:"Enter category name (e.g., Procurement Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},className:`form-control ${o.rangeFrom?"is-invalid":""}`,placeholder:"Enter start range (6 digits)",min:"100000",maxLength:6,max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:`form-control ${o.rangeTo?"is-invalid":""}`,value:e.rangeTo,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-end",children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((D,E)=>a.jsxs("tr",{children:[a.jsx("td",{children:E+1}),a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeFrom?.toLocaleString()}),a.jsx("td",{children:D.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(D),C()},title:"Edit Category",children:"Edit"})})})]},D._id))})]})})})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qW=function(e,t){return(qW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])})(e,t)};function Fd(e,t){function r(){this.constructor=e}qW(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Ir(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(d){try{c(n.next(d))}catch(u){i(u)}}function l(d){try{c(n.throw(d))}catch(u){i(u)}}function c(d){d.done?s(d.value):new r(function(u){u(d.value)}).then(o,l)}c((n=n.apply(e,[])).next())})}function Pr(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&u[0]?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(h){u=[6,h],n=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}var q5e=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,r){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+r+"."),this.platformName=t,this.platform=r},e.prototype.registerFlag=function(t,r,n){if(this.flagRegistry[t]={evaluationFn:r,setHook:n},this.urlFlags[t]!=null){var s=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+s+"."),this.set(t,s)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var r,n,s=(r=this.global.location.search,n={},r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return z5e(n,o[0],o[1]),o.join("=")}),n);"tfjsflags"in s&&s.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),l=o[0],c=o[1];t.urlFlags[l]=function(d,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+d+".")}(l,c)})}},e}();function z5e(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function $t(){return zW}var zW=null,Y2=new Map,FD=new Map;function HW(e,t){var r=GW(e,t);return Y2.get(r)}function H5e(e){return FD.get(e)}function V8(e){for(var t=Y2.entries(),r=[];;){var n=t.next(),s=n.done,i=n.value;if(s)break;var o=i[0],l=i[1];o.split("_")[0]===e&&r.push(l)}return r}function WW(e){var t=e.kernelName,r=e.backendName,n=GW(t,r);if(Y2.has(n))throw new Error("The kernel '"+t+"' for backend '"+r+"' is already registered");Y2.set(n,e)}function W5e(e){var t=e.kernelName;FD.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),FD.set(t,e)}function GW(e,t){return t+"_"+e}function LD(e,t,r){return Math.max(e,Math.min(t,r))}function YW(e){return e%2==0?e:e+1}function G5e(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function qe(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ca(e,t,r){r===void 0&&(r=""),qe(Ci(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})}function ug(e){qe(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Fv(e,t,r){if(t===void 0&&(t=[]),r===void 0&&(r=!1),t==null&&(t=[]),Array.isArray(e)||Fu(e)&&!r)for(var n=0;n<e.length;++n)Fv(e[n],t,r);else t.push(e);return t}function Rr(e){if(e.length===0)return 1;for(var t=e[0],r=1;r<e.length;r++)t*=e[r];return t}function Ci(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Bs(e){return e%1==0}function Y5e(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function BD(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function dv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function q8(e,t,r){return t===void 0&&(t=function(n){return 0}),new Promise(function(n,s){var i=0,o=function(){if(e())n();else{i++;var l=t(i);r!=null&&i>=r?s():setTimeout(o,l)}};o()})}function K5e(e,t){for(var r=1,n=-1,s=0;s<e.length;++s)if(e[s]>=0)r*=e[s];else if(e[s]===-1){if(n!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+n+" and dim "+s);n=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(n===-1){if(t>0&&t!==r)throw Error("Size("+t+") must match the product of shape "+e);return e}if(r===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+r);var i=e.slice();return i[n]=t/r,i}function hi(e,t){var r=t.length;return qe((e=e==null?t.map(function(n,s){return s}):[].concat(e)).every(function(n){return n>=-r&&n<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e}),qe(e.every(function(n){return Bs(n)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(n){return n<0?r+n:n})}function $p(e,t){for(var r=[],n=[],s=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||s?null:hi(t,e).sort(),o=0,l=0;l<e.length;++l){if(i!=null){if(i[o]===l&&e[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+e[l]+"' is not 1");(i[o]==null||i[o]>l)&&e[l]===1&&(r.push(e[l]),n.push(l)),i[o]<=l&&o++}e[l]!==1&&(r.push(e[l]),n.push(l))}return{newShape:r,keptDims:n}}function _y(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);r=new Uint8Array(t)}return r}function K2(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);r=new Array(t)}return r}function X5e(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+t+" being uploaded contains "+n+".")}}function Q5e(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function J5e(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Fu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function KW(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function Z5e(e){if(e==null)return 0;var t=0;return e.forEach(function(r){return t+=r.length}),t}function mT(e){return typeof e=="string"||e instanceof String}function eDe(e){return typeof e=="boolean"}function tDe(e){return typeof e=="number"}function u1(e){return Array.isArray(e)?u1(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":tDe(e)?"float32":mT(e)?"string":eDe(e)?"bool":"float32"}function UD(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $D(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}function Lu(e){var t=e.length;if(t<2)return[];var r=new Array(t-1);r[t-2]=e[t-1];for(var n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}function XW(e,t,r){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Fv(e)),r&&X5e(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}throw new Error("Unknown data type "+t)}function z8(e,t){if(e.length===0)return t[0];var r=e.reduce(function(n,s){return n*s});if(r===0)return[];if(r!==t.length)throw new Error("["+e+"] does not match the input size.");return function n(s,i,o){var l=new Array;if(i.length===1)for(var c=i[0],d=0;d<c;d++)l[d]=o[s+d];else{c=i[0];var u=i.slice(1),h=u.reduce(function(m,p){return m*p});for(d=0;d<c;d++)l[d]=n(s+d*h,u,o)}return l}(0,e,t)}function QW(e,t){for(var r=h1(e,t),n=0;n<r.length;n++)r[n]=1;return r}function h1(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function wu(){return $t().platform.now()}function JW(e){e.forEach(function(t){qe(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function rDe(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",$t().platform.encode(e,t)}function X2(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",$t().platform.decode(e,t)}function H8(e,t,r){if(t===0)return 0;if(t===1)return e[0];for(var n=e[e.length-1],s=0;s<e.length-1;++s)n+=r[s]*e[s];return n}function nDe(e,t,r){if(t===0)return[];if(t===1)return[e];for(var n=new Array(t),s=0;s<n.length-1;++s)n[s]=Math.floor(e/r[s]),e-=n[s]*r[s];return n[n.length-1]=e,n}var aDe=function(){function e(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new sDe)}return e.prototype.profileKernel=function(t,r,n){var s,i=this,o=this.backendTimer.time(function(){s=n()});return s.forEach(function(l){l.data().then(function(c){(function(d,u,h){if(u!=="float32")return!1;for(var m=0;m<d.length;m++){var p=d[m];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+h+"'"),!0}})(c,l.dtype,t),o.then(function(d){var u="";d.getExtraProfileInfo!=null&&(u=d.getExtraProfileInfo()),i.logger.logKernelProfile(t,l,c,d.kernelMs,r,u)})})}),s},e}(),sDe=function(){function e(){}return e.prototype.logKernelProfile=function(t,r,n,s,i,o){var l=typeof s=="number"?dv(s+"ms",9):s.error,c=dv(t,25),d=r.rank,u=r.size,h=dv(r.shape.toString(),14),m="";for(var p in i){var v=i[p].shape||r.shape,g=v.length;m+=p+": "+g+"D "+(g>0?v:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+h+"	%c"+u+"	%c"+m+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),W8=20,gb=3,wE=7;function iDe(e,t,r,n){var s=Lu(t),i=function(d,u,h,m){var p=Rr(u),v=m[m.length-1],g=new Array(v).fill(0),b=u.length,y=h==="complex64"?yb(d):d;if(b>1)for(var C=0;C<p/v;C++)for(var N=C*v,k=0;k<v;k++)g[k]=Math.max(g[k],bb(y[N+k],0,h).length);return g}(e,t,r,s),o=t.length,l=function d(u,h,m,p,v,g){g===void 0&&(g=!0);var b=m==="complex64"?2:1,y=h[0],C=h.length;if(C===0)return m==="complex64"?[bb(yb(u)[0],0,m)]:m==="bool"?[ZW(u[0])]:[u[0].toString()];if(C===1){if(y>W8){var N=gb*b,k=Array.from(u.slice(0,N)),S=Array.from(u.slice((y-gb)*b,y*b));return m==="complex64"&&(k=yb(k),S=yb(S)),["["+k.map(function(re,U){return bb(re,v[U],m)}).join(", ")+", ..., "+S.map(function(re,U){return bb(re,v[y-gb+U],m)}).join(", ")+"]"]}return["["+(m==="complex64"?yb(u):Array.from(u)).map(function(re,U){return bb(re,v[U],m)}).join(", ")+"]"]}var D=h.slice(1),E=p.slice(1),T=p[0]*b,A=[];if(y>W8){for(var L=0;L<gb;L++){var P=(O=L*T)+T;A.push.apply(A,d(u.slice(O,P),D,m,E,v,!1))}for(A.push("..."),L=y-gb;L<y;L++)P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}else for(L=0;L<y;L++){var O;P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}var Q=C===2?",":"";for(A[0]="["+A[0]+Q,L=1;L<A.length-1;L++)A[L]=" "+A[L]+Q;var z=`,
`;for(L=2;L<C;L++)z+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(g?"":z),A}(e,t,r,s,i),c=["Tensor"];return n&&(c.push("  dtype: "+r),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(l.map(function(d){return"    "+d}).join(`
`)),c.join(`
`)}function bb(e,t,r){return dv(Array.isArray(e)?parseFloat(e[0].toFixed(wE))+" + "+parseFloat(e[1].toFixed(wE))+"j":mT(e)?"'"+e+"'":r==="bool"?ZW(e):parseFloat(e.toFixed(wE)).toString(),t)}function ZW(e){return e===0?"false":"true"}function yb(e){for(var t=[],r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var Ey=function(){function e(t,r,n){var s=this;if(this.dtype=r,this.shape=t.slice(),this.size=Rr(t),n!=null){var i=n.length;qe(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+s.size+"'."})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||K2(r,this.size),this.strides=Lu(t)}return e.prototype.set=function(t){for(var r=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];n.length===0&&(n=[0]),qe(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+r.rank+")"});var i=this.locToIndex(n);this.values[i]=t},e.prototype.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.length===0&&(t=[0]);for(var n=0,s=0,i=t;s<i.length;s++){var o=i[s];if(o<0||o>=this.shape[n]){var l="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(l)}n++}for(var c=t[t.length-1],d=0;d<t.length-1;++d)c+=this.strides[d]*t[d];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var r=t[t.length-1],n=0;n<t.length-1;++n)r+=this.strides[n]*t[n];return r},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var r=new Array(this.shape.length),n=0;n<r.length-1;++n)r[n]=Math.floor(t/this.strides[n]),t-=r[n]*this.strides[n];return r[r.length-1]=t,r},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Cu().makeTensor(this.values,this.shape,this.dtype)},e}(),Cu=null,Mt=null,eG=null,os=function(){function e(t,r,n,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=Rr(t),this.strides=Lu(t),this.dataId=n,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),qe(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,r){return this.throwIfDisposed(),this.reshape([t,r])},e.prototype.as3D=function(t,r,n){return this.throwIfDisposed(),this.reshape([t,r,n])},e.prototype.as4D=function(t,r,n,s){return this.throwIfDisposed(),this.reshape([t,r,n,s])},e.prototype.as5D=function(t,r,n,s,i){return this.throwIfDisposed(),this.reshape([t,r,n,s,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),Mt.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,Mt.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Mt.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,z8(this.shape,t)]}})})},e.prototype.arraySync=function(){return z8(this.shape,this.dataSync())},e.prototype.data=function(){return Ir(this,void 0,void 0,function(){var t,r;return Pr(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=Cu().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:r=n.sent();try{return[2,r.map(function(s){return X2(s)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Cu().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(r){return X2(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Cu().read(this.dataId)];case 1:return t=r.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Cu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),Mt.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),Mt.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),Mt.expandDims(this,t)},e.prototype.cumsum=function(t,r,n){return t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1),Mt.cumsum(this,t,r,n)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),Mt.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Mt.clone(this)},e.prototype.oneHot=function(t,r,n){return this.throwIfDisposed(),Mt.oneHot(this,t,r,n)},e.prototype.toString=function(t){return t===void 0&&(t=!1),iDe(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),Mt.tile(this,t)},e.prototype.gather=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Mt.gather(this,t,r)},e.prototype.matMul=function(t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!1),this.throwIfDisposed(),Mt.matMul(this,t,r,n)},e.prototype.dot=function(t){return this.throwIfDisposed(),Mt.dot(this,t)},e.prototype.norm=function(t,r,n){return t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Mt.norm(this,t,r,n)},e.prototype.slice=function(t,r){return this.throwIfDisposed(),Mt.slice(this,t,r)},e.prototype.reverse=function(t){return this.throwIfDisposed(),Mt.reverse(this,t)},e.prototype.concat=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Mt.concat([this].concat(t),r)},e.prototype.split=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Mt.split(this,t,r)},e.prototype.stack=function(t,r){return r===void 0&&(r=0),Mt.stack([this,t],r)},e.prototype.unstack=function(t){return t===void 0&&(t=0),Mt.unstack(this,t)},e.prototype.pad=function(t,r){return r===void 0&&(r=0),Mt.pad(this,t,r)},e.prototype.batchNormalization=function(t,r,n,s,i){return n===void 0&&(n=.001),eG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,r,i,s,n)},e.prototype.batchNorm=function(t,r,n,s,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Mt.batchNorm(this,t,r,n,s,i)},e.prototype.all=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.all(this,t,r)},e.prototype.any=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.any(this,t,r)},e.prototype.logSumExp=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.logSumExp(this,t,r)},e.prototype.sum=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.sum(this,t,r)},e.prototype.prod=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.prod(this,t,r)},e.prototype.mean=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.mean(this,t,r)},e.prototype.min=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.min(this,t,r)},e.prototype.max=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Mt.max(this,t,r)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Mt.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Mt.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Mt.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),Mt.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),Mt.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),Mt.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),Mt.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),Mt.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),Mt.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),Mt.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),Mt.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),Mt.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),Mt.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),Mt.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),Mt.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),Mt.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),Mt.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Mt.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),Mt.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Mt.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),Mt.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),Mt.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Mt.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),Mt.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),Mt.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Mt.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),Mt.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),Mt.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),Mt.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),Mt.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),Mt.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Mt.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),Mt.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Mt.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Mt.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Mt.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Mt.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),Mt.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Mt.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),Mt.logicalXor(this,t)},e.prototype.where=function(t,r){return this.throwIfDisposed(),Mt.where(t,this,r)},e.prototype.neg=function(){return this.throwIfDisposed(),Mt.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Mt.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Mt.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Mt.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Mt.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Mt.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Mt.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Mt.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Mt.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Mt.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Mt.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Mt.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Mt.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Mt.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Mt.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Mt.abs(this)},e.prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Mt.clipByValue(this,t,r)},e.prototype.relu=function(){return this.throwIfDisposed(),Mt.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Mt.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Mt.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Mt.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Mt.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),Mt.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Mt.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Mt.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Mt.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Mt.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Mt.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Mt.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Mt.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Mt.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Mt.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Mt.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Mt.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Mt.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Mt.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Mt.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Mt.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Mt.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Mt.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Mt.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Mt.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Mt.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Mt.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Mt.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Mt.image.resizeBilinear(this,t,r)},e.prototype.resizeNearestNeighbor=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Mt.image.resizeNearestNeighbor(this,t,r)},e.prototype.conv1d=function(t,r,n,s,i,o){return s===void 0&&(s="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Mt.conv1d(this,t,r,n,s,i,o)},e.prototype.conv2d=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Mt.conv2d(this,t,r,n,s,i,o)},e.prototype.conv2dTranspose=function(t,r,n,s,i){return this.throwIfDisposed(),Mt.conv2dTranspose(this,t,r,n,s,i)},e.prototype.depthwiseConv2D=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Mt.depthwiseConv2d(this,t,r,n,s,i,o)},e.prototype.separableConv2d=function(t,r,n,s,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),Mt.separableConv2d(this,t,r,n,s,i,o)},e.prototype.avgPool=function(t,r,n,s){return this.throwIfDisposed(),Mt.avgPool(this,t,r,n,s)},e.prototype.maxPool=function(t,r,n,s){return this.throwIfDisposed(),Mt.maxPool(this,t,r,n,s)},e.prototype.localResponseNormalization=function(t,r,n,s){return t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5),Mt.localResponseNormalization(this,t,r,n,s)},e.prototype.pool=function(t,r,n,s,i){return this.throwIfDisposed(),Mt.pool(this,t,r,n,s,i)},e.prototype.variable=function(t,r,n){return t===void 0&&(t=!0),this.throwIfDisposed(),Cu().makeVariable(this,t,r,n)},e.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),Mt.unsortedSegmentSum(this,t,r)},e.prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),Mt.batchToSpaceND(this,t,r)},e.prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),Mt.spaceToBatchND(this,t,r)},e.prototype.topk=function(t,r){return t===void 0&&(t=1),r===void 0&&(r=!0),this.throwIfDisposed(),Mt.topk(this,t,r)},e.prototype.stridedSlice=function(t,r,n,s,i,o,l,c){return s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),Mt.stridedSlice(this,t,r,n,s,i,o,l,c)},e.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),Mt.depthToSpace(this,t,r)},e.prototype.fft=function(){return this.throwIfDisposed(),Mt.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Mt.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Mt.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Mt.spectral.irfft(this)},e}();Object.defineProperty(os,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var G8,VD,qD,zD,HD,Lv=function(e){function t(r,n,s,i){var o=e.call(this,r.shape,r.dtype,r.dataId,i)||this;return o.trainable=n,o.name=s,o}return Fd(t,e),t.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and previous value ("+this.dtype+") must match");if(!Ci(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and previous value ("+this.shape+") must match");Cu().disposeTensor(this),this.dataId=r.dataId,Cu().incRef(this,null)},t.prototype.dispose=function(){Cu().disposeVariable(this),this.isDisposedInternal=!0},t}(os);Object.defineProperty(Lv,Symbol.hasInstance,{value:function(e){return e instanceof os&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(G8||(G8={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(VD||(VD={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(qD||(qD={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(zD||(zD={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(HD||(HD={}));var oDe={float32:zD,int32:VD,bool:qD,complex64:HD};function Vi(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return oDe[e][t]}function SE(e){return Vi(e,"int32")}function hs(e,t){if(e.dtype===t.dtype)return[e,t];var r=Vi(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function lDe(e,t){qe(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function tG(e){var t=[];return function r(n,s,i){if(n!=null){if(n instanceof os)return void s.push(n);if(o=n,!(!Array.isArray(o)&&typeof o!="object")){var o,l=n;for(var c in l){var d=l[c];i.has(d)||(i.add(d),r(d,s,i))}}}}(e,t,new Set),t}var CE,Y8=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),cDe=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Y8}return e.prototype.ready=function(){return Ir(this,void 0,void 0,function(){var t,r,n;return Pr(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),r=0,s.label=1;case 1:return r<t.length?(n=t[r],[4,this.initializeBackend(n).success]):[3,5];case 2:return s.sent()?[4,this.setBackend(n)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),r=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,r,n){return n===void 0&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:r,priority:n},!0)},e.prototype.setBackend=function(t){return Ir(this,void 0,void 0,function(){var r,n,s;return Pr(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(t),n=r.success,r.asyncInit?[4,n]:[3,2]);case 1:return s=i.sent(),[3,3];case 2:s=n,i.label=3;case 3:if(!s)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new aDe(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;V8(this.backendName).forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var r=this;V8(t).forEach(function(n){n.disposeFunc!=null&&n.disposeFunc(r.registry[t])})},e.prototype.initializeBackend=function(t){var r=this,n=this.registryFactory[t];if(n==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var s=n.factory();if(Promise.resolve(s)===s){var i=++this.pendingBackendInitId,o=s.then(function(l){return!(i<r.pendingBackendInitId)&&(r.registry[t]=l,r.pendingBackendInit=null,!0)}).catch(function(l){return!(i<r.pendingBackendInitId)&&(r.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,n){return t.registryFactory[n].priority-t.registryFactory[r].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),r=0;r<t.length;r++){var n=t[r],s=this.initializeBackend(n),i=s.success,o=s.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,r){var n=this.state.tensorInfo.get(r),s=n.backend,i=this.readSync(r);s.disposeData(r),n.backend=t,t.move(r,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,r){var n,s=this,i=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return s.startScope(i)},function(){return s.endScope(n)},function(){return(n=r())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(t,r,n){t();try{var s=n();return r(),s}catch(i){throw r(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[r],function(s){return{x:function(){return s.toFloat()}}},[]),r},e.prototype.runKernel=function(t,r,n,s,i){return this.runKernelFunc(null,r,null,t,n,s,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,r,n){var s=this.backend.numDataIds(),i=0;n.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-o;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,r,n,s,i,o,l){var c,d=this;o===void 0&&(o=[]),l===void 0&&(l=[]);var u=[],h=this.isTapeOn();s==null&&(s=this.state.activeScope!=null?this.state.activeScope.name:"");var m,p=function(C){h&&(u=C.map(function(N){return d.keep(d.clone(N))}))},v=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,y=HW(s,this.backendName);return m=y!=null?function(){var C=d.backend.numDataIds();b=y.kernelFunc({inputs:r,attrs:i,backend:d.backend});var N=Array.isArray(b)?b:[b];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,N);var k=N.map(function(D){var E=D.dataId,T=D.shape,A=D.dtype;return d.makeTensorFromDataId(E,T,A)}),S=k.filter(function(D,E){return l[E]});return p((o||[]).slice().concat(S)),k}:function(){var C=d.backend.numDataIds();b=d.tidy(function(){return t(d.backend,p)});var N=Array.isArray(b)?b:[b];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,N),N},this.scopedRun(function(){return d.state.kernelDepth++},function(){return d.state.kernelDepth--},function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(s,r,function(){return m()}):m()}),h&&this.addTapeNode(s,r,c,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(function(C){return r[C].shape}),outputShapes:c.map(function(C){return C.shape})}),Array.isArray(b)?c:c[0]},e.prototype.makeTensor=function(t,r,n,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",s=s||this.backend;var i=t;n==="string"&&mT(t[0])&&(i=t.map(function(u){return rDe(u)}));var o=s.write(i,r,n),l=new os(r,n,o,this.nextTensorId());if(this.incRef(l,s),n==="string"){var c=this.state.tensorInfo.get(o),d=Z5e(i);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},e.prototype.makeTensorFromDataId=function(t,r,n,s){var i=new os(r,n=n||"float32",t,this.nextTensorId());return this.incRef(i,s),i},e.prototype.makeVariable=function(t,r,n,s){r===void 0&&(r=!0),n=n||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.asType(s));var i=new Lv(t,r,n,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,r){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,n===0){this.state.numDataBuffers++;var s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*KW(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Lv||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var r=this.state.registeredVariables[t];this.disposeVariable(r)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){return this.state.profiling=!0,r=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,r,n,s,i){var o=this,l={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:n,saved:i},c=H5e(t);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=function(d){return d=d.map(function(u,h){if(u==null){var m=n[h],p=h1(m.size,m.dtype);return o.makeTensor(p,m.shape,m.dtype)}return u}),s(d.length>1?d:d[0],i)}),this.state.activeTape.push(l)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r},e.prototype.endScope=function(t){for(var r=this,n=tG(t),s=new Set(n.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||s.has(o.id)||o.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(c){c.kept||c.scopeId!==l.id||r.track(c)})},e.prototype.gradients=function(t,r,n,s){var i=this;if(s===void 0&&(s=!1),qe(r.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});qe(o instanceof os,function(){return"The result y returned by f() must be a tensor."});var l=function(c,d,u){for(var h={},m={},p=0;p<d.length;p++)h[d[p].id]=!0;for(p=0;p<c.length;p++){var v=(D=c[p]).inputs;for(var g in v){for(var b=v[g],y=!1,C=0;C<d.length;C++)if(h[b.id]){D.outputs.forEach(function(L){return h[L.id]=!0}),y=!0,m[D.id]=!0;break}if(y)break}}var N={};N[u.id]=!0;var k={};for(p=c.length-1;p>=0;p--)for(v=(D=c[p]).inputs,C=0;C<D.outputs.length;C++)if(N[D.outputs[C].id]){for(var g in v)N[v[g].id]=!0,k[D.id]=!0;break}var S=[];for(p=0;p<c.length;p++){var D;if(m[(D=c[p]).id]&&k[D.id]){var E={};for(var g in D.inputs){var T=D.inputs[g];h[T.id]&&(E[g]=T)}var A=Object.assign({},D);A.inputs=E,A.outputs=D.outputs,S.push(A)}}return S}(this.state.activeTape,r,o);if(!s&&l.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,d,u={};u[o.id]=n??(c=o.shape,d=QW(Rr(c),"float32"),dt.makeTensor(d,c,"float32")),function(m,p,v){for(var g=function(y){var C=p[y],N=[];if(C.outputs.forEach(function(E){var T=m[E.id];T!=null?N.push(T):N.push(null)}),C.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+C.kernelName+".");var k=C.gradient(N),S=function(E){if(!(E in k))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(k)+".");var T=v(function(){return k[E]()});if(T.dtype!=="float32")throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+T.dtype+"'");var A=C.inputs[E];if(!Ci(T.shape,A.shape))throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input '"+E+"' has shape '"+T.shape+"', which does not match the shape of the input '"+A.shape+"'");if(m[A.id]==null)m[A.id]=T;else{var L=m[A.id];m[A.id]=L.add(T),L.dispose()}};for(var D in C.inputs)S(D)},b=p.length-1;b>=0;b--)g(b)}(u,l,function(m){return i.tidy(m)});var h=r.map(function(m){return u[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var p=0,v=m.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:o,grads:h}})},e.prototype.customGrad=function(t){var r=this;return qe(UD(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];qe(s.every(function(l){return l instanceof os}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return s.forEach(function(l,c){o[c]=l}),r.runKernelFunc(function(l,c){return qe((n=t.apply(void 0,s.concat([c]))).value instanceof os,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),qe(UD(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(l,c){var d=n.gradFunc(l,c),u=Array.isArray(d)?d:[d];qe(u.length===s.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),qe(u.every(function(m){return m instanceof os}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return u.forEach(function(m,p){h[p]=function(){return m}}),h})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){switch(s.label){case 0:return r=wu(),[4,this.backend.time(t)];case 1:return(n=s.sent()).wallMs=wu()-r,[2,n]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Y8,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),dt=function(){var e=function(){if(CE==null){var r=void 0;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else{if(typeof self>"u")throw new Error("Could not find a global object");r=self}CE=r}return CE}();if(e._tfengine==null){var t=new q5e(e);e._tfengine=new cDe(t)}return function(r){zW=r}(e._tfengine.ENV),Cu=function(){return e._tfengine},e._tfengine}();function rG(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ih=$t();Ih.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ih.registerFlag("IS_BROWSER",function(){return rG()}),Ih.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ih.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ih.registerFlag("PROD",function(){return!1}),Ih.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ih.getBool("DEBUG")}),Ih.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ih.registerFlag("IS_TEST",function(){return!1});var Dy,Hl,$l,Rp={},kE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dDe(e,t){Rp[e]=t}function Ju(e){e in Rp||(Rp[e]=function(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=function(s){if(typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(r);return n.addEventListener("webglcontextlost",function(s){s.preventDefault(),delete Rp[r]},!1),r===1?n.getContext("webgl",kE)||n.getContext("experimental-webgl",kE):n.getContext("webgl2",kE)}(e));var t=Rp[e];return t.isContextLost()?(delete Rp[e],Ju(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Rp[e])}function PS(e,t){return[t,e]}function Wb(e){var t=Rr(e);return BD(Math.ceil(t/4))}function f1(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function pT(e,t){var r,n,s,i,o,l,c,d,u,h=e;return $t().getNumber("WEBGL_VERSION")===2?(r=h.R32F,n=h.R16F,s=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,c=1,d=h.HALF_FLOAT,u=h.FLOAT):(r=e.RGBA,n=e.RGBA,s=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:u}}function Fr(e,t,r){var n=r();return t&&function(s){var i=s.getError();if(i!==s.NO_ERROR)throw new Error("WebGL Error: "+mDe(s,i))}(e),n}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Dy||(Dy={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Hl||(Hl={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}($l||($l={}));var uDe=596e-10,hDe=65504;function fDe(e){return!!($t().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||uDe<Math.abs(e)&&Math.abs(e)<hDe)}function mDe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Qj(e,t,r){return bf(e,t,function(){return e.getExtension(r)},'Extension "'+r+'" not supported on this browser.')}function pDe(e,t,r){var n=bf(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Fr(e,t,function(){return e.shaderSource(n,r)}),Fr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function xDe(e,t,r){var n=bf(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Fr(e,t,function(){return e.shaderSource(n,r)}),Fr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw function(s,i){var o=vDe.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(s);for(var l=+o[1],c=s.split(`
`),d=c.length.toString().length+2,u=c.map(function(b,y){return dv((y+1).toString(),d)+b}),h=0,m=0;m<u.length;m++)h=Math.max(u[m].length,h);var p=u.slice(0,l-1),v=u.slice(l-1,l),g=u.slice(l);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+dv(v[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(r,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var _E,EE,vDe=/ERROR: [0-9]+:([0-9]+):/g;function gDe(e,t){return bf(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function bDe(e,t,r){if(Fr(e,t,function(){return e.linkProgram(r)}),e.getProgramParameter(r,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function DE(e,t,r){if(Fr(e,t,function(){return e.validateProgram(r)}),e.getProgramParameter(r,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function yDe(e,t,r){var n=bf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),Fr(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function jDe(e,t,r){var n=bf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Fr(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),Fr(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function NDe(e,t){return bf(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function wDe(e,t){var r=$t().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var n="["+e+"x"+t+"]";throw new Error("Requested texture size "+n+" is invalid.")}if(e>r||t>r)throw n="["+e+"x"+t+"]",new Error("Requested texture size "+n+" greater than WebGL maximum on this browser / GPU "+("["+r+"x"+r+"]")+".")}function SDe(e,t){return bf(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function K8(e,t,r,n,s,i,o,l){var c=e.getAttribLocation(r,n);return c!==-1&&(Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Fr(e,t,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,l)}),Fr(e,t,function(){return e.enableVertexAttribArray(c)}),!0)}function CDe(e,t,r,n){ADe(e,n),Fr(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)})}function kDe(e,t,r,n){return bf(e,t,function(){return e.getUniformLocation(r,n)},'uniform "'+n+'" not present in program.')}function _De(e,t,r){return e.getUniformLocation(t,r)}function EDe(e,t,r,n,s,i){Fr(e,t,function(){return CDe(e,t,n,i)}),Fr(e,t,function(){return e.uniform1i(s,i)})}function AE(e,t,r,n){Fr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Fr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)})}function X8(e,t,r){Fr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Fr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Jj(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+DDe(e,t))}function DDe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function bf(e,t,r,n){var s=Fr(e,t,function(){return r()});if(s==null)throw new Error(n);return s}function ADe(e,t){var r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=t+e.TEXTURE0;if(n<e.TEXTURE0||n>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}function Q2(e,t){return t===void 0&&(t=2),Rr(e.slice(0,e.length-t))}function J2(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function TE(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Q2(e)].concat(J2(e))),t}function TDe(e,t){var r;t===void 0&&(t=!1);var n=$t().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,(e=e.map(function(d,u){return u>=e.length-2?YW(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var s=$p(e);e=s.newShape}var i=Rr(e);if(e.length<=1&&i<=n)return[1,i];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Q2(e),l=2,c=2;return e.length&&(l=(r=J2(e))[0],c=r[1]),BD(i=o*(l/2)*(c/2)).map(function(d){return 2*d})}return BD(i)}function Zj(e){return e%2==0}function eN(e,t){if(Ci(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var r=e.slice(-1)[0],n=t.slice(-1)[0];if(r===n||Zj(r)&&Zj(n)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Zj(e[0])&&Zj(t[0])}function IDe(e){if(_E==null){var t=Ju(e);_E=t.getParameter(t.MAX_TEXTURE_SIZE)}return _E}function PDe(e){if(EE==null){var t=Ju(e);EE=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EE)}function ODe(e){if(e===0)return 0;var t=Ju(e);return Uc(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Uc(t,"EXT_disjoint_timer_query")?1:0}function Uc(e,t){return e.getExtension(t)!=null}function Q8(e){try{if(Ju(e)!=null)return!0}catch{return!1}return!1}function MDe(e){if(e===0)return!1;var t=Ju(e);if(e===1){if(!Uc(t,"OES_texture_float"))return!1}else if(!Uc(t,"EXT_color_buffer_float"))return!1;return WD(t)}function RDe(e){if(e===0)return!1;var t=Ju(e);if(e!==1){if(Uc(t,"EXT_color_buffer_float"))return WD(t);if(Uc(t,"EXT_color_buffer_half_float")){var r=t.getExtension("EXT_color_buffer_half_float");return function(n,s){var i=pT(n,s),o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,l),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var c=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(o),n.deleteFramebuffer(l),c}(t,r)}return!1}return!!Uc(t,"OES_texture_float")&&!!Uc(t,"WEBGL_color_buffer_float")&&WD(t)}function WD(e){var t=pT(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),s}function FDe(e){return e===2&&Ju(e).fenceSync!=null}var un=$t();function nG(e){$t().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function kr(e,t){return dt.tidy(e,t)}function ll(e){tG(e).forEach(function(t){return t.dispose()})}function LDe(e){return dt.keep(e)}function Z2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$t().getBool("IS_TEST")||console.warn.apply(console,e)}function rp(e,t){var r=e;if(Fu(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var n=[];Array.isArray(r)||Fu(r)&&t!=="string";)n.push(r.length),r=r[0];return Array.isArray(e)&&$t().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function s(i,o,l){if(l=l||[],!Array.isArray(i)&&!Fu(i))return void qe(o.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});qe(o.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),qe(i.length===o[0],function(){return"Element arr["+l.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),d=0;d<i.length;++d)s(i[d],c,l.concat(d))}(e,n,[]),n}function J8(e,t,r,n){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+r+"' passed to '"+n+"' must be "+e+" tensor, but got "+t+" tensor")}function Pe(e,t,r,n){if(n===void 0&&(n="numeric"),e instanceof os)return J8(n,e.dtype,t,r),e;var s=u1(e);if(s!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(s=n),J8(n,s,t,r),e==null||!Fu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+r+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=rp(e,s);Fu(e)||Array.isArray(e)||(e=[e]);var l=s!=="string"?XW(e,s,$t().getBool("DEBUG")):Fv(e,[],!0);return dt.makeTensor(l,o,s)}function ew(e,t,r,n){if(n===void 0&&(n="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(s,i){return Pe(s,t+"["+i+"]",r)},n)}function aG(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function BDe(e,t,r){for(var n=e.length+t.length,s=[],i=0,o=0,l=0;l<n;l++)r.indexOf(l)===-1?s.push(e[i++]):s.push(t[o++]);return s}function fo(e,t){for(var r=[],n=e.length,s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);return[r,t.map(function(i){return e[i]})]}function ul(e,t){return BDe(e,t.map(function(r){return 1}),t)}function Fl(e,t,r){qe(aG(t,r),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input."})}function Zu(e,t){if(aG(e,t))return null;for(var r=[],n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);return e.forEach(function(s){return r.push(s)}),r}function xT(e){return e.map(function(t,r){return[r,t]}).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]})}function eh(e,t){for(var r=[],n=t-e;n<t;++n)r.push(n);return r}function UDe(e,t){var r=e[0].length;e.forEach(function(s,i){qe(s.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+r+")"})}),qe(t>=0&&t<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var n=e[0];e.forEach(function(s,i){for(var o=0;o<r;o++)qe(o===t||s[o]===n[o],function(){return"Error in concat"+r+"D: Shape of tensors["+i+"] ("+s+") does not match the shape of the rest ("+n+") along the non-concatenated axis "+i+"."})})}function Bv(e,t){for(var r=e[0].slice(),n=1;n<e.length;n++)r[t]+=e[n][t];return r}function et(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var r=t[0],n=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));var s=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];dt.startScope(r);try{var l=n.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),dt.endScope(l),l}catch(c){throw dt.endScope(null),c}};return Object.defineProperty(s,"name",{value:r,configurable:!0}),s}un.registerFlag("HAS_WEBGL",function(){return un.getNumber("WEBGL_VERSION")>0}),un.registerFlag("WEBGL_VERSION",function(){return Q8(2)?2:Q8(1)?1:0}),un.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return un.get("WEBGL_VERSION")===2}),un.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),un.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),un.registerFlag("WEBGL_PACK",function(){return un.getBool("HAS_WEBGL")}),un.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_CLIP",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),un.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_PACK_REDUCE",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_LAZILY_UNPACK",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_CONV_IM2COL",function(){return un.getBool("WEBGL_PACK")}),un.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return IDe(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return PDe(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=un.getNumber("WEBGL_VERSION");return e===0?0:ODe(e)}),un.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return un.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),un.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return MDe(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!un.getBool("WEBGL_FORCE_F16_TEXTURES")&&un.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),un.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return RDe(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return FDe(un.getNumber("WEBGL_VERSION"))}),un.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return un.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),eG=nG;var Ui=et({complex_:function(e,t){var r=Pe(e,"real","complex"),n=Pe(t,"imag","complex");return ca(r.shape,n.shape,"real and imag shapes, "+r.shape+" and "+n.shape+", must match in call to tf.complex()."),dt.runKernelFunc(function(s){return s.complex(r,n)},{$real:r,$imag:n})}}),Fc=et({real_:function(e){var t=Pe(e,"input","real");return dt.runKernelFunc(function(r){return r.real(t)},{$input:t})}}),ku=et({imag_:function(e){var t=Pe(e,"input","imag");return dt.runKernelFunc(function(r){return r.imag(t)},{$input:t})}});function Hi(e,t,r){return np(e,t,rp(e,r),r)}function np(e,t,r,n){if(n==null&&(n=u1(e)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Fu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){JW(t);var s=Rr(t),i=Rr(r);qe(s===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+i});for(var o=0;o<r.length;++o){var l=r[o],c=o!==r.length-1||l!==Rr(t.slice(o));qe(r[o]===t[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "})}}return Fu(e)||Array.isArray(e)||(e=[e]),t=t||r,e=n!=="string"?XW(e,n,$t().getBool("DEBUG")):Fv(e,[],!0),dt.makeTensor(e,t,n)}function jr(e,t){if((Fu(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Fu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return np(e,[],[],t)}function Js(e,t){ug(e);var r=rp(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return np(e,null,r,t)}function Im(e,t,r){if(ug(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=rp(e,r);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return np(e,t,n,r)}function vT(e,t,r){if(ug(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=rp(e,r);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function rl(e,t,r){if(ug(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=rp(e,r);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function $De(e,t,r){if(ug(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=rp(e,r);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return np(e,t,n,r)}function VDe(e,t,r){if(ug(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=rp(e,r);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return np(e,t=t||n,n,r)}function qDe(e,t,r,n){return t===void 0&&(t=!0),dt.makeVariable(e,t,r,n)}function hg(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=hg(e,"float32"),n=Ua(e,"float32");return Ui(r,n)}var s=QW(Rr(e),t);return dt.makeTensor(s,e,t)}function Ua(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=Ua(e,"float32"),n=Ua(e,"float32");return Ui(r,n)}var s=h1(Rr(e),t);return dt.makeTensor(s,e,t)}function Bu(e,t,r){return dt.runKernelFunc(function(n){return n.fill(e,t,r)},{})}function zDe(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");return dt.runKernelFunc(function(n){return n.linspace(e,t,r)},{})}function tw(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&r<0||t<e&&r>1)return Ua([0],n);var s=h1(Math.abs(Math.ceil((t-e)/r)),n);t<e&&r===1&&(r=-1),s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+r;return Js(s,n)}var sG=et({onesLike_:function(e){var t=Pe(e,"x","onesLike");if(t.dtype==="complex64"){var r=sG(Fc(t)),n=qn(ku(t));return Ui(r,n)}return dt.runKernelFunc(function(s){return s.onesLike(t)},{$x:t},function(s,i){return{$x:function(){return qn(s)}}})}}),qn=et({zerosLike_:function(e){var t=Pe(e,"x","zerosLike");return dt.runKernelFunc(function(r){return r.zerosLike(t)},{$x:t},function(r,n){return{$x:function(){return qn(r)}}})}}),ii=et({concat_:function(e,t){t===void 0&&(t=0),qe(e.length>=1,function(){return"Pass at least one tensor to concat"});var r=ew(e,"tensors","concat");r[0].dtype==="complex64"&&r.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),t=hi(t,r[0].shape)[0];var n=Bv(r.map(function(l){return l.shape}),t);if(Rr(n)===0)return Hi([],n);if((r=r.filter(function(l){return l.size>0})).length===1)return r[0];var s=r.map(function(l){return l.shape});UDe(s,t);var i=r,o={axis:t};return dt.runKernelFunc(function(l){return l.concat(r,t)},i,function(l){var c=s.map(function(d){return d[t]});return gT(l,c,t).map(function(d){return function(){return d}})},"Concat",o)}}),HDe=et({concat1d_:function(e){return ii(e,0)}}),WDe=et({concat2d_:function(e,t){return ii(e,t)}}),GDe=et({concat3d_:function(e,t){return ii(e,t)}}),YDe=et({concat4d_:function(e,t){return ii(e,t)}}),gT=et({split_:function(e,t,r){r===void 0&&(r=0);var n,s=Pe(e,"x","split");return r=hi(r,s.shape)[0],typeof t=="number"?(qe(s.shape[r]%t==0,function(){return"Number of splits must evenly divide the axis."}),n=new Array(t).fill(s.shape[r]/t)):(qe(s.shape[r]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),n=t),dt.runKernelFunc(function(i){return i.split(s,n,r)},{$x:s},function(i){return{$x:function(){return ii(i,r)}}})}});function zx(e,t){return e(t={exports:{}},t.exports),t.exports}var KDe=zx(function(e){(function(t,r,n){function s(l){var c,d=this,u=(c=4022871197,function(h){h=h.toString();for(var m=0;m<h.length;m++){var p=.02519603282416938*(c+=h.charCodeAt(m));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var h=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=h-(d.c=0|h)},d.c=1,d.s0=u(" "),d.s1=u(" "),d.s2=u(" "),d.s0-=u(l),d.s0<0&&(d.s0+=1),d.s1-=u(l),d.s1<0&&(d.s1+=1),d.s2-=u(l),d.s2<0&&(d.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var d=new s(l),u=c&&c.state,h=d.next;return h.int32=function(){return 4294967296*d.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.alea=o})(0,e)}),XDe=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor128=o})(0,e)}),QDe=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^h^h<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),u==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorwow=o})(0,e)}),JDe=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.x,m=c.i;return d=h[m],u=(d^=d>>>7)^d<<24,u^=(d=h[m+1&7])^d>>>10,u^=(d=h[m+3&7])^d>>>3,u^=(d=h[m+4&7])^d<<7,d=h[m+7&7],u^=(d^=d<<13)^d<<9,h[m]=u,c.i=m+1&7,u},function(d,u){var h,m=[];if(u===(0|u))m[0]=u;else for(u=""+u,h=0;h<u.length;++h)m[7&h]=m[7&h]<<15^u.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],d.x=m,d.i=0,h=256;h>0;--h)d.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.x&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorshift7=o})(0,e)}),ZDe=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.w,m=c.X,p=c.i;return c.w=h=h+1640531527|0,u=m[p+34&127],d=m[p=p+1&127],u^=u<<13,d^=d<<17,u^=u>>>15,d^=d>>>12,u=m[p]=u^d,c.i=p,u+(h^h>>>16)|0},function(d,u){var h,m,p,v,g,b=[],y=128;for(u===(0|u)?(m=u,u=null):(u+="\0",m=0,y=Math.max(y,u.length)),p=0,v=-32;v<y;++v)u&&(m^=u.charCodeAt((v+32)%u.length)),v===0&&(g=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,v>=0&&(g=g+1640531527|0,p=(h=b[127&v]^=m+g)==0?p+1:0);for(p>=128&&(b[127&(u&&u.length||0)]=-1),p=127,v=512;v>0;--v)m=b[p+34&127],h=b[p=p+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,b[p]=m^h;d.w=g,d.X=b,d.i=p}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.X&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor4096=o})(0,e)}),e3e=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.b,m=c.c,p=c.d,v=c.a;return h=h<<25^h>>>7^m,m=m-p|0,p=p<<24^p>>>8^v,v=v-h|0,c.b=h=h<<20^h>>>12^m,c.c=m=m-p|0,c.d=p<<16^m>>>16^v,c.a=v-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var u=0;u<d.length+20;u++)c.b^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.tychei=o})(0,e)}),Fp=zx(function(e){(function(t,r){var n,s=this,i=256,o=6,l="random",c=r.pow(i,o),d=r.pow(2,52),u=2*d,h=i-1;function m(y,C,N){var k=[],S=g(function T(A,L){var P,O=[],Q=typeof A;if(L&&Q=="object")for(P in A)try{O.push(T(A[P],L-1))}catch{}return O.length?O:Q=="string"?A:A+"\0"}((C=C==1?{entropy:!0}:C||{}).entropy?[y,b(t)]:y??function(){try{var T;return n&&(T=n.randomBytes)?T=T(i):(T=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(T)),b(T)}catch{var A=s.navigator,L=A&&A.plugins;return[+new Date,s,L,s.screen,b(t)]}}(),3),k),D=new p(k),E=function(){for(var T=D.g(o),A=c,L=0;T<d;)T=(T+L)*i,A*=i,L=D.g(1);for(;T>=u;)T/=2,A/=2,L>>>=1;return(T+L)/A};return E.int32=function(){return 0|D.g(4)},E.quick=function(){return D.g(4)/4294967296},E.double=E,g(b(D.S),t),(C.pass||N||function(T,A,L,P){return P&&(P.S&&v(P,D),T.state=function(){return v(D,{})}),L?(r[l]=T,A):T})(E,S,"global"in C?C.global:this==r,C.state)}function p(y){var C,N=y.length,k=this,S=0,D=k.i=k.j=0,E=k.S=[];for(N||(y=[N++]);S<i;)E[S]=S++;for(S=0;S<i;S++)E[S]=E[D=h&D+y[S%N]+(C=E[S])],E[D]=C;(k.g=function(T){for(var A,L=0,P=k.i,O=k.j,Q=k.S;T--;)A=Q[P=h&P+1],L=L*i+Q[h&(Q[P]=Q[O=h&O+A])+(Q[O]=A)];return k.i=P,k.j=O,L})(i)}function v(y,C){return C.i=y.i,C.j=y.j,C.S=y.S.slice(),C}function g(y,C){for(var N,k=y+"",S=0;S<k.length;)C[h&S]=h&(N^=19*C[h&S])+k.charCodeAt(S++);return b(C)}function b(y){return String.fromCharCode.apply(0,y)}if(r["seed"+l]=m,g(r.random(),t),e.exports){e.exports=m;try{n=require("crypto")}catch{}}})([],Math)});Fp.alea=KDe,Fp.xor128=XDe,Fp.xorwow=QDe,Fp.xorshift7=JDe,Fp.xor4096=ZDe,Fp.tychei=e3e;var OS=Fp.alea,bT=function(){function e(t,r,n,s,i){this.mean=t,this.stdDev=r,this.dtype=n,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=OS(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var r,n,s=!1;!s;){var i=void 0,o=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);r=this.mean+this.stdDev*i*c,n=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(r)||(s=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(r)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),t3e=function(){function e(t,r,n,s){this.alpha=t,this.beta=1/r,this.dtype=n;var i=s||Math.random();this.randu=OS(i.toString()),this.randn=new bT(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,r,n,s,i,o;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,r=1-.331*(t=s*s)*t,n=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<r||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),r3e=function(){function e(t,r,n,s){var i=this;if(t===void 0&&(t=0),r===void 0&&(r=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=r-t,this.dtype=n,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+r+" <= 1 and dtype is not float");this.random=OS(s)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function pn(e,t,r){return t===void 0&&(t="float32"),t=t||"float32",JW(e),new Ey(e,t,r)}function n3e(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var iG=et({batchToSpaceND_:function(e,t,r){var n=Pe(e,"x","batchToSpaceND"),s=t.reduce(function(i,o){return i*o});return qe(n.rank>=1+t.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+t.length}),qe(r.length===t.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+t.length}),qe(n.shape[0]%s==0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),dt.runKernelFunc(function(i){return i.batchToSpaceND(n,t,r)},{$x:n},function(i){return{$x:function(){return i.spaceToBatchND(t,r)}}})}}),a3e=et({broadcastTo_:function(e,t){var r=Pe(e,"broadcastTo","x"),n=r.shape;if(t.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<r.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+r.rank+".");if(t.length>r.rank){for(var s=r.shape.slice();s.length<t.length;)s.unshift(1);r=r.reshape(s)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(r.shape[o]===t[o])i[o]=1;else if(r.shape[o]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+t+"].");var l=i.map(function(c,d){return c>1?d:-1}).filter(function(c){return c>=0});return l.length===0?r.clone():dt.runKernelFunc(function(c){return c.tile(r,i)},{input:r},function(c){return{input:function(){return c.sum(l,!0)}}})}}),s3e=et({cast_:function(e,t){var r=Pe(e,"x","cast");if(!Q5e(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var n={dtype:t};return dt.runKernelFunc(function(s){return s.cast(r,t)},{x:r},function(s){return{x:function(){return s.clone()}}},"Cast",n)}}),i3e=et({clone_:function(e){var t=Pe(e,"x","clone",null);return dt.runKernelFunc(function(){return dt.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(r){return{$x:function(){return r.toFloat()}}})}}),o3e=et({cumsum_:function(e,t,r,n){t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var s=Pe(e,"x","cumsum"),i=Zu([t|=0],s.rank),o=s;i!=null&&(o=s.transpose(i));var l=eh(1,s.rank)[0],c=dt.runKernelFunc(function(d){return d.cumsum(o,l,r,n)},{permutedX:o},function(d){return{permutedX:function(){return d.cumsum(t,r,!n)}}});return i!=null&&(c=c.transpose(i)),c}}),l3e=et({depthToSpace_:function(e,t,r){r===void 0&&(r="NHWC");var n=Pe(e,"x","depthToSpace"),s=r==="NHWC"?n.shape[1]:n.shape[2],i=r==="NHWC"?n.shape[2]:n.shape[3],o=r==="NHWC"?n.shape[3]:n.shape[1];return qe(s*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+t+`  for depthToSpace with input shape
      `+n.shape}),qe(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+n.shape}),qe(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+n.shape}),dt.runKernelFunc(function(l){return l.depthToSpace(n,t,r)},{$x:n})}}),Mc=et({expandDims_:function(e,t){t===void 0&&(t=0);var r=Pe(e,"x","expandDims",null);qe(t<=r.rank,function(){return"Axis must be <= rank of the tensor"});var n=r.shape.slice();return t<0&&(qe(-(r.rank+1)<=t,function(){return"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"}),t=r.rank+t+1),n.splice(t,0,1),_d(r,n)}}),oG=et({eye_:function(e,t,r,n){n===void 0&&(n="float32"),t==null&&(t=e);for(var s=pn([e,t],n),i=e<=t?e:t,o=0;o<i;++o)s.set(1,o,o);var l=s.toTensor().as2D(e,t);if(r==null)return l;if(r.length===1)return uv(Mc(l,0),[r[0],1,1]);if(r.length===2)return uv(Mc(Mc(l,0),0),[r[0],r[1],1,1]);if(r.length===3)return uv(Mc(Mc(Mc(l,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")}}),c3e=et({multinomial_:function(e,t,r,n){n===void 0&&(n=!1);var s=Pe(e,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var l=o===1?s.as2D(1,-1):s,c=dt.runKernelFunc(function(d){return d.multinomial(l,n,t,r)},{logits2D:l});return o===1?c.as1D():c}}),GD=et({oneHot_:function(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=Pe(e,"indices","oneHot","int32"),i=s.shape.concat([t]);return s=s.flatten(),dt.runKernelFunc(function(o){return o.oneHot(s,t,r,n)},{$indices:s},function(o){return{$indices:function(){return Ua(s.shape,"float32")}}}).reshape(i)}}),Hx=et({pad_:function(e,t,r){r===void 0&&(r=0);var n=Pe(e,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:r};return dt.runKernelFunc(function(i){return i.pad(n,t,r)},{x:n},function(i){var o=t.map(function(l){return l[0]});return{x:function(){return i.slice(o,n.shape)}}},"PadV2",s)}}),d3e=et({pad1d_:function(e,t,r){return r===void 0&&(r=0),qe(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Hx(e,[t],r)}}),u3e=et({pad2d_:function(e,t,r){return r===void 0&&(r=0),qe(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),h3e=et({pad3d_:function(e,t,r){return r===void 0&&(r=0),qe(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),f3e=et({pad4d_:function(e,t,r){return r===void 0&&(r=0),qe(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),m3e=et({rand_:function(e,t,r){var n=Rr(e),s=null;if(r==null||r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else{if(r!=="bool")throw new Error("Unknown data type "+r);s=new Uint8Array(n)}for(var i=0;i<n;i++)s[i]=t();return dt.makeTensor(s,e,r)}}),p3e=et({randomNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new bT(t,r,n,!1,s),o=pn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),x3e=et({randomGamma_:function(e,t,r,n,s){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r==null&&(r=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var i=new t3e(t,r,n,s),o=pn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),lG=et({randomUniform_:function(e,t,r,n,s){t===void 0&&(t=0),r===void 0&&(r=1),n===void 0&&(n="float32");for(var i=pn(e,n),o=new r3e(t,r,null,s),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}}),_d=et({reshape_:function(e,t){var r=Pe(e,"x","reshape",null);t=K5e(t,r.size),qe(r.size===Rr(t),function(){return"new shape and old shape must have the same number of elements."});var n={shape:t};return dt.runKernelFunc(function(s){return s.reshape(r,t)},{x:r},function(s){return{x:function(){return s.reshape(r.shape)}}},"Reshape",n)}}),cG=et({spaceToBatchND_:function(e,t,r){var n=Pe(e,"x","spaceToBatchND");return qe(n.rank>=1+t.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+t.length}),qe(r.length===t.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+t.length}),qe(n.shape.reduce(function(s,i,o){return o>0&&o<=t.length?s&&(i+r[o-1][0]+r[o-1][1])%t[o-1]==0:s},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+t.toString()}),dt.runKernelFunc(function(s){return s.spaceToBatchND(n,t,r)},{$x:n},function(s){return{$x:function(){return s.batchToSpaceND(t,r)}}})}}),dG=et({squeeze_:function(e,t){var r=Pe(e,"x","squeeze");return _d(r,$p(r.shape,t).newShape)}}),Zl=et({stack_:function(e,t){t===void 0&&(t=0);var r=ew(e,"tensors","stack");if(qe(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length===1)return r[0].expandDims(t);var n=r[0].rank,s=r[0].shape,i=r[0].dtype;qe(t<=n,function(){return"Axis must be <= rank of the tensor"}),r.forEach(function(l){ca(s,l.shape,"All tensors passed to stack must have matching shapes")}),r.forEach(function(l){qe(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=r.map(function(l){return l.expandDims(t)});return ii(o,t)}}),uv=et({tile_:function(e,t){var r=Pe(e,"x","tile",null);qe(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of reps "+t+"."});var n=[r],s={reps:t};return dt.runKernelFunc(function(i,o){var l=i.tile(r,t);return o([r]),l},{x:r},function(i,o){var l=o[0];return{x:function(){var c=qn(l);if(l.rank===1)for(var d=0;d<t[0];++d)c=c.add(i.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<t[0];++d)for(var u=0;u<t[1];++u)c=c.add(i.slice([d*l.shape[0],u*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(var h=0;h<t[2];++h)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(h=0;h<t[2];++h)for(var m=0;m<t[3];++m)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",s,n)}}),v3e=et({truncatedNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new bT(t,r,n,!0,s),o=pn(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),oi=et({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var r=Pe(e,"x","unstack");qe(t>=-r.shape.length&&t<r.shape.length,function(){return"Axis = "+t+" is not in [-"+r.shape.length+", "+r.shape.length+")"}),t<0&&(t+=r.shape.length);var n={axis:t};return dt.runKernelFunc(function(s){return s.unstack(r,t)},{x:r},function(s){return{x:function(){return Zl(s,t)}}},"Unpack",n)}}),g3e=function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return r=Pe(e,"x","setdiff1d"),n=Pe(t,"y","setdiff1d"),qe(r.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+n.dtype+")."}),qe(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),qe(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,r.data()];case 1:return s=m.sent(),[4,n.data()];case 2:for(i=m.sent(),o=new Set(i),l=0,u=0;u<s.length;u++)o.has(s[u])||l++;for(c=new Ey([l],r.dtype),d=new Ey([l],"int32"),u=0,h=0;u<s.length;u++)o.has(s[u])||(c.values[h]=s[u],d.values[h]=u,h++);return[2,[c.toTensor(),d.toTensor()]]}})})};function rw(e,t,r,n){n===void 0&&(n=!0);var s=[];if(n)(s=s.concat(t.slice(0))).push(e[0]/r),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var i=t.length,o=0;o<i;++o)s=s.concat([e[o+1]/t[o],t[o]]);s=s.concat(e.slice(i+1))}return s}function nw(e,t,r){r===void 0&&(r=!0);var n=[];if(r){n.push(t);for(var s=t+1;s<e;++s)s<=2*t?(n.push(s),n.push(s-(t+1))):n.push(s)}else{var i=[],o=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);n.push.apply(n,i),n.push(0),n.push.apply(n,o)}return n}function aw(e,t,r,n){n===void 0&&(n=!0);var s=[];n?s.push(e[0]/r):s.push(e[0]*r);for(var i=1;i<e.length;++i)i<=t.length?n?s.push(t[i-1]*e[i]):s.push(e[i]/t[i-1]):s.push(e[i]);return s}function uG(e,t){for(var r=[0],n=0;n<t;++n)r.push(e[n][0]);return r}function hG(e,t,r){for(var n=e.slice(0,1),s=0;s<r;++s)n.push(e[s+1]-t[s][0]-t[s][1]);return n}function fG(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var r=t.shape,n=r[r.length-1],s=1,i=0;i<r.length-1;++i)s*=r[i];var o=e.shape,l=r.slice();l.pop();var c=1;for(i=n;i<e.rank;++i)c*=o[i],l.push(o[i]);var d=Lu(e.shape).map(function(u){return u/c}).concat([1]).slice(0,n);return[l,s,c,d]}var mG=30;function IE(e){return e<=mG?e:$D(e,Math.floor(Math.sqrt(e)))}function b3e(e,t,r){var n=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+r.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+n+", and batchDim: "+s+".";if(r.rank<s)throw new Error(i+" update.rank < "+s+". ");if(e.length<n+(r.rank-s))throw new Error(i+" Output shape length < "+(n+(r.rank-s)));if(r.rank!==s+e.length-n)throw new Error(i+" update.rank != "+(s+e.length-n));for(var o=0;o<s;++o)if(r.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<r.rank-s;++o)if(r.shape[o+s]!==e[o+n])throw new Error(i+" updates.shape["+(o+s)+"] ("+r.shape[o+s]+") != shape["+(o+s)+"] ("+e[o+s]+")")}function y3e(e,t,r){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}b3e(r,t,e)}function sw(e,t,r){for(var n=t.shape.length,s=n>1?t.shape[n-1]:1,i=r.length,o=1,l=s;l<i;++l)o*=r[l];var c=s<1?1:s;return{sliceRank:s,numUpdates:Rr(t.shape)/c,sliceSize:o,strides:Lu(r.slice(0,s)).concat([1]),outputSize:Rr(r)}}function j3e(e,t,r){qe(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),qe(e.rank===r.length,function(){return"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+")."});for(var n=function(i){qe(t[i]+r[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+r[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},s=0;s<e.rank;++s)n(s)}function Z8(e){for(var t=[],r=0;e>0;)1&e&&t.push(r),e/=2,r++;return t}function yT(e,t,r){for(var n=[],s=0;s<e.length;s++)n[s]=Math.ceil((t[s]-e[s])/r[s]);return n}function N3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=LD(0,i,l-1)}function w3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=o>0?LD(0,i,l):LD(-1,i,l-1)}function pG(e,t,r){for(var n=r.length,s=0;s<r.length;s++)if(r[s]>1){n=s;break}for(s=n+1;s<r.length;s++)if(t[s]>0||r[s]!==e[s])return!1;return!0}function xG(e,t){for(var r=e.length>0?e[e.length-1]:1,n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function S3e(e,t){qe(UD(e),function(){return"The f passed in variableGrads(f) must be a function"}),qe(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof Lv}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=t!=null;if(!r)for(var n in t=[],dt.registeredVariables)t.push(dt.registeredVariables[n]);var s=r?t.filter(function(u){return!u.trainable}):null,i=t.length;qe((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=dt.gradients(e,t,null,!0),l=o.value,c=o.grads;qe(c.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),qe(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var d={};return t.forEach(function(u,h){c[h]!=null&&(d[u.name]=c[h])}),s?.forEach(function(u){return d[u.name]=null}),{value:l,grads:d}}function MS(e){return dt.customGrad(e)}var yf=et({softmax_:function(e,t){t===void 0&&(t=-1);var r=Pe(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and dim was "+t);return dt.runKernelFunc(function(n,s){var i=n.softmax(r,t);return s([i]),i},{logits:r},function(n,s){var i=s[0],o=n.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),C3e=et({logSoftmax_:function(e,t){t===void 0&&(t=-1);var r=Pe(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and axis was "+t);return MS(function(n,s){var i=n.max(t,!0),o=n.sub(i),l=o.toFloat().sub(o.exp().sum(t,!0).log());return s([l]),{value:l,gradFunc:function(c,d){var u=d[0].exp();return c.sub(c.sum(t,!0).mul(u))}}})(r)}}),vG=function(){function e(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,r){this.dataIdsCount++,this.data.set(t,r)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),gG=function(){function e(){}return e.prototype.time=function(t){return Tt("time")},e.prototype.read=function(t){return Tt("read")},e.prototype.readSync=function(t){return Tt("readSync")},e.prototype.numDataIds=function(){return Tt("numDataIds")},e.prototype.disposeData=function(t){return Tt("disposeData")},e.prototype.write=function(t,r,n){return Tt("write")},e.prototype.move=function(t,r,n,s){return Tt("move")},e.prototype.memory=function(){return Tt("memory")},e.prototype.floatPrecision=function(){return Tt("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,r,n,s){return Tt("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Tt("fusedBatchMatMul")},e.prototype.slice=function(t,r,n){return Tt("slice")},e.prototype.stridedSlice=function(t,r,n,s){return Tt("stridedSlice")},e.prototype.unstack=function(t,r){return Tt("unstack")},e.prototype.reverse=function(t,r){return Tt("reverse")},e.prototype.concat=function(t,r){return Tt("concat")},e.prototype.neg=function(t){return Tt("neg")},e.prototype.add=function(t,r){return Tt("add")},e.prototype.addN=function(t){return Tt("addN")},e.prototype.subtract=function(t,r){return Tt("subtract")},e.prototype.multiply=function(t,r){return Tt("multiply")},e.prototype.realDivide=function(t,r){return Tt("realDivide")},e.prototype.floorDiv=function(t,r){return Tt("floorDiv")},e.prototype.sum=function(t,r){return Tt("sum")},e.prototype.prod=function(t,r){return Tt("prod")},e.prototype.unsortedSegmentSum=function(t,r,n){return Tt("unsortedSegmentSum")},e.prototype.argMin=function(t,r){return Tt("argMin")},e.prototype.argMax=function(t,r){return Tt("argMax")},e.prototype.equal=function(t,r){return Tt("equal")},e.prototype.notEqual=function(t,r){return Tt("notEqual")},e.prototype.less=function(t,r){return Tt("less")},e.prototype.lessEqual=function(t,r){return Tt("lessEqual")},e.prototype.greater=function(t,r){return Tt("greater")},e.prototype.greaterEqual=function(t,r){return Tt("greaterEqual")},e.prototype.logicalNot=function(t){return Tt("logicalNot")},e.prototype.logicalAnd=function(t,r){return Tt("logicalAnd")},e.prototype.logicalOr=function(t,r){return Tt("logicalOr")},e.prototype.where=function(t){return Tt("where")},e.prototype.select=function(t,r,n){return Tt("select")},e.prototype.topk=function(t,r,n){return Tt("topk")},e.prototype.min=function(t,r){return Tt("min")},e.prototype.minimum=function(t,r){return Tt("minimum")},e.prototype.mod=function(t,r){return Tt("mod")},e.prototype.max=function(t,r){return Tt("max")},e.prototype.maximum=function(t,r){return Tt("maximum")},e.prototype.all=function(t,r){return Tt("all")},e.prototype.any=function(t,r){return Tt("any")},e.prototype.squaredDifference=function(t,r){return Tt("squaredDifference")},e.prototype.ceil=function(t){return Tt("ceil")},e.prototype.floor=function(t){return Tt("floor")},e.prototype.round=function(t){return Tt("round")},e.prototype.sign=function(t){return Tt("sign")},e.prototype.isNaN=function(t){return Tt("isNaN")},e.prototype.isInf=function(t){return Tt("isInf")},e.prototype.isFinite=function(t){return Tt("isFinite")},e.prototype.pow=function(t,r){return Tt("pow")},e.prototype.exp=function(t){return Tt("exp")},e.prototype.expm1=function(t){return Tt("expm1")},e.prototype.softmax=function(t,r){return Tt("softmax")},e.prototype.log=function(t){return Tt("log")},e.prototype.log1p=function(t){return Tt("log1p")},e.prototype.sqrt=function(t){return Tt("sqrt")},e.prototype.rsqrt=function(t){return Tt("rsqrt")},e.prototype.square=function(t){return Tt("square")},e.prototype.reciprocal=function(t){return Tt("reciprocal")},e.prototype.relu=function(t){return Tt("relu")},e.prototype.relu6=function(t){return Tt("relu6")},e.prototype.prelu=function(t,r){return Tt("prelu")},e.prototype.elu=function(t){return Tt("elu")},e.prototype.eluDer=function(t,r){return Tt("eluDer")},e.prototype.selu=function(t){return Tt("selu")},e.prototype.int=function(t){return Tt("int")},e.prototype.clip=function(t,r,n){return Tt("clip")},e.prototype.abs=function(t){return Tt("abs")},e.prototype.complexAbs=function(t){return Tt("complexAbs")},e.prototype.sigmoid=function(t){return Tt("sigmoid")},e.prototype.softplus=function(t){return Tt("softplus")},e.prototype.sin=function(t){return Tt("sin")},e.prototype.cos=function(t){return Tt("cos")},e.prototype.tan=function(t){return Tt("tan")},e.prototype.asin=function(t){return Tt("asin")},e.prototype.acos=function(t){return Tt("acos")},e.prototype.atan=function(t){return Tt("atan")},e.prototype.atan2=function(t,r){return Tt("atan2")},e.prototype.sinh=function(t){return Tt("sinh")},e.prototype.cosh=function(t){return Tt("cosh")},e.prototype.tanh=function(t){return Tt("tanh")},e.prototype.asinh=function(t){return Tt("asinh")},e.prototype.acosh=function(t){return Tt("acosh")},e.prototype.atanh=function(t){return Tt("atanh")},e.prototype.erf=function(t){return Tt("erf")},e.prototype.step=function(t,r){return Tt("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Tt("fusedConv2d")},e.prototype.conv2d=function(t,r,n){return Tt("conv2d")},e.prototype.conv2dDerInput=function(t,r,n){return Tt("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,r,n){return Tt("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Tt("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,r,n){return Tt("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,r,n){return Tt("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,r,n){return Tt("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,r,n){return Tt("conv3d")},e.prototype.conv3dDerInput=function(t,r,n){return Tt("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,r,n){return Tt("conv3dDerFilter")},e.prototype.maxPool=function(t,r){return Tt("maxPool")},e.prototype.maxPoolBackprop=function(t,r,n,s){return Tt("maxPoolBackprop")},e.prototype.avgPool=function(t,r){return Tt("avgPool")},e.prototype.avgPoolBackprop=function(t,r,n){return Tt("avgPoolBackprop")},e.prototype.avgPool3d=function(t,r){return Tt("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,r,n){return Tt("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,r){return Tt("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,r,n,s){return Tt("maxPool3dBackprop")},e.prototype.reshape=function(t,r){return Tt("reshape")},e.prototype.cast=function(t,r){return Tt("cast")},e.prototype.tile=function(t,r){return Tt("tile")},e.prototype.pad=function(t,r,n){return Tt("pad")},e.prototype.transpose=function(t,r){return Tt("transpose")},e.prototype.gather=function(t,r,n){return Tt("gather")},e.prototype.gatherND=function(t,r){return Tt("gatherND")},e.prototype.scatterND=function(t,r,n){return Tt("scatterND")},e.prototype.batchToSpaceND=function(t,r,n){return Tt("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,r,n){return Tt("spaceToBatchND")},e.prototype.resizeBilinear=function(t,r,n,s){return Tt("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,r,n){return Tt("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,r,n,s){return Tt("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,r,n){return Tt("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,r,n,s,i,o){return Tt("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,r,n,s,i){return Tt("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,r,n,s,i,o,l){return Tt("LRNGrad")},e.prototype.multinomial=function(t,r,n,s){return Tt("multinomial")},e.prototype.oneHot=function(t,r,n,s){return Tt("oneHot")},e.prototype.cumsum=function(t,r,n,s){return Tt("cumsum")},e.prototype.nonMaxSuppression=function(t,r,n,s,i){return Tt("nonMaxSuppression")},e.prototype.fft=function(t){return Tt("fft")},e.prototype.ifft=function(t){return Tt("ifft")},e.prototype.complex=function(t,r){return Tt("complex")},e.prototype.real=function(t){return Tt("real")},e.prototype.imag=function(t){return Tt("imag")},e.prototype.cropAndResize=function(t,r,n,s,i,o){return Tt("cropAndResize")},e.prototype.depthToSpace=function(t,r,n){return Tt("depthToSpace")},e.prototype.split=function(t,r,n){return Tt("split")},e.prototype.sparseToDense=function(t,r,n,s){return Tt("sparseToDense")},e.prototype.diag=function(t){return Tt("diag")},e.prototype.fill=function(t,r,n){return Tt("fill")},e.prototype.onesLike=function(t){return Tt("onesLike")},e.prototype.zerosLike=function(t){return Tt("zerosLike")},e.prototype.linspace=function(t,r,n){return Tt("linspace")},e.prototype.dispose=function(){return Tt("dispose")},e}();function Tt(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function km(e,t){for(var r=e.length,n=[],s=0;s<r;s++){var i=r-1-s,o=e[i]||1;(t[t.length-1-s]||1)>1&&o===1&&n.unshift(i)}return n}function ci(e,t){for(var r=[],n=0;n<t.length;n++){var s=e[e.length-n-1],i=t.length-n-1,o=t[i];(s==null||s===1&&o>1)&&r.unshift(i)}return r}function Rn(e,t){for(var r=[],n=Math.max(e.length,t.length),s=0;s<n;s++){var i=e[e.length-s-1];i==null&&(i=1);var o=t[t.length-s-1];if(o==null&&(o=1),i===1)r.unshift(o);else if(o===1)r.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");r.unshift(i)}}return r}function Ay(e,t,r,n,s,i,o){o===void 0&&(o="channelsLast");var l,c=lw(t),d=c[0],u=c[1];if(o==="channelsLast")l=[d,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=[d,u,e[1],e[1]]}return Wx(e,l,r,n,s,i,!1,o)}function iw(e,t,r,n,s,i,o){o===void 0&&(o="NDHWC");var l,c,d=YD(t),u=d[0],h=d[1],m=d[2];if(o==="NDHWC")c="channelsLast",l=[u,h,m,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",l=[u,h,m,e[1],e[1]]}return ow(e,l,r,n,s,!1,c,i)}function Wx(e,t,r,n,s,i,o,l){o===void 0&&(o=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3];if(l==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=e[0],m=e[1],u=e[2],h=e[3]}var p,v=t[0],g=t[1],b=t[3],y=lw(r),C=y[0],N=y[1],k=lw(n),S=k[0],D=k[1],E=hv(v,S),T=hv(g,D),A=function(z,re,U,X,B,Y,K,ue){var M,V,W;if(typeof z=="number"){M={top:z,bottom:z,left:z,right:z,type:z===0?"VALID":"NUMBER"};var ee=function(ce,Z,ae,je,de){je==null&&(je=bG(ce,Z,ae));var ie=ce[0],be=ce[1],Ne=Gb((ie-Z+2*je)/ae+1,de);qe(Bs(Ne),function(){return"The output # of rows ("+Ne+") must be an integer. Change the stride and/or zero pad parameters"});var Fe=Gb((be-Z+2*je)/ae+1,de);return qe(Bs(Fe),function(){return"The output # of columns ("+Fe+") must be an integer. Change the stride and/or zero pad parameters"}),[Ne,Fe]}([re,U],Y,X,z,ue);V=ee[0],W=ee[1]}else if(z==="same"){V=Math.ceil(re/X),W=Math.ceil(U/B);var te=Math.max(0,(V-1)*X+Y-re),ne=Math.max(0,(W-1)*B+K-U),se=Math.floor(te/2),oe=te-se,G=Math.floor(ne/2);M={top:se,bottom:oe,left:G,right:ne-G,type:"SAME"}}else{if(z!=="valid")throw Error("Unknown padding parameter: "+z);M={top:0,bottom:0,left:0,right:0,type:"VALID"},V=Math.ceil((re-Y+1)/X),W=Math.ceil((U-K+1)/B)}return{padInfo:M,outHeight:V,outWidth:W}}(s,u,h,C,N,E,T,i),L=A.padInfo,P=A.outHeight,O=A.outWidth,Q=o?b*m:b;return l==="channelsFirst"?p=[d,Q,P,O]:l==="channelsLast"&&(p=[d,P,O,Q]),{batchSize:d,dataFormat:l,inHeight:u,inWidth:h,inChannels:m,outHeight:P,outWidth:O,outChannels:Q,padInfo:L,strideHeight:C,strideWidth:N,filterHeight:v,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:S,dilationWidth:D,inShape:e,outShape:p,filterShape:t}}function ow(e,t,r,n,s,i,o,l){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3],p=c[4];if(o==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);d=e[0],p=e[1],u=e[2],h=e[3],m=e[4]}var v,g=t[0],b=t[1],y=t[2],C=t[4],N=YD(r),k=N[0],S=N[1],D=N[2],E=YD(n),T=E[0],A=E[1],L=E[2],P=hv(g,T),O=hv(b,A),Q=hv(y,L),z=function(K,ue,M,V,W,ee,te,ne,se,oe,G){var ce,Z,ae,je;if(typeof K=="number"){ce={top:K,bottom:K,left:K,right:K,front:K,back:K,type:K===0?"VALID":"NUMBER"};var de=function(ht,At,_t,Wt,Ke,ge){Ke==null&&(Ke=bG(ht,At,Wt));var ve=ht[0],xe=ht[1],Ie=ht[2],Ze=Gb((ve-At+2*Ke)/Wt+1,ge);qe(Bs(Ze),function(){return"The output # of depths ("+Ze+") must be an integer. Change the stride and/or zero pad parameters"});var Ft=Gb((xe-At+2*Ke)/Wt+1,ge);qe(Bs(Ft),function(){return"The output # of rows ("+Ft+") must be an integer. Change the stride and/or zero pad parameters"});var Qe=Gb((Ie-At+2*Ke)/Wt+1,ge);return qe(Bs(Qe),function(){return"The output # of columns ("+Qe+") must be an integer. Change the stride and/or zero pad parameters"}),[Ze,Ft,Qe,_t]}([ue,M,V,1],ne,1,W,K,G);Z=de[0],ae=de[1],je=de[2]}else if(K==="same"){Z=Math.ceil(ue/W),ae=Math.ceil(M/ee),je=Math.ceil(V/te);var ie=(Z-1)*W+ne-ue,be=(ae-1)*ee+se-M,Ne=(je-1)*te+oe-V,Fe=Math.floor(ie/2),Xe=ie-Fe,ct=Math.floor(be/2),xt=be-ct,Re=Math.floor(Ne/2);ce={top:ct,bottom:xt,left:Re,right:Ne-Re,front:Fe,back:Xe,type:"SAME"}}else{if(K!=="valid")throw Error("Unknown padding parameter: "+K);ce={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Z=Math.ceil((ue-ne+1)/W),ae=Math.ceil((M-se+1)/ee),je=Math.ceil((V-oe+1)/te)}return{padInfo:ce,outDepth:Z,outHeight:ae,outWidth:je}}(s,u,h,m,k,S,D,P,O,Q,l),re=z.padInfo,U=z.outDepth,X=z.outHeight,B=z.outWidth,Y=i?C*p:C;return o==="channelsFirst"?v=[d,Y,U,X,B]:o==="channelsLast"&&(v=[d,U,X,B,Y]),{batchSize:d,dataFormat:o,inDepth:u,inHeight:h,inWidth:m,inChannels:p,outDepth:U,outHeight:X,outWidth:B,outChannels:Y,padInfo:re,strideDepth:k,strideHeight:S,strideWidth:D,filterDepth:g,filterHeight:b,filterWidth:y,effectiveFilterDepth:P,effectiveFilterHeight:O,effectiveFilterWidth:Q,dilationDepth:T,dilationHeight:A,dilationWidth:L,inShape:e,outShape:v,filterShape:t}}function bG(e,t,r,n){n===void 0&&(n=1);var s=hv(t,n);return Math.floor((e[0]*(r-1)-r+s)/2)}function lw(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function YD(e){return typeof e=="number"?[e,e,e]:e}function hv(e,t){return t<=1?e:e+(e-1)*(t-1)}function Gb(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Uv(e){var t=lw(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function hl(e,t){return Uv(e)||Uv(t)}function jT(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function yG(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var n=Ua(e.shape),s=e.toFloat(),i=r.complex(s,n);return n.dispose(),s.dispose(),i}if(!J5e(e.dtype,t))return dt.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=r.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return r.int(e);if(t==="bool"){var l=jr(0,e.dtype);return i=r.notEqual(e,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function KD(e,t){return dt.makeTensorFromDataId(e.dataId,t,e.dtype)}function jG(e,t,r){var n=(t-e)/(r-1),s=h1(r,"float32");s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+n;return Js(s,"float32")}function XD(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var r=new Float32Array(2*e.length),n=0;n<r.length;n+=2)r[n]=e[n/2],r[n+1]=t[n/2];return r}function eB(e,t){return{real:e[2*t],imag:e[2*t+1]}}function k3e(e,t,r,n){e[2*n]=t,e[2*n+1]=r}function _3e(e,t,r){var n=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(n),imag:Math.sin(n)}}function E3e(e,t,r){var n=function(i,o,l){return function(c,d,u){for(var h=0,m=c.length,p=0,v=!1;h<m;){var g=u(d,c[p=h+(m-h>>>1)]);g>0?h=p+1:(m=p,v=!g)}return v?h:-h-1}(i,o,l||D3e)}(e,t,r),s=n<0?-(n+1):n;e.splice(s,0,t)}function D3e(e,t){return e>t?1:e<t?-1:0}function NT(e,t,r,n,s){return NG(e,t,r,n,s,0).selectedIndices}function wT(e,t,r,n,s,i){var o=NG(e,t,r,n,s,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function NG(e,t,r,n,s,i,o,l){l===void 0&&(l=!1);for(var c=Array.from(t).map(function(k,S){return{score:k,boxIndex:S,suppressBeginIndex:0}}).filter(function(k){return k.score>s}).sort(tB),d=i>0?-.5/i:0,u=[],h=[];u.length<r&&c.length>0;){var m=c.pop(),p=m.score,v=m.boxIndex,g=m.suppressBeginIndex;if(p<s)break;for(var b=!1,y=u.length-1;y>=g;--y){var C=A3e(e,v,u[y]);if(C>=n){b=!0;break}if(m.score=m.score*T3e(n,d,C),m.score<=s)break}m.suppressBeginIndex=u.length,b||(m.score===p?(u.push(v),h.push(m.score)):m.score>s&&E3e(c,m,tB))}var N=u.length;return l&&(u.fill(0,N),h.fill(0,N)),{selectedIndices:Js(u,"int32"),selectedScores:Js(h,"float32"),numValidOutputs:jr(N,"int32")}}function A3e(e,t,r){var n=e.subarray(4*t,4*t+4),s=e.subarray(4*r,4*r+4),i=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),l=Math.max(n[0],n[2]),c=Math.max(n[1],n[3]),d=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),m=Math.max(s[1],s[3]),p=(l-i)*(c-o),v=(h-d)*(m-u);if(p<=0||v<=0)return 0;var g=Math.max(i,d),b=Math.max(o,u),y=Math.min(l,h),C=Math.min(c,m),N=Math.max(y-g,0)*Math.max(C-b,0);return N/(p+v-N)}function T3e(e,t,r){var n=Math.exp(t*r*r);return r<=e?n:0}function tB(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function wG(e,t,r){var n=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(i){s[r]=i;var o=e.slice(n,s);return n[r]+=i,o})}function SG(e,t){for(var r=new Array(e.rank),n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];var s=pn(r,e.dtype);for(n=0;n<s.values.length;++n){for(var i=s.indexToLoc(n),o=new Array(e.rank),l=0;l<o.length;l++)o[l]=i[l]%e.shape[l];var c=e.locToIndex(o);s.values[n]=e.values[c]}return s.toTensor()}function CG(e,t,r,n,s){for(var i=t[t.length-1],o=[e.length/i,i],l=o[0],c=o[1],d=_y(r,l*n),u=_y("int32",l*n),h=0;h<l;h++){for(var m=h*c,p=e.subarray(m,m+c),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});v.sort(function(k,S){return S.value-k.value});var b=h*n,y=d.subarray(b,b+n),C=u.subarray(b,b+n);for(g=0;g<n;g++)y[g]=v[g].value,C[g]=v[g].index}var N=t.slice();return N[N.length-1]=n,[Hi(d,N,r),Hi(u,N,"int32")]}function ST(e,t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(n);var s=pn(e,"int32"),i=pn([r.length,e.length],"int32");for(n=0;n<r.length;n++){var o=s.indexToLoc(r[n]),l=n*e.length;i.values.set(o,l)}return i.toTensor()}var I3e=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("float v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        float result = `+n+`;
        setOutput(result);
      }
    `},P3e=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("vec4 v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        vec4 result = `+n+`;
        setOutput(result);
      }
    `},O3e=function(e,t,r){this.variableNames=["A"];var n=e.windowSize,s=e.batchSize,i=e.inSize,o=Math.ceil(i/n);r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];var l=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+n+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function kG(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(r){return e+"."+r})}function nl(e,t){return t===1?[e]:kG(e,t)}function yo(){var e,t,r,n,s,i,o,l,c,d;return $t().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",n="in",s="texture",i="outputColor",o="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",n="varying",s="texture2D",i="gl_FragColor",o="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:n,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function Zp(e,t,r){r===void 0&&(r="index");var n=Lu(t);return n.map(function(s,i){return"int "+e[i]+" = "+r+" / "+s+"; "+(i===n.length-1?"int "+e[i+1]+" = "+r+" - "+e[i]+" * "+s:"index -= "+e[i]+" * "+s)+";"}).join("")}function CT(e){var t=Lu(e).map(function(r){return r.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var _G=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function M3e(e,t,r,n){var s=[];e.forEach(function(p){var v=Rr(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?s.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(s.push("uniform sampler2D "+p.name+";"),s.push("uniform int offset"+p.name+";"))});var i,o,l=s.join(`
`),c=e.map(function(p){return function(v,g,b){b===void 0&&(b=!1);var y="";y+=b?EG(v):q0(v);var C=v.shapeInfo.logicalShape,N=g.logicalShape;return C.length<=N.length&&(y+=b?function(k,S){var D,E=k.name,T=E.charAt(0).toUpperCase()+E.slice(1),A="get"+T+"AtOutCoords",L=k.shapeInfo.logicalShape.length,P=S.logicalShape.length,O=km(k.shapeInfo.logicalShape,S.logicalShape),Q=Fa(P),z=P-L,re=["x","y","z","w","u","v"];D=L===0?"":P<2&&O.length>=1?"coords = 0;":O.map(function(M){return"coords."+re[M+z]+" = 0;"}).join(`
`);var U="";U=P<2&&L>0?"coords":k.shapeInfo.logicalShape.map(function(M,V){return"coords."+re[V+z]}).join(", ");var X="return outputValue;",B=Rr(k.shapeInfo.logicalShape)===1,Y=Rr(S.logicalShape)===1;if(L!==1||B||Y){if(B&&!Y)X=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(O.length){var K=L-2,ue=L-1;O.indexOf(K)>-1&&O.indexOf(ue)>-1?X="return vec4(outputValue.x);":O.indexOf(K)>-1?X="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":O.indexOf(ue)>-1&&(X="return vec4(outputValue.xx, outputValue.zz);")}}else X=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+Q+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+T+"("+U+`);
      `+X+`
    }
  `}(v,g):function(k,S){var D=k.name,E=D.charAt(0).toUpperCase()+D.slice(1),T="get"+E+"AtOutCoords",A=S.texShape,L=k.shapeInfo.texShape,P=k.shapeInfo.logicalShape.length,O=S.logicalShape.length;if(!k.shapeInfo.isUniform&&P===O&&k.shapeInfo.flatOffset==null&&Ci(L,A))return`
      float `+T+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var Q,z=Fa(O),re=km(k.shapeInfo.logicalShape,S.logicalShape),U=O-P,X=["x","y","z","w","u","v"];Q=P===0?"":O<2&&re.length>=1?"coords = 0;":re.map(function(Y){return"coords."+X[Y+U]+" = 0;"}).join(`
`);var B="";return B=O<2&&P>0?"coords":k.shapeInfo.logicalShape.map(function(Y,K){return"coords."+X[K+U]}).join(", "),`
    float `+T+`() {
      `+z+` coords = getOutputCoords();
      `+Q+`
      return get`+E+"("+B+`);
    }
  `}(v,g)),y}(p,t,n)}).join(`
`),d=t.texShape,u=yo(),h=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),m=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+R3e+`
    `+F3e+`
    `+L3e+`
  `}(u);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];if(Ci(k,S))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var E=Math.ceil(k[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=p,b=v,y=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],C=Math.ceil(g[2]/2),N=C*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+N+`;
      index -= b * `+N+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(k,S){for(var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],E=Math.ceil(k[k.length-1]/2),T=E*Math.ceil(k[k.length-2]/2),A=T,L="",P="b, r, c",O=2;O<k.length-1;O++)A*=k[k.length-O-1],L=`
      int b`+O+" = index / "+A+`;
      index -= b`+O+" * "+A+`;
    `+L,P="b"+O+", "+P;return`
    ivec`+k.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+L+`

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+k.length+"("+P+`);
    }
  `}(p,v)}var g,b,y,C,N}(t.logicalShape,d),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,C){return C[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return resTexRC.x * `+C[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,C){return Ci(y,C)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=v,b=Zp(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,C){var N=Zp(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      `+N+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,C){var N=Zp(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+C[0]+`,
                             `+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+N+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,C){var N=Zp(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+N+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var g,b}(t.logicalShape,d),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),n&&(m+=B3e),[m,h,o,l,i,c,r].join(`
`)}function q0(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return"float "+s+"() {return "+n+";}";var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(o===1&&l===1)return`
      float `+s+`() {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=r.shapeInfo.texShape,d=c[0],u=c[1],h=Ip(n);return`
    float `+s+`() {
      vec2 uv = uvFromFlat(`+d+", "+u+", "+h+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 1:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return`
      float `+s+`(int index) {
        `+M0(r)+`
      }
    `;var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(l===1&&o===1)return`
      float `+s+`(int index) {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=Ip(n);return l===1?`
      float `+s+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:o===1?`
      float `+s+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+s+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+l+", index + "+c+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 2:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=r.shapeInfo.texShape;if(o!=null&&Ci(n,o)){var l=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `}var d=$p(n),u=d.newShape,h=d.keptDims,m=u;if(m.length<n.length){var p=z0(r,m);return`
      `+q0(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+H0(["row","col"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+n[1]+`, 1)));
        `+M0(r)+`
      }
    `;var v=o[0],g=o[1],b=Ip(s);return g===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+s+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+n[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+v+", "+g+`, index);
    return sampleTexture(`+s+`, uv);
  }
`}(e);case 3:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[1]*n[2],l=n[2],c=$p(n),d=c.newShape,u=c.keptDims,h=d;if(h.length<n.length){var m=z0(r,h);return`
        `+q0(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+H0(["row","col","depth"],u)+`);
        }
      `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+l+`, 1)));
        `+M0(r)+`
      }
    `;var p=r.shapeInfo.texShape,v=p[0],g=p[1],b=r.shapeInfo.flatOffset;if(g===o&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+v+`.0);
          return sampleTexture(`+s+`, uv);
        }
      `;if(g===l&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+n[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `;var y=Ip(s);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+l+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+g+`, index);
        return sampleTexture(`+s+`, uv);
      }
  `}(e);case 4:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[3],l=n[2]*o,c=n[1]*l,d=$p(n),u=d.newShape,h=d.keptDims;if(u.length<n.length){var m=z0(r,u);return`
      `+q0(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+H0(["row","col","depth","depth2"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+o+`, 1)));
        `+M0(r)+`
      }
    `;var p=r.shapeInfo.flatOffset,v=r.shapeInfo.texShape,g=v[0],b=v[1];if(b===c&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(b===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+n[1]*n[2]+", "+n[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var y=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+b+", index + "+y+`);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 5:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[4],l=n[3]*o,c=n[2]*l,d=n[1]*c,u=$p(n),h=u.newShape,m=u.keptDims;if(h.length<n.length){var p=z0(r,h);return`
      `+q0(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+H0(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+o+`)) +
          depth3;
        `+M0(r)+`
      }
    `;var v=r.shapeInfo.flatOffset,g=r.shapeInfo.texShape,b=g[0],y=g[1];if(y===d&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(y===o&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]+`,
               `+n[2]*n[3]+", "+n[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var C=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+o+" + depth3 + "+C+`;
      vec2 uv = uvFromFlat(`+b+", "+y+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 6:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=$p(n),l=o.newShape,c=o.keptDims;if(l.length<n.length){var d=z0(r,l);return`
      `+q0(d)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+H0(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var u=n[5],h=n[4]*u,m=n[3]*h,p=n[2]*m,v=n[1]*p;if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+m+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+M0(r)+`
      }
    `;var g=r.shapeInfo.flatOffset,b=r.shapeInfo.texShape,y=b[0],C=b[1];if(C===v&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+m+", "+h+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(C===u&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]*n[4]+`,
               `+n[2]*n[3]*n[4]+`,
               `+n[3]*n[4]+`,
               `+n[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var N=Ip(s);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+m+` +
          depth2 * `+h+" + depth3 * "+u+" + depth4 + "+N+`;
      vec2 uv = uvFromFlat(`+y+", "+C+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function EG(e){var t,r,n;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),n=yo(),`
    vec4 `+r+`() {
      return `+n.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(s){var i=s.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),l=s.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=yo();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=c[0],u=c[1],h=yo();if(c!=null&&Ci(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+d+`.0);

        return `+h.texture2D+"("+o+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+m[0]+", "+m[1]+`, row, col);
      return `+h.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var u=i.slice(1),h=z0(s,u);return`
        `+EG(h)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+H0(["b","row","col"],[1,2])+`);
        }
      `}var m=d[0],p=d[1],v=Math.ceil(i[2]/2),g=v*Math.ceil(i[1]/2),b=yo();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+p+", "+g+", "+v+`, b, row, col);
      return `+b.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(s){for(var i=s.shapeInfo.logicalShape,o=i.length,l=s.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=s.shapeInfo.texShape,u=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],h=u[0],m=u[1],p=Math.ceil(i[o-1]/2),v=p*Math.ceil(i[o-2]/2),g="int b, int row, int col",b="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)g="int b"+y+", "+g,v*=i[o-y-1],b="b"+y+" * "+v+" + "+b;var C=yo();return`
    vec4 `+c+"("+g+`) {
      int index = `+b+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+h+`);
      return `+C.texture2D+"("+l+`, uv);
    }
  `}(e)}}var R3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,F3e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L3e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,B3e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ip(e){return"offset"+e}function M0(e){var t=e.name,r=Rr(e.shapeInfo.logicalShape);return r<2?"return "+t+";":`
    for (int i = 0; i < `+r+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Fa(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function z0(e,t){var r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function H0(e,t){return t.map(function(r){return e[r]}).join(", ")}var U3e=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,qe(e.length>2,function(){return"Packed arg"+(r.charAt(0).toUpperCase()+r.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],i=Math.ceil(s/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),n||this.variableNames.push("bestIndicesA");var o,l,c=this.outputShape,d=c.length,u=Fa(d),h=nl("coords",d);if(i===1){var m=Fa(l=d+1);o=`
        `+m+" sourceLocR = "+m+"("+h.join()+`, 0);
        ++`+h[d-1]+`;
        `+m+" sourceLocG = "+m+"("+h.join()+`, 0);
        ++`+h[d-2]+`;
        `+m+" sourceLocA = "+m+"("+h.join()+`, 0);
        --`+h[d-1]+`;
        `+m+" sourceLocB = "+m+"("+h.join()+`, 0);
        --`+h[d-2]+";"}else l=d,o=`
        `+u+` sourceLocR = coords;
        ++`+h[d-1]+`;
        `+u+` sourceLocG = coords;
        ++`+h[d-2]+`;
        `+u+` sourceLocA = coords;
        --`+h[d-1]+`;
        `+u+` sourceLocB = coords;
        --`+h[d-2]+";";var p=["x","y","z","w","u","v"].slice(0,l),v="."+p[l-1],g=p.map(function(T){return"int "+T}),b=nl("sourceLocR",l-1).concat("inIdx.r"),y=nl("sourceLocG",l-1).concat("inIdx.g"),C=nl("sourceLocB",l-1).concat("inIdx.b"),N=nl("sourceLocA",l-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",S=n?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+N.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+N.join()+") : 0.)",E=n?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+h[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+h[d-2]+" < "+(c[d-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+S+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+k+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},$3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},V3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=u-1-e.padInfo.front,v=h-1-e.padInfo.top,g=m-1-e.padInfo.left,b=1/(t*r*n);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+s+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},q3e=function(e,t,r,n,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Rn(e,t),Rn(e,r);var o="0.0";n!=null&&(Rn(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="1.0";s!=null&&(Rn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},z3e=function(e,t,r,n,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Rn(e,t),Rn(e,r);var o="vec4(0.0)";n!=null&&(Rn(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="vec4(1.0)";s!=null&&(Rn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},H3e="return areal * breal - aimag * bimag;",W3e="return areal * bimag + aimag * breal;",rB=function(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Rn(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},PE="return a + b;",OE="return a - b;",nB="return a * b;",DG="return (a < 0.) ? b * a : a;",gs=function(e,t,r){this.variableNames=["A","B"],this.outputShape=Rn(t,r),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},AG=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Oh=function(e,t,r,n){n===void 0&&(n=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Rn(t,r);var s=this.outputShape.length,i="";if(n)if(s===0||Rr(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Fa(s)+` coords = getOutputCoords();
        `,s===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=nl("coords",s);i+=`
            bool nextRowOutOfBounds =
              (`+o[s-2]+" + 1) >= "+this.outputShape[s-2]+`;
            bool nextColOutOfBounds =
              (`+o[s-1]+" + 1) >= "+this.outputShape[s-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},G3e=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),Y3e=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),K3e=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},X3e=function(e){this.outputShape=[],this.outputShape=Bv(e,1),this.variableNames=e.map(function(l,c){return"T"+c});var t=new Array(e.length-1);t[0]=e[0][1];for(var r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];var n=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(r=1;r<t.length;r++){var s=t[r-1];n.push("else if (yC < "+t[r]+") setOutput(getT"+r+"(yR, yC-"+s+"));")}var i=t.length,o=t[t.length-1];n.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+n.join(`
        `)+`
      }
    `},Q3e=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Bv(e,t);var r=this.outputShape,n=r.length,s=Fa(n),i=nl("coords",n),o=["x","y","z","w","u","v"].slice(0,n);this.variableNames=e.map(function(b,y){return"T"+y});var l=new Array(e.length-1);l[0]=e[0][t];for(var c=1;c<l.length;c++)l[c]=l[c-1]+e[c][t];var d=o[t],u=o.slice(-2),h=o.join(),m="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+u.join()+`));
        }`;for(c=1;c<l.length;c++){var p=l[c-1];m+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+tN(o,d,p)+`),
            vec2(`+tN(u,d,p)+`));
        }`}var v=l.length,g=l[l.length-1];m+=`
        return getChannel(
          getT`+v+"("+tN(o,d,g)+`),
          vec2(`+tN(u,d,g)+"));",this.userCode=`
      float getValue(`+o.map(function(b){return"int "+b})+`) {
        `+m+`
      }

      void main() {
        `+s+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[n-1]+" = "+i[n-1]+` + 1;
        if (`+i[n-1]+" < "+r[n-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[n-2]+" = "+i[n-2]+` + 1;
        if (`+i[n-2]+" < "+r[n-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[n-1]+" = "+i[n-1]+` - 1;
        if (`+i[n-2]+" < "+r[n-2]+` &&
            `+i[n-1]+" < "+r[n-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function tN(e,t,r){var n=e.indexOf(t);return e.map(function(s,i){return i===n?s+" - "+r:s}).join()}var J3e=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Z3e=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},eAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+s+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+r+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+n+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=n-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+s+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+r+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+r+` - 1 - wR;

            for (int wC = 0; wC < `+n+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+n+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},rAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},nAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},aB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,m=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,y=v?3:1,C="",N="";r&&(C=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,N="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+o+", "+l+`);
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+k+`
        `+N+`
        setOutput(result);
      }
    `},aAe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,r=e.padInfo.top,n=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,m=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+r+", "+n+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},sB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,g="",b="";r&&(g=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,b="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+s+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+b+`
        setOutput(result);
      }
    `},iB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=p,g="int xR; int xC; int xCOffset;",b=0;b<m;b++)for(var y=0;y<p;y++)g+=`
          vec4 xTexelR`+b+"C"+2*y+` = vec4(0.);
          vec4 wR`+b+"C"+y+` = vec4(0.);
          vec4 xR`+b+"C"+y+" = vec4(0.);";for(b=0;b<m;b++)for(var C=0;C<v;C++){if(g+=`
          xR = xRCorner + `+b*u+`;
          xC = xCCorner + `+(y=2*C)*h+`;
        `,d===1){if(y<p&&(g+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+y+" = vec4(previous.zw, xTexelR"+b+"C"+y+`.xy);
                } else {
                  xR`+b+"C"+y+" = vec4(0, 0, xTexelR"+b+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+s+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xR`+b+"C"+y+" = xTexelR"+b+"C"+y+`;
              `,y+1<p)){var N=l%2==0?YW(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(g+=`
                  xCOffset = xC + `+l%2+" + "+N+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+s+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+y+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+N+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(y+1)+" = xTexelR"+b+"C"+(y+2)+`;
                `}}else y<p&&(g+=`
              if(xR >= 0 && xR < `+s+`) {
            `,l%2==1?(g+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
              `,y+1<p&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(y+1)+" = vec4(xTexelR"+b+"C"+(y+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".xy, xTexelR"+b+"C"+(y+2)+`.xy);
              `,y+1<p&&(g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
                `)),g+="}");y<p&&(g+=`
            vec4 wTexelR`+b+"C"+y+" = getW("+b+", "+y+`, d1, q);
            wR`+b+"C"+y+" = vec4(wTexelR"+b+"C"+y+".xz, wTexelR"+b+"C"+y+`.xz);
          `,y+1<p&&(g+=`
              vec4 wTexelR`+b+"C"+(y+1)+" = getW("+b+", "+(y+1)+`, d1, q);
              wR`+b+"C"+(y+1)+` =
                vec4(wTexelR`+b+"C"+(y+1)+".xz, wTexelR"+b+"C"+(y+1)+".xz);"))}for(b=0;b<m;b++)for(y=0;y<p;y++)g+="dotProd += xR"+b+"C"+y+" * wR"+b+"C"+y+";";var k="",S="";r&&(k=n?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`vec4 activation(vec4 x) {
          `+r+`
        }`,S="result = activation(result);");var D=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+k+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+D+`
        `+S+`
        setOutput(result);
      }
    `},sAe=function(e,t,r,n,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],l=e[2],c=e[3],d=t[0],u=r[0],h=r[1];this.outputShape=[d,u,h,c];var m=n==="bilinear"?1:0,p=[o-1+".0",l-1+".0"],v=p[0],g=p[1],b=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=b[0],C=b[1],N=b[2],k=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],S=k[0],D=k[1],E=k[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+S+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+C+`;
        float width_scale = `+D+`;

        float in_y = `+N+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+s+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+s+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},iAe=function(e,t,r){this.variableNames=["x"],this.outputShape=e;var n=e.length,s=e[e.length-1],i=r?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(r?"return "+s+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Fa(n)+` coords = getOutputCoords();
        int end = `+oB(n,"coords")+`;
        float val = 0.0;
        for (int i = `+s+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+oB(n,"coords")+` = idx;
          val += getX(`+function(o,l){if(o===1)return""+l;if(o===2)return l+".x, "+l+".y";if(o===3)return l+".x, "+l+".y, "+l+".z";if(o===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(n,"coords")+`);
        }
        setOutput(val);
      }
    `};function oB(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var oAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=yo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+r.output+` = result;
      }
    `},lAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=yo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+r.output+` = result;
      }
    `},cAe=function(){function e(t,r,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+r+`;
      int offset_h = imod(h, `+r+`);
      int in_w = w / `+r+`;
      int offset_w = imod(w, `+r+`);
      int offset_d = (offset_h * `+r+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),dAe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},uAe=function(e){this.variableNames=["A"],this.outTexUsage=Hl.DOWNLOAD;var t=yo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},hAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Hl.DOWNLOAD;var t=yo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},fAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"];var n=yo(),s=t[0],i=t[1];this.outputShape=e;var o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+CT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
        vec4 values = `+n.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+n.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},mAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=yo(),s=t[0],i=t[1];this.outputShape=e;var o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var u=2*c+d;o+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+e[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
              values = `+n.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+CT(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+n.output+" = "+l+`;
      }
    `},pAe="return real * expR - imag * expI;",xAe="return real * expI + imag * expR;",lB=function(e,t,r){this.variableNames=["real","imag"];var n=t[1];this.outputShape=t;var s=r?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=r?n+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+s+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+n+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+n+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},vAe=function(){function e(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.valueLoc==null&&(r.valueLoc=n.getUniformLocationNoThrow(s,"value")),n.gl.uniform1f(r.valueLoc,t)}},e}(),gAe=function(e,t,r){this.variableNames=["A","indices"];var n=e.slice();n[r]=t,this.outputShape=n,this.rank=n.length;var s=Fa(this.rank),i=function(o,l){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],h=0;h<o.length;h++)h===l?u.push("int(getIndices("+d[h]+"))"):u.push(""+d[h]);return u.join()}(e,r);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},bAe=function(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;var n=Fa(t.length),s=Fa(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+n+" strides = "+n+"("+this.strides+`);
         void main() {
          `+s+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function yAe(e,t){var r=yo();return pDe(e,t,r.version+`
    precision highp float;
    `+r.attribute+` vec3 clipSpacePos;
    `+r.attribute+` vec2 uv;
    `+r.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function jAe(e,t){return yDe(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function NAe(e,t){return jDe(e,t,new Uint16Array([0,1,2,2,1,3]))}function m1(e,t,r,n,s,i,o){wDe(r,n);var l=NDe(e,t),c=e.TEXTURE_2D;return Fr(e,t,function(){return e.bindTexture(c,l)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Fr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Fr(e,t,function(){return e.texImage2D(c,0,s,r,n,0,i,o,null)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),l}function wAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function SAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function CAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function kAe(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function _Ae(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function EAe(e,t,r,n){return Fr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),K8(e,t,r,"clipSpacePos",n,3,20,0)&&K8(e,t,r,"uv",n,2,20,12)}function DAe(e,t,r,n,s,i,o){var l,c,d;Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),i instanceof Uint8Array?(l=new Uint8Array(n*s*4),c=e.UNSIGNED_BYTE,d=e.RGBA):(l=new Float32Array(n*s*4),c=e.FLOAT,d=o.internalFormatPackedFloat),l.set(i),Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,d,n,s,0,e.RGBA,c,l)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function AAe(e,t,r,n){Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),n.data instanceof Uint8Array?Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)}):Fr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),Fr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function TAe(e,t,r,n,s){var i=e.createBuffer();Fr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*r*n;return Fr(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Fr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,0)}),Fr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function IAe(e,t,r){var n=e,s=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,s),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),s}function PAe(e,t,r,n,s){var i=PS(r,n),o=i[0],l=i[1],c=new Uint8Array(r*n*4);return Fr(e,t,function(){return e.readPixels(0,0,o,l,s.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function OAe(e,t,r,n,s,i,o,l){var c=e,d=new Float32Array(function(u,h){var m=f1(u,h);return m[0]*m[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function MAe(e,t,r,n){var s=new Float32Array(r*n*4);return Fr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,s)}),s}var RAe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var r=$t().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,dDe(r,t)):this.gl=Ju(r);var n="WEBGL_color_buffer_float";if($t().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Qj(this.gl,this.debug,"OES_texture_float"),Uc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Qj(this.gl,this.debug,"OES_texture_half_float");else if($t().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Uc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Qj(this.gl,this.debug,"EXT_color_buffer_half_float");else if($t().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Uc(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Uc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=jAe(this.gl,this.debug),this.indexBuffer=NAe(this.gl,this.debug),this.framebuffer=SDe(this.gl,this.debug),this.textureConfig=pT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return $t().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var r=this.gl;Fr(r,this.debug,function(){return r.finish()}),Fr(r,this.debug,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),Fr(r,this.debug,function(){return r.deleteFramebuffer(t.framebuffer)}),Fr(r,this.debug,function(){return r.bindBuffer(r.ARRAY_BUFFER,null)}),Fr(r,this.debug,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}),Fr(r,this.debug,function(){return r.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,r){return this.throwIfDisposed(),wAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,r){return this.throwIfDisposed(),SAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,r){return this.throwIfDisposed(),CAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,r){this.throwIfDisposed(),AAe(this.gl,this.debug,t,r)},e.prototype.uploadDenseMatrixToTexture=function(t,r,n,s){this.throwIfDisposed(),DAe(this.gl,this.debug,t,r,n,s,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,r){return this.throwIfDisposed(),_Ae(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,r){return this.throwIfDisposed(),kAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var r=this;this.throwIfDisposed(),this.outputTexture===t&&(X8(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Fr(this.gl,this.debug,function(){return r.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return PAe(s.gl,s.debug,r,n,s.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,r,n,s,i,o){return OAe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,r){return IAe(this.gl,t,r)},e.prototype.createBufferFromTexture=function(t,r,n){this.bindTextureToFrameBuffer(t);var s=TAe(this.gl,this.debug,r,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),s},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var r,n,s=this;if($t().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var l=i.clientWaitSync(o,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},r=o}else $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),n=function(){return s.isQueryAvailable(r,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:r,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return MAe(s.gl,s.debug,r,n)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var r=this.gl,n=xDe(r,this.debug,t),s=yAe(r,this.debug),i=gDe(r,this.debug);return Fr(r,this.debug,function(){return r.attachShader(i,s)}),Fr(r,this.debug,function(){return r.attachShader(i,n)}),bDe(r,this.debug,i),this.debug&&DE(r,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=EAe(r,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var r=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Fr(this.gl,this.debug,function(){return r.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var r=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&DE(this.gl,this.debug,this.program),Fr(this.gl,this.debug,function(){return r.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,r,n){return n===void 0&&(n=!0),this.throwIfDisposed(),n?kDe(this.gl,this.debug,t,r):_De(this.gl,t,r)},e.prototype.getAttributeLocation=function(t,r){var n=this;return this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,r)})},e.prototype.getUniformLocationNoThrow=function(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)},e.prototype.setInputMatrixTexture=function(t,r,n){this.throwIfDisposed(),this.throwIfNoProgram(),EDe(this.gl,this.debug,this.program,t,r,n)},e.prototype.setOutputMatrixTexture=function(t,r,n){this.setOutputMatrixTextureDriver(t,n,r)},e.prototype.setOutputPackedMatrixTexture=function(t,r,n){this.throwIfDisposed();var s=f1(r,n),i=s[0],o=s[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,r,n,s){this.setOutputMatrixWriteRegionDriver(n,t,s,r)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,r,n,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&DE(this.gl,this.debug,this.program),Jj(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Fr(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qj(this.gl,this.debug,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if($t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,r=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,n),n}var s=this.getQueryTimerExtensionWebGL1(),i=s.createQueryEXT();return s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if($t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var r=this.gl,n=this.getQueryTimerExtensionWebGL2();r.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Ir(this,void 0,void 0,function(){var r=this;return Pr(this,function(n){switch(n.label){case 0:return[4,q8(function(){return r.disposed||r.isQueryAvailable(t,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,r){if(r===0)return null;if(r===2){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,r){if(r===0)return!0;if(r===2){var n=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(s=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var r=this;return new Promise(function(n){r.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var t=function(n){for(var s=0;s<n.length&&n[s]();++s);return s-1}(this.itemsToPoll.map(function(n){return n.isDoneFn})),r=0;r<=t;++r)(0,this.itemsToPoll[r].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,r){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||q8(function(){return n.pollItems(),n.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),AE(this.gl,this.debug,t,this.framebuffer),this.debug&&Jj(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(AE(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Jj(this.gl)):X8(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,r){this.bindTextureToFrameBuffer(t);var n=r();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(t,r,n){this.throwIfDisposed();var s=this.gl;AE(s,this.debug,t,this.framebuffer),this.debug&&Jj(s),this.outputTexture=t,Fr(s,this.debug,function(){return s.viewport(0,0,r,n)}),Fr(s,this.debug,function(){return s.scissor(0,0,r,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,r,n,s){var i=this;this.throwIfDisposed(),Fr(this.gl,this.debug,function(){return i.gl.scissor(t,r,n,s)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function cB(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(r,n){var s=r.logicalShape,i=t[n],o=i.shape;if(!Ci(s,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+s+" and "+o+" must match");if(!r.isUniform||!i.isUniform){var l=r.texShape,c=i.isUniform?null:i.texData.texShape;if(!Ci(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var FAe=function(e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n=r.filterWidth,s=r.inChannels,i=r.strideWidth,o=r.strideHeight,l=r.padInfo,c=r.outWidth,d=r.dilationWidth,u=r.dilationHeight,h=r.dataFormat,m=l.left,p=l.top,v=s*n,g=yo(),b=h==="channelsLast",y=b?0:1,C=b?1:2,N="",k=0;k<=1;k++)for(var S=0;S<=1;S++)N+=`
          blockIndex = rc.y + `+S+`;
          pos = rc.x + `+k+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+v+".) / "+s+`.));

              if(d1 < `+t[C]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+s+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+N+`

        `+g.output+` = result;
      }
    `},LAe=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[];var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},BAe=function(e,t,r,n,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=n,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+n+") * norm + float("+r+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+n+`)
                * float(`+s+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+s+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},UAe=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},$Ae=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,r=e.strideWidth,n=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
          wR += `+n+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},VAe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=l-1-e.padInfo.front,h=c-1-e.padInfo.top,m=d-1-e.padInfo.left,p=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+h+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+r+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+n+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ME=function(e,t,r,n,s,i,o){r===void 0&&(r=!1),n===void 0&&(n=!1),s===void 0&&(s=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",u=n?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=n?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+m[0]+`);
          result += (`+h[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+v+`

        setOutput(result);
      }
    `},qAe=function(){function e(t,r,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(r-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(r-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.seedLoc==null&&(r.seedLoc=n.getUniformLocation(s,"seed")),n.gl.uniform1f(r.seedLoc,t)}},e}(),zAe=function(e,t,r,n){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+n+"), float("+r+`),
                      float(index == coords.y)));
      }
    `},HAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var r=nl("rc",t),n=Fa(t),s=function(l,c,d){if(l===1)return"rc > "+c[0];for(var u="",h=l-2;h<l;h++)u+=d[h]+" >= "+c[h],h<l-1&&(u+="||");return u}(t,e,r),i=function(l,c,d,u){if(l===1)return"";var h=u.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `}(t,e[e.length-1],e[e.length-2],r),o=function(l,c){var d=l.length,u=function(h,m){for(var p=[],v=0;v<=1;v++)for(var g=0;g<=1;g++){for(var b=(v===0?"r":"rp1")+", "+(g===0?"c":"cp1"),y=2;y<h;y++)b=m[m.length-1-y]+","+b;p.push(b)}return p}(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,r);this.userCode=`
        void main() {
          `+n+` rc = getOutputCoords();

          if(`+s+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},WAe=function(e,t,r){this.variableNames=["x"],this.outputShape=t.map(function(c,d){return c[0]+e[d]+c[1]});var n=e.length,s=Fa(n),i=t.map(function(c){return c[0]}).join(","),o=t.map(function(c,d){return c[0]+e[d]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n);this.userCode=n!==1?`
      `+s+" start = "+s+"("+i+`);
      `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+r+`));
        } else {
          `+s+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+r+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},GAe=function(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(b,y){return b[0]+e[y]+b[1]});for(var n=e.length,s=Fa(n),i=t.map(function(b){return b[0]}).join(","),o=t.map(function(b,y){return b[0]+e[y]}).join(","),l=nl("rc",n),c=nl("source",n),d=l[n-1]+" < "+this.outputShape[n-1],u=n===1?"source":"vec2("+c.slice(-2).join()+")",h=[s+" rc = outputLoc;",l[n-1]+` += 1;
       if(`+d+`) {
      `,n===1?"":`}
       rc = outputLoc;
       `+l[n-2]+` += 1;
       if(`+l[n-2]+" < "+this.outputShape[n-2]+") {",n===1?"":"  "+l[n-1]+` += 1;
         if(`+d+") {"],m=n===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=n===1?2:4;v<g;v++)p+=`
        `+h[v]+`
        if (`+m+`) {
          result[`+v+"] = float("+r+`);
        } else {
          `+s+` source = rc - start;
          result[`+v+"] = getChannel(getX("+c.join()+"), "+u+`);
        }
      `;p+=n===1?"} ":"}}",this.userCode=`
      const `+s+" start = "+s+"("+i+`);
      const `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},RE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var m=t==="avg",p="0.0";if(m||(p="-1.0 / 1e-20"),r)this.userCode=`
        const ivec2 strides = ivec2(`+s+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var g=4*Math.floor(n/4),b=n%4,y=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+s+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+h+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},FE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r)this.userCode=`
        const ivec3 strides =
            ivec3(`+s+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var C=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(C="avgValue / count");var N=4*Math.floor(n/4),k=n%4,S=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+N+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+S+`
            }

            int xC = xCCorner + `+N+`;
            if (`+(k===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+S+`
            }
          }
          setOutput(`+C+`);
        }
      }
    `}},YAe=function(e,t){this.variableNames=["x"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=Math.ceil(s/r);this.outputShape=[n,i];var o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var d=4*Math.floor(r/4),u=r%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(u===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+c+`);
      }
    `},KAe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",n=0;n<4;n++){var s="thisRC = rc;";n%2==1&&(s+="thisRC.z += 1;"),n>1&&(s+="thisRC.y += 1;"),r+=`
        `+s+`
        `+(n>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+n+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(n>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Zp(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+CT(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+r+`

        setOutput(result);
      }
    `},XAe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(s-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},QAe=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},JAe=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(r-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},ZAe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+s+`) - 1),
                `+r+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+r+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},e4e=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r],u=n?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},t4e=function(e,t){this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");if(this.outputShape=e,r!==1){var n=e.map(function(i,o){return function(l){return t.indexOf(l)!==-1&&e[l]!==1?e[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(o)}).join(","),s=Fa(r);this.userCode=`
      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+n+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},r4e=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=e;var n=nl("rc",r),s=n[r-1]+" + 1 < "+this.outputShape[r-1],i=n[r-2]+" + 1 < "+this.outputShape[r-2],o=Fa(r);function l(c){var d=e.map(function(u,h){return function(m,p){return t.indexOf(m)!==-1&&e[m]!==1?e[m]+" - "+p[m]+" - 1":""+p[m]}(h,c)});return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=r===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+s+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(n.slice())+`;
          if(`+s+`){
            result.g = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",l(c)}(n.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            if(`+s+`) {
              result.a = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            }
          }
          setOutput(result);
        }
    `},dB=function(e,t,r,n,s,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Fa(s.length),c=Fa(i.length),d="";r===1?d="i":r===2&&(d="i, j");var u="getIndices("+d+")",h="";n===1?h="i":n===2&&(h="i, coords[1]");var m="getUpdates("+h+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+s+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},n4e=function(e,t){this.variableNames=["x","segmentIds"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[n,o];var l=4*Math.floor(r/4),c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `);var h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+r+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},a4e=function(e,t,r){var n,s;if(this.variableNames=["c","a","b"],this.outputShape=t,r>4)throw Error("Where for rank "+r+" is not yet supported");if(r===1)s="resRC",n="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[],c=0;c<t.length;c++)l.push(""+i[c]),c<e&&o.push(""+i[c]);n=o.join(),s=l.join()}var d=Fa(r);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+n+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+s+`));
        } else {
          setOutput(getB(`+s+`));
        }
      }
    `},s4e=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var r,n=Fa(this.rank),s="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return LE.slice(0,o).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);r=`
        `+n+` sourceLoc;
        `+n+` coords = getOutputCoords();
        `+t.map(function(o,l){return"sourceLoc."+LE[l]+" = start["+l+"] + coords."+LE[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+s+`
      void main() {
        `+r+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),LE=["x","y","z","w","u","v"],i4e=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var r=Fa(this.rank),n=nl("coords",this.rank),s=nl("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+s.slice(-2).join()+")",o="getChannel(getSource("+s.join()+"), "+i+")",l=`
      result.x = `+o+`;
      if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+s[this.rank-1]+`;
        result.y = `+o+`;
        --`+s[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+n[this.rank-1]+`;
      if (++`+n[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+s[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+s[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+r+"("+t.map(function(u,h){return"start["+h+"]"}).join()+");":t.map(function(u,h){return s[h]+" = "+n[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+r+` coords = getOutputCoords();
        `+r+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),o4e=function(e,t,r){this.variableNames=["x"],this.outputShape=r;var n=r.length,s=Fa(r.length),i=Fa(r.length),o="";if(n===1)o="coords * strides + begin";else{var l=0;o=r.map(function(c,d){return l++,r.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"}).join(",")}this.userCode=`
      `+s+" begin = "+s+"("+e+`);
      `+s+" strides = "+s+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},l4e=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,r,n){var s,i=uB(r,n),o=hB(t,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[o].shift();return this.usedTextures[o].push(l),l}return this.numUsedTextures++,this.log(),i===$l.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===$l.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===$l.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===$l.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===$l.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(s),s},e.prototype.releaseTexture=function(t,r,n,s){if(this.freeTextures!=null){var i=hB(r,uB(n,s),s);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],l=o.indexOf(t);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var r in this.freeTextures)this.freeTextures[r].forEach(function(n){t.gpgpu.deleteMatrixTexture(n)});for(var r in this.usedTextures)this.usedTextures[r].forEach(function(s){t.gpgpu.deleteMatrixTexture(s)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function uB(e,t){if(e===Hl.UPLOAD)return $l.PACKED_2X2_FLOAT32;if(e===Hl.RENDER||e==null)return function(r){return $t().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?$l.PACKED_2X2_FLOAT32:$l.UNPACKED_FLOAT32:r?$l.PACKED_2X2_FLOAT16:$l.UNPACKED_FLOAT16}(t);if(e===Hl.DOWNLOAD||e===Hl.PIXELS)return $l.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function hB(e,t,r){return e[0]+"_"+e[1]+"_"+t+"_"+r}var c4e=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[n]*t[n];this.outputShape=r,this.rank=r.length;var s=Fa(this.rank),i=function(o){var l=o.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],u=0;u<o.length;u++)d.push("imod("+c[u]+", "+o[u]+")");return d.join()}(e);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},d4e=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];this.outputShape=r,this.rank=r.length;var s=Fa(this.rank),i=function(o){var l=o.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),u=0;u<o.length;u++)d[o[u]]=c[u];return d.join()}(t);this.userCode=`
    void main() {
      `+s+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},u4e=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=Fa(this.rank),i=kG("rc",this.rank),o=new Array(this.rank);for(n=0;n<t.length;n++)o[t[n]]=i[n];var l="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+r[this.rank-1],d="getChannel(getA("+o.join()+"), "+l+")";this.userCode=`
    void main() {
      `+s+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+r[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},kT=1.7580993408473768,_T=1.0507009873554805,wn=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ld="if (isnan(x)) return x;",h4e="return x;",fB="return abs(x);",TG=Ld+`
  return (x < 0.0) ? 0.0 : x;
`,IG=Ld+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,PG="return (x >= 0.0) ? x : (exp(x) - 1.0);",f4e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+kT+`;
  float scale = `+_T+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mB="return -x;",pB="return ceil(x);",xB="return floor(x);",vB="return exp(x);",gB="return exp(x) - 1.0;",m4e=Ld+`
  return sin(x);
`,p4e=Ld+`
  return cos(x);
`,x4e=Ld+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,v4e=Ld+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,g4e=Ld+`
  return atan(x);
`,b4e=Ld+"return log(x + sqrt(x * x + 1.0));",y4e=Ld+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,j4e=Ld+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,rN="return x;",N4e="return x;",OG=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MG=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RG=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,jb=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},w4e=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,r=nl("rc",t),n=Fa(t),s=function(l,c){if(l===1)return"rc";for(var d="",u=0;u<l;u++)d+=c[u],u<l-1&&(d+=",");return d}(t,r),i=r.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+n+` rc = getOutputCoords();
        vec4 packedInput = getA(`+s+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},nN={};function aN(e,t){if(t===void 0&&(t=!1),e==="linear")return t?N4e:h4e;if(e==="relu")return t?OG:TG;if(e==="elu")return t?RG:PG;if(e==="relu6")return t?MG:IG;if(e==="prelu")return t?AG:DG;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var S4e=600,C4e=function(e){function t(r){var n,s=e.call(this)||this;if(s.pendingRead=new WeakMap,s.pendingDisposal=new WeakSet,s.dataRefCount=new WeakMap,s.numBytesInGPU=0,s.uploadWaitMs=0,s.downloadWaitMs=0,s.warnedAboutMemory=!1,s.pendingDeletes=0,s.disposed=!1,!$t().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(r==null){var i=Ju($t().getNumber("WEBGL_VERSION"));s.binaryCache=((n=$t().getNumber("WEBGL_VERSION"))in nN||(nN[n]={}),nN[n]),s.gpgpu=new RAe(i),s.canvas=i.canvas,s.gpgpuCreatedLocally=!0}else s.gpgpu=r,s.binaryCache={},s.gpgpuCreatedLocally=!1,s.canvas=r.gl.canvas;return s.textureManager=new l4e(s.gpgpu),s.numMBBeforeWarning=$t().global.screen==null?1024:$t().global.screen.height*$t().global.screen.width*window.devicePixelRatio*S4e/1024/1024,s.texData=new vG(s,dt),s}return Fd(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(r,n,s){if($t().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64"&&r!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:n,dtype:s,values:r,usage:Hl.UPLOAD}),i},t.prototype.move=function(r,n,s,i){if($t().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(r,{shape:s,dtype:i,values:n,usage:Hl.UPLOAD})},t.prototype.readSync=function(r){var n=this.texData.get(r),s=n.values,i=n.dtype,o=n.complexTensors,l=n.slice,c=n.shape,d=n.isPacked;if(l!=null){var u=void 0;u=d?new jb(c,rN):new wn(c,rN);var h=this.runWebGLProgram(u,[{dataId:r,shape:c,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeData(h.dataId),m}if(s!=null)return this.convertAndCacheOnCPU(r);if(i==="string")return s;var p,v,g=this.activeTimers!=null;return g&&(p=wu()),i==="complex64"?v=XD(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(r),g&&(this.downloadWaitMs+=wu()-p),this.convertAndCacheOnCPU(r,v)},t.prototype.read=function(r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Pr(this,function(A){switch(A.label){case 0:if(this.pendingRead.has(r))return n=this.pendingRead.get(r),[2,new Promise(function(L){return n.push(L)})];if(s=this.texData.get(r),i=s.values,o=s.shape,l=s.slice,c=s.dtype,d=s.complexTensors,u=s.isPacked,l!=null)return h=void 0,h=u?new jb(o,rN):new wn(o,rN),m=this.runWebGLProgram(h,[{dataId:r,shape:o,dtype:c}],c),p=this.read(m.dataId),this.disposeData(m.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(r)];if(!$t().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&$t().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,c!=="complex64"&&$t().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(r),b=this.texData.get(g.dataId),v=(T=this.gpgpu).createBufferFromTexture.apply(T,[b.texture].concat(Wb(o)))),this.pendingRead.set(r,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return C=A.sent(),N=C[0],k=C[1],y=XD(N,k),[3,5];case 4:v==null?y=this.getValuesFromTexture(r):(S=Rr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,S)),A.label=5;case 5:return g!=null&&this.disposeData(g.dataId),D=this.convertAndCacheOnCPU(r,y),E=this.pendingRead.get(r),this.pendingRead.delete(r),E.forEach(function(L){return L(D)}),this.pendingDisposal.has(r)&&(this.pendingDisposal.delete(r),this.disposeData(r),this.pendingDeletes--),[2,D]}})})},t.prototype.checkNumericalProblems=function(r){if(r!=null)for(var n=0;n<r.length;n++){var s=r[n];if(!fDe(s))throw $t().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+s+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+s+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.isPacked,c=Rr(i);if($t().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(r),u=this.texData.get(d.dataId),h=(n=this.gpgpu).downloadMatrixFromPackedTexture.apply(n,[u.texture].concat(Wb(i))).subarray(0,c);return this.disposeData(d.dataId),h}var m=$t().getBool("WEBGL_PACK")&&l===!0,p=m?TE(i):i,v=m?new hAe(p):new uAe(p),g=this.runWebGLProgram(v,[{shape:p,dtype:o,dataId:r}],"float32"),b=this.texData.get(g.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,c);return this.disposeData(g.dataId),y},t.prototype.time=function(r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d;return Pr(this,function(u){switch(u.label){case 0:return n=this.activeTimers,s=[],i=!1,this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,r(),o=Fv(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),l=Fv(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=n,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},$t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return d=u.sent(),c.kernelMs=G5e(d),c.getExtraProfileInfo=function(){return d.map(function(h,m){return{name:l[m],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:wu(),endMs:null}},t.prototype.endTimer=function(r){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),r):(r.endMs=wu(),r)},t.prototype.getQueryTime=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){return $t().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(r)]:[2,(n=r).endMs-n.startMs]})})},t.prototype.disposeData=function(r){if(!this.pendingDisposal.has(r)){if(this.pendingRead.has(r))return this.pendingDisposal.add(r),void this.pendingDeletes++;if(this.texData.has(r)){this.releaseGPUData(r);var n=this.texData.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.texData.delete(r)}}},t.prototype.releaseGPUData=function(r){var n=this.texData.get(r),s=n.texture,i=n.dtype,o=n.texShape,l=n.usage,c=n.isPacked,d=n.slice,u=d&&d.origDataId||r,h=this.dataRefCount.get(u);h>1?this.dataRefCount.set(u,h-1):(this.dataRefCount.delete(u),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,l,c)));var m=this.texData.get(r);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},t.prototype.getTexture=function(r){return this.uploadToGPU(r),this.texData.get(r).texture},t.prototype.getDataInfo=function(r){return this.texData.get(r)},t.prototype.getCPUBackend=function(){return $t().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=dt.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(r,n){var s=this;return n===void 0&&(n=128),this.getCPUBackend()!=null&&r.every(function(i){return s.texData.get(i.dataId).texture==null&&i.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(r,n){var s=this.makeOutput(r.shape,"complex64");return this.texData.get(s.dataId).complexTensors={real:dt.keep(r.clone()),imag:dt.keep(n.clone())},s},t.prototype.real=function(r){return this.texData.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.texData.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.slice(r,n,s);if(Rr(s)===0)return Hi([],s,r.dtype);var i=this.texData.get(r.dataId).isPacked,o=pG(r.shape,n,s);if(i||!o){var l=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i4e(s):new s4e(s),c=l.getCustomSetupFunc(n);return this.compileAndRun(l,[r],null,c)}return this.uploadToGPU(r.dataId),this.shallowSlice(r,n,s)},t.prototype.shallowSlice=function(r,n,s){var i=this.texData.get(r.dataId),o=this.makeOutput(s,r.dtype),l=this.texData.get(o.dataId);Object.assign(l,i),l.shape=s,l.dtype=r.dtype;var c=xG(n,r.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||r.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),o},t.prototype.stridedSlice=function(r,n,s,i){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.stridedSlice(r,n,s,i);var o=yT(n,s,i);if(o.some(function(c){return c===0}))return Hi([],o);var l=new o4e(n,i,o);return this.compileAndRun(l,[r])},t.prototype.reverse=function(r,n){var s=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new r4e(r.shape,n):new t4e(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.concat=function(r,n){if(r[0].dtype==="complex64"){var s=r.map(function(p){return Fc(p)}),i=r.map(function(p){return ku(p)});return Ui(this.concat(s,n),this.concat(i,n))}if(this.shouldExecuteOnCPU(r))return this.cpuBackend.concat(r,n);if(r.length===1)return r[0];if(r.length>$t().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(r.length/2),l=this.concat(r.slice(0,o),n),c=this.concat(r.slice(o),n);return this.concat([l,c],n)}if($t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].rank>1){var d=new Q3e(r.map(function(p){return p.shape}),n);return this.compileAndRun(d,r)}var u=Bv(r.map(function(p){return p.shape}),n),h=r.map(function(p){return p.as2D(-1,Rr(p.shape.slice(n)))}),m=new X3e(h.map(function(p){return p.shape}));return this.compileAndRun(m,h).reshape(u)},t.prototype.neg=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.neg(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,mB,r.dtype);var n=new wn(r.shape,mB);return this.compileAndRun(n,[r])},t.prototype.batchMatMul=function(r,n,s,i){var o=s?r.shape[2]:r.shape[1],l=i?n.shape[1]:n.shape[2],c=s?r.shape[1]:r.shape[2],d=r.shape[0];if((o===1||l===1)&&c>1e3){s&&(r=r.transpose([0,2,1])),i&&(n=n.transpose([0,2,1]));var u=l===1?r:r.as3D(d,c,1),h=l===1?2:1,m=l===1?n.as3D(d,1,c):n;return this.multiply(u,m).sum(h,!0)}var p=Vi(r.dtype,n.dtype),v=new ME(r.shape,[d,o,l],s,i);return this.compileAndRun(v,[r,n],p)},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=i?n.shape[2]:n.shape[1],h=o?s.shape[1]:s.shape[2],m=n.shape[0],p=Vi(n.dtype,s.dtype),v=l!=null,g=d!=null,b=c?aN(c,!0):null,y=new ME(n.shape,[m,u,h],i,o,v,b,g),C=[n,s];return l&&C.push(l),d&&C.push(d),this.compileAndRun(y,C,p)},t.prototype.multiply=function(r,n){if(r.dtype==="complex64"){var s=this.texData.get(r.dataId),i=this.texData.get(n.dataId),o=new rB(H3e,r.shape,n.shape),l=new rB(W3e,r.shape,n.shape),c=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag),this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],d=this.compileAndRun(o,c),u=this.compileAndRun(l,c),h=this.complex(d,u);return d.dispose(),u.dispose(),h}if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.multiply(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,nB,r.dtype);var m=new gs(nB,r.shape,n.shape);return this.compileAndRun(m,[r,n],r.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){var c=[r,n,s],d=null;l!=null&&(d=l.shape,c.push(l));var u=null;if(o!=null&&(u=o.shape,c.push(o)),$t().getBool("WEBGL_PACK_NORMALIZATION")){var h=new z3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(h,c)}var m=new q3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(m,c)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){var l=$t().getBool("WEBGL_PACK_NORMALIZATION")?new UAe(r.shape,n,s,i,o):new LAe(r.shape,n,s,i,o);return this.compileAndRun(l,[r])},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){var d=new BAe(n.shape,i,o,l,c);return this.compileAndRun(d,[n,s,r])},t.prototype.tile=function(r,n){if(r.dtype==="string"){var s=this.readSync(r.dataId).map(function(o){return X2(o)});return SG(pn(r.shape,r.dtype,s),n)}var i=new c4e(r.shape,n);return this.compileAndRun(i,[r])},t.prototype.pad=function(r,n,s){var i=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GAe(r.shape,n,s):new WAe(r.shape,n,s);return this.compileAndRun(i,[r])},t.prototype.transpose=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.transpose(r,n);var s=$t().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new u4e(r.shape,n):new d4e(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.gather=function(r,n,s){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.gather(r,n,s);var i=new gAe(r.shape,n.size,s);return this.compileAndRun(i,[r,n])},t.prototype.batchToSpaceND=function(r,n,s){qe(r.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(h,m){return h*m}),o=rw(r.shape,n,i),l=nw(o.length,n.length),c=aw(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){qe(r.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=rw(c.shape,n,i,!1),u=nw(d.length,n.length,!1),h=aw(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.reduce=function(r,n,s){var i=r.shape[0],o=r.shape[1],l=IE(o),c=new YAe({windowSize:l,inSize:o,batchSize:i},n),d=this.compileAndRun(c,[r],s);return d.shape[1]===1?d:this.reduce(d,n,s)},t.prototype.argReduce=function(r,n,s){s===void 0&&(s=null);var i=r.shape[0],o=r.shape[1];s!=null&&(i=s.shape[0],o=s.shape[1]);var l=IE(o),c=new O3e({windowSize:l,inSize:o,batchSize:i},n,s==null),d=[r];s!=null&&d.push(s);var u=this.compileAndRun(c,d,"int32");return u.shape[1]===1?u:this.argReduce(r,n,u)},t.prototype.argReducePacked=function(r,n,s){s===void 0&&(s=null);var i=s!=null?s.shape:r.shape,o=IE(i[i.length-1]),l=new U3e(i,o,n,s==null),c=s==null?[r]:[r,s],d=this.compileAndRun(l,c,"int32");return d.rank===r.rank?this.argReducePacked(r,n,d):d},t.prototype.sum=function(r,n){Fl("sum",n,r.rank);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"sum",c).reshape(i)},t.prototype.prod=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.prod(r,n);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(r,n,s){var i=0,o=Zu([i],r.rank),l=r;o!=null&&(l=r.transpose(o),i=eh(1,r.rank)[0]);var c=function(p,v,g){for(var b=[],y=p.length,C=0;C<y;C++)C!==v?b.push(p[C]):b.push(g);return b}(l.shape,i,s),d=Rr([l.shape[i]]),u=l.as2D(-1,d),h=SE(r.dtype),m=this.segOpCompute(u,"unsortedSegmentSum",n,h,s).reshape(c);return o!=null&&(m=m.transpose(xT(o))),m},t.prototype.segOpCompute=function(r,n,s,i,o){var l=r.shape[0],c=r.shape[1],d=function(m,p){var v,g=!1;for(m<=mG?(v=m,g=!0):v=$D(m,Math.floor(Math.sqrt(m)));!g;)v>p||v===m?g=!0:v=$D(m,v+1);return v}(c,o),u=new n4e({windowSize:d,inSize:c,batchSize:l,numSegments:o}),h=this.compileAndRun(u,[r,s],i);return h.shape[1]===o?h:(s=tw(0,o).tile([c/d]),this.segOpCompute(h,n,s,i,o))},t.prototype.argMinMaxReduce=function(r,n,s){var i=[n];if(Fl("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,r.rank),!$t().getBool("WEBGL_PACK_REDUCE")||r.rank<=2){var o=fo(r.shape,i),l=o[0],c=Rr(o[1]),d=r.as2D(-1,c);return this.argReduce(d,s).reshape(l)}return this.argReducePacked(r,s)},t.prototype.argMin=function(r,n){return this.argMinMaxReduce(r,n,"min")},t.prototype.argMax=function(r,n){return this.argMinMaxReduce(r,n,"max")},t.prototype.cumsum=function(r,n,s,i){if(n!==r.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(r.rank-1)+" but got axis="+n);var o=new iAe(r.shape,s,i);return this.compileAndRun(o,[r])},t.prototype.equal=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(equal(a, b));
`,"bool");var s=new gs("return float(a == b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.notEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(notEqual(a, b));
`,"bool");var s=new gs("return float(a != b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.less=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.less(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThan(a, b));
`,"bool");var s=new gs("return float(a < b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.lessEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThanEqual(a, b));
`,"bool");var s=new gs("return float(a <= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greater=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.greater(r,n);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThan(a, b));
`,"bool");var s=new gs("return float(a > b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greaterEqual=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var s=new gs("return float(a >= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalNot=function(r){var n=new wn(r.shape,"return float(!(x >= 1.0));");return this.compileAndRun(n,[r])},t.prototype.logicalAnd=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var s=new gs("return float(a >= 1.0 && b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalOr=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var s=new gs("return float(a >= 1.0 || b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.select=function(r,n,s){var i=new a4e(r.rank,n.shape,n.rank);return this.compileAndRun(i,[r,n,s],Vi(n.dtype,s.dtype))},t.prototype.where=function(r){Z2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=r.dataSync();return ST(r.shape,n)},t.prototype.topk=function(r,n,s){return CG(r.dataSync(),r.shape,r.dtype,n)},t.prototype.min=function(r,n){Fl("min",n,r.rank);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"min",l.dtype).reshape(i)},t.prototype.minimum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.minimum(r,n);var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new gs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.mod=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new gs(`if (b == 0.0) return NAN;
  return mod(a, b);`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.max=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.max(r,n);Fl("max",n,r.rank);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"max",l.dtype).reshape(i)},t.prototype.maximum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.maximum(r,n);var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new gs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.all=function(r,n){Fl("all",n,r.rank);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"all",l.dtype).reshape(i)},t.prototype.any=function(r,n){Fl("any",n,r.rank);var s=fo(r.shape,n),i=s[0],o=Rr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"any",l.dtype).reshape(i)},t.prototype.realDivide=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var s=new gs(`
if (a == b) {
  return 1.0;
};
return a / b;`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"float32")},t.prototype.floorDiv=function(r,n){if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var s=new gs(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"int32")},t.prototype.add=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,PE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.add(r,n);var s=Vi(r.dtype,n.dtype);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,PE,s);var i=new gs(PE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.packedUnaryOp=function(r,n,s){var i=new jb(r.shape,n);return this.compileAndRun(i,[r],s)},t.prototype.packedBinaryOp=function(r,n,s,i,o){o===void 0&&(o=!1);var l=new Oh(s,r.shape,n.shape,o);return this.compileAndRun(l,[r,n],i)},t.prototype.complexSeparableBinaryOp=function(r,n,s){var i=this,o=this.texData.get(r.dataId),l=this.texData.get(n.dataId),c=[[o.complexTensors.real,l.complexTensors.real],[o.complexTensors.imag,l.complexTensors.imag]].map(function(m){var p=m[0],v=m[1],g=i.makeComplexComponentTensorInfo(r,p),b=i.makeComplexComponentTensorInfo(n,v),y=new gs(s,r.shape,n.shape);return i.compileAndRun(y,[g,b],Vi(p.dtype,v.dtype))}),d=c[0],u=c[1],h=this.complex(d,u);return d.dispose(),u.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(r,n){return{dataId:n.dataId,dtype:n.dtype,shape:r.shape}},t.prototype.addN=function(r){if(r.length===1)return r[0];if(r.length>$t().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(r.length/2),s=this.addN(r.slice(0,n)),i=this.addN(r.slice(n));return this.addN([s,i])}var o=r.map(function(d){return d.dtype}).reduce(function(d,u){return Vi(d,u)}),l=r.map(function(d){return d.shape}),c=$t().getBool("WEBGL_PACK")?new P3e(r[0].shape,l):new I3e(r[0].shape,l);return this.compileAndRun(c,r,o)},t.prototype.subtract=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,OE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.subtract(r,n);var s=Vi(r.dtype,n.dtype);if($t().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,OE,r.dtype);var i=new gs(OE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.pow=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new gs(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,r.shape,n.shape),i=Vi(r.dtype,n.dtype);return this.compileAndRun(s,[r,n],i)},t.prototype.ceil=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.ceil(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,pB,r.dtype);var n=new wn(r.shape,pB);return this.compileAndRun(n,[r])},t.prototype.floor=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.floor(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,xB,r.dtype);var n=new wn(r.shape,xB);return this.compileAndRun(n,[r])},t.prototype.sign=function(r){var n=new wn(r.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(n,[r])},t.prototype.isNaN=function(r){var n=new wn(r.shape,"return float(isnan(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isInf=function(r){var n=new wn(r.shape,"return float(isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isFinite=function(r){var n=new wn(r.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.round=function(r){var n=new wn(r.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(n,[r])},t.prototype.exp=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.exp(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,vB,r.dtype);var n=new wn(r.shape,vB);return this.compileAndRun(n,[r])},t.prototype.expm1=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.expm1(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,gB,r.dtype);var n=new wn(r.shape,gB);return this.compileAndRun(n,[r])},t.prototype.softmax=function(r,n){var s=hi([n],r.shape),i=this.max(r,s),o=ul(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.log=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.log(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,r.dtype);var n=new wn(r.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(n,[r])},t.prototype.log1p=function(r){var n=new wn(r.shape,"return log(1.0 + x);");return this.compileAndRun(n,[r])},t.prototype.sqrt=function(r){var n=new wn(r.shape,"return sqrt(x);");return this.compileAndRun(n,[r])},t.prototype.rsqrt=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.rsqrt(r);var n=new wn(r.shape,"return inversesqrt(x);");return this.compileAndRun(n,[r])},t.prototype.reciprocal=function(r){var n=new wn(r.shape,"return 1.0 / x;");return this.compileAndRun(n,[r])},t.prototype.relu=function(r){var n;return n=$t().getBool("WEBGL_PACK")?new jb(r.shape,OG):new wn(r.shape,TG),this.compileAndRun(n,[r])},t.prototype.relu6=function(r){var n;return n=$t().getBool("WEBGL_PACK")?new jb(r.shape,MG):new wn(r.shape,IG),this.compileAndRun(n,[r])},t.prototype.prelu=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(AG,r.shape,n.shape):new gs(DG,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.elu=function(r){if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,RG,r.dtype);var n=new wn(r.shape,PG);return this.compileAndRun(n,[r])},t.prototype.eluDer=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,n.shape):new gs("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.selu=function(r){var n=new wn(r.shape,f4e);return this.compileAndRun(n,[r])},t.prototype.int=function(r){var n=new wn(r.shape,"return float(int(x));");return this.compileAndRun(n,[r],"int32")},t.prototype.clip=function(r,n,s){var i,o=(i=$t().getBool("WEBGL_PACK_CLIP")?new Y3e(r.shape):new G3e(r.shape)).getCustomSetupFunc(n,s);return this.compileAndRun(i,[r],null,o)},t.prototype.abs=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.abs(r);if($t().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,fB,r.dtype);var n=new wn(r.shape,fB);return this.compileAndRun(n,[r])},t.prototype.complexAbs=function(r){var n=this.texData.get(r.dataId),s=new K3e(r.shape),i=[this.makeComplexComponentTensorInfo(r,n.complexTensors.real),this.makeComplexComponentTensorInfo(r,n.complexTensors.imag)];return this.compileAndRun(s,i)},t.prototype.sigmoid=function(r){var n=new wn(r.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(n,[r])},t.prototype.softplus=function(r){var n=new wn(r.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(n,[r])},t.prototype.sin=function(r){var n=new wn(r.shape,m4e);return this.compileAndRun(n,[r])},t.prototype.cos=function(r){var n=new wn(r.shape,p4e);return this.compileAndRun(n,[r])},t.prototype.tan=function(r){var n=new wn(r.shape,"return tan(x);");return this.compileAndRun(n,[r])},t.prototype.asin=function(r){var n=new wn(r.shape,x4e);return this.compileAndRun(n,[r])},t.prototype.acos=function(r){var n=new wn(r.shape,v4e);return this.compileAndRun(n,[r])},t.prototype.atan=function(r){var n=new wn(r.shape,g4e);return this.compileAndRun(n,[r])},t.prototype.atan2=function(r,n){var s=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new gs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.sinh=function(r){var n=new wn(r.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.cosh=function(r){var n=new wn(r.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.tanh=function(r){var n=new wn(r.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(n,[r])},t.prototype.asinh=function(r){var n=new wn(r.shape,b4e);return this.compileAndRun(n,[r])},t.prototype.acosh=function(r){var n=new wn(r.shape,y4e);return this.compileAndRun(n,[r])},t.prototype.atanh=function(r){var n=new wn(r.shape,j4e);return this.compileAndRun(n,[r])},t.prototype.erf=function(r){var n=new wn(r.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(n,[r])},t.prototype.step=function(r,n){var s=new wn(r.shape,function(i){return i===void 0&&(i=0),Ld+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(n));return this.compileAndRun(s,[r])},t.prototype.conv2dByMatMul=function(r,n,s,i,o,l){var c=r.shape,d=this.texData.get(r.dataId),u=s.inChannels,h=c[0]*c[1]*c[2],m=s.outChannels,p=s.dataFormat==="channelsLast",v=(h===1||m===1)&&u>1e3,g=c[2]%2!=0&&!!d.isPacked;if(v||!$t().getBool("WEBGL_LAZILY_UNPACK")||!$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var b=p?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],y=this.reshape(r,[1,b,s.inChannels]),C=this.reshape(n,[1,s.inChannels,s.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:C,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),s.outShape)}var N=p?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),k={dataId:r.dataId,shape:[1,N,s.inChannels],dtype:r.dtype},S=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,qe(eN(d.shape,k.shape),function(){return"packed reshape "+d.shape+" to "+k.shape+" isn't free"});var D=this.reshape(n,[1,s.inChannels,s.outChannels]),E=this.fusedBatchMatMul({a:k,b:D,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),T=this.texData.get(E.dataId);return qe(T.isPacked,function(){return"batchMatMul result is expected to be packed"}),d.shape=S,T.shape=s.outShape,dt.makeTensorFromDataId(E.dataId,s.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(r,n,s,i,o,l){var c=s.filterWidth,d=s.filterHeight,u=s.inChannels,h=s.outWidth,m=s.outHeight,p=s.dataFormat==="channelsLast",v=c*d*u,g=m*h,b=[v,g],y=r.squeeze([0]),C=n.reshape([1,v,-1]),N=new FAe(b,y.shape,s),k=this.compileAndRun(N,[y]).reshape([1,b[0],b[1]]),S=i!=null,D=l!=null,E=o?aN(o,!0):null,T=new ME(k.shape,[1,g,s.outChannels],!0,!1,S,E,D),A=[k,C];i&&A.push(i),D&&A.push(l);var L=this.compileAndRun(T,A);return p?L.reshape([1,m,h,s.outChannels]):L.reshape([1,s.outChannels,m,h])},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,s,i,o,l,c);if($t().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,s,i,o,l,c);var d=o!=null,u=c!=null,h=l?aN(l,!1):null,m=new aB(i,d,h,u),p=[n,s];return o&&p.push(o),c&&p.push(c),this.compileAndRun(m,p)},t.prototype.conv2d=function(r,n,s){if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,n,s);if($t().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,n,s);var i=new aB(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerInput=function(r,n,s){var i=new Z3e(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerFilter=function(r,n,s){var i=new J3e(s);return this.compileAndRun(i,[r,n])},t.prototype.fusedDepthwiseConv2D=function(r){var n,s=r.input,i=r.filter,o=r.convInfo,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=$t().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,h=c?aN(c,u):null,m=[s,i],p=l!=null,v=d!=null;return p&&m.push(l),v&&m.push(d),u?(n=new iB(o,p,h,v),this.compileAndRun(n,m)):(n=new sB(o,p,h,v),this.compileAndRun(n,m))},t.prototype.depthwiseConv2D=function(r,n,s){var i;return $t().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1?(i=new iB(s),this.compileAndRun(i,[r,n])):(i=new sB(s),this.compileAndRun(i,[r,n]))},t.prototype.depthwiseConv2DDerInput=function(r,n,s){var i=new nAe(s);return this.compileAndRun(i,[r,n])},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){var i=new rAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3d=function(r,n,s){var i=new aAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerInput=function(r,n,s){var i=new tAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerFilter=function(r,n,s){var i=new eAe(s);return this.compileAndRun(i,[r,n])},t.prototype.maxPool=function(r,n){var s=new RE(n,"max",!1);return this.compileAndRun(s,[r])},t.prototype.avgPool=function(r,n){var s=new RE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPoolBackprop=function(r,n,s,i){var o=new RE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new $Ae(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.avgPoolBackprop=function(r,n,s){var i=new $3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.avgPool3d=function(r,n){var s=new FE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.avgPool3dBackprop=function(r,n,s){var i=new V3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.maxPool3d=function(r,n){var s=new FE(n,"max",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPool3dBackprop=function(r,n,s,i){var o=new FE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new VAe(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.reshape=function(r,n){var s=this.texData.get(r.dataId);if(s.isPacked&&!eN(r.shape,n)&&(s.texture===null||!eN(s.shape,n))){var i=this.packedReshape(r,n);return dt.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return KD(r,n)},t.prototype.resizeBilinear=function(r,n,s,i){var o=$t().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new JAe(r.shape,n,s,i):new QAe(r.shape,n,s,i);return this.compileAndRun(o,[r],"float32")},t.prototype.resizeBilinearBackprop=function(r,n,s){var i=new XAe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.resizeNearestNeighbor=function(r,n,s,i){var o=new e4e(r.shape,n,s,i);return this.compileAndRun(o,[r])},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){var i=new ZAe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.multinomial=function(r,n,s,i){var o=n?r:yf(r),l=o.shape[0],c=o.shape[1],d=new qAe(l,c,s),u=d.getCustomSetupFunc(i);return this.compileAndRun(d,[o],"int32",u)},t.prototype.oneHot=function(r,n,s,i){var o=new zAe(r.size,n,s,i);return this.compileAndRun(o,[r])},t.prototype.diag=function(r){var n=new dAe(r.size);return this.compileAndRun(n,[r])},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return Z2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),NT(r.dataSync(),n.dataSync(),s,i,o)},t.prototype.cropAndResize=function(r,n,s,i,o,l){var c=new sAe(r.shape,n.shape,i,o,l);return this.compileAndRun(c,[r,n,s],"float32")},t.prototype.depthToSpace=function(r,n,s){qe(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var i=r.shape[0],o=s==="NHWC"?r.shape[1]:r.shape[2],l=s==="NHWC"?r.shape[2]:r.shape[3],c=s==="NHWC"?r.shape[3]:r.shape[1],d=o*n,u=l*n,h=c/(n*n),m=new cAe(s==="NHWC"?[i,d,u,h]:[i,h,d,u],n,s);return this.compileAndRun(m,[r])},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.scatterND=function(r,n,s){var i=sw(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=[u/c,c],m=r.reshape([l,o]),p=n.reshape([l,c]);if(u===0)return KD(Hi([]),s);var v=jr(0),g=new dB(l,o,m.rank,p.rank,d,h);return this.compileAndRun(g,[p,m,v]).reshape(s)},t.prototype.sparseToDense=function(r,n,s,i){var o=sw(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.strides,u=o.outputSize,h=new dB(c,l,r.rank,n.rank,d,[u,1]);return this.compileAndRun(h,[n,r,i]).reshape(s)},t.prototype.fft=function(r){return this.fftImpl(r,!1)},t.prototype.ifft=function(r){return this.fftImpl(r,!0)},t.prototype.fftImpl=function(r,n){var s=this.texData.get(r.dataId),i=new lB(pAe,r.shape,n),o=new lB(xAe,r.shape,n),l=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],c=this.compileAndRun(i,l),d=this.compileAndRun(o,l),u=this.complex(c,d).as2D(r.shape[0],r.shape[1]);return c.dispose(),d.dispose(),u},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3],h=n.reshape([c,i]),m=r.reshape([r.size/d,d]),p=new bAe(i,u,[c,d]);return this.compileAndRun(p,[m,h]).reshape(l)},t.prototype.fill=function(r,n,s){if((s=s||u1(n))==="string"){var i=K2(s,Rr(r));return i.fill(n),dt.makeTensor(i,r,s,this)}var o=new vAe(r,n),l=o.getCustomSetupFunc(n);return this.compileAndRun(o,[],s,l)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){return this.fill(r.shape,r.dtype==="string"?"":0,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.makeTensorInfo=function(r,n){var s=this.write(null,r,n);return this.texData.get(s).usage=null,{dataId:s,shape:r,dtype:n}},t.prototype.makeOutput=function(r,n){var s=this.makeTensorInfo(r,n).dataId;return dt.makeTensorFromDataId(s,r,n,this)},t.prototype.unpackTensor=function(r){var n=new w4e(r.shape);return this.runWebGLProgram(n,[r],r.dtype)},t.prototype.packTensor=function(r){var n=new HAe(r.shape);return this.runWebGLProgram(n,[r],r.dtype,null,!0)},t.prototype.packedReshape=function(r,n){var s=[Q2(r.shape)].concat(J2(r.shape)),i={dtype:r.dtype,shape:s,dataId:r.dataId},o=[Q2(n)].concat(J2(n)),l=new KAe(o,s),c=this.runWebGLProgram(l,[i],r.dtype,null,!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}},t.prototype.decode=function(r){var n,s=this.texData.get(r),i=s.isPacked,o=s.shape,l=s.dtype,c=TE(o);return n=i?new lAe(c):new oAe(c),{dtype:l,shape:o,dataId:this.runWebGLProgram(n,[{shape:c,dtype:l,dataId:r}],l,null,!0).dataId}},t.prototype.runWebGLProgram=function(r,n,s,i,o){var l=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(r.outputShape,s),d=this.texData.get(c.dataId);if(r.packedOutput&&(d.isPacked=!0),r.outPackingScheme===Dy.DENSE){var u=Wb(r.outputShape);d.texShape=u.map(function(N){return 2*N})}if(r.outTexUsage!=null&&(d.usage=r.outTexUsage),Rr(c.shape)===0)return d.values=_y(c.dtype,0),c;var h=[],m=n.map(function(N){if(N.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var k=l.texData.get(N.dataId);if(k.texture==null){if(!r.packedInputs&&Rr(N.shape)<=$t().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:N.shape,texData:null,isUniform:!0,uniformValues:k.values};r.packedInputs&&(k.isPacked=!0,k.shape=N.shape)}else if(!!k.isPacked!=!!r.packedInputs)N=k.isPacked?l.unpackTensor(N):l.packTensor(N),h.push(N),k=l.texData.get(N.dataId);else if(k.isPacked&&!eN(k.shape,N.shape)){var S=N,D=N.shape;N.shape=k.shape,N=l.packedReshape(N,D),h.push(N),k=l.texData.get(N.dataId),S.shape=D}return l.uploadToGPU(N.dataId),{shape:N.shape,texData:k,isUniform:!1}});this.uploadToGPU(c.dataId);var p,v={shape:c.shape,texData:d,isUniform:!1},g=function(N,k,S){var D="";k.concat(S).forEach(function(A){var L=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,P=A.isUniform?"uniform":A.texData.texShape;D+=A.shape+"_"+P+"_"+L});var E=N.userCode,T=N.constructor.name;return T+="_"+D+"_"+E}(r,m,v),b=this.getAndSaveBinary(g,function(){return function(N,k,S,D){var E=k.userCode,T=S.map(function(B,Y){var K={logicalShape:B.shape,texShape:B.isUniform?null:B.texData.texShape,isUniform:B.isUniform,isPacked:!B.isUniform&&B.texData.isPacked,flatOffset:null};return B.texData!=null&&B.texData.slice!=null&&B.texData.slice.flatOffset>0&&(K.flatOffset=B.texData.slice.flatOffset),{name:k.variableNames[Y],shapeInfo:K}}),A=T.map(function(B){return B.shapeInfo}),L={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},P=M3e(T,L,E,k.packedInputs),O=N.createProgram(P),Q=null,z=N.getUniformLocation(O,"NAN",!1);$t().getNumber("WEBGL_VERSION")===1&&(Q=N.getUniformLocation(O,"INFINITY",!1));for(var re={},U=0;U<k.variableNames.length;U++){var X=k.variableNames[U];re[X]=N.getUniformLocation(O,X,!1),re["offset"+X]=N.getUniformLocation(O,"offset"+X,!1)}return{program:k,source:P,webGLProgram:O,uniformLocations:re,inShapeInfos:A,outShapeInfo:L,infLoc:Q,nanLoc:z}}(l.gpgpu,r,m,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(N,k,S,D,E){cB(k.inShapeInfos,S),cB([k.outShapeInfo],[D]);var T=D.texData.texture,A=D.texData.texShape;D.texData.isPacked?N.setOutputPackedMatrixTexture(T,A[0],A[1]):N.setOutputMatrixTexture(T,A[0],A[1]),N.setProgram(k.webGLProgram),$t().getNumber("WEBGL_VERSION")===1&&k.infLoc!==null&&N.gl.uniform1f(k.infLoc,1/0),k.nanLoc!==null&&N.gl.uniform1f(k.nanLoc,NaN),S.forEach(function(L,P){var O=k.program.variableNames[P],Q=k.uniformLocations[O],z=k.uniformLocations["offset"+O];if(Q!=null)if(L.isUniform)if(Rr(L.shape)<2)N.gl.uniform1f(Q,L.uniformValues[0]);else{var re=L.uniformValues;re instanceof Float32Array||(re=new Float32Array(re)),N.gl.uniform1fv(Q,re)}else L.texData.slice!=null&&z!=null&&N.gl.uniform1i(z,L.texData.slice.flatOffset),N.setInputMatrixTexture(L.texData.texture,Q,P)}),E?.(N,k.webGLProgram),N.executeProgram()}(this.gpgpu,b,m,v,i),h.forEach(function(N){return l.disposeData(N.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:r.constructor.name,query:this.getQueryTime(p)})),!$t().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&o===!1){var C=this.unpackTensor(c);return this.disposeData(c.dataId),C}return c},t.prototype.compileAndRun=function(r,n,s,i,o){o===void 0&&(o=!1),s=s||n[0].dtype;var l=this.runWebGLProgram(r,n,s,i,o);return dt.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},t.prototype.getAndSaveBinary=function(r,n){return r in this.binaryCache||(this.binaryCache[r]=n()),this.binaryCache[r]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var r=this;this.disposed||($t().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(n){r.gpgpu.deleteProgram(r.binaryCache[n].webGLProgram),delete r.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var r=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=kr(function(){if(!$t().get("WEBGL_RENDER_FLOAT32_ENABLED")){var n=$t().getBool("DEBUG");$t().set("DEBUG",!1);var s=r.abs(jr(1e-8)).dataSync()[0];if($t().set("DEBUG",n),s>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.values,c=s.texture,d=s.usage,u=s.isPacked;if(c==null){var h,m=this.activeTimers!=null;m&&(h=wu());var p=s.texShape;if(p==null&&(p=TDe(i,u),s.texShape=p),l!=null){var v=TE(i),g=void 0,b=p[1],y=p[0],C=l instanceof Uint8Array;u?(b=(n=f1(p[0],p[1]))[0],y=n[1],g=new mAe(v,[y,b],C)):g=new fAe(v,[y,b],C);var N=this.makeTensorInfo([y,b],o);this.texData.get(N.dataId).usage=C?Hl.PIXELS:Hl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),b,y,l);var k=this.runWebGLProgram(g,[N],o,null,!0),S=this.texData.get(k.dataId);s.texture=S.texture,s.texShape=S.texShape,s.isPacked=S.isPacked,s.usage=S.usage,this.disposeData(N.dataId),this.texData.delete(k.dataId),s.values=null,m&&(this.uploadWaitMs+=wu()-h)}else{var D=this.acquireTexture(p,d,o,u);s.texture=D}}},t.prototype.convertAndCacheOnCPU=function(r,n){var s=this.texData.get(r),i=s.dtype;return this.releaseGPUData(r),n!=null&&(s.values=function(o,l){if(l==="float32"||l==="complex64")return o;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(o.length):new Uint8Array(o.length),d=0;d<c.length;++d)c[d]=Math.round(o[d]);return c}throw new Error("Unknown dtype "+l)}(n,i)),s.values},t.prototype.acquireTexture=function(r,n,s,i){if(this.numBytesInGPU+=this.computeBytes(r,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(r,n,i)},t.prototype.computeBytes=function(r,n){return r[0]*r[1]*KW(n)},t}(gG);rG()&&dt.registerBackend("webgl",function(){return new C4e},2);var k4e=et({square_:function(e){var t=Pe(e,"x","square"),r=[t];return dt.runKernelFunc(function(n,s){return s([t]),n.square(t)},{x:t},null,"Square",{},r,[])}}),Ty="SquaredDifference",FG=et({squaredDifference_:function(e,t){var r,n=Pe(e,"a","squaredDifference"),s=Pe(t,"b","squaredDifference");r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape);var i={a:n,b:s},o=[n,s];return dt.runKernelFunc(function(l,c){var d=l.squaredDifference(n,s);return c([n,s]),d},i,function(l,c){var d=c[0],u=c[1],h=jr(2);return{a:function(){return l.mul(d.sub(u).mul(h))},b:function(){return l.mul(u.sub(d).mul(h))}}},Ty,{},o,[])}}),_4e=et({abs_:function(e){var t=Pe(e,"x","abs");return t.dtype==="complex64"?dt.runKernelFunc(function(r){return r.complexAbs(t)},{$x:t}):dt.runKernelFunc(function(r,n){var s=r.abs(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.toFloat().step(-1))}}},"Abs")}}),E4e=et({acos_:function(e){var t=Pe(e,"x","acos");return dt.runKernelFunc(function(r,n){var s=r.acos(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(jr(1).sub(s.toFloat().square()).sqrt()).neg()}}})}}),D4e=et({acosh_:function(e){var t=Pe(e,"x","acosh");return dt.runKernelFunc(function(r,n){var s=r.acosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(s.toFloat().square().sub(1).sqrt())}}})}}),A4e=et({asin_:function(e){var t=Pe(e,"x","asin");return dt.runKernelFunc(function(r,n){var s=r.asin(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(jr(1).sub(s.toFloat().square()).sqrt())}}})}}),T4e=et({asinh_:function(e){var t=Pe(e,"x","asinh");return dt.runKernelFunc(function(r,n){var s=r.asinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(jr(1).add(s.toFloat().square()).sqrt())}}})}}),I4e=et({atan_:function(e){var t=Pe(e,"x","atan");return dt.runKernelFunc(function(r,n){var s=r.atan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().square().add(1))}}})}}),P4e=et({atanh_:function(e){var t=Pe(e,"x","atanh");return dt.runKernelFunc(function(r,n){var s=r.atanh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(jr(1).sub(s.toFloat().square()))}}})}}),O4e=et({ceil_:function(e){var t=Pe(e,"x","ceil");return dt.runKernelFunc(function(r){return r.ceil(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),ET=et({clipByValue_:function(e,t,r){var n=Pe(e,"x","clipByValue");qe(t<=r,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."});var s=[n],i={min:t,max:r};return dt.runKernelFunc(function(o,l){var c=o.clip(n,t,r);return l([n]),c},{x:n},function(o,l){var c=l[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(r)),qn(o))}}},"ClipByValue",i,s)}}),M4e=et({cos_:function(e){var t=Pe(e,"x","cos"),r=[t];return dt.runKernelFunc(function(n,s){var i=n.cos(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().sin().neg().mul(n)}}},"Cos",{},r)}}),R4e=et({cosh_:function(e){var t=Pe(e,"x","cosh");return dt.runKernelFunc(function(r,n){var s=r.cosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().sinh().mulStrict(r)}}})}}),F4e=et({erf_:function(e){var t=Pe(e,"x","erf");return qe(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),dt.runKernelFunc(function(r,n){var s=r.erf(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),QD=et({exp_:function(e){var t=Pe(e,"x","exp");return dt.runKernelFunc(function(r,n){var s=r.exp(t);return n([s]),s},{x:t},function(r,n){return{x:function(){return r.mulStrict(n[0])}}},"Exp",{},[],[!0])}}),L4e=et({expm1_:function(e){var t=Pe(e,"x","expm1");return dt.runKernelFunc(function(r,n){var s=r.expm1(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.exp())}}})}}),B4e=et({floor_:function(e){var t=Pe(e,"x","floor");return dt.runKernelFunc(function(r){return r.floor(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),U4e=et({log_:function(e){var t=Pe(e,"x","log"),r=[t];return dt.runKernelFunc(function(n,s){var i=n.log(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.toFloat())}}},"Log",{},r)}}),$4e=et({log1p_:function(e){var t=Pe(e,"x","log1p");return dt.runKernelFunc(function(r,n){var s=r.log1p(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.add(1))}}})}}),V4e=et({logSigmoid_:function(e){var t=Pe(e,"x","logSigmoid");return dt.runKernelFunc(function(r,n){var s=r.softplus(t.neg()).neg();return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.neg().sigmoid())}}})}}),cw=et({neg_:function(e){var t=Pe(e,"x","neg"),r=[t];return dt.runKernelFunc(function(n){return n.neg(t)},{x:t},function(n){return{x:function(){return n.neg()}}},"Neg",{},r)}}),q4e=et({reciprocal_:function(e){var t=Pe(e,"x","reciprocal");return dt.runKernelFunc(function(r,n){var s=r.reciprocal(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.square().neg())}}})}}),z4e=et({round_:function(e){var t=Pe(e,"x","round");return dt.runKernelFunc(function(r){return r.round(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),LG=et({rsqrt_:function(e){var t=Pe(e,"x","rsqrt"),r=[t];return dt.runKernelFunc(function(n,s){var i=n.rsqrt(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},r)}}),BG=et({sigmoid_:function(e){var t=Pe(e,"x","sigmoid");return dt.runKernelFunc(function(r,n){var s=r.sigmoid(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.mul(jr(1).sub(s)))}}},"Sigmoid")}}),H4e=et({sign_:function(e){var t=Pe(e,"x","sign");return dt.runKernelFunc(function(r){return r.sign(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),W4e=et({isNaN_:function(e){var t=Pe(e,"x","isNaN");return dt.runKernelFunc(function(r){return r.isNaN(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),G4e=et({isInf_:function(e){var t=Pe(e,"x","isInf");return dt.runKernelFunc(function(r){return r.isInf(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),Y4e=et({isFinite_:function(e){var t=Pe(e,"x","isFinite");return dt.runKernelFunc(function(r){return r.isFinite(t)},{$x:t},function(r){return{$x:function(){return qn(r)}}})}}),K4e=et({sin_:function(e){var t=Pe(e,"x","sin"),r=[t];return dt.runKernelFunc(function(n,s){var i=n.sin(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().cos().mul(n)}}},"Sin",{},r)}}),X4e=et({sinh_:function(e){var t=Pe(e,"x","sinh");return dt.runKernelFunc(function(r,n){var s=r.sinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().cosh().mulStrict(r)}}})}}),Q4e=et({softplus_:function(e){var t=Pe(e,"x","softplus");return dt.runKernelFunc(function(r,n){var s=r.softplus(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.sigmoid())}}})}}),J4e=et({sqrt_:function(e){var t=Pe(e,"x","sqrt");return dt.runKernelFunc(function(r,n){var s=r.sqrt(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().sqrt().mul(2))}}})}}),Z4e=et({step_:function(e,t){t===void 0&&(t=0);var r=Pe(e,"x","step");return dt.runKernelFunc(function(n){return n.step(r,t)},{$x:r},function(n){return{$x:function(){return qn(n)}}})}}),eTe=et({tan_:function(e){var t=Pe(e,"x","tan");return dt.runKernelFunc(function(r,n){var s=r.tan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.cos().square())}}})}}),tTe=et({tanh_:function(e){var t=Pe(e,"x","tanh");return dt.runKernelFunc(function(r,n){var s=r.tanh(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return jr(1).sub(s.square()).mulStrict(r)}}},"Tanh",{},null,[!0])}});function UG(e,t,r,n,s,i){var o,l,c=Pe(e,"x","batchNorm"),d=Pe(t,"mean","batchNorm"),u=Pe(r,"variance","batchNorm");return s!=null&&(o=Pe(s,"scale","batchNorm")),n!=null&&(l=Pe(n,"offset","batchNorm")),qe(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),qe(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."}),qe(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&qe(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),l!=null&&qe(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function $G(e,t,r,n,s,i){var o,l,c=Pe(e,"x","batchNorm"),d=Pe(t,"mean","batchNorm"),u=Pe(r,"variance","batchNorm");return s!=null&&(o=Pe(s,"scale","batchNorm")),n!=null&&(l=Pe(n,"offset","batchNorm")),qe(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),qe(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."}),qe(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&qe(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),l!=null&&qe(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function VG(e,t,r,n,s,i){var o,l,c=Pe(e,"x","batchNorm"),d=Pe(t,"mean","batchNorm"),u=Pe(r,"variance","batchNorm");return s!=null&&(o=Pe(s,"scale","batchNorm")),n!=null&&(l=Pe(n,"offset","batchNorm")),qe(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),qe(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."}),qe(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&qe(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),l!=null&&qe(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function p1(e,t,r,n,s,i){i==null&&(i=.001);var o,l,c,d=Pe(e,"x","batchNorm"),u=Pe(t,"mean","batchNorm"),h=Pe(r,"variance","batchNorm");s!=null&&(o=Pe(s,"scale","batchNorm")),n!=null&&(l=Pe(n,"offset","batchNorm")),qe(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),qe(l==null||u.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),qe(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var m=[d,u,h,o];return dt.runKernelFunc(function(p,v){var g=p.batchNormalization(c,sN(u),sN(h),i,sN(o),sN(l));return v([d,u,h,o]),g},{x:d,mean:u,variance:h,scale:o,offset:l},function(p,v){var g=v,b=g[0],y=g[1],C=g[2],N=g[3],k=N??jr(1),S=ci(y.shape,c.shape),D=[];if(y.rank===1){for(var E=0;E<c.shape.length-1;++E)D.push(c.shape[E]);D.push(1)}var T=b.sub(y),A=p.mul(k),L=LG(C.add(jr(i))),P=L.mul(L).mul(L).mul(jr(-.5));return{x:function(){return y.rank===1?p.mul(uv(L.as4D(1,1,1,y.shape[0]),D)).mul(k).reshape(b.shape):p.mul(L).mul(k).reshape(b.shape)},mean:function(){var O=L.mul(jr(-1)).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},variance:function(){var O=P.mul(T).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},scale:function(){var O=T.mul(L),Q=p.mul(O);return y.rank===1&&(Q=Q.sum(S)),Q.reshape(y.shape)},offset:function(){var O=p;return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(d.shape)}function sN(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function RS(){nG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var rTe=et({batchNormalization2d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),UG(e,t,r,i,s,n)}}),nTe=et({batchNormalization3d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),$G(e,t,r,i,s,n)}}),aTe=et({batchNormalization4d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),VG(e,t,r,i,s,n)}}),sTe=et({batchNormalization_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),p1(e,t,r,i,s,n)}}),qG=et({batchNorm_:p1}),iTe=et({batchNorm2d_:UG}),oTe=et({batchNorm3d_:$G}),lTe=et({batchNorm4d_:VG}),FS=et({logicalAnd_:function(e,t){var r=Pe(e,"a","logicalAnd","bool"),n=Pe(t,"b","logicalAnd","bool");return Rn(r.shape,n.shape),dt.runKernelFunc(function(s){return s.logicalAnd(r,n)},{a:r,b:n},null,"LogicalAnd")}}),cTe=et({logicalNot_:function(e){var t=Pe(e,"x","logicalNot","bool");return dt.runKernelFunc(function(r){return r.logicalNot(t)},{$x:t})}}),zG=et({logicalOr_:function(e,t){var r=Pe(e,"a","logicalOr","bool"),n=Pe(t,"b","logicalOr","bool");return Rn(r.shape,n.shape),dt.runKernelFunc(function(s){return s.logicalOr(r,n)},{$a:r,$b:n})}}),dTe=et({logicalXor_:function(e,t){var r=Pe(e,"a","logicalXor","bool"),n=Pe(t,"b","logicalXor","bool");return Rn(r.shape,n.shape),zG(e,t).logicalAnd(FS(e,t).logicalNot())}}),Dx=et({where_:function(e,t,r){var n=Pe(t,"a","where"),s=Pe(r,"b","where"),i=Pe(e,"condition","where","bool");return ca(n.shape,s.shape,"Error in where: "),i.rank===1?qe(i.shape[0]===n.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ca(i.shape,s.shape,"Error in where: "),dt.runKernelFunc(function(o,l){var c=o.select(i,n,s);return l([i]),c},{$condition:i,$a:n,$b:s},function(o,l){var c=l[0];return{$condition:function(){return qn(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),HG=function(e){return Ir(this,void 0,void 0,function(){var t,r,n;return Pr(this,function(s){switch(s.label){case 0:return[4,(t=Pe(e,"condition","whereAsync","bool")).data()];case 1:return r=s.sent(),n=ST(t.shape,r),e!==t&&t.dispose(),[2,n]}})})},In=et({add_:function(e,t){var r,n=Pe(e,"a","add"),s=Pe(t,"b","add");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o){return o.add(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=ci(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=ci(s.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Add")}}),uTe=et({addN_:function(e){qe(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),qe(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(s,i){return Pe(s,"tensors"+i,"addN")}),r=t[0];t.forEach(function(s){if(s.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(s){if(!Ci(s.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=t;return dt.runKernelFunc(function(s){return s.addN(t)},n,function(s){var i={};return t.forEach(function(o,l){i[l]=function(){return s.clone()}}),i},"AddN")}}),hTe=et({addStrict_:function(e,t){var r=Pe(e,"a","addStrict"),n=Pe(t,"b","addStrict");return ca(r.shape,n.shape,"Error in addStrict: "),r.add(n)}}),fTe=et({atan2_:function(e,t){var r,n=Pe(e,"a","atan2"),s=Pe(t,"b","atan2");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o,l){var c=o.atan2(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=In(c.square(),d.square()),h=o.mul(d.div(u)),m=ci(c.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(c.shape)},$b:function(){var u=In(c.square(),d.square()),h=cw(o.mul(c.div(u))),m=ci(d.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(d.shape)}}})}}),Nd=et({div_:function(e,t){var r,n=Pe(e,"a","div"),s=Pe(t,"b","div");if(r=hs(n,s),n=r[0],s=r[1],n.dtype==="int32"&&s.dtype==="int32")return WG(n,s);var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o,l){var c=o.realDivide(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=ci(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=ci(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"Div")}}),mTe=et({divNoNan_:function(e,t){var r,n=Pe(e,"a","div"),s=Pe(t,"b","div");n=(r=hs(n,s))[0],s=r[1];var i=Nd(n,s),o=qn(i),l=s.equal(o);return Dx(l,o,i)}}),pTe=et({divStrict_:function(e,t){var r=Pe(e,"a","div"),n=Pe(t,"b","div");return ca(r.shape,n.shape,"Error in divideStrict: "),r.div(n)}}),WG=et({floorDiv_:function(e,t){var r,n=Pe(e,"a","floorDiv"),s=Pe(t,"b","floorDiv");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o,l){var c=o.floorDiv(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=ci(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=ci(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"FloorDiv")}}),DT=et({maximum_:function(e,t){var r,n=Pe(e,"a","maximum"),s=Pe(t,"b","maximum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Rn(n.shape,s.shape),dt.runKernelFunc(function(i,o){var l=i.maximum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),xTe=et({maximumStrict_:function(e,t){var r=Pe(e,"a","maximumStrict"),n=Pe(t,"b","maximumStrict");return ca(r.shape,n.shape,"Error in maximumStrict: "),r.maximum(n)}}),GG=et({minimum_:function(e,t){var r,n=Pe(e,"a","minimum"),s=Pe(t,"b","minimum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Rn(n.shape,s.shape),dt.runKernelFunc(function(i,o){var l=i.minimum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),vTe=et({minimumStrict_:function(e,t){var r=Pe(e,"a","minimumStrict"),n=Pe(t,"b","minimumStrict");return ca(r.shape,n.shape,"Error in minimumStrict: "),r.minimum(n)}}),gTe=et({mod_:function(e,t){var r,n=Pe(e,"a","mod"),s=Pe(t,"b","mod");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o,l){var c=o.mod(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=ci(c.shape,i);return u.length>0?o.sum(u).reshape(c.shape):o},$b:function(){var u=o.mul(c.div(d).floor().neg()),h=ci(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}})}}),bTe=et({modStrict_:function(e,t){var r=Pe(e,"a","modStrict"),n=Pe(t,"b","modStrict");return ca(r.shape,n.shape,"Error in modStrict: "),r.mod(n)}}),So=et({mul_:function(e,t){var r,n=Pe(e,"a","mul"),s=Pe(t,"b","mul");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o,l){var c=o.multiply(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.mul(d.toFloat()),h=ci(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=ci(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}},"Mul")}}),yTe=et({mulStrict_:function(e,t){var r=Pe(e,"a","mul"),n=Pe(t,"b","mul");return ca(r.shape,n.shape,"Error in multiplyStrict: "),r.mul(n)}}),dw=et({pow_:function(e,t){var r,n=Pe(e,"base","pow"),s=Pe(t,"exp","pow");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape),o=[n,s];return dt.runKernelFunc(function(l,c){var d=l.pow(n,s);return c([n,s,d]),d},{a:n,b:s},function(l,c){var d=c[0],u=c[1],h=c[2];return{a:function(){var m=u.toFloat(),p=l.mul(m.mul(d.pow(m.sub(jr(1))))),v=ci(d.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(d.shape)},b:function(){var m=d.greater(0),p=d.log().where(m,qn(d)),v=l.mul(h.mul(p)),g=ci(u.shape,i);return g.length>0&&(v=v.sum(g)),v.reshape(u.shape)}}},"Pow",{},o,[!0])}}),jTe=et({powStrict_:function(e,t){return ca(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),NTe=et({squaredDifferenceStrict_:function(e,t){var r=Pe(e,"a","squaredDifferenceStrict"),n=Pe(t,"b","squaredDifferenceStrict");return ca(r.shape,n.shape,"Error in squaredDifferenceStrict: "),r.squaredDifference(n)}}),di=et({sub_:function(e,t){var r,n=Pe(e,"a","sub"),s=Pe(t,"b","sub");r=hs(n,s),n=r[0],s=r[1];var i=Rn(n.shape,s.shape);return dt.runKernelFunc(function(o){return o.subtract(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=ci(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=ci(s.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(s.shape)}}},"Sub")}}),wTe=et({subStrict_:function(e,t){var r=Pe(e,"a","subStrict"),n=Pe(t,"b","subStrict");return ca(r.shape,n.shape,"Error in subStrict: "),r.sub(n)}}),YG=et({equal_:function(e,t){var r,n=Pe(e,"a","equal"),s=Pe(t,"b","equal");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i){return i.equal(n,s)},{$a:n,$b:s})}}),STe=et({equalStrict_:function(e,t){var r=Pe(e,"a","equalStrict"),n=Pe(t,"b","equalStrict");return ca(r.shape,n.shape,"Error in equalStrict: "),r.equal(n)}}),CTe=et({greater_:function(e,t){var r,n=Pe(e,"a","greater"),s=Pe(t,"b","greater");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i){return i.greater(n,s)},{a:n,b:s},null,"Greater")}}),KG=et({greaterEqual_:function(e,t){var r,n=Pe(e,"a","greaterEqual"),s=Pe(t,"b","greaterEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i,o){var l=i.greaterEqual(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return qn(l)},b:function(){return qn(c)}}},"GreaterEqual")}}),kTe=et({greaterEqualStrict_:function(e,t){var r=Pe(e,"a","greaterEqualStrict"),n=Pe(t,"b","greaterEqualStrict");return ca(r.shape,n.shape,"Error in greaterEqualStrict: "),r.greaterEqual(n)}}),_Te=et({greaterStrict_:function(e,t){var r=Pe(e,"a","greaterStrict"),n=Pe(t,"b","greaterStrict");return ca(r.shape,n.shape,"Error in greaterStrict: "),r.greater(n)}}),ETe=et({less_:function(e,t){var r,n=Pe(e,"a","less"),s=Pe(t,"b","less");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i){return i.less(n,s)},{a:n,b:s},null,"Less")}}),DTe=et({lessEqual_:function(e,t){var r,n=Pe(e,"a","lessEqual"),s=Pe(t,"b","lessEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i,o){var l=i.lessEqual(n,s);return o([n,s]),l},{a:n,b:s},null,"LessEqual")}}),ATe=et({lessEqualStrict_:function(e,t){var r=Pe(e,"a","lessEqualStrict"),n=Pe(t,"b","lessEqualStrict");return ca(r.shape,n.shape,"Error in lessEqualStrict: "),r.lessEqual(n)}}),TTe=et({lessStrict_:function(e,t){var r=Pe(e,"a","lessStrict"),n=Pe(t,"b","lessStrict");return ca(r.shape,n.shape,"Error in lessStrict: "),r.less(n)}}),ITe=et({notEqual_:function(e,t){var r,n=Pe(e,"a","notEqual"),s=Pe(t,"b","notEqual");return r=hs(n,s),n=r[0],s=r[1],Rn(n.shape,s.shape),dt.runKernelFunc(function(i){return i.notEqual(n,s)},{a:n,b:s},null,"NotEqual")}}),PTe=et({notEqualStrict_:function(e,t){var r=Pe(e,"a","notEqualStrict"),n=Pe(t,"b","notEqualStrict");return ca(r.shape,n.shape,"Error in notEqualStrict: "),r.notEqual(n)}});function bB(e,t){for(var r=[],n=e;n<t;++n)r.push(n);return r}function yB(e){for(var t=[],r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t.push(e[r][n]);return t}var AT=et({gather_:function(e,t,r){r===void 0&&(r=0);var n=Pe(e,"x","gather"),s=Pe(t,"indices","gather","int32");r=hi(r,n.shape)[0];var i=function(o,l,c){for(var d=o.shape[c],u=[],h=1,m=1,p=0;p<c;p++)u.push(o.shape[p]),h*=o.shape[p];for(p=0;p<l.rank;p++)u.push(l.shape[p]);for(p=c+1;p<o.rank;p++)u.push(o.shape[p]),m*=o.shape[p];return{batchSize:h,sliceSize:m,dimSize:d,outputShape:u}}(n,s,r);return dt.runKernelFunc(function(o,l){var c=o.gather(n,s.flatten(),r);return l([s]),c},{x:n,indices:s},function(o,l){var c=l[0];return{x:function(){var d=n.shape,u=c.size,h=d.slice(0,r),m=h.length,p=d.slice(r,d.length).slice(1),v=p.length,g=bB(0,m),b=bB(m+1,m+1+v),y=yB([h,[u],p]),C=o.reshape(y),N=c.reshape([u]),k=yB([[m],g,b]),S=C.transpose(k),D=XG(S,N,n.shape[r]),E=xT(k);return D=D.transpose(E)},indices:function(){return c}}},"Gather",{axis:r}).reshape(i.outputShape)}}),XG=et({unsortedSegmentSum_:function(e,t,r){var n=Pe(e,"x","unsortedSegmentSum"),s=Pe(t,"segmentIds","unsortedSegmentSum","int32");return qe(Bs(r),function(){return"numSegments must be of dtype int"}),dt.runKernelFunc(function(i,o){var l=i.unsortedSegmentSum(n,s,r);return o([s]),l},{$x:n},function(i,o){var l=o[0];return{$x:function(){return function(c,d){for(var u=DT(d,qn(d)),h=AT(c,u),m=KG(d,jr(0,"int32")),p=h.rank-m.rank,v=0;v<p;++v)m=Mc(m,v+1);m=FS(m,hg(h.shape,"bool"));var g=qn(h);return Dx(m,h,g)}(i,l)}}})}}),OTe=function(e,t,r){return Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g;return Pr(this,function(b){switch(b.label){case 0:for(n=Pe(e,"tensor","boolMask"),s=Pe(t,"mask","boolMask","bool"),i=r??0,o=s.rank,l=n.shape,qe(o>0,function(){return"mask cannot be scalar"}),ca(l.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=i;d<i+o;d++)c*=l[d];return u=l.slice(0,i).concat([c],l.slice(i+o)),h=n.reshape(u),m=s.reshape([-1]),[4,HG(m)];case 1:return p=b.sent(),v=p.squeeze([1]),g=AT(h,v,i),e!==n&&n.dispose(),t!==s&&s.dispose(),v.dispose(),h.dispose(),m.dispose(),p.dispose(),[2,g]}})})};function QG(e,t,r,n,s,i,o){i===void 0&&(i="NHWC"),qe(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var l=e,c=t,d=!1;t.rank===3&&(d=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=[1,e[0],e[1],e[2]]),qe(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),qe(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),qe(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank});var u=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];qe(u===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+r.shape[2]+"."}),qe(h===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+r.shape[3]+"."}),o!=null&&qe(Bs(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var m=jT(i),p=Wx(l,r.shape,n,1,s,o,!1,m),v=dt.runKernelFunc(function(g,b){var y=g.conv2dDerInput(c,r,p);return b([r,c]),y},{dy4D:c,filter:r},function(g,b){var y=b[0],C=b[1];return{dy4D:function(){return Xc(g,y,n,s,i,1,o)},filter:function(){return TT(g,C,y.shape,n,s,i,o)}}});return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function BE(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function JG(e,t,r,n,s){qe(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,l=!1;t.rank===4&&(l=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],d=o.shape[4];qe(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),qe(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),qe(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+r.rank}),qe(c===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+r.shape[3]+"."}),qe(d===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+r.shape[4]+"."});var u=ow(i,r.shape,n,1,s),h=dt.runKernelFunc(function(m){return m.conv3dDerInput(o,r,u)},{dy5D:o});return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var MTe=et({conv1d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NWC"),i===void 0&&(i=1);var l=Pe(e,"x","conv1d"),c=Pe(t,"filter","conv1d"),d=l,u=!1;l.rank===2&&(u=!0,d=l.as3D(1,l.shape[0],l.shape[1])),qe(d.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."}),qe(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&qe(Bs(n),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."}),qe(d.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),qe(hl(r,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+i+"'"}),qe(s==="NWC",function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),p=Xc(m,h,[1,r],n,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Xc=et({conv2d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]);var l=Pe(e,"x","conv2d"),c=Pe(t,"filter","conv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),qe(d.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."}),qe(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&qe(Bs(n),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=s==="NHWC"?d.shape[3]:d.shape[1];qe(h===c.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."}),qe(hl(r,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var m=jT(s),p=Wx(d.shape,c.shape,r,i,n,o,!1,m),v=[c,d],g=dt.runKernelFunc(function(b,y){var C=b.conv2d(d,c,p);return y([c,d]),C},{x:d,filter:c},function(b,y){var C=y,N=C[0],k=C[1];return qe(Uv(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return ZG(k.shape,b,N,r,n,s)},filter:function(){return TT(k,b,N.shape,r,n,s)}}},"Conv2D",p,v);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),RTe=et({conv3d_:function(e,t,r,n,s,i){s===void 0&&(s="NDHWC"),i===void 0&&(i=[1,1,1]);var o=Pe(e,"x","conv3d"),l=Pe(t,"filter","conv3d"),c=o,d=!1;o.rank===4&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),qe(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),qe(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),qe(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),qe(function(m,p){return BE(m)||BE(p)}(r,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),qe(s==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var u=ow(c.shape,l.shape,r,i,n),h=dt.runKernelFunc(function(m,p){var v=m.conv3d(c,l,u);return p([c,l]),v},{x:c,$filter:l},function(m,p){qe(BE(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],g=p[1];return{x:function(){return JG(v.shape,m,g,r,n)},$filter:function(){return function(b,y,C,N,k){var S=b;b.rank===4&&(S=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=y;D.rank===4&&(D=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),qe(S.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+S.shape+"."}),qe(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),qe(C.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+C+"."}),qe(S.shape[4]===C[3],function(){return"Error in conv3dDerFilter: depth of input "+S.shape[4]+") must match input depth in filter ("+C[3]+"."}),qe(D.shape[4]===C[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+C[4]+")."});var E=ow(S.shape,C,N,1,k);return dt.runKernelFunc(function(T){return T.conv3dDerFilter(S,D,E)},{x5D:S,dy5D:D})}(v,m,g.shape,r,n)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),TT=et({conv2dDerFilter_:function(e,t,r,n,s,i,o){i===void 0&&(i="NHWC");var l=e;e.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),qe(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),qe(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),qe(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1],u=i==="NHWC"?c.shape[3]:c.shape[1];qe(d===r[2],function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+r[2]+"."}),qe(u===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+r[3]+")."}),o!=null&&qe(Bs(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var h=jT(i),m=Wx(l.shape,r,n,1,s,o,!1,h);return dt.runKernelFunc(function(p){return p.conv2dDerFilter(l,c,m)},{x4D:l,dy4D:c})}}),ZG=et({conv2dDerInput_:QG}),LS=et({depthwiseConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]);var l=Pe(e,"x","depthwiseConv2d"),c=Pe(t,"filter","depthwiseConv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),qe(d.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."}),qe(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),qe(d.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),qe(hl(r,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),o!=null&&qe(Bs(n),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=Wx(d.shape,c.shape,r,i,n,o,!0),m=[d,c],p=dt.runKernelFunc(function(v,g){var b=v.depthwiseConv2D(d,c,h);return g([d,c]),b},{x:d,filter:c},function(v,g){qe(Uv(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=g[0],y=g[1];return{x:function(){return eY(b.shape,v,y,h)},filter:function(){return tY(b,v,y.shape,h)}}},"DepthwiseConv2dNative",h,m);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),eY=et({depthwiseConv2dDerInput_:function(e,t,r,n){var s=t,i=!1;t.rank===3&&(i=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=dt.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(s,r,n)},{dy4D:s});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),tY=et({depthwiseConv2dDerFilter_:function(e,t,r,n){var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),dt.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(s,i,n)},{x4D:s,dy4D:i})}}),IT=et({separableConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var l=Pe(e,"x","separableConv2d"),c=Pe(t,"depthwiseFilter","separableConv2d"),d=Pe(r,"pointwiseFilter","separableConv2d"),u=l,h=!1;if(l.rank===3&&(h=!0,u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");qe(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),qe(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),qe(d.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),qe(d.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."}),qe(d.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."});var m=c.shape[2],p=c.shape[3];qe(d.shape[2]===m*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*p+", but got "+d.shape[2]+"."});var v=LS(u,c,n,s,o,i),g=Xc(v,d,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),FTe=et({conv2dTranspose_:function(e,t,r,n,s,i){return QG(r,Pe(e,"x","conv2dTranspose"),Pe(t,"filter","conv2dTranspose"),n,s,"NHWC",i)}}),LTe=et({conv3dTranspose_:function(e,t,r,n,s){return JG(r,Pe(e,"x","conv3dTranspose"),Pe(t,"filter","conv3dTranspose"),n,s)}}),BS=et({matMul_:function(e,t,r,n){var s;r===void 0&&(r=!1),n===void 0&&(n=!1);var i=Pe(e,"a","matMul"),o=Pe(t,"b","matMul");s=hs(i,o),i=s[0],o=s[1];var l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=n?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),m=o.shape.slice(0,-2),p=Rr(h),v=Rr(m);qe(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),qe(Ci(h,m),function(){return"Error in matMul: outer dimensions ("+h+") and ("+m+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),qe(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+r+" and transposeB="+n+" must match."});var g=i.shape.slice(0,-2).concat([d,u]),b=r?i.as3D(p,l,d):i.as3D(p,d,l),y=n?o.as3D(v,u,c):o.as3D(v,c,u),C={transposeA:r,transposeB:n};return dt.runKernelFunc(function(N,k){var S=N.batchMatMul(b,y,r,n);return k([b,y]),S},{a:b,b:y},function(N,k){var S=k,D=S[0],E=S[1];return r||n?!r&&n?{a:function(){return N.matMul(E,!1,!1)},b:function(){return N.matMul(D,!0,!1)}}:r&&!n?{a:function(){return E.matMul(N,!1,!0)},b:function(){return D.matMul(N,!1,!1)}}:{a:function(){return E.matMul(N,!0,!0)},b:function(){return N.matMul(D,!0,!0)}}:{a:function(){return N.matMul(E,!1,!0)},b:function(){return D.matMul(N,!0,!1)}}},"BatchMatMul",C).reshape(g)}}),BTe=et({dot_:function(e,t){var r=Pe(e,"t1","dot"),n=Pe(t,"t2","dot");qe(!(r.rank!==1&&r.rank!==2||n.rank!==1&&n.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+r.rank+" and "+n.rank+"."});var s=r.rank===1?r.size:r.shape[1],i=n.rank===1?n.size:n.shape[0];return qe(s===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+i+"."}),r.rank===1&&n.rank===1?r.as2D(1,-1).matMul(n.as2D(-1,1)).asScalar():r.rank===1&&n.rank===2?r.as2D(1,-1).matMul(n.as2D(n.shape[0],n.shape[1])).as1D():r.rank===2&&n.rank===1?r.matMul(n.as2D(-1,1)).as1D():r.matMul(n.as2D(n.shape[0],n.shape[1]))}}),UTe=et({outerProduct_:function(e,t){var r=Pe(e,"v1","outerProduct"),n=Pe(t,"v2","outerProduct");return qe(r.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+r.rank+" and "+n.rank+"."}),r.as2D(-1,1).matMul(n.as2D(1,-1))}}),x1=et({reverse_:function(e,t){var r=Pe(e,"x","reverse");if(r.rank===0)return r.clone();var n=hi(t,r.shape);return dt.runKernelFunc(function(s){return s.reverse(r,n)},{$x:r},function(s){return{$x:function(){return s.reverse(n)}}}).reshapeAs(r)}}),$Te=et({reverse1d_:function(e){var t=Pe(e,"x","reverse");return qe(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),x1(t,0)}}),VTe=et({reverse2d_:function(e,t){var r=Pe(e,"x","reverse");return qe(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),x1(r,t)}}),qTe=et({reverse3d_:function(e,t){var r=Pe(e,"x","reverse");return qe(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),x1(r,t)}}),zTe=et({reverse4d_:function(e,t){var r=Pe(e,"x","reverse");return qe(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),x1(r,t)}});function rY(e,t,r,n,s,i){var o=Pe(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qe(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),qe(hl(r,n),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"}),i!=null&&qe(Bs(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ci(d.inShape,d.outShape))return o.clone();var u=[l],h=dt.runKernelFunc(function(m,p){var v=m.maxPool(l,d);return p([l,v]),v},{x:l},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,N,k,S,D,E){var T=Pe(b,"dy","maxPoolBackprop"),A=Pe(y,"input","maxPoolBackprop"),L=Pe(C,"output","maxPoolBackprop");qe(A.rank===T.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+T.rank+")"}),qe(hl(k,S),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),qe(T.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),qe(A.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var P=Ay(A.shape,N,k,S,D,E);return dt.runKernelFunc(function(O){return O.maxPoolBackprop(T,A,L,P)},{$dy:T,$input:A})}(m,v,g,t,r,n,s)}}},"MaxPool",d,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function nY(e,t,r,n,s,i){var o=Pe(e,"x","avgPool","float32");qe(hl(r,n),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"});var l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qe(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&qe(Bs(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ci(d.inShape,d.outShape))return o.clone();var u=dt.runKernelFunc(function(h){return h.avgPool(l,d)},{x:l},function(h){return{x:function(){return function(m,p,v,g,b,y){var C=Pe(m,"dy","avgPoolBackprop"),N=Pe(p,"input","avgPoolBackprop");qe(N.rank===C.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+C.rank+")"}),qe(hl(g,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+b+"'"});var k=N,S=C,D=!1;N.rank===3&&(D=!0,k=N.as4D(1,N.shape[0],N.shape[1],N.shape[2]),S=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),qe(S.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),qe(k.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var E=Ay(k.shape,v,g,b,y),T=dt.runKernelFunc(function(A){return A.avgPoolBackprop(S,k,E)},{dy4D:S,input4D:k});return D?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}(h,l,t,r,n,s)}}},"AvgPool",d);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var gi=et({maxPool_:function(e,t,r,n,s){return rY(e,t,r,1,n,s)}}),v1=et({avgPool_:function(e,t,r,n,s){return nY(e,t,r,1,n,s)}}),HTe=et({pool_:function(e,t,r,n,s,i){s==null&&(s=[1,1]),i==null&&(i=1),n===0&&(n="valid");var o=Pe(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qe(hl(i,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"});var d,u=Ay(l.shape,t,i,s,n),h=[u.dilationHeight,u.dilationWidth];d=n==="same"?function(k,S){var D=k.map(function(A,L){return A+(A-1)*(S[L]-1)}).map(function(A){return A-1}),E=D.map(function(A){return Math.floor(A/2)}),T=D.map(function(A,L){return A-E[L]});return D.map(function(A,L){return[E[L],T[L]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var m=h[0]===1&&h[1]===1,p=function(k,S,D){var E=D.map(function(z){return z[0]}),T=D.map(function(z){return z[1]}),A=k.concat(E,T),L=S.map(function(z,re){return(z-A[re]%z)%z}),P=T.map(function(z,re){return z+L[re]}),O=S.map(function(z,re){return[E[re],P[re]]}),Q=S.map(function(z,re){return[0,L[re]]});return[O,Q]}([u.inHeight,u.inWidth],h,d),v=p[0],g=p[1],b=m?n:"valid",y=m?l:cG(l,h,v),C=(r==="avg"?function(){return nY(y,t,i,1,b)}:function(){return rY(y,t,i,1,b)})(),N=m?C:iG(C,h,g);return c?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),WTe=et({maxPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Pe(e,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),qe(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),qe(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),qe(hl(r,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&qe(Bs(n),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=iw(c.shape,t,r,o,n,s,i),h=dt.runKernelFunc(function(m,p){var v=m.maxPool3d(c,u);return p([c,v]),v},{x:c},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,N,k,S,D,E){var T=Pe(b,"dy","maxPool3dBackprop"),A=Pe(y,"input","maxPool3dBackprop"),L=Pe(C,"output","maxPool3dBackprop"),P=T,O=A,Q=L,z=!1;A.rank===4&&(z=!0,P=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),O=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),Q=L.as5D(1,L.shape[0],L.shape[1],L.shape[2],L.shape[3])),qe(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),qe(O.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),qe(Q.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Q.rank+"."}),S==null&&(S=[1,1,1]),qe(hl(k,S),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),E!=null&&qe(Bs(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+D+"."});var re=iw(O.shape,N,k,S,D,E),U=dt.runKernelFunc(function(X){return X.maxPool3dBackprop(P,O,Q,re)},{dy5D:P,input5D:O});return z?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U}(m,v,g,t,r,o,n,s)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),GTe=et({avgPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Pe(e,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),qe(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),qe(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),qe(hl(r,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&qe(Bs(n),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=iw(c.shape,t,r,o,n,s,i),h=dt.runKernelFunc(function(m){return m.avgPool3d(c,u)},{x:c},function(m){return{x:function(){return function(p,v,g,b,y,C,N){var k=Pe(p,"dy","avgPool3dBackprop"),S=Pe(v,"input","avgPool3dBackprop"),D=k,E=S,T=!1;S.rank===4&&(T=!0,D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),E=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),qe(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),qe(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),qe(hl(b,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+y+"'"}),N!=null&&qe(Bs(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+C+"."});var A=iw(E.shape,g,b,y,C,N),L=dt.runKernelFunc(function(P){return P.avgPool3dBackprop(D,E,A)},{dy5D:D,input5D:E});return T?L.as4D(L.shape[1],L.shape[2],L.shape[3],L.shape[4]):L}(m,c,t,r,o,n,s)}}});return h=h.cast(c.dtype),d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),zu=et({slice_:function(e,t,r){var n,s,i=Pe(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(n=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(c){qe(c!==-1,function(){return"slice() does not support negative begin indexing."})}),s=(s=r==null?new Array(i.rank).fill(-1):typeof r=="number"?[r].concat(new Array(i.rank-1).fill(-1)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(-1)):r).map(function(c,d){return c>=0?c:(qe(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."}),i.shape[d]-n[d])}),j3e(i,n,s);var o=i.shape,l={begin:n,size:s};return dt.runKernelFunc(function(c){return c.slice(i,n,s)},{x:i},function(c){for(var d=[],u=0;u<c.rank;u++)d.push([n[u],o[u]-n[u]-s[u]]);return{x:function(){return c.pad(d)}}},"Slice",l)}}),YTe=et({slice1d_:function(e,t,r){var n=Pe(e,"x","slice1d");return qe(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),zu(n,[t],[r])}}),KTe=et({slice2d_:function(e,t,r){var n=Pe(e,"x","slice2d");return qe(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),zu(n,t,r)}}),aY=et({slice3d_:function(e,t,r){var n=Pe(e,"x","slice3d");return qe(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),zu(n,t,r)}}),XTe=et({slice4d_:function(e,t,r){var n=Pe(e,"x","slice4d");return qe(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),zu(n,t,r)}});function sY(e,t,r,n,s){return t.rank<r.rank&&(t=t.reshape(ul(t.shape,n))),e.rank<r.rank&&(e=e.reshape(ul(e.shape,n))),{x:function(){var i=e.mul(r.equal(t).cast(e.dtype));return s==null?i:i.transpose(s)}}}var QTe=et({all_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","all","bool"),s=hi(t,n.shape),i=s,o=Zu(i,n.rank);o!=null&&(n=n.transpose(o),i=eh(i.length,n.rank));var l=dt.runKernelFunc(function(d){return d.all(n,i)},{$x:n});if(r){var c=ul(l.shape,s);return l.reshape(c)}return l}}),JTe=et({any_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","any","bool"),s=hi(t,n.shape),i=s,o=Zu(i,n.rank);o!=null&&(n=n.transpose(o),i=eh(i.length,n.rank));var l=dt.runKernelFunc(function(d){return d.any(n,i)},{$x:n});if(r){var c=ul(l.shape,s);return l.reshape(c)}return l}}),ZTe=et({argMax_:function(e,t){t===void 0&&(t=0);var r=Pe(e,"x","argMax");t==null&&(t=0);var n=hi(t,r.shape),s=Zu(n,r.rank);s!=null&&(r=r.transpose(s),n=eh(n.length,r.rank));var i={axis:n[0]},o=[r];return dt.runKernelFunc(function(l,c){var d=l.argMax(r,n[0]);return c([r]),d},{x:r},function(l,c){var d=c[0];return{x:function(){return qn(d)}}},"ArgMax",i,o)}}),eIe=et({argMin_:function(e,t){t===void 0&&(t=0);var r=Pe(e,"x","argMin");t==null&&(t=0);var n=hi(t,r.shape),s=Zu(n,r.rank);return s!=null&&(r=r.transpose(s),n=eh(n.length,r.rank)),dt.runKernelFunc(function(i,o){var l=i.argMin(r,n[0]);return o([r]),l},{$x:r},function(i,o){var l=o[0];return{$x:function(){return qn(l)}}})}}),tIe=et({logSumExp_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","logSumExp"),s=hi(t,n.shape),i=n.max(s,!0),o=n.sub(i).exp().sum(s).log(),l=i.reshape(o.shape).add(o);if(r){var c=ul(l.shape,s);return l.reshape(c)}return l}}),US=et({max_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","max"),s=n,i=hi(t,n.shape),o=i,l=Zu(o,n.rank);l!=null&&(n=n.transpose(l),o=eh(o.length,n.rank));var c=[n],d=dt.runKernelFunc(function(h,m){var p=h.max(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Max",{axes:o},c,[!0]);if(r){var u=ul(d.shape,i);d=d.reshape(u)}return d}}),rIe=et({mean_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","mean"),s=hi(t,n.shape),i=Rr(fo(n.shape,s)[1]);return MS(function(o){var l=jr(i);return{value:(l.dtype===o.dtype?o:o.cast(l.dtype)).div(l).sum(t,r),gradFunc:function(c){var d=o.shape.slice();return s.forEach(function(u){d[u]=1}),c.reshape(d).mul(hg(o.shape,"float32")).div(i)}}})(n)}}),nIe=et({min_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","min"),s=n,i=hi(t,n.shape),o=i,l=Zu(o,n.rank);l!=null&&(n=n.transpose(l),o=eh(o.length,n.rank));var c=[n],d=dt.runKernelFunc(function(h,m){var p=h.min(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Min",{axes:o},c,[!0]);if(r){var u=ul(d.shape,i);d=d.reshape(u)}return d}}),aIe=et({moments_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=hi(t,(e=Pe(e,"x","moments")).shape),s=e.mean(n,r),i=s.shape;r||(i=ul(s.shape,n));var o=e.toFloat().sub(s.reshape(i)).square();return{mean:s,variance:o.mean(n,r)}}}),iY=et({sum_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","sum");n.dtype==="bool"&&(n=n.toInt());var s=hi(t,n.shape);return MS(function(i){var o=Zu(s,i.rank),l=s,c=i;o!=null&&(c=i.transpose(o),l=eh(l.length,i.rank));var d=function(p){var v=i.shape.slice();return s.forEach(function(g){v[g]=1}),p.reshape(v).mul(hg(i.shape,"float32"))},u={axes:l},h=dt.runKernelFunc(function(p){return p.sum(c,l)},{x:c},function(p){return{x:function(){return d(p)}}},"Sum",u);if(r){var m=ul(h.shape,s);h=h.reshape(m)}return{value:h,gradFunc:d}})(n)}}),sIe=et({prod_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Pe(e,"x","prod");n.dtype==="bool"&&(n=n.toInt());var s=hi(t,n.shape),i=Zu(s,n.rank),o=s,l=n;i!=null&&(l=n.transpose(i),o=eh(o.length,n.rank));var c=dt.runKernelFunc(function(u){return u.prod(l,o)},{permutedX:l});if(r){var d=ul(c.shape,s);c=c.reshape(d)}return c}}),oY=et({elu_:function(e){var t=Pe(e,"x","elu");return dt.runKernelFunc(function(r,n){var s=r.elu(t);return n([s]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return dt.runKernelFunc(function(i){return i.eluDer(r,s)},{dy:r,y:s})}}})}}),iIe=et({leakyRelu_:function(e,t){t===void 0&&(t=.2);var r=Pe(e,"x","leakyRelu");return DT(jr(t).mul(r),r)}}),lY=et({prelu_:function(e,t){var r=Pe(e,"x","prelu"),n=Pe(t,"alpha","prelu");return dt.runKernelFunc(function(s,i){var o=s.prelu(r,n);return i([r,n]),o},{x:r,alpha:n},function(s,i){var o=i[0],l=i[1],c=o.greater(0);return{x:function(){return Dx(c,s,s.mul(l))},alpha:function(){var d=Dx(c,qn(s),s.mul(o)),u=ci(l.shape,s.shape);return u.length>0&&(d=d.sum(u)),d.reshape(l.shape)}}},"Prelu")}}),us=et({relu_:function(e){var t=Pe(e,"x","relu");return t.dtype==="bool"?t.toInt():dt.runKernelFunc(function(r,n){var s=r.relu(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mulStrict(s.step().toFloat())}}},"Relu")}}),cY=et({relu6_:function(e){var t=Pe(e,"x","relu6");return t.dtype==="bool"?t.toInt():dt.runKernelFunc(function(r,n){var s=r.relu6(t);return n([t]),s},{x:t},function(r,n){var s=n[0],i=s.lessEqual(6).mul(s.step());return{x:function(){return r.mulStrict(i.toFloat())}}},"Relu6")}}),oIe=et({selu_:function(e){var t=Pe(e,"x","selu");return dt.runKernelFunc(function(r,n){var s=r.selu(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){var i=s.greater(jr(0)),o=jr(kT),l=jr(_T),c=r.mul(l),d=r.mul(o).mul(s.toFloat().exp());return Dx(i,c,d)}}})}}),qm=et({transpose_:function(e,t){var r=Pe(e,"x","transpose");if(t==null&&(t=r.shape.map(function(s,i){return i}).reverse()),qe(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of perm "+t+"."}),t.forEach(function(s){qe(s>=0&&s<r.rank,function(){return"All entries in 'perm' must be between 0 and "+(r.rank-1)+" but got "+t})}),r.rank<=1)return r.clone();var n={perm:t};return dt.runKernelFunc(function(s){return s.transpose(r,t)},{x:r},function(s){var i=xT(t);return{x:function(){return s.transpose(i)}}},"Transpose",n)}}),lIe=et({localResponseNormalization_:function(e,t,r,n,s){t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5);var i=Pe(e,"x","localResponseNormalization");qe(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),qe(Bs(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,l=!1;i.rank===3&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=dt.runKernelFunc(function(d,u){var h=d.localResponseNormalization4D(o,t,r,n,s);return u([o,h]),h},{x4D:o},function(d,u){var h=u[0],m=u[1];return{x4D:function(){return dt.runKernelFunc(function(p){return p.LRNGrad(d,h,m,t,r,n,s)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dY=et({norm_:function(e,t,r,n){t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1);var s=function l(c,d,u){if(u===void 0&&(u=null),c.rank===0)return c.abs();if(c.rank!==1&&u===null)return l(c.reshape([-1]),d,u);if(c.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(d===1)return c.abs().sum(u);if(d===1/0)return c.abs().max(u);if(d===-1/0)return c.abs().min(u);if(d==="euclidean"||d===2)return c.abs().pow(jr(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(u)&&u.length===2){if(d===1)return c.abs().sum(u[0]).max(u[1]-1);if(d===1/0)return c.abs().sum(u[1]).max(u[0]);if(d===-1/0)return c.abs().sum(u[1]).min(u[0]);if(d==="fro"||d==="euclidean")return c.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+u)}(e=Pe(e,"x","norm"),t,r),i=s.shape;if(n){var o=hi(r,e.shape);i=ul(s.shape,o)}return s.reshape(i)}}),cIe=et({basicLSTMCell_:function(e,t,r,n,s,i){var o=Pe(e,"forgetBias","basicLSTMCell"),l=Pe(t,"lstmKernel","basicLSTMCell"),c=Pe(r,"lstmBias","basicLSTMCell"),d=Pe(n,"data","basicLSTMCell"),u=Pe(s,"c","basicLSTMCell"),h=Pe(i,"h","basicLSTMCell"),m=d.concat(h,1).matMul(l).add(c),p=m.shape[0],v=m.shape[1]/4,g=[p,v],b=m.slice([0,0],g),y=m.slice([0,v],g),C=m.slice([0,2*v],g),N=m.slice([0,3*v],g),k=b.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(C).sigmoid())),S=k.tanh().mulStrict(N.sigmoid());return[k,S]}}),dIe=et({multiRNNCell_:function(e,t,r,n){for(var s=Pe(t,"data","multiRNNCell"),i=ew(r,"c","multiRNNCell"),o=ew(n,"h","multiRNNCell"),l=s,c=[],d=0;d<e.length;d++){var u=e[d](l,i[d],o[d]);c.push(u[0]),c.push(u[1]),l=u[1]}var h=[],m=[];for(d=0;d<c.length;d+=2)h.push(c[d]),m.push(c[d+1]);return[h,m]}}),uIe=et({movingAverage_:function(e,t,r,n,s){s===void 0&&(s=!0);var i=Pe(e,"v","movingAverage"),o=Pe(t,"x","movingAverage"),l=Pe(r,"decay","movingAverage");lDe(i,o),qe(Ci(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=jr(1),d=c.sub(l),u=o.sub(i).mul(d);if(s){qe(n!=null,function(){return"When using zeroDebias: true, step is required."});var h=Pe(n,"step","movingAverage");u=u.div(c.sub(dw(l,h)))}return i.add(u)}}),hIe=et({stridedSlice_:function(e,t,r,n,s,i,o,l,c){if(s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),n==null&&(n=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var d=Pe(e,"x","stridedSlice"),u=Z8(l),h=d.shape.slice();u.forEach(function(b){t[b]=0,r[b]=1,h.splice(b,0,1)}),d=d.reshape(h);for(var m=0;m<d.rank;m++)t[m]=N3e(s,t,n,d.shape,m),r[m]=w3e(i,r,n,d.shape,m),n[m]=n[m]||1;var p=Z8(c);p.forEach(function(b){r[b]=t[b]+1,n[b]=1});var v=yT(t,r,n),g=v.filter(function(b,y){return p.indexOf(y)===-1});return n.every(function(b){return b===1})?zu(d,t,v).reshape(g):dt.runKernelFunc(function(b){return b.stridedSlice(d,t,r,n)},{$x:d}).reshape(g)}}),fIe=et({topk_:function(e,t,r){t===void 0&&(t=1),r===void 0&&(r=!0);var n=Pe(e,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var s=n.shape[n.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var i=dt.runKernelFunc(function(o){return o.topk(n,t,r)},{$x:n});return{values:i[0],indices:i[1]}}}),mIe=et({scatterND_:function(e,t,r){var n=Pe(e,"indices","scatterND","int32"),s=Pe(t,"updates","scatterND");return y3e(s,n,r),dt.runKernelFunc(function(i){return i.scatterND(n,s,r)},{indices:n,updates:s},null,"ScatterNd",{shape:r})}}),PT=et({fft_:function(e){qe(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return dt.runKernelFunc(function(s){return s.fft(n)},{input:e}).reshape(e.shape)}}),uw=et({ifft_:function(e){qe(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return dt.runKernelFunc(function(s){return s.ifft(n)},{input:e}).reshape(e.shape)}}),OT=et({rfft_:function(e,t){qe(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var r,n=e.shape[e.shape.length-1],s=e.size/n;if(t!=null&&t<n){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,r=e.slice(i,o),n=t}else if(t!=null&&t>n){var l=e.shape.map(function(y){return y});l[e.shape.length-1]=t-n,r=e.concat(Ua(l),e.shape.length-1),n=t}else r=e;var c=r.zerosLike(),d=Ui(r,c).as2D(s,n),u=PT(d),h=Math.floor(n/2)+1,m=Fc(u),p=ku(u),v=m.split([h,n-h],m.shape.length-1),g=p.split([h,n-h],p.shape.length-1),b=r.shape.slice();return b[r.shape.length-1]=h,Ui(v[0],g[0]).reshape(b)}}),uY=et({irfft_:function(e){var t=e.shape[e.shape.length-1],r=e.size/t;if(t<=2){var n=e.as2D(r,t),s=uw(n);return Fc(s)}var i=[r,2*(t-1)],o=Fc(e).as2D(r,t),l=ku(e).as2D(r,t),c=o.slice([0,1],[r,t-2]).reverse(1),d=l.slice([0,1],[r,t-2]).reverse(1).mul(jr(-1)),u=o.concat(c,1),h=l.concat(d,1);return n=Ui(u,h).as2D(i[0],i[1]),s=uw(n),Fc(s)}}),pIe=Object.freeze({fft:PT,ifft:uw,rfft:OT,irfft:uY}),xIe=et({sparseToDense_:function(e,t,r,n){n===void 0&&(n=0);var s=Pe(e,"sparseIndices","sparseToDense","int32"),i=Pe(t,"sparseValues","sparseToDense"),o=Pe(n,"defaultValue","sparseToDense",i.dtype);return function(l,c,d,u){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var h=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(d.length!==m)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+m+".");var p=c.size;if(c.rank!==0&&(c.rank!==1||p!==h))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+h+"]");if(c.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,r,o),dt.runKernelFunc(function(l){return l.sparseToDense(s,i,r,o)},{$sparseIndices:s,$sparseValues:i,$defaultValue:o})}}),vIe=et({gatherND_:function(e,t){var r=Pe(t,"indices","gatherND","int32"),n=Pe(e,"x","gatherND");return dt.runKernelFunc(function(s){return s.gatherND(n,r)},{x:n,indices:r},null,"GatherNd")}}),gIe=et({diag_:function(e){var t=Pe(e,"x","diag").flatten(),r=e.shape.concat(e.shape);return dt.runKernelFunc(function(n){return n.diag(t)},{$x:t}).reshape(r)}}),bIe=et({dropout_:function(e,t,r,n){var s=Pe(e,"x","dropout");if(qe(s.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),qe(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof os?s.clone():s;var i=function(c,d){if(d==null)return c.shape.slice();if(Ci(c.shape,d))return d;if(c.shape.length===d.length){for(var u=[],h=0;h<c.shape.length;h++)d[h]==null&&c.shape[h]!=null?u.push(c.shape[h]):u.push(d[h]);return u}return d}(s,r),o=1-t,l=lG(i,0,1,"float32",n).add(o).floor().div(o);return s.mul(l)}});function hY(e,t,r){for(var n=1-e%2,s=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+n-1);s[i]=t-r*Math.cos(o)}return Js(s,"float32")}var MT=et({hannWindow_:function(e){return hY(e,.5,.5)}}),fY=et({hammingWindow_:function(e){return hY(e,.54,.46)}}),RT=et({frame_:function(e,t,r,n,s){n===void 0&&(n=!1),s===void 0&&(s=0);for(var i=0,o=[];i+t<=e.size;)o.push(zu(e,i,t)),i+=r;if(n)for(;i<e.size;){var l=i+t-e.size,c=ii([zu(e,i,t-l),Bu([l],s)]);o.push(c),i+=r}return o.length===0?Im([],[0,t]):ii(o).as2D(o.length,t)}}),mY=et({stft_:function(e,t,r,n,s){var i;s===void 0&&(s=MT),n==null&&(i=t,n=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=RT(e,t,r),l=So(o,s(t)),c=[],d=0;d<o.shape[0];d++)c.push(OT(l.slice([d,0],[1,t]),n));return ii(c)}}),yIe=Object.freeze({hannWindow:MT,hammingWindow:fY,frame:RT,stft:mY}),jo,jIe=function(e,t,r){return r===void 0&&(r=1),Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b;return Pr(this,function(y){switch(y.label){case 0:return n=Pe(e,"predictions","inTopK"),s=Pe(t,"targets","inTopK"),qe(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+n.rank}),qe(n.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+n.rank+" and targets rank "+s.rank}),ca(n.shape.slice(0,n.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=n.shape[n.shape.length-1],qe(r>0&&r<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+r}),[4,n.data()];case 1:return o=y.sent(),[4,s.data()];case 2:for(l=y.sent(),c=[o.length/i,i],u=c[1],h=_y("bool",d=c[0]),m=0;m<d;m++){for(p=m*u,v=o.subarray(p,p+u),g=[],b=0;b<v.length;b++)g.push({value:v[b],index:b});for(g.sort(function(C,N){return N.value-C.value}),h[m]=0,b=0;b<r;b++)if(g[b].index===l[m]){h[m]=1;break}}return e!==n&&n.dispose(),t!==s&&s.dispose(),[2,Hi(h,s.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(jo||(jo={}));var NIe=et({absoluteDifference_:function(e,t,r,n){n===void 0&&(n=jo.SUM_BY_NONZERO_WEIGHTS);var s=Pe(e,"labels","absoluteDifference"),i=Pe(t,"predictions","absoluteDifference"),o=null;r!=null&&(o=Pe(r,"weights","absoluteDifference")),ca(s.shape,i.shape,"Error in absoluteDifference: ");var l=s.sub(i).abs();return jf(l,o,n)}}),jf=et({computeWeightedLoss_:function(e,t,r){r===void 0&&(r=jo.SUM_BY_NONZERO_WEIGHTS);var n=Pe(e,"losses","computeWeightedLoss"),s=null;t!=null&&(s=Pe(t,"weights","computeWeightedLoss"));var i=s==null?n:n.mul(s);if(r===jo.NONE)return i;if(r===jo.SUM)return i.sum();if(r===jo.MEAN){if(s==null)return i.mean();var o=n.size/s.size,l=i.sum().div(s.sum());return o>1?l.div(jr(o)):l}if(r===jo.SUM_BY_NONZERO_WEIGHTS){if(s==null)return i.sum().div(jr(n.size));var c=s.mul(hg(n.shape)).notEqual(jr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+r)}}),wIe=et({cosineDistance_:function(e,t,r,n,s){s===void 0&&(s=jo.SUM_BY_NONZERO_WEIGHTS);var i=Pe(e,"labels","cosineDistance"),o=Pe(t,"predictions","cosineDistance"),l=null;n!=null&&(l=Pe(n,"weights","cosineDistance")),ca(i.shape,o.shape,"Error in cosineDistance: ");var c=jr(1).sub(i.mul(o).sum(r,!0));return jf(c,l,s)}}),SIe=et({hingeLoss_:function(e,t,r,n){n===void 0&&(n=jo.SUM_BY_NONZERO_WEIGHTS);var s=Pe(e,"labels","hingeLoss"),i=Pe(t,"predictions","hingeLoss"),o=null;r!=null&&(o=Pe(r,"weights","hingeLoss")),ca(s.shape,i.shape,"Error in hingeLoss: ");var l=jr(1);s=jr(2).mul(s).sub(l);var c=l.sub(s.mul(i)).relu();return jf(c,o,n)}}),CIe=et({huberLoss_:function(e,t,r,n,s){n===void 0&&(n=1),s===void 0&&(s=jo.SUM_BY_NONZERO_WEIGHTS);var i=Pe(e,"labels","huberLoss"),o=Pe(t,"predictions","huberLoss"),l=null;r!=null&&(l=Pe(r,"weights","huberLoss")),ca(i.shape,o.shape,"Error in huberLoss: ");var c=jr(n),d=o.sub(i).abs(),u=GG(d,c),h=d.sub(u),m=jr(.5).mul(u.square()).add(c.mul(h));return jf(m,l,s)}}),kIe=et({logLoss_:function(e,t,r,n,s){n===void 0&&(n=1e-7),s===void 0&&(s=jo.SUM_BY_NONZERO_WEIGHTS);var i=Pe(e,"labels","logLoss"),o=Pe(t,"predictions","logLoss"),l=null;r!=null&&(l=Pe(r,"weights","logLoss")),ca(i.shape,o.shape,"Error in logLoss: ");var c=jr(1),d=jr(n),u=i.mul(o.add(d).log()).neg().sub(c.sub(i).mul(c.sub(o).add(d).log()));return jf(u,l,s)}}),_Ie=et({meanSquaredError_:function(e,t,r,n){n===void 0&&(n=jo.SUM_BY_NONZERO_WEIGHTS);var s=Pe(e,"labels","meanSquaredError"),i=Pe(t,"predictions","meanSquaredError"),o=null;r!=null&&(o=Pe(r,"weights","meanSquaredError")),ca(s.shape,i.shape,"Error in meanSquaredError: ");var l=s.squaredDifference(i);return jf(l,o,n)}}),EIe=et({sigmoidCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=jo.SUM_BY_NONZERO_WEIGHTS);var i=Pe(e,"multiClassLabels","sigmoidCrossEntropy"),o=Pe(t,"logits","sigmoidCrossEntropy"),l=null;if(r!=null&&(l=Pe(r,"weights","sigmoidCrossEntropy")),ca(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),n>0){var c=jr(n),d=jr(1),u=jr(.5);i=i.mul(d.sub(c)).add(u.mul(c))}var h=function(m,p){var v=Pe(m,"labels","sigmoidCrossEntropyWithLogits"),g=Pe(p,"logits","sigmoidCrossEntropyWithLogits");ca(v.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=g.relu(),y=g.mul(v),C=g.abs().neg().exp().log1p();return b.sub(y).add(C)}(i,o);return jf(h,l,s)}}),DIe=et({softmaxCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=jo.SUM_BY_NONZERO_WEIGHTS);var i=Pe(e,"onehotLabels","softmaxCrossEntropy"),o=Pe(t,"logits","softmaxCrossEntropy"),l=null;if(r!=null&&(l=Pe(r,"weights","softmaxCrossEntropy")),ca(i.shape,o.shape,"Error in softmaxCrossEntropy: "),n>0){var c=jr(n),d=jr(1),u=jr(i.shape[1]);i=i.mul(d.sub(c)).add(c.div(u))}var h=function(m,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return MS(function(g,b,y){var C=b.logSumExp([v],!0),N=b.toFloat().sub(C);return y([g,N]),{value:N.mul(g).neg().sum([v]),gradFunc:function(k,S){var D=S[0],E=S[1],T=ul(k.shape,[v]);return[k.reshape(T).mul(D.toFloat().sub(E.exp())),k.reshape(T).mul(E.exp().sub(D.toFloat()))]}}})(m,p)}(i,o);return jf(h,l,s)}}),AIe=Object.freeze({get Reduction(){return jo},absoluteDifference:NIe,computeWeightedLoss:jf,cosineDistance:wIe,hingeLoss:SIe,huberLoss:CIe,logLoss:kIe,meanSquaredError:_Ie,sigmoidCrossEntropy:EIe,softmaxCrossEntropy:DIe});function jB(e,t){return t===void 0&&(t=!1),dt.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var r=e.shape[0],n=e.shape[1],s=oG(r),i=e.clone(),o=Im([[1]],[1,1]),l=o.clone(),c=r>=n?n:r,d=function(h){var m,p=i,v=l,g=s;m=dt.tidy(function(){var b=i.slice([h,h],[r-h,1]),y=b.norm(),C=i.slice([h,h],[1,1]),N=Im([[-1]]).where(C.greater(0),Im([[1]])),k=C.sub(N.mul(y)),S=b.div(k);l=S.shape[0]===1?o.clone():o.concat(S.slice([1,0],[S.shape[0]-1,S.shape[1]]),0);var D=N.matMul(k).div(y).neg(),E=i.slice([h,0],[r-h,n]),T=D.mul(l);if(h===0)i=E.sub(T.matMul(l.transpose().matMul(E)));else{var A=E.sub(T.matMul(l.transpose().matMul(E)));i=i.slice([0,0],[h,n]).concat(A,0)}var L=s.slice([0,h],[r,s.shape[1]-h]);if(h===0)s=L.sub(L.matMul(l).matMul(T.transpose()));else{var P=L.sub(L.matMul(l).matMul(T.transpose()));s=s.slice([0,0],[r,h]).concat(P,1)}return[l,i,s]}),l=m[0],i=m[1],s=m[2],ll([p,v,g])},u=0;u<c;++u)d(u);return!t&&r>n&&(s=s.slice([0,0],[r,n]),i=i.slice([0,0],[n,n])),[s,i]})}var TIe=et({bandPart_:function(e,t,r){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(r%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+r+".");var n=Pe(e,"a","bandPart");if(n.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+n.rank+".");var s=n.shape,i=n.shape.slice(-2),o=i[0],l=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(r<=l))throw new Error("bandPart(): numUpper ("+r+") must not be greater than the number of columns ("+l+").");t<0&&(t=o),r<0&&(r=l);var c=tw(0,o,1,"int32").reshape([-1,1]),d=tw(0,l,1,"int32"),u=di(c,d),h=FS(u.lessEqual(jr(+t,"int32")),u.greaterEqual(jr(-r,"int32"))),m=Ua([o,l],n.dtype);return Zl(oi(n.reshape([-1,o,l])).map(function(p){return Dx(h,p,m)})).reshape(s)}}),IIe=et({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,qe(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=e[0].shape[0],n=function(c){qe(e[c].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+r+")"})},s=1;s<e.length;++s)n(s)}else t=!0,e=gT(e,e.shape[0],0).map(function(c){return dG(c,[0])});qe(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,l=function(c){i.push(dt.tidy(function(){var d=o[c];if(c>0)for(var u=0;u<c;++u){var h=iY(i[u].mulStrict(d)).mul(i[u]);d=d.sub(h)}return d.div(dY(d,"euclidean"))}))};for(s=0;s<e.length;++s)l(s);return t?Zl(i,0):i}}),PIe=et({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return jB(e,t);var r=e.shape.slice(0,e.shape.length-2).reduce(function(o,l){return o*l}),n=oi(e.reshape([r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],i=[];return n.forEach(function(o){var l=jB(o,t),c=l[0],d=l[1];s.push(c),i.push(d)}),[Zl(s,0).reshape(e.shape),Zl(i,0).reshape(e.shape)]}}),OIe=Object.freeze({bandPart:TIe,gramSchmidt:IIe,qr:PIe});function $S(e,t,r,n,s,i){n==null&&(n=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return r=Math.min(r,o),qe(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),qe(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),qe(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),qe(t.rank===1,function(){return"scores must be a 1D tensor"}),qe(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),qe(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:r,iouThreshold:n,scoreThreshold:s,softNmsSigma:i}}var MIe=et({resizeBilinear_:function(e,t,r){r===void 0&&(r=!1);var n=Pe(e,"images","resizeBilinear");qe(n.rank===3||n.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+n.rank+"."}),qe(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=dt.runKernelFunc(function(d,u){return u([s]),d.resizeBilinear(s,o,l,r)},{x:s},function(d,u){return{x:function(){return dt.runKernelFunc(function(h){return h.resizeBilinearBackprop(d,u[0],r)},{})}}},"ResizeBilinear",{alignCorners:r,newHeight:o,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),RIe=et({resizeNearestNeighbor_:function(e,t,r){r===void 0&&(r=!1);var n=Pe(e,"images","resizeNearestNeighbor");qe(n.rank===3||n.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+n.rank+"."}),qe(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),qe(n.dtype==="float32"||n.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=dt.runKernelFunc(function(d,u){return u([s]),d.resizeNearestNeighbor(s,o,l,r)},{batchImages:s},function(d,u){return{batchImages:function(){return dt.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(d,u[0],r)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),FIe=et({nonMaxSuppression_:function(e,t,r,n,s){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY);var i=Pe(e,"boxes","nonMaxSuppression"),o=Pe(t,"scores","nonMaxSuppression"),l=$S(i,o,r,n,s);r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold;var c={maxOutputSize:r,iouThreshold:n,scoreThreshold:s};return dt.runKernelFunc(function(d){return d.nonMaxSuppression(i,o,r,n,s)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),LIe=function(e,t,r,n,s){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),Ir(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return i=Pe(e,"boxes","nonMaxSuppressionAsync"),o=Pe(t,"scores","nonMaxSuppressionAsync"),l=$S(i,o,r,n,s),r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=m.sent(),d=c[0],u=c[1],h=NT(d,u,r,n,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},BIe=et({nonMaxSuppressionWithScore_:function(e,t,r,n,s,i){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=Pe(e,"boxes","nonMaxSuppression"),l=Pe(t,"scores","nonMaxSuppression"),c=$S(o,l,r,n,s,i),d={maxOutputSize:r=c.maxOutputSize,iouThreshold:n=c.iouThreshold,scoreThreshold:s=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=dt.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},d);return{selectedIndices:u[0],selectedScores:u[1]}}}),UIe=function(e,t,r,n,s,i){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Ir(this,void 0,void 0,function(){var o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:return o=Pe(e,"boxes","nonMaxSuppressionAsync"),l=Pe(t,"scores","nonMaxSuppressionAsync"),c=$S(o,l,r,n,s,i),r=c.maxOutputSize,n=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return d=p.sent(),u=d[0],h=d[1],m=wT(u,h,r,n,s,i),o!==e&&o.dispose(),l!==t&&l.dispose(),[2,m]}})})},$Ie=et({cropAndResize_:function(e,t,r,n,s,i){var o=Pe(e,"image","cropAndResize"),l=Pe(t,"boxes","cropAndResize","float32"),c=Pe(r,"boxInd","cropAndResize","int32");s=s||"bilinear",i=i||0;var d=l.shape[0];return qe(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),qe(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."}),qe(c.rank===1&&c.shape[0]===d,function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."}),qe(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+n.length+"."}),qe(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),qe(s==="bilinear"||s==="nearest",function(){return"method must be bilinear or nearest, but was "+s}),dt.runKernelFunc(function(u,h){return u.cropAndResize(o,l,c,n,s,i)},{images:o,boxes:l,boxInd:c},null,"CropAndResize",{method:s,extrapolationValue:i,cropSize:n})}}),FT=Object.freeze({resizeBilinear:MIe,resizeNearestNeighbor:RIe,nonMaxSuppression:FIe,nonMaxSuppressionAsync:LIe,nonMaxSuppressionWithScore:BIe,nonMaxSuppressionWithScoreAsync:UIe,cropAndResize:$Ie}),LT=function(e,t){return!(e>0)||t==="linear"},BT=function(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+r+" has not been implemented yet.")},UT=function(e,t){var r=t,n=ci(e.shape,t.shape);return n.length>0&&(r=r.sum(n)),r.reshape(e.shape)},$T=function(e,t,r){if(t==="linear")return e;if(t==="relu")return us(e);if(t==="elu")return oY(e);if(t==="relu6")return cY(e);if(t==="prelu")return lY(e,r);throw new Error("Unknown fused activation "+t+".")},VIe=et({fusedMatMul_:function(e){var t,r=e.a,n=e.b,s=e.transposeA,i=s!==void 0&&s,o=e.transposeB,l=o!==void 0&&o,c=e.bias,d=e.activation,u=d===void 0?"linear":d,h=e.preluActivationWeights;if(LT(dt.state.gradientDepth,u)===!1){var m=BS(r,n,i,l);return c!=null&&(m=In(m,c)),$T(m,u,h)}var p=Pe(r,"a","fused matMul"),v=Pe(n,"b","fused matMul");t=hs(p,v),p=t[0],v=t[1];var g=i?p.shape[p.rank-2]:p.shape[p.rank-1],b=l?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],C=l?v.shape[v.rank-2]:v.shape[v.rank-1],N=p.shape.slice(0,-2),k=v.shape.slice(0,-2),S=Rr(N),D=Rr(k);qe(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),qe(Ci(N,k),function(){return"Error in fused matMul: outer dimensions ("+N+") and ("+k+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),qe(g===b,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+b+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var E,T,A=p.shape.slice(0,-2).concat([y,C]),L=i?p.as3D(S,g,y):p.as3D(S,y,g),P=l?v.as3D(D,C,b):v.as3D(D,b,C);c!=null&&Rn(A,(E=hs(E=Pe(c,"bias","fused matMul"),p)[0]).shape),h!=null&&(T=Pe(h,"prelu weights","fused matMul"));var O={a:L,b:P};c!=null&&(O.bias=E),h!=null&&(O.preluActivationWeights=T);var Q=[L,P];return dt.runKernelFunc(function(z,re){var U=z.fusedBatchMatMul({a:L,b:P,transposeA:i,transposeB:l,bias:E,activation:u,preluActivationWeights:T});return re([L,P,U]),U},O,function(z,re){var U=re[0],X=re[1],B=re[2],Y=BT(z,B,u),K={};return c!=null&&(K={bias:function(){return UT(E,Y)}}),Object.assign(i||l?!i&&l?{a:function(){return Y.matMul(X,!1,!1)},b:function(){return Y.matMul(U,!0,!1)}}:i&&!l?{a:function(){return X.matMul(Y,!1,!0)},b:function(){return U.matMul(Y,!1,!1)}}:{a:function(){return X.matMul(Y,!0,!0)},b:function(){return Y.matMul(U,!0,!0)}}:{a:function(){return Y.matMul(X,!1,!0)},b:function(){return U.matMul(Y,!0,!1)}},K)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:u},Q,[!0]).reshape(A)}}),qIe=et({fusedConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(m=m||"linear",LT(dt.state.gradientDepth,m)===!1){var v=Xc(t,r,n,s,o,c,d);return u!=null&&(v=In(v,u)),$T(v,m,p)}var g=Pe(t,"x","conv2d"),b=Pe(r,"filter","conv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),qe(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),qe(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),d!=null&&qe(Bs(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+s+"."}),qe(y.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),qe(hl(n,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),qe(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var N,k,S=Wx(y.shape,b.shape,n,c,s,d);u!=null&&(N=hs(N=Pe(u,"bias","fused conv2d"),g)[0],Rn(S.outShape,N.shape)),p!=null&&(k=Pe(p,"prelu weights","fused conv2d"));var D={x:y,filter:b};u!=null&&(D.bias=N),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=dt.runKernelFunc(function(A,L){var P=A.fusedConv2d({input:y,filter:b,convInfo:S,bias:N,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){var P=L,O=P[0],Q=P[1],z=P[2],re=BT(A,z,m);qe(Uv(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var U={};return u!=null&&(U={bias:function(){return UT(N,re)}}),Object.assign({x:function(){return ZG(Q.shape,re,O,n,s)},filter:function(){return TT(Q,re,O.shape,n,s)}},U)},"FusedConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),zIe=et({fusedDepthwiseConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(LT(dt.state.gradientDepth,m)===!1){var v=LS(t,r,n,s,o,c,d);return u!=null&&(v=In(v,u)),$T(v,m,p)}var g=Pe(t,"x","depthwiseConv2d"),b=Pe(r,"filter","depthwiseConv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),qe(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),qe(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),qe(y.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),c==null&&(c=[1,1]),qe(hl(n,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),d!=null&&qe(Bs(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+s+"."});var N,k,S=Wx(y.shape,b.shape,n,c,s,d,!0);u!=null&&(N=hs(N=Pe(u,"bias","fused conv2d"),g)[0],Rn(S.outShape,N.shape)),p!=null&&(k=Pe(p,"prelu weights","fused depthwiseConv2d"));var D={x:y,filter:b};u!=null&&(D.bias=N),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=dt.runKernelFunc(function(A,L){var P=A.fusedDepthwiseConv2D({input:y,filter:b,convInfo:S,bias:N,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){qe(Uv(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var P=L[0],O=L[1],Q=L[2],z=BT(A,Q,m),re={};return u!=null&&(re={bias:function(){return UT(N,z)}}),Object.assign({x:function(){return eY(O.shape,z,P,S)},filter:function(){return tY(O,z,P.shape,S)}},re)},"FusedDepthwiseConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),HIe=Object.freeze({matMul:VIe,conv2d:qIe,depthwiseConv2d:zIe}),WIe=Object.freeze({image:FT,linalg:OIe,losses:AIe,spectral:pIe,fused:HIe,signal:yIe,square:k4e,squaredDifference:FG,conv1d:MTe,conv2d:Xc,conv3d:RTe,depthwiseConv2d:LS,separableConv2d:IT,conv2dTranspose:FTe,conv3dTranspose:LTe,op:et,batchNormalization2d:rTe,batchNormalization3d:nTe,batchNormalization4d:aTe,batchNormalization:sTe,batchNorm:qG,batchNorm2d:iTe,batchNorm3d:oTe,batchNorm4d:lTe,booleanMaskAsync:OTe,complex:Ui,real:Fc,imag:ku,concat:ii,concat1d:HDe,concat2d:WDe,concat3d:GDe,concat4d:YDe,split:gT,matMul:BS,dot:BTe,outerProduct:UTe,reverse:x1,reverse1d:$Te,reverse2d:VTe,reverse3d:qTe,reverse4d:zTe,maxPool:gi,avgPool:v1,pool:HTe,maxPool3d:WTe,avgPool3d:GTe,slice:zu,slice1d:YTe,slice2d:KTe,slice3d:aY,slice4d:XTe,abs:_4e,acos:E4e,acosh:D4e,asin:A4e,asinh:T4e,atan:I4e,atanh:P4e,ceil:O4e,clipByValue:ET,cos:M4e,cosh:R4e,erf:F4e,exp:QD,expm1:L4e,floor:B4e,log:U4e,log1p:$4e,logSigmoid:V4e,neg:cw,reciprocal:q4e,round:z4e,rsqrt:LG,sigmoid:BG,sign:H4e,isNaN:W4e,isInf:G4e,isFinite:Y4e,sin:K4e,sinh:X4e,softplus:Q4e,sqrt:J4e,step:Z4e,tan:eTe,tanh:tTe,all:QTe,any:JTe,argMax:ZTe,argMin:eIe,logSumExp:tIe,max:US,mean:rIe,min:nIe,moments:aIe,sum:iY,prod:sIe,equal:YG,equalStrict:STe,greater:CTe,greaterEqual:KG,greaterEqualStrict:kTe,greaterStrict:_Te,less:ETe,lessEqual:DTe,lessEqualStrict:ATe,lessStrict:TTe,notEqual:ITe,notEqualStrict:PTe,add:In,addN:uTe,addStrict:hTe,atan2:fTe,div:Nd,divNoNan:mTe,divStrict:pTe,floorDiv:WG,maximum:DT,maximumStrict:xTe,minimum:GG,minimumStrict:vTe,mod:gTe,modStrict:bTe,mul:So,mulStrict:yTe,pow:dw,powStrict:jTe,squaredDifferenceStrict:NTe,sub:di,subStrict:wTe,elu:oY,leakyRelu:iIe,prelu:lY,relu:us,relu6:cY,selu:oIe,logicalAnd:FS,logicalNot:cTe,logicalOr:zG,logicalXor:dTe,where:Dx,whereAsync:HG,buffer:pn,print:n3e,batchToSpaceND:iG,broadcastTo:a3e,cast:s3e,clone:i3e,cumsum:o3e,depthToSpace:l3e,expandDims:Mc,eye:oG,multinomial:c3e,oneHot:GD,pad:Hx,pad1d:d3e,pad2d:u3e,pad3d:h3e,pad4d:f3e,rand:m3e,randomNormal:p3e,randomGamma:x3e,randomUniform:lG,reshape:_d,spaceToBatchND:cG,squeeze:dG,stack:Zl,tile:uv,truncatedNormal:v3e,unstack:oi,setdiff1dAsync:g3e,fill:Bu,linspace:zDe,ones:hg,range:tw,scalar:jr,tensor:Hi,tensor1d:Js,tensor2d:Im,tensor3d:vT,tensor4d:rl,tensor5d:$De,tensor6d:VDe,variable:qDe,zeros:Ua,onesLike:sG,zerosLike:qn,transpose:qm,softmax:yf,logSoftmax:C3e,localResponseNormalization:lIe,norm:dY,gather:AT,unsortedSegmentSum:XG,basicLSTMCell:cIe,multiRNNCell:dIe,movingAverage:uIe,stridedSlice:hIe,topk:fIe,scatterND:mIe,fft:PT,ifft:uw,rfft:OT,irfft:uY,sparseToDense:xIe,gatherND:vIe,diag:gIe,dropout:bIe,hannWindow:MT,hammingWindow:fY,frame:RT,stft:mY,inTopKAsync:jIe});function tr(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&qe(r.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function UE(e,t,r,n){if(r==="linear")return e.linear(t);if(r==="relu")return e.relu(t);if(r==="elu")return e.elu(t);if(r==="relu6")return e.relu6(t);if(r==="prelu")return e.prelu(t,n);throw new Error("Activation "+r+" has not been implemented for the CPU backend.")}var GIe=function(e){function t(){var r=e.call(this)||this;return r.blockSize=48,r.firstUse=!0,r.data=new vG(r,dt),r}return Fd(t,e),t.prototype.write=function(r,n,s){this.firstUse&&(this.firstUse=!1,$t().get("IS_NODE")&&Z2(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:r,dtype:s}),i},t.prototype.move=function(r,n,s,i){this.data.set(r,{values:n,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){return[2,this.readSync(r)]})})},t.prototype.readSync=function(r){var n=this.data.get(r),s=n.dtype,i=n.complexTensors;return s==="complex64"?XD(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(r).values},t.prototype.bufferSync=function(r){var n=this.readSync(r.dataId),s=n;if(r.dtype==="string")try{s=n.map(function(i){return X2(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return pn(r.shape,r.dtype,s)},t.prototype.makeOutput=function(r,n,s){var i=this.write(r,n,s);return dt.makeTensorFromDataId(i,n,s,this)},t.prototype.disposeData=function(r){if(this.data.has(r)){var n=this.data.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(r)}},t.prototype.time=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){return n=wu(),r(),[2,{kernelMs:wu()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(r,n){var s=this.makeOutput(null,r.shape,"complex64");return this.data.get(s.dataId).complexTensors={real:dt.keep(r.clone()),imag:dt.keep(n.clone())},s},t.prototype.real=function(r){return this.data.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.data.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(tr(r,"slice"),pG(r.shape,n,s)){var i=xG(n,r.strides),o=Rr(s);return Hi(this.readSync(r.dataId).subarray(i,i+o),s,r.dtype)}for(var l=pn(s,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d).map(function(h,m){return h+n[m]});l.values[d]=c.get.apply(c,u)}return l.toTensor()},t.prototype.stridedSlice=function(r,n,s,i){tr(r,"stridedSlice");var o=yT(n,s,i);if(o.some(function(p){return p===0}))return Hi([],o);for(var l=pn(o,r.dtype),c=this.bufferSync(r),d=0;d<l.size;d++){for(var u=l.indexToLoc(d),h=new Array(u.length),m=0;m<h.length;m++)h[m]=u[m]*i[m]+n[m];l.set.apply(l,[c.get.apply(c,h)].concat(u))}return l.toTensor()},t.prototype.diag=function(r){for(var n=this.readSync(r.dataId),s=pn([r.size,r.size],r.dtype),i=s.values,o=0;o<n.length;o++)i[o*r.size+o]=n[o];return s.toTensor()},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.reverse=function(r,n){tr(r,"reverse");for(var s=pn(r.shape,r.dtype),i=this.bufferSync(r),o=function(c){var d=s.indexToLoc(c),u=d.slice();n.forEach(function(h){return u[h]=r.shape[h]-1-u[h]}),s.set.apply(s,[i.get.apply(i,u)].concat(d))},l=0;l<s.size;l++)o(l);return s.toTensor()},t.prototype.concat=function(r,n){var s=this;if(r[0].dtype==="complex64"){var i=r.map(function(p){return Fc(p)}),o=r.map(function(p){return ku(p)});return Ui(this.concat(i,n),this.concat(o,n))}var l=r.map(function(p){var v=Rr(p.shape.slice(n));return p.as2D(-1,v)}),c=Bv(l.map(function(p){return p.shape}),1),d=pn(c,r[0].dtype).values;if(l[0].shape[0]===1){var u=0;l.forEach(function(p){d.set(s.readSync(p.dataId),u),u+=p.size})}else{var h=0;l.forEach(function(p){for(var v=s.readSync(p.dataId),g=0,b=0;b<p.shape[0];++b)for(var y=b*c[1]+h,C=0;C<p.shape[1];++C)d[y+C]=v[g++];h+=p.shape[1]})}var m=Bv(r.map(function(p){return p.shape}),n);return Hi(d,m,r[0].dtype)},t.prototype.neg=function(r){return tr(r,"neg"),this.multiply(jr(-1),r)},t.prototype.add=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s+o,imag:i+l}}):this.broadcastedBinaryOp(r,n,Vi(r.dtype,n.dtype),function(s,i){return s+i})},t.prototype.addN=function(r){var n=this;tr(r,"addN");for(var s=r.map(function(u){return n.readSync(u.dataId)}),i=pn(r[0].shape,r[0].dtype),o=i.values,l=0;l<r.length;l++)for(var c=s[l],d=0;d<o.length;d++)o[d]+=c[d];return i.toTensor()},t.prototype.softmax=function(r,n){var s=hi([n],r.shape),i=this.max(r,s),o=ul(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.subtract=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s-o,imag:i-l}}):this.broadcastedBinaryOp(r,n,Vi(r.dtype,n.dtype),function(s,i){return s-i})},t.prototype.pow=function(r,n){return tr([r,n],"pow"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.pow(s,i)})},t.prototype.batchMatMul=function(r,n,s,i){tr([r,n],"matMul");for(var o=s?r.shape[1]:r.shape[2],l=s?r.shape[2]:r.shape[1],c=i?n.shape[1]:n.shape[2],d=r.shape[0],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=s?[r.strides[0],1,r.strides[1]]:[r.strides[0],r.strides[1],1],p=m[0],v=m[1],g=m[2],b=i?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],y=b[0],C=b[1],N=b[2],k=l*c,S=pn([d,l,c],r.dtype),D=S.values,E=this.blockSize,T=0;T<d;T++)for(var A=0;A<l;A+=E)for(var L=0;L<c;L+=E)for(var P=0;P<o;P+=E)for(var O=Math.min(A+E,l),Q=Math.min(L+E,c),z=Math.min(P+E,o),re=A;re<O;re++)for(var U=L;U<Q;U++){for(var X=0,B=P;B<z;B++)X+=u[T*p+re*v+B*g]*h[B*y+U*C+T*N];D[T*k+(re*c+U)]+=X}return S.toTensor()},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=this.batchMatMul(n,s,i,o);return l&&(u=this.add(u,l)),c&&(u=UE(this,u,c,d)),u},t.prototype.multiply=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s*o-i*l,imag:s*l+i*o}}):this.broadcastedBinaryOp(r,n,Vi(r.dtype,n.dtype),function(s,i){return s*i})},t.prototype.realDivide=function(r,n){return tr([r,n],"realDivide"),this.broadcastedBinaryOp(r,n,"float32",function(s,i){return s/i})},t.prototype.floorDiv=function(r,n){return tr([r,n],"floorDiv"),this.broadcastedBinaryOp(r,n,"int32",function(s,i){return Math.floor(s/i)})},t.prototype.sum=function(r,n){tr(r,"sum"),Fl("sum",n,r.rank);for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,Vi(r.dtype,"int32")),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=0,v=0;v<c;++v)p+=u[m+v];d[h]=p}return l},t.prototype.prod=function(r,n){tr(r,"sum");for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,Vi(r.dtype,"int32")),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=1,v=0;v<c;++v)p*=u[m+v];d[h]=p}return l},t.prototype.unsortedSegmentSum=function(r,n,s){tr(r,"unsortedSegmentSum");for(var i=[],o=r.rank-n.rank,l=0;l<o;++l)n=n.expandDims(l+1);for(l=0;l<s;++l){var c=jr(l,"int32"),d=YG(c,n).asType("float32").mul(r).sum(0);i.push(d)}return Zl(i)},t.prototype.argMin=function(r,n){tr(r,"argMin");var s=[n];Fl("argMin",s,r.rank);for(var i=fo(r.shape,s),o=i[0],l=i[1],c=Ua(o,"int32"),d=Rr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y<v&&(v=y,g=b)}u[m]=g}return c},t.prototype.argMax=function(r,n){tr(r,"argMax");var s=[n];Fl("argMax",s,r.rank);for(var i=fo(r.shape,s),o=i[0],l=i[1],c=Ua(o,"int32"),d=Rr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y>v&&(v=y,g=b)}u[m]=g}return c},t.prototype.cumsum=function(r,n,s,i){if(tr(r,"cumsum"),n!==r.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(r.rank-1)+" but got axis="+n);for(var o=Vi(r.dtype,"int32"),l=Ua(r.shape,o),c=this.readSync(l.dataId),d=this.readSync(r.dataId),u=r.shape[r.rank-1],h=i?function(b,y){return b+u-y-1}:function(b,y){return b+y},m=0;m<d.length;m+=u)for(var p=0;p<u;p++){var v=h(m,p);if(p===0)c[v]=s?0:d[v];else{var g=h(m,p-1);c[v]=s?d[g]+c[g]:d[v]+c[g]}}return l},t.prototype.equal=function(r,n){return tr([r,n],"equal"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s===i?1:0})},t.prototype.notEqual=function(r,n){return tr([r,n],"notEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s!==i?1:0})},t.prototype.less=function(r,n){return tr([r,n],"less"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<i?1:0})},t.prototype.lessEqual=function(r,n){return tr([r,n],"lessEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<=i?1:0})},t.prototype.greater=function(r,n){return tr([r,n],"greater"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>i?1:0})},t.prototype.greaterEqual=function(r,n){return tr([r,n],"greaterEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>=i?1:0})},t.prototype.logicalNot=function(r){tr(r,"logicalNot");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)s[i]=n[i]?0:1;return this.makeOutput(s,r.shape,"bool")},t.prototype.logicalAnd=function(r,n){return tr([r,n],"logicalAnd"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s&&i})},t.prototype.logicalOr=function(r,n){return tr([r,n],"logicalOr"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s||i})},t.prototype.select=function(r,n,s){tr([r,n,s],"select");for(var i=this.readSync(r.dataId),o=this.readSync(n.dataId),l=this.readSync(s.dataId),c=Ua(n.shape,Vi(n.dtype,s.dtype)),d=this.readSync(c.dataId),u=0,h=r.rank===0||r.rank>1||n.rank===1?1:Rr(n.shape.slice(1)),m=0;m<i.length;m++)for(var p=0;p<h;p++)i[m]===1?d[u++]=o[m]:d[u++]=l[m];return c},t.prototype.where=function(r){tr([r],"where");var n=this.readSync(r.dataId);return ST(r.shape,n)},t.prototype.topk=function(r,n,s){return tr(r,"topk"),CG(this.readSync(r.dataId),r.shape,r.dtype,n)},t.prototype.min=function(r,n){tr(r,"min"),Fl("min",n,r.rank);for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,r.dtype),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g<p&&(p=g)}d[h]=p}return l},t.prototype.minimum=function(r,n){return tr([r,n],"minimum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.min(s,i)})},t.prototype.mod=function(r,n){return tr([r,n],"mod"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s%i;return s<0&&i<0||s>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(r,n){tr(r,"max"),Fl("max",n,r.rank);for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,r.dtype),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g>p&&(p=g)}d[h]=p}return l},t.prototype.maximum=function(r,n){return tr([r,n],"maximum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.max(s,i)})},t.prototype.all=function(r,n){tr(r,"all"),Fl("all",n,r.rank);for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,r.dtype),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p&&g}d[h]=p}return l},t.prototype.any=function(r,n){tr(r,"any"),Fl("any",n,r.rank);for(var s=fo(r.shape,n),i=s[0],o=s[1],l=Ua(i,r.dtype),c=Rr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p||g}d[h]=p}return l},t.prototype.squaredDifference=function(r,n){return tr([r,n],"squaredDifference"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s-i;return o*o})},t.prototype.ceil=function(r){tr(r,"ceil");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.ceil(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.floor=function(r){tr(r,"floor");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.floor(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.sign=function(r){tr(r,"x");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)n[i]<0?s[i]=-1:n[i]>0?s[i]=1:s[i]=0;return this.makeOutput(s,r.shape,"float32")},t.prototype.isNaN=function(r){tr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isNaN(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isInf=function(r){tr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Math.abs(n[i])===1/0&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isFinite=function(r){tr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isFinite(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.round=function(r){tr(r,"round");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=Math.floor(n[i]);n[i]-o<.5?s[i]=Math.floor(n[i]):n[i]-o>.5?s[i]=Math.ceil(n[i]):s[i]=o%2==0?o:o+1}return this.makeOutput(s,r.shape,"float32")},t.prototype.exp=function(r){tr(r,"exp");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.exp(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.expm1=function(r){tr(r,"expm1");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.expm1(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.log=function(r){tr(r,"log");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.log1p=function(r){tr(r,"log1p");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log1p(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.sqrt=function(r){tr(r,"sqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.rsqrt=function(r){tr(r,"rsqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=1/Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.reciprocal=function(r){tr(r,"reciprocal");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=1/n[i];return this.makeOutput(s,r.shape,"float32")},t.prototype.linear=function(r){return r},t.prototype.relu=function(r){tr(r,"relu");for(var n=Ua(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.max(0,i[o]);return n},t.prototype.relu6=function(r){tr(r,"relu");for(var n=Ua(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.min(Math.max(0,i[o]),6);return n},t.prototype.prelu=function(r,n){return tr([r,n],"prelu"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return s<0?i*s:s})},t.prototype.elu=function(r){tr(r,"elu");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=s[i];n[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(n,r.shape,"float32")},t.prototype.eluDer=function(r,n){tr([r,n],"eluDer");for(var s=new Float32Array(n.size),i=this.readSync(n.dataId),o=this.readSync(r.dataId),l=0;l<i.length;++l){var c=i[l];s[l]=c>=1?o[l]:o[l]*(c+1)}return this.makeOutput(s,n.shape,"float32")},t.prototype.selu=function(r){tr(r,"selu");for(var n=kT,s=_T,i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>=0?s*c:n*(Math.exp(c)-1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.clip=function(r,n,s){tr(r,"clip");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>s?s:c<n?n:c}return this.makeOutput(i,r.shape,"float32")},t.prototype.abs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.abs(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.complexAbs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<r.size;++i){var o=s[2*i],l=s[2*i+1];n[i]=Math.hypot(o,l)}return this.makeOutput(n,r.shape,"float32")},t.prototype.int=function(r){tr(r,"int");for(var n=new Int32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=s[i];return this.makeOutput(n,r.shape,"int32")},t.prototype.sigmoid=function(r){tr(r,"sigmoid");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=1/(1+Math.exp(-s[i]));return this.makeOutput(n,r.shape,"float32")},t.prototype.softplus=function(r){tr(r,"softplus");for(var n=Math.log(11920928955078125e-23)+2,s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o]>-n,c=i[o]<n,d=Math.exp(i[o]),u=void 0;u=c?d:l?i[o]:Math.log(1+d),s[o]=u}return this.makeOutput(s,r.shape,"float32")},t.prototype.sin=function(r){tr(r,"sin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cos=function(r){tr(r,"cos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tan=function(r){tr(r,"tan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.tan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asin=function(r){tr(r,"asin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acos=function(r){tr(r,"acos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan=function(r){tr(r,"atan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan2=function(r,n){return tr([r,n],"atan2"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.atan2(s,i)})},t.prototype.sinh=function(r){tr(r,"sinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cosh=function(r){tr(r,"cosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tanh=function(r){tr(r,"tanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Y5e(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asinh=function(r){tr(r,"asinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acosh=function(r){tr(r,"acosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atanh=function(r){tr(r,"atanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atanh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.erf=function(r){tr(r,"erf");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=Math.sign(s[i]),l=Math.abs(s[i]),c=1/(1+.3275911*l);n[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(n,r.shape,"float32")},t.prototype.step=function(r,n){n===void 0&&(n=0),tr(r,"step");for(var s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o];isNaN(l)?s[o]=NaN:s[o]=l>0?1:n}return this.makeOutput(s,r.shape,"float32")},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.conv2d(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.conv2d=function(r,n,s){tr([r,n],"conv2d");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.dataFormat==="channelsLast",m=pn(s.outShape,r.dtype),p=r.strides[0],v=h?r.strides[1]:r.strides[2],g=h?r.strides[2]:1,b=h?1:r.strides[1],y=m.strides[0],C=h?m.strides[1]:m.strides[2],N=h?m.strides[2]:1,k=h?1:m.strides[1],S=this.readSync(r.dataId),D=this.readSync(n.dataId),E=m.values,T=0;T<s.batchSize;++T)for(var A=T*p,L=T*y,P=0;P<s.outHeight;++P)for(var O=L+P*C,Q=P*s.strideHeight-u,z=0;z<i;z++){var re=Q+z*l;if(!(re<0||re>=s.inHeight))for(var U=z*n.strides[0],X=A+re*v,B=0;B<s.outWidth;++B)for(var Y=O+B*N,K=B*s.strideWidth-d,ue=0;ue<o;ue++){var M=K+ue*c;if(!(M<0||M>=s.inWidth))for(var V=X+M*g,W=U+ue*n.strides[1],ee=0;ee<s.inChannels;++ee){for(var te=S[V+ee*b],ne=0;ne<s.outChannels;++ne)E[Y+ne*k]+=te*D[W+ne];W+=s.outChannels}}}return m.toTensor()},t.prototype.conv3d=function(r,n,s){for(var i=s.filterDepth,o=s.filterHeight,l=s.filterWidth,c=s.dilationDepth,d=s.dilationHeight,u=s.dilationWidth,h=s.padInfo.front,m=s.padInfo.left,p=s.padInfo.top,v=pn(s.outShape,r.dtype),g=this.readSync(r.dataId),b=this.readSync(n.dataId),y=v.values,C=0;C<s.batchSize;++C)for(var N=C*r.strides[0],k=C*v.strides[0],S=0;S<s.outDepth;++S)for(var D=k+S*v.strides[1],E=S*s.strideDepth-h,T=0;T<i;T++){var A=E+T*c;if(!(A<0||A>=s.inDepth))for(var L=T*n.strides[0],P=N+A*r.strides[1],O=0;O<s.outHeight;++O)for(var Q=D+O*v.strides[2],z=O*s.strideHeight-p,re=0;re<o;re++){var U=z+re*d;if(!(U<0||U>=s.inHeight))for(var X=L+re*n.strides[1],B=P+U*r.strides[2],Y=0;Y<s.outWidth;++Y)for(var K=Q+Y*s.outChannels,ue=Y*s.strideWidth-m,M=0;M<l;M++){var V=ue+M*u;if(!(V<0||V>=s.inWidth))for(var W=X+M*n.strides[2],ee=B+V*s.inChannels,te=W,ne=0;ne<s.inChannels;++ne){for(var se=g[ee+ne],oe=0;oe<s.outChannels;++oe)y[K+oe]+=se*b[te+oe];te+=s.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(r,n,s){tr([r,n],"conv2dDerInput");for(var i=pn(s.inShape,"float32"),o=i.values,l=this.readSync(r.dataId),c=this.readSync(n.dataId),d=n.strides,u=d[0],h=d[1],m=d[2],p=s.batchSize,v=s.filterHeight,g=s.filterWidth,b=s.inChannels,y=s.inHeight,C=s.inWidth,N=s.outChannels,k=s.outHeight,S=s.outWidth,D=s.strideHeight,E=s.strideWidth,T=s.dataFormat,A=v-1-s.padInfo.top,L=g-1-s.padInfo.left,P=T==="channelsLast",O=i.strides[0],Q=P?i.strides[1]:i.strides[2],z=P?i.strides[2]:1,re=P?1:i.strides[1],U=r.strides[0],X=P?r.strides[1]:r.strides[2],B=P?r.strides[2]:1,Y=P?1:r.strides[1],K=0;K<p;++K)for(var ue=0;ue<b;++ue)for(var M=0;M<y;++M)for(var V=M-A,W=Math.max(0,Math.ceil(V/D)),ee=Math.min(k,(v+V)/D),te=0;te<C;++te){for(var ne=te-L,se=Math.max(0,Math.ceil(ne/E)),oe=Math.min(S,(g+ne)/E),G=0,ce=W;ce<ee;++ce)for(var Z=ce*D-V,ae=se;ae<oe;++ae)for(var je=U*K+X*ce+B*ae,de=u*(v-1-Z)+h*(g-1-(ae*E-ne))+m*ue,ie=0;ie<N;++ie)G+=l[je+Y*ie]*c[de+ie];o[O*K+Q*M+z*te+re*ue]=G}return i.toTensor()},t.prototype.conv3dDerInput=function(r,n,s){for(var i=pn(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=l[3],m=this.readSync(r.dataId),p=r.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),N=n.strides,k=N[0],S=N[1],D=N[2],E=N[3],T=s.batchSize,A=s.filterDepth,L=s.filterHeight,P=s.filterWidth,O=s.inChannels,Q=s.inDepth,z=s.inHeight,re=s.inWidth,U=s.outChannels,X=s.outDepth,B=s.outHeight,Y=s.outWidth,K=s.strideDepth,ue=s.strideHeight,M=s.strideWidth,V=A-1-s.padInfo.front,W=L-1-s.padInfo.top,ee=P-1-s.padInfo.left,te=0;te<T;++te)for(var ne=0;ne<O;++ne)for(var se=0;se<Q;++se)for(var oe=se-V,G=Math.max(0,Math.ceil(oe/K)),ce=Math.min(X,(A+oe)/K),Z=0;Z<z;++Z)for(var ae=Z-W,je=Math.max(0,Math.ceil(ae/ue)),de=Math.min(B,(L+ae)/ue),ie=0;ie<re;++ie){for(var be=ie-ee,Ne=Math.max(0,Math.ceil(be/M)),Fe=Math.min(Y,(P+be)/M),Xe=0,ct=G;ct<ce;++ct)for(var xt=ct*K-oe,Re=je;Re<de;++Re)for(var ht=Re*ue-ae,At=Ne;At<Fe;++At)for(var _t=v*te+g*ct+b*Re+y*At,Wt=k*(A-1-xt)+S*(L-1-ht)+D*(P-1-(At*M-be))+E*ne,Ke=0;Ke<U;++Ke)Xe+=m[_t+Ke]*C[Wt+Ke];o[c*te+d*se+u*Z+h*ie+ne]=Xe}return i.toTensor()},t.prototype.conv2dDerFilter=function(r,n,s){tr([r,n],"conv2dDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dataFormat==="channelsLast",u=pn(s.filterShape,"float32"),h=s.padInfo.left,m=s.padInfo.top,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((m-g)/i)),y=Math.min(s.outHeight,(s.inHeight+m-g)/i),C=0;C<c;++C)for(var N=Math.max(0,Math.ceil((h-C)/o)),k=Math.min(s.outWidth,(s.inWidth+h-C)/o),S=0;S<s.inChannels;++S)for(var D=0;D<s.outChannels;++D){for(var E=0,T=0;T<s.batchSize;++T)for(var A=b;A<y;++A)for(var L=g+A*i-m,P=N;P<k;++P){var O=C+P*o-h;E+=d?p.get(T,L,O,S)*v.get(T,A,P,D):p.get(T,S,L,O)*v.get(T,D,A,P)}u.set(E,g,C,S,D)}return u.toTensor()},t.prototype.conv3dDerFilter=function(r,n,s){for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=pn(s.filterShape,"float32"),m=h.values,p=h.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),N=n.strides,k=N[0],S=N[1],D=N[2],E=N[3],T=this.readSync(r.dataId),A=r.strides,L=A[0],P=A[1],O=A[2],Q=A[3],z=s.padInfo.front,re=s.padInfo.left,U=s.padInfo.top,X=0;X<c;++X)for(var B=Math.max(0,Math.ceil((z-X)/i)),Y=Math.min(s.outDepth,(s.inDepth+z-X)/i),K=X*v,ue=0;ue<d;++ue)for(var M=Math.max(0,Math.ceil((U-ue)/o)),V=Math.min(s.outHeight,(s.inHeight+U-ue)/o),W=ue*g+K,ee=0;ee<u;++ee)for(var te=Math.max(0,Math.ceil((re-ee)/l)),ne=Math.min(s.outWidth,(s.inWidth+re-ee)/l),se=ee*b+W,oe=0;oe<s.inChannels;++oe)for(var G=oe*y+se,ce=0;ce<s.outChannels;++ce){for(var Z=0,ae=0;ae<s.batchSize;++ae)for(var je=ae*L,de=ae*k,ie=B;ie<Y;++ie)for(var be=(X+ie*i-z)*P+je,Ne=ie*S+de,Fe=M;Fe<V;++Fe)for(var Xe=(ue+Fe*o-U)*O+be,ct=Fe*D+Ne,xt=te;xt<ne;++xt){var Re=xt*E+ct;Z+=T[(ee+xt*l-re)*Q+Xe+oe]*C[Re+ce]}m[G+ce]=Z}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.depthwiseConv2D(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.depthwiseConv2D=function(r,n,s){tr([r,n],"depthwiseConv2D");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.outChannels/s.inChannels,m=pn(s.outShape,r.dtype),p=this.readSync(r.dataId),v=this.readSync(n.dataId),g=m.values,b=0;b<s.batchSize;++b)for(var y=b*r.strides[0],C=b*m.strides[0],N=0;N<s.outHeight;++N)for(var k=C+N*m.strides[1],S=N*s.strideHeight-d,D=0;D<i;++D){var E=S+D*l;if(!(E<0||E>=s.inHeight))for(var T=D*n.strides[0],A=y+E*r.strides[1],L=0;L<s.outWidth;++L)for(var P=k+L*m.strides[2],O=L*s.strideWidth-u,Q=0;Q<o;++Q){var z=O+Q*c;if(!(z<0||z>=s.inWidth))for(var re=T+Q*n.strides[1],U=A+z*s.inChannels,X=P,B=re,Y=0;Y<s.inChannels;++Y){for(var K=p[U+Y],ue=0;ue<h;++ue)g[X+ue]+=K*v[B+ue];X+=h,B+=h}}}return m.toTensor()},t.prototype.depthwiseConv2DDerInput=function(r,n,s){tr([r,n],"depthwiseConv2DDerInput");for(var i=pn(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=this.readSync(r.dataId),m=r.strides,p=m[0],v=m[1],g=m[2],b=this.readSync(n.dataId),y=n.strides,C=y[0],N=y[1],k=y[2],S=s.batchSize,D=s.filterHeight,E=s.filterWidth,T=s.inChannels,A=s.inHeight,L=s.inWidth,P=s.outChannels,O=s.outHeight,Q=s.outWidth,z=s.strideHeight,re=s.strideWidth,U=D-1-s.padInfo.top,X=E-1-s.padInfo.left,B=P/T,Y=0;Y<S;++Y)for(var K=0;K<T;++K)for(var ue=0;ue<A;++ue)for(var M=ue-U,V=Math.max(0,Math.ceil(M/z)),W=Math.min(O,(D+M)/z),ee=0;ee<L;++ee){for(var te=ee-X,ne=Math.max(0,Math.ceil(te/re)),se=Math.min(Q,(E+te)/re),oe=0,G=V;G<W;++G)for(var ce=G*z-M,Z=ne;Z<se;++Z)for(var ae=p*Y+v*G+g*Z,je=C*(D-1-ce)+N*(E-1-(Z*re-te))+k*K,de=0;de<B;++de)oe+=h[ae+(K*B+de)]*b[je+de];o[c*Y+d*ue+u*ee+K]=oe}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){tr([r,n],"depthwiseConv2DDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=pn(s.filterShape,"float32"),u=s.padInfo.left,h=s.padInfo.top,m=s.outChannels/s.inChannels,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((h-g)/i)),y=Math.min(s.outHeight,(s.inHeight+h-g)/i),C=0;C<c;++C)for(var N=Math.max(0,Math.ceil((u-C)/o)),k=Math.min(s.outWidth,(s.inWidth+u-C)/o),S=0;S<s.outChannels;++S){for(var D=Math.trunc(S/m),E=S%m,T=0,A=0;A<s.batchSize;++A)for(var L=b;L<y;++L)for(var P=g+L*i-h,O=N;O<k;++O){var Q=C+O*o-u;T+=p.get(A,P,Q,D)*v.get(A,L,O,S)}d.set(T,g,C,D,E)}return d.toTensor()},t.prototype.tile=function(r,n){return tr(r,"tile"),SG(this.bufferSync(r),n)},t.prototype.pad=function(r,n,s){tr(r,"pad");var i=n.map(function(m,p){return m[0]+r.shape[p]+m[1]}),o=n.map(function(m){return m[0]}),l=this.bufferSync(r),c=pn(i,r.dtype);s!==0&&c.values.fill(s);for(var d=0;d<r.size;d++){var u=l.indexToLoc(d),h=u.map(function(m,p){return m+o[p]});c.set.apply(c,[l.get.apply(l,u)].concat(h))}return c.toTensor()},t.prototype.transpose=function(r,n){tr(r,"transpose");for(var s=new Array(r.rank),i=0;i<s.length;i++)s[i]=r.shape[n[i]];var o=this.readSync(r.dataId),l=pn(s,r.dtype),c=this.bufferSync(r);for(i=0;i<r.size;++i){for(var d=c.indexToLoc(i),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[n[h]];var m=l.locToIndex(u);l.values[m]=o[i]}return l.toTensor()},t.prototype.gather=function(r,n,s){tr([r,n],"gather");var i=r.shape.slice(),o=this.readSync(n.dataId);i[s]=o.length;for(var l=pn(i,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d),h=u.slice();h[s]=o[u[s]];var m=c.locToIndex(h);l.values[d]=c.values[m]}return l.toTensor()},t.prototype.batchToSpaceND=function(r,n,s){tr([r],"batchToSpaceND");var i=n.reduce(function(h,m){return h*m}),o=rw(r.shape,n,i),l=nw(o.length,n.length),c=aw(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){tr([r],"spaceToBatchND");var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=rw(c.shape,n,i,!1),u=nw(d.length,n.length,!1),h=aw(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.pool=function(r,n,s){tr(r,"pool");for(var i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(r.dataId),g=pn(n.outShape,r.dtype),b=g.values,y=n.outShape[1]*n.outShape[2]*n.outShape[3],C=n.outShape[2]*n.outShape[3],N=n.outShape[3],k=0;k<n.batchSize;++k)for(var S=k*y,D=k*r.strides[0],E=0;E<n.inChannels;++E)for(var T=0;T<n.outHeight;++T)for(var A=T*i-h,L=Math.max(0,A),P=Math.min(n.inHeight,d+A),O=S+T*C,Q=0;Q<n.outWidth;++Q){for(var z=Q*o-m,re=Math.max(0,z),U=Math.min(n.inWidth,u+z),X=p,B=0,Y=0,K=L;K<P;K+=l){for(var ue=D+K*r.strides[1],M=re;M<U;M+=c){var V=v[ue+M*r.strides[2]+E];s==="max"&&V>X?X=V:s==="avg"&&(B+=V,Y++)}if(isNaN(X))break}b[O+Q*N+E]=s==="avg"?B/Y:X}return g.toTensor()},t.prototype.maxPool=function(r,n){return this.pool(r,n,"max")},t.prototype.maxPoolPositions=function(r,n){for(var s=pn(n.outShape,"int32"),i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=this.bufferSync(r),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var b=0;b<n.outHeight;++b){for(var y=b*i-h,C=y;C<0;)C+=l;for(var N=Math.min(n.inHeight,d+y),k=0;k<n.outWidth;++k){for(var S=k*o-m,D=S;D<0;)D+=c;for(var E=Math.min(n.inWidth,u+S),T=Number.NEGATIVE_INFINITY,A=-1,L=C;L<N;L+=l)for(var P=L-y,O=D;O<E;O+=c){var Q=O-S,z=p.get(v,L,O,g);z>T&&(T=z,A=P*u+Q)}s.set(A,v,b,k,g)}}return s.toTensor()},t.prototype.maxPoolBackprop=function(r,n,s,i){tr([n,s],"maxPoolBackprop");for(var o=this.maxPoolPositions(n,i),l=i.strideHeight,c=i.strideWidth,d=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,p=m-1-i.padInfo.left,v=h-1-i.padInfo.top,g=pn(n.shape,"float32"),b=this.bufferSync(o),y=this.bufferSync(r),C=0;C<i.batchSize;++C)for(var N=0;N<i.inChannels;++N)for(var k=0;k<i.inHeight;++k)for(var S=0;S<i.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/l;if(!(L<0||L>=i.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/c;if(!(O<0||O>=i.outWidth||Math.floor(O)!==O)){var Q=h*m-1-b.get(C,L,O,N)===A*m+P?1:0;Q!==0&&(T+=y.get(C,L,O,N)*Q)}}}g.set(T,C,k,S,N)}return g.toTensor()},t.prototype.avgPoolBackprop=function(r,n,s){tr([r,n],"avgPoolBackprop");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dilationHeight,u=s.dilationWidth,h=s.effectiveFilterHeight,m=s.effectiveFilterWidth,p=m-1-s.padInfo.left,v=h-1-s.padInfo.top,g=pn(n.shape,"float32"),b=1/(l*c),y=this.bufferSync(r),C=0;C<s.batchSize;++C)for(var N=0;N<s.inChannels;++N)for(var k=0;k<s.inHeight;++k)for(var S=0;S<s.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/i;if(!(L<0||L>=s.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/o;O<0||O>=s.outWidth||Math.floor(O)!==O||(T+=y.get(C,L,O,N))}}g.set(T*b,C,k,S,N)}return g.toTensor()},t.prototype.pool3d=function(r,n,s){tr(r,"pool3d");for(var i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=this.readSync(r.dataId),N=pn(n.outShape,r.dtype),k=N.values,S=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],D=n.outShape[2]*n.outShape[3]*n.outShape[4],E=n.outShape[3]*n.outShape[4],T=n.outShape[4],A=0;A<n.batchSize;++A)for(var L=A*S,P=A*r.strides[0],O=0;O<n.inChannels;++O)for(var Q=0;Q<n.outDepth;++Q){for(var z=Q*i-v,re=z;re<0;)re+=c;for(var U=Math.min(n.inDepth,h+z),X=L+Q*D,B=0;B<n.outHeight;++B){for(var Y=B*o-g,K=Y;K<0;)K+=d;for(var ue=Math.min(n.inHeight,m+Y),M=X+B*E,V=0;V<n.outWidth;++V){for(var W=V*l-b,ee=W;ee<0;)ee+=u;for(var te=Math.min(n.inWidth,p+W),ne=M+V*T,se=y,oe=0,G=0,ce=re;ce<U;ce+=c){for(var Z=P+ce*r.strides[1],ae=K;ae<ue;ae+=d){for(var je=Z+ae*r.strides[2],de=ee;de<te;de+=u){var ie=C[je+de*r.strides[3]+O];if(s==="max"&&ie>se?se=ie:s==="avg"&&(oe+=ie,G++),isNaN(se))break}if(isNaN(se))break}if(isNaN(se))break}k[ne+O]=s==="avg"?oe/G:se}}}return N.toTensor()},t.prototype.avgPool3d=function(r,n){return tr(r,"avgPool3d"),this.pool3d(r,n,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(r,n,s){tr([r,n],"avgPool3dBackprop");for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=s.dilationDepth,m=s.dilationHeight,p=s.dilationWidth,v=s.effectiveFilterDepth,g=s.effectiveFilterHeight,b=s.effectiveFilterWidth,y=v-1-s.padInfo.front,C=b-1-s.padInfo.left,N=g-1-s.padInfo.top,k=pn(n.shape,"float32"),S=1/(c*d*u),D=this.bufferSync(r),E=0;E<s.batchSize;++E)for(var T=0;T<s.inChannels;++T)for(var A=0;A<s.inDepth;++A)for(var L=0;L<s.inHeight;++L)for(var P=0;P<s.inWidth;++P){for(var O=A-y,Q=L-N,z=P-C,re=0,U=0;U<v;U+=h){var X=(O+U)/i;if(!(X<0||X>=s.outDepth||Math.floor(X)!==X))for(var B=0;B<g;B+=m){var Y=(Q+B)/o;if(!(Y<0||Y>=s.outHeight||Math.floor(Y)!==Y))for(var K=0;K<b;K+=p){var ue=(z+K)/l;ue<0||ue>=s.outWidth||Math.floor(ue)!==ue||(re+=D.get(E,X,Y,ue,T))}}}k.set(re*S,E,A,L,P,T)}return k.toTensor()},t.prototype.maxPool3d=function(r,n){return tr(r,"maxPool3d"),this.pool3d(r,n,"max").toFloat()},t.prototype.maxPool3dPositions=function(r,n){for(var s=pn(n.outShape,"int32"),i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=this.bufferSync(r),C=0;C<n.batchSize;++C)for(var N=0;N<n.inChannels;++N)for(var k=0;k<n.outDepth;++k){for(var S=k*i-v,D=S;D<0;)D+=c;for(var E=Math.min(n.inDepth,h+S),T=0;T<n.outHeight;++T){for(var A=T*o-g,L=A;L<0;)L+=d;for(var P=Math.min(n.inHeight,m+A),O=0;O<n.outWidth;++O){for(var Q=O*l-b,z=Q;z<0;)z+=u;for(var re=Math.min(n.inWidth,p+Q),U=Number.NEGATIVE_INFINITY,X=-1,B=D;B<E;B+=c)for(var Y=B-S,K=L;K<P;K+=d)for(var ue=K-A,M=z;M<re;M+=u){var V=M-Q,W=y.get(C,B,K,M,N);W>=U&&(U=W,X=Y*m*p+ue*m+V)}s.set(X,C,k,T,O,N)}}}return s.toTensor()},t.prototype.maxPool3dBackprop=function(r,n,s,i){tr([n,s],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(n,i),l=i.strideDepth,c=i.strideHeight,d=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,m=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,g=i.effectiveFilterWidth,b=p-1-i.padInfo.front,y=g-1-i.padInfo.left,C=v-1-i.padInfo.top,N=pn(n.shape,"float32"),k=this.bufferSync(o),S=this.bufferSync(r),D=0;D<i.batchSize;++D)for(var E=0;E<i.inChannels;++E)for(var T=0;T<i.inDepth;++T)for(var A=0;A<i.inHeight;++A)for(var L=0;L<i.inWidth;++L){for(var P=T-b,O=A-C,Q=L-y,z=0,re=0;re<p;re+=u){var U=(P+re)/l;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var X=0;X<v;X+=h){var B=(O+X)/c;if(!(B<0||B>=i.outHeight||Math.floor(B)!==B))for(var Y=0;Y<g;Y+=m){var K=(Q+Y)/d;if(!(K<0||K>=i.outWidth||Math.floor(K)!==K)){var ue=p*v*g-1-k.get(D,U,B,K,E)===re*v*g+X*g+Y?1:0;ue!==0&&(z+=S.get(D,U,B,K,E)*ue)}}}}N.set(z,D,T,A,L,E)}return N.toTensor()},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.reshape=function(r,n){return KD(r,n)},t.prototype.avgPool=function(r,n){return tr(r,"avgPool"),this.pool(r,n,"avg").toFloat()},t.prototype.resizeBilinear=function(r,n,s,i){tr(r,"resizeBilinear");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(Rr([l,n,s,u])),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=0,b=p[0]/v[0],y=p[1]/v[1],C=0;C<l;C++)for(var N=0;N<n;N++)for(var k=b*N,S=Math.floor(k),D=k-S,E=Math.min(c-1,Math.ceil(k)),T=C*r.strides[0]+S*r.strides[1],A=C*r.strides[0]+E*r.strides[1],L=0;L<s;L++)for(var P=y*L,O=Math.floor(P),Q=P-O,z=Math.min(d-1,Math.ceil(P)),re=T+O*r.strides[2],U=A+O*r.strides[2],X=T+z*r.strides[2],B=A+z*r.strides[2],Y=0;Y<u;Y++){var K=h[re+Y],ue=h[U+Y],M=K+(h[X+Y]-K)*Q,V=M+(ue+(h[B+Y]-ue)*Q-M)*D;m[g++]=V}return Hi(m,[l,n,s,u])},t.prototype.resizeBilinearBackprop=function(r,n,s){tr([r,n],"resizeBilinearBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=[s&&h>1?l-1:l,s&&m>1?c-1:c],g=[s&&h>1?h-1:h,s&&m>1?m-1:m],b=v[0]/g[0],y=v[1]/g[1],C=this.readSync(r.dataId),N=0,k=0;k<o;k++)for(var S=k*n.strides[0],D=0;D<h;D++)for(var E=D*b,T=Math.floor(E),A=Math.min(Math.ceil(E),l-1),L=S+T*n.strides[1],P=S+A*n.strides[1],O=E-T,Q=1-O,z=0;z<m;z++)for(var re=z*y,U=Math.floor(re),X=Math.min(Math.ceil(re),c-1),B=re-U,Y=1-B,K=L+U*n.strides[2],ue=L+X*n.strides[2],M=P+U*n.strides[2],V=P+X*n.strides[2],W=Q*Y,ee=Q*B,te=O*Y,ne=O*B,se=0;se<d;se++){var oe=C[N++];p[K+se]+=oe*W,p[ue+se]+=oe*ee,p[M+se]+=oe*te,p[V+se]+=oe*ne}return rl(p,[o,c,l,d],n.dtype)},t.prototype.resizeNearestNeighbor=function(r,n,s,i){tr(r,"resizeNearestNeighbor");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(l*n*s*u),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=p[0]/v[0],b=p[1]/v[1],y=0,C=0;C<l;C++)for(var N=C*r.strides[0],k=0;k<n;k++)for(var S=g*k,D=N+Math.min(c-1,i?Math.round(S):Math.floor(S))*r.strides[1],E=0;E<s;E++)for(var T=b*E,A=D+Math.min(d-1,i?Math.round(T):Math.floor(T))*r.strides[2],L=0;L<u;L++){var P=h[A+L];m[y++]=P}return Hi(m,[l,n,s,u],r.dtype)},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){tr([r,n],"resizeNearestNeighborBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=this.readSync(r.dataId),g=[s&&h>1?l-1:l,s&&m>1?c-1:c],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],y=g[0]/b[0],C=g[1]/b[1],N=1/y,k=1/C,S=2*Math.ceil(N)+2,D=2*Math.ceil(k)+2,E=0;E<o;E++)for(var T=E*n.strides[0],A=0;A<l;A++)for(var L=T+A*n.strides[1],P=Math.floor(A*N),O=Math.floor(P-S/2),Q=0;Q<c;Q++)for(var z=L+Q*n.strides[2],re=Math.floor(Q*k),U=Math.floor(re-D/2),X=0;X<d;X++){for(var B=0,Y=0;Y<S;Y++){var K=Y+O;if(!(K<0||K>=h)){var ue=T+K*r.strides[1],M=K*y;if(A===Math.min(l-1,s?Math.round(M):Math.floor(M)))for(var V=0;V<D;V++){var W=V+U;if(!(W<0||W>=m)){var ee=ue+W*r.strides[2],te=W*C;Q===Math.min(c-1,s?Math.round(te):Math.floor(te))&&(B+=v[ee+X])}}}}p[z+X]=B}return rl(p,n.shape,n.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){tr([r,n,s,o,l],"batchNorm");for(var c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=this.readSync(s.dataId),h=o?this.readSync(o.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),p=new Float32Array(c.length),v=m.length,g=h.length,b=u.length,y=d.length,C=0,N=0,k=0,S=0,D=0;D<c.length;++D)p[D]=m[C++]+(c[D]-d[N++])*h[k++]/Math.sqrt(u[S++]+i),C>=v&&(C=0),N>=y&&(N=0),k>=g&&(k=0),S>=b&&(S=0);return rl(p,r.shape)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){tr(r,"localResponseNormalization4D");var l=r.shape[3],c=l-1,d=this.readSync(r.dataId),u=r.size,h=new Float32Array(u);function m(b){for(var y=b%l,C=b-y+Math.max(0,y-n),N=b-y+Math.min(y+n,c),k=0;C<=N;C++){var S=d[C];k+=S*S}return k}for(var p=0;p<u;p++){var v=m(p),g=d[p]*Math.pow(s+i*v,-o);h[p]=g}return rl(h,r.shape)},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){tr(r,"LRNGrad");for(var d=r.shape[3],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=this.readSync(s.dataId),p=new Float32Array(r.size),v=r.size,g=0;g<v;g++){for(var b=g%d,y=g-b+Math.max(0,b-i),C=g-b+Math.min(d,b+i+1),N=0,k=y;k<C;k++)N+=Math.pow(h[k],2);for(N=l*N+o,k=y;k<C;k++){var S=-2*l*c*h[k]*m[g]/N;g===k&&(S+=Math.pow(N,-c)),S*=u[g],p[k]+=S}}return rl(p,r.shape)},t.prototype.multinomial=function(r,n,s,i){tr(r,"multinomial");for(var o=n?r:yf(r),l=o.shape[0],c=o.shape[1],d=Ua([l,s],"int32"),u=this.readSync(d.dataId),h=this.readSync(o.dataId),m=0;m<l;++m){var p=m*c,v=new Float32Array(c-1);v[0]=h[p];for(var g=1;g<v.length;++g)v[g]=v[g-1]+h[p+g];for(var b=OS(i.toString()),y=m*s,C=0;C<s;++C){var N=b();u[y+C]=v.length;for(var k=0;k<v.length;k++)if(N<v[k]){u[y+C]=k;break}}}return d},t.prototype.oneHot=function(r,n,s,i){tr(r,"oneHot");var o=new Float32Array(r.size*n);o.fill(i);for(var l=this.readSync(r.dataId),c=0;c<r.size;++c)l[c]>=0&&l[c]<n&&(o[c*n+l[c]]=s);return Im(o,[r.size,n],"int32")},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return tr(r,"nonMaxSuppression"),NT(this.readSync(r.dataId),this.readSync(n.dataId),s,i,o)},t.prototype.fft=function(r){return this.fftBatch(r,!1)},t.prototype.ifft=function(r){return this.fftBatch(r,!0)},t.prototype.fftBatch=function(r,n){for(var s=r.shape[0],i=r.shape[1],o=pn(r.shape,"float32"),l=pn(r.shape,"float32"),c=Fc(r).as2D(s,i),d=ku(r).as2D(s,i),u=0;u<s;u++)for(var h=c.slice([u,0],[1,i]),m=d.slice([u,0],[1,i]),p=Ui(h,m),v=this.readSync(this.fftImpl(p,n).dataId),g=0;g<i;g++){var b=eB(v,g);o.values[u*i+g]=b.real,l.values[u*i+g]=b.imag}return Ui(o.toTensor(),l.toTensor()).as2D(s,i)},t.prototype.fftImpl=function(r,n){var s=r.as1D(),i=s.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(s,i,n).as2D(r.shape[0],r.shape[1]);return n&&(o=Ui(Fc(o).div(jr(i)),ku(o).div(jr(i)))),o}var l=this.readSync(r.dataId),c=function(d){for(var u=new Float32Array(d.length/2),h=new Float32Array(d.length/2),m=0;m<d.length;m+=2)u[m/2]=d[m],h[m/2]=d[m+1];return{real:u,imag:h}}(this.fourierTransformByMatmul(l,i,n));return Ui(c.real,c.imag).as2D(r.shape[0],r.shape[1])},t.prototype.isExponentOf2=function(r){return(r&r-1)==0},t.prototype.fftRadix2=function(r,n,s){if(n===1)return r;var i=this.readSync(r.dataId),o=n/2,l=function(y){for(var C=Math.ceil(y.length/4),N=new Float32Array(C),k=new Float32Array(C),S=0;S<y.length;S+=4)N[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:N,imag:k}}(i),c=Ui(l.real,l.imag).as1D(),d=function(y){for(var C=Math.floor(y.length/4),N=new Float32Array(C),k=new Float32Array(C),S=2;S<y.length;S+=4)N[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:N,imag:k}}(i),u=Ui(d.real,d.imag).as1D();c=this.fftRadix2(c,o,s),u=this.fftRadix2(u,o,s);var h=function(y,C){for(var N=new Float32Array(y/2),k=new Float32Array(y/2),S=0;S<Math.ceil(y/2);S++){var D=(C?2:-2)*Math.PI*(S/y);N[S]=Math.cos(D),k[S]=Math.sin(D)}return{real:N,imag:k}}(n,s),m=Ui(h.real,h.imag).mul(u),p=c.add(m),v=c.sub(m),g=Fc(p).concat(Fc(v)),b=ku(p).concat(ku(v));return Ui(g,b).as1D()},t.prototype.fourierTransformByMatmul=function(r,n,s){for(var i=new Float32Array(2*n),o=0;o<n;o++){for(var l=0,c=0,d=0;d<n;d++){var u=_3e(o*d,n,s),h=eB(r,d);l+=h.real*u.real-h.imag*u.imag,c+=h.real*u.imag+h.imag*u.real}s&&(l/=n,c/=n),k3e(i,l,c,o)}return i},t.prototype.depthToSpace=function(r,n,s){qe(s==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s}),qe(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var i=r.shape[0],o=r.shape[1],l=r.shape[2],c=r.shape[3],d=o*n,u=l*n,h=c/(n*n),m=this.readSync(r.dataId),p=new Float32Array(i*d*u*h),v=0,g=0;g<i;++g)for(var b=0;b<d;++b)for(var y=Math.floor(b/n),C=b%n,N=0;N<u;++N)for(var k=Math.floor(N/n),S=(C*n+N%n)*h,D=0;D<h;++D){var E=D+S+c*(k+l*(y+o*g));p[v++]=m[E]}return rl(p,[i,d,u,h])},t.prototype.broadcastedBinaryOp=function(r,n,s,i){var o=Rn(r.shape,n.shape),l=pn(o,s),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,o),h=km(n.shape,o),m=l.values;if(u.length+h.length===0)for(var p=0;p<m.length;++p)m[p]=i(c[p%c.length],d[p%d.length]);else{var v=this.bufferSync(r),g=this.bufferSync(n),b=function(y){var C=l.indexToLoc(y),N=C.slice(-r.rank);u.forEach(function(E){return N[E]=0});var k=v.locToIndex(N),S=C.slice(-n.rank);h.forEach(function(E){return S[E]=0});var D=g.locToIndex(S);m[y]=i(c[k],d[D])};for(p=0;p<m.length;++p)b(p)}return l.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(r,n,s){var i=Rn(r.shape,n.shape),o=pn(i,"float32"),l=pn(i,"float32"),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,i),h=km(n.shape,i),m=o.values,p=l.values;if(u.length+h.length===0)for(var v=0;v<m.length;v++){var g=v%c.length,b=v%d.length,y=s(c[2*g],c[2*g+1],d[2*b],d[2*b+1]);m[v]=y.real,p[v]=y.imag}else{var C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),N=this.bufferSync(this.data.get(n.dataId).complexTensors.real),k=function(S){var D=o.indexToLoc(S),E=D.slice(-r.rank);u.forEach(function(O){return E[O]=0});var T=C.locToIndex(E),A=D.slice(-n.rank);h.forEach(function(O){return A[O]=0});var L=N.locToIndex(A),P=s(c[2*T],c[2*T+1],d[2*L],d[2*L+1]);m[S]=P.real,p[S]=P.imag};for(v=0;v<m.length;v++)k(v)}return this.complex(o.toTensor(),l.toTensor())},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(r,n,s,i,o,l){for(var c=r.shape,d=c[0],u=c[1],h=c[2],m=c[3],p=n.shape[0],v=i[0],g=i[1],b=pn([p,v,g,m],"float32"),y=this.readSync(n.dataId),C=this.readSync(s.dataId),N=this.readSync(r.dataId),k=r.strides,S=b.strides,D=0;D<p;D++){var E=4*D,T=y[E],A=y[E+1],L=y[E+2],P=y[E+3],O=C[D];if(!(O>=d))for(var Q=v>1?(L-T)*(u-1)/(v-1):0,z=g>1?(P-A)*(h-1)/(g-1):0,re=0;re<v;re++){var U=v>1?T*(u-1)+re*Q:.5*(T+L)*(u-1);if(U<0||U>u-1)for(var X=0;X<g;X++)for(var B=0;B<m;B++){var Y=B+X*S[2]+re*S[1]+D*S[0];b.values[Y]=l}else if(o==="bilinear"){var K=Math.floor(U),ue=Math.ceil(U),M=U-K;for(X=0;X<g;X++)if((ce=g>1?A*(h-1)+X*z:.5*(A+P)*(h-1))<0||ce>h-1)for(B=0;B<m;B++)Y=B+X*S[2]+re*S[1]+D*S[0],b.values[Y]=l;else{var V=Math.floor(ce),W=Math.ceil(ce),ee=ce-V;for(B=0;B<m;B++){var te=N[Y=B+V*k[2]+K*k[1]+O*k[0]],ne=N[Y=B+W*k[2]+K*k[1]+O*k[0]],se=N[Y=B+V*k[2]+ue*k[1]+O*k[0]],oe=te+(ne-te)*ee,G=se+(N[Y=B+W*k[2]+ue*k[1]+O*k[0]]-se)*ee;Y=B+X*S[2]+re*S[1]+D*S[0],b.values[Y]=oe+(G-oe)*M}}}else for(X=0;X<g;++X){var ce;if((ce=g>1?A*(h-1)+X*z:.5*(A+P)*(h-1))<0||ce>h-1)for(B=0;B<m;B++)Y=B+X*S[2]+re*S[1]+D*S[0],b.values[Y]=l;else{var Z=Math.round(ce),ae=Math.round(U);for(B=0;B<m;B++){var je=B+Z*k[2]+ae*k[1]+O*k[0],de=B+X*S[2]+re*S[1]+D*S[0];b.values[de]=N[je]}}}}}return b.toTensor()},t.prototype.sparseToDense=function(r,n,s,i){var o=sw(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.sliceSize,u=o.strides,h=o.outputSize;return this.scatter(r,n,s,h,d,c,l,u,i,!1)},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3];if(c===0)return Hi([],l,r.dtype);for(var h=new Ey([c,d],r.dtype),m=this.readSync(n.dataId),p=this.readSync(r.dataId),v=0;v<c;v++){for(var g=[],b=0,y=0;y<i;y++){var C=m[v*i+y];b+=C*u[y],g.push(C)}if(b<0||b>=r.size/d)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var N=0;N<d;N++)h.values[v*d+N]=p[b*d+N]}return h.toTensor().reshape(l)},t.prototype.scatterND=function(r,n,s){var i=sw(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=jr(0);return this.scatter(r,n,s,u,c,l,o,d,h,!0)},t.prototype.fill=function(r,n,s){var i=K2(s=s||u1(n),Rr(r));return i.fill(n),dt.makeTensor(i,r,s,this)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){var n=K2(r.dtype,Rr(r.shape));return this.makeOutput(n,r.shape,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.scatter=function(r,n,s,i,o,l,c,d,u,h){var m=[i/o,o],p=this.readSync(r.dataId),v=this.readSync(n.dataId);if(i===0)return Hi([],s,n.dtype);var g=new Ey(m,n.dtype);g.values.fill(this.readSync(u.dataId)[0]);for(var b=0;b<l;b++){for(var y=[],C=0,N=0;N<c;N++){var k=p[b*c+N];y.push(k),C+=k*d[N]}if(C<0||C>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+s);for(var S=0;S<o;S++)h?g.values[C*o+S]+=v[b*o+S]:g.values[C*o+S]=n.rank===0?v[0]:v[b*o+S]}return g.toTensor().reshape(s)},t}(gG);dt.registerBackend("cpu",function(){return new GIe},1);for(var $E=0,NB=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r;tr(i,"NonMaxSuppressionWithScore");var p=wT(m.data.get(i.dataId).values,m.data.get(o.dataId).values,c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r;tr(n,"square");for(var i=s.data.get(n.dataId).values,o=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];o[l]=c*c}return{dataId:s.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:Ty,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r;tr([s,i],Ty);var l=o.data.get(s.dataId).values,c=o.data.get(i.dataId).values,d=function(m,p,v,g,b,y){var C=Rn(m,p),N=C.length,k=Lu(C),S=_y(b,Rr(C)),D=m.length,E=p.length,T=Lu(m),A=Lu(p),L=km(m,C),P=km(p,C);if(L.length+P.length===0)for(var O=0;O<S.length;++O)S[O]=y(v[O%v.length],g[O%g.length]);else{var Q=function(z){var re=nDe(z,N,k),U=re.slice(-D);L.forEach(function(K){return U[K]=0});var X=H8(U,D,T),B=re.slice(-E);P.forEach(function(K){return B[K]=0});var Y=H8(B,E,A);S[z]=y(v[X],g[Y])};for(O=0;O<S.length;++O)Q(O)}return[S,C]}(s.shape,i.shape,l,c,s.dtype,function(m,p){var v=m-p;return v*v}),u=d[0],h=d[1];return{dataId:o.write(u,h,s.dtype),shape:h,dtype:s.dtype}}}];$E<NB.length;$E++)WW(NB[$E]);var R0,YIe=function(e){this.variableNames=["A"];var t=yo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+n+".0, "+r+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},KIe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=yo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+n+".0, "+r+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var VE=0,wB=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t.pixels,i=n.numChannels,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,c=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=c[0],u=c[1],h=[u,d],m=[u,d,i];(l||o)&&(R0==null&&(R0=document.createElement("canvas").getContext("2d")),R0.canvas.width=d,R0.canvas.height=u,R0.drawImage(s,0,0,d,u),s=R0.canvas);var p=r.makeTensorInfo(h,"int32");r.texData.get(p.dataId).usage=Hl.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),s);var v=$t().getBool("WEBGL_PACK")?new KIe(m):new YIe(m),g=r.runWebGLProgram(v,[p],"int32");return r.disposeData(p.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs;Z2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r,p=wT(m.readSync(i.dataId),m.readSync(o.dataId),c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r,i=new wn(n.shape,"return x * x;");return s.runWebGLProgram(i,[n],n.dtype)}},{kernelName:Ty,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r,l=$t().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("return (a - b) * (a - b);",s.shape,i.shape):new gs("return (a - b) * (a - b);",s.shape,i.shape);return o.compileAndRun(l,[s,i])}}];VE<wB.length;VE++)WW(wB[VE]);for(var qE=0,SB=[{kernelName:"Square",gradFunc:function(e,t){var r=t[0];return{x:function(){return e.mul(r.toFloat().mul(2))}}}},{kernelName:Ty,gradFunc:function(e,t){var r=t[0],n=t[1],s=jr(2);return{a:function(){return So(e,So(s,di(r,n)))},b:function(){return So(e,So(s,di(n,r)))}}}}];qE<SB.length;qE++)W5e(SB[qE]);var XIe=function(){function e(){}return e.prototype.fetch=function(t,r){return fetch(t,r)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return new TextDecoder(r).decode(t)},e}();$t().get("IS_BROWSER")&&$t().setPlatform("browser",new XIe);var zE,QIe=function(){return require("node-fetch")},JIe=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,r){return $t().global.fetch!=null?$t().global.fetch(t,r):(zE==null&&(zE=QIe()),zE(t,r))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)},e}();$t().get("IS_NODE")&&$t().setPlatform("node",new JIe);var JD={float32:4,int32:4,uint16:2,uint8:1,bool:1},hw=4;function pY(e,t){for(var r={},n=0,s=function(l){var c=l.name,d=l.dtype,u=l.shape,h=Rr(u),m=void 0;if("quantization"in l){var p=l.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=JD[p.dtype],g=e.slice(n,n+h*v),b=p.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(d==="float32")m=Float32Array.from(b,function(D){return D*p.scale+p.min});else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=Int32Array.from(b,function(D){return Math.round(D*p.scale+p.min)})}n+=h*v}else if(d==="string"){var y=Rr(l.shape);m=[];for(var C=0;C<y;C++){var N=new Uint32Array(e.slice(n,n+hw))[0];n+=hw;var k=new Uint8Array(e.slice(n,n+N));m.push(k),n+=N}}else{var S=JD[d];if(g=e.slice(n,n+h*S),d==="float32")m=new Float32Array(g);else if(d==="int32")m=new Int32Array(g);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=new Uint8Array(g)}n+=h*S}r[c]=Hi(m,u,d)},i=0,o=t;i<o.length;i++)s(o[i]);return r}function ZIe(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,r=[];e.forEach(function(i){if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var n=new Uint8Array(t),s=0;return r.forEach(function(i){n.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),n.buffer}var ZD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function CB(e){return ZD?Buffer.byteLength(e):new Blob([e]).size}function VT(e){var t=0;e.forEach(function(s){t+=s.byteLength});var r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(new Uint8Array(s),n),n+=s.byteLength}),r.buffer}function kB(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function g1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:CB(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:CB(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Wl=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,r){return e.getHandlers(t,"load",r)},e.getHandlers=function(t,r,n){var s=[];return(r==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,n);o!==null&&s.push(o)}),s},e}(),fv="://",Pm=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,r){qe(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(fv)&&(t=t.slice(0,t.indexOf(fv))),qe(t.length>0,function(){return"scheme must not be an empty string."});var n=e.getInstance();qe(n.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),n.managers[t]=r},e.getManager=function(t){var r=this.getInstance().managers[t];if(r==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return r},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function TN(e){if(e.indexOf(fv)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Pm.getSchemes().join(","));return{scheme:e.split(fv)[0],path:e.split(fv)[1]}}function _B(e,t,r){return r===void 0&&(r=!1),Ir(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h;return Pr(this,function(m){switch(m.label){case 0:return qe(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),qe((n=Wl.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),qe(n.length<2,function(){return"Copying failed because more than one ("+n.length+") load handlers for source URL "+e+"."}),s=n[0],qe((i=Wl.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),qe(i.length<2,function(){return"Copying failed because more than one ("+n.length+") save handlers for destination URL "+t+"."}),o=i[0],l=TN(e).scheme,c=TN(e).path,d=l===TN(e).scheme,[4,s.load()];case 1:return u=m.sent(),r&&d?[4,Pm.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,o.save(u)];case 4:return h=m.sent(),!r||d?[3,6]:[4,Pm.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var ex="models_store",_m="model_info_store";function xY(){if(!$t().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function e3(e){var t=e.result;t.createObjectStore(ex,{keyPath:"modelPath"}),t.createObjectStore(_m,{keyPath:"modelPath"})}var mv=function(){function e(t){if(this.indexedDB=xY(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,r){var n=this;return new Promise(function(s,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return e3(o)},o.onsuccess=function(){var l=o.result;if(r==null){var c=l.transaction(ex,"readonly"),d=c.objectStore(ex).get(n.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),i(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));s(d.result.modelArtifacts)},d.onerror=function(g){return l.close(),i(d.error)},c.oncomplete=function(){return l.close()}}else{var u,h=g1(r),m=l.transaction(_m,"readwrite"),p=m.objectStore(_m),v=p.put({modelPath:n.modelPath,modelArtifactsInfo:h});v.onsuccess=function(){var g=(u=l.transaction(ex,"readwrite")).objectStore(ex).put({modelPath:n.modelPath,modelArtifacts:r,modelArtifactsInfo:h});g.onsuccess=function(){return s({modelArtifactsInfo:h})},g.onerror=function(b){var y=(p=m.objectStore(_m)).delete(n.modelPath);y.onsuccess=function(){return l.close(),i(g.error)},y.onerror=function(C){return l.close(),i(g.error)}}},v.onerror=function(g){return l.close(),i(v.error)},m.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}}},o.onerror=function(l){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),EB=function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(mv.URL_SCHEME)?(t=e.slice(mv.URL_SCHEME.length),new mv(t)):null;var t};Wl.registerSaveRouter(EB),Wl.registerLoadRouter(EB);var ePe=function(){function e(){this.indexedDB=xY()}return e.prototype.listModels=function(){return Ir(this,void 0,void 0,function(){var t=this;return Pr(this,function(r){return[2,new Promise(function(n,s){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return e3(i)},i.onsuccess=function(){var o=i.result,l=o.transaction(_m,"readonly"),c=l.objectStore(_m).getAll();c.onsuccess=function(){for(var d={},u=0,h=c.result;u<h.length;u++){var m=h[u];d[m.modelPath]=m.modelArtifactsInfo}n(d)},c.onerror=function(d){return o.close(),s(c.error)},l.oncomplete=function(){return o.close()}},i.onerror=function(o){return s(i.error)}})]})})},e.prototype.removeModel=function(t){return Ir(this,void 0,void 0,function(){var r=this;return Pr(this,function(n){var s;return t=(s=t).startsWith(mv.URL_SCHEME)?s.slice(mv.URL_SCHEME.length):s,[2,new Promise(function(i,o){var l=r.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return e3(l)},l.onsuccess=function(){var c,d=l.result,u=d.transaction(_m,"readwrite"),h=u.objectStore(_m),m=h.get(t);m.onsuccess=function(){if(m.result==null)return d.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=h.delete(t),v=function(){var g=(c=d.transaction(ex,"readwrite")).objectStore(ex).delete(t);g.onsuccess=function(){return i(m.result.modelArtifactsInfo)},g.onerror=function(b){return o(m.error)}};p.onsuccess=v,p.onerror=function(g){return v(),d.close(),o(m.error)}},m.onerror=function(p){return d.close(),o(m.error)},u.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return o(l.error)}})]})})},e}();if($t().getBool("IS_BROWSER"))try{Pm.registerManager(mv.URL_SCHEME,new ePe)}catch{}var Fh="/",W0="tensorflowjs_models",vY="info",tPe="model_topology",rPe="weight_specs",nPe="weight_data",aPe="model_metadata";function gY(e){return{info:[W0,e,vY].join(Fh),topology:[W0,e,tPe].join(Fh),weightSpecs:[W0,e,rPe].join(Fh),weightData:[W0,e,nPe].join(Fh),modelMetadata:[W0,e,aPe].join(Fh)}}function sPe(e){var t=e.split(Fh);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Fh)}var pv=function(){function e(t){if(!$t().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=gY(this.modelPath)}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s;return Pr(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),s=g1(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(o){if(ZD)return Buffer.from(o).toString("base64");for(var l=new Uint8Array(o),c="",d=0,u=l.length;d<u;d++)c+=String.fromCharCode(l[d]);return btoa(c)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:s}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+s.modelTopologyBytes+", weightSpecsBytes="+s.weightSpecsBytes+", weightDataBytes="+s.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o,l;return Pr(this,function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},(n=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=n,(s=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=s,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,r.userDefinedMetadata=o.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return r.weightData=function(d){if(ZD){var u=Buffer.from(d,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var h=atob(d),m=new Uint8Array(h.length),p=0;p<h.length;++p)m.set([h.charCodeAt(p)],p);return m.buffer}(l),[2,r]})})},e.URL_SCHEME="localstorage://",e}(),DB=function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pv.URL_SCHEME)?(t=e.slice(pv.URL_SCHEME.length),new pv(t)):null;var t};Wl.registerSaveRouter(DB),Wl.registerLoadRouter(DB);var iPe=function(){function e(){qe($t().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),qe(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o;return Pr(this,function(l){for(t={},r=W0+Fh,n=Fh+vY,s=0;s<this.LS.length;++s)(i=this.LS.key(s)).startsWith(r)&&i.endsWith(n)&&(o=sPe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Ir(this,void 0,void 0,function(){var r,n;return Pr(this,function(s){var i;if(t=(i=t).startsWith(pv.URL_SCHEME)?i.slice(pv.URL_SCHEME.length):i,r=gY(t),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(r.info)),this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),[2,n]})})},e}();if($t().getBool("IS_BROWSER"))try{Pm.registerManager(pv.URL_SCHEME,new iPe)}catch{}var oPe="model",lPe=".json",cPe=".weights.bin";function AB(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var HE=function(){function e(t){if(!$t().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=oPe),this.modelTopologyFileName=t+lPe,this.weightDataFileName=t+cPe}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l;return Pr(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,AB(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),t.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=r,[4,AB(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:g1(t)}]}})})},e.URL_SCHEME="downloads://",e}(),dPe=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n=this;return Pr(this,function(s){return t=this.files[0],r=this.files.slice(1),[2,new Promise(function(i,o){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),u=d.modelTopology;if(u!=null){r.length===0&&i({modelTopology:u});var h=d.weightsManifest;if(h!=null){var m;try{m=n.checkManifestAndWeightFiles(h,r)}catch(b){return void o(b)}var p=[],v=[],g=[];h.forEach(function(b){b.paths.forEach(function(y){v.push(y),g.push(null)}),p.push.apply(p,b.weights)}),h.forEach(function(b){b.paths.forEach(function(y){var C=new FileReader;C.onload=function(N){var k=N.target.result,S=v.indexOf(y);g[S]=k,g.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:VT(g),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},C.onerror=function(N){return o("Failed to weights data from file of path '"+y+"'.")},C.readAsArrayBuffer(m[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},l.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,r){for(var n=[],s=r.map(function(c){return kB(c.name)}),i={},o=0,l=t;o<l.length;o++)l[o].paths.forEach(function(c){var d=kB(c);if(n.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(n.push(d),s.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");i[c]=r[s.indexOf(d)]});if(n.length!==r.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+r.length+").");return i},e}();function TB(e,t,r,n){(function(i){qe(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){qe(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),qe(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),qe(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(r=r??0,n=n??1);var s=0;return Promise.all(e.map(function(i){return i.then(function(o){var l=r+ ++s/e.length*(n-r);return t(l),o}),i}))}function bY(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u;return Pr(this,function(h){switch(h.label){case 0:return t==null&&(t={}),r=t.fetchFunc==null?$t().platform.fetch:t.fetchFunc,n=e.map(function(m){return r(m,t.requestInit,{isBinary:!0})}),s=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(n)];case 1:return o=h.sent(),[3,4];case 2:return[4,TB(n,t.onProgress,s,i)];case 3:o=h.sent(),h.label=4;case 4:return l=o.map(function(m){return m.arrayBuffer()}),c=.5,d=1,t.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return u=h.sent(),[3,8];case 6:return[4,TB(l,t.onProgress,c,d)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function IB(e){var t=this;return function(r,n,s){return n===void 0&&(n=""),Ir(t,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v;return Pr(this,function(g){switch(g.label){case 0:if(i=r.map(function(){return!1}),o={},l=s!=null?s.map(function(){return!1}):[],c=[],r.forEach(function(b,y){var C=0;b.weights.forEach(function(N){var k="quantization"in N?N.quantization.dtype:N.dtype,S=JD[k]*Rr(N.shape),D=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:N,groupOffset:C,sizeBytes:S})};s!=null?s.forEach(function(E,T){E===N.name&&(D(),l[T]=!0)}):D(),c.push(N.name),C+=S})}),!l.every(function(b){return b}))throw d=s.filter(function(b,y){return!l[y]}),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return u=i.reduce(function(b,y,C){return y&&b.push(C),b},[]),h=[],u.forEach(function(b){r[b].paths.forEach(function(y){var C=n+(n.endsWith("/")?"":"/")+y;h.push(C)})}),[4,e(h)];case 1:return m=g.sent(),p={},v=0,u.forEach(function(b){for(var y=r[b].paths.length,C=0,N=0;N<y;N++)C+=m[v+N].byteLength;for(var k=new ArrayBuffer(C),S=new Uint8Array(k),D=0,E=0;E<y;E++){var T=new Uint8Array(m[v+E]);S.set(T,D),D+=T.byteLength}o[b].forEach(function(A){var L=pY(k.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var P in L)p[P]=L[P]}),v+=y}),[2,p]}})})}}Wl.registerSaveRouter(function(e){return $t().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(HE.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new HE(t)}(e.slice(HE.URL_SCHEME.length)):null});var yY=function(){function e(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,r.fetchFunc!=null?(qe(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=$t().platform.fetch,qe(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&qe(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i;return Pr(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n},r.body.append("model.json",new Blob([JSON.stringify(s)],{type:"application/json"}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:g1(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Ir(this,void 0,void 0,function(){var t,r,n,s,i,o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return r=p.sent(),[3,5];case 4:throw p.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(s=r.modelTopology,i=r.weightsManifest,o=r.generatedBy,l=r.convertedBy,c=r.format,d=r.userDefinedMetadata,s==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=p.sent(),u=m[0],h=m[1],p.label=7;case 7:return[2,{modelTopology:s,weightSpecs:u,weightData:h,userDefinedMetadata:d,generatedBy:o,convertedBy:l,format:c}]}})})},e.prototype.loadWeights=function(t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m;return Pr(this,function(p){switch(p.label){case 0:for(r=Array.isArray(this.path)?this.path[1]:this.path,n=function(v){var g=v.lastIndexOf("/"),b=v.lastIndexOf("?"),y=v.substring(0,g),C=b>g?v.substring(b):"";return[y+"/",C]}(r),s=n[0],i=n[1],o=this.weightPathPrefix||s,l=[],c=0,d=t;c<d.length;c++)u=d[c],l.push.apply(l,u.weights);return h=[],t.forEach(function(v){v.paths.forEach(function(g){h.push(o+g+i)})}),[4,bY(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=p.sent(),[2,[l,VT(m)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function t3(e){return e.match(yY.URL_SCHEME_REGEX)!=null}var PB=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(r){return t3(r)}):t3(e))?r3(e,{onProgress:t}):null};function r3(e,t){return new yY(e,t)}Wl.registerSaveRouter(PB),Wl.registerLoadRouter(PB);var WE=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(t){return[2,this.modelArtifacts]})})},e}(),uPe=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,this.saveHandler(t)]})})},e}(),jY=Object.freeze({browserFiles:function(e){return new dPe(e)},browserHTTPRequest:function(e,t){return r3(e,t)},concatenateArrayBuffers:VT,decodeWeights:pY,encodeWeights:function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Pr(this,function(c){switch(c.label){case 0:for(r=[],n=[],s=Array.isArray(e)?e.map(function(d){return d.name}):Object.keys(e),i=function(d){var u=s[d],h=Array.isArray(e)?e[d].tensor:e[u];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+h.dtype);var m={name:u,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var p=new Promise(function(v){return Ir(l,void 0,void 0,function(){var g,b,y,C,N,k,S;return Pr(this,function(D){switch(D.label){case 0:return[4,h.bytes()];case 1:for(g=D.sent(),b=g.reduce(function(E,T){return E+T.length},0)+hw*g.length,y=new Uint8Array(b),C=0,N=0;N<g.length;N++)k=g[N],S=new Uint8Array(new Uint32Array([k.length]).buffer),y.set(S,C),C+=hw,y.set(k,C),C+=k.length;return v(y),[2]}})})});n.push(p)}else n.push(h.data());t!=null&&(m.group=t),r.push(m)},o=0;o<s.length;++o)i(o);return[4,Promise.all(n)];case 1:return[2,{data:ZIe(c.sent()),specs:r}]}})})},fromMemory:function(e,t,r,n){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new WE(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:n}))},getLoadHandlers:function(e,t){return Wl.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:g1,getSaveHandlers:function(e){return Wl.getSaveHandlers(e)},http:r3,isHTTPScheme:t3,loadWeights:function(e,t,r,n){return t===void 0&&(t=""),Ir(this,void 0,void 0,function(){return Pr(this,function(s){return[2,IB(function(i){return bY(i,{requestInit:n})})(e,t,r)]})})},registerLoadRouter:function(e){return Wl.registerLoadRouter(e)},registerSaveRouter:function(e){return Wl.registerSaveRouter(e)},weightsLoaderFactory:IB,withSaveHandler:function(e){return new uPe(e)},copyModel:function(e,t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,_B(e,t,!1)]})})},listModels:function(){return Ir(this,void 0,void 0,function(){var e,t,r,n,s,i,o;return Pr(this,function(l){switch(l.label){case 0:e=Pm.getSchemes(),t={},r=0,n=e,l.label=1;case 1:return r<n.length?(s=n[r],[4,Pm.getManager(s).listModels()]):[3,4];case 2:for(o in i=l.sent())t[s+fv+o]=i[o];l.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return[2,_B(e,t,!0)]})})},removeModel:function(e){return Ir(this,void 0,void 0,function(){var t;return Pr(this,function(r){return t=TN(e),[2,Pm.getManager(t.scheme).removeModel(t.path)]})})}}),F0;et({confusionMatrix_:function(e,t,r){var n=Pe(e,"labels","confusionMatrix"),s=Pe(t,"predictions","confusionMatrix");qe(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, but got "+r}),qe(n.rank===1,function(){return"Expected the rank of labels to be 1, but got "+n.rank}),qe(s.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),qe(n.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+n.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),qe(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+r});var i=GD(n.asType("int32"),r),o=GD(s.asType("int32"),r);return i.transpose().matMul(o).asType("int32")}});var hPe=et({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,n=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(HW("FromPixels",dt.backendName)!=null)return dt.runKernel("FromPixels",{pixels:e},{numChannels:t});var l,c,d=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=d[0],h=d[1];if(o?l=e.getContext("2d").getImageData(0,0,u,h).data:n||r?l=e.data:(i||s)&&(F0==null&&(F0=document.createElement("canvas").getContext("2d")),F0.canvas.width=u,F0.canvas.height=h,F0.drawImage(e,0,0,u,h),l=F0.getImageData(0,0,u,h).data),t===4)c=new Int32Array(l);else{var m=u*h;c=new Int32Array(m*t);for(var p=0;p<m;p++)for(var v=0;v<t;++v)c[p*t+v]=l[4*p+v]}return vT(c,[h,u,t],"int32")}}),qT=Object.freeze({toPixels:function(e,t){return Ir(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Pr(this,function(A){switch(A.label){case 0:if(r=Pe(e,"img","toPixels"),e instanceof os||(r=r.toInt()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(n=r.shape.slice(0,2),s=n[0],i=n[1],(o=r.rank===2?1:r.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,r.data()];case 1:return l=A.sent(),c=r.min(),d=r.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(u=A.sent(),h=u[0],m=u[1],p=h[0],v=m[0],c.dispose(),d.dispose(),r.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(g=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*s*4),y=0;y<s*i;++y)C=void 0,N=void 0,k=void 0,S=void 0,o===1?(C=l[y]*g,N=l[y]*g,k=l[y]*g,S=255):o===3?(C=l[3*y]*g,N=l[3*y+1]*g,k=l[3*y+2]*g,S=255):o===4&&(C=l[4*y]*g,N=l[4*y+1]*g,k=l[4*y+2]*g,S=l[4*y+3]*g),b[(D=4*y)+0]=Math.round(C),b[D+1]=Math.round(N),b[D+2]=Math.round(k),b[D+3]=Math.round(S);return t!=null&&(t.width=i,t.height=s,E=t.getContext("2d"),T=new ImageData(b,i,s),E.putImageData(T,0,0)),r!==e&&r.dispose(),[2,b]}})})},fromPixels:hPe}),fPe=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,r){return new t(r)},e}(),mPe=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Gx(e){qe(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),qe(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),qe(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),mPe.register(e)}var Yx=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Fd(t,e),t.prototype.minimize=function(r,n,s){n===void 0&&(n=!1);var i=this.computeGradients(r,s),o=i.value,l=i.grads;if(s!=null){var c=s.map(function(d){return{name:d.name,tensor:l[d.name]}});this.applyGradients(c)}else this.applyGradients(l);return ll(l),n?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(r,n){return S3e(r,n)},t.prototype.dispose=function(){this.iterations_!=null&&ll(this.iterations_)},t.prototype.saveIterations=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:jr(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return n=this,[4,r[0].tensor.data()];case 1:return n.iterations_=s.sent()[0],[2,r.slice(1)]}})})},t}(fPe);Object.defineProperty(Yx,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var pPe=function(e){function t(r,n,s){s===void 0&&(s=null);var i=e.call(this)||this;return i.learningRate=r,i.rho=n,i.epsilon=s,i.accumulatedGrads=[],i.accumulatedUpdates=[],s==null&&(i.epsilon=dt.backend.epsilon()),i}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=dt.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accum_grad",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedUpdates[i]==null&&(n.accumulatedUpdates[i]={originalName:s+"/accum_var",variable:kr(function(){return qn(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable,d=n.accumulatedUpdates[i].variable;kr(function(){var u=c.mul(n.rho).add(l.square().mul(1-n.rho)),h=d.add(n.epsilon).sqrt().div(c.add(n.epsilon).sqrt()).mul(l),m=d.mul(n.rho).add(h.square().mul(1-n.rho));c.assign(u),d.assign(m);var p=h.mul(-n.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(ll(this.accumulatedGrads.map(function(r){return r.variable})),ll(this.accumulatedUpdates.map(function(r){return r.variable})))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=r.length/2,this.accumulatedGrads=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.rho,n.epsilon)},t.className="Adadelta",t}(Yx);Gx(pPe);var xPe=function(e){function t(r,n){n===void 0&&(n=.1);var s=e.call(this)||this;return s.learningRate=r,s.initialAccumulatorValue=n,s.accumulatedGrads=[],s}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=dt.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accumulator",variable:kr(function(){return Bu(o.shape,n.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable;kr(function(){var d=c.add(l.square());c.assign(d);var u=l.div(d.add(dt.backend.epsilon()).sqrt()).mul(-n.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&ll(this.accumulatedGrads.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(r,n){return new r(n.learningRate,n.initialAccumulatorValue)},t.className="Adagrad",t}(Yx);Gx(xPe);var vPe=function(e){function t(r,n,s,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=r,o.beta1=n,o.beta2=s,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],kr(function(){o.accBeta1=jr(n).variable(),o.accBeta2=jr(s).variable()}),i==null&&(o.epsilon=dt.backend.epsilon()),o}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);kr(function(){var i=di(1,n.accBeta1),o=di(1,n.accBeta2);s.forEach(function(l,c){var d=dt.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:kr(function(){return qn(d).variable(!1)})}),n.accumulatedSecondMoment[c]==null&&(n.accumulatedSecondMoment[c]={originalName:l+"/v",variable:kr(function(){return qn(d).variable(!1)})});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedSecondMoment[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2).add(u.square().mul(1-n.beta2)),g=p.div(i),b=v.div(o);h.assign(p),m.assign(v);var y=g.div(b.sqrt().add(n.epsilon)).mul(-n.learningRate).add(d);d.assign(y)}}),n.accBeta1.assign(n.accBeta1.mul(n.beta1)),n.accBeta2.assign(n.accBeta2.mul(n.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ll(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&ll(this.accumulatedSecondMoment.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n,s=this;return Pr(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(r)];case 1:return r=i.sent(),kr(function(){s.accBeta1.assign(dw(s.beta1,s.iterations_+1)),s.accBeta2.assign(dw(s.beta2,s.iterations_+1))}),n=r.length/2,this.accumulatedFirstMoment=r.slice(0,n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=r.slice(n,2*n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)},t.className="Adam",t}(Yx);Gx(vPe);var gPe=function(e){function t(r,n,s,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var l=e.call(this)||this;return l.learningRate=r,l.beta1=n,l.beta2=s,l.epsilon=i,l.decay=o,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],kr(function(){l.iteration=jr(0).variable(),l.accBeta1=jr(n).variable()}),i==null&&(l.epsilon=dt.backend.epsilon()),l}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);kr(function(){var i=di(1,n.accBeta1),o=Nd(-n.learningRate,n.iteration.mul(n.decay).add(1));s.forEach(function(l,c){var d=dt.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:qn(d).variable(!1)}),n.accumulatedWeightedInfNorm[c]==null&&(n.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:qn(d).variable(!1)});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedWeightedInfNorm[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2),g=u.abs(),b=v.maximum(g);h.assign(p),m.assign(b);var y=o.div(i).mul(p.div(b.add(n.epsilon))).add(d);d.assign(y)}}),n.iteration.assign(n.iteration.add(1)),n.accBeta1.assign(n.accBeta1.mul(n.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ll(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&ll(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)},t.className="Adamax",t}(Yx);Gx(gPe);var NY=function(e){function t(r){var n=e.call(this)||this;return n.learningRate=r,n.setLearningRate(r),n}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=Array.isArray(r)?r[i].tensor:r[s];if(o!=null){var l=dt.registeredVariables[s];kr(function(){var c=n.c.mul(o).add(l);l.assign(c)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=LDe(jr(-r))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:if((r=n.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(r,n){return new r(n.learningRate)},t.className="SGD",t}(Yx);Gx(NY);var bPe=function(e){function t(r,n,s){s===void 0&&(s=!1);var i=e.call(this,r)||this;return i.learningRate=r,i.momentum=n,i.useNesterov=s,i.accumulations=[],i.m=jr(i.momentum),i}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=dt.registeredVariables[s];n.accumulations[i]==null&&(n.accumulations[i]={originalName:s+"/momentum",variable:kr(function(){return qn(o).variable(!1)})});var l=n.accumulations[i].variable,c=Array.isArray(r)?r[i].tensor:r[s];c!=null&&kr(function(){var d,u=n.m.mul(l).add(c);d=n.useNesterov?n.c.mul(c.add(u.mul(n.m))).add(o):n.c.mul(u).add(o),l.assign(u),o.assign(d)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&ll(this.accumulations.map(function(r){return r.variable}))},t.prototype.setMomentum=function(r){this.momentum=r},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){return Pr(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){return Pr(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)},t.className="Momentum",t}(NY);Gx(bPe);var yPe=function(e){function t(r,n,s,i,o){n===void 0&&(n=.9),s===void 0&&(s=0),i===void 0&&(i=null),o===void 0&&(o=!1);var l=e.call(this)||this;if(l.learningRate=r,l.decay=n,l.momentum=s,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=o,i==null&&(l.epsilon=dt.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Fd(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=dt.registeredVariables[s];n.accumulatedMeanSquares[i]==null&&(n.accumulatedMeanSquares[i]={originalName:s+"/rms",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedMoments[i]==null&&(n.accumulatedMoments[i]={originalName:s+"/momentum",variable:kr(function(){return qn(o).variable(!1)})}),n.accumulatedMeanGrads[i]==null&&n.centered&&(n.accumulatedMeanGrads[i]={originalName:s+"/mg",variable:kr(function(){return qn(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedMeanSquares[i].variable,d=n.accumulatedMoments[i].variable;kr(function(){var u=c.mul(n.decay).add(l.square().mul(1-n.decay));if(n.centered){var h=n.accumulatedMeanGrads[i].variable,m=h.mul(n.decay).add(l.mul(1-n.decay)),p=d.mul(n.momentum).add(l.mul(n.learningRate).div(u.sub(m.square().add(n.epsilon)).sqrt()));c.assign(u),h.assign(m),d.assign(p);var v=o.sub(p);o.assign(v)}else{var g=c.mul(n.decay).add(l.square().mul(1-n.decay));p=d.mul(n.momentum).add(l.mul(n.learningRate).div(g.add(n.epsilon).sqrt())),c.assign(g),d.assign(p),v=o.sub(p),o.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&ll(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&ll(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&ll(this.accumulatedMoments.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Ir(this,void 0,void 0,function(){var r;return Pr(this,function(n){switch(n.label){case 0:return r=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&r.push.apply(r,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Ir(this,void 0,void 0,function(){var n;return Pr(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=this.centered?r.length/3:r.length/2,this.accumulatedMeanSquares=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(2*n,3*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)},t.className="RMSProp",t}(Yx);Gx(yPe);os.prototype.squaredDifference=function(e){return FG(this,e)},Mt=WIe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n3=function(e,t){return n3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},n3(e,t)};function mn(e,t){n3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vo=function(){return vo=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},vo.apply(this,arguments)};function Lr(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(e,[])).next())})}function Br(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Yb(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}var xv=function(){function e(t,r){if(!fx(t)||!fx(r))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:r}));this._width=t,this._height=r}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function VS(e,t){return e instanceof os&&e.shape.length===t}function jPe(e){return VS(e,2)}function qS(e){return VS(e,3)}function Om(e){return VS(e,4)}function NPe(e){return e%1!==0}function OB(e){return e%2===0}function wPe(e,t){t===void 0&&(t=2);var r=Math.pow(10,t);return Math.floor(e*r)/r}function MB(e){return e&&e.width&&e.height}function SPe(e,t){var r=e.width,n=e.height,s=t/Math.max(n,r);return new xv(Math.round(r*s),Math.round(n*s))}function zT(e){return e.reduce(function(t,r){return t.add(r)},new na(0,0)).div(new na(e.length,e.length))}function Iy(e,t,r){return Array(e).fill(0).map(function(n,s){return t+s*r})}function fx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function RB(e){return fx(e)&&0<=e&&e<=1}var na=function(){function e(t,r){this._x=t,this._y=r}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),zm=function(){function e(t,r){r===void 0&&(r=!0);var n=t||{},s=[n.left,n.top,n.right,n.bottom].every(fx),i=[n.x,n.y,n.width,n.height].every(fx);if(!i&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));var o=i?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],l=o[0],c=o[1],d=o[2],u=o[3];e.assertIsValidBox({x:l,y:c,width:d,height:u},"Box.constructor",r),this._x=l,this._y=c,this._width=d,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(fx)},e.assertIsValidBox=function(t,r,n){if(n===void 0&&(n=!1),!e.isRect(t))throw new Error(r+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!n&&(t.width<0||t.height<0))throw new Error(r+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new na(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new na(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new na(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new na(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.toSquare=function(){var t=this,r=t.x,n=t.y,s=t.width,i=t.height,o=Math.abs(s-i);return s<i&&(r-=o/2,s+=o),i<s&&(n-=o/2,i+=o),new e({x:r,y:n,width:s,height:i})},e.prototype.rescale=function(t){var r=MB(t)?t.width:t,n=MB(t)?t.height:t;return new e({x:this.x*r,y:this.y*n,width:this.width*r,height:this.height*n})},e.prototype.pad=function(t,r){var n=[this.x-t/2,this.y-r/2,this.width+t,this.height+r],s=n[0],i=n[1],o=n[2],l=n[3];return new e({x:s,y:i,width:o,height:l})},e.prototype.clipAtImageBorders=function(t,r){var n=this,s=n.x,i=n.y,o=n.right,l=n.bottom,c=Math.max(s,0),d=Math.max(i,0),u=o-c,h=l-d,m=Math.min(u,t-c),p=Math.min(h,r-d);return new e({x:c,y:d,width:m,height:p}).floor()},e.prototype.shift=function(t,r){var n=this,s=n.width,i=n.height,o=this.x+t,l=this.y+r;return new e({x:o,y:l,width:s,height:i})},e.prototype.padAtBorders=function(t,r){var n=this.width+1,s=this.height+1,i=1,o=1,l=n,c=s,d=this.left,u=this.top,h=this.right,m=this.bottom;return h>r&&(l=-h+r+n,h=r),m>t&&(c=-m+t+s,m=t),d<1&&(c=2-d,d=1),u<1&&(c=2-u,u=1),{dy:o,edy:c,dx:i,edx:l,y:u,ey:m,x:d,ex:h,w:n,h:s}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),zS=function(e){mn(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{left:r,top:n,right:s,bottom:i},o)||this}return t}(zm),wY=function(){function e(t,r,n,s,i){this._imageDims=new xv(i.width,i.height),this._score=t,this._classScore=r,this._className=n,this._box=new zm(s).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new zm(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:r})},e}(),th=function(e){mn(t,e);function t(r,n,s){return e.call(this,r,r,"",n,s)||this}return t.prototype.forSize=function(r,n){var s=e.prototype.forSize.call(this,r,n),i=s.score,o=s.relativeBox,l=s.imageDims;return new t(i,o,l)},t}(wY);function CPe(e,t,r){r===void 0&&(r=!0);var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),s=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=n*s;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function kPe(e){var t=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),n=t.reduce(function(l,c){return c<l?c:l},1/0),s=r.reduce(function(l,c){return c<l?c:l},1/0),i=t.reduce(function(l,c){return l<c?c:l},0),o=r.reduce(function(l,c){return l<c?c:l},0);return new zS(n,s,i,o)}function Py(e,t,r,n){n===void 0&&(n=!0);for(var s=t.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],o=function(){var l=s.pop();i.push(l);for(var c=s,d=[],u=0;u<c.length;u++){var h=c[u],m=e[l],p=e[h];d.push(CPe(m,p,n))}s=s.filter(function(v,g){return d[g]<=r})};s.length>0;)o();return i}function b1(e,t){return kr(function(){var r=t[0],n=t[1],s=t[2],i=Bu(Yb(e.shape.slice(0,3),[1]),r),o=Bu(Yb(e.shape.slice(0,3),[1]),n),l=Bu(Yb(e.shape.slice(0,3),[1]),s),c=ii([i,o,l],3);return di(e,c)})}function _Pe(e,t){return t===void 0&&(t=!1),kr(function(){var r=e.shape.slice(1),n=r[0],s=r[1];if(n===s)return e;var i=Math.abs(n-s),o=Math.round(i*(t?.5:1)),l=n>s?2:1,c=function(p){var v=e.shape.slice();return v[l]=p,Bu(v,0)},d=c(o),u=i-d.shape[l],h=t&&u?c(u):null,m=[h,e,d].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return ii(m,l)})}function GE(e){return 1/(1+Math.exp(-e))}var HT=function(e){mn(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{x:r,y:n,width:s,height:i},o)||this}return t}(zm),EPe=.5,DPe=.43,APe=.45,fw=function(){function e(t,r,n){n===void 0&&(n=new na(0,0));var s=r.width,i=r.height;this._imgDims=new xv(s,i),this._shift=n,this._positions=t.map(function(o){return o.mul(new na(s,i)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new na(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(r){return r.sub(t._shift).div(new na(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new this.constructor(this.relativePositions,{width:t,height:r})},e.prototype.shiftBy=function(t,r){return new this.constructor(this.relativePositions,this._imgDims,new na(t,r))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,r){if(r===void 0&&(r={}),t){var n=t instanceof th?t.box.floor():new zm(t);return this.shiftBy(n.x,n.y).align(null,r)}var s=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},r),i=s.useDlibAlignment,o=s.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[0],n=t[1],s=t[2],i=function(h){return s.sub(h).magnitude()},o=(i(r)+i(n))/2,l=Math.floor(o/APe),c=zT(t),d=Math.floor(Math.max(0,c.x-EPe*l)),u=Math.floor(Math.max(0,c.y-DPe*l));return new HT(d,u,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var r=kPe(this.positions);return r.pad(r.width*t,r.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),TPe=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var r=this.positions;return[r[0],r[1],zT([r[3],r[4]])]},t}(fw),IPe=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(zT)},t}(fw),FB=function(){function e(t,r){this._label=t,this._distance=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+wPe(this.distance)+")":"")},e}(),LB=function(e){mn(t,e);function t(r,n){var s=e.call(this,r)||this;return s._label=n,s}return t.assertIsValidLabeledBox=function(r,n){if(zm.assertIsValidBox(r,n),!fx(r.label))throw new Error(n+" - expected property label ("+r.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(zm),ev=function(){function e(t,r){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(r)||r.some(function(n){return!(n instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var r=t.descriptors.map(function(n){return new Float32Array(n)});return new e(t.label,r)},e}();(function(e){mn(t,e);function t(r,n,s,i){var o=e.call(this,r,n)||this;return o._score=s,o._classScore=i,o}return t.assertIsValidPredictedBox=function(r,n){if(LB.assertIsValidLabeledBox(r,n),!RB(r.score)||!RB(r.classScore))throw new Error(n+" - expected properties score ("+r.score+") and ("+r.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(LB);function PPe(e){return e.detection instanceof th}function WT(e,t){var r={detection:t};return Object.assign({},e,r)}function SY(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function CY(e){var t="";if(!e)try{e=require("fs")}catch(n){t=n.toString()}var r=e?function(n){return new Promise(function(s,i){e.readFile(n,function(o,l){return o?i(o):s(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function kY(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},n=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},s=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=CY();return vo({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:r,createImageElement:n,fetch:s},i)}function _Y(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function EY(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var ai;function OPe(){if(!ai)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ai}function a3(e){ai=e}function GT(){_Y()&&a3(SY()),EY()&&a3(kY())}function MPe(e){if(ai||GT(),!ai)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,r=t===void 0?ai.Canvas:t,n=e.Image,s=n===void 0?ai.Image:n;ai.Canvas=r,ai.Image=s,ai.createCanvasElement=e.createCanvasElement||function(){return new r},ai.createImageElement=e.createImageElement||function(){return new s},ai.ImageData=e.ImageData||ai.ImageData,ai.Video=e.Video||ai.Video,ai.fetch=e.fetch||ai.fetch,ai.readFile=e.readFile||ai.readFile}var _o={getEnv:OPe,setEnv:a3,initialize:GT,createBrowserEnv:SY,createFileSystem:CY,createNodejsEnv:kY,monkeyPatch:MPe,isBrowser:_Y,isNodejs:EY};GT();function DY(e){return!_o.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Ax(e){var t=_o.getEnv(),r=t.Canvas,n=t.CanvasRenderingContext2D;if(e instanceof n)return e;var s=DY(e);if(!(s instanceof r))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=s.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var BB;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(BB||(BB={}));function AY(e){var t=_o.getEnv(),r=t.Image,n=t.Video;return e instanceof r&&e.complete||e instanceof n&&e.readyState>=3}function RPe(e){return new Promise(function(t,r){if(e instanceof _o.getEnv().Canvas||AY(e))return t();function n(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),t(i))}function s(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),r(i))}e.addEventListener("load",n),e.addEventListener("error",s)})}function TY(e){var t=_o.getEnv(),r=t.Image,n=t.Video;return e instanceof r?new xv(e.naturalWidth,e.naturalHeight):e instanceof n?new xv(e.videoWidth,e.videoHeight):new xv(e.width,e.height)}function HS(e){var t=e.width,r=e.height,n=_o.getEnv().createCanvasElement,s=n();return s.width=t,s.height=r,s}function YT(e,t){var r=_o.getEnv().ImageData;if(!(e instanceof r)&&!AY(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var n=TY(e),s=n.width,i=n.height,o=HS({width:s,height:i});return e instanceof r?Ax(o).putImageData(e,0,0):Ax(o).drawImage(e,0,0,s,i),o}function FPe(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l;return Br(this,function(c){switch(c.label){case 0:return r=_o.getEnv().createCanvasElement(),n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=kr(function(){return e.as3D(s,i,o).toInt()}),[4,qT.toPixels(l,r)];case 1:return c.sent(),l.dispose(),[2,r]}})})}function UB(e){var t=_o.getEnv(),r=t.Image,n=t.Canvas,s=t.Video;return e instanceof r||e instanceof n||e instanceof s}function LPe(e,t,r){r===void 0&&(r=!1);var n=_o.getEnv(),s=n.Image,i=n.Canvas;if(!(e instanceof s||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=TY(e),l=t/Math.max(o.height,o.width),c=l*o.width,d=l*o.height,u=HS({width:t,height:t}),h=e instanceof i?e:YT(e),m=Math.abs(c-d)/2,p=r&&c<d?m:0,v=r&&d<c?m:0;return Ax(u).drawImage(h,p,v,c,d),u}var mw=function(){function e(t,r){var n=this;if(r===void 0&&(r=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach(function(s,i){if(qS(s)){n._imageTensors[i]=s,n._inputDimensions[i]=s.shape;return}if(Om(s)){var o=s.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");n._imageTensors[i]=s,n._inputDimensions[i]=s.shape.slice(1);return}var l=s instanceof _o.getEnv().Canvas?s:YT(s);n._canvases[i]=l,n._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Iy(this.batchSize,0,1).map(function(r,n){return t.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var r=this.getInputWidth(t),n=this.getInputHeight(t);return SPe({width:r,height:n},this.inputSize)},e.prototype.toBatchTensor=function(t,r){var n=this;return r===void 0&&(r=!0),this._inputSize=t,kr(function(){var s=Iy(n.batchSize,0,1).map(function(o){var l=n.getInput(o);if(l instanceof os){var c=Om(l)?l:l.expandDims();return c=_Pe(c,r),(c.shape[1]!==t||c.shape[2]!==t)&&(c=FT.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(l instanceof _o.getEnv().Canvas)return qT.fromPixels(LPe(l,t,r));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=Zl(s.map(function(o){return o.toFloat()})).as4D(n.batchSize,t,t,3);return i})},e}();function ki(e){return Lr(this,void 0,void 0,function(){var t,r,n;return Br(this,function(s){switch(s.label){case 0:if(e instanceof mw)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return r=function(i){return Array.isArray(e)?" at input index "+i+":":""},n=t.map(DY),n.forEach(function(i,o){if(!UB(i)&&!qS(i)&&!Om(i))throw typeof t[o]=="string"?new Error("toNetInput -"+r(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+r(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Om(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+r(o)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(n.map(function(i){return UB(i)&&RPe(i)}))];case 1:return s.sent(),[2,new mw(n,Array.isArray(e))]}})})}function KT(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l,c;return Br(this,function(d){switch(d.label){case 0:return r=_o.getEnv().Canvas,n=e,e instanceof r?[3,5]:[4,ki(e)];case 1:if(s=d.sent(),s.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=s.getInput(0),i instanceof r?(o=i,[3,4]):[3,2];case 2:return[4,FPe(i)];case 3:o=d.sent(),d.label=4;case 4:n=o,d.label=5;case 5:return l=Ax(n),c=t.map(function(u){return u instanceof th?u.forSize(n.width,n.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(n.width,n.height)}),[2,c.map(function(u){var h=u.x,m=u.y,p=u.width,v=u.height,g=HS({width:p,height:v});return Ax(g).putImageData(l.getImageData(h,m,p,v),0,0),g})]}})})}function XT(e,t){return Lr(this,void 0,void 0,function(){return Br(this,function(r){if(!qS(e)&&!Om(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Om(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,kr(function(){var n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=t.map(function(d){return d instanceof th?d.forSize(i,s).box:d}).map(function(d){return d.clipAtImageBorders(i,s)}),c=l.map(function(d){var u=d.x,h=d.y,m=d.width,p=d.height;return aY(e.as3D(s,i,o),[h,u,0],[p,m,o])});return c})]})})}function BPe(e,t){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return r=_o.getEnv().fetch,[4,r(e,t)];case 1:if(n=s.sent(),!(n.status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function UPe(e){return Lr(this,void 0,void 0,function(){return Br(this,function(t){switch(t.label){case 0:return[4,BPe(e)];case 1:return[2,t.sent().json()]}})})}function IY(e,t){var r=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+r};var n=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(n,"");var s=e.split("/").filter(function(l){return l}),i=e.endsWith(".json")?s[s.length-1]:r,o=n+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function $Pe(e,t){return Lr(this,void 0,void 0,function(){var r,n,s,i;return Br(this,function(o){switch(o.label){case 0:return r=IY(e,t),n=r.manifestUri,s=r.modelBaseUri,[4,UPe(n)];case 1:return i=o.sent(),[2,jY.loadWeights(i,s)]}})})}var Nf=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var r=this.traversePropertyPath(t),n=r.obj,s=r.objProp;return n[s]},e.prototype.reassignParamFromPath=function(t,r){var n=this.traversePropertyPath(t),s=n.obj,i=n.objProp;s[i].dispose(),s[i]=r},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(r){var n=r.paramPath;return{path:n,tensor:t.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof Lv})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof Lv)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(r){var n=r.path,s=r.tensor;t.reassignParamFromPath(n,s.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(r){var n=r.path,s=r.tensor,i=Hi(s.dataSync());s.dispose(),t.reassignParamFromPath(n,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(r){if(t&&r.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+r.path);r.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var r=t.tensor;return Array.from(r.dataSync())}).reduce(function(t,r){return t.concat(r)}))},e.prototype.load=function(t){return Lr(this,void 0,void 0,function(){return Br(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Lr(this,void 0,void 0,function(){var r;return Br(this,function(n){switch(n.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,$Pe(t,this.getDefaultModelName())];case 1:return r=n.sent(),this.loadFromWeightMap(r),[2]}})})},e.prototype.loadFromDisk=function(t){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Br(this,function(m){switch(m.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return r=_o.getEnv().readFile,n=IY(t,this.getDefaultModelName()),s=n.manifestUri,i=n.modelBaseUri,o=function(p){return Promise.all(p.map(function(v){return r(v).then(function(g){return g.buffer})}))},l=jY.weightsLoaderFactory(o),u=(d=JSON).parse,[4,r(s)];case 1:return c=u.apply(d,[m.sent().toString()]),[4,l(c,i)];case 2:return h=m.sent(),this.loadFromWeightMap(h),[2]}})})},e.prototype.loadFromWeightMap=function(t){var r=this.extractParamsFromWeigthMap(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.extractWeights=function(t){var r=this.extractParams(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var r=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),n=r.obj,s=r.objProp;if(!n||!s||!(n[s]instanceof os))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:s}},e}();function Gl(e,t,r){return kr(function(){var n=IT(e,t.depthwise_filter,t.pointwise_filter,r,"same");return n=In(n,t.bias),n})}function YE(e,t,r){return r===void 0&&(r=!1),kr(function(){var n=us(r?In(Xc(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Gl(e,t.conv0,[2,2])),s=Gl(n,t.conv1,[1,1]),i=us(In(n,s)),o=Gl(i,t.conv2,[1,1]);return us(In(n,In(s,o)))})}function iN(e,t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!0),kr(function(){var s=us(r?In(Xc(e,t.conv0.filters,n?[2,2]:[1,1],"same"),t.conv0.bias):Gl(e,t.conv0,n?[2,2]:[1,1])),i=Gl(s,t.conv1,[1,1]),o=us(In(s,i)),l=Gl(o,t.conv2,[1,1]),c=us(In(s,In(i,l))),d=Gl(c,t.conv3,[1,1]);return us(In(s,In(i,In(l,d))))})}function Ad(e,t,r,n){return r===void 0&&(r="same"),n===void 0&&(n=!1),kr(function(){var s=In(Xc(e,t.filters,[1,1],r),t.bias);return n?us(s):s})}function wf(e,t){Object.keys(e).forEach(function(r){t.some(function(n){return n.originalPath===r})||e[r].dispose()})}function WS(e,t){return function(r,n,s,i){var o=rl(e(r*n*s*s),[s,s,r,n]),l=Js(e(n));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:l}}}function QT(e,t){return function(r,n,s){var i=Im(e(r*n),[r,n]),o=Js(e(n));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:i,bias:o}}}var PY=function(){function e(t,r,n){this.depthwise_filter=t,this.pointwise_filter=r,this.bias=n}return e}();function JT(e,t){return function(r,n,s){var i=rl(e(9*r),[3,3,r,1]),o=rl(e(r*n),[1,1,r,n]),l=Js(e(n));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new PY(i,o,l)}}function ZT(e){return function(t){var r=e(t+"/depthwise_filter",4),n=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new PY(r,n,s)}}function ap(e,t){return function(r,n,s){var i=e[r];if(!VS(i,n))throw new Error("expected weightMap["+r+"] to be a Tensor"+n+"D, instead have "+i);return t.push({originalPath:r,paramPath:s||r}),i}}function Sf(e){var t=e;function r(s){var i=t.slice(0,s);return t=t.slice(s),i}function n(){return t}return{extractWeights:r,getRemainingWeights:n}}function OY(e,t){var r=WS(e,t),n=JT(e,t);function s(o,l,c,d){d===void 0&&(d=!1);var u=d?r(o,l,3,c+"/conv0"):n(o,l,c+"/conv0"),h=n(l,l,c+"/conv1"),m=n(l,l,c+"/conv2");return{conv0:u,conv1:h,conv2:m}}function i(o,l,c,d){d===void 0&&(d=!1);var u=s(o,l,c,d),h=u.conv0,m=u.conv1,p=u.conv2,v=n(l,l,c+"/conv3");return{conv0:h,conv1:m,conv2:p,conv3:v}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function VPe(e){var t=[],r=Sf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),d=i(128,256,"dense3");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c,dense3:d}}}function MY(e){return function(t){var r=e(t+"/filters",4),n=e(t+"/bias",1);return{filters:r,bias:n}}}function RY(e,t){var r=ap(e,t),n=MY(r),s=ZT(r);function i(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2"),m=s(l+"/conv3");return{conv0:d,conv1:u,conv2:h,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function qPe(e){var t=[],r=RY(e,t).extractDenseBlock4Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return wf(e,t),{params:n,paramMappings:t}}var FY=function(e){mn(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceFeatureExtractor - load model before inference");return kr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(jr(255)),l=iN(o,n.dense0,!0);return l=iN(l,n.dense1),l=iN(l,n.dense2),l=iN(l,n.dense3),l=v1(l,[7,7],[2,2],"valid"),l})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(r){return qPe(r)},t.prototype.extractParams=function(r){return VPe(r)},t}(Nf);function Tu(e,t){return kr(function(){return In(BS(e,t.weights),t.bias)})}function zPe(e,t,r){var n=[],s=Sf(e),i=s.extractWeights,o=s.getRemainingWeights,l=QT(i,n),c=l(t,r,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{fc:c}}}function HPe(e){var t=[],r=ap(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:n("fc")};return wf(e,t),{params:s,paramMappings:t}}function LY(e){var t={},r={};return Object.keys(e).forEach(function(n){var s=n.startsWith("fc")?r:t;s[n]=e[n]}),{featureExtractorMap:t,classifierMap:r}}var BY=function(e){mn(t,e);function t(r,n){var s=e.call(this,r)||this;return s._faceFeatureExtractor=n,s}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return kr(function(){var i=r instanceof mw?n.faceFeatureExtractor.forwardInput(r):r;return Tu(i.as2D(i.shape[0],-1),s.fc)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return zPe(r,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),HPe(i)},t.prototype.extractParams=function(r){var n=this.getClassifierChannelsIn(),s=this.getClassifierChannelsOut(),i=s*n+s,o=r.slice(0,r.length-i),l=r.slice(r.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(l)},t}(Nf),$B=["neutral","happy","sad","angry","fearful","disgusted","surprised"],WPe=function(){function e(t){var r=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);$B.forEach(function(n,s){r[n]=t[s]})}return e.prototype.asSortedArray=function(){var t=this;return $B.map(function(r){return{expression:r,probability:t[r]}}).sort(function(r,n){return n.probability-r.probability})},e}(),GPe=function(e){mn(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceExpressionNet",r)||this}return t.prototype.forwardInput=function(r){var n=this;return kr(function(){return yf(n.runNet(r))})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictExpressions=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o,l=this;return Br(this,function(c){switch(c.label){case 0:return[4,ki(r)];case 1:return n=c.sent(),[4,this.forwardInput(n)];case 2:return s=c.sent(),[4,Promise.all(oi(s).map(function(d){return Lr(l,void 0,void 0,function(){var u;return Br(this,function(h){switch(h.label){case 0:return[4,d.data()];case 1:return u=h.sent(),d.dispose(),[2,u]}})})}))];case 3:return i=c.sent(),s.dispose(),o=i.map(function(d){return new WPe(d)}),[2,n.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(BY);function UY(e,t){var r={expressions:t};return Object.assign({},e,r)}function YPe(e){return PPe(e)&&e.landmarks instanceof fw&&e.unshiftedLandmarks instanceof fw&&e.alignedRect instanceof th}function eI(e,t){var r=e.detection.box,n=t.shiftBy(r.x,r.y),s=n.align(),i=e.detection.imageDims,o=new th(e.detection.score,s.rescale(i.reverse()),i),l={landmarks:n,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,l)}function KPe(e,t){var r=WS(e,t),n=JT(e,t);function s(o,l,c){var d=n(o,l,c+"/separable_conv0"),u=n(l,l,c+"/separable_conv1"),h=r(o,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:u,expansion_conv:h}}function i(o,l){var c=n(o,o,l+"/separable_conv0"),d=n(o,o,l+"/separable_conv1"),u=n(o,o,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:n,extractReductionBlockParams:s,extractMainBlockParams:i}}function XPe(e,t){var r=[],n=Sf(e),s=n.extractWeights,i=n.getRemainingWeights,o=KPe(s,r),l=o.extractConvParams,c=o.extractSeparableConvParams,d=o.extractReductionBlockParams,u=o.extractMainBlockParams,h=l(3,32,3,"entry_flow/conv_in"),m=d(32,64,"entry_flow/reduction_block_0"),p=d(64,128,"entry_flow/reduction_block_1"),v={conv_in:h,reduction_block_0:m,reduction_block_1:p},g={};Iy(t,0,1).forEach(function(N){g["main_block_"+N]=u(128,"middle_flow/main_block_"+N)});var b=d(128,256,"exit_flow/reduction_block"),y=c(256,512,"exit_flow/separable_conv"),C={reduction_block:b,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{entry_flow:v,middle_flow:g,exit_flow:C}}}function QPe(e,t){var r=ap(e,t),n=MY(r),s=ZT(r);function i(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=n(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:u}}function o(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=s(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:s,extractReductionBlockParams:i,extractMainBlockParams:o}}function JPe(e,t){var r=[],n=QPe(e,r),s=n.extractConvParams,i=n.extractSeparableConvParams,o=n.extractReductionBlockParams,l=n.extractMainBlockParams,c=s("entry_flow/conv_in"),d=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:d,reduction_block_1:u},m={};Iy(t,0,1).forEach(function(b){m["main_block_"+b]=l("middle_flow/main_block_"+b)});var p=o("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),g={reduction_block:p,separable_conv:v};return wf(e,r),{params:{entry_flow:h,middle_flow:m,exit_flow:g},paramMappings:r}}function $Y(e,t,r){return In(Xc(e,t.filters,r,"same"),t.bias)}function KE(e,t,r){r===void 0&&(r=!0);var n=r?us(e):e;return n=Gl(n,t.separable_conv0,[1,1]),n=Gl(us(n),t.separable_conv1,[1,1]),n=gi(n,[3,3],[2,2],"same"),n=In(n,$Y(e,t.expansion_conv,[2,2])),n}function ZPe(e,t){var r=Gl(us(e),t.separable_conv0,[1,1]);return r=Gl(us(r),t.separable_conv1,[1,1]),r=Gl(us(r),t.separable_conv2,[1,1]),r=In(r,e),r}var eOe=function(e){mn(t,e);function t(r){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=r,n}return t.prototype.forwardInput=function(r){var n=this,s=this.params;if(!s)throw new Error("TinyXception - load model before inference");return kr(function(){var i=r.toBatchTensor(112,!0),o=[122.782,117.001,104.298],l=b1(i,o).div(jr(256)),c=us($Y(l,s.entry_flow.conv_in,[2,2]));return c=KE(c,s.entry_flow.reduction_block_0,!1),c=KE(c,s.entry_flow.reduction_block_1),Iy(n._numMainBlocks,0,1).forEach(function(d){c=ZPe(c,s.middle_flow["main_block_"+d])}),c=KE(c,s.exit_flow.reduction_block),c=us(Gl(c,s.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(r){return JPe(r,this._numMainBlocks)},t.prototype.extractParams=function(r){return XPe(r,this._numMainBlocks)},t}(Nf);function tOe(e){var t=[],r=Sf(e),n=r.extractWeights,s=r.getRemainingWeights,i=QT(n,t),o=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:o,gender:l}}}}function rOe(e){var t=[],r=ap(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:{age:n("fc/age"),gender:n("fc/gender")}};return wf(e,t),{params:s,paramMappings:t}}var pw;(function(e){e.FEMALE="female",e.MALE="male"})(pw||(pw={}));var nOe=function(e){mn(t,e);function t(r){r===void 0&&(r=new eOe(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=r,n}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return kr(function(){var i=r instanceof mw?n.faceFeatureExtractor.forwardInput(r):r,o=v1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=Tu(o,s.fc.age).as1D(),c=Tu(o,s.fc.gender);return{age:l,gender:c}})},t.prototype.forwardInput=function(r){var n=this;return kr(function(){var s=n.runNet(r),i=s.age,o=s.gender;return{age:i,gender:yf(o)}})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictAgeAndGender=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o,l,c,d=this;return Br(this,function(u){switch(u.label){case 0:return[4,ki(r)];case 1:return n=u.sent(),[4,this.forwardInput(n)];case 2:return s=u.sent(),i=oi(s.age),o=oi(s.gender),l=i.map(function(h,m){return{ageTensor:h,genderTensor:o[m]}}),[4,Promise.all(l.map(function(h){var m=h.ageTensor,p=h.genderTensor;return Lr(d,void 0,void 0,function(){var v,g,b,y,C;return Br(this,function(N){switch(N.label){case 0:return[4,m.data()];case 1:return v=N.sent()[0],[4,p.data()];case 2:return g=N.sent()[0],b=g>.5,y=b?pw.MALE:pw.FEMALE,C=b?g:1-g,m.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:C}]}})})}))];case 3:return c=u.sent(),s.age.dispose(),s.gender.dispose(),[2,n.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return tOe(r)},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),rOe(i)},t.prototype.extractParams=function(r){var n=1539,s=r.slice(0,r.length-n),i=r.slice(r.length-n);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(i)},t}(Nf),VY=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(r,n,s){var i=s.map(function(l){var c=l.width,d=l.height,u=n/Math.max(d,c);return{width:c*u,height:d*u}}),o=i.length;return kr(function(){var l=function(m,p){return Zl([Bu([68],m),Bu([68],p)],1).as2D(1,136).as1D()},c=function(m,p){var v=i[m],g=v.width,b=v.height;return p(g,b)?Math.abs(g-b)/2:0},d=function(m){return c(m,function(p,v){return p<v})},u=function(m){return c(m,function(p,v){return v<p})},h=r.mul(Bu([o,136],n)).sub(Zl(Array.from(Array(o),function(m,p){return l(d(p),u(p))}))).div(Zl(Array.from(Array(o),function(m,p){return l(i[p].width,i[p].height)})));return h})},t.prototype.forwardInput=function(r){var n=this;return kr(function(){var s=n.runNet(r);return n.postProcess(s,r.inputSize,r.inputDimensions.map(function(i){var o=i[0],l=i[1];return{height:o,width:l}}))})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.detectLandmarks=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o=this;return Br(this,function(l){switch(l.label){case 0:return[4,ki(r)];case 1:return n=l.sent(),s=kr(function(){return oi(o.forwardInput(n))}),[4,Promise.all(s.map(function(c,d){return Lr(o,void 0,void 0,function(){var u,h,m,p,v;return Br(this,function(g){switch(g.label){case 0:return m=(h=Array).from,[4,c.data()];case 1:return u=m.apply(h,[g.sent()]),p=u.filter(function(b,y){return OB(y)}),v=u.filter(function(b,y){return!OB(y)}),[2,new IPe(Array(68).fill(0).map(function(b,y){return new na(p[y],v[y])}),{height:n.getInputHeight(d),width:n.getInputWidth(d)})]}})})}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(BY),qY=function(e){mn(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceLandmark68Net",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(VY);function aOe(e){var t=[],r=RY(e,t).extractDenseBlock3Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return wf(e,t),{params:n,paramMappings:t}}function sOe(e){var t=[],r=Sf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c}}}var iOe=function(e){mn(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("TinyFaceFeatureExtractor - load model before inference");return kr(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(jr(255)),l=YE(o,n.dense0,!0);return l=YE(l,n.dense1),l=YE(l,n.dense2),l=v1(l,[14,14],[2,2],"valid"),l})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(r){return aOe(r)},t.prototype.extractParams=function(r){return sOe(r)},t}(Nf),oOe=function(e){mn(t,e);function t(r){return r===void 0&&(r=new iOe),e.call(this,"FaceLandmark68TinyNet",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(VY);(function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(qY);function lOe(e,t){return In(So(e,t.weights),t.biases)}function tI(e,t,r,n,s){s===void 0&&(s="same");var i=t.conv,o=i.filters,l=i.bias,c=Xc(e,o,r,s);return c=In(c,l),c=lOe(c,t.scale),n?us(c):c}function cOe(e,t){return tI(e,t,[1,1],!0)}function zY(e,t){return tI(e,t,[1,1],!1)}function HY(e,t){return tI(e,t,[2,2],!0,"valid")}function dOe(e,t){function r(l,c,d){var u=e(l),h=u.length/(c*d*d);if(NPe(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+u.length+", numFilters: "+c+", filterSize: "+d);return kr(function(){return qm(rl(u,[c,h,d,d]),[2,3,1,0])})}function n(l,c,d,u){var h=r(l,c,d),m=Js(e(c));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:h,bias:m}}function s(l,c){var d=Js(e(l)),u=Js(e(l));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:u}}function i(l,c,d,u){var h=n(l,c,d,u+"/conv"),m=s(c,u+"/scale");return{conv:h,scale:m}}function o(l,c,d,u,h){h===void 0&&(h=!1);var m=i((h?.5:1)*l,c,d,u+"/conv1"),p=i(l,c,d,u+"/conv2");return{conv1:m,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function uOe(e){var t=Sf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=dOe(r,s),o=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),u=l(9216,32,3,"conv32_2"),h=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),p=l(36864,64,3,"conv64_1"),v=l(36864,64,3,"conv64_2"),g=l(36864,64,3,"conv64_3"),b=l(147456,128,3,"conv128_down",!0),y=l(147456,128,3,"conv128_1"),C=l(147456,128,3,"conv128_2"),N=l(589824,256,3,"conv256_down",!0),k=l(589824,256,3,"conv256_1"),S=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),E=kr(function(){return qm(Im(r(256*128),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: "+n().length);var T={conv32_down:c,conv32_1:d,conv32_2:u,conv32_3:h,conv64_down:m,conv64_1:p,conv64_2:v,conv64_3:g,conv128_down:b,conv128_1:y,conv128_2:C,conv256_down:N,conv256_1:k,conv256_2:S,conv256_down_out:D,fc:E};return{params:T,paramMappings:s}}function hOe(e,t){var r=ap(e,t);function n(o){var l=r(o+"/scale/weights",1),c=r(o+"/scale/biases",1);return{weights:l,biases:c}}function s(o){var l=r(o+"/conv/filters",4),c=r(o+"/conv/bias",1),d=n(o);return{conv:{filters:l,bias:c},scale:d}}function i(o){return{conv1:s(o+"/conv1"),conv2:s(o+"/conv2")}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function fOe(e){var t=[],r=hOe(e,t),n=r.extractConvLayerParams,s=r.extractResidualLayerParams,i=n("conv32_down"),o=s("conv32_1"),l=s("conv32_2"),c=s("conv32_3"),d=s("conv64_down"),u=s("conv64_1"),h=s("conv64_2"),m=s("conv64_3"),p=s("conv128_down"),v=s("conv128_1"),g=s("conv128_2"),b=s("conv256_down"),y=s("conv256_1"),C=s("conv256_2"),N=s("conv256_down_out"),k=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!jPe(k))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+k);var S={conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:u,conv64_2:h,conv64_3:m,conv128_down:p,conv128_1:v,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:C,conv256_down_out:N,fc:k};return wf(e,t),{params:S,paramMappings:t}}function pu(e,t){var r=cOe(e,t.conv1);return r=zY(r,t.conv2),r=In(r,e),r=us(r),r}function oN(e,t){var r=HY(e,t.conv1);r=zY(r,t.conv2);var n=v1(e,2,2,"valid"),s=Ua(n.shape),i=n.shape[3]!==r.shape[3],o=n.shape[1]!==r.shape[1]||n.shape[2]!==r.shape[2];if(o){var l=Yb(r.shape);l[1]=1;var c=Ua(l);r=ii([r,c],1);var d=Yb(r.shape);d[2]=1;var u=Ua(d);r=ii([r,u],2)}return n=i?ii([n,s],3):n,r=In(n,r),r=us(r),r}var mOe=function(e){mn(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceRecognitionNet - load model before inference");return kr(function(){var s=r.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=b1(s,i).div(jr(256)),l=HY(o,n.conv32_down);l=gi(l,3,2,"valid"),l=pu(l,n.conv32_1),l=pu(l,n.conv32_2),l=pu(l,n.conv32_3),l=oN(l,n.conv64_down),l=pu(l,n.conv64_1),l=pu(l,n.conv64_2),l=pu(l,n.conv64_3),l=oN(l,n.conv128_down),l=pu(l,n.conv128_1),l=pu(l,n.conv128_2),l=oN(l,n.conv256_down),l=pu(l,n.conv256_1),l=pu(l,n.conv256_2),l=oN(l,n.conv256_down_out);var c=l.mean([1,2]),d=BS(c,n.fc);return d})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.computeFaceDescriptor=function(r){return Lr(this,void 0,void 0,function(){var n,s,i,o=this;return Br(this,function(l){switch(l.label){case 0:return[4,ki(r)];case 1:return n=l.sent(),s=kr(function(){return oi(o.forwardInput(n))}),[4,Promise.all(s.map(function(c){return c.data()}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(r){return fOe(r)},t.prototype.extractParams=function(r){return uOe(r)},t}(Nf);function WY(e,t){var r={descriptor:t};return Object.assign({},e,r)}function GY(e,t){var r={age:t};return Object.assign({},e,r)}function YY(e,t,r){var n={gender:t,genderProbability:r};return Object.assign({},e,n)}var KY=function(){function e(t){var r=t===void 0?{}:t,n=r.minFaceSize,s=r.scaleFactor,i=r.maxNumScales,o=r.scoreThresholds,l=r.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=s||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function pOe(e,t){function r(c,d){var u=rl(e(9*c),[3,3,c,1]),h=Js(e(c)),m=Js(e(c)),p=Js(e(c)),v=Js(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:u,batch_norm_scale:h,batch_norm_offset:m,batch_norm_mean:p,batch_norm_variance:v}}function n(c,d,u,h,m){var p=rl(e(c*d*u*u),[u,u,c,d]),v=Js(e(d));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(m?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function s(c,d,u,h){var m=n(c,d,u,h,!0),p=m.filters,v=m.bias;return{filters:p,batch_norm_offset:v}}function i(c,d,u){var h=r(c,u+"/depthwise_conv"),m=s(c,d,1,u+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:m}}function o(){var c=s(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),g=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),C=i(512,512,"mobilenetv1/conv_10"),N=i(512,512,"mobilenetv1/conv_11"),k=i(512,1024,"mobilenetv1/conv_12"),S=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,conv_8:b,conv_9:y,conv_10:C,conv_11:N,conv_12:k,conv_13:S}}function l(){var c=s(1024,256,1,"prediction_layer/conv_0"),d=s(256,512,3,"prediction_layer/conv_1"),u=s(512,128,1,"prediction_layer/conv_2"),h=s(128,256,3,"prediction_layer/conv_3"),m=s(256,128,1,"prediction_layer/conv_4"),p=s(128,256,3,"prediction_layer/conv_5"),v=s(256,64,1,"prediction_layer/conv_6"),g=s(64,128,3,"prediction_layer/conv_7"),b=n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=n(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),C=n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),N=n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),S=n(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=n(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=n(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),L=n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=n(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),O={box_encoding_predictor:b,class_predictor:y},Q={box_encoding_predictor:C,class_predictor:N},z={box_encoding_predictor:k,class_predictor:S},re={box_encoding_predictor:D,class_predictor:E},U={box_encoding_predictor:T,class_predictor:A},X={box_encoding_predictor:L,class_predictor:P};return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,box_predictor_0:O,box_predictor_1:Q,box_predictor_2:z,box_predictor_3:re,box_predictor_4:U,box_predictor_5:X}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function xOe(e){var t=[],r=Sf(e),n=r.extractWeights,s=r.getRemainingWeights,i=pOe(n,t),o=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=o(),d=l(),u=vT(n(5118*4),[1,5118,4]),h={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:h},paramMappings:t}}function vOe(e,t){var r=ap(e,t);function n(d,u,h){var m=r(d+"/Conv2d_"+u+"_pointwise/weights",4,h+"/filters"),p=r(d+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:m,batch_norm_offset:p}}function s(d){var u="mobilenetv1/conv_"+d,h="MobilenetV1/Conv2d_"+d+"_depthwise",m=u+"/depthwise_conv",p=u+"/pointwise_conv",v=r(h+"/depthwise_weights",4,m+"/filters"),g=r(h+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),b=r(h+"/BatchNorm/beta",1,m+"/batch_norm_offset"),y=r(h+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),C=r(h+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:g,batch_norm_offset:b,batch_norm_mean:y,batch_norm_variance:C},pointwise_conv:n("MobilenetV1",d,p)}}function i(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}}function o(d,u){var h=r(d+"/weights",4,u+"/filters"),m=r(d+"/biases",1,u+"/bias");return{filters:h,bias:m}}function l(d){var u=o("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),h=o("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:u,class_predictor:h}}function c(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function gOe(e){var t=[],r=vOe(e,t),n=r.extractMobilenetV1Params,s=r.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!qS(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:n(),prediction_layer:s(),output_layer:{extra_dim:i}};return wf(e,t),{params:o,paramMappings:t}}function bu(e,t,r){return kr(function(){var n=Xc(e,t.filters,r,"same");return n=In(n,t.batch_norm_offset),ET(n,0,6)})}var bOe=.0010000000474974513;function yOe(e,t,r){return kr(function(){var n=LS(e,t.filters,r,"same");return n=qG(n,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,bOe),ET(n,0,6)})}function jOe(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function NOe(e,t){return kr(function(){var r=null,n=bu(e,t.conv_0,[2,2]),s=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(s.forEach(function(i,o){var l=o+1,c=jOe(l);n=yOe(n,i.depthwise_conv,c),n=bu(n,i.pointwise_conv,[1,1]),l===11&&(r=n)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:n,conv11:r}})}function wOe(e,t,r,n,s){var i=e.shape[0],o=Math.min(r,i),l=t.map(function(u,h){return{score:u,boxIndex:h}}).filter(function(u){return u.score>s}).sort(function(u,h){return h.score-u.score}),c=function(u){return u<=n?1:0},d=[];return l.forEach(function(u){if(!(d.length>=o)){for(var h=u.score,m=d.length-1;m>=0;--m){var p=SOe(e,u.boxIndex,d[m]);if(p!==0&&(u.score*=c(p),u.score<=s))break}h===u.score&&d.push(u.boxIndex)}}),d}function SOe(e,t,r){var n=e.arraySync(),s=Math.min(n[t][0],n[t][2]),i=Math.min(n[t][1],n[t][3]),o=Math.max(n[t][0],n[t][2]),l=Math.max(n[t][1],n[t][3]),c=Math.min(n[r][0],n[r][2]),d=Math.min(n[r][1],n[r][3]),u=Math.max(n[r][0],n[r][2]),h=Math.max(n[r][1],n[r][3]),m=(o-s)*(l-i),p=(u-c)*(h-d);if(m<=0||p<=0)return 0;var v=Math.max(s,c),g=Math.max(i,d),b=Math.min(o,u),y=Math.min(l,h),C=Math.max(b-v,0)*Math.max(y-g,0);return C/(m+p-C)}function COe(e){var t=oi(qm(e,[1,0])),r=[di(t[2],t[0]),di(t[3],t[1])],n=[In(t[0],Nd(r[0],jr(2))),In(t[1],Nd(r[1],jr(2)))];return{sizes:r,centers:n}}function kOe(e,t){var r=COe(e),n=r.sizes,s=r.centers,i=oi(qm(t,[1,0])),o=Nd(So(QD(Nd(i[2],jr(5))),n[0]),jr(2)),l=In(So(Nd(i[0],jr(10)),n[0]),s[0]),c=Nd(So(QD(Nd(i[3],jr(5))),n[1]),jr(2)),d=In(So(Nd(i[1],jr(10)),n[1]),s[1]);return qm(Zl([di(l,o),di(d,c),In(l,o),In(d,c)]),[1,0])}function _Oe(e,t,r){return kr(function(){var n=e.shape[0],s=kOe(_d(uv(r.extra_dim,[n,1,1]),[-1,4]),_d(e,[-1,4]));s=_d(s,[n,s.shape[0]/n,4]);var i=BG(zu(t,[0,0,1],[-1,-1,-1])),o=zu(i,[0,0,0],[-1,-1,1]);o=_d(o,[n,o.shape[1]]);var l=oi(s),c=oi(o);return{boxes:l,scores:c}})}function L0(e,t){return kr(function(){var r=e.shape[0],n=_d(Ad(e,t.box_encoding_predictor),[r,-1,1,4]),s=_d(Ad(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:n,classPrediction:s}})}function EOe(e,t,r){return kr(function(){var n=bu(e,r.conv_0,[1,1]),s=bu(n,r.conv_1,[2,2]),i=bu(s,r.conv_2,[1,1]),o=bu(i,r.conv_3,[2,2]),l=bu(o,r.conv_4,[1,1]),c=bu(l,r.conv_5,[2,2]),d=bu(c,r.conv_6,[1,1]),u=bu(d,r.conv_7,[2,2]),h=L0(t,r.box_predictor_0),m=L0(e,r.box_predictor_1),p=L0(s,r.box_predictor_2),v=L0(o,r.box_predictor_3),g=L0(c,r.box_predictor_4),b=L0(u,r.box_predictor_5),y=ii([h.boxPredictionEncoding,m.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding],1),C=ii([h.classPrediction,m.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction,b.classPrediction],1);return{boxPredictions:y,classPredictions:C}})}var y1=function(){function e(t){var r=t===void 0?{}:t,n=r.minConfidence,s=r.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=s||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),XY=function(e){mn(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("SsdMobilenetv1 - load model before inference");return kr(function(){var s=r.toBatchTensor(512,!1).toFloat(),i=di(So(s,jr(.007843137718737125)),jr(1)),o=NOe(i,n.mobilenetv1),l=EOe(o.out,o.conv11,n.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return _Oe(c,d,n.output_layer)})},t.prototype.forward=function(r){return Lr(this,void 0,void 0,function(){var n;return Br(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,ki(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.locateFaces=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Br(this,function(A){switch(A.label){case 0:return s=new y1(n),i=s.maxResults,o=s.minConfidence,[4,ki(r)];case 1:for(l=A.sent(),c=this.forwardInput(l),d=c.boxes,u=c.scores,h=d[0],m=u[0],p=1;p<d.length;p++)d[p].dispose(),u[p].dispose();return b=(g=Array).from,[4,m.data()];case 2:return v=b.apply(g,[A.sent()]),y=.5,C=wOe(h,v,i,y,o),N=l.getReshapedInputDimensions(0),k=l.inputSize,S=k/N.width,D=k/N.height,E=h.arraySync(),T=C.map(function(L){var P=[Math.max(0,E[L][0]),Math.min(1,E[L][2])].map(function(X){return X*D}),O=P[0],Q=P[1],z=[Math.max(0,E[L][1]),Math.min(1,E[L][3])].map(function(X){return X*S}),re=z[0],U=z[1];return new th(v[L],new HT(re,O,U-re,Q-O),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),h.dispose(),m.dispose(),[2,T]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(r){return gOe(r)},t.prototype.extractParams=function(r){return xOe(r)},t}(Nf);(function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(XY);var DOe=.4,AOe=[new na(.738768,.874946),new na(2.42204,2.65704),new na(4.30971,7.04493),new na(10.246,4.59428),new na(12.6868,11.8741)],TOe=[new na(1.603231,2.094468),new na(6.041143,7.080126),new na(2.882459,3.518061),new na(4.266906,5.178857),new na(9.041765,10.66308)],IOe=[117.001,114.697,97.404],POe="tiny_yolov2_model",OOe="tiny_yolov2_separable_conv_model",lN=function(e){return typeof e=="number"};function MOe(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!lN(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return lN(t.x)&&lN(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(lN)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function rI(e){return kr(function(){var t=So(e,jr(.10000000149011612));return In(us(di(e,t)),t)})}function xm(e,t){return kr(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=Xc(r,t.conv.filters,[1,1],"valid"),r=di(r,t.bn.sub),r=So(r,t.bn.truediv),r=In(r,t.conv.bias),rI(r)})}function vm(e,t){return kr(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=IT(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=In(r,t.bias),rI(r)})}function ROe(e,t){var r=WS(e,t);function n(o,l){var c=Js(e(o)),d=Js(e(o));return t.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function s(o,l,c){var d=r(o,l,3,c+"/conv"),u=n(l,c+"/bn");return{conv:d,bn:u}}var i=JT(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function FOe(e,t,r,n){var s=Sf(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=ROe(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams,m;if(t.withSeparableConvs){var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],N=n[6],k=n[7],S=n[8],D=t.isFirstLayerConv2d?d(p,v,3,"conv0"):h(p,v,"conv0"),E=h(v,g,"conv1"),T=h(g,b,"conv2"),A=h(b,y,"conv3"),L=h(y,C,"conv4"),P=h(C,N,"conv5"),O=k?h(N,k,"conv6"):void 0,Q=S?h(k,S,"conv7"):void 0,z=d(S||k||N,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:Q,conv8:z}}else{var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],N=n[6],k=n[7],S=n[8],D=u(p,v,"conv0"),E=u(v,g,"conv1"),T=u(g,b,"conv2"),A=u(b,y,"conv3"),L=u(y,C,"conv4"),P=u(C,N,"conv5"),O=u(N,k,"conv6"),Q=u(k,S,"conv7"),z=d(S,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:Q,conv8:z}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:m,paramMappings:l}}function LOe(e,t){var r=ap(e,t);function n(l){var c=r(l+"/sub",1),d=r(l+"/truediv",1);return{sub:c,truediv:d}}function s(l){var c=r(l+"/filters",4),d=r(l+"/bias",1);return{filters:c,bias:d}}function i(l){var c=s(l+"/conv"),d=n(l+"/bn");return{conv:c,bn:d}}var o=ZT(r);return{extractConvParams:s,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function BOe(e,t){var r=[],n=LOe(e,r),s=n.extractConvParams,i=n.extractConvWithBatchNormParams,o=n.extractSeparableConvParams,l;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;l={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:s("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return wf(e,r),{params:l,paramMappings:r}}var VB;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(VB||(VB={}));var nI=function(){function e(t){var r=t===void 0?{}:t,n=r.inputSize,s=r.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=s||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),QY=function(e){mn(t,e);function t(r){var n=e.call(this,"TinyYolov2")||this;return MOe(r),n._config=r,n}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(r,n){var s=xm(r,n.conv0);return s=gi(s,[2,2],[2,2],"same"),s=xm(s,n.conv1),s=gi(s,[2,2],[2,2],"same"),s=xm(s,n.conv2),s=gi(s,[2,2],[2,2],"same"),s=xm(s,n.conv3),s=gi(s,[2,2],[2,2],"same"),s=xm(s,n.conv4),s=gi(s,[2,2],[2,2],"same"),s=xm(s,n.conv5),s=gi(s,[2,2],[1,1],"same"),s=xm(s,n.conv6),s=xm(s,n.conv7),Ad(s,n.conv8,"valid",!1)},t.prototype.runMobilenet=function(r,n){var s=this.config.isFirstLayerConv2d?rI(Ad(r,n.conv0,"valid",!1)):vm(r,n.conv0);return s=gi(s,[2,2],[2,2],"same"),s=vm(s,n.conv1),s=gi(s,[2,2],[2,2],"same"),s=vm(s,n.conv2),s=gi(s,[2,2],[2,2],"same"),s=vm(s,n.conv3),s=gi(s,[2,2],[2,2],"same"),s=vm(s,n.conv4),s=gi(s,[2,2],[2,2],"same"),s=vm(s,n.conv5),s=gi(s,[2,2],[1,1],"same"),s=n.conv6?vm(s,n.conv6):s,s=n.conv7?vm(s,n.conv7):s,Ad(s,n.conv8,"valid",!1)},t.prototype.forwardInput=function(r,n){var s=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return kr(function(){var o=r.toBatchTensor(n,!1).toFloat();return o=s.config.meanRgb?b1(o,s.config.meanRgb):o,o=o.div(jr(256)),s.config.withSeparableConvs?s.runMobilenet(o,i):s.runTinyYolov2(o,i)})},t.prototype.forward=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,ki(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C=this;return Br(this,function(N){switch(N.label){case 0:return s=new nI(n),i=s.inputSize,o=s.scoreThreshold,[4,ki(r)];case 1:return l=N.sent(),[4,this.forwardInput(l,i)];case 2:return c=N.sent(),d=kr(function(){return oi(c)[0].expandDims()}),u={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),o)];case 3:return h=N.sent(),c.dispose(),d.dispose(),m=h.map(function(k){return k.box}),p=h.map(function(k){return k.score}),v=h.map(function(k){return k.classScore}),g=h.map(function(k){return C.config.classes[k.label]}),b=Py(m.map(function(k){return k.rescale(i)}),p,this.config.iouThreshold,!0),y=b.map(function(k){return new wY(p[k],v[k],g[k],m[k],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(r){return BOe(r,this.config)},t.prototype.extractParams=function(r){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,s=n?n.length:void 0;if(s!==7&&s!==8&&s!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+s+" filterSizes in config");return FOe(r,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A,L,P,O,Q,z,re,U,X,B=this;return Br(this,function(Y){switch(Y.label){case 0:return i=n.width,o=n.height,l=Math.max(i,o),c=l/i,d=l/o,u=r.shape[1],h=this.config.anchors.length,m=kr(function(){var K=r.reshape([u,u,h,B.boxEncodingSize]),ue=K.slice([0,0,0,0],[u,u,h,4]),M=K.slice([0,0,0,4],[u,u,h,1]),V=B.withClassScores?yf(K.slice([0,0,0,5],[u,u,h,B.config.classes.length]),3):jr(0);return[ue,M,V]}),p=m[0],v=m[1],g=m[2],b=[],[4,v.array()];case 1:return y=Y.sent(),[4,p.array()];case 2:C=Y.sent(),N=0,Y.label=3;case 3:if(!(N<u))return[3,12];k=0,Y.label=4;case 4:if(!(k<u))return[3,11];S=0,Y.label=5;case 5:return S<h?(D=GE(y[N][k][S][0]),!s||D>s?(E=(k+GE(C[N][k][S][0]))/u*c,T=(N+GE(C[N][k][S][1]))/u*d,A=Math.exp(C[N][k][S][2])*this.config.anchors[S].x/u*c,L=Math.exp(C[N][k][S][3])*this.config.anchors[S].y/u*d,P=E-A/2,O=T-L/2,Q={row:N,col:k,anchor:S},this.withClassScores?[4,this.extractPredictedClass(g,Q)]:[3,7]):[3,9]):[3,10];case 6:return X=Y.sent(),[3,8];case 7:X={classScore:1,label:0},Y.label=8;case 8:z=X,re=z.classScore,U=z.label,b.push(vo({box:new zS(P,O,P+A,O+L),score:D,classScore:D*re,label:U},Q)),Y.label=9;case 9:return S++,[3,5];case 10:return k++,[3,4];case 11:return N++,[3,3];case 12:return p.dispose(),v.dispose(),g.dispose(),[2,b]}})})},t.prototype.extractPredictedClass=function(r,n){return Lr(this,void 0,void 0,function(){var s,i,o,l;return Br(this,function(c){switch(c.label){case 0:return s=n.row,i=n.col,o=n.anchor,[4,r.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,u){return l[s][i][o][u]}).map(function(d,u){return{classScore:d,label:u}}).reduce(function(d,u){return d.classScore>u.classScore?d:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Nf),UOe=function(e){mn(t,e);function t(r){r===void 0&&(r=!0);var n=this,s=Object.assign({},{withSeparableConvs:r,iouThreshold:DOe,classes:["face"]},r?{anchors:TOe,meanRgb:IOe}:{anchors:AOe,withClassScores:!0});return n=e.call(this,s)||this,n}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new th(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?OOe:POe},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),aI=function(e){mn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._name="TinyFaceDetectorOptions",r}return t}(nI),j1=function(){function e(){}return e.prototype.then=function(t){return Lr(this,void 0,void 0,function(){var r;return Br(this,function(n){switch(n.label){case 0:return r=t,[4,this.run()];case 1:return[2,r.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return Lr(this,void 0,void 0,function(){return Br(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function GS(e,t,r,n,s){return s===void 0&&(s=function(i){var o=i.alignedRect;return o}),Lr(this,void 0,void 0,function(){var i,o,l,c,d;return Br(this,function(u){switch(u.label){case 0:return i=e.map(function(h){return YPe(h)?s(h):h.detection}),l=n,l?[3,5]:t instanceof os?[4,XT(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,KT(t,i)];case 3:c=u.sent(),u.label=4;case 4:l=c,u.label=5;case 5:return o=l,[4,r(o)];case 6:return d=u.sent(),o.forEach(function(h){return h instanceof os&&h.dispose()}),[2,d]}})})}function sI(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i=this;return Br(this,function(o){return[2,GS([e],t,function(l){return Lr(i,void 0,void 0,function(){return Br(this,function(c){return[2,r(l[0])]})})},n,s)]})})}function $Oe(e){return kr(function(){return Zl(oi(e,3).reverse(),3)})}var cN=2,xw=12;function VOe(e,t){var r=WS(e,t),n=QT(e,t);function s(d,u){var h=Js(e(d));return t.push({paramPath:u}),h}function i(d,u,h){h===void 0&&(h=!1);var m=r(d[0],d[1],3,u+"/conv1"),p=s(d[1],u+"/prelu1_alpha"),v=r(d[1],d[2],3,u+"/conv2"),g=s(d[2],u+"/prelu2_alpha"),b=r(d[2],d[3],h?2:3,u+"/conv3"),y=s(d[3],u+"/prelu3_alpha");return{conv1:m,prelu1_alpha:p,conv2:v,prelu2_alpha:g,conv3:b,prelu3_alpha:y}}function o(){var d=i([3,10,16,32],"pnet"),u=r(32,2,1,"pnet/conv4_1"),h=r(32,4,1,"pnet/conv4_2");return vo(vo({},d),{conv4_1:u,conv4_2:h})}function l(){var d=i([3,28,48,64],"rnet",!0),u=n(576,128,"rnet/fc1"),h=s(128,"rnet/prelu4_alpha"),m=n(128,2,"rnet/fc2_1"),p=n(128,4,"rnet/fc2_2");return vo(vo({},d),{fc1:u,prelu4_alpha:h,fc2_1:m,fc2_2:p})}function c(){var d=i([3,32,64,64],"onet"),u=r(64,128,2,"onet/conv4"),h=s(128,"onet/prelu4_alpha"),m=n(1152,256,"onet/fc1"),p=s(256,"onet/prelu5_alpha"),v=n(256,2,"onet/fc2_1"),g=n(256,4,"onet/fc2_2"),b=n(256,10,"onet/fc2_3");return vo(vo({},d),{conv4:u,prelu4_alpha:h,fc1:m,prelu5_alpha:p,fc2_1:v,fc2_2:g,fc2_3:b})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function qOe(e){var t=Sf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=VOe(r,s),o=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,d=o(),u=l(),h=c();if(n().length!==0)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:d,rnet:u,onet:h},paramMappings:s}}function zOe(e,t){var r=ap(e,t);function n(u){var h=r(u+"/weights",4,u+"/filters"),m=r(u+"/bias",1);return{filters:h,bias:m}}function s(u){var h=r(u+"/weights",2),m=r(u+"/bias",1);return{weights:h,bias:m}}function i(u){return r(u,1)}function o(u){var h=n(u+"/conv1"),m=i(u+"/prelu1_alpha"),p=n(u+"/conv2"),v=i(u+"/prelu2_alpha"),g=n(u+"/conv3"),b=i(u+"/prelu3_alpha");return{conv1:h,prelu1_alpha:m,conv2:p,prelu2_alpha:v,conv3:g,prelu3_alpha:b}}function l(){var u=o("pnet"),h=n("pnet/conv4_1"),m=n("pnet/conv4_2");return vo(vo({},u),{conv4_1:h,conv4_2:m})}function c(){var u=o("rnet"),h=s("rnet/fc1"),m=i("rnet/prelu4_alpha"),p=s("rnet/fc2_1"),v=s("rnet/fc2_2");return vo(vo({},u),{fc1:h,prelu4_alpha:m,fc2_1:p,fc2_2:v})}function d(){var u=o("onet"),h=n("onet/conv4"),m=i("onet/prelu4_alpha"),p=s("onet/fc1"),v=i("onet/prelu5_alpha"),g=s("onet/fc2_1"),b=s("onet/fc2_2"),y=s("onet/fc2_3");return vo(vo({},u),{conv4:h,prelu4_alpha:m,fc1:p,prelu5_alpha:v,fc2_1:g,fc2_2:b,fc2_3:y})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function HOe(e){var t=[],r=zOe(e,t),n=r.extractPNetParams,s=r.extractRNetParams,i=r.extractONetParams,o=n(),l=s(),c=i();return wf(e,t),{params:{pnet:o,rnet:l,onet:c},paramMappings:t}}function s3(e,t){var r=t[0],n=t[1];return{height:Math.floor(r*e),width:Math.floor(n*e)}}function WOe(e,t,r){for(var n=r[0],s=r[1],i=xw/e,o=[],l=Math.min(n,s)*i,c=0;l>=12;)o.push(i*Math.pow(t,c)),l=l*t,c+=1;return o}var iI=function(e){mn(t,e);function t(r,n,s,i){return e.call(this,{left:r,top:n,right:s,bottom:i},!0)||this}return t}(zm);function JY(e){return kr(function(){return So(di(e,jr(127.5)),jr(.0078125))})}function vv(e,t){return kr(function(){return In(us(e),So(t,cw(us(cw(e)))))})}function oI(e,t,r){return r===void 0&&(r=!1),kr(function(){var n=Ad(e,t.conv1,"valid");return n=vv(n,t.prelu1_alpha),n=gi(n,r?[2,2]:[3,3],[2,2],"same"),n=Ad(n,t.conv2,"valid"),n=vv(n,t.prelu2_alpha),n=r?n:gi(n,[3,3],[2,2],"valid"),n=Ad(n,t.conv3,"valid"),n=vv(n,t.prelu3_alpha),n})}function GOe(e,t){return kr(function(){var r=oI(e,t,!0),n=Ad(r,t.conv4_1,"valid"),s=Mc(US(n,3),3),i=yf(di(n,s),3),o=Ad(r,t.conv4_2,"valid");return{prob:i,regions:o}})}function YOe(e,t){return kr(function(){var r=s3(t,e.shape.slice(1)),n=r.height,s=r.width,i=FT.resizeBilinear(e,[n,s]),o=JY(i);return qm(o,[0,2,1,3])})}function KOe(e,t,r,n){for(var s=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var l=0;l<e.shape[1];l++)i[o][l]>=n&&s.push(new na(l,o));var c=s.map(function(d){var u=new zS(Math.round((d.y*cN+1)/r),Math.round((d.x*cN+1)/r),Math.round((d.y*cN+xw)/r),Math.round((d.x*cN+xw)/r)),h=i[d.y][d.x],m=t.arraySync(),p=new iI(m[d.y][d.x][0],m[d.y][d.x][1],m[d.y][d.x][2],m[d.y][d.x][3]);return{cell:u,score:h,region:p}});return c}function XOe(e,t,r,n,s){s.stage1=[];var i=t.map(function(m){return kr(function(){var p={scale:m},v=YOe(e,m),g=Date.now(),b=GOe(v,n),y=b.prob,C=b.regions;p.pnet=Date.now()-g;var N=oi(oi(y,3)[1])[0],k=oi(C)[0];return{scoresTensor:N,regionsTensor:k,scale:m,statsForScale:p}})}),o=i.map(function(m){var p=m.scoresTensor,v=m.regionsTensor,g=m.scale,b=m.statsForScale,y=KOe(p,v,g,r);if(p.dispose(),v.dispose(),!y.length)return s.stage1.push(b),[];var C=Date.now(),N=Py(y.map(function(k){return k.cell}),y.map(function(k){return k.score}),.5);return b.nms=Date.now()-C,b.numBoxes=N.length,s.stage1.push(b),N.map(function(k){return y[k]})}),l=o.reduce(function(m,p){return m.concat(p)},[]),c=[],d=[];if(l.length>0){var u=Date.now(),h=Py(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);s.stage1_nms=Date.now()-u,d=h.map(function(m){return l[m].score}),c=h.map(function(m){return l[m]}).map(function(m){var p=m.cell,v=m.region;return new zS(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:c,scores:d}}function ZY(e,t,r){var n=r.width,s=r.height;return Lr(this,void 0,void 0,function(){var i,o,l,c=this;return Br(this,function(d){switch(d.label){case 0:return i=Ax(e),[4,Promise.all(t.map(function(u){return Lr(c,void 0,void 0,function(){var h,m,p,v,g,b,y,C;return Br(this,function(N){return h=u.padAtBorders(e.height,e.width),m=h.y,p=h.ey,v=h.x,g=h.ex,b=v-1,y=m-1,C=i.getImageData(b,y,g-b,p-y),[2,_o.isNodejs()?YT(C):createImageBitmap(C)]})})}))];case 1:return o=d.sent(),l=[],o.forEach(function(u){var h=HS({width:n,height:s}),m=Ax(h);m.drawImage(u,0,0,n,s);for(var p=m.getImageData(0,0,n,s).data,v=[],g=0;g<p.length;g+=4)v.push(p[g+2]),v.push(p[g+1]),v.push(p[g]);l.push(v)}),[2,l.map(function(u){var h=kr(function(){var m=qm(rl(u,[1,n,s,3]),[0,2,1,3]).toFloat();return JY(m)});return h})]}})})}function QOe(e,t){return kr(function(){var r=oI(e,t),n=_d(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Tu(n,t.fc1),i=vv(s,t.prelu4_alpha),o=Tu(i,t.fc2_1),l=Mc(US(o,1),1),c=yf(di(o,l),1),d=Tu(i,t.fc2_2),u=oi(c,1)[1];return{scores:u,regions:d}})}function JOe(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C;return Br(this,function(N){switch(N.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:24,height:24})];case 1:return o=N.sent(),s.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(k){var S=QOe(k,n);return k.dispose(),S}),s.stage2_rnet=Date.now()-i,c=l.length>1?ii(l.map(function(k){return k.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[N.sent()]),c.dispose(),m=d.map(function(k,S){return{score:k,idx:S}}).filter(function(k){return k.score>r}).map(function(k){var S=k.idx;return S}),p=m.map(function(k){return t[k]}),v=m.map(function(k){return d[k]}),g=[],b=[],p.length>0&&(i=Date.now(),y=Py(p,v,.7),s.stage2_nms=Date.now()-i,C=y.map(function(k){var S=l[m[k]].regions.arraySync();return new iI(S[0][0],S[0][1],S[0][2],S[0][3])}),b=y.map(function(k){return v[k]}),g=y.map(function(k,S){return p[k].calibrate(C[S])})),l.forEach(function(k){k.regions.dispose(),k.scores.dispose()}),[2,{boxes:g,scores:b}]}})})}function ZOe(e,t){return kr(function(){var r=oI(e,t);r=gi(r,[2,2],[2,2],"same"),r=Ad(r,t.conv4,"valid"),r=vv(r,t.prelu4_alpha);var n=_d(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Tu(n,t.fc1),i=vv(s,t.prelu5_alpha),o=Tu(i,t.fc2_1),l=Mc(US(o,1),1),c=yf(di(o,l),1),d=Tu(i,t.fc2_2),u=Tu(i,t.fc2_3),h=oi(c,1)[1];return{scores:h,regions:d,points:u}})}function eMe(e,t,r,n,s){return Lr(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,N;return Br(this,function(k){switch(k.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:48,height:48})];case 1:return o=k.sent(),s.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(S){var D=ZOe(S,n);return S.dispose(),D}),s.stage3_onet=Date.now()-i,c=l.length>1?ii(l.map(function(S){return S.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[k.sent()]),c.dispose(),m=d.map(function(S,D){return{score:S,idx:D}}).filter(function(S){return S.score>r}).map(function(S){var D=S.idx;return D}),p=m.map(function(S){var D=l[S].regions.arraySync();return new iI(D[0][0],D[0][1],D[0][2],D[0][3])}),v=m.map(function(S,D){return t[S].calibrate(p[D])}),g=m.map(function(S){return d[S]}),b=[],y=[],C=[],v.length>0&&(i=Date.now(),N=Py(v,g,.7,!1),s.stage3_nms=Date.now()-i,b=N.map(function(S){return v[S]}),y=N.map(function(S){return g[S]}),C=N.map(function(S,D){return Array(5).fill(0).map(function(E,T){var A=l[S].points.arraySync();return new na(A[0][T]*(b[D].width+1)+b[D].left,A[0][T+5]*(b[D].height+1)+b[D].top)})})),l.forEach(function(S){S.regions.dispose(),S.scores.dispose(),S.points.dispose()}),[2,{boxes:b,scores:y,points:C}]}})})}var tMe=function(e){mn(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(r){return Lr(this,void 0,void 0,function(){return Br(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,r)]})})},t.prototype.loadFromDisk=function(r){return Lr(this,void 0,void 0,function(){return Br(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,r)]})})},t.prototype.forwardInput=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T;return Br(this,function(A){switch(A.label){case 0:if(s=this.params,!s)throw new Error("Mtcnn - load model before inference");if(i=r.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},l=Date.now(),c=kr(function(){return $Oe(Mc(qT.fromPixels(i)).toFloat())}),d=function(L){return c.dispose(),o.total=Date.now()-l,L},u=c.shape.slice(1),h=u[0],m=u[1],p=new KY(n),v=p.minFaceSize,g=p.scaleFactor,b=p.maxNumScales,y=p.scoreThresholds,C=p.scaleSteps,N=(C||WOe(v,g,[h,m])).filter(function(L){var P=s3(L,[h,m]);return Math.min(P.width,P.height)>xw}).slice(0,b),o.scales=N,o.pyramid=N.map(function(L){return s3(L,[h,m])}),k=Date.now(),[4,XOe(c,N,y[0],s.pnet,o)];case 1:return S=A.sent(),o.total_stage1=Date.now()-k,S.boxes.length?(o.stage2_numInputBoxes=S.boxes.length,k=Date.now(),[4,JOe(i,S.boxes,y[1],s.rnet,o)]):[2,d({results:[],stats:o})];case 2:return D=A.sent(),o.total_stage2=Date.now()-k,D.boxes.length?(o.stage3_numInputBoxes=D.boxes.length,k=Date.now(),[4,eMe(i,D.boxes,y[2],s.onet,o)]):[2,d({results:[],stats:o})];case 3:return E=A.sent(),o.total_stage3=Date.now()-k,T=E.boxes.map(function(L,P){return eI(WT({},new th(E.scores[P],new HT(L.left/m,L.top/h,L.width/m,L.height/h),{height:h,width:m})),new TPe(E.points[P].map(function(O){return O.sub(new na(L.left,L.top)).div(new na(L.width,L.height))}),{width:L.width,height:L.height}))}),[2,d({results:T,stats:o})]}})})},t.prototype.forward=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,ki(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(r,n){return n===void 0&&(n={}),Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,ki(r)];case 1:return[2,s.apply(this,[i.sent(),n])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(r){return HOe(r)},t.prototype.extractParams=function(r){return qOe(r)},t}(Nf),rMe=.4,nMe=[new na(1.603231,2.094468),new na(6.041143,7.080126),new na(2.882459,3.518061),new na(4.266906,5.178857),new na(9.041765,10.66308)],aMe=[117.001,114.697,97.404],sMe=function(e){mn(t,e);function t(){var r=this,n={withSeparableConvs:!0,iouThreshold:rMe,classes:["face"],anchors:nMe,meanRgb:aMe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r=e.call(this,n)||this,r}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Lr(this,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new th(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),Si={ssdMobilenetv1:new XY,tinyFaceDetector:new sMe,tinyYolov2:new UOe,mtcnn:new tMe,faceLandmark68Net:new qY,faceLandmark68TinyNet:new oOe,faceRecognitionNet:new mOe,faceExpressionNet:new GPe,ageGenderNet:new nOe},eK=function(e){mn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),lI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s=this;return Br(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Lr(s,void 0,void 0,function(){return Br(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Si.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){return UY(o,n[l])})]}})})},t.prototype.withAgeAndGender=function(){return new hI(this,this.input)},t}(eK),cI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Si.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return n=s.sent(),[2,UY(r,n)]}})})},t.prototype.withAgeAndGender=function(){return new fI(this,this.input)},t}(eK),dI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(lI),uI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(cI),tK=function(e){mn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),hI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s=this;return Br(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Lr(s,void 0,void 0,function(){return Br(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Si.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){var c=n[l],d=c.age,u=c.gender,h=c.genderProbability;return GY(YY(o,u,h),d)})]}})})},t.prototype.withFaceExpressions=function(){return new lI(this,this.input)},t}(tK),fI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o;return Br(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?[4,sI(r,this.input,function(c){return Si.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return n=l.sent(),s=n.age,i=n.gender,o=n.genderProbability,[2,GY(YY(r,i,o),s)]}})})},t.prototype.withFaceExpressions=function(){return new cI(this,this.input)},t}(tK),mI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(hI),pI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(fI),rK=function(e){mn(t,e);function t(r,n){var s=e.call(this)||this;return s.parentTask=r,s.input=n,s}return t}(j1),xI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),[4,GS(r,this.input,function(i){return Promise.all(i.map(function(o){return Si.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return n=s.sent(),[2,n.map(function(i,o){return WY(r[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t}(rK),vI=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Si.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return n=s.sent(),[2,WY(r,n)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t}(rK),nK=function(e){mn(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.useTinyLandmarkNet=s,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Si.faceLandmark68TinyNet:Si.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(j1),iMe=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Br(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return r=c.sent(),n=r.map(function(d){return d.detection}),this.input instanceof os?[4,XT(this.input,n)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,KT(this.input,n)];case 4:i=c.sent(),c.label=5;case 5:return s=i,[4,Promise.all(s.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return o=c.sent(),s.forEach(function(d){return d instanceof os&&d.dispose()}),[2,r.map(function(d,u){return eI(d,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(nK),oMe=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i,o;return Br(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?(n=r.detection,this.input instanceof os?[4,XT(this.input,[n])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,KT(this.input,[n])];case 4:i=l.sent(),l.label=5;case 5:return s=i,[4,this.landmarkNet.detectLandmarks(s[0])];case 6:return o=l.sent(),s.forEach(function(c){return c instanceof os&&c.dispose()}),[2,eI(r,o)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(nK),aK=function(e){mn(t,e);function t(r,n){n===void 0&&(n=new y1);var s=e.call(this)||this;return s.input=r,s.options=n,s}return t}(j1),sK=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n,s,i;return Br(this,function(o){switch(o.label){case 0:return r=this,n=r.input,s=r.options,s instanceof KY?[4,Si.mtcnn.forward(n,s)]:[3,2];case 1:return[2,o.sent().map(function(l){return l.detection})];case 2:if(i=s instanceof aI?function(l){return Si.tinyFaceDetector.locateFaces(l,s)}:s instanceof y1?function(l){return Si.ssdMobilenetv1.locateFaces(l,s)}:s instanceof nI?function(l){return Si.tinyYolov2.locateFaces(l,s)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(n)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var r=this;return new Promise(function(n){return Lr(r,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s.map(function(o){return WT({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new iMe(this.runAndExtendWithFaceDetections(),this.input,r)},t.prototype.withFaceExpressions=function(){return new lI(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new hI(this.runAndExtendWithFaceDetections(),this.input)},t}(aK),lMe=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Lr(this,void 0,void 0,function(){var r,n;return Br(this,function(s){switch(s.label){case 0:return[4,new sK(this.input,this.options)];case 1:return r=s.sent(),n=r[0],r.forEach(function(i){i.score>n.score&&(n=i)}),[2,n]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var r=this;return new Promise(function(n){return Lr(r,void 0,void 0,function(){var s;return Br(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s?WT({},s):void 0)]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new oMe(this.runAndExtendWithFaceDetection(),this.input,r)},t.prototype.withFaceExpressions=function(){return new cI(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new fI(this.runAndExtendWithFaceDetection(),this.input)},t}(aK);function cMe(e,t){return t===void 0&&(t=new y1),new lMe(e,t)}function dMe(e,t){return t===void 0&&(t=new y1),new sK(e,t)}function uMe(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var r=Array.from(e),n=Array.from(t);return Math.sqrt(r.map(function(s,i){return s-n[i]}).reduce(function(s,i){return s+Math.pow(i,2)},0))}var iK=function(){function e(t,r){r===void 0&&(r=.6),this._distanceThreshold=r;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var s=1,i=function(){return"person "+s++};this._labeledDescriptors=n.map(function(o){if(o instanceof ev)return o;if(o instanceof Float32Array)return new ev(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new ev(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,r){return r.map(function(n){return uMe(n,t)}).reduce(function(n,s){return n+s},0)/(r.length||1)},e.prototype.matchDescriptor=function(t){var r=this;return this.labeledDescriptors.map(function(n){var s=n.descriptors,i=n.label;return new FB(i,r.computeMeanDistance(t,s))}).reduce(function(n,s){return n.distance<s.distance?n:s})},e.prototype.findBestMatch=function(t){var r=this.matchDescriptor(t);return r.distance<this.distanceThreshold?r:new FB("unknown",r.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var r=t.labeledDescriptors.map(function(n){return ev.fromJSON(n)});return new e(r,t.distanceThreshold)},e}();const hMe=()=>{const e=w.useRef(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState(null),[d,u]=w.useState(!1),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[g,b]=w.useState(null),[y,C]=w.useState(!1),[N,k]=w.useState(0);w.useEffect(()=>{const O=document.createElement("link");O.href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css",O.rel="stylesheet",document.head.appendChild(O);const Q=document.createElement("link");Q.href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css",Q.rel="stylesheet",document.head.appendChild(Q);const z=document.createElement("script");z.src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js",document.head.appendChild(z),D()},[]);const S=async()=>{try{console.log("Starting camera...");const O={video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}},Q=await navigator.mediaDevices.getUserMedia(O);e.current&&(e.current.srcObject=Q,e.current.onloadedmetadata=()=>{C(!0),console.log("Camera ready")})}catch(O){console.error("Camera access error:",O),alert("Camera access denied or not available")}},D=async()=>{try{console.log("Loading face-api models..."),k(10),await Promise.all([Si.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),Si.faceLandmark68Net.loadFromUri("/models/face_landmark_68"),Si.faceRecognitionNet.loadFromUri("/models/face_recognition")]),k(100),console.log("Models loaded successfully"),u(!0),S()}catch(O){console.error("Error loading models:",O),alert("Error loading face recognition models. Check console for details.")}},E=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}try{v(!0),console.log("Fetching employee by ID...");const O=await fetch(`/api/attendance/employee/${t.trim()}`);if(!O.ok){if(O.status===404){alert("Employee not found with this ID"),o(""),s("");return}throw new Error(`HTTP error! status: ${O.status}`)}const Q=await O.json();o(Q.name),s(Q.name),alert(`Employee found: ${Q.name}`)}catch(O){console.error("Error fetching employee:",O),alert("Error fetching employee details. Please try again."),o(""),s("")}finally{v(!1)}},T=async O=>{try{m(!0),console.log("Checking for duplicate faces...");const z=await(await fetch("/api/attendance/employees")).json();if(z.length===0)return b({isDuplicate:!1,message:"No existing employees to compare with."}),!1;const re=z.map(B=>{const Y=B.descriptor.map(ue=>parseFloat(ue)),K=new Float32Array(Y);return new ev(B._id,[K])}),X=new iK(re,.5).findBestMatch(new Float32Array(O));if(console.log("Duplicate check result:",X.label,"Distance:",X.distance),X.label!=="unknown"){const B=z.find(K=>K._id===X.label),Y=(100-X.distance*100).toFixed(1);return b({isDuplicate:!0,employeeName:B.name,similarity:Y,message:` Face matches existing employee: ${B.name} (${Y}% similarity)`}),!0}else return b({isDuplicate:!1,message:` No duplicate found. Face is unique (closest match: ${(100-X.distance*100).toFixed(1)}% similarity)`}),!1}catch(Q){return console.error("Error checking duplicates:",Q),b({isDuplicate:!1,message:" Could not check for duplicates. Proceeding anyway."}),!1}finally{m(!1)}},A=async()=>{if(!d){alert("Models are still loading, please wait...");return}if(!y||!e.current){alert("Camera not ready");return}try{console.log("Capturing face...");const O=await cMe(e.current,new aI).withFaceLandmarks().withFaceDescriptor();if(O){const Q=Array.from(O.descriptor);c(Q),console.log("Face captured successfully. Checking for duplicates...");const z=await T(Q);alert(z?" Warning: This face appears to match an existing employee. Please check the details below.":"Face captured successfully! No duplicate found. You can now register.")}else alert("No face detected. Please make sure your face is clearly visible and try again."),b(null)}catch(O){console.error("Face detection error:",O),alert("Error detecting face. Please try again."),b(null)}},L=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}if(!n.trim()){alert("Please fetch employee name using Employee ID");return}if(!l){alert("Please capture face first");return}if(!(g&&g.isDuplicate&&!window.confirm(` WARNING: This face matches existing employee "${g.employeeName}" with ${g.similarity}% similarity.

Are you sure you want to register this person as a new employee?

Click OK to proceed anyway, or Cancel to stop.`)))try{console.log("Registering employee...");const O=document.createElement("canvas");O.width=e.current.videoWidth,O.height=e.current.videoHeight,O.getContext("2d").drawImage(e.current,0,0);const z=O.toDataURL("image/png"),re=await fetch("/api/attendance/employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:t.trim(),name:n.trim(),descriptor:l})});if(!re.ok){const B=await re.json();throw new Error(B.error||"Registration failed")}const U=await re.json();alert(` Employee "${n.trim()}" registered successfully!`);const X=e.current.srcObject;X&&(X.getTracks().forEach(Y=>Y.stop()),e.current.srcObject=null),r(""),s(""),o(""),c(null),b(null),C(!1)}catch(O){console.error("Registration error:",O),alert(`Registration failed: ${O.message}`)}},P=async()=>{try{e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(z=>z.stop()),c(null),b(null),C(!1),await S()}catch(O){console.error("Error restarting camera:",O),alert("Error restarting camera")}};return a.jsx("div",{className:"container-fluid min-vh-100",style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:a.jsxs("div",{className:"container py-5",children:[a.jsxs("div",{className:"text-center mb-5",children:[a.jsx("h1",{className:"display-4 fw-bold text-dark mb-3",children:"Employee Face Registration"}),a.jsx("p",{className:"lead text-muted",children:"Register employee faces for attendance tracking"})]}),a.jsx("div",{className:"card shadow-lg border-0 rounded-4 overflow-hidden",children:a.jsxs("div",{className:"card-body p-5",children:[a.jsxs("div",{className:"row g-5",children:[a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Camera Feed"})}),!d&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"progress",style:{height:"8px"},children:a.jsx("div",{className:"progress-bar bg-primary progress-bar-animated progress-bar-striped",style:{width:`${N}%`}})}),a.jsxs("p",{className:"text-center text-muted small mt-2",children:["Loading models... ",N,"%"]})]}),a.jsx("div",{className:"position-relative mb-4",children:a.jsxs("div",{className:"card border-3 border-secondary rounded-3 overflow-hidden shadow",children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100",style:{height:"320px",objectFit:"cover",backgroundColor:"#f8f9fa"}}),!y&&d&&a.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary mb-2",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"text-muted mb-0",children:"Starting camera..."})]})})]})}),a.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[a.jsx("button",{onClick:A,disabled:!d||!y||h,className:`btn btn-lg fw-semibold px-4 ${d&&y&&!h?"btn-primary shadow":"btn-secondary"}`,children:d?y?h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-camera-fill me-2"}),"Capture & Check"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Camera Starting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading Models..."]})}),a.jsxs("button",{onClick:P,className:"btn btn-outline-info btn-lg fw-semibold px-4",children:[a.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Restart Camera"]})]})]}),a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Employee Details"})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee ID"}),a.jsxs("div",{className:"input-group input-group-lg",children:[a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Employee ID",value:t,onChange:O=>r(O.target.value)}),a.jsx("button",{onClick:E,disabled:p||!t.trim(),className:`btn ${!p&&t.trim()?"btn-success":"btn-secondary"} fw-semibold`,type:"button",children:p?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Fetching..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-search me-2"}),"Fetch"]})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee Name"}),a.jsx("input",{type:"text",className:"form-control form-control-lg bg-light",value:n,readOnly:!0,placeholder:"Name will be fetched automatically"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("button",{onClick:L,disabled:!t.trim()||!n.trim()||!l||h,className:`btn btn-lg w-100 fw-bold py-3 ${t.trim()&&n.trim()&&l&&!h?g&&g.isDuplicate?"btn-danger":"btn-success":"btn-secondary"} shadow`,children:g&&g.isDuplicate?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Register Anyway "]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-person-plus me-2"}),"Register Employee"]})})}),a.jsxs("div",{className:"mb-4",children:[!d&&a.jsxs("div",{className:"alert alert-info d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Loading face recognition models..."})]}),d&&!y&&a.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Starting camera..."})]}),d&&y&&!l&&a.jsxs("div",{className:"alert alert-primary mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-check-circle me-2"}),"Ready - Enter Employee ID and capture face"]}),l&&!g&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking for duplicates..."]}),l&&g&&!g.isDuplicate&&a.jsxs("div",{className:"alert alert-success mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Face verified unique, ready to register"]}),l&&g&&g.isDuplicate&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Potential duplicate detected"]})]})]})]}),g&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:`alert ${g.isDuplicate?"alert-warning border-warning":"alert-success border-success"} border-3`,children:[a.jsxs("h5",{className:`alert-heading fw-bold ${g.isDuplicate?"text-warning":"text-success"}`,children:[a.jsx("i",{className:`bi ${g.isDuplicate?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),"Duplicate Check Result"]}),a.jsx("p",{className:"mb-2 fw-semibold",children:g.message}),g.isDuplicate&&a.jsxs("p",{className:"mb-0 small",children:[a.jsx("i",{className:"bi bi-info-circle me-1"}),"Proceeding will register this person as a separate employee, which may cause recognition issues."]})]})}),a.jsx("div",{className:"mt-5",children:a.jsx("div",{className:"card bg-light border-0",children:a.jsxs("div",{className:"card-body p-4",children:[a.jsxs("h5",{className:"card-title fw-bold text-dark mb-3",children:[a.jsx("i",{className:"bi bi-info-circle me-2"}),"Registration Instructions"]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("ul",{className:"list-unstyled",children:[a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Enter valid Employee ID"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Click Fetch to get employee name"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Position face clearly in camera"]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("ul",{className:"list-unstyled",children:[a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Ensure good lighting"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Capture face and check duplicates"]}),a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-dot text-primary fs-4 me-1"}),"Register only if no duplicates"]})]})})]})]})})})]})})]})})},fMe=()=>{const e=w.useRef(),t=w.useRef(),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(!1),[C,N]=w.useState(!1),k=w.useRef(),S=w.useRef(),D=w.useRef(!1);w.useEffect(()=>(T().then(()=>{A(),O()}),()=>{E()}),[]),w.useEffect(()=>(u&&o&&s&&m!=="completed"&&!C&&U(),()=>{k.current&&clearInterval(k.current)}),[u,o,s,m,C]);const E=()=>{k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(Y=>Y.stop()),S.current=null)},T=async()=>{try{console.log("Loading face recognition models..."),await Promise.all([Si.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),Si.faceLandmark68Net.loadFromUri("/models/face_landmark_68"),Si.faceRecognitionNet.loadFromUri("/models/face_recognition")]),console.log("Models loaded successfully"),l(!0)}catch(Y){console.error("Error loading models:",Y),alert("Error loading face recognition models. Check console for details.")}},A=async()=>{try{console.log("Starting camera...");const Y=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}}});S.current=Y,e.current&&(e.current.srcObject=Y,e.current.addEventListener("loadedmetadata",()=>{t.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight,h(!0),N(!1),console.log("Camera ready, starting automatic face recognition..."))}))}catch(Y){console.error("Camera access error:",Y),alert("Camera access denied or not available")}},L=()=>{console.log("Stopping camera..."),k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(Y=>{Y.stop(),console.log("Video track stopped")}),S.current=null),e.current&&(e.current.srcObject=null),t.current&&t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),h(!1),N(!0),y(!1),D.current=!1,console.log("Camera stopped successfully")},P=async()=>{console.log("Restarting camera..."),L(),p(null),g(null),y(!1),D.current=!1,setTimeout(()=>{A()},1e3)},O=async()=>{try{d(!0),console.log("Loading registered employees...");const Y=await Oe.get("/api/attendance/employees");if(console.log(`Found ${Y.data.length} registered employees`),Y.data.length===0){d(!1);return}const K=Y.data.map(ue=>{console.log(`Loading employee: ${ue.name}, descriptor length: ${ue.descriptor.length}`);const M=ue.descriptor.map(W=>parseFloat(W)),V=new Float32Array(M);return new ev(ue._id,[V])});console.log("Created labeled descriptors for",K.length,"employees"),i(new iK(K,.6)),n(Y.data),console.log("Face matcher initialized successfully"),d(!1)}catch(Y){console.error("Error loading employees:",Y),alert("Error loading registered employees"),d(!1)}},Q=async(Y,K,ue)=>{if(!(D.current||b))try{y(!0),D.current=!0,console.log(`Auto-capturing attendance for ${K}...`);const M=await Oe.post("/api/attendance/auto",{employeeId:Y});g({...M.data.attendance,confidence:ue,type:M.data.type,workingSummary:M.data.workingSummary,employeeName:K}),M.data.type==="IN"?(alert(` Welcome ${K}!
IN time recorded`),p("in"),setTimeout(()=>{D.current=!1,y(!1)},1e4)):M.data.type==="OUT"?(alert(` SEE YOU TOMM${K}!
OUT time recorded`),p("completed"),setTimeout(()=>{L(),console.log("Attendance completed - Camera stopped automatically")},3e3)):M.data.type==="COMPLETED"&&(alert(` Hello ${K}!
Your attendance is already complete for today.
${M.data.workingSummary}`),p("completed"),setTimeout(()=>{L(),console.log("Attendance already completed - Camera stopped automatically")},3e3))}catch(M){console.error("Auto attendance error:",M),M.response&&M.response.data?alert(` Error: ${M.response.data.error}`):alert(` Failed to mark attendance for ${K}. Please try again.`),setTimeout(()=>{D.current=!1,y(!1)},8080)}},z=(Y,K)=>{const ue=K.getContext("2d");ue.clearRect(0,0,K.width,K.height),Y&&Y.length>0&&Y.forEach(M=>{const{box:V,label:W,distance:ee,employeeId:te}=M;if(W!=="unknown"&&!D.current&&!b&&m!=="completed"){const ie=(100-ee*100).toFixed(1);ie>60&&Q(te,W,ie)}const ne=.4,se=V.width*(1-ne),oe=V.height*(1-ne),G=V.x+(V.width-se)/2,ce=V.y+(V.height-oe)/2;ue.strokeStyle=W==="unknown"?"#ff0000":"#00ff00",ue.lineWidth=2,ue.strokeRect(G,ce,se,oe);const Z=W==="unknown"?"Unknown":W;`${(100-ee*100).toFixed(1)}`;const je=`${Z} ${b?" (Capturing...)":""}`;ue.font="14px Arial",ue.fillStyle=W==="unknown"?"#ff0000":b?"#ff8c00":"#00ff00";const de=ue.measureText(je).width+10;ue.fillRect(G,ce-25,de,25),ue.fillStyle="#ffffff",ue.fillText(je,G+5,ce-8)})},re=async()=>{if(!(!e.current||!t.current||!o||!s||C))try{const K=(await dMe(e.current,new aI).withFaceLandmarks().withFaceDescriptors()).map(ue=>{const M=s.findBestMatch(ue.descriptor),V=M.label!=="unknown"?r.find(W=>W._id===M.label):null;return{box:ue.detection.box,label:V?V.name:"unknown",employeeId:M.label!=="unknown"?M.label:null,distance:M.distance}});z(K,t.current)}catch(Y){console.error("Real-time detection error:",Y)}},U=()=>{k.current&&clearInterval(k.current),k.current=setInterval(re,1e3),console.log("Real-time detection with auto-capture started")},X=()=>C&&m==="completed"?" Attendance Complete - Camera Stopped":C?" Camera Stopped":m==="completed"?" Attendance Complete for Today":m==="in"?" Checked IN - Show your face again to mark OUT time":b?" Capturing attendance...":" Ready for automatic attendance capture",B=()=>C?"#6c757d":m==="completed"?"#28a745":m==="in"?"#007bff":b?"#ff8c00":"#17a2b8";return a.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[a.jsx("h2",{children:" Smart Attendance System"}),a.jsx("div",{style:{margin:"20px 0",position:"relative",display:"inline-block"},children:C?a.jsx("div",{style:{width:"400px",height:"300px",border:"2px solid #6c757d",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:m==="completed"?"#d4edda":"#f8f9fa",color:m==="completed"?"#155724":"#495057",fontSize:"16px",fontWeight:"bold",textAlign:"center",padding:"20px",boxSizing:"border-box"},children:m==="completed"?a.jsxs(a.Fragment,{children:[a.jsx("div",{children:" Attendance Completed!"}),a.jsx("div",{style:{fontSize:"14px",marginTop:"10px"},children:" Camera Stopped"}),v&&v.workingSummary&&a.jsxs("div",{style:{fontSize:"14px",fontWeight:"normal",marginTop:"10px",lineHeight:"1.4"},children:[" ",v.employeeName,a.jsx("br",{})," ",v.workingSummary]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{children:" Camera Stopped"}),a.jsx("div",{style:{fontSize:"14px",marginTop:"10px",fontWeight:"normal"},children:'Click "Start Camera" to resume'})]})}):a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,width:"400",height:"300",style:{border:"2px solid #ccc",borderRadius:"8px"}}),a.jsx("canvas",{ref:t,width:"400",height:"300",style:{position:"absolute",top:0,left:0,pointerEvents:"none",borderRadius:"8px"}}),b&&a.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",background:"rgba(255, 140, 0, 0.9)",color:"white",padding:"5px 10px",borderRadius:"15px",fontSize:"12px",fontWeight:"bold"},children:" Capturing..."})]})}),a.jsx("div",{style:{margin:"20px 0",padding:"10px",backgroundColor:B(),color:"white",borderRadius:"6px",fontSize:"16px",fontWeight:"bold"},children:X()}),v&&a.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:[a.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Last Attendance Record"}),a.jsxs("div",{style:{textAlign:"left",fontSize:"14px",color:"#6c757d"},children:[a.jsx("strong",{children:"Employee:"})," ",v.employeeName,a.jsx("br",{}),a.jsx("strong",{children:"Type:"})," ",v.type==="IN"?" Check IN":v.type==="OUT"?" Check OUT":" Already Complete",a.jsx("br",{}),v.inTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"IN Time:"})," ",new Date(v.inTime).toLocaleString(),a.jsx("br",{})]}),v.outTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"OUT Time:"})," ",new Date(v.outTime).toLocaleString(),a.jsx("br",{})]}),v.workingSummary&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Working Hours:"})," ",v.workingSummary,a.jsx("br",{})]})]})]}),a.jsx("div",{style:{margin:"20px 0"},children:C?a.jsxs("div",{children:[a.jsx("button",{onClick:P,style:{padding:"15px 30px",fontSize:"18px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginRight:"10px"},children:" Start Camera"}),a.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"15px 30px",fontSize:"18px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:" New Session"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:O,disabled:c,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer",marginRight:"10px"},children:c?"Loading...":" Refresh Employee List"}),a.jsx("button",{onClick:L,style:{padding:"10px 20px",fontSize:"14px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:" Stop Camera"})]})}),a.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:C?a.jsx("div",{children:m==="completed"?a.jsx("p",{style:{color:"#28a745",fontSize:"16px",fontWeight:"bold"},children:" Daily attendance completed successfully! Camera stopped for privacy."}):a.jsx("p",{style:{color:"#6c757d",fontSize:"16px"},children:' Camera is stopped. Click "Start Camera" to resume attendance monitoring.'})}):a.jsxs(a.Fragment,{children:[!o&&a.jsx("p",{children:" Loading face recognition models..."}),o&&c&&a.jsx("p",{children:" Loading registered employees..."}),o&&!u&&a.jsx("p",{children:" Starting camera..."}),o&&!c&&r.length===0&&a.jsx("p",{style:{color:"orange"},children:" No employees registered. Please register employees first."}),o&&!c&&r.length>0&&u&&a.jsxs("p",{style:{color:"green"},children:[" Auto-capture ready (",r.length," employees registered)"]}),u&&o&&s&&a.jsx("p",{style:{color:"#17a2b8"},children:" Auto-attendance active - Just show your face to the camera!"})]})}),a.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px"},children:[a.jsx("h4",{style:{marginTop:0,color:"#495057"},children:" How It Works:"}),a.jsxs("ul",{style:{textAlign:"left",color:"#6c757d",fontSize:"14px"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"First time today:"})," Show your face  Automatic IN time capture"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Second time today:"})," Show your face  Automatic OUT time capture + working hours calculation"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Auto Camera Stop:"})," Camera automatically stops after successful OUT time or when attendance is already complete"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Camera Control:"}),' Use "Stop Camera" button to manually stop, "Start Camera" to resume']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Green box:"})," Recognized employee ready for auto-capture"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Orange box:"})," Currently capturing attendance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Red box:"})," Unknown person"]}),a.jsx("li",{children:"System prevents duplicate captures with 10-second cooldown"}),a.jsx("li",{children:"Good lighting and clear face positioning improve accuracy"})]})]})]})},mMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(new Date().toISOString().split("T")[0]),[s,i]=w.useState(!1),[o,l]=w.useState("date");w.useEffect(()=>{d()},[]);const c=async(N=null)=>{i(!0);try{let k="/api/attendance/records";N&&(k+=`?date=${N}`);const S=await Oe.get(k);let D=[];Array.isArray(S.data)&&(D=S.data),t(D),console.log("URL:",k),console.log("Fetched attendance data:",D)}catch(k){console.error("Error fetching attendance:",k),alert("Error fetching attendance records"),t([])}i(!1)},d=async()=>{i(!0);try{const N=await Oe.get("/api/attendance/today");let k=[];N.data&&N.data.employees&&Array.isArray(N.data.employees)&&(k=N.data.employees.map(S=>({...S,date:N.data.date,dateObject:N.data.dateObject}))),t(k),console.log("Today's attendance data:",k),l("today")}catch(N){console.error("Error fetching today's attendance:",N),alert("Error fetching today's attendance"),t([])}i(!1)},u=async N=>{i(!0);try{const k=await Oe.get(`/api/attendance/date/${N}`);let S=[];k.data&&k.data.employees&&Array.isArray(k.data.employees)&&(S=k.data.employees.map(D=>({...D,date:k.data.date,dateObject:k.data.dateObject}))),t(S),console.log(`Attendance data for ${N}:`,S)}catch(k){console.error("Error fetching attendance by date:",k),k.response&&k.response.status===404?alert(`No attendance records found for ${N}`):alert("Error fetching attendance records"),t([])}i(!1)},h=()=>{u(r),l("date")},m=()=>{c(),l("all")},p=N=>N?new Date(N).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",v=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=N=>{if(!N||N===0)return"-";const k=Math.floor(N),S=Math.round(N%1*60);return k===0?`${S}m`:S===0?`${k}h`:`${k}h ${S}m`},b=(N,k)=>N==="OUT"||k?a.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:" OUT"}):a.jsx("span",{style:{backgroundColor:"#28a745",color:"white",padding:"3px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:" IN"}),y=()=>{const N=e.reduce((k,S)=>k+(S.workingHours||0),0);return g(N)},C=()=>{switch(o){case"today":return"Today's Attendance";case"date":return`Attendance for ${v(r)}`;case"all":return"All Attendance Records";default:return"Attendance Records"}};return a.jsxs("div",{style:{padding:"20px"},children:[a.jsx("h2",{children:" Employee Attendance Dashboard"}),a.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[a.jsx("label",{style:{fontSize:"14px",fontWeight:"bold"},children:" Select Date:"}),a.jsx("input",{type:"date",value:r,onChange:N=>n(N.target.value),style:{padding:"8px 12px",fontSize:"14px",border:"1px solid #ddd",borderRadius:"4px"}}),a.jsx("button",{onClick:h,disabled:s,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" Filter"})]}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:d,disabled:s,style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" Today"}),a.jsx("button",{onClick:m,disabled:s,style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:s?"not-allowed":"pointer",fontSize:"14px"},children:" All Records"})]})]}),a.jsxs("div",{style:{margin:"20px 0"},children:[a.jsx("h3",{style:{color:"#495057",margin:"10px 0"},children:C()}),e.length>0&&a.jsxs("div",{style:{display:"flex",gap:"20px",padding:"10px 15px",backgroundColor:"#e3f2fd",borderRadius:"6px",fontSize:"14px",color:"#1976d2"},children:[a.jsxs("span",{children:[a.jsx("strong",{children:" Total Records:"})," ",e.length]}),o!=="all"&&a.jsxs("span",{children:[a.jsx("strong",{children:" Total Hours:"})," ",y()]})]})]}),s?a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:a.jsx("p",{style:{fontSize:"16px",color:"#6c757d"},children:" Loading attendance records..."})}):a.jsx("div",{children:e.length===0?a.jsx("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7"},children:a.jsx("p",{style:{fontSize:"16px",color:"#856404",margin:0},children:" No attendance records found for the selected criteria."})}):a.jsx("div",{style:{overflowX:"auto"},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #dee2e6",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#495057",color:"white"},children:[a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Employee Name"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Employee ID"}),o==="all"&&a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"left",fontSize:"14px",fontWeight:"bold"},children:" Date"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" IN Time"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" OUT Time"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Working Hours"}),a.jsx("th",{style:{border:"1px solid #dee2e6",padding:"15px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Status"})]})}),a.jsx("tbody",{children:e.map((N,k)=>a.jsxs("tr",{style:{backgroundColor:k%2===0?"#ffffff":"#f8f9fa",transition:"background-color 0.2s"},onMouseEnter:S=>S.target.parentElement.style.backgroundColor="#e8f4f8",onMouseLeave:S=>S.target.parentElement.style.backgroundColor=k%2===0?"#ffffff":"#f8f9fa",children:[a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",fontWeight:"bold",color:"#495057"},children:`${N.firstName||""} ${N.lastName||""}`.trim()||"Unknown Employee"}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",color:"#6c757d",fontSize:"13px"},children:N.employeeId||"N/A"}),o==="all"&&a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",color:"#6c757d"},children:v(N.date)}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:N.inTime?a.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:p(N.inTime)}):a.jsx("span",{style:{color:"#6c757d"},children:"-"})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:N.outTime?a.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:p(N.outTime)}):a.jsx("span",{style:{color:"#ffc107",fontStyle:"italic"},children:"Still Working"})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:a.jsx("span",{style:{color:N.workingHours>0?"#17a2b8":"#6c757d",fontWeight:N.workingHours>0?"bold":"normal"},children:g(N.workingHours)})}),a.jsx("td",{style:{border:"1px solid #dee2e6",padding:"12px",textAlign:"center"},children:b(N.status,N.outTime)})]},`${N.employeeObjectId}-${N.date}-${k}`))})]})})}),e.length>0&&a.jsxs("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[a.jsx("h4",{style:{margin:"0 0 15px 0",color:"#495057"},children:" Summary Statistics"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#d4edda",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#155724"},children:e.length}),a.jsx("div",{style:{fontSize:"12px",color:"#155724"},children:"Total Records"})]}),a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#d1ecf1",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460"},children:e.filter(N=>N.status==="IN"&&!N.outTime).length}),a.jsx("div",{style:{fontSize:"12px",color:"#0c5460"},children:"Currently Working"})]}),a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#f8d7da",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#721c24"},children:e.filter(N=>N.outTime).length}),a.jsx("div",{style:{fontSize:"12px",color:"#721c24"},children:"Completed Shifts"})]}),o!=="all"&&a.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#fff3cd",borderRadius:"6px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#856404"},children:y()}),a.jsx("div",{style:{fontSize:"12px",color:"#856404"},children:"Total Hours"})]})]})]}),a.jsxs("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#e7f3ff",borderRadius:"6px"},children:[a.jsx("h5",{style:{marginTop:0,color:"#0056b3"},children:" How to Read the Data:"}),a.jsxs("ul",{style:{textAlign:"left",color:"#004085",fontSize:"13px",margin:"10px 0 0 0"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:" Employee Name:"})," Full name from attendance record"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" Employee ID:"})," Unique employee identifier"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" IN Time:"})," When employee checked in"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" OUT Time:"})," When employee checked out"]}),a.jsxs("li",{children:[a.jsx("strong",{children:" Working Hours:"})," Automatically calculated duration between IN and OUT"]}),a.jsxs("li",{children:[a.jsx("strong",{children:'"Still Working":'})," Employee checked IN but hasn't checked OUT yet"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Status Badges:"}),"  = Currently IN,  = Checked OUT"]})]})]})]})},pMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/billingcategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),Q=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Q}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),N=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/billingcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/billingcategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Billing Category"})}),a.jsx("div",{className:"d-flex gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Billing Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})};function xMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=y=>{const{name:C,value:N}=y.target;if(C==="rangeFrom"||C==="rangeTo"){const k=N.replace(/\D/g,"");if(k.length<=6){const S=parseInt(k);k.length===6&&S>=1e5&&S<=999999?t(D=>({...D,[C]:k})):k.length<6&&t(D=>({...D,[C]:k}))}}else t(k=>({...k,[C]:N}))},l=async y=>{y.preventDefault();try{if(s){const C=await Oe.put(`/api/customer-categories/${s}`,e);alert("Customer Category Updated!"),n(N=>N.map(k=>k._id===s?C.data:k)),i(null)}else{const C=await Oe.post("/api/customer-categories",e);alert("Customer Category Added!"),n([...r,C.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),b(),window.location.reload()}catch(C){console.error(C),alert("Error adding/updating category")}},c=async()=>{try{const y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),N=await Oe.get("/api/customer-categories",{params:{companyId:y,financialYear:C}});n(N.data)}catch(y){console.error(y)}};w.useEffect(()=>{c()},[]);const d=y=>{t({categoryName:y.categoryName,rangeFrom:y.rangeFrom,rangeTo:y.rangeTo}),i(y._id)},[u,h]=w.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=w.useState(!1),b=()=>g(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Customer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit Customer Category":"Add Customer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Premium",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",min:"100000",max:"999999",value:e.rangeFrom,onChange:o,required:!0,pattern:"\\d{6}",className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2 ",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",max:e.rangeFrom?e.rangeFrom+9999:1999,placeholder:"e.g., 199999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[" ",a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[r.map(y=>a.jsxs("tr",{children:[a.jsx("td",{children:y.categoryName}),a.jsx("td",{children:y.rangeFrom}),a.jsx("td",{children:y.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{d(y),m()},children:"Edit"})})]},y._id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"text-center",children:"No categories found."})})]})]})})]})})]})]})})})}const vMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;w.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsissuecategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsissuecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsissuecategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),N()},N=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Issue Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:N,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Issue Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Issue Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control"})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},gMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;w.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsreceiptcategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsreceiptcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsreceiptcategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),N()},N=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Receipt Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:N,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Receipt Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Receipt Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control "})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},bMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState(localStorage.getItem("selectedCompanyId")),[s,i]=w.useState(localStorage.getItem("financialYear")),[o,l]=w.useState({}),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(!1),[v,g]=w.useState(!1),b=/^\d{0,6}$/;w.useEffect(()=>{y()},[]);const y=async()=>{try{const A=await Oe.get("/api/invoicecategory",{params:{companyId:r,financialYear:s}});d(A.data)}catch(A){console.error("Failed to fetch categories",A)}},C=(A,L)=>{switch(A){case"categoryName":if(!L)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!L)return`${A} is required`;if(!b.test(L))return"Max 6 digits allowed";break}return""},N=A=>{const{name:L,value:P}=A.target;let O=P,Q="";switch(L){case"categoryName":O=P,O.length>100&&(O=O.slice(0,100),Q="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":O=P.replace(/[^0-9]/g,""),O.length>6&&(O=O.slice(0,6),Q="Maximum 6 digits allowed");break}const z=C(L,O),re=Q||z;t(U=>({...U,[L]:O})),l(U=>({...U,[L]:re}))},k=()=>!C("categoryName",e.categoryName)&&!C("rangeStart",e.rangeStart)&&!C("rangeEnd",e.rangeEnd),S=async A=>{A.preventDefault();const L={};if(Object.keys(e).forEach(P=>{L[P]=C(P,e[P])}),l(L),!Object.values(L).some(P=>P))try{u?(await Oe.put(`/api/invoicecategory/${u}`,e),alert("Category updated successfully!")):(await Oe.post("/api/invoicecategory",e),alert("Category saved successfully!")),y(),t({categoryName:"",rangeStart:"",rangeEnd:""}),h(null),T(),window.location.reload()}catch(P){console.error(P),alert("Failed to save category.")}},D=A=>{t({categoryName:A.categoryName,rangeStart:A.rangeStart,rangeEnd:A.rangeEnd}),h(A._id),E()},E=()=>p(!0),T=()=>p(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Invoice Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:E,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add vendor Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:c.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:A.categoryName}),a.jsx("td",{children:A.rangeStart}),a.jsx("td",{children:A.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>D(A),children:"Edit"})})]},A._id))})]})})})}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[u?"Edit":"Create"," Invoice Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{T(),h(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:S,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(A=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:A==="categoryName"?"Category Name":A==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:A,value:e[A],onChange:N,className:"form-control "})]},A))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!k(),children:u?"Update Category":"Add Category"})]})})]})})})]})]})})},qB=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;w.useEffect(()=>{d()},[]);const d=async()=>{try{const E=localStorage.getItem("selectedCompanyId"),T=localStorage.getItem("financialYear"),A=await Oe.get("/api/category",{params:{companyId:E,financialYear:T}});i(A.data)}catch(E){console.error("Failed to fetch categories",E)}},u=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!c.test(T))return"Max 6 digits allowed";break}return""},h=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=u(T,L),Q=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Q}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),[p,v]=w.useState({});w.useEffect(()=>{const E=async()=>{const T={};for(const A of s)try{const L=await Oe.post("/api/material/generate-id",{categoryId:A._id});T[A._id]=L.data.nextNumber}catch(L){console.error("Error generating ID for category:",A._id,L)}v(T)};s.length&&E()},[s]);const g=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=u(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/category/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/category",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},b=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id)},[y,C]=w.useState(!1),N=()=>C(!0),k=()=>C(!1),[S,D]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsx("div",{className:"content",children:a.jsxs("div",{children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Material Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{N()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Material Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.length>0&&s?.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{b(E),N()},children:"Edit"})})]},E._id))})]})})})}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Material Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:g,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:h,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})})})};function yMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({});localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{(k.target.name==="rangeFrom"||k.target.name==="rangeTo")&&(k.target.value=k.target.value.replace(/[^0-9]/g,"")),t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/po-categories/${s}`,e),alert("PO Category updated!")):(await Oe.post("/api/po-categories",e),alert("PO Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving PO Category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/po-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"PO Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:b,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add PO Category"]})})})]}),a.jsx("h2",{}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," PO Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{d(k),k.target.value=k.target.value.replace(/[^0-9]/g,"")},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",value:e.rangeTo,onChange:d,maxLength:6,placeholder:"Range To (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const jMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;w.useEffect(()=>{d()},[]);const d=async()=>{try{const N=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear"),S=await Oe.get("/api/purchasecategory",{params:{companyId:N,financialYear:k}});i(S.data)}catch(N){console.error("Failed to fetch categories",N)}},u=(N,k)=>{switch(N){case"categoryName":if(!k)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!k)return`${N} is required`;if(!c.test(k))return"Max 6 digits allowed";break}return""},h=N=>{const{name:k,value:S}=N.target;let D=S,E="";switch(k){case"categoryName":D=S,D.length>100&&(D=D.slice(0,100),E="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":D=S.replace(/[^0-9]/g,""),D.length>6&&(D=D.slice(0,6),E="Maximum 6 digits allowed");break}const T=u(k,D),A=E||T;t(L=>({...L,[k]:D})),n(L=>({...L,[k]:A}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),p=async N=>{N.preventDefault();const k={};if(Object.keys(e).forEach(S=>{k[S]=u(S,e[S])}),n(k),!Object.values(k).some(S=>S))try{o?(await Oe.put(`/api/purchasecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/purchasecategory",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(S){console.error(S),alert("Failed to save category.")}},v=N=>{t({categoryName:N.categoryName,prefix:N.prefix,rangeStart:N.rangeStart,rangeEnd:N.rangeEnd}),l(N._id)},[g,b]=w.useState(!1),y=()=>b(!0),C=()=>b(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Purchase Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Purchase Request Category"]})})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Purchase Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{C(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:p,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(N=>a.jsxs("div",{className:" col-xl-3 mb-3",children:[a.jsx("label",{className:"form-label",children:N==="categoryName"?"Category Name":N==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:N,value:e[N],onChange:h,className:"form-control "})]},N))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(N=>a.jsxs("tr",{children:[a.jsx("td",{children:N.categoryName}),a.jsx("td",{children:N.rangeStart}),a.jsx("td",{children:N.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(N),y()},children:"Edit"})})]},N._id))})]})})})]})})};function NMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),c=N=>{const{name:k,value:S}=N.target;t(D=>({...D,[k]:S}))},d=async N=>{N.preventDefault();try{s?await Oe.put(`/api/rfq-categories/${s}`,e):await Oe.post("/api/rfq-categories",e),t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),u(),C(),window.location.reload()}catch(k){console.error("Error submitting category:",k)}},u=async()=>{try{const N=await Oe.get("/api/rfq-categories",{params:{companyId:o,financialYear:l}});n(N.data)}catch(N){console.error("Error fetching categories:",N)}},h=N=>{t({categoryName:N.categoryName,rangeFrom:N.rangeFrom,rangeTo:N.rangeTo}),i(N._id)};w.useEffect(()=>{u()},[]);const[m,p]=w.useState(!1),v=()=>p(!0),g=()=>p(!1),[b,y]=w.useState(!1),C=()=>y(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"RFQ Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{v()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"isax isax-add-circle5 me-1"}),"RFQ Category"]})})})]}),a.jsx("h2",{}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit RFQ Category":"Add RFQ Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),g(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"categoryName",children:"Category Name"}),a.jsx("input",{name:"categoryName",placeholder:"Category Name",value:e.categoryName,onChange:c,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeFrom",children:"Range From"}),a.jsx("input",{name:"rangeFrom",placeholder:"Range From",value:e.rangeFrom,onChange:N=>{N.target.value=N.target.value.replace(/[^0-9]/g,""),c(N)},required:!0,type:"text",maxLength:6,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeTo",children:"Range To"}),a.jsx("input",{name:"rangeTo",placeholder:"Range To",value:e.rangeTo,onChange:N=>{N.target.value=N.target.value.replace(/[^0-9]/g,""),c(N)},required:!0,type:"text",maxLength:6,className:"form-control"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((N,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:N.categoryName}),a.jsx("td",{children:N.rangeFrom}),a.jsx("td",{children:N.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{h(N),v()},className:"btn btn-sm btn-primary",children:"Edit"})})]},N._id))})]})})})})]})}function zB(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const d=()=>{let S={};const D=/^\d{6}$/;return S.categoryName=e.categoryName?"":"Required",S.rangeFrom=e.rangeFrom?D.test(e.rangeFrom)?"":"Must be 6 digits":"Required",S.rangeTo=e.rangeTo?D.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(S),Object.values(S).every(E=>E==="")},u=S=>{t({...e,[S.target.name]:S.target.value})},h=async S=>{if(S.preventDefault(),!!d())try{s?(await Oe.put(`/api/sale-contract-categories/${s}`,e),alert("Contract category updated successfully!")):(await Oe.post("/api/sale-contract-categories",e),alert("Contract category added successfully!")),m(),v(),C(),window.location.reload()}catch{alert("Error saving contract category. Please try again.")}},m=async()=>{try{const S=await Oe.get("/api/sale-contract-categories",{params:{companyId:c}});n(S.data)}catch(S){console.error("Error fetching contract categories:",S)}},p=S=>{t(S),i(S._id),l({})},v=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{m()},[]);const[g,b]=w.useState(!1),y=()=>b(!0),C=()=>b(!1),[N,k]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-2",children:[a.jsx("div",{className:"my-auto mb-2",children:a.jsx("h2",{className:"mb-1",children:"Sales Contract Categories"})}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[a.jsx("i",{className:"fas fa-file-contract me-2"}),s?"Edit":"Create"," Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{C(),v()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:u,className:"form-control",placeholder:"Enter category name (e.g., Standard Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},className:"form-control",maxLength:6,placeholder:"Enter start range (6 digits)",min:"100000",max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:"form-control ",value:e.rangeTo,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-start",children:a.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("span",{className:"fw-medium",children:S.categoryName})})}),a.jsx("td",{children:S.rangeFrom?.toLocaleString()}),a.jsx("td",{children:S.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(S),y()},title:"Edit Category",children:"Edit"})})})]},S._id))})]})})})})]})}function wMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sale-quotation-categories/${s}`,e),alert("Category updated!")):(await Oe.post("/api/sale-quotation-categories",e),alert("Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sale-quotation-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Quotation Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Quotation Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Quotation Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,className:"form-control",placeholder:"Category Name"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,className:"form-control",placeholder:"Range From (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const SMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),c=/^[A-Za-z ]{0,100}$/,d=/^\d{0,6}$/;w.useEffect(()=>{u()},[]);const u=async()=>{try{const D=localStorage.getItem("selectedCompanyId"),E=localStorage.getItem("financialYear"),T=await Oe.get("/api/salecategory",{params:{companyId:D,financialYear:E}});i(T.data)}catch(D){console.error("Failed to fetch categories",D)}},h=(D,E)=>{switch(D){case"categoryName":if(!E)return"Category name is required";if(!c.test(E))return"Only alphabets (max 100 characters)";break;case"rangeStart":case"rangeEnd":if(!E)return`${D} is required`;if(!d.test(E))return"Max 6 digits allowed";break}return""},m=D=>{const{name:E,value:T}=D.target;let A=T,L="";switch(E){case"categoryName":A=T,A.length>100&&(A=A.slice(0,100),L="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":A=T.replace(/[^0-9]/g,""),A.length>6&&(A=A.slice(0,6),L="Maximum 6 digits allowed");break}const P=h(E,A),O=L||P;t(Q=>({...Q,[E]:A})),n(Q=>({...Q,[E]:O}))},p=()=>!h("categoryName",e.categoryName)&&!h("rangeStart",e.rangeStart)&&!h("rangeEnd",e.rangeEnd),v=async D=>{D.preventDefault();const E={};if(Object.keys(e).forEach(T=>{E[T]=h(T,e[T])}),n(E),!Object.values(E).some(T=>T))try{o?(await Oe.put(`/api/salecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/salecategory",e),alert("Category saved successfully!")),u(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(T){console.error(T),alert("Failed to save category.")}},g=D=>{t({categoryName:D.categoryName,rangeStart:D.rangeStart,rangeEnd:D.rangeEnd}),l(D._id)},[b,y]=w.useState(!1),C=()=>y(!0),N=()=>y(!1),[k,S]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Enquiry Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Sales Indent Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{N(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:v,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(D=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:D==="categoryName"?"Category Name":D==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:D,value:e[D],onChange:m,className:"form-control "})]},D))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!p(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(D=>a.jsxs("tr",{children:[a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeStart}),a.jsx("td",{children:D.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{g(D),C()},children:"Edit"})})]},D._id))})]})})})]})})};function CMe(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be  Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sales-order-categories/${s}`,e),alert("Sales Order Category updated!")):(await Oe.post("/api/sales-order-categories",e),alert("Sales Order Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sales-order-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};w.useEffect(()=>{h()},[]);const[v,g]=w.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,N]=w.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Order Category  "})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Order Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Sales Order Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("h2",{}),a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"})}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"})})]}),a.jsx("button",{className:"btn btn-sm btn-primary mt-2 mb-2",type:"submit",children:s?"Update Category":"Add Category"})]})]})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const kMe=()=>{const[e,t]=w.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState({}),[s,i]=w.useState([]),[o,l]=w.useState(null),[c,d]=w.useState(!1),[u,h]=w.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;w.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/goodsTransferCategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),Q=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Q}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),N=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/goodsTransferCategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsTransferCategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Transfer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Transfer Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Transfer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"}),r[E]&&a.jsx("div",{className:"invalid-feedback",children:r[E]})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})};function _Me(){const[e,t]=w.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=w.useState([]),[s,i]=w.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=b=>{const{name:y,value:C}=b.target;if(y==="rangeFrom"||y==="rangeTo"){const N=C.replace(/\D/g,"");if(N.length<=6){const k=parseInt(N);N.length===6&&k>=1e5&&k<=999999?t(S=>({...S,[y]:N})):N.length<6&&t(S=>({...S,[y]:N}))}}else t(N=>({...N,[y]:C}))},l=async b=>{b.preventDefault();try{if(s){const y=await Oe.put(`/api/vendor-categories/${s}`,e);alert("Vendor Category Updated!"),n(C=>C.map(N=>N._id===s?y.data:N)),i(null)}else{const y=await Oe.post("/api/vendor-categories",e);alert("Vendor Category Added!"),n([...r,y.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),window.location.reload()}catch(y){console.error(y),alert("Error adding/updating category")}},c=async()=>{try{const b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),C=await Oe.get("/api/vendor-categories",{params:{companyId:b,financialYear:y}});n(C.data)}catch(b){console.error(b)}};w.useEffect(()=>{c()},[]);const d=b=>{t({categoryName:b.categoryName,rangeFrom:b.rangeFrom,rangeTo:b.rangeTo}),i(b._id)},[u,h]=w.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=w.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Vendor Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Vendor Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit Vendor Category":"Add Vendor Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Hardware",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",value:e.rangeFrom,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",placeholder:"e.g., 999999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map(b=>a.jsxs("tr",{children:[a.jsx("td",{children:b.categoryName}),a.jsx("td",{children:b.rangeFrom}),a.jsx("td",{children:b.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{d(b),m()},className:"btn btn-sm btn-primary",children:"Edit"})})]},b._id))})]})})})})]})]})})}function EMe(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(""),[c,d]=w.useState({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""}),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState([]),[b,y]=w.useState([]),C=localStorage.getItem("selectedCompanyId"),N=localStorage.getItem("financialYear");w.useEffect(()=>{k(),S()},[]),w.useEffect(()=>{D()},[e,c]);const k=async()=>{try{i(!0);const z=await Oe.get("/api/goodsTransfer",{params:{companyId:C,financialYear:N}});t(z.data),l("")}catch(z){l("Failed to fetch goods transfers"),console.error("Error fetching transfers:",z)}finally{i(!1)}},S=async()=>{try{const z=await Oe.get("/api/goodsTransferCategory",{params:{companyId:C,financialYear:N}});g(z.data);const re=await Oe.get("/api/locations",{params:{companyId:C,financialYear:N}});y(re.data)}catch(z){console.error("Error fetching dropdown data:",z)}},D=()=>{let z=[...e];c.category&&(z=z.filter(re=>re.category.toLowerCase().includes(c.category.toLowerCase()))),c.location&&(z=z.filter(re=>re.location.toLowerCase().includes(c.location.toLowerCase()))),c.docnumber&&(z=z.filter(re=>re.docnumber.toLowerCase().includes(c.docnumber.toLowerCase()))),c.dateFrom&&(z=z.filter(re=>new Date(re.docDate)>=new Date(c.dateFrom))),c.dateTo&&(z=z.filter(re=>new Date(re.docDate)<=new Date(c.dateTo))),n(z)},E=(z,re)=>{d(U=>({...U,[z]:re}))},T=()=>{d({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""})},A=z=>{p(z),h(!0)},L=z=>{const re=window.open("","_blank","width=800,height=600"),U=P(z);re.document.write(U),re.document.close(),re.onload=()=>{re.print()}},P=z=>{const re=new Date().toLocaleString(),U=Q(z.items);return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Goods Transfer - ${z.docnumber}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 20px;
            }
            .company-name {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .document-title {
              font-size: 20px;
              font-weight: bold;
              color: #666;
            }
            .info-section {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .info-box {
              width: 48%;
            }
            .info-box h4 {
              background-color: #f8f9fa;
              padding: 8px;
              margin: 0 0 10px 0;
              border-left: 4px solid #007bff;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table td {
              padding: 5px;
              border-bottom: 1px solid #eee;
            }
            .info-table td:first-child {
              font-weight: bold;
              width: 40%;
            }
            .items-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            .items-table th,
            .items-table td {
              border: 1px solid #333;
              padding: 8px;
              text-align: left;
            }
            .items-table th {
              background-color: #f8f9fa;
              font-weight: bold;
            }
            .items-table tr:nth-child(even) {
              background-color: #f9f9f9;
            }
            .total-row {
              background-color: #e9ecef !important;
              font-weight: bold;
            }
            .footer {
              margin-top: 30px;
              border-top: 1px solid #333;
              padding-top: 20px;
            }
            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 40px;
            }
            .signature-box {
              width: 200px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              margin-top: 50px;
              padding-top: 5px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Your Company Name</div>
            <div class="document-title">GOODS TRANSFER DOCUMENT</div>
          </div>

          <div class="info-section">
            <div class="info-box">
              <h4>Document Information</h4>
              <table class="info-table">
                <tr>
                  <td>Document No:</td>
                  <td><strong>${z.docnumber}</strong></td>
                </tr>
                <tr>
                  <td>Category:</td>
                  <td>${z.category}</td>
                </tr>
                <tr>
                  <td>Description:</td>
                  <td>${z.catdesc||"N/A"}</td>
                </tr>
                <tr>
                  <td>Location:</td>
                  <td>${z.location}</td>
                </tr>
              </table>
            </div>
            
            <div class="info-box">
              <h4>Dates & Reference</h4>
              <table class="info-table">
                <tr>
                  <td>Document Date:</td>
                  <td>${O(z.docDate)}</td>
                </tr>
                <tr>
                  <td>Posting Date:</td>
                  <td>${O(z.postDate)}</td>
                </tr>
                <tr>
                  <td>Reference:</td>
                  <td>${z.reference||"N/A"}</td>
                </tr>
                <tr>
                  <td>Print Date:</td>
                  <td>${re}</td>
                </tr>
              </table>
            </div>
          </div>

          <h4>Items Details</h4>
          <table class="items-table">
            <thead>
              <tr>
                <th style="width: 5%">#</th>
                <th style="width: 15%">Material ID</th>
                <th style="width: 25%">Description</th>
                <th style="width: 8%">Qty</th>
                <th style="width: 8%">UOM</th>
                <th style="width: 10%">Price</th>
                <th style="width: 10%">Total</th>
                <th style="width: 10%">Del Date</th>
                <th style="width: 9%">Lot No</th>
              </tr>
            </thead>
            <tbody>
              ${z.items?z.items.map((X,B)=>`
                <tr>
                  <td>${B+1}</td>
                  <td>${X.materialId||"N/A"}</td>
                  <td>${X.description||"N/A"}</td>
                  <td>${X.quantity||"0"}</td>
                  <td>${X.baseUnit||"N/A"}</td>
                  <td>${X.price||"0.00"}</td>
                  <td>${(parseFloat(X.quantity||0)*parseFloat(X.price||0)).toFixed(2)}</td>
                  <td>${O(X.deliveryDate)}</td>
                  <td>${X.lotNo||"N/A"}</td>
                </tr>
              `).join(""):'<tr><td colspan="9" style="text-align: center;">No items found</td></tr>'}
              <tr class="total-row">
                <td colspan="6" style="text-align: right;"><strong>GRAND TOTAL:</strong></td>
                <td><strong>${U}</strong></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>

          <div class="footer">
            <div class="signature-section">
              <div class="signature-box">
                <div class="signature-line">Prepared By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Checked By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Approved By</div>
              </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666;">
              <p>This is a computer generated document. No signature required.</p>
              <p>Generated on: ${re} | User: ${localStorage.getItem("userLogin")||"System"}</p>
            </div>
          </div>
        </body>
      </html>
    `},O=z=>z?new Date(z).toLocaleDateString("en-IN"):"N/A",Q=z=>!z||z.length===0?0:z.reduce((re,U)=>re+parseFloat(U.quantity||0)*parseFloat(U.price||0),0).toFixed(2);return s?a.jsx("div",{className:"container p-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading goods transfers..."})]})}):a.jsxs("div",{className:"container-fluid p-3",children:[a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("h4",{children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Goods Transfer List"]})}),o&&a.jsxs("div",{className:"alert alert-danger",role:"alert",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-filter me-2"}),"Filters"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:c.category,onChange:z=>E("category",z.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),v.map((z,re)=>a.jsx("option",{value:z.categoryName,children:z.categoryName},re))]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:c.location,onChange:z=>E("location",z.target.value),children:[a.jsx("option",{value:"",children:"All Locations"}),b.map((z,re)=>a.jsx("option",{value:z.name||z.locationName,children:z.name||z.locationName},re))]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Document No"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search document...",value:c.docnumber,onChange:z=>E("docnumber",z.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Date From"}),a.jsx("input",{type:"date",className:"form-control",value:c.dateFrom,onChange:z=>E("dateFrom",z.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Date To"}),a.jsx("input",{type:"date",className:"form-control",value:c.dateTo,onChange:z=>E("dateTo",z.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:""}),a.jsx("div",{className:"d-grid",children:a.jsxs("button",{className:"btn btn-outline-secondary",onClick:T,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})})]})]})})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("small",{className:"text-muted",children:["Showing ",r.length," of ",e.length," records"]})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:r.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("h5",{children:"No goods transfers found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or create a new goods transfer."})]}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Items Count"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((z,re)=>a.jsxs("tr",{children:[a.jsx("td",{children:re+1}),a.jsx("td",{children:z.docnumber}),a.jsx("td",{children:z.category}),a.jsx("td",{children:z.location}),a.jsx("td",{children:O(z.docDate)}),a.jsx("td",{children:O(z.postDate)}),a.jsx("td",{children:z.reference}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:z.items?z.items.length:0})}),a.jsx("td",{children:a.jsxs("strong",{children:["",Q(z.items)]})}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>A(z),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>L(z),title:"Print Document",children:a.jsx("i",{className:"fas fa-print"})})]})})]},z._id||re))})]})})})}),u&&m&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Goods Transfer Details - ",m.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>h(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Document Information"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document No:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:m.docnumber})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Category:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:m.category})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Description:"}),a.jsx("td",{children:m.catdesc})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Location:"}),a.jsx("td",{children:m.location})]})]})})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Dates & Reference"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document Date:"}),a.jsx("td",{children:O(m.docDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Posting Date:"}),a.jsx("td",{children:O(m.postDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Reference:"}),a.jsx("td",{children:m.reference})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Created Date:"}),a.jsx("td",{children:O(m.date)})]})]})})})]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Items Details"}),a.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})]}),a.jsx("div",{className:"card-body",children:m.items&&m.items.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-striped",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:m.items.map((z,re)=>a.jsxs("tr",{children:[a.jsx("td",{children:re+1}),a.jsx("td",{children:a.jsx("code",{children:z.materialId})}),a.jsx("td",{children:z.description}),a.jsx("td",{children:z.quantity}),a.jsx("td",{children:z.baseUnit}),a.jsxs("td",{children:["",z.price]}),a.jsx("td",{children:a.jsxs("strong",{children:["",(parseFloat(z.quantity||0)*parseFloat(z.price||0)).toFixed(2)]})}),a.jsx("td",{children:O(z.deliveryDate)}),a.jsx("td",{children:z.lotNo}),a.jsx("td",{children:z.text})]},re))}),a.jsx("tfoot",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{colSpan:"6",className:"text-end",children:"Grand Total:"}),a.jsxs("th",{children:["",Q(m.items)]}),a.jsx("th",{colSpan:"3"})]})})]})}):a.jsxs("div",{className:"text-center py-3",children:[a.jsx("i",{className:"fas fa-box-open fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted",children:"No items found for this transfer"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print Document"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})]})]})})})]})}const DMe=()=>{const[e,t]=w.useState({contacts:[],loading:!1,totalCount:0,currentPage:1,pageSize:10,searchTerm:"",sortBy:"name",sortOrder:"asc"}),[r,n]=w.useState(!1),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState([]),[u,h]=w.useState(null),[m,p]=w.useState(null),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState(!1),k="/api",S=512*1024,D=async(te,ne={})=>{try{const se=await fetch(`${k}${te}`,{headers:{"Content-Type":"application/json",...ne.headers},...ne});if(!se.ok)throw new Error(`API call failed: ${se.statusText}`);return await se.json()}catch(se){throw console.error("API Error:",se),se}},E=async te=>{const ne=new FormData;ne.append("avatar",te);try{const se=await fetch(`${k}/contacts/upload/avatar`,{method:"POST",body:ne});if(!se.ok)throw new Error("Upload failed");return await se.json()}catch(se){throw console.error("Upload Error:",se),se}};w.useEffect(()=>{T()},[e.currentPage,e.pageSize,e.searchTerm,e.sortBy,e.sortOrder]);const T=async()=>{t(te=>({...te,loading:!0}));try{const te={page:e.currentPage,limit:e.pageSize,search:e.searchTerm,sortBy:e.sortBy,sortOrder:e.sortOrder},ne=new URLSearchParams(te).toString(),se=await D(`/contacts?${ne}`);t(oe=>({...oe,contacts:se.data.contacts,totalCount:se.data.totalCount,loading:!1}))}catch(te){console.error("Error fetching contacts:",te),t(ne=>({...ne,loading:!1}))}},A=te=>{const ne=te.target.files[0];if(!ne)return;if(ne.size>S){alert("Image size must be less than 512KB"),te.target.value="";return}if(!ne.type.startsWith("image/")){alert("Please select a valid image file"),te.target.value="";return}g(ne);const se=new FileReader;se.onload=oe=>{y(oe.target.result)},se.readAsDataURL(ne)},L=()=>{g(null),y(null);const te=document.querySelector('input[type="file"]');te&&(te.value="")},P=te=>{t(ne=>({...ne,searchTerm:te,currentPage:1}))},O=te=>{t(ne=>({...ne,sortBy:te,sortOrder:ne.sortBy===te&&ne.sortOrder==="asc"?"desc":"asc"}))},Q=te=>{h(te),y(te.avatar),i(!0)},z=te=>{p(te),l(!0)},re=async()=>{try{await D("/contacts",{method:"DELETE",body:JSON.stringify({ids:[m]})}),T(),l(!1),p(null)}catch(te){console.error("Error deleting contact:",te)}},U=async te=>{try{N(!0);let ne=null;v&&(ne=(await E(v)).data.url);const se={...te,avatar:ne};await D("/contacts",{method:"POST",body:JSON.stringify(se)}),T(),n(!1),L()}catch(ne){console.error("Error creating contact:",ne)}finally{N(!1)}},X=async te=>{try{N(!0);let ne=u.avatar;v&&(ne=(await E(v)).data.url);const se={...te,avatar:ne};await D(`/contacts/${u._id}`,{method:"PUT",body:JSON.stringify(se)}),T(),i(!1),h(null),L()}catch(ne){console.error("Error updating contact:",ne)}finally{N(!1)}},B=te=>a.jsxs("span",{className:"rating",children:[[1,2,3,4,5].map(ne=>a.jsx("i",{className:`ti ti-star-filled ${ne<=te?"text-warning":""}`},ne)),a.jsxs("span",{className:"ms-1",children:[te,".0"]})]}),Y=te=>a.jsx("div",{className:"d-flex gap-1 flex-wrap",children:te.map((ne,se)=>a.jsx("span",{className:"badge badge-soft-primary",children:ne},se))}),K=te=>e.sortBy!==te?a.jsx("i",{className:"ti ti-selector"}):e.sortOrder==="asc"?a.jsx("i",{className:"ti ti-chevron-up"}):a.jsx("i",{className:"ti ti-chevron-down"}),ue=()=>a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Profile Image (Max 512KB)"}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsx("div",{className:"avatar avatar-lg",children:b?a.jsx("img",{src:b,alt:"Preview",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-secondary d-flex align-items-center justify-content-center",children:a.jsx("i",{className:"ti ti-user fs-3"})})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:A}),a.jsx("small",{className:"text-muted",children:"JPG, PNG, GIF (Max 512KB)"}),b&&a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger mt-1",onClick:L,children:"Remove Image"})]})]})]}),M=()=>e.loading?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"",children:a.jsxs("table",{className:"table table-sm",id:"contactslist",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{className:"no-sort"}),a.jsxs("th",{onClick:()=>O("name"),style:{cursor:"pointer"},children:["Name ",K("name")]}),a.jsxs("th",{onClick:()=>O("phone"),style:{cursor:"pointer"},children:["Phone ",K("phone")]}),a.jsx("th",{children:"Tags"}),a.jsxs("th",{onClick:()=>O("location"),style:{cursor:"pointer"},children:["Location ",K("location")]}),a.jsxs("th",{className:"pe-3",onClick:()=>O("rating"),style:{cursor:"pointer"},children:["Rating ",K("rating")]}),a.jsx("th",{children:"Contact"}),a.jsxs("th",{onClick:()=>O("status"),style:{cursor:"pointer"},children:["Status ",K("status")]}),a.jsx("th",{className:"text-end no-sort",children:"Action"})]})}),a.jsx("tbody",{children:e.contacts.map(te=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"avatar avatar-sm rounded-circle",children:te.avatar?a.jsx("img",{src:`${te.avatar}`,className:"flex-shrink-0 rounded-circle",alt:te.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-primary",children:te.name.charAt(0).toUpperCase()})})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("h6",{className:"mb-0",children:te.name}),a.jsx("small",{className:"text-muted",children:te.email})]})}),a.jsx("td",{children:te.phone}),a.jsx("td",{children:Y(te.tags)}),a.jsx("td",{children:te.location}),a.jsx("td",{children:B(te.rating)}),a.jsx("td",{children:te.email}),a.jsx("td",{children:a.jsx("span",{className:`badge ${te.status==="active"?"badge-soft-success":"badge-soft-danger"}`,children:te.status})}),a.jsx("td",{className:"text-end",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-light btn-sm","data-bs-toggle":"dropdown",children:a.jsx("i",{className:"ti ti-dots-vertical"})}),a.jsxs("div",{className:"dropdown-menu",children:[a.jsxs("a",{className:"dropdown-item",href:"javascript:void(0);",onClick:()=>Q(te),children:[a.jsx("i",{className:"ti ti-edit me-1"}),"Edit"]}),a.jsxs("a",{className:"dropdown-item text-danger",href:"javascript:void(0);",onClick:()=>z(te._id),children:[a.jsx("i",{className:"ti ti-trash me-1"}),"Delete"]})]})]})})]},te._id))})]})}),V=()=>r?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:te=>te.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Add Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(!1),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:te=>{te.preventDefault();const ne=new FormData(te.target),se={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(oe=>oe.trim()):[]};U(se)},children:[ue(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",children:[1,2,3,4,5].map(te=>a.jsxs("option",{value:te,selected:te===3,children:[te," Star"]},te))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",children:[a.jsx("option",{value:"active",selected:!0,children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{n(!1),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):"Add Contact"})]})]})})]})})}):null,W=()=>!s||!u?null:a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:te=>te.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Edit Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:te=>{te.preventDefault();const ne=new FormData(te.target),se={name:ne.get("name"),phone:ne.get("phone"),email:ne.get("email"),location:ne.get("location"),rating:parseInt(ne.get("rating"))||3,status:ne.get("status")||"active",tags:ne.get("tags")?ne.get("tags").split(",").map(oe=>oe.trim()):[]};X(se)},children:[ue(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",defaultValue:u.name,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",defaultValue:u.phone,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",defaultValue:u.email,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",defaultValue:u.location,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",defaultValue:u.rating,children:[1,2,3,4,5].map(te=>a.jsxs("option",{value:te,children:[te," Star"]},te))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",defaultValue:u.status,children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",defaultValue:u.tags.join(", "),placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),h(null),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Contact"})]})]})})]})})}),ee=()=>{if(!o)return null;const te=e.contacts.find(ne=>ne._id===m);return a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",onClick:ne=>ne.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{l(!1),p(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-alert-triangle text-warning",style:{fontSize:"48px"}})}),a.jsx("h6",{children:"Are you sure you want to delete this contact?"}),te&&a.jsxs("p",{className:"text-muted",children:[a.jsx("strong",{children:te.name}),a.jsx("br",{}),te.email]}),a.jsx("p",{className:"text-danger small",children:"This action cannot be undone."})]})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),p(null)},children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-danger",onClick:re,children:"Delete Contact"})]})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content pb-0",children:[a.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:a.jsxs("div",{children:[a.jsx("h4",{className:"mb-1",children:"Contacts"}),a.jsx("nav",{"aria-label":"breadcrumb",children:a.jsxs("ol",{className:"breadcrumb mb-0 p-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:"Home"})}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contacts"})]})})]})}),a.jsxs("div",{className:"card border-0 rounded-0",children:[a.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"input-icon input-icon-start position-relative",children:[a.jsx("span",{className:"input-icon-addon text-dark",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:e.searchTerm,onChange:te=>P(te.target.value)})]}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[a.jsx("i",{className:"ti ti-square-rounded-plus-filled me-1"}),"Add Contacts"]})]}),a.jsxs("div",{className:"card-body",children:[M(),a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-length",children:["Showing ",(e.currentPage-1)*e.pageSize+1," to ",Math.min(e.currentPage*e.pageSize,e.totalCount)," of ",e.totalCount," entries"]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-paginate text-end",children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:e.currentPage===1,onClick:()=>t(te=>({...te,currentPage:te.currentPage-1})),children:"Previous"}),a.jsxs("span",{className:"me-2",children:["Page ",e.currentPage]}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",disabled:e.currentPage*e.pageSize>=e.totalCount,onClick:()=>t(te=>({...te,currentPage:te.currentPage+1})),children:"Next"})]})})]})]})]}),V(),W(),ee()]})})},AMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(""),[u,h]=w.useState(""),[m,p]=w.useState(!1),[v,g]=w.useState(""),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),[C,N]=w.useState({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""}),k=async()=>{try{p(!0);const B=await fetch(`/api/leads?companyId=${b}&financialYear=${y}`);if(!B.ok)throw new Error("Failed to fetch leads");const Y=await B.json();console.log("Fetched leads:",Y),t(Y||[])}catch(B){g(B.message)}finally{p(!1)}},S=async()=>{try{const B=await fetch(`/api/campaigns?companyId=${b}&financialYear=${y}`);if(!B.ok)throw new Error("Failed to fetch campaigns");const Y=await B.json();n(Y||[])}catch(B){console.error("Failed to fetch campaigns:",B)}},D=async B=>{try{const Y=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...B,companyId:b,financialYear:y})});if(!Y.ok){const ue=await Y.json();throw new Error(ue.message||"Failed to create lead")}const K=await Y.json();t([...e,K]),A(),i(!1)}catch(Y){g(Y.message)}},E=async(B,Y)=>{try{const K=await fetch(`/api/leads/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,companyId:b,financialYear:y})});if(!K.ok){const M=await K.json();throw new Error(M.message||"Failed to update lead")}const ue=await K.json();t(e.map(M=>M._id===B?ue:M)),A(),i(!1),l(null)}catch(K){g(K.message)}},T=async B=>{if(window.confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${B}`,{method:"DELETE"})).ok)throw new Error("Failed to delete lead");t(e.filter(K=>K._id!==B))}catch(Y){g(Y.message)}},A=()=>{N({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""})},L=async B=>{B.preventDefault(),o?await E(o._id,C):await D(C)},P=B=>{N({companyName:B.companyName,contactPersonName:B.contactPersonName,email:B.email,phoneNumber:B.phoneNumber,leadSource:B.leadSource,leadStatus:B.leadStatus,industry:B.industry,companySize:B.companySize,annualRevenue:B.annualRevenue||"",leadScore:B.leadScore,assignedSalesRep:B.assignedSalesRep||"",notes:B.notes||"",expectedDealValue:B.expectedDealValue||"",expectedCloseDate:B.expectedCloseDate?B.expectedCloseDate.split("T")[0]:"",campaignId:B.campaignId?._id||B.campaignId||""}),l(B),i(!0)},O=B=>{const{name:Y,value:K}=B.target;N(ue=>({...ue,[Y]:K}))},Q=Array.isArray(e)?e.filter(B=>{const Y=B.companyName?.toLowerCase().includes(c.toLowerCase())||B.contactPersonName?.toLowerCase().includes(c.toLowerCase())||B.email?.toLowerCase().includes(c.toLowerCase()),K=u===""||B.leadStatus===u;return Y&&K}):[];w.useEffect(()=>{k(),S()},[]);const z=["Website","Social Media","Referral","Cold Call","Advertisement","Email Campaign","Google Ads","Event","Other"],re=["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],U=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Other"],X=["1-10","11-50","51-200","201-1000","1000+"];return a.jsxs("div",{className:"container-fluid py-4",children:[v&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:v}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:o?"Edit Lead":"Add New Lead"}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{i(!1),l(null),A()},children:""})]}),a.jsxs("form",{onSubmit:L,className:"modal-body",children:[a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Name*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"companyName",className:"form-control form-control-sm",value:C.companyName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"contactPersonName",className:"form-control form-control-sm",value:C.contactPersonName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Email*"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("input",{type:"email",name:"email",className:"form-control form-control-sm",value:C.email,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Phone Number*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control form-control-sm",value:C.phoneNumber,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Campaign"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{name:"campaignId",className:"form-control form-control-sm",value:C.campaignId,onChange:O,children:[a.jsx("option",{value:"",children:"Select Campaign"}),r.map(B=>a.jsx("option",{value:B._id,children:B.campaignName},B._id))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Source"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadSource",className:"form-control form-control-sm",value:C.leadSource,onChange:O,children:z.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Status"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadStatus",className:"form-control form-control-sm",value:C.leadStatus,onChange:O,children:re.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Industry"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"industry",className:"form-control form-control-sm",value:C.industry,onChange:O,children:U.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Size"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"companySize",className:"form-control form-control-sm",value:C.companySize,onChange:O,children:X.map(B=>a.jsx("option",{value:B,children:B},B))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Annual Revenue"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"annualRevenue",className:"form-control form-control-sm",value:C.annualRevenue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Score (1-100)"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"leadScore",className:"form-control form-control-sm",value:C.leadScore,onChange:O,min:"1",max:"100"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Assigned Sales Rep"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"assignedSalesRep",className:"form-control form-control-sm",value:C.assignedSalesRep,onChange:O})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Deal Value"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"expectedDealValue",className:"form-control form-control-sm",value:C.expectedDealValue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Close Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",name:"expectedCloseDate",className:"form-control form-control-sm",value:C.expectedCloseDate,onChange:O})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{name:"notes",className:"form-control form-control-sm",value:C.notes,onChange:O,rows:"3"})})]})})]}),a.jsx("div",{className:"row mt-3",children:a.jsxs("div",{className:"col-auto",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),l(null),A()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Lead":"Create Lead"})]})})]})]})})}),a.jsxs("div",{className:"card mt-3",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Leads Management"]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:B=>d(B.target.value),className:"form-control form-control-sm",style:{width:"200px"}}),a.jsxs("select",{value:u,onChange:B=>h(B.target.value),className:"form-select form-select-sm",style:{width:"150px"},children:[a.jsx("option",{value:"",children:"All Statuses"}),re.map(B=>a.jsx("option",{value:B,children:B},B))]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{A(),l(null),i(!0)},children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add New Lead"]})]})]}),a.jsx("div",{className:"card-body",children:m?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Campaign"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Source"}),a.jsx("th",{children:"Industry"}),a.jsx("th",{children:"Score"}),a.jsx("th",{children:"Expected Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Q.length>0?Q.map(B=>a.jsxs("tr",{children:[a.jsx("td",{children:B.companyName}),a.jsx("td",{children:B.contactPersonName}),a.jsx("td",{children:a.jsx("a",{href:`mailto:${B.email}`,className:"text-decoration-none",children:B.email})}),a.jsx("td",{children:B.phoneNumber&&a.jsx("a",{href:`tel:${B.phoneNumber}`,className:"text-decoration-none",children:B.phoneNumber})}),a.jsx("td",{children:B.campaignId?.campaignName&&a.jsx("span",{className:"badge bg-info",children:B.campaignId.campaignName})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${TMe(B.leadStatus)}`,children:B.leadStatus})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:B.leadSource})}),a.jsx("td",{children:B.industry}),a.jsx("td",{children:a.jsxs("span",{className:`badge bg-${IMe(B.leadScore)}`,children:[B.leadScore,"/100"]})}),a.jsx("td",{children:B.expectedDealValue?`$${Number(B.expectedDealValue).toLocaleString()}`:"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:()=>P(B),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(B._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},B._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center",children:e.length===0?"No leads available":"No leads match your search criteria"})})})]})})})]})]})},TMe=e=>{switch(e){case"New":return"primary";case"Contacted":return"info";case"Qualified":return"success";case"Proposal":return"warning";case"Negotiation":return"secondary";case"Closed Won":return"success";case"Closed Lost":return"danger";default:return"secondary"}},IMe=e=>e>=80?"success":e>=60?"warning":e>=40?"info":"secondary",gm="/api";function PMe(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(null),[u,h]=w.useState([]),[m,p]=w.useState(""),[v,g]=w.useState(""),[b,y]=w.useState(""),[C,N]=w.useState(!1),[k,S]=w.useState(""),[D,E]=w.useState("basic"),[T,A]=w.useState({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),L=ae=>{const je=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposal - ${ae.proposalNumber}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .header h2 {
                        margin: 5px 0;
                        color: #34495e;
                        font-size: 20px;
                    }
                    .section {
                        margin-bottom: 25px;
                    }
                    .section h3 {
                        color: #2c3e50;
                        border-bottom: 2px solid #bdc3c7;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                        font-size: 18px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 20px;
                    }
                    .info-item {
                        margin-bottom: 10px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-left: 4px solid #3498db;
                        margin: 15px 0;
                    }
                    .value-highlight {
                        background-color: #e8f6f3;
                        padding: 15px;
                        border-radius: 5px;
                        text-align: center;
                        margin: 20px 0;
                    }
                    .value-highlight .amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        border-top: 2px solid #bdc3c7;
                        padding-top: 20px;
                        color: #7f8c8d;
                    }
                    .terms-section {
                        background-color: #f8f9fa;
                        padding: 20px;
                        border-radius: 5px;
                        margin: 20px 0;
                    }
                    @media print {
                        body { margin: 0; }
                        .section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>BUSINESS PROPOSAL</h1>
                    <h2>${ae.proposalNumber}</h2>
                    <p>Date: ${je}</p>
                </div>

                <div class="section">
                    <h3>Client Information</h3>
                    <div class="info-grid">
                        <div>
                            <div class="info-item"><strong>Company:</strong> ${ae.leadId?.companyName||"N/A"}</div>
                            <div class="info-item"><strong>Contact Person:</strong> ${ae.leadId?.contactPersonName||"N/A"}</div>
                        </div>
                        <div>
                            <div class="info-item"><strong>Email:</strong> ${ae.leadId?.email||"N/A"}</div>
                            <div class="info-item"><strong>Phone:</strong> ${ae.leadId?.phoneNumber||"N/A"}</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Proposal Overview</h3>
                    <div class="info-item"><strong>Title:</strong> ${ae.title}</div>
                    <div class="description">
                        <strong>Description:</strong><br>
                        ${ae.description}
                    </div>
                    
                    <div class="value-highlight">
                        <div class="amount">${ae.currency} ${ae.proposalValue?.toLocaleString()}</div>
                        <div>Total Proposal Value</div>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item"><strong>Priority:</strong> ${ae.priority}</div>
                        <div class="info-item"><strong>Validity:</strong> ${ae.validityPeriod} days</div>
                    </div>
                </div>

                ${ae.businessObjective?`
                    <div class="section">
                        <h3>Business Objective</h3>
                        <p>${ae.businessObjective}</p>
                    </div>
                `:""}

                ${ae.proposedSolution?`
                    <div class="section">
                        <h3>Proposed Solution</h3>
                        <p>${ae.proposedSolution}</p>
                    </div>
                `:""}

                ${ae.timeline||ae.projectDuration?`
                    <div class="section">
                        <h3>Project Timeline</h3>
                        ${ae.timeline?`<p>${ae.timeline}</p>`:""}
                        ${ae.projectDuration?`<div class="info-item"><strong>Duration:</strong> ${ae.projectDuration} days</div>`:""}
                    </div>
                `:""}

                ${ae.teamComposition?`
                    <div class="section">
                        <h3>Team Composition</h3>
                        <p>${ae.teamComposition}</p>
                    </div>
                `:""}

                ${ae.technicalRequirements?`
                    <div class="section">
                        <h3>Technical Requirements</h3>
                        <p>${ae.technicalRequirements}</p>
                    </div>
                `:""}

                ${ae.proposedTechnology?`
                    <div class="section">
                        <h3>Proposed Technology</h3>
                        <p>${ae.proposedTechnology}</p>
                    </div>
                `:""}

                ${ae.paymentTerms||ae.deliveryTerms||ae.warrantyTerms?`
                    <div class="terms-section">
                        <h3>Commercial Terms</h3>
                        ${ae.paymentTerms?`
                            <div class="info-item">
                                <strong>Payment Terms:</strong><br>
                                ${ae.paymentTerms}
                            </div>
                        `:""}
                        ${ae.deliveryTerms?`
                            <div class="info-item">
                                <strong>Delivery Terms:</strong><br>
                                ${ae.deliveryTerms}
                            </div>
                        `:""}
                        ${ae.warrantyTerms?`
                            <div class="info-item">
                                <strong>Warranty Terms:</strong><br>
                                ${ae.warrantyTerms}
                            </div>
                        `:""}
                    </div>
                `:""}

                ${ae.riskAssessment?`
                    <div class="section">
                        <h3>Risk Assessment</h3>
                        <p>${ae.riskAssessment}</p>
                    </div>
                `:""}

                ${ae.companyCredentials?`
                    <div class="section">
                        <h3>Company Credentials</h3>
                        <p>${ae.companyCredentials}</p>
                    </div>
                `:""}

                <div class="footer">
                    <p><strong>Valid until:</strong> ${ae.expiryDate?new Date(ae.expiryDate).toLocaleDateString():`${ae.validityPeriod} days from submission`}</p>
                    <br>
                    <p>Thank you for considering our proposal.</p>
                    <p><strong>Prepared by:</strong> ${ae.createdBy||""}</p>
                </div>
            </body>
            </html>
        `},P=ae=>{const je=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),de=ae.map(ie=>`
            <div class="proposal-item">
                <h3>${ie.proposalNumber} - ${ie.title}</h3>
                <div class="info-grid">
                    <div>
                        <div class="info-item"><strong>Company:</strong> ${ie.leadId?.companyName||"N/A"}</div>
                        <div class="info-item"><strong>Contact:</strong> ${ie.leadId?.contactPersonName||"N/A"}</div>
                        <div class="info-item"><strong>Value:</strong> ${ie.currency} ${ie.proposalValue?.toLocaleString()}</div>
                    </div>
                    <div>
                        <div class="info-item"><strong>Status:</strong> ${ie.status}</div>
                        <div class="info-item"><strong>Priority:</strong> ${ie.priority}</div>
                        <div class="info-item"><strong>Created:</strong> ${new Date(ie.createdAt).toLocaleDateString()}</div>
                    </div>
                </div>
                <div class="description">
                    <strong>Description:</strong> ${ie.description}
                </div>
            </div>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposals Summary Report</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .proposal-item {
                        margin-bottom: 30px;
                        padding: 20px;
                        border: 1px solid #bdc3c7;
                        border-radius: 5px;
                        page-break-inside: avoid;
                    }
                    .proposal-item h3 {
                        color: #2c3e50;
                        margin-top: 0;
                        border-bottom: 1px solid #bdc3c7;
                        padding-bottom: 10px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 15px;
                    }
                    .info-item {
                        margin-bottom: 8px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 10px;
                        border-left: 4px solid #3498db;
                        margin-top: 10px;
                    }
                    @media print {
                        body { margin: 0; }
                        .proposal-item { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>PROPOSALS SUMMARY REPORT</h1>
                    <p>Generated on: ${je}</p>
                    <p>Total Proposals: ${ae.length}</p>
                </div>
                ${de}
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #bdc3c7; padding-top: 20px;">
                    <p><strong>Report generated by:</strong> sreevatsa-B-R</p>
                </div>
            </body>
            </html>
        `},O=async ae=>{try{const je=await fetch(`${gm}/proposals/${ae._id}`);if(!je.ok)throw new Error("Failed to fetch proposal details");const de=await je.json(),ie=L(de),be=window.open("","_blank");be.document.write(ie),be.document.close(),be.onload=()=>{be.focus(),be.print(),be.close()}}catch(je){S("Failed to print proposal: "+je.message)}},Q=()=>{if(u.length===0){alert("Please select proposals to print");return}const ae=e.filter(ie=>u.includes(ie._id)),je=P(ae),de=window.open("","_blank");de.document.write(je),de.document.close(),de.onload=()=>{de.focus(),de.print(),de.close()}},z=ae=>{h(je=>je.includes(ae)?je.filter(de=>de!==ae):[...je,ae])},re=()=>{u.length===ne.length?h([]):h(ne.map(ae=>ae._id))},U=async()=>{try{N(!0);const ae=await fetch(`${gm}/proposals`);if(!ae.ok)throw new Error("Failed to fetch proposals");const je=await ae.json();t(je.proposals||je)}catch(ae){S(ae.message)}finally{N(!1)}},X=async()=>{try{const ae=await fetch(`${gm}/leads?status=Qualified`);if(!ae.ok)throw new Error("Failed to fetch leads");const je=await ae.json();n(je.leads||je)}catch(ae){console.error("Error fetching leads:",ae)}},B=async ae=>{try{console.log("Sending proposal data:",ae);const je=await fetch(`${gm}/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(console.log("Response status:",je.status),!je.ok){const ie=await je.json();throw console.error("Error response:",ie),new Error(ie.message||"Failed to create proposal")}const de=await je.json();console.log("Created proposal:",de),t([...e,de]),M(),i(!1)}catch(je){console.error("Create proposal error:",je),S(je.message)}},Y=async(ae,je)=>{try{const de=await fetch(`${gm}/proposals/${ae}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!de.ok){const be=await de.json();throw new Error(be.message||"Failed to update proposal")}const ie=await de.json();t(e.map(be=>be._id===ae?ie:be)),M(),i(!1),l(null)}catch(de){S(de.message)}},K=async ae=>{try{const je=await fetch(`${gm}/proposals/${ae}/submit`,{method:"PUT"});if(!je.ok){const ie=await je.json();throw new Error(ie.message||"Failed to submit proposal")}const de=await je.json();t(e.map(ie=>ie._id===ae?de:ie))}catch(je){S(je.message)}},ue=async ae=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{if(!(await fetch(`${gm}/proposals/${ae}`,{method:"DELETE"})).ok)throw new Error("Failed to delete proposal");t(e.filter(de=>de._id!==ae))}catch(je){S(je.message)}},M=()=>{A({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),E("basic")},V=async ae=>{ae.preventDefault(),o?await Y(o._id,T):await B(T)},W=ae=>{A({leadId:ae.leadId?._id||"",title:ae.title||"",description:ae.description||"",proposalValue:ae.proposalValue||"",currency:ae.currency||"USD",validityPeriod:ae.validityPeriod||30,status:ae.status||"Draft",priority:ae.priority||"Medium",businessObjective:ae.businessObjective||"",proposedSolution:ae.proposedSolution||"",timeline:ae.timeline||"",paymentTerms:ae.paymentTerms||"",deliveryTerms:ae.deliveryTerms||"",warrantyTerms:ae.warrantyTerms||"",projectDuration:ae.projectDuration||"",teamComposition:ae.teamComposition||"",riskAssessment:ae.riskAssessment||"",companyCredentials:ae.companyCredentials||"",technicalRequirements:ae.technicalRequirements||"",proposedTechnology:ae.proposedTechnology||"",internalNotes:ae.internalNotes||""}),l(ae),i(!0)},ee=async ae=>{try{const je=await fetch(`${gm}/proposals/${ae._id}`);if(!je.ok)throw new Error("Failed to fetch proposal details");const de=await je.json();d(de)}catch(je){S(je.message)}},te=ae=>{const{name:je,value:de}=ae.target;A(ie=>({...ie,[je]:de}))},ne=Array.isArray(e)?e.filter(ae=>{const je=ae.proposalNumber?.toLowerCase().includes(m.toLowerCase())||ae.title?.toLowerCase().includes(m.toLowerCase())||ae.leadId?.companyName?.toLowerCase().includes(m.toLowerCase()),de=v===""||ae.status===v,ie=b===""||ae.priority===b;return je&&de&&ie}):[];w.useEffect(()=>{U(),X()},[]);const se=["Draft","Submitted","Under Review","Approved","Rejected","Expired","Withdrawn"],oe=["Low","Medium","High","Critical"],G=["USD","EUR","INR","GBP","CAD","AUD"],ce=ae=>{switch(ae){case"Draft":return"secondary";case"Submitted":return"primary";case"Under Review":return"warning";case"Approved":return"success";case"Rejected":return"danger";case"Expired":return"dark";case"Withdrawn":return"secondary";default:return"secondary"}},Z=ae=>{switch(ae){case"Low":return"success";case"Medium":return"warning";case"High":return"danger";case"Critical":return"dark";default:return"secondary"}};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Proposals"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Proposals"})]})})]}),a.jsx("div",{children:a.jsxs("div",{className:"d-flex gap-2",children:[u.length>0&&a.jsxs("button",{className:"btn btn-info",onClick:Q,children:[a.jsx("i",{className:"fas fa-print"})," Print Selected (",u.length,")"]}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{M(),l(null),i(!0)},children:"Create New Proposal"})]})})]}),a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",placeholder:"Search proposals...",value:m,onChange:ae=>p(ae.target.value),className:"form-control"})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:v,onChange:ae=>g(ae.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Statuses"}),se.map(ae=>a.jsx("option",{value:ae,children:ae},ae))]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:b,onChange:ae=>y(ae.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Priorities"}),oe.map(ae=>a.jsx("option",{value:ae,children:ae},ae))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{p(""),g(""),y("")},children:"Clear Filters"})})]})})}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{className:"modal-title",children:o?"Edit Proposal":"Create New Proposal"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),l(null),M()}})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="basic"?"active":""}`,onClick:()=>E("basic"),children:"Basic Info"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="business"?"active":""}`,onClick:()=>E("business"),children:"Business Details"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="technical"?"active":""}`,onClick:()=>E("technical"),children:"Technical"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="commercial"?"active":""}`,onClick:()=>E("commercial"),children:"Commercial"})})]}),a.jsxs("form",{onSubmit:V,children:[D==="basic"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Select Lead *"}),a.jsxs("select",{name:"leadId",className:"form-select",value:T.leadId,onChange:te,required:!0,disabled:o,children:[a.jsx("option",{value:"",children:"Select a qualified lead..."}),r.map(ae=>a.jsxs("option",{value:ae._id,children:[ae.companyName," - ",ae.contactPersonName]},ae._id))]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Proposal Title *"}),a.jsx("input",{type:"text",name:"title",className:"form-control",value:T.title,onChange:te,required:!0,placeholder:"Enter proposal title"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Description *"}),a.jsx("textarea",{name:"description",className:"form-control",value:T.description,onChange:te,required:!0,rows:"4",placeholder:"Enter proposal description"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Proposal Value *"}),a.jsx("input",{type:"number",name:"proposalValue",className:"form-control",value:T.proposalValue,onChange:te,required:!0,min:"0",step:"0.01"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Currency"}),a.jsx("select",{name:"currency",className:"form-select",value:T.currency,onChange:te,children:G.map(ae=>a.jsx("option",{value:ae,children:ae},ae))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Period (Days)"}),a.jsx("input",{type:"number",name:"validityPeriod",className:"form-control",value:T.validityPeriod,onChange:te,min:"1",max:"365"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{name:"status",className:"form-select",value:T.status,onChange:te,children:se.map(ae=>a.jsx("option",{value:ae,children:ae},ae))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{name:"priority",className:"form-select",value:T.priority,onChange:te,children:oe.map(ae=>a.jsx("option",{value:ae,children:ae},ae))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Created By"}),a.jsx("input",{type:"text",name:"createdBy",className:"form-control",value:T.createdBy,onChange:te})]})]}),D==="business"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Business Objective"}),a.jsx("textarea",{name:"businessObjective",className:"form-control",value:T.businessObjective,onChange:te,rows:"3",placeholder:"Describe the business objective"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Solution"}),a.jsx("textarea",{name:"proposedSolution",className:"form-control",value:T.proposedSolution,onChange:te,rows:"4",placeholder:"Describe the proposed solution"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Timeline"}),a.jsx("textarea",{name:"timeline",className:"form-control",value:T.timeline,onChange:te,rows:"3",placeholder:"Project timeline and milestones"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Duration (Days)"}),a.jsx("input",{type:"number",name:"projectDuration",className:"form-control",value:T.projectDuration,onChange:te,min:"1"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Team Composition"}),a.jsx("textarea",{name:"teamComposition",className:"form-control",value:T.teamComposition,onChange:te,rows:"3",placeholder:"Describe the project team composition"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Risk Assessment"}),a.jsx("textarea",{name:"riskAssessment",className:"form-control",value:T.riskAssessment,onChange:te,rows:"3",placeholder:"Risk assessment and mitigation strategies"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Company Credentials"}),a.jsx("textarea",{name:"companyCredentials",className:"form-control",value:T.companyCredentials,onChange:te,rows:"4",placeholder:"Company credentials and past experience"})]})]}),D==="technical"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Technical Requirements"}),a.jsx("textarea",{name:"technicalRequirements",className:"form-control",value:T.technicalRequirements,onChange:te,rows:"5",placeholder:"Detailed technical requirements"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Technology"}),a.jsx("textarea",{name:"proposedTechnology",className:"form-control",value:T.proposedTechnology,onChange:te,rows:"4",placeholder:"Technology stack and tools to be used"})]})]}),D==="commercial"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Payment Terms"}),a.jsx("textarea",{name:"paymentTerms",className:"form-control",value:T.paymentTerms,onChange:te,rows:"3",placeholder:"Payment terms and conditions"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Delivery Terms"}),a.jsx("textarea",{name:"deliveryTerms",className:"form-control",value:T.deliveryTerms,onChange:te,rows:"3",placeholder:"Delivery terms and conditions"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Warranty Terms"}),a.jsx("textarea",{name:"warrantyTerms",className:"form-control",value:T.warrantyTerms,onChange:te,rows:"3",placeholder:"Warranty and support terms"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Internal Notes"}),a.jsx("textarea",{name:"internalNotes",className:"form-control",value:T.internalNotes,onChange:te,rows:"3",placeholder:"Internal notes (not visible to client)"})]})]}),a.jsx("div",{className:"row mt-4",children:a.jsxs("div",{className:"col-12 d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),l(null),M()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Proposal":"Create Proposal"})]})})]})]})]})})}),c&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{className:"modal-title",children:["Proposal Details - ",c.proposalNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(null)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Company:"})," ",c.leadId?.companyName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Contact:"})," ",c.leadId?.contactPersonName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Title:"})," ",c.title]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Value:"})," ",c.currency," ",c.proposalValue?.toLocaleString()]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Status:"}),a.jsx("span",{className:`badge bg-${ce(c.status)} ms-2`,children:c.status})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Priority:"}),a.jsx("span",{className:`badge bg-${Z(c.priority)} ms-2`,children:c.priority})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Description:"}),a.jsx("p",{children:c.description})]}),c.businessObjective&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Business Objective:"}),a.jsx("p",{children:c.businessObjective})]}),c.proposedSolution&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Proposed Solution:"}),a.jsx("p",{children:c.proposedSolution})]})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(null),children:"Close"})})]})})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Proposals"})}),a.jsx("div",{className:"card-body p-0",children:a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered mb-2 mt-2",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx("input",{type:"checkbox",checked:u.length===ne.length&&ne.length>0,onChange:re})}),a.jsx("th",{children:"Proposal #"}),a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ne.length>0?ne.map(ae=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:u.includes(ae._id),onChange:()=>z(ae._id)})}),a.jsx("td",{children:a.jsx("strong",{children:ae.proposalNumber})}),a.jsx("td",{children:ae.leadId?.companyName||"N/A"}),a.jsx("td",{children:ae.title}),a.jsxs("td",{children:[ae.currency," ",ae.proposalValue?.toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${ce(ae.status)}`,children:ae.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${Z(ae.priority)}`,children:ae.priority})}),a.jsx("td",{children:new Date(ae.createdAt).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-primary",onClick:()=>ee(ae),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-outline-info",onClick:()=>O(ae),title:"Print",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{className:"btn btn-outline-warning",onClick:()=>W(ae),title:"Edit",children:a.jsx("i",{className:"fas fa-edit"})}),ae.status==="Draft"&&a.jsx("button",{className:"btn btn-outline-success",onClick:()=>K(ae._id),title:"Submit",children:a.jsx("i",{className:"fas fa-paper-plane"})}),a.jsx("button",{className:"btn btn-outline-danger",onClick:()=>ue(ae._id),title:"Delete",children:a.jsx("i",{className:"fas fa-trash"})})]})})]},ae._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center py-4",children:e.length===0?"No proposals available":"No proposals match your search criteria"})})})]})})})]})]})}const OMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({name:"",description:""}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const k=await(await fetch(`/api/crm/sources?companyId=${m}&financialYear=${p}`)).json();t(k),i("")}catch{i("Failed to load sources")}finally{n(!1)}},g=()=>{d(null),h({name:"",description:""}),l(!0)},b=N=>{d(N),h({name:N.name,description:N.description}),l(!0)},y=async N=>{N.preventDefault();try{const k=c?`/api/crm/sources/${c._id}`:"/api/crm/sources";(await fetch(k,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p})})).ok?(await v(),l(!1),i("")):i("Failed to save source")}catch{i("Failed to save source")}},C=async N=>{if(window.confirm("Are you sure you want to delete this source?"))try{(await fetch(`/api/crm/sources/${N}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete source")}catch{i("Failed to delete source")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Sources Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Source"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(N=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:N.name}),a.jsx("td",{children:N.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${N.isActive?"bg-success":"bg-secondary"}`,children:N.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(N.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(N),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(N._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},N._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Source":"Add Source"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Source Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.name,onChange:N=>h({...u,name:N.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:N=>h({...u,description:N.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},MMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({reason:"",category:"",description:""}),m=["Price","Competition","Timeline","Budget","Feature","Service","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");w.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/lost-reasons?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load lost reasons")}finally{n(!1)}},b=()=>{d(null),h({reason:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({reason:S.reason,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/lost-reasons/${c._id}`:"/api/crm/lost-reasons";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save lost reason")}catch{i("Failed to save lost reason")}},N=async S=>{if(window.confirm("Are you sure you want to delete this lost reason?"))try{(await fetch(`/api/crm/lost-reasons/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete lost reason")}catch{i("Failed to delete lost reason")}},k=S=>({Price:"bg-danger",Competition:"bg-warning",Timeline:"bg-info",Budget:"bg-danger",Feature:"bg-primary",Service:"bg-secondary",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Lost Reasons Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Lost Reason"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.reason}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>N(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Lost Reason":"Add Lost Reason"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Lost Reason"}),a.jsx("input",{type:"text",className:"form-control",value:u.reason,onChange:S=>h({...u,reason:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},RMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({stageName:"",description:"",probability:0,color:"#007bff"}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");w.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const S=await(await fetch(`/api/crm/contact-stages?companyId=${m}&financialYear=${p}`)).json();t(S.sort((D,E)=>D.order-E.order)),i("")}catch{i("Failed to load contact stages")}finally{n(!1)}},g=()=>{d(null),h({stageName:"",description:"",probability:0,color:"#007bff"}),l(!0)},b=k=>{d(k),h({stageName:k.stageName,description:k.description,probability:k.probability,color:k.color}),l(!0)},y=async k=>{k.preventDefault();try{const S=c?`/api/crm/contact-stages/${c._id}`:"/api/crm/contact-stages";(await fetch(S,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p,order:c?c.order:e.length+1})})).ok?(await v(),l(!1),i("")):i("Failed to save contact stage")}catch{i("Failed to save contact stage")}},C=async k=>{if(window.confirm("Are you sure you want to delete this contact stage?"))try{(await fetch(`/api/crm/contact-stages/${k}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete contact stage")}catch{i("Failed to delete contact stage")}},N=async(k,S)=>{try{(await fetch(`/api/crm/contact-stages/${k}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:S})})).ok?await v():i("Failed to reorder contact stage")}catch{i("Failed to reorder contact stage")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Contact Stages Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Contact Stage"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Stage Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Probability %"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"me-2",children:k.order}),a.jsxs("div",{className:"btn-group-vertical btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>N(k._id,"up"),disabled:S===0,children:a.jsx("i",{className:"fas fa-chevron-up"})}),a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>N(k._id,"down"),disabled:S===e.length-1,children:a.jsx("i",{className:"fas fa-chevron-down"})})]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge text-white",style:{backgroundColor:k.color},children:k.stageName})}),a.jsx("td",{children:k.description}),a.jsxs("td",{children:[k.probability,"%"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k.isActive?"bg-success":"bg-secondary"}`,children:k.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(k.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(k),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(k._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},k._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Contact Stage":"Add Contact Stage"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Stage Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.stageName,onChange:k=>h({...u,stageName:k.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:k=>h({...u,description:k.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Probability (%)"}),a.jsx("input",{type:"number",className:"form-control",min:"0",max:"100",value:u.probability,onChange:k=>h({...u,probability:Number(k.target.value)}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Color"}),a.jsx("input",{type:"color",className:"form-control form-control-color",value:u.color,onChange:k=>h({...u,color:k.target.value})})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},FMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({industryName:"",category:"",description:""}),m=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Real Estate","Transportation","Energy","Media","Hospitality","Construction","Agriculture","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");w.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/industries?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load industries")}finally{n(!1)}},b=()=>{d(null),h({industryName:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({industryName:S.industryName,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/industries/${c._id}`:"/api/crm/industries";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save industry")}catch{i("Failed to save industry")}},N=async S=>{if(window.confirm("Are you sure you want to delete this industry?"))try{(await fetch(`/api/crm/industries/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete industry")}catch{i("Failed to delete industry")}},k=S=>({Technology:"bg-primary",Healthcare:"bg-success",Finance:"bg-warning",Manufacturing:"bg-info",Retail:"bg-secondary",Education:"bg-primary","Real Estate":"bg-success",Transportation:"bg-info",Energy:"bg-warning",Media:"bg-secondary",Hospitality:"bg-primary",Construction:"bg-info",Agriculture:"bg-success",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Industry Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Industry"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Industry Name"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.industryName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>N(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Industry":"Add Industry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Industry Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.industryName,onChange:S=>h({...u,industryName:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},LMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({callType:"",purpose:"",outcome:"",description:""}),m=["Inbound","Outbound","Missed","Voicemail"],p=["Sales","Support","Follow-up","Demo","Meeting","Consultation","Other"],v=["Successful","No Answer","Busy","Follow-up Required","Completed","Cancelled","Rescheduled"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/crm/calls?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load calls")}finally{n(!1)}},C=()=>{d(null),h({callType:"",purpose:"",outcome:"",description:""}),l(!0)},N=A=>{d(A),h({callType:A.callType,purpose:A.purpose,outcome:A.outcome,description:A.description}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/crm/calls/${c._id}`:"/api/crm/calls";(await fetch(L,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:g,financialYear:b})})).ok?(await y(),l(!1),i("")):i("Failed to save call")}catch{i("Failed to save call")}},S=async A=>{if(window.confirm("Are you sure you want to delete this call setting?"))try{(await fetch(`/api/crm/calls/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete call")}catch{i("Failed to delete call")}},D=A=>{switch(A){case"Inbound":return"fas fa-phone-alt text-success";case"Outbound":return"fas fa-phone text-primary";case"Missed":return"fas fa-phone-slash text-danger";case"Voicemail":return"fas fa-voicemail text-warning";default:return"fas fa-phone"}},E=A=>{switch(A){case"Successful":case"Completed":return"bg-success";case"Follow-up Required":case"Rescheduled":return"bg-warning";case"No Answer":case"Busy":case"Cancelled":return"bg-danger";default:return"bg-secondary"}},T=A=>{switch(A){case"Sales":return"bg-success";case"Support":return"bg-info";case"Follow-up":return"bg-warning";case"Demo":return"bg-primary";case"Meeting":return"bg-secondary";default:return"bg-dark"}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Call Settings Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Call Setting"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Call Type"}),a.jsx("th",{children:"Purpose"}),a.jsx("th",{children:"Outcome"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:D(A.callType)}),a.jsx("span",{className:"ms-2",children:A.callType})]})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(A.purpose)}`,children:A.purpose})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.outcome)}`,children:A.outcome})}),a.jsx("td",{children:A.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.isActive?"bg-success":"bg-secondary"}`,children:A.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(A.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Call Setting":"Add Call Setting"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Call Type"}),a.jsxs("select",{className:"form-select",value:u.callType,onChange:A=>h({...u,callType:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Call Type"}),m.map(A=>a.jsx("option",{value:A,children:A},A))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Purpose"}),a.jsxs("select",{className:"form-select",value:u.purpose,onChange:A=>h({...u,purpose:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Purpose"}),p.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Outcome"}),a.jsxs("select",{className:"form-select",value:u.outcome,onChange:A=>h({...u,outcome:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Outcome"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:A=>h({...u,description:A.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},BMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(""),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),v=["Pending","In Progress","Completed","Delayed","Cancelled"],g=["Low","Medium","High","Critical"],b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");w.useEffect(()=>{C(),N()},[]);const C=async()=>{i(!0);try{const O=await(await fetch(`/api/milestones?companyId=${b}&financialYear=${y}`)).json();t(O),l("")}catch{l("Failed to load milestones")}finally{i(!1)}},N=async()=>{try{const O=await(await fetch(`/api/projects?companyId=${b}&financialYear=${y}`)).json();n(O)}catch{console.error("Failed to load projects")}},k=()=>{h(null),p({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),d(!0)},S=P=>{h(P),p({milestoneName:P.milestoneName,description:P.description,projectId:P.projectId._id||P.projectId,dueDate:P.dueDate?P.dueDate.split("T")[0]:"",status:P.status,priority:P.priority,deliverables:P.deliverables.join(`
`),budget:P.budget,completionPercentage:P.completionPercentage}),d(!0)},D=async P=>{P.preventDefault();try{const O=u?`/api/milestones/${u._id}`:"/api/milestones",Q=u?"PUT":"POST",z={...m,deliverables:m.deliverables.split(`
`).filter(U=>U.trim()),companyId:b,financialYear:y};(await fetch(O,{method:Q,headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).ok?(await C(),d(!1),l("")):l("Failed to save milestone")}catch{l("Failed to save milestone")}},E=async P=>{if(window.confirm("Are you sure you want to delete this milestone?"))try{(await fetch(`/api/milestones/${P}`,{method:"DELETE"})).ok?(await C(),l("")):l("Failed to delete milestone")}catch{l("Failed to delete milestone")}},T=P=>({Pending:"bg-secondary","In Progress":"bg-primary",Completed:"bg-success",Delayed:"bg-warning",Cancelled:"bg-danger"})[P]||"bg-secondary",A=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",L=P=>P?new Date(P)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-flag-checkered me-2"}),"Milestones Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:k,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Milestone"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Milestone Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Deliverables"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.dueDate)&&P.status!=="Completed"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.milestoneName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:P.projectId?.projectName||"No Project"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px",width:"100px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${P.completionPercentage}%`},children:[P.completionPercentage,"%"]})})}),a.jsx("td",{children:P.dueDate?a.jsxs("div",{children:[new Date(P.dueDate).toLocaleDateString(),L(P.dueDate)&&P.status!=="Completed"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-info",children:[P.deliverables?.length||0," items"]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>S(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Milestone":"Add Milestone"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:D,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Milestone Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.milestoneName,onChange:P=>p({...m,milestoneName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:P=>p({...m,projectId:P.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(P=>a.jsx("option",{value:P._id,children:P.projectName},P._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:P=>p({...m,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:P=>p({...m,status:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:P=>p({...m,priority:P.target.value}),required:!0,children:g.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:P=>p({...m,dueDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:m.budget,onChange:P=>p({...m,budget:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Completion Percentage"}),a.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:m.completionPercentage,onChange:P=>p({...m,completionPercentage:P.target.value})}),a.jsxs("div",{className:"text-center",children:[m.completionPercentage,"%"]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Deliverables (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:m.deliverables,onChange:P=>p({...m,deliverables:P.target.value}),placeholder:`Design mockups
Database schema
API documentation`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},UMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(""),[c,d]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),v=["To Do","In Progress","Review","Testing","Done","Blocked"],g=["Low","Medium","High","Critical"],b=["Development","Testing","Design","Documentation","Bug Fix","Research","Other"],y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear");w.useEffect(()=>{N(),k()},[]);const N=async()=>{i(!0);try{const Q=await(await fetch(`/api/tasks?companyId=${y}&financialYear=${C}`)).json();t(Q),l("")}catch{l("Failed to load tasks")}finally{i(!1)}},k=async()=>{try{const Q=await(await fetch(`/api/projects?companyId=${y}&financialYear=${C}`)).json();n(Q)}catch{console.error("Failed to load projects")}},S=()=>{h(null),p({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),d(!0)},D=O=>{h(O),p({taskName:O.taskName,description:O.description,projectId:O.projectId._id||O.projectId,assignedTo:O.assignedTo,status:O.status,priority:O.priority,dueDate:O.dueDate?O.dueDate.split("T")[0]:"",estimatedHours:O.estimatedHours,actualHours:O.actualHours,category:O.category}),d(!0)},E=async O=>{O.preventDefault();try{const Q=u?`/api/tasks/${u._id}`:"/api/tasks";(await fetch(Q,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,companyId:y,financialYear:C})})).ok?(await N(),d(!1),l("")):l("Failed to save task")}catch{l("Failed to save task")}},T=async O=>{if(window.confirm("Are you sure you want to delete this task?"))try{(await fetch(`/api/tasks/${O}`,{method:"DELETE"})).ok?(await N(),l("")):l("Failed to delete task")}catch{l("Failed to delete task")}},A=O=>({"To Do":"bg-secondary","In Progress":"bg-primary",Review:"bg-warning",Testing:"bg-info",Done:"bg-success",Blocked:"bg-danger"})[O]||"bg-secondary",L=O=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[O]||"bg-secondary",P=O=>O?new Date(O)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-tasks me-2"}),"Tasks Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:S,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Task"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Task Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(O=>a.jsxs("tr",{className:P(O.dueDate)&&O.status!=="Done"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:O.taskName}),O.description&&a.jsxs("div",{className:"text-muted small",children:[O.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:O.projectId?.projectName||"No Project"}),a.jsx("td",{children:O.assignedTo}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(O.status)}`,children:O.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${L(O.priority)}`,children:O.priority})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:O.category})}),a.jsx("td",{children:O.dueDate?a.jsxs("div",{children:[new Date(O.dueDate).toLocaleDateString(),P(O.dueDate)&&O.status!=="Done"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Est: ",O.estimatedHours||0,"h"]}),a.jsxs("div",{children:["Act: ",O.actualHours||0,"h"]})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>D(O),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(O._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Task":"Add Task"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:E,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.taskName,onChange:O=>p({...m,taskName:O.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:O=>p({...m,projectId:O.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(O=>a.jsx("option",{value:O._id,children:O.projectName},O._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:O=>p({...m,description:O.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:O=>p({...m,status:O.target.value}),required:!0,children:v.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:O=>p({...m,priority:O.target.value}),required:!0,children:g.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:m.category,onChange:O=>p({...m,category:O.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),b.map(O=>a.jsx("option",{value:O,children:O},O))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:m.assignedTo,onChange:O=>p({...m,assignedTo:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:O=>p({...m,dueDate:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Estimated Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.estimatedHours,onChange:O=>p({...m,estimatedHours:O.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.actualHours,onChange:O=>p({...m,actualHours:O.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},$Me=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!1),[c,d]=w.useState(""),[u,h]=w.useState(!1),[m,p]=w.useState(null),[v,g]=w.useState(!1),[b,y]=w.useState(0),[C,N]=w.useState({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear");w.useEffect(()=>{D(),E(),T()},[]),w.useEffect(()=>{let B=null;return v?B=setInterval(()=>{y(Y=>Y+1)},1e3):!v&&b!==0&&clearInterval(B),()=>clearInterval(B)},[v,b]);const D=async()=>{l(!0);try{const Y=await(await fetch(`/api/time-entries?companyId=${k}&financialYear=${S}`)).json();t(Y),d("")}catch{d("Failed to load time entries")}finally{l(!1)}},E=async()=>{try{const Y=await(await fetch(`/api/projects?companyId=${k}&financialYear=${S}`)).json();n(Y)}catch{console.error("Failed to load projects")}},T=async()=>{try{const Y=await(await fetch(`/api/tasks?companyId=${k}&financialYear=${S}`)).json();i(Y)}catch{console.error("Failed to load tasks")}},A=()=>{g(!0),y(0);const B=new Date;N({...C,startTime:B.toTimeString().slice(0,5),date:B.toISOString().split("T")[0]})},L=()=>{g(!1);const B=new Date,Y=(b/3600).toFixed(2);N({...C,endTime:B.toTimeString().slice(0,5),hours:Y}),h(!0)},P=B=>{const Y=Math.floor(B/3600),K=Math.floor(B%3600/60),ue=B%60;return`${Y.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`},O=()=>{p(null),N({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),h(!0)},Q=B=>{p(B),N({projectId:B.projectId._id||B.projectId,taskId:B.taskId?._id||B.taskId||"",description:B.description,startTime:B.startTime,endTime:B.endTime,hours:B.hours,date:B.date?B.date.split("T")[0]:"",billable:B.billable}),h(!0)},z=async B=>{B.preventDefault();try{const Y=m?`/api/time-entries/${m._id}`:"/api/time-entries";(await fetch(Y,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,companyId:k,financialYear:S})})).ok?(await D(),h(!1),d(""),y(0)):d("Failed to save time entry")}catch{d("Failed to save time entry")}},re=async B=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{(await fetch(`/api/time-entries/${B}`,{method:"DELETE"})).ok?(await D(),d("")):d("Failed to delete time entry")}catch{d("Failed to delete time entry")}},U=()=>e.reduce((B,Y)=>B+parseFloat(Y.hours||0),0).toFixed(2),X=()=>e.filter(B=>B.billable).reduce((B,Y)=>B+parseFloat(Y.hours||0),0).toFixed(2);return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body text-center",children:[a.jsx("h3",{className:"display-4 mb-3",children:P(b)}),a.jsxs("div",{className:"btn-group",children:[v?a.jsxs("button",{className:"btn btn-danger btn-lg",onClick:L,children:[a.jsx("i",{className:"fas fa-stop me-2"}),"Stop Timer"]}):a.jsxs("button",{className:"btn btn-success btn-lg",onClick:A,children:[a.jsx("i",{className:"fas fa-play me-2"}),"Start Timer"]}),a.jsxs("button",{className:"btn btn-secondary btn-lg",onClick:()=>{y(0),g(!1)},children:[a.jsx("i",{className:"fas fa-redo me-2"}),"Reset"]})]})]})})})}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Total Hours"}),a.jsxs("h3",{children:[U(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Billable Hours"}),a.jsxs("h3",{children:[X(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Entries"}),a.jsx("h3",{children:e.length})]})})})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-clock me-2"}),"Time Tracking"]}),a.jsxs("button",{className:"btn btn-primary",onClick:O,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Entry"]})]}),a.jsxs("div",{className:"card-body",children:[c&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Task"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Start Time"}),a.jsx("th",{children:"End Time"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Billable"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(B=>a.jsxs("tr",{children:[a.jsx("td",{children:new Date(B.date).toLocaleDateString()}),a.jsx("td",{children:B.projectId?.projectName||"No Project"}),a.jsx("td",{children:B.taskId?.taskName||"No Task"}),a.jsx("td",{children:B.description}),a.jsx("td",{children:B.startTime}),a.jsx("td",{children:B.endTime}),a.jsxs("td",{className:"fw-bold",children:[B.hours,"h"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${B.billable?"bg-success":"bg-secondary"}`,children:B.billable?"Billable":"Non-billable"})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Q(B),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>re(B._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},B._id))})]})})]})]})})}),u&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:m?"Edit Time Entry":"Add Time Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),a.jsxs("form",{onSubmit:z,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:C.projectId,onChange:B=>N({...C,projectId:B.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(B=>a.jsx("option",{value:B._id,children:B.projectName},B._id))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task (Optional)"}),a.jsxs("select",{className:"form-select",value:C.taskId,onChange:B=>N({...C,taskId:B.target.value}),children:[a.jsx("option",{value:"",children:"Select Task"}),s.filter(B=>B.projectId._id===C.projectId).map(B=>a.jsx("option",{value:B._id,children:B.taskName},B._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:C.description,onChange:B=>N({...C,description:B.target.value}),required:!0})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Date"}),a.jsx("input",{type:"date",className:"form-control",value:C.date,onChange:B=>N({...C,date:B.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.startTime,onChange:B=>N({...C,startTime:B.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.endTime,onChange:B=>N({...C,endTime:B.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Hours"}),a.jsx("input",{type:"number",step:"0.25",className:"form-control",value:C.hours,onChange:B=>N({...C,hours:B.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"form-check mt-4",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:C.billable,onChange:B=>N({...C,billable:B.target.checked})}),a.jsx("label",{className:"form-check-label",children:"Billable"})]})})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:m?"Update":"Create"})]})]})]})})})]})},VMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),m=["Planning","In Progress","Testing","Completed","On Hold","Cancelled"],p=["Low","Medium","High","Critical"],v=["Web Development","Mobile App","Desktop App","API Development","Data Analysis","Other"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/projects?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load projects")}finally{n(!1)}},C=()=>{d(null),h({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),l(!0)},N=A=>{d(A),h({projectName:A.projectName,description:A.description,clientName:A.clientName,startDate:A.startDate?A.startDate.split("T")[0]:"",endDate:A.endDate?A.endDate.split("T")[0]:"",budget:A.budget,status:A.status,priority:A.priority,projectManager:A.projectManager,teamMembers:A.teamMembers.join(", "),technologies:A.technologies.join(", "),category:A.category}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/projects/${c._id}`:"/api/projects",P=c?"PUT":"POST",O={...u,teamMembers:u.teamMembers.split(",").map(z=>z.trim()).filter(z=>z),technologies:u.technologies.split(",").map(z=>z.trim()).filter(z=>z),companyId:g,financialYear:b};(await fetch(L,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok?(await y(),l(!1),i("")):i("Failed to save project")}catch{i("Failed to save project")}},S=async A=>{if(window.confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete project")}catch{i("Failed to delete project")}},D=A=>({Planning:"bg-info","In Progress":"bg-primary",Testing:"bg-warning",Completed:"bg-success","On Hold":"bg-secondary",Cancelled:"bg-danger"})[A]||"bg-secondary",E=A=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[A]||"bg-secondary",T=(A,L)=>{if(!A||!L)return 0;const P=new Date(A),O=new Date(L),Q=new Date;if(Q<P)return 0;if(Q>O)return 100;const z=O-P,re=Q-P;return Math.round(re/z*100)};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-project-diagram me-2"}),"Projects Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Project"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Project Name"}),a.jsx("th",{children:"Client"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Project Manager"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:A.projectName}),A.category&&a.jsx("div",{className:"text-muted small",children:A.category})]})}),a.jsx("td",{children:A.clientName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(A.status)}`,children:A.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.priority)}`,children:A.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${T(A.startDate,A.endDate)}%`},children:[T(A.startDate,A.endDate),"%"]})})}),a.jsx("td",{children:A.budget?`$${Number(A.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:A.startDate?new Date(A.startDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.endDate?new Date(A.endDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.projectManager}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Project":"Add Project"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectName,onChange:A=>h({...u,projectName:A.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Client Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.clientName,onChange:A=>h({...u,clientName:A.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:A=>h({...u,description:A.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:A=>h({...u,status:A.target.value}),required:!0,children:m.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:A=>h({...u,priority:A.target.value}),required:!0,children:p.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:A=>h({...u,category:A.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:A=>h({...u,startDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:A=>h({...u,endDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:A=>h({...u,budget:A.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Manager"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectManager,onChange:A=>h({...u,projectManager:A.target.value})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Team Members (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.teamMembers,onChange:A=>h({...u,teamMembers:A.target.value}),placeholder:"John Doe, Jane Smith, Bob Johnson"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Technologies (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.technologies,onChange:A=>h({...u,technologies:A.target.value}),placeholder:"React, Node.js, MongoDB"})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},qMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,d]=w.useState(null),[u,h]=w.useState({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),m=["Email","Social Media","Google Ads","Facebook Ads","Content Marketing","Print","TV/Radio","Event","Influencer","SEO","Other"],p=["Draft","Scheduled","Active","Paused","Completed","Cancelled"],v=["Low","Medium","High","Critical"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");w.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const O=await(await fetch(`/api/campaigns?companyId=${g}&financialYear=${b}`)).json();t(O),i("")}catch{i("Failed to load campaigns")}finally{n(!1)}},C=()=>{d(null),h({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),l(!0)},N=P=>{d(P),h({campaignName:P.campaignName,description:P.description,campaignType:P.campaignType,status:P.status,startDate:P.startDate?P.startDate.split("T")[0]:"",endDate:P.endDate?P.endDate.split("T")[0]:"",budget:P.budget,targetAudience:P.targetAudience,channels:P.channels.join(", "),objectives:P.objectives.join(`
`),expectedROI:P.expectedROI,actualROI:P.actualROI,leads:P.leads,conversions:P.conversions,clickThroughRate:P.clickThroughRate,openRate:P.openRate,assignedTo:P.assignedTo,priority:P.priority}),l(!0)},k=async P=>{P.preventDefault();try{const O=c?`/api/campaigns/${c._id}`:"/api/campaigns",Q=c?"PUT":"POST",z={...u,channels:u.channels.split(",").map(U=>U.trim()).filter(U=>U),objectives:u.objectives.split(`
`).map(U=>U.trim()).filter(U=>U),companyId:g,financialYear:b};(await fetch(O,{method:Q,headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).ok?(await y(),l(!1),i("")):i("Failed to save campaign")}catch{i("Failed to save campaign")}},S=async P=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{(await fetch(`/api/campaigns/${P}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete campaign")}catch{i("Failed to delete campaign")}},D=P=>({Draft:"bg-secondary",Scheduled:"bg-info",Active:"bg-success",Paused:"bg-warning",Completed:"bg-primary",Cancelled:"bg-danger"})[P]||"bg-secondary",E=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",T=(P,O)=>!P||!O||O===0?0:((P-O)/O*100).toFixed(2),A=(P,O)=>!P||!O||O===0?0:(P/O*100).toFixed(2),L=(P,O)=>{const Q=new Date,z=new Date(P),re=new Date(O);return Q>=z&&Q<=re};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-bullhorn me-2"}),"Campaign Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Campaign"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Period"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.startDate,P.endDate)&&P.status==="Active"?"table-success":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.campaignName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:P.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Start: ",P.startDate?new Date(P.startDate).toLocaleDateString():"N/A"]}),a.jsxs("div",{children:["End: ",P.endDate?new Date(P.endDate).toLocaleDateString():"N/A"]})]})}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:P.leads||0})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("span",{className:"badge bg-success",children:P.conversions||0}),a.jsxs("div",{className:"small text-muted",children:[A(P.conversions,P.leads),"% rate"]})]})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsxs("div",{className:"fw-bold",children:[T(P.actualROI,P.budget),"%"]}),a.jsxs("div",{className:"small text-muted",children:["$",P.actualROI?Number(P.actualROI).toLocaleString():0]})]})}),a.jsx("td",{children:P.assignedTo}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>N(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Campaign":"Add Campaign"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.campaignName,onChange:P=>h({...u,campaignName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Type"}),a.jsx("select",{className:"form-select",value:u.campaignType,onChange:P=>h({...u,campaignType:P.target.value}),required:!0,children:m.map(P=>a.jsx("option",{value:P,children:P},P))})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:P=>h({...u,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:P=>h({...u,status:P.target.value}),required:!0,children:p.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:P=>h({...u,priority:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:P=>h({...u,startDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:P=>h({...u,endDate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:P=>h({...u,budget:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Expected ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.expectedROI,onChange:P=>h({...u,expectedROI:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.actualROI,onChange:P=>h({...u,actualROI:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Leads Generated"}),a.jsx("input",{type:"number",className:"form-control",value:u.leads,onChange:P=>h({...u,leads:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Conversions"}),a.jsx("input",{type:"number",className:"form-control",value:u.conversions,onChange:P=>h({...u,conversions:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Click Through Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.clickThroughRate,onChange:P=>h({...u,clickThroughRate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Open Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.openRate,onChange:P=>h({...u,openRate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Target Audience"}),a.jsx("input",{type:"text",className:"form-control",value:u.targetAudience,onChange:P=>h({...u,targetAudience:P.target.value}),placeholder:"Demographics, interests, location, etc."})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:u.assignedTo,onChange:P=>h({...u,assignedTo:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Channels (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.channels,onChange:P=>h({...u,channels:P.target.value}),placeholder:"Email, Facebook, Google Ads, Instagram"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Objectives (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.objectives,onChange:P=>h({...u,objectives:P.target.value}),placeholder:`Increase brand awareness
Generate 100 leads
Achieve 5% conversion rate`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},zMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState({totalCampaigns:0,activeCampaigns:0,totalLeads:0,totalConversions:0,averageConversionRate:0,totalBudget:0,totalROI:0,topPerformingCampaign:null}),[o,l]=w.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear");w.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const g=await(await fetch(`/api/campaigns?companyId=${c}&financialYear=${d}`)).json();t(g);const y=await(await fetch(`/api/leads?companyId=${c}&financialYear=${d}`)).json();n(y),h(g,y)}catch(v){console.error("Failed to load analytics data:",v)}finally{l(!1)}},h=(v,g)=>{const b=v.length,y=v.filter(T=>T.status==="Active").length,C=g.length,N=g.filter(T=>T.leadStatus==="Closed Won").length,k=C>0?(N/C*100).toFixed(2):0,S=v.reduce((T,A)=>T+(A.budget||0),0),D=v.reduce((T,A)=>T+(A.actualROI||0),0),E=v.reduce((T,A)=>{const L=A.leads>0?A.conversions/A.leads:0,P=T&&T.leads>0?T.conversions/T.leads:0;return L>P?A:T},null);i({totalCampaigns:b,activeCampaigns:y,totalLeads:C,totalConversions:N,averageConversionRate:k,totalBudget:S,totalROI:D,topPerformingCampaign:E})},m=v=>({Draft:"secondary",Scheduled:"info",Active:"success",Paused:"warning",Completed:"primary",Cancelled:"danger"})[v]||"secondary",p=(v,g)=>!v||!g||g===0?0:((v-g)/g*100).toFixed(2);return a.jsx("div",{className:"container-fluid py-4",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-chart-bar me-2"}),"Campaign Analytics"]})}),a.jsx("div",{className:"card-body",children:o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Campaigns"}),a.jsx("h3",{className:"mb-0",children:s.totalCampaigns}),a.jsxs("small",{children:[s.activeCampaigns," Active"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-bullhorn fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Leads"}),a.jsx("h3",{className:"mb-0",children:s.totalLeads}),a.jsxs("small",{children:[s.totalConversions," Conversions"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-user-plus fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-warning text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Conversion Rate"}),a.jsxs("h3",{className:"mb-0",children:[s.averageConversionRate,"%"]}),a.jsx("small",{children:"Average across all campaigns"})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-percentage fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total ROI"}),a.jsxs("h3",{className:"mb-0",children:["$",s.totalROI.toLocaleString()]}),a.jsxs("small",{children:["Budget: $",s.totalBudget.toLocaleString()]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),s.topPerformingCampaign&&a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-success",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h5",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-trophy me-2"}),"Top Performing Campaign"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Campaign:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignName]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Type:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignType]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Leads:"}),a.jsx("br",{}),s.topPerformingCampaign.leads||0]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Conversions:"}),a.jsx("br",{}),s.topPerformingCampaign.conversions||0]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Conversion Rate:"}),a.jsx("br",{}),s.topPerformingCampaign.leads>0?(s.topPerformingCampaign.conversions/s.topPerformingCampaign.leads*100).toFixed(2):0,"%"]})]})})]})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Campaign Performance Details"})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"Conversion Rate"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"ROI %"})]})}),a.jsx("tbody",{children:e.map(v=>{const g=v.leads>0?(v.conversions/v.leads*100).toFixed(2):0;return a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:v.campaignName}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:v.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${m(v.status)}`,children:v.status})}),a.jsxs("td",{children:["$",(v.budget||0).toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:v.leads||0})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:v.conversions||0})}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${g>=10?"bg-success":g>=5?"bg-warning":"bg-secondary"}`,children:[g,"%"]})}),a.jsxs("td",{children:["$",(v.actualROI||0).toLocaleString()]}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${p(v.actualROI,v.budget)>0?"bg-success":"bg-danger"}`,children:[p(v.actualROI,v.budget),"%"]})})]},v._id)})})]})})})]})})})]})})]})})})})},HMe=()=>{const[e,t]=w.useState({}),[r,n]=w.useState(!1),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(null),[u,h]=w.useState(null),[m,p]=w.useState({currentPage:1,itemsPerPage:5,totalPages:1}),[v,g]=w.useState({companyId:"",firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),[b,y]=w.useState(null),[C,N]=w.useState(null),[k,S]=w.useState([]),[D,E]=w.useState(0);w.useEffect(()=>{P(),A(),T()},[]);const T=async()=>{try{const se=await Oe.get("/api/departments");S(se.data)}catch(se){console.error("Error fetching departments:",se)}},A=async()=>{try{const se=await Oe.get("/api/roles");if(Array.isArray(se.data))i(se.data);else{console.error("Unexpected roles format:",se.data);const oe=L();i(oe.map(G=>({_id:G,roleName:G})))}}catch(se){const oe=L();i(oe.map(G=>({_id:G,roleName:G}))),console.error("Error fetching roles:",se)}},L=()=>{const se=new Set;return o.forEach(oe=>{Array.isArray(oe.role)&&oe.role.forEach(G=>{G&&se.add(G)})}),Array.from(se).sort()},P=async()=>{try{const se=localStorage.getItem("selectedCompanyId"),oe=localStorage.getItem("financialYear"),G=await Oe.get("/api/faculties",{params:{companyId:se,financialYear:oe}});l(G.data);const ce=G.data.reduce((Z,ae)=>{if(ae.employeeId){const je=ae.employeeId.match(/FAC-(\d+)$/);if(je){const de=parseInt(je[1],10);return de>Z?de:Z}}return Z},0);E(ce)}catch(se){console.error("Error fetching faculties:",se)}},[O,Q]=w.useState({isChecking:!1,exists:!1,message:""}),z=async se=>{if(!(!se||!/\S+@\S+\.\S+/.test(se))){Q(oe=>({...oe,isChecking:!0}));try{const G=(await Oe.get(`/api/Faculty/check-email-exists?email=${se}`)).data.exists;Q({isChecking:!1,exists:G,message:G?"This email is already registered":"Email is available"})}catch(oe){console.error("Error checking email:",oe),Q({isChecking:!1,exists:!1,message:"Unable to verify email"})}}},re=w.useRef(null),U=se=>{const oe=se.target.files[0];if(oe){y(oe);const G=new FileReader;G.onloadend=()=>{N(G.result)},G.readAsDataURL(oe)}},X=se=>{const{name:oe,type:G,value:ce,options:Z}=se.target;let ae=ce,je="";if(oe==="phone"){let ie=ce.replace(/\D/g,"");ie.startsWith("91")&&(ie=ie.slice(2)),/^\d{0,10}$/.test(ie)?(ie.length>10&&(ie=ie.slice(0,10)),g(be=>({...be,[oe]:ie})),ie.length===0?je="Phone number is required.":ie.length===1&&!/^[6-9]$/.test(ie)?je="Phone number must start with 6, 7, 8, or 9.":ie.length<10?je="Phone number must be exactly 10 digits.":ie.length===10&&!/^[6-9]\d{9}$/.test(ie)&&(je="Invalid phone number format. It must start with 6, 7, 8, or 9."),ie.length===10&&!je&&(je=""),t(be=>({...be,[oe]:je}))):t(be=>({...be,[oe]:"Only numbers are allowed."}));return}(oe==="firstName"||oe==="lastName")&&(/^[A-Za-z\s]*$/.test(ce)||(je="Only alphabets are allowed.")),oe==="email"&&ce&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ce)&&(je="Enter a valid email."),t(ie=>({...ie,[oe]:je})),G==="select-multiple"&&(ae=Array.from(Z).filter(ie=>ie.selected).map(ie=>ie.value));let de={...v,[oe]:ae};if(g(de),oe==="email"&&(re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{z(ae)},500)),oe==="firstName"&&ce&&!c){const ie=D+1,be=`FAC-${String(ie).padStart(3,"0")}`;g(Ne=>({...Ne,employeeId:be}))}},[B,Y]=w.useState({searchQuery:"",roleName:""}),K=se=>{const{name:oe,value:G}=se.target;Y(ce=>({...ce,[oe]:G}))},ue=()=>o.filter(se=>{if(B.roleName&&!se.role.includes(B.roleName))return!1;if(B.searchQuery){const oe=B.searchQuery.toLowerCase();return se.firstName?.toLowerCase().includes(oe)||se.lastName?.toLowerCase().includes(oe)||se.email?.toLowerCase().includes(oe)||se.employeeId?.toLowerCase().includes(oe)||se.department?.toLowerCase().includes(oe)}return!0}),M=async se=>{se.preventDefault();const oe=Object.values(e).some(Ne=>Ne),G=new Date(v.dob),ce=new Date(v.joinDate);let Z=ce.getFullYear()-G.getFullYear();const ae=ce.getMonth()-G.getMonth(),je=ce.getDate()-G.getDate();if((ae<0||ae===0&&je<0)&&Z--,Z<19){alert("Faculty must be at least 19 years old on the joining date.");return}if(oe){alert("Please fix the validation errors before submitting.");return}let de=v.phone;de.startsWith("+91")||(de="+91"+de);const ie=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const be={companyId:ie,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:de,department:v.department,qualification:v.qualification,otherQualification:v.otherQualification,experience:v.experience,dob:v.dob,joinDate:v.joinDate,address:v.address,gender:v.gender,employmentType:v.employmentType,status:v.status,salary:v.salary,employeeId:v.employeeId,role:v.role};v.password&&v.password.trim()!==""&&(be.password=v.password),console.log("submitData",be);try{let Ne;c?Ne=await Oe.put(`/api/faculties/${c}`,be,{headers:{"Content-Type":"application/json"}}):Ne=await Oe.post("/api/faculties",be,{headers:{"Content-Type":"application/json"}}),alert(Ne.data.message||"Faculty saved successfully!"),V(),P()}catch(Ne){alert(Ne.response?.data?.message||"An error occurred while saving faculty.")}},V=()=>{g({firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),y(null),N(null),Q({}),d(null)},W=se=>{console.log("Editing faculty:",se);const oe={...se,password:""};if(g(oe),d(se._id),se.profilePhoto){const ce=`/${se.profilePhoto.startsWith("/")?se.profilePhoto.substring(1):se.profilePhoto}`;N(ce)}else N(null)},ee=async se=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{await Oe.delete(`/api/faculties/${se}`),alert("Faculty deleted successfully"),P()}catch(oe){alert(oe.response?.data?.message||"Error deleting faculty")}},te=()=>{const se=ue(),oe=Math.max(1,Math.ceil(se.length/m.itemsPerPage));m.totalPages!==oe&&p(Z=>({...Z,totalPages:oe}));const G=(m.currentPage-1)*m.itemsPerPage,ce=G+m.itemsPerPage;return se.slice(G,ce)},ne=se=>{se<1||se>m.totalPages||p(oe=>({...oe,currentPage:se}))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"",children:a.jsx("h3",{children:"Staff Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, employee ID...",name:"searchQuery",value:B.searchQuery,onChange:K})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",name:"roleName",value:B.roleName,onChange:K,children:[a.jsx("option",{value:"",children:"All Roles"}),L().map(se=>a.jsx("option",{value:se,children:se},se))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:V,children:"Add Staff"})})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-center mb-0 table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Experience"}),a.jsx("th",{children:"Join Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:te().length>0?te().map(se=>a.jsxs("tr",{children:[a.jsx("td",{children:se.employeeId}),a.jsxs("td",{children:[se.firstName," ",se.lastName]}),a.jsx("td",{children:se.email}),a.jsx("td",{children:se.phone}),a.jsx("td",{children:se.department}),a.jsxs("td",{children:[se.experience," years"]}),a.jsx("td",{children:se.joinDate}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{className:"btn btn-icon btn-sm btn-soft-warning rounded-pill","data-bs-toggle":"modal","data-bs-target":"#viewModal",onClick:()=>h(se),children:a.jsx("i",{className:"feather-eye"})}),a.jsx("button",{onClick:()=>W(se),className:"btn btn-icon btn-sm btn-soft-info rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>ee(se._id),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",children:a.jsx("i",{className:"feather-trash"})})]})})]},se._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"text-center",children:"No faculties found matching your criteria"})})})]})}),a.jsx("div",{className:"d-flex justify-content-left mt-3",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${m.currentPage===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(m.currentPage-1),children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),[...Array(m.totalPages)].map((se,oe)=>{const G=oe+1;return G===1||G===m.totalPages||G>=m.currentPage-1&&G<=m.currentPage+1?a.jsx("li",{className:`page-item ${m.currentPage===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(G),children:G})},oe):null}),a.jsx("li",{className:`page-item ${m.currentPage===m.totalPages?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ne(m.currentPage+1),children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]}),a.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[a.jsxs("div",{className:"offcanvas-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Staff":"Add Staff"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"offcanvas","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"offcanvas-body",children:a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{children:"Profile Photo"}),a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("input",{type:"file",name:"profilePhoto",accept:"image/*",onChange:U,className:"form-control",style:{maxWidth:"300px"}}),C&&a.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>{y(null),N(null),g(se=>({...se,profilePhoto:""}))},children:"Remove"})]}),C&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:C,alt:"Profile Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"},className:"rounded"})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"First Name"}),a.jsx("input",{type:"text",className:"form-control",name:"firstName",placeholder:"First Name",value:v.firstName,onChange:X,required:!0}),e.firstName&&a.jsx("p",{style:{color:"red"},children:e.firstName})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Last Name"}),a.jsx("input",{type:"text",className:"form-control",name:"lastName",placeholder:"Last Name",value:v.lastName,onChange:X,required:!0}),e.lastName&&a.jsx("p",{style:{color:"red"},children:e.lastName})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",value:v.email,onChange:X,placeholder:"Email",required:!0}),O.isChecking&&a.jsx("small",{className:"text-muted",children:"Checking email..."}),O.message&&!O.isChecking&&a.jsx("small",{className:O.exists?"text-danger":"text-success",children:O.message}),e.email&&a.jsx("p",{style:{color:"red"},children:e.email})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Phone Number"}),a.jsx("input",{type:"text",name:"phone",placeholder:"Phone",className:"form-control",value:v.phone,onChange:X,required:!0}),e.phone&&a.jsx("p",{style:{color:"red"},children:e.phone})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Department"}),a.jsxs("select",{name:"department",value:v.department,onChange:X,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"--Select--"}),k.length>0?k.map(se=>a.jsx("option",{value:se.departmentName,children:se.departmentName},se._id)):a.jsx("option",{disabled:!0,children:"Loading departments..."})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",placeholder:"Employee ID",value:v.employeeId,onChange:X,readOnly:!0,className:"form-control"}),a.jsx("small",{className:"text-muted",children:"Auto-generated"})]})]}),s.length>0?s.map((se,oe)=>{const G=se.roleName;return G?.toLowerCase()==="student"?null:a.jsxs("div",{className:"form-check",style:{display:"flex",gap:"5px",alignItems:"center",marginTop:"9px"},children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`role-${oe}`,value:se.roleName,checked:v.role.includes(se.roleName),onChange:ce=>{const Z=ce.target.checked;g(ae=>{let je;return Z?(je=[...ae.role],je.includes(G)||je.push(G)):je=ae.role.filter(de=>de!==G),{...ae,role:je}})}}),a.jsx("label",{className:"form-check-label mt-1",htmlFor:`role-${oe}`,children:se.roleName})]},se._id||oe)}):a.jsx("p",{children:"No roles found."}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{name:"qualification",className:"form-control",value:v.qualification,onChange:X,required:!0,children:[a.jsx("option",{value:"",children:"Select Qualification"}),a.jsx("option",{value:"BE",children:"BE"}),a.jsx("option",{value:"BTech",children:"BTech"}),a.jsx("option",{value:"MCA",children:"MCA"}),a.jsx("option",{value:"ME",children:"ME"}),a.jsx("option",{value:"MTech",children:"MTech"}),a.jsx("option",{value:"Diploma",children:"Diploma"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),v.qualification==="Other"&&a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Other Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",name:"otherQualification",className:"form-control",value:v.otherQualification||"",onChange:X,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Experience (Years)"}),a.jsx("input",{type:"number",name:"experience",placeholder:"Experience in years",value:v.experience,onChange:se=>{const oe=se.target.value;(oe===""||/^\d{1,2}$/.test(oe)&&Number(oe)>0&&Number(oe)<=50)&&X(se)},min:"1",max:"50",required:!0,className:"form-control"})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Date of Birth"}),a.jsx("input",{type:"date",name:"dob",value:v.dob,onChange:X,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Joining Date"}),a.jsx("input",{type:"date",className:"form-control",name:"joinDate",value:v.joinDate,onChange:X,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Gender"}),a.jsxs("select",{name:"gender",value:v.gender,onChange:X,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",name:"address",placeholder:"Address",value:v.address,onChange:X,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),a.jsxs("select",{id:"employmentType",name:"employmentType",value:v.employmentType,onChange:X,required:!0,className:"form-select",children:[a.jsx("option",{value:"Full-Time",children:"Full-Time"}),a.jsx("option",{value:"Part-Time",children:"Part-Time"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:v.status,onChange:X,required:!0,className:"form-select",children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Salary"}),a.jsx("input",{type:"text",className:"form-control",name:"salary",placeholder:"Salary per month",value:v.salary,onChange:X,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Password ",c?"(Leave blank to keep current)":""]}),a.jsx("input",{type:"password",name:"password",placeholder:c?"Leave blank to keep current":"Password",value:v.password,onChange:X,required:!c,className:"form-control"})]})]}),a.jsxs("div",{className:"row mt-4",children:[a.jsx("div",{className:"col-6",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Submit"})}),a.jsx("div",{className:"col-6 text-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"offcanvas",children:"Cancel"})})]})]})})]})]})})})]})})}),a.jsx("div",{className:"modal fade",id:"viewModal",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Faculty Details"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:u?a.jsx("table",{className:"table table-bordered",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("td",{children:u.employeeId})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsxs("td",{children:[u.firstName," ",u.lastName]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("td",{children:u.email})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Phone"}),a.jsx("td",{children:u.phone})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Department"}),a.jsx("td",{children:u.department})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Qualification"}),a.jsx("td",{children:u.qualification})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Experience"}),a.jsxs("td",{children:[u.experience," years"]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Role"}),a.jsx("td",{children:Array.isArray(u.role)?u.role.join(", "):u.role})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Employment Type"}),a.jsx("td",{children:u.employmentType})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Status"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${u.status==="Active"?"bg-success":"bg-danger"}`,children:u.status})})]})]})}):a.jsx("h6",{children:"No faculty selected"})})]})})}),a.jsx("style",{jsx:!0,children:`
        .checkbox-group {
          display: flex;
          gap: 10px;
          padding: 10px;
          flex-wrap: wrap;
          max-height: 150px;
          overflow-y: auto;
          border: 1px solid #ced4da;
          border-radius: 0.25rem;
          padding: 0.5rem;
        }
        .form-check {
          margin: 5px 0;
        }
        .form-select[multiple] option {
          padding: 8px 12px;
          margin: 2px 0;
        }
        .form-select[multiple] option:checked {
          background-color: #0d6efd;
          color: white;
        }
        .badge {
          font-size: 0.75em;
          padding: 0.25em 0.5em;
        }
      `})]})},WMe=()=>{const[e,t]=w.useState({departmentName:""}),[r,n]=w.useState([]),[s,i]=w.useState(null),[o,l]=w.useState(1),c=5;w.useEffect(()=>{d()},[]);const d=async()=>{try{const N=await Oe.get("/api/departments");n(N.data)}catch(N){console.error("Error fetching departments:",N)}},u=N=>{const{name:k,value:S}=N.target;t(D=>({...D,[k]:S}))},h=async N=>{N.preventDefault();try{s?await Oe.put(`/api/departments/${s}`,e):await Oe.post("/api/departments",e),t({departmentName:""}),i(null),d()}catch(k){console.error(k)}},m=N=>{t({departmentName:N.departmentName}),i(N._id)},p=async N=>{if(window.confirm("Are you sure you want to delete this department?"))try{await Oe.delete(`/api/departments/${N}`),d()}catch(k){console.error(k)}},v=o*c,g=v-c,b=r.slice(g,v),y=Math.ceil(r.length/c),C=N=>l(N);return a.jsxs("div",{className:"container mt-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h3",{className:"text-primary",children:"Department Master"}),a.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>{t({departmentName:""}),i(null)},children:"+ Add Department"})]}),a.jsx("div",{className:"card shadow",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:r.length>0?a.jsxs("table",{className:"table table-bordered table-striped align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Department ID"}),a.jsx("th",{children:"Department Name"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:b.map(N=>a.jsxs("tr",{children:[a.jsx("td",{children:N.dep_id||N._id.slice(-5)}),a.jsx("td",{children:N.departmentName}),a.jsxs("td",{children:[a.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>m(N),children:[a.jsx("i",{className:"bi bi-pencil-square"})," Edit"]}),a.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>p(N._id),children:[a.jsx("i",{className:"bi bi-trash"})," Delete"]})]})]},N._id))})]}):a.jsx("p",{className:"text-muted",children:"No departments added yet."})}),y>1&&a.jsx("nav",{className:"mt-4",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o-1),children:""})}),Array.from({length:y},(N,k)=>a.jsx("li",{className:`page-item ${o===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(k+1),children:k+1})},k)),a.jsx("li",{className:`page-item ${o===y?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o+1),children:""})})]})})]})}),a.jsx("div",{className:"modal fade",id:"department-modal",tabIndex:"-1","aria-labelledby":"departmentModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-sm",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"departmentModalLabel",children:s?"Edit Department":"Add Department"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{t({departmentName:""}),i(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department Name"}),a.jsx("input",{type:"text",name:"departmentName",className:"form-control",value:e.departmentName,onChange:u,placeholder:"Enter department name",required:!0})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100","data-bs-dismiss":"modal",children:s?"Update":"Save"})})]})})})})]})},GMe=()=>{const[e,t]=w.useState([]),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState([]),[c,d]=w.useState(!1),[u,h]=w.useState(null),m=w.useRef();w.useEffect(()=>{p(),v()},[]);const p=()=>{Oe.get("/api/departments").then(S=>t(S.data)).catch(S=>console.error("Error fetching departments",S))},v=()=>{Oe.get("/api/designations").then(S=>l(S.data)).catch(S=>console.error("Error fetching designations",S))},g=()=>{d(!1),n(""),i(""),new window.bootstrap.Modal(m.current).show()},b=()=>{window.bootstrap.Modal.getInstance(m.current).hide()},y=S=>{S.preventDefault();const D={designName:r,departmentId:s};(c?Oe.put(`/api/designations/${u}`,D):Oe.post("/api/designations",D)).then(()=>{v(),b(),k()}).catch(T=>console.error("Error saving designation",T))},C=S=>{d(!0),h(S._id),n(S.designName),i(S.departmentId?._id||""),new window.bootstrap.Modal(m.current).show()},N=S=>{window.confirm("Are you sure you want to delete this designation?")&&Oe.delete(`/api/designations/${S}`).then(()=>v()).catch(D=>console.error("Error deleting designation",D))},k=()=>{n(""),i(""),d(!1),h(null)};return a.jsxs("div",{className:"container mt-3",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsx("h4",{className:"mb-4 text-primary",children:"Material Master"}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add Designation"})})]}),a.jsxs("div",{className:"card p-4",children:[a.jsx("h5",{className:"card-title mb-3",children:"All Designations"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Designation"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:S.designName}),a.jsx("td",{children:S.departmentId?.departmentName||"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>C(S),children:"Edit"}),a.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>N(S._id),children:"Delete"})]})]},S._id)),o.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No designations found"})})]})]})})]}),a.jsx("div",{className:"modal fade",ref:m,tabIndex:"-1","aria-labelledby":"designationModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",id:"designationModalLabel",children:[c?"Edit":"Add"," Designation"]}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Designation Name"}),a.jsx("input",{type:"text",className:"form-control",value:r,onChange:S=>n(S.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department"}),a.jsxs("select",{className:"form-select",value:s,onChange:S=>i(S.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Department --"}),e.map(S=>a.jsx("option",{value:S._id,children:S.departmentName},S._id))]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Add"}),a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:k,children:"Cancel"})]})]})})})})]})},YMe=()=>{const[e,t]=w.useState({employeeId:"",name:"",leaveType:"",fromDate:"",toDate:"",reason:""}),[r,n]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(!1);w.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),t(v=>({...v,employeeId:p.employeeId||"",name:p.username}))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]);const c=async m=>await(await fetch("/api/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json(),d=async m=>await(await fetch(`/api/leave?employeeId=${m}`)).json(),u=m=>{t({...e,[m.target.name]:m.target.value})},h=async()=>{if(!e.leaveType||!e.fromDate||!e.toDate||!e.reason){alert("Please fill in all required fields");return}if(new Date(e.fromDate)>new Date(e.toDate)){alert("From date cannot be later than to date");return}try{const m=await c(e);m.success&&(alert(m.message),n(p=>[...p,m.data]),t(p=>({...p,leaveType:"",fromDate:"",toDate:"",reason:""})),i(!1))}catch(m){alert("Failed to submit leave request"),console.error("Submission error:",m)}};return w.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),p.employeeId&&d(p.employeeId).then(v=>n(v)).catch(v=>console.error("Error fetching leave requests:",v))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]),w.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[s]),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",style:{backgroundColor:"#f8f9fa"},children:[a.jsxs("div",{className:"content container-fluid",style:{padding:"20px",margin:"0 auto"},children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{className:"col",children:a.jsx("h3",{className:"page-title",style:{color:"#333",fontSize:"24px",margin:0},children:"Employee Leave Request"})}),a.jsx("div",{className:"col-auto text-end",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[a.jsx("span",{style:{marginRight:"5px"},children:"+"})," Apply for Leave"]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:a.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[a.jsx("h4",{className:"card-title",style:{marginBottom:"20px",color:"#333"},children:"My Leave Requests"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Leave Type"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"From Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"To Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Reason"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:r.length>0?r.map((m,p)=>a.jsxs("tr",{children:[a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.leaveType}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.fromDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.toDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.reason}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:a.jsx("span",{className:`badge ${m.status==="Approved"?"bg-success":m.status==="Rejected"?"bg-danger":"bg-warning"}`,style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"white",backgroundColor:m.status==="Approved"?"#28a745":m.status==="Rejected"?"#dc3545":"#ffc107"},children:m.status})})]},p)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #dee2e6"},children:"No leave requests found"})})})]})})]})})})})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal fade show",style:{display:"block",zIndex:1050,position:"fixed",top:0,left:0,width:"100%",height:"100%",outline:0,overflow:"auto"},onClick:m=>{m.target===m.currentTarget&&i(!1)},children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:m=>m.stopPropagation(),style:{margin:"1.75rem auto",maxWidth:"500px",pointerEvents:"all"},children:a.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #e9ecef",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h5",{className:"modal-title",style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Apply for Leave"}),a.jsx("button",{type:"button",className:"close",onClick:()=>i(!1),style:{cursor:"pointer",background:"none",border:"none",fontSize:"24px",padding:0,lineHeight:1},children:a.jsx("span",{children:""})})]}),a.jsx("div",{className:"modal-body",style:{padding:"1rem"},children:a.jsxs("div",{children:[a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",value:e.employeeId,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Name"}),a.jsx("input",{type:"text",name:"name",value:e.name,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"3rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:e.leaveType,onChange:u,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"},children:[a.jsx("option",{value:"",children:"Select Leave Type"}),a.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),a.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),a.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),a.jsx("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:e.fromDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:e.toDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Reason"}),a.jsx("textarea",{name:"reason",value:e.reason,onChange:u,className:"form-control",rows:"4",required:!0,placeholder:"Please provide the reason for your leave request...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",resize:"vertical"}})]}),a.jsxs("div",{className:"submit-section",style:{marginTop:"20px"},children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),style:{width:"100%",marginBottom:"10px",backgroundColor:"#6c757d",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{onClick:h,className:"btn btn-danger",disabled:o,style:{width:"100%",backgroundColor:o?"#ccc":"#dc3545",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:o?"not-allowed":"pointer"},children:o?"Submitting...":"Submit Request"})]})]})})]})})}),a.jsx("div",{className:"modal-backdrop fade show",style:{position:"fixed",top:0,left:0,zIndex:1040,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},onClick:()=>i(!1)})]})]})},oK=6048e5,KMe=864e5,YS=6e4,KS=36e5,XMe=1e3,HB=Symbol.for("constructDateFrom");function ba(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&HB in e?e[HB](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ur(e,t){return ba(t||e,e)}function Td(e,t,r){const n=Ur(e,r?.in);return isNaN(t)?ba(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Pd(e,t,r){const n=Ur(e,r?.in);if(isNaN(t))return ba(e,NaN);if(!t)return n;const s=n.getDate(),i=ba(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function lK(e,t,r){return ba(e,+Ur(e)+t)}function QMe(e,t,r){return lK(e,t*KS)}let JMe={};function Kx(){return JMe}function of(e,t){const r=Kx(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ur(e,t?.in),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function $v(e,t){return of(e,{...t,weekStartsOn:1})}function cK(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=ba(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=$v(s),o=ba(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=$v(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function vw(e){const t=Ur(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Cf(e,...t){const r=ba.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Tx(e,t){const r=Ur(e,t?.in);return r.setHours(0,0,0,0),r}function Vv(e,t,r){const[n,s]=Cf(r?.in,e,t),i=Tx(n),o=Tx(s),l=+i-vw(i),c=+o-vw(o);return Math.round((l-c)/KMe)}function ZMe(e,t){const r=cK(e,t),n=ba(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),$v(n)}function i3(e,t,r){const n=Ur(e,r?.in);return n.setTime(n.getTime()+t*YS),n}function gI(e,t,r){return Pd(e,t*3,r)}function eRe(e,t,r){return lK(e,t*1e3)}function gw(e,t,r){return Td(e,t*7,r)}function Yh(e,t,r){return Pd(e,t*12,r)}function WB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ba.bind(null,s));const i=Ur(s,n);(!r||r<i||isNaN(+i))&&(r=i)}),ba(n,r||NaN)}function GB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ba.bind(null,s));const i=Ur(s,n);(!r||r>i||isNaN(+i))&&(r=i)}),ba(n,r||NaN)}function tRe(e,t,r){const[n,s]=Cf(r?.in,e,t);return+Tx(n)==+Tx(s)}function Kh(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bw(e){return!(!Kh(e)&&typeof e!="number"||isNaN(+Ur(e)))}function yw(e,t,r){const[n,s]=Cf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function mx(e,t){const r=Ur(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function jw(e,t,r){const[n,s]=Cf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=mx(n)-mx(s);return i*4+o}function Nw(e,t,r){const[n,s]=Cf(r?.in,e,t);return n.getFullYear()-s.getFullYear()}function rRe(e,t,r){const[n,s]=Cf(r?.in,e,t),i=YB(n,s),o=Math.abs(Vv(n,s));n.setDate(n.getDate()-i*o);const l=+(YB(n,s)===-i),c=i*(o-l);return c===0?0:c}function YB(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function dK(e,t){const r=Ur(e,t?.in);return r.setHours(23,59,59,999),r}function uK(e,t){const r=Ur(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function o3(e,t){const r=Ur(e,t?.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function hK(e,t){const r=Ur(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function fK(e,t){const r=Ur(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function XS(e,t){const r=Ur(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function nRe(e,t){const r=Kx(),n=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ur(e,t?.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const aRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sRe=(e,t,r)=>{let n;const s=aRe[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function XE(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const iRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cRe={date:XE({formats:iRe,defaultWidth:"full"}),time:XE({formats:oRe,defaultWidth:"full"}),dateTime:XE({formats:lRe,defaultWidth:"full"})},dRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uRe=(e,t,r,n)=>dRe[e];function Nb(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const hRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gRe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},bRe={ordinalNumber:gRe,era:Nb({values:hRe,defaultWidth:"wide"}),quarter:Nb({values:fRe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nb({values:mRe,defaultWidth:"wide"}),day:Nb({values:pRe,defaultWidth:"wide"}),dayPeriod:Nb({values:xRe,defaultWidth:"wide",formattingValues:vRe,defaultFormattingWidth:"wide"})};function wb(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jRe(l,h=>h.test(o)):yRe(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function yRe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function jRe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function NRe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const wRe=/^(\d+)(th|st|nd|rd)?/i,SRe=/\d+/i,CRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kRe={any:[/^b/i,/^(a|c)/i]},_Re={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ERe={any:[/1/i,/2/i,/3/i,/4/i]},DRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ARe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ORe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MRe={ordinalNumber:NRe({matchPattern:wRe,parsePattern:SRe,valueCallback:e=>parseInt(e,10)}),era:wb({matchPatterns:CRe,defaultMatchWidth:"wide",parsePatterns:kRe,defaultParseWidth:"any"}),quarter:wb({matchPatterns:_Re,defaultMatchWidth:"wide",parsePatterns:ERe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wb({matchPatterns:DRe,defaultMatchWidth:"wide",parsePatterns:ARe,defaultParseWidth:"any"}),day:wb({matchPatterns:TRe,defaultMatchWidth:"wide",parsePatterns:IRe,defaultParseWidth:"any"}),dayPeriod:wb({matchPatterns:PRe,defaultMatchWidth:"any",parsePatterns:ORe,defaultParseWidth:"any"})},mK={code:"en-US",formatDistance:sRe,formatLong:cRe,formatRelative:uRe,localize:bRe,match:MRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RRe(e,t){const r=Ur(e,t?.in);return Vv(r,XS(r))+1}function bI(e,t){const r=Ur(e,t?.in),n=+$v(r)-+ZMe(r);return Math.round(n/oK)+1}function yI(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=Kx(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=ba(t?.in||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=of(o,t),c=ba(t?.in||e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=of(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function FRe(e,t){const r=Kx(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=yI(e,t),i=ba(t?.in||e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),of(i,t)}function pK(e,t){const r=Ur(e,t?.in),n=+of(r,t)-+FRe(r,t);return Math.round(n/oK)+1}function pa(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const bm={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return pa(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):pa(r+1,2)},d(e,t){return pa(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return pa(e.getHours()%12||12,t.length)},H(e,t){return pa(e.getHours(),t.length)},m(e,t){return pa(e.getMinutes(),t.length)},s(e,t){return pa(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return pa(s,t.length)}},B0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KB={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return bm.y(e,t)},Y:function(e,t,r,n){const s=yI(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return pa(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):pa(i,t.length)},R:function(e,t){const r=cK(e);return pa(r,t.length)},u:function(e,t){const r=e.getFullYear();return pa(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return pa(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return pa(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return bm.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return pa(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=pK(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):pa(s,t.length)},I:function(e,t,r){const n=bI(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):pa(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):bm.d(e,t)},D:function(e,t,r){const n=RRe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):pa(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return pa(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return pa(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return pa(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=B0.noon:n===0?s=B0.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=B0.evening:n>=12?s=B0.afternoon:n>=4?s=B0.morning:s=B0.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return bm.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):bm.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):pa(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):pa(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):bm.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):bm.s(e,t)},S:function(e,t){return bm.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return QB(n);case"XXXX":case"XX":return Lp(n);case"XXXXX":case"XXX":default:return Lp(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return QB(n);case"xxxx":case"xx":return Lp(n);case"xxxxx":case"xxx":default:return Lp(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+XB(n,":");case"OOOO":default:return"GMT"+Lp(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+XB(n,":");case"zzzz":default:return"GMT"+Lp(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return pa(n,t.length)},T:function(e,t,r){return pa(+e,t.length)}};function XB(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+pa(i,2)}function QB(e,t){return e%60===0?(e>0?"-":"+")+pa(Math.abs(e)/60,2):Lp(e,t)}function Lp(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=pa(Math.trunc(n/60),2),i=pa(n%60,2);return r+s+t+i}const JB=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},LRe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return JB(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",JB(n,t)).replace("{{time}}",xK(s,t))},l3={p:xK,P:LRe},BRe=/^D+$/,URe=/^Y+$/,$Re=["D","DD","YY","YYYY"];function VRe(e){return BRe.test(e)}function qRe(e){return URe.test(e)}function zRe(e,t,r){const n=HRe(e,t,r);if(console.warn(n),$Re.includes(e))throw new RangeError(n)}function HRe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WRe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GRe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YRe=/^'([^]*?)'?$/,KRe=/''/g,XRe=/[a-zA-Z]/;function ZB(e,t,r){const n=Kx(),s=r?.locale??n.locale??mK,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Ur(e,r?.in);if(!bw(l))throw new RangeError("Invalid time value");let c=t.match(GRe).map(u=>{const h=u[0];if(h==="p"||h==="P"){const m=l3[h];return m(u,s.formatLong)}return u}).join("").match(WRe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:QRe(u)};if(KB[h])return{isToken:!0,value:u};if(h.match(XRe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!r?.useAdditionalWeekYearTokens&&qRe(h)||!r?.useAdditionalDayOfYearTokens&&VRe(h))&&zRe(h,t,String(e));const m=KB[h[0]];return m(l,h,s.localize,d)}).join("")}function QRe(e){const t=e.match(YRe);return t?t[1].replace(KRe,"'"):e}function e7(e,t){return Ur(e,t?.in).getDate()}function JRe(e,t){return Ur(e,t?.in).getDay()}function ZRe(e,t){const r=Ur(e,t?.in),n=r.getFullYear(),s=r.getMonth(),i=ba(r,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}function eFe(){return Object.assign({},Kx())}function Xh(e,t){return Ur(e,t?.in).getHours()}function tFe(e,t){const r=Ur(e,t?.in).getDay();return r===0?7:r}function Qh(e,t){return Ur(e,t?.in).getMinutes()}function No(e,t){return Ur(e,t?.in).getMonth()}function Mm(e){return Ur(e).getSeconds()}function c3(e){return+Ur(e)}function Dn(e,t){return Ur(e,t?.in).getFullYear()}function Hm(e,t){return+Ur(e)>+Ur(t)}function Ix(e,t){return+Ur(e)<+Ur(t)}function rFe(e,t){return+Ur(e)==+Ur(t)}function nFe(e,t){const r=aFe(t)?new t(0):ba(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function aFe(e){return typeof e=="function"&&e.prototype?.constructor===e}const sFe=10;class vK{subPriority=0;validate(t,r){return!0}}class iFe extends vK{constructor(t,r,n,s,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class oFe extends vK{priority=sFe;subPriority=-1;constructor(t,r){super(),this.context=t||(n=>ba(r,n))}set(t,r){return r.timestampIsSet?t:ba(t,nFe(t,this.context))}}class sa{run(t,r,n,s){const i=this.parse(t,r,n,s);return i?{setter:new iFe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class lFe extends sa{priority=140;parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const Rs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},_u={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Fs(e,t){return e&&{value:t(e.value),rest:e.rest}}function ls(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Eu(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*KS+i*YS+o*XMe),rest:t.slice(r[0].length)}}function gK(e){return ls(Rs.anyDigitsSigned,e)}function Ss(e,t){switch(e){case 1:return ls(Rs.singleDigit,t);case 2:return ls(Rs.twoDigits,t);case 3:return ls(Rs.threeDigits,t);case 4:return ls(Rs.fourDigits,t);default:return ls(new RegExp("^\\d{1,"+e+"}"),t)}}function ww(e,t){switch(e){case 1:return ls(Rs.singleDigitSigned,t);case 2:return ls(Rs.twoDigitsSigned,t);case 3:return ls(Rs.threeDigitsSigned,t);case 4:return ls(Rs.fourDigitsSigned,t);default:return ls(new RegExp("^-?\\d{1,"+e+"}"),t)}}function jI(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function bK(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const i=n+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return r?s:1-s}function yK(e){return e%400===0||e%4===0&&e%100!==0}class cFe extends sa{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Fs(Ss(4,t),s);case"yo":return Fs(n.ordinalNumber(t,{unit:"year"}),s);default:return Fs(Ss(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const s=t.getFullYear();if(n.isTwoDigitYear){const o=bK(n.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class dFe extends sa{priority=130;parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Fs(Ss(4,t),s);case"Yo":return Fs(n.ordinalNumber(t,{unit:"year"}),s);default:return Fs(Ss(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,s){const i=yI(t,s);if(n.isTwoDigitYear){const l=bK(n.year,i);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),of(t,s)}const o=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),of(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class uFe extends sa{priority=130;parse(t,r){return ww(r==="R"?4:r.length,t)}set(t,r,n){const s=ba(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),$v(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class hFe extends sa{priority=130;parse(t,r){return ww(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class fFe extends sa{priority=120;parse(t,r,n){switch(r){case"Q":case"QQ":return Ss(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class mFe extends sa{priority=120;parse(t,r,n){switch(r){case"q":case"qq":return Ss(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class pFe extends sa{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"M":return Fs(ls(Rs.month,t),s);case"MM":return Fs(Ss(2,t),s);case"Mo":return Fs(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class xFe extends sa{priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"L":return Fs(ls(Rs.month,t),s);case"LL":return Fs(Ss(2,t),s);case"Lo":return Fs(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function vFe(e,t,r){const n=Ur(e,r?.in),s=pK(n,r)-t;return n.setDate(n.getDate()-s*7),Ur(n,r?.in)}class gFe extends sa{priority=100;parse(t,r,n){switch(r){case"w":return ls(Rs.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return Ss(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,s){return of(vFe(t,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function bFe(e,t,r){const n=Ur(e,r?.in),s=bI(n,r)-t;return n.setDate(n.getDate()-s*7),n}class yFe extends sa{priority=100;parse(t,r,n){switch(r){case"I":return ls(Rs.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return Ss(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return $v(bFe(t,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const jFe=[31,28,31,30,31,30,31,31,30,31,30,31],NFe=[31,29,31,30,31,30,31,31,30,31,30,31];class wFe extends sa{priority=90;subPriority=1;parse(t,r,n){switch(r){case"d":return ls(Rs.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return Ss(r.length,t)}}validate(t,r){const n=t.getFullYear(),s=yK(n),i=t.getMonth();return s?r>=1&&r<=NFe[i]:r>=1&&r<=jFe[i]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class SFe extends sa{priority=90;subpriority=1;parse(t,r,n){switch(r){case"D":case"DD":return ls(Rs.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return Ss(r.length,t)}}validate(t,r){const n=t.getFullYear();return yK(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function NI(e,t,r){const n=Kx(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Ur(e,r?.in),o=i.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return Td(i,u,r)}class CFe extends sa{priority=90;parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class kFe extends sa{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Fs(Ss(r.length,t),i);case"eo":return Fs(n.ordinalNumber(t,{unit:"day"}),i);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class _Fe extends sa{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Fs(Ss(r.length,t),i);case"co":return Fs(n.ordinalNumber(t,{unit:"day"}),i);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function EFe(e,t,r){const n=Ur(e,r?.in),s=tFe(n,r),i=t-s;return Td(n,i,r)}class DFe extends sa{priority=90;parse(t,r,n){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Ss(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return Fs(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return Fs(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Fs(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Fs(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=EFe(t,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class AFe extends sa{priority=80;parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class TFe extends sa{priority=80;parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class IFe extends sa{priority=80;parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class PFe extends sa{priority=70;parse(t,r,n){switch(r){case"h":return ls(Rs.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return Ss(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class OFe extends sa{priority=70;parse(t,r,n){switch(r){case"H":return ls(Rs.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return Ss(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class MFe extends sa{priority=70;parse(t,r,n){switch(r){case"K":return ls(Rs.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return Ss(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class RFe extends sa{priority=70;parse(t,r,n){switch(r){case"k":return ls(Rs.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return Ss(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class FFe extends sa{priority=60;parse(t,r,n){switch(r){case"m":return ls(Rs.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return Ss(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}incompatibleTokens=["t","T"]}class LFe extends sa{priority=50;parse(t,r,n){switch(r){case"s":return ls(Rs.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return Ss(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}class BFe extends sa{priority=30;parse(t,r){const n=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Fs(Ss(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}incompatibleTokens=["t","T"]}class UFe extends sa{priority=10;parse(t,r){switch(r){case"X":return Eu(_u.basicOptionalMinutes,t);case"XX":return Eu(_u.basic,t);case"XXXX":return Eu(_u.basicOptionalSeconds,t);case"XXXXX":return Eu(_u.extendedOptionalSeconds,t);case"XXX":default:return Eu(_u.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ba(t,t.getTime()-vw(t)-n)}incompatibleTokens=["t","T","x"]}class $Fe extends sa{priority=10;parse(t,r){switch(r){case"x":return Eu(_u.basicOptionalMinutes,t);case"xx":return Eu(_u.basic,t);case"xxxx":return Eu(_u.basicOptionalSeconds,t);case"xxxxx":return Eu(_u.extendedOptionalSeconds,t);case"xxx":default:return Eu(_u.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ba(t,t.getTime()-vw(t)-n)}incompatibleTokens=["t","T","X"]}class VFe extends sa{priority=40;parse(t){return gK(t)}set(t,r,n){return[ba(t,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class qFe extends sa{priority=20;parse(t){return gK(t)}set(t,r,n){return[ba(t,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const zFe={G:new lFe,y:new cFe,Y:new dFe,R:new uFe,u:new hFe,Q:new fFe,q:new mFe,M:new pFe,L:new xFe,w:new gFe,I:new yFe,d:new wFe,D:new SFe,E:new CFe,e:new kFe,c:new _Fe,i:new DFe,a:new AFe,b:new TFe,B:new IFe,h:new PFe,H:new OFe,K:new MFe,k:new RFe,m:new FFe,s:new LFe,S:new BFe,X:new UFe,x:new $Fe,t:new VFe,T:new qFe},HFe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WFe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GFe=/^'([^]*?)'?$/,YFe=/''/g,KFe=/\S/,XFe=/[a-zA-Z]/;function QFe(e,t,r,n){const s=()=>ba(n?.in||r,NaN),i=eFe(),o=n?.locale??i.locale??mK,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return e?s():Ur(r,n?.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new oFe(n?.in,r)],h=t.match(WFe).map(b=>{const y=b[0];if(y in l3){const C=l3[y];return C(b,o.formatLong)}return b}).join("").match(HFe),m=[];for(let b of h){const y=b[0],C=zFe[y];if(C){const{incompatibleTokens:N}=C;if(Array.isArray(N)){const S=m.find(D=>N.includes(D.token)||D.token===y);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${b}\` at the same time`)}else if(C.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);m.push({token:y,fullToken:b});const k=C.run(e,b,o.match,d);if(!k)return s();u.push(k.setter),e=k.rest}else{if(y.match(XFe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(b==="''"?b="'":y==="'"&&(b=JFe(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&KFe.test(e))return s();const p=u.map(b=>b.priority).sort((b,y)=>y-b).filter((b,y,C)=>C.indexOf(b)===y).map(b=>u.filter(y=>y.priority===b).sort((y,C)=>C.subPriority-y.subPriority)).map(b=>b[0]);let v=Ur(r,n?.in);if(isNaN(+v))return s();const g={};for(const b of p){if(!b.validate(v,d))return s();const y=b.set(v,g,d);Array.isArray(y)?(v=y[0],Object.assign(g,y[1])):v=y}return v}function JFe(e){return e.match(GFe)[1].replace(YFe,"'")}function ZFe(e,t,r){const[n,s]=Cf(r?.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function eLe(e,t,r){const[n,s]=Cf(r?.in,e,t);return+o3(n)==+o3(s)}function tLe(e,t,r){const[n,s]=Cf(r?.in,e,t);return n.getFullYear()===s.getFullYear()}function Oy(e,t,r){const n=+Ur(e,r?.in),[s,i]=[+Ur(t.start,r?.in),+Ur(t.end,r?.in)].sort((o,l)=>o-l);return n>=s&&n<=i}function rLe(e,t,r){return Td(e,-1,r)}function nLe(e,t){const r=()=>ba(t?.in,NaN),s=oLe(e);let i;if(s.date){const d=lLe(s.date,2);i=cLe(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,c;if(s.time&&(l=dLe(s.time),isNaN(l)))return r();if(s.timezone){if(c=uLe(s.timezone),isNaN(c))return r()}else{const d=new Date(o+l),u=Ur(0,t?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return Ur(o+l+c,t?.in)}const dN={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},aLe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sLe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iLe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oLe(e){const t={},r=e.split(dN.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],dN.timeZoneDelimiter.test(t.date)&&(t.date=e.split(dN.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=dN.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function lLe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function cLe(e,t){if(t===null)return new Date(NaN);const r=e.match(aLe);if(!r)return new Date(NaN);const n=!!r[4],s=Sb(r[1]),i=Sb(r[2])-1,o=Sb(r[3]),l=Sb(r[4]),c=Sb(r[5])-1;if(n)return xLe(t,l,c)?hLe(t,l,c):new Date(NaN);{const d=new Date(0);return!mLe(t,i,o)||!pLe(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}}function Sb(e){return e?parseInt(e):1}function dLe(e){const t=e.match(sLe);if(!t)return NaN;const r=QE(t[1]),n=QE(t[2]),s=QE(t[3]);return vLe(r,n,s)?r*KS+n*YS+s*1e3:NaN}function QE(e){return e&&parseFloat(e.replace(",","."))||0}function uLe(e){if(e==="Z")return 0;const t=e.match(iLe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return gLe(n,s)?r*(n*KS+s*YS):NaN}function hLe(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const fLe=[31,null,31,30,31,30,31,31,30,31,30,31];function jK(e){return e%400===0||e%4===0&&e%100!==0}function mLe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(fLe[t]||(jK(e)?29:28))}function pLe(e,t){return t>=1&&t<=(jK(e)?366:365)}function xLe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function vLe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function gLe(e,t){return t>=0&&t<=59}function Pc(e,t,r){const n=Ur(e,r?.in),s=n.getFullYear(),i=n.getDate(),o=ba(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=ZRe(o);return n.setMonth(t,Math.min(i,l)),n}function IN(e,t,r){const n=Ur(e,r?.in);return n.setHours(t),n}function PN(e,t,r){const n=Ur(e,r?.in);return n.setMinutes(t),n}function G0(e,t,r){const n=Ur(e,r?.in),s=Math.trunc(n.getMonth()/3)+1,i=t-s;return Pc(n,n.getMonth()+i*3)}function ON(e,t,r){const n=Ur(e,r?.in);return n.setSeconds(t),n}function yu(e,t,r){const n=Ur(e,r?.in);return isNaN(+n)?ba(e,NaN):(n.setFullYear(t),n)}function px(e,t,r){return Pd(e,-t,r)}function NK(e,t,r){return gI(e,-1,r)}function t7(e,t,r){return gw(e,-1,r)}function qv(e,t,r){return Yh(e,-t,r)}var bLe=typeof document<"u",yLe=function(){},Sw=bLe?w.useLayoutEffect:yLe;const jLe={...VN},NLe=jLe.useInsertionEffect,wLe=NLe||(e=>e());function SLe(e){const t=w.useRef(()=>{});return wLe(()=>{t.current=e}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}var CLe=typeof document<"u",kLe=function(){},MN=CLe?w.useLayoutEffect:kLe;function Cw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Cw(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Cw(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function wK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function r7(e,t){const r=wK(e);return Math.round(t*r)/r}function JE(e){const t=w.useRef(e);return MN(()=>{t.current=e}),t}function _Le(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=w.useState(n);Cw(m,n)||p(n);const[v,g]=w.useState(null),[b,y]=w.useState(null),C=w.useCallback(B=>{B!==D.current&&(D.current=B,g(B))},[]),N=w.useCallback(B=>{B!==E.current&&(E.current=B,y(B))},[]),k=i||v,S=o||b,D=w.useRef(null),E=w.useRef(null),T=w.useRef(u),A=c!=null,L=JE(c),P=JE(s),O=JE(d),Q=w.useCallback(()=>{if(!D.current||!E.current)return;const B={placement:t,strategy:r,middleware:m};P.current&&(B.platform=P.current),Gke(D.current,E.current,B).then(Y=>{const K={...Y,isPositioned:O.current!==!1};z.current&&!Cw(T.current,K)&&(T.current=K,Ly.flushSync(()=>{h(K)}))})},[m,t,r,P,O]);MN(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(B=>({...B,isPositioned:!1})))},[d]);const z=w.useRef(!1);MN(()=>(z.current=!0,()=>{z.current=!1}),[]),MN(()=>{if(k&&(D.current=k),S&&(E.current=S),k&&S){if(L.current)return L.current(k,S,Q);Q()}},[k,S,Q,L,A]);const re=w.useMemo(()=>({reference:D,floating:E,setReference:C,setFloating:N}),[C,N]),U=w.useMemo(()=>({reference:k,floating:S}),[k,S]),X=w.useMemo(()=>{const B={position:r,left:0,top:0};if(!U.floating)return B;const Y=r7(U.floating,u.x),K=r7(U.floating,u.y);return l?{...B,transform:"translate("+Y+"px, "+K+"px)",...wK(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:K}},[r,l,U.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:Q,refs:re,elements:U,floatingStyles:X}),[u,Q,re,U,X])}const ELe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?x8({element:n.current,padding:s}).fn(r):{}:n?x8({element:n,padding:s}).fn(r):{}}}},DLe=(e,t)=>({...Hke(e),options:[e,t]}),ALe=(e,t)=>({...Wke(e),options:[e,t]}),TLe=(e,t)=>({...ELe(e),options:[e,t]}),ILe={...VN};let n7=!1,PLe=0;const a7=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PLe++;function OLe(){const[e,t]=w.useState(()=>n7?a7():void 0);return Sw(()=>{e==null&&t(a7())},[]),w.useEffect(()=>{n7=!0},[]),e}const MLe=ILe.useId,SK=MLe||OLe,RLe=w.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:m,d:p,style:{transform:v,...g}={},...b}=t,y=SK(),[C,N]=w.useState(!1);if(Sw(()=>{if(!s)return;Hc(s).direction==="rtl"&&N(!0)},[s]),!s)return null;const[k,S]=n.split("-"),D=k==="top"||k==="bottom";let E=h;(D&&o!=null&&o.x||!D&&o!=null&&o.y)&&(E=null);const T=u*2,A=T/2,L=l/2*(d/-8+1),P=c/2*d/4,O=!!p,Q=E&&S==="end"?"bottom":"top";let z=E&&S==="end"?"right":"left";E&&C&&(z=S==="end"?"left":"right");const re=i?.x!=null?E||i.x:"",U=i?.y!=null?E||i.y:"",X=p||"M0,0"+(" H"+l)+(" L"+(l-L)+","+(c-P))+(" Q"+l/2+","+c+" "+L+","+(c-P))+" Z",B={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[k];return a.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:O?l:l+T,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[z]:re,[Q]:U,[k]:D||O?"100%":"calc(100% - "+T/2+"px)",transform:[B,v].filter(Y=>!!Y).join(" "),...g},children:[T>0&&a.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:m,strokeWidth:T+(p?0:1),d:X}),a.jsx("path",{stroke:T&&!p?b.fill:"none",d:X}),a.jsx("clipPath",{id:y,children:a.jsx("rect",{x:-A,y:A*(O?-1:1),width:l+T,height:l})})]})});function FLe(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const LLe=w.createContext(null),BLe=w.createContext(null),ULe=()=>{var e;return((e=w.useContext(LLe))==null?void 0:e.id)||null},$Le=()=>w.useContext(BLe);function VLe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=SK(),i=w.useRef({}),[o]=w.useState(()=>FLe()),l=ULe()!=null,[c,d]=w.useState(n.reference),u=SLe((p,v,g)=>{i.current.openEvent=p?v:void 0,o.emit("openchange",{open:p,event:v,reason:g,nested:l}),r?.(p,v,g)}),h=w.useMemo(()=>({setPositionReference:d}),[]),m=w.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return w.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:m,events:o,floatingId:s,refs:h}),[t,u,m,o,s,h])}function qLe(e){e===void 0&&(e={});const{nodeId:t}=e,r=VLe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[i,o]=w.useState(null),[l,c]=w.useState(null),u=s?.domReference||i,h=w.useRef(null),m=$Le();Sw(()=>{u&&(h.current=u)},[u]);const p=_Le({...e,elements:{...s,...l&&{reference:l}}}),v=w.useCallback(N=>{const k=Lo(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;c(k),p.refs.setReference(k)},[p.refs]),g=w.useCallback(N=>{(Lo(N)||N===null)&&(h.current=N,o(N)),(Lo(p.refs.reference.current)||p.refs.reference.current===null||N!==null&&!Lo(N))&&p.refs.setReference(N)},[p.refs]),b=w.useMemo(()=>({...p.refs,setReference:g,setPositionReference:v,domReference:h}),[p.refs,g,v]),y=w.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),C=w.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return Sw(()=>{n.dataRef.current.floatingContext=C;const N=m?.nodesRef.current.find(k=>k.id===t);N&&(N.context=C)}),w.useMemo(()=>({...p,context:C,refs:b,elements:y}),[p,b,y,C])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var d3=function(t,r){return d3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},d3(t,r)};function Ai(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wn=function(){return Wn=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Wn.apply(this,arguments)};function Iu(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var zLe=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,i=e.className,o=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return zt.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},HLe=function(e,t){var r=w.useRef(null),n=w.useRef(e);n.current=e;var s=w.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=n.current)===null||o===void 0||o.call(n,i))},[t]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},QS=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=HLe(r,o);return zt.createElement("div",{className:n,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Sr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Sr||(Sr={}));function CK(){var e=typeof window<"u"?window:globalThis;return e}var N1=12;function la(e){if(e==null)return new Date;var t=typeof e=="string"?nLe(e):Ur(e);return JS(t)?t:new Date}function ZE(e,t,r,n,s){s===void 0&&(s=la());for(var i=zv(r)||zv(wI()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=QFe(e,d,s,{locale:i});if(JS(u)&&(!n||e===Qa(u,d,r)))return u}return null}function JS(e,t){return bw(e)&&!Ix(e,new Date("1/1/1800"))}function Qa(e,t,r){if(r==="en")return ZB(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?zv(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||zv(wI()),ZB(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ic(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&Qa(e,s,n)||""}var kK=" - ";function WLe(e,t,r){if(!e)return"";var n=Ic(e,r),s=t?Ic(t,r):"";return"".concat(n).concat(kK).concat(s)}function GLe(e,t){if(!e?.length)return"";var r=e[0]?Ic(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=Ic(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function e5(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return IN(PN(ON(e,l),i),n)}function YLe(e){return bI(e)}function KLe(e,t){return Qa(e,"ddd",t)}function RN(e){return Tx(e)}function Rm(e,t,r){var n=zv(t||wI());return of(e,{locale:n,weekStartsOn:r})}function Jh(e){return hK(e)}function Ob(e){return XS(e)}function s7(e){return o3(e)}function i7(){return Tx(la())}function o7(e){return dK(e)}function XLe(e){return nRe(e)}function QLe(e){return uK(e)}function Su(e,t){return e&&t?tLe(e,t):!e&&!t}function Ro(e,t){return e&&t?ZFe(e,t):!e&&!t}function kw(e,t){return e&&t?eLe(e,t):!e&&!t}function Hn(e,t){return e&&t?tRe(e,t):!e&&!t}function tx(e,t){return e&&t?rFe(e,t):!e&&!t}function Mb(e,t,r){var n,s=Tx(t),i=dK(r);try{n=Oy(e,{start:s,end:i})}catch{n=!1}return n}function wI(){var e=CK();return e.__localeId__}function zv(e){if(typeof e=="string"){var t=CK();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function JLe(e,t,r){return t(Qa(e,"EEEE",r))}function ZLe(e,t){return Qa(e,"EEEEEE",t)}function e6e(e,t){return Qa(e,"EEE",t)}function SI(e,t){return Qa(Pc(la(),e),"LLLL",t)}function _K(e,t){return Qa(Pc(la(),e),"LLL",t)}function t6e(e,t){return Qa(G0(la(),e),"QQQ",t)}function Rc(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,d=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(u){return u instanceof Date?Hn(e,u):Hn(e,u.date)})||o&&o.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||l&&!l.some(function(u){return Hn(e,u)})||c&&!c.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||d&&!d(la(e))||!1}function CI(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return Oy(e,{start:o,end:l})}):n&&n.some(function(i){var o;return i instanceof Date?Hn(e,i):Hn(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function EK(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n?hK(n):void 0,maxDate:s?uK(s):void 0})||i?.some(function(c){return Ro(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return Ro(e,c)})||l&&!l(la(e))||!1}function uN(e,t,r,n){var s=Dn(e),i=No(e),o=Dn(t),l=No(t),c=Dn(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function r6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(l){return Ro(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Ro(l,e)})||!1}function hN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i?.some(function(c){return kw(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return kw(e,c)})||l&&!l(la(e))||!1}function fN(e,t,r){if(!t||!r||!bw(t)||!bw(r))return!1;var n=Dn(t),s=Dn(r);return n<=e&&s>=e}function FN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return w1(c,{minDate:n?XS(n):void 0,maxDate:s?fK(s):void 0})||i?.some(function(d){return Su(c,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return Su(c,d)})||l&&!l(la(c))||!1}function mN(e,t,r,n){var s=Dn(e),i=mx(e),o=Dn(t),l=mx(t),c=Dn(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function w1(e,t){var r,n=t===void 0?{}:t,s=n.minDate,i=n.maxDate;return(r=s&&Vv(e,s)<0||i&&Vv(e,i)>0)!==null&&r!==void 0?r:!1}function l7(e,t){return t.some(function(r){return Xh(r)===Xh(e)&&Qh(r)===Qh(e)&&Mm(r)===Mm(e)})}function c7(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return n&&l7(e,n)||s&&!l7(e,s)||i&&!i(e)||!1}function d7(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=la();s=IN(s,Xh(e)),s=PN(s,Qh(e)),s=ON(s,Mm(e));var i=la();i=IN(i,Xh(r)),i=PN(i,Qh(r)),i=ON(i,Mm(r));var o=la();o=IN(o,Xh(n)),o=PN(o,Qh(n)),o=ON(o,Mm(n));var l;try{l=!Oy(s,{start:i,end:o})}catch{l=!1}return l}function u7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=px(e,1);return n&&yw(n,i)>0||s&&s.every(function(o){return yw(o,i)>0})||!1}function h7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Pd(e,1);return n&&yw(i,n)>0||s&&s.every(function(o){return yw(i,o)>0})||!1}function n6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=XS(e),o=NK(i);return n&&jw(n,o)>0||s&&s.every(function(l){return jw(l,o)>0})||!1}function a6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=fK(e),o=gI(i,1);return n&&jw(o,n)>0||s&&s.every(function(l){return jw(o,l)>0})||!1}function f7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=qv(e,1);return n&&Nw(n,i)>0||s&&s.every(function(o){return Nw(o,i)>0})||!1}function s6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Ob(qv(e,i)),l=Em(o,i).endPeriod,c=n&&Dn(n);return c&&c>l||!1}function m7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Yh(e,1);return n&&Nw(i,n)>0||s&&s.every(function(o){return Nw(i,o)>0})||!1}function i6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Yh(e,i),l=Em(o,i).startPeriod,c=n&&Dn(n);return c&&c<l||!1}function DK(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Vv(s,t)>=0});return GB(n)}else return r?GB(r):t}function AK(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return Vv(s,t)<=0});return WB(n)}else return r?WB(r):t}function p7(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(Kh(o)){var l=Qa(o,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(t)||(c.push(t),n.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(r=d[0])!==null&&r!==void 0?r:"",h=o[u];if(typeof u=="string"&&Array.isArray(h))for(var m=0,p=h.length;m<p;m++){var v=h[m];if(v){var l=Qa(v,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(u)||(c.push(u),n.set(l,c))}}}}return n}function o6e(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function l6e(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,i=n.holidayName;if(Kh(s)){var o=Qa(s,"MM.dd.yyyy"),l=r.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&o6e(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?Iu(Iu([],c,!0),[i],!1):[i],r.set(o,l)}}}),r}function c6e(e,t,r,n,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,d=s[l];d&&(c=QMe(c,Xh(d)),c=i3(c,Qh(d)),c=eRe(c,Mm(d)));var u=i3(e,(r+1)*n);Hm(c,t)&&Ix(c,u)&&d!=null&&o.push(d)}return o}function x7(e){return e<10?"0".concat(e):"".concat(e)}function Em(e,t){t===void 0&&(t=N1);var r=Math.ceil(Dn(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function d6e(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function v7(e){var t=e.getSeconds(),r=e.getMilliseconds();return Ur(e.getTime()-t*1e3-r)}function u6e(e,t){return v7(e).getTime()===v7(t).getTime()}function g7(e){if(!Kh(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function b7(e,t){if(!Kh(e)||!Kh(t))throw new Error("Invalid date received");var r=g7(e),n=g7(t);return Ix(r,n)}function TK(e){return e.key===Sr.Space}var h6e=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=zt.createRef(),n.onTimeChange=function(s){var i,o;n.setState({time:s});var l=n.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s?.includes(":")){var u=s.split(":"),h=u[0],m=u[1];d.setHours(Number(h)),d.setMinutes(Number(m))}(o=(i=n.props).onChange)===null||o===void 0||o.call(i,d)},n.renderTimeInput=function(){var s=n.state.time,i=n.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?w.cloneElement(c,{date:o,value:s,onChange:n.onTimeChange}):zt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var d;(d=n.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){n.onTimeChange(d.target.value||l)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return zt.createElement("div",{className:"react-datepicker__input-time-container"},zt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),zt.createElement("div",{className:"react-datepicker-time__input-container"},zt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(w.Component),f6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=w.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isSameDay=function(n){return Hn(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Rc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return CI(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return Hn(r.props.day,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&Hn(n,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,i=n.highlightDates;if(!i)return!1;var o=Qa(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var n,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=Qa(i,"MM.dd.yyyy");return o.has(l)?[(n=o.get(l))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Mb(s,i,o)},r.isInSelectingRange=function(){var n,s=r.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,h=s.endDate,m=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(o||l||c)||!m||!d&&r.isDisabled()?!1:o&&h&&(Ix(m,h)||tx(m,h))?Mb(i,m,h):l&&u&&(Hm(m,u)||tx(m,u))||c&&u&&!h&&(Hm(m,u)||tx(m,u))?Mb(i,u,m):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l?Hn(i,c):Hn(i,o)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l||c?Hn(i,d):Hn(i,o)},r.isRangeStart=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Hn(i,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Hn(o,s)},r.isWeekend=function(){var n=JRe(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===No(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(No(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(la())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return vn("react-datepicker__day",s,"react-datepicker__day--"+KLe(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,i=n.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=n.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=r.isDisabled()||r.isExcluded()?c:o;return"".concat(d," ").concat(Qa(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,i=n.holidays,o=i===void 0?new Map:i,l=n.excludeDates,c=Qa(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),r.isExcluded()&&d.push(l?.filter(function(u){return u instanceof Date?Hn(u,s):Hn(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),d.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&Hn(s,n))?0:-1;return i},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(e7(r.props.day),r.props.day):e7(r.props.day)},r.render=function(){return zt.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&zt.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(w.Component),m6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=w.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Hn(r.props.date,r.props.selected)&&Hn(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||Hn(r.props.date,r.props.selected)&&Hn(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!n?.isInputFocused&&Hn(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&Hn(this.props.date,this.props.selected)};return zt.createElement("div",{ref:this.weekNumberEl,className:vn(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(w.Component),p6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Rc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,i){for(var o,l,c,d=new Date(n),u=0;u<7;u++){var h=new Date(n);h.setDate(h.getDate()+u);var m=!r.isDisabled(h);if(m){d=h;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,s,i),r.props.showWeekPicker&&r.handleDayClick(d,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):YLe(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Td(n,6),i=new Date(n);i<=s;){if(!r.isDisabled(i))return!1;i=Td(i,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],i=r.formatWeekNumber(n);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,i):void 0;s.push(zt.createElement(m6e,Wn({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Td(n,l);return zt.createElement(f6e,Wn({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return Rm(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!Hn(r.startOfWeek(),r.props.selected)&&Hn(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Hn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return zt.createElement("div",{className:vn(r)},this.renderDays())},t}(w.Component),Cb,x6e=6,gv={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},t5=(Cb={},Cb[gv.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Cb[gv.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Cb[gv.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Cb),pN=1;function y7(e,t){return e?gv.FOUR_COLUMNS:t?gv.TWO_COLUMNS:gv.THREE_COLUMNS}var v6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=Iu([],Array(12),!0).map(function(){return w.createRef()}),r.QUARTER_REFS=Iu([],Array(4),!0).map(function(){return w.createRef()}),r.isDisabled=function(n){return Rc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return CI(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Ro(Pc(i,n),o)},r.isRangeStartQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:kw(G0(i,n),o)},r.isRangeEndMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Ro(Pc(i,n),l)},r.isRangeEndQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:kw(G0(i,n),l)},r.isInSelectingRangeMonth=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?uN(m,h,n,o):c&&u||d&&u&&!h?uN(u,m,n,o):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.startDate,c=i.selectsStart,d=Pc(o,n),u=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?Ro(d,u):Ro(d,l)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.endDate,c=i.selectsEnd,d=i.selectsRange,u=Pc(o,n),h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||d?Ro(u,h):Ro(u,l)},r.isInSelectingRangeQuarter=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?mN(m,h,n,o):c&&u||d&&u&&!h?mN(u,m,n,o):!1},r.isWeekInMonth=function(n){var s=r.props.day,i=Td(n,6);return Ro(n,s)||Ro(i,s)},r.isCurrentMonth=function(n,s){return Dn(n)===Dn(la())&&s===No(la())},r.isCurrentQuarter=function(n,s){return Dn(n)===Dn(la())&&s===mx(la())},r.isSelectedMonth=function(n,s,i){return No(i)===s&&Dn(n)===Dn(i)},r.isSelectMonthInList=function(n,s,i){return i.some(function(o){return r.isSelectedMonth(n,s,o)})},r.isSelectedQuarter=function(n,s,i){return mx(n)===s&&Dn(n)===Dn(i)},r.isMonthSelected=function(){var n=r.props,s=n.day,i=n.selected,o=n.selectedDates,l=n.selectsMultiple,c=No(s);return l?o?.some(function(d){return r.isSelectedMonth(s,c,d)}):!!i&&r.isSelectedMonth(s,c,i)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,i=0,o=!1,l=Rm(Jh(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.preSelection},d=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.selected},u=r.props.selected?d(r.props.selected):void 0,h=r.props.preSelection?c(r.props.preSelection):void 0;n.push(zt.createElement(p6e,Wn({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:l,month:No(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:u,preSelection:h,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,l=gw(l,1);var m=s&&i>=x6e,p=!s&&!r.isWeekInMonth(l);if(m||p)if(r.props.peekNextMonth)o=!0;else break}return n},r.onMonthClick=function(n,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||r.handleDayClick(Jh(l),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(Jh(o))},r.handleMonthNavigation=function(n,s){var i,o,l,c;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.MONTH_REFS[n])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(n,s,i){var o,l=r.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,h=l.minDate,m=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(d){var g=y7(p,v),b=r.getVerticalOffset(g),y=(o=t5[g])===null||o===void 0?void 0:o.grid,C=function(E,T,A){var L,P,O=T,Q=A;switch(E){case Sr.ArrowRight:O=Pd(T,pN),Q=A===11?0:A+pN;break;case Sr.ArrowLeft:O=px(T,pN),Q=A===0?11:A-pN;break;case Sr.ArrowUp:O=px(T,b),Q=!((L=y?.[0])===null||L===void 0)&&L.includes(A)?A+12-b:A-b;break;case Sr.ArrowDown:O=Pd(T,b),Q=!((P=y?.[y.length-1])===null||P===void 0)&&P.includes(A)?A-12+b:A+b;break}return{newCalculatedDate:O,newCalculatedMonth:Q}},N=function(E,T,A){for(var L=40,P=E,O=!1,Q=0,z=C(P,T,A),re=z.newCalculatedDate,U=z.newCalculatedMonth;!O;){if(Q>=L){re=T,U=A;break}if(h&&re<h){P=Sr.ArrowRight;var X=C(P,re,U);re=X.newCalculatedDate,U=X.newCalculatedMonth}if(m&&re>m){P=Sr.ArrowLeft;var X=C(P,re,U);re=X.newCalculatedDate,U=X.newCalculatedMonth}if(r6e(re,r.props)){var X=C(P,re,U);re=X.newCalculatedDate,U=X.newCalculatedMonth}else O=!0;Q++}return{newCalculatedDate:re,newCalculatedMonth:U}};if(s===Sr.Enter){r.isMonthDisabled(i)||(r.onMonthClick(n,i),u?.(c));return}var k=N(s,d,i),S=k.newCalculatedDate,D=k.newCalculatedMonth;switch(s){case Sr.ArrowRight:case Sr.ArrowLeft:case Sr.ArrowUp:case Sr.ArrowDown:r.handleMonthNavigation(D,S);break}}},r.getVerticalOffset=function(n){var s,i;return(i=(s=t5[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(n,s){var i=r.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=n.key;c!==Sr.Tab&&n.preventDefault(),o||r.handleKeyboardNavigation(n,c,s),l&&l(n)},r.onQuarterClick=function(n,s){var i=G0(r.props.day,s);hN(i,r.props)||r.handleDayClick(s7(i),n)},r.onQuarterMouseEnter=function(n){var s=G0(r.props.day,n);hN(s,r.props)||r.handleDayMouseEnter(s7(s))},r.handleQuarterNavigation=function(n,s){var i,o,l,c;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.QUARTER_REFS[n-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(n,s){var i,o,l=n.key;if(!r.props.disabledKeyboardNavigation)switch(l){case Sr.Enter:r.onQuarterClick(n,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case Sr.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,gI(r.props.preSelection,1));break;case Sr.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,NK(r.props.preSelection));break}},r.isMonthDisabledForLabelDate=function(n){var s,i=r.props,o=i.day,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=Pc(o,n);return{isDisabled:(s=(l||c||d||u)&&EK(h,r.props))!==null&&s!==void 0?s:!1,labelDate:h}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(Pc(i,n)):void 0,h=r.getSelection();return vn("react-datepicker__month-text","react-datepicker__month-".concat(n),u,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":h?r.isSelectMonthInList(i,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(i,n,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":o&&l?uN(o,l,n,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(i,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=No(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=mx(r.props.preSelection),i=hN(r.props.day,r.props),o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(n){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,h=Pc(d,n),m=r.isDisabled(h)||r.isExcluded(h)?c:o;return"".concat(m," ").concat(Qa(h,"MMMM yyyy",u))},r.getQuarterClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,d=s.minDate,u=s.maxDate,h=s.excludeDates,m=s.includeDates,p=s.filterDate,v=s.preSelection,g=s.disabledKeyboardNavigation,b=(d||u||h||m||p)&&hN(G0(i,n),r.props);return vn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(i,n,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&v&&r.isSelectedQuarter(i,n,v)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":o&&l?mN(o,l,n,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,n)})},r.getMonthContent=function(n){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=_K(n,l),u=SI(n,l);return o?o(n,d,u,c):i?u:d},r.getQuarterContent=function(n){var s,i=r.props,o=i.renderQuarterContent,l=i.locale,c=t6e(n,l);return(s=o?.(n,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var n,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(n=t5[y7(o,i)])===null||n===void 0?void 0:n.grid;return d?.map(function(u,h){return zt.createElement("div",{className:"react-datepicker__month-wrapper",key:h},u.map(function(m,p){return zt.createElement("div",{ref:r.MONTH_REFS[m],key:p,onClick:function(v){r.onMonthClick(v,m)},onKeyDown:function(v){TK(v)&&(v.preventDefault(),v.key=Sr.Enter),r.onMonthKeyDown(v,m)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(m)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(m)}:void 0,tabIndex:Number(r.getTabIndex(m)),className:r.getMonthClassNames(m),"aria-disabled":r.isMonthDisabled(m),role:"option","aria-label":r.getAriaLabel(m),"aria-current":r.isCurrentMonth(l,m)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,m,c):void 0},r.getMonthContent(m))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,i=n.selected,o=[1,2,3,4];return zt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return zt.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(d){r.onQuarterClick(d,l)},onKeyDown:function(d){r.onQuarterKeyDown(d,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":i?r.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,i=n.selectsStart,o=n.selectsEnd,l=n.showMonthYearPicker,c=n.showQuarterYearPicker,d=n.showWeekPicker;return vn("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return zt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Qa(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(w.Component),g6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return zt.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?zt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return zt.createElement(QS,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),b6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,i){return zt.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(n){return zt.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},zt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return zt.createElement(g6e,Wn({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,n)];return s&&i.unshift(r.renderDropdown(n)),i},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return _K(i,r.props.locale)}:function(i){return SI(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return zt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(w.Component);function y6e(e,t){for(var r=[],n=Jh(e),s=Jh(t);!Hm(n,s);)r.push(la(n)),n=Pd(n,1);return r}var j6e=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var i=c3(s),o=Su(n.props.date,s)&&Ro(n.props.date,s);return zt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":o?"true":void 0},o?zt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Qa(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:y6e(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=vn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return zt.createElement(QS,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),N6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Jh(r.props.minDate),s=Jh(r.props.maxDate),i=[];!Hm(n,s);){var o=c3(n);i.push(zt.createElement("option",{key:o,value:o},Qa(n,r.props.dateFormat,r.props.locale))),n=Pd(n,1)}return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return zt.createElement("select",{value:c3(Jh(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=Qa(r.props.date,r.props.dateFormat,r.props.locale);return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},zt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return zt.createElement(j6e,Wn({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=la(n);Su(r.props.date,s)&&Ro(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return zt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),w6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(n){var s,i;(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&u6e(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)},r.liClasses=function(n){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Xh(n)*3600+Qh(n)*60+Mm(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(n,s){var i,o;n.key===Sr.Space&&(n.preventDefault(),n.key=Sr.Enter),(n.key===Sr.ArrowUp||n.key===Sr.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Sr.ArrowDown||n.key===Sr.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Sr.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,n)},r.renderTimes=function(){for(var n,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||la(),c=RN(l),d=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),u=60*d6e(l),h=u/o,m=0;m<h;m++){var p=i3(c,m*o);if(s.push(p),d){var v=c6e(c,p,m,o,d);s=s.concat(v)}}var g=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return zt.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===g&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===g?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},Qa(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?zt.createElement(zt.Fragment,null):zt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},zt.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return zt.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),zt.createElement("div",{className:"react-datepicker__time"},zt.createElement("div",{className:"react-datepicker__time-box"},zt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(w.Component),j7=3,S6e=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=Iu([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return Rc(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return CI(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=n.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(s,i){n.props.onDayClick&&n.props.onDayClick(s,i)},n.handleYearNavigation=function(s,i){var o,l,c,d,u=n.props,h=u.date,m=u.yearItemNumber;if(!(h===void 0||m===void 0)){var p=Em(h,m).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,i),s-p<0?n.updateFocusOnPaginate(m-(p-s)):s-p>=m?n.updateFocusOnPaginate(Math.abs(m-(s-p))):(d=(c=n.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},n.isSameDay=function(s,i){return Hn(s,i)},n.isCurrentYear=function(s){return s===Dn(la())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&Su(yu(la(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&Su(yu(la(),s),n.props.endDate)},n.isInRange=function(s){return fN(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var i=n.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!n.selectingDate()?!1:o&&u?fN(s,n.selectingDate(),u):l&&d||c&&d&&!u?fN(s,d,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.startDate,c=o.selectsStart,d=yu(la(),s);return c?Su(d,(i=n.selectingDate())!==null&&i!==void 0?i:null):Su(d,l??null)},n.isSelectingRangeEnd=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=yu(la(),s);return c||d?Su(u,(i=n.selectingDate())!==null&&i!==void 0?i:null):Su(u,l??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,d=i.includeDates,u=i.filterDate,h=Ob(yu(n.props.date,s)),m=(o||l||c||d||u)&&FN(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!Hn(h,Ob(n.props.selected))&&Hn(h,Ob(n.props.preSelection))&&!m}},n.isSelectedYear=function(s){var i=n.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(d){return s===Dn(d)}):!!l&&s===Dn(l)},n.onYearClick=function(s,i){var o=n.props.date;o!==void 0&&n.handleYearClick(Ob(yu(o,i)),s)},n.onYearKeyDown=function(s,i){var o,l,c=s.key,d=n.props,u=d.date,h=d.yearItemNumber,m=d.handleOnKeyDown;if(c!==Sr.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(c){case Sr.Enter:if(n.props.selected==null)break;n.onYearClick(s,i),(l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,n.props.selected);break;case Sr.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,Yh(n.props.preSelection,1));break;case Sr.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,qv(n.props.preSelection,1));break;case Sr.ArrowUp:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var p=Em(u,h).startPeriod,v=j7,g=i-v;if(g<p){var b=h%v;i>=p&&i<p+b?v=b:v+=b,g=i-v}n.handleYearNavigation(g,qv(n.props.preSelection,v));break}case Sr.ArrowDown:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var y=Em(u,h).endPeriod,v=j7,g=i+v;if(g>y){var b=h%v;i<=y&&i>y-b?v=b:v+=b,g=i+v}n.handleYearNavigation(g,Yh(n.props.preSelection,v));break}}m&&m(s)},n.getYearClassNames=function(s){var i=n.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=i.filterDate,m=i.yearClassName;return vn("react-datepicker__year-text","react-datepicker__year-".concat(s),o?m?.(yu(o,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||u||h)&&FN(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=Dn(n.props.preSelection),o=FN(s,n.props);return s===i&&!o?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=Em(i,o),u=d.startPeriod,h=d.endPeriod,m=function(g){n.push(zt.createElement("div",{ref:p.YEAR_REFS[g-u],onClick:function(b){r.onYearClick(b,g)},onKeyDown:function(b){TK(b)&&(b.preventDefault(),b.key=Sr.Enter),r.onYearKeyDown(b,g)},tabIndex:Number(p.getYearTabIndex(g)),className:p.getYearClassNames(g),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,g)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,g)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,g)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,g)}:void 0,key:g,"aria-current":p.isCurrentYear(g)?"date":void 0},p.getYearContent(g)))},p=this,v=u;v<=h;v++)m(v);return zt.createElement("div",{className:"react-datepicker__year"},zt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(w.Component);function C6e(e,t,r,n){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;r&&(l=Dn(r)<=o),n&&l&&(l=Dn(n)>=o),l&&s.push(o)}return s}var k6e=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var l=n.props.year,c=n.state.yearsList.map(function(h){return zt.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),"aria-selected":l===h?"true":void 0},l===h?zt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),d=n.props.minDate?Dn(n.props.minDate):null,u=n.props.maxDate?Dn(n.props.maxDate):null;return(!u||!n.state.yearsList.find(function(h){return h===u}))&&c.unshift(zt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},zt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!n.state.yearsList.find(function(h){return h===d}))&&c.push(zt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},zt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},n.onChange=function(l){n.props.onChange(l)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(l){var c=n.state.yearsList.map(function(d){return d+l});n.setState({yearsList:c})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return n.state={yearsList:C6e(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=vn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return zt.createElement(QS,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(w.Component),_6e=function(e){Ai(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?Dn(r.props.minDate):1900,s=r.props.maxDate?Dn(r.props.maxDate):2100,i=[],o=n;o<=s;o++)i.push(zt.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return zt.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return zt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},zt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),zt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return zt.createElement(k6e,Wn({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return zt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(w.Component),E6e=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],D6e=function(e){var t=(e.className||"").split(/\s+/);return E6e.some(function(r){return t.indexOf(r)>=0})},A6e=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var i,o;D6e(s.target)&&((o=(i=n.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},n.getDateInView=function(){var s=n.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=DK(n.props),d=AK(n.props),u=la(),h=l||o||i;return h||(c&&Ix(u,c)?c:d&&Hm(u,d)?d:u)},n.increaseMonth=function(){n.setState(function(s){var i=s.date;return{date:Pd(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var i=s.date;return{date:px(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,i,o){n.props.onSelect(s,i,o),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,i){n.setState({selectingDate:yu(la(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,i)},n.handleYearMouseLeave=function(s,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,i)},n.handleYearChange=function(s){var i,o,l,c;(o=(i=n.props).onYearChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Rc(s,n.props))return s;for(var i=Jh(s),o=QLe(s),l=rRe(o,i),c=null,d=0;d<=l;d++){var u=Td(i,d);if(!Rc(u,n.props)){c=u;break}}return c},n.handleMonthChange=function(s){var i,o,l,c=(i=n.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;n.handleCustomMonthChange(c),n.props.adjustDateOnChange&&(n.props.onSelect(c),(l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(c)},n.handleCustomMonthChange=function(s){var i,o;(o=(i=n.props).onMonthChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(i){var o=i.date;return{date:yu(o,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(i){var o=i.date;return{date:Pc(o,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(i){var o=i.date;return{date:yu(Pc(o,No(s)),Dn(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var i=Rm(s,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(zt.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Td(i,l),d=n.formatWeekday(c,n.props.locale),u=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return zt.createElement("div",{key:l,"aria-label":Qa(c,"EEEE",n.props.locale),className:vn("react-datepicker__day-name",u)},d)}))},n.formatWeekday=function(s,i){return n.props.formatWeekDay?JLe(s,n.props.formatWeekDay,i):n.props.useWeekdaysShort?e6e(s,i):ZLe(s,i)},n.decreaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:qv(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,i,o;if(!n.props.renderCustomHeader){var l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,u=px(n.state.date,d),h;switch(!0){case n.props.showMonthYearPicker:h=f7(n.state.date,n.props);break;case n.props.showYearPicker:h=s6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=n6e(n.state.date,n.props);break;default:h=u7(u,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(v=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,C=y===void 0?t.defaultProps.previousMonthButtonLabel:y,N=b.previousYearButtonLabel,k=N===void 0?t.defaultProps.previousYearButtonLabel:N,S=n.props,D=S.previousMonthAriaLabel,E=D===void 0?typeof C=="string"?C:"Previous Month":D,T=S.previousYearAriaLabel,A=T===void 0?typeof k=="string"?k:"Previous Year":T;return zt.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:n.props.handleOnKeyDown,"aria-label":g?A:E},zt.createElement("span",{className:m.join(" ")},g?k:C))}}},n.increaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:Yh(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=m7(n.state.date,n.props);break;case n.props.showYearPicker:i=i6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=a6e(n.state.date,n.props);break;default:i=h7(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(c=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,u=n.props,h=u.nextMonthButtonLabel,m=h===void 0?t.defaultProps.nextMonthButtonLabel:h,p=u.nextYearButtonLabel,v=p===void 0?t.defaultProps.nextYearButtonLabel:p,g=n.props,b=g.nextMonthAriaLabel,y=b===void 0?typeof m=="string"?m:"Next Month":b,C=g.nextYearAriaLabel,N=C===void 0?typeof v=="string"?v:"Next Year":C;return zt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:n.props.handleOnKeyDown,"aria-label":d?N:y},zt.createElement("span",{className:l.join(" ")},d?v:m))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),zt.createElement("h2",{className:i.join(" ")},Qa(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return zt.createElement(_6e,Wn({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Dn(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return zt.createElement(b6e,Wn({},t.defaultProps,n.props,{month:No(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return zt.createElement(N6e,Wn({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(i7(),s),n.props.setPreSelection&&n.props.setPreSelection(i7())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return zt.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return zt.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),zt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(o!==0),n.renderMonthYearDropdown(o!==0),n.renderYearDropdown(o!==0)),zt.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var d=u7(n.state.date,n.props),u=h7(n.state.date,n.props),h=f7(n.state.date,n.props),m=m7(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return zt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(o=(i=n.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Wn(Wn({},n.state),{customHeaderCount:c,monthDate:l,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:h,nextYearButtonDisabled:m})),p&&zt.createElement("div",{className:"react-datepicker__day-names"},n.header(l)))},n.renderYearHeader=function(s){var i=s.monthDate,o=n.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Em(i,d),h=u.startPeriod,m=u.endPeriod;return zt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(m):Dn(i))},n.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(c);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(c);default:return n.renderDefaultHeader(c)}},n.renderMonths=function(){var s,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var o=[],l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Yh(n.state.date,c):px(n.state.date,c),u=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var m=h-u+c,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Yh(d,m):Pd(d,m),v="month-".concat(h),g=h<l-1,b=h>0;o.push(zt.createElement("div",{key:v,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:h}),zt.createElement(v6e,Wn({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:b}))))}return o}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return zt.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),zt.createElement(S6e,Wn({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return zt.createElement(w6e,Wn({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,i=s&&JS(s)&&!!n.props.selected,o=i?"".concat(x7(s.getHours()),":").concat(x7(s.getMinutes())):"";if(n.props.showTimeInput)return zt.createElement(h6e,Wn({},t.defaultProps,n.props,{date:s,timeString:o,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,i=Em(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return n.props.showYearPicker?c="".concat(o," - ").concat(l):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?c=Dn(n.state.date):c="".concat(SI(No(n.state.date),n.props.locale)," ").concat(Dn(n.state.date)),zt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&c)},n.renderChildren=function(){if(n.props.children)return zt.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:N1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!Hn(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Ro(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Hn(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||zLe;return zt.createElement(QS,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},zt.createElement("div",{style:{display:"contents"},ref:this.containerRef},zt.createElement(r,{className:vn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(w.Component),T6e=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return zt.createElement("i",{className:"".concat(i," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(zt.isValidElement(t)){var o=t;return zt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(n),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return zt.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},zt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},IK=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return LJ.createPortal(this.props.children,this.el)},t}(w.Component),I6e="[tabindex], a, button, input, select, textarea",P6e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},PK=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(I6e),1,-1).filter(P6e)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?zt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},zt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,zt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(w.Component);function O6e(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=w.useRef(null),o=qLe(Wn({open:!s,whileElementsMounted:yW,placement:r.popperPlacement,middleware:Iu([ALe({padding:15}),DLe(10),TLe({element:i})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),l=Wn(Wn({},r),{hidePopper:s,popperProps:Wn(Wn({},o),{arrowRef:i})});return zt.createElement(e,Wn({},l))};return t}var M6e=function(e){Ai(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,m=r.portalHost,p=r.popperProps,v=r.showArrow,g=void 0;if(!o){var b=vn("react-datepicker-popper",n);g=zt.createElement(PK,{enableTabLoop:d},zt.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:u},l,v&&zt.createElement(RLe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=w.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=zt.createElement(IK,{portalId:h,portalHost:m},g));var y=vn("react-datepicker-wrapper",s);return zt.createElement(zt.Fragment,null,zt.createElement("div",{ref:p.refs.setReference,className:y},c),g)},t}(w.Component),R6e=O6e(M6e),N7="react-datepicker-ignore-onclickoutside";function F6e(e,t){return e&&t?No(e)!==No(t)||Dn(e)!==Dn(t):e!==t}var r5="Date input not valid.",w7=function(e){Ai(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:la()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return JS(l)?Iu(Iu([],i,!0),[Wn(Wn({},o),{date:l})],!1):i},[])},n.calcInitialState=function(){var s,i=n.getPreSelection(),o=DK(n.props),l=AK(n.props),c=o&&Ix(i,RN(o))?o:l&&Hm(i,o7(l))?l:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:c,highlightDates:p7(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Wn(Wn({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Wn(Wn({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},n.setBlur=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,i){i===void 0&&(i=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:n5},function(){s||n.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Kh(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var i,o,l=n.state.wasHidden,c=l?n.state.open:!0;l&&n.resetHiddenStatus(),n.state.preventFocus||((o=(i=n.props).onFocus)===null||o===void 0||o.call(i,s),c&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var i,o;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((o=(i=n.props).onBlur)===null||o===void 0||o.call(i,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var i,o;n.props.inline||n.setOpen(!1),(o=(i=n.props).onClickOutside)===null||o===void 0||o.call(i,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,i,o,l,c,d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];var h=d[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,d),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:L6e});var m=n.props,p=m.selectsRange,v=m.startDate,g=m.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=n.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,C=h?.target instanceof HTMLInputElement?h.target.value:"";if(p){var N=C.split(b.includes("-")?kK:"-",2).map(function(P){return P.trim()}),k=N[0],S=N[1],D=ZE(k??"",b,n.props.locale,y),E=ZE(S??"",b,n.props.locale,y),T=v?.getTime()!==D?.getTime(),A=g?.getTime()!==E?.getTime();if(!T&&!A||D&&Rc(D,n.props)||E&&Rc(E,n.props))return;(l=(o=n.props).onChange)===null||l===void 0||l.call(o,[D,E],h)}else{var L=ZE(C,b,n.props.locale,y,(c=n.props.selected)!==null&&c!==void 0?c:void 0);(L||!C)&&n.setSelected(L,h,!0)}}},n.handleSelect=function(s,i,o){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(s,i,!1,o),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var l=n.props,c=l.startDate,d=l.endDate;c&&!d&&(n.props.swapRange||!b7(s,c))&&n.setOpen(!1)}}},n.setSelected=function(s,i,o,l){var c,d,u=s;if(n.props.showYearPicker){if(u!==null&&FN(Dn(u),n.props))return}else if(n.props.showMonthYearPicker){if(u!==null&&EK(u,n.props))return}else if(u!==null&&Rc(u,n.props))return;var h=n.props,m=h.onChange,p=h.selectsRange,v=h.startDate,g=h.endDate,b=h.selectsMultiple,y=h.selectedDates,C=h.minTime,N=h.swapRange;if(!tx(n.props.selected,u)||n.props.allowSameDay||p||b)if(u!==null&&(n.props.selected&&(!o||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(u=e5(u,{hour:Xh(n.props.selected),minute:Qh(n.props.selected),second:Mm(n.props.selected)})),!o&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&C&&(u=e5(u,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),n.props.inline||n.setState({preSelection:u}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:l})),p){var k=!v&&!g,S=v&&!g,D=v&&g;k?m?.([u,null],i):S&&(u===null?m?.([null,null],i):b7(u,v)?m?.(N?[u,v]:[u,null],i):m?.([v,u],i)),D&&m?.([u,null],i)}else if(b){if(u!==null)if(!y?.length)m?.([u],i);else{var E=y.some(function(A){return Hn(A,u)});if(E){var T=y.filter(function(A){return!Hn(A,u)});m?.(T,i)}else m?.(Iu(Iu([],y,!0),[u],!1),i)}}else m?.(u,i);o||((d=(c=n.props).onSelect)===null||d===void 0||d.call(c,u,i),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var i=Kh(n.props.minDate),o=Kh(n.props.maxDate),l=!0;if(s){var c=RN(s);if(i&&o)l=Mb(s,n.props.minDate,n.props.maxDate);else if(i){var d=RN(n.props.minDate);l=Hm(s,d)||tx(c,d)}else if(o){var u=o7(n.props.maxDate);l=Ix(s,u)||tx(c,u)}}l&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var i,o;if(!(n.props.selectsRange||n.props.selectsMultiple)){var l=n.props.selected?n.props.selected:n.getPreSelection(),c=n.props.selected?s:e5(l,{hour:Xh(s),minute:Qh(s)});n.setState({preSelection:c}),(o=(i=n.props).onChange)===null||o===void 0||o.call(i,c),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(s=n.props).onInputClick)===null||i===void 0||i.call(s)},n.onInputKeyDown=function(s){var i,o,l,c,d,u;(o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Sr.ArrowDown||h===Sr.ArrowUp||h===Sr.Enter)&&((l=n.onInputClick)===null||l===void 0||l.call(n));return}if(n.state.open){if(h===Sr.ArrowDown||h===Sr.ArrowUp){s.preventDefault();var m=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=n.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(m);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=la(n.state.preSelection);h===Sr.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===n5?(n.handleSelect(v,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(v)):n.setOpen(!1)):h===Sr.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Sr.Tab&&n.setOpen(!1),n.inputOk()||(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:r5})}},n.onPortalKeyDown=function(s){var i=s.key;i===Sr.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var i,o,l,c,d,u,h=n.props,m=h.minDate,p=h.maxDate,v=h.disabledKeyboardNavigation,g=h.showWeekPicker,b=h.shouldCloseOnSelect,y=h.locale,C=h.calendarStartDay,N=h.adjustDateOnChange,k=h.inline;if((o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var S=s.key,D=s.shiftKey,E=la(n.state.preSelection),T=function(re,U){var X=U;switch(re){case Sr.ArrowRight:X=g?gw(U,1):Td(U,1);break;case Sr.ArrowLeft:X=g?t7(U):rLe(U);break;case Sr.ArrowUp:X=t7(U);break;case Sr.ArrowDown:X=gw(U,1);break;case Sr.PageUp:X=D?qv(U,1):px(U,1);break;case Sr.PageDown:X=D?Yh(U,1):Pd(U,1);break;case Sr.Home:X=Rm(U,y,C);break;case Sr.End:X=XLe(U);break}return X},A=function(re,U){for(var X=40,B=re,Y=!1,K=0,ue=T(re,U);!Y;){if(K>=X){ue=U;break}m&&ue<m&&(B=Sr.ArrowRight,ue=Rc(m,n.props)?T(B,ue):m),p&&ue>p&&(B=Sr.ArrowLeft,ue=Rc(p,n.props)?T(B,ue):p),Rc(ue,n.props)?((B===Sr.PageUp||B===Sr.Home)&&(B=Sr.ArrowRight),(B===Sr.PageDown||B===Sr.End)&&(B=Sr.ArrowLeft),ue=T(B,ue)):Y=!0,K++}return ue};if(S===Sr.Enter){s.preventDefault(),n.handleSelect(E,s),!b&&n.setPreSelection(E);return}else if(S===Sr.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(c=(l=n.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:r5});return}var L=null;switch(S){case Sr.ArrowLeft:case Sr.ArrowRight:case Sr.ArrowUp:case Sr.ArrowDown:case Sr.PageUp:case Sr.PageDown:case Sr.Home:case Sr.End:L=A(S,E);break}if(!L){(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:r5});return}if(s.preventDefault(),n.setState({lastPreSelectChange:n5}),N&&n.setSelected(L),n.setPreSelection(L),k){var P=No(E),O=No(L),Q=Dn(E),z=Dn(L);P!==O||Q!==z?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var i=s.key;i===Sr.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var i=n.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,i;return!n.props.inline&&!n.isCalendarOpen()?null:zt.createElement(A6e,Wn({showMonthYearDropdown:void 0,ref:function(o){n.calendar=o}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:l6e(n.modifyHolidays()),outsideClickIgnoreClass:N7,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=n.props.showTimeInput||n.props.showTimeSelect,d=c?"PPPPp":"PPPP",u;return n.props.selectsRange?u="Selected start date: ".concat(Ic(n.props.startDate,{dateFormat:d,locale:l}),". ").concat(n.props.endDate?"End date: "+Ic(n.props.endDate,{dateFormat:d,locale:l}):""):n.props.showTimeSelectOnly?u="Selected time: ".concat(Ic(n.props.selected,{dateFormat:o,locale:l})):n.props.showYearPicker?u="Selected year: ".concat(Ic(n.props.selected,{dateFormat:"yyyy",locale:l})):n.props.showMonthYearPicker?u="Selected month: ".concat(Ic(n.props.selected,{dateFormat:"MMMM yyyy",locale:l})):n.props.showQuarterYearPicker?u="Selected quarter: ".concat(Ic(n.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):u="Selected date: ".concat(Ic(n.props.selected,{dateFormat:d,locale:l})),zt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},n.renderDateInput=function(){var s,i,o,l=vn(n.props.className,(s={},s[N7]=n.state.open,s)),c=n.props.customInput||zt.createElement("input",{type:"text"}),d=n.props.customInputRef||"ref",u=n.props,h=u.dateFormat,m=h===void 0?t.defaultProps.dateFormat:h,p=u.locale,v=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?WLe(n.props.startDate,n.props.endDate,{dateFormat:m,locale:p}):n.props.selectsMultiple?GLe((o=n.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:m,locale:p}):Ic(n.props.selected,{dateFormat:m,locale:p});return w.cloneElement(c,(i={},i[d]=function(g){n.input=g},i.value=v,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=vn(c.props.className,l),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var s=n.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,h=s.clearButtonClassName,m=h===void 0?"":h,p=s.ariaLabelClose,v=p===void 0?"Close":p,g=s.selectedDates,b=s.readOnly;return i&&!b&&(l!=null||c!=null||d!=null||g?.length)?zt.createElement("button",{type:"button",className:vn("react-datepicker__close-icon",m,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:n.onClearClick,title:u,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:N1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,i,o,l;r.inline&&F6e(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:p7(this.props.highlightDates)}),!n.focused&&!tx(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),n.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),zt.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&zt.createElement(T6e,Wn({icon:s,className:vn(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?zt.createElement(PK,{enableTabLoop:this.props.enableTabLoop},zt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=zt.createElement(IK,Wn({portalId:this.props.portalId},this.props),n)),zt.createElement("div",null,this.renderInputContainer(),n)}return zt.createElement(R6e,Wn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(w.Component),L6e="input",n5="navigate";const B6e=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(1),[o]=w.useState(5),[l,c]=w.useState(!0),[d,u]=w.useState(0),[h,m]=w.useState(""),[p,v]=w.useState(""),[g,b]=w.useState(null),[y,C]=w.useState(null);w.useEffect(()=>{N()},[]),w.useEffect(()=>{S()},[e,p,g,y,s,h]);const N=()=>{c(!0),Oe.get("/api/leave/all").then(A=>{const L=A.data.sort((P,O)=>new Date(O.createdAt)-new Date(P.createdAt));console.log("Sorted Data:",L),t(L),c(!1)}).catch(A=>{console.error("Error fetching leave requests:",A),c(!1)})},k=(A,L)=>{Oe.put(`/api/leave/${A}`,{status:L}).then(()=>{N()}).catch(P=>{console.error("Error updating leave status:",P)})},S=()=>{let A=[...e];if(p&&(A=A.filter(z=>z.status===p)),g&&y&&(A=A.filter(z=>{const re=new Date(z.requestedDate),U=new Date(re.getFullYear(),re.getMonth(),re.getDate()),X=new Date(g.getFullYear(),g.getMonth(),g.getDate()),B=new Date(y.getFullYear(),y.getMonth(),y.getDate());return U>=X&&U<=B})),h.trim()!==""){const z=h.toLowerCase();A=A.filter(re=>re.employeeId&&re.employeeId.toLowerCase().includes(z)||(re.name||re.employeeName)&&(re.name||re.employeeName).toLowerCase().includes(z)||re.leaveType&&re.leaveType.toLowerCase().includes(z)||re.reason&&re.reason.toLowerCase().includes(z))}const L=Math.ceil(A.length/o);u(L);const P=s*o,O=P-o,Q=A.slice(O,P);n(Q)},D=()=>{v(""),b(null),C(null),i(1),m("")},E=A=>{i(A)},T=A=>{if(!A)return"-";try{return new Date(A).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(" ","/")}catch{return"-"}};return a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{children:"Leave Request Management"})})})})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gx-3",children:[a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",value:p,onChange:A=>v(A.target.value),children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by employee ID, name, leave type, or reason...",value:h,onChange:A=>m(A.target.value)})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Request Date Range"}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx(w7,{selected:g,onChange:A=>b(A),selectsStart:!0,startDate:g,endDate:y,placeholderText:"dd/mm/yyyy",className:"form-control me-2",dateFormat:"dd/MM/yyyy"}),a.jsx(w7,{selected:y,onChange:A=>C(A),selectsEnd:!0,startDate:g,endDate:y,minDate:g,placeholderText:"dd/mm/yyyy",className:"form-control",dateFormat:"dd/MM/yyyy"})]})]}),a.jsxs("div",{className:"col-5 d-flex justify-content-end mt-3",children:[a.jsx("button",{className:"btn btn-primary me-2",onClick:S,style:{width:"120px",height:"38px"},children:"Apply Filters"}),a.jsx("button",{className:"btn btn-secondary",onClick:D,style:{width:"120px",height:"38px"},children:"Reset Filters"})]})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive",children:[l?a.jsx("div",{className:"text-center p-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Leave Type"}),a.jsx("th",{children:"Requested Date"}),a.jsx("th",{children:"From Date"}),a.jsx("th",{children:"To Date"}),a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.length>0?r.map(A=>a.jsxs("tr",{children:[a.jsx("td",{style:{textWrap:"wrap"},children:A.employeeId}),a.jsx("td",{style:{textWrap:"wrap"},children:A.name||A.employeeName}),a.jsx("td",{children:A.leaveType}),a.jsx("td",{children:A.requestedDate?T(A.requestedDate):"-"}),a.jsx("td",{children:T(A.fromDate)}),a.jsx("td",{children:T(A.toDate)}),a.jsx("td",{children:a.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:A.reason})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.status==="Approved"?"bg-success":A.status==="Rejected"?"bg-danger":A.status==="Hold"?"bg-info":"bg-warning"}`,children:A.status})}),a.jsx("td",{children:a.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:A.status,onChange:L=>k(A._id,L.target.value),disabled:A.status==="Approved"||A.status==="Rejected",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})})]},A._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No leave requests found."})})})]}),d>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s-1),disabled:s===1,children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),a.jsx("li",{className:`page-item ${s===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(1),children:"1"})}),s>3&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),Array.from({length:d},(A,L)=>{const P=L+1;return P>1&&P<d&&Math.abs(P-s)<=1?a.jsx("li",{className:`page-item ${s===P?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(P),children:P})},P):null}),s<d-2&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),d>1&&a.jsx("li",{className:`page-item ${s===d?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(d),children:d})}),a.jsx("li",{className:`page-item ${s===d?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s+1),disabled:s===d,children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]})})})]})})},U6e="modulepreload",$6e=function(e){return"/"+e},S7={},u3=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=$6e(d),d in S7)return;S7[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":U6e,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var wo=Uint8Array,Yl=Uint16Array,kI=Int32Array,ZS=new wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eC=new wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h3=new wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OK=function(e,t){for(var r=new Yl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new kI(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},MK=OK(ZS,2),RK=MK.b,f3=MK.r;RK[28]=258,f3[258]=28;var FK=OK(eC,0),V6e=FK.b,C7=FK.r,m3=new Yl(32768);for(var qa=0;qa<32768;++qa){var ym=(qa&43690)>>1|(qa&21845)<<1;ym=(ym&52428)>>2|(ym&13107)<<2,ym=(ym&61680)>>4|(ym&3855)<<4,m3[qa]=((ym&65280)>>8|(ym&255)<<8)>>1}var Uu=function(e,t,r){for(var n=e.length,s=0,i=new Yl(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new Yl(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new Yl(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[m3[h]>>c]=d}else for(l=new Yl(n),s=0;s<n;++s)e[s]&&(l[s]=m3[o[e[s]-1]++]>>15-e[s]);return l},Wm=new wo(288);for(var qa=0;qa<144;++qa)Wm[qa]=8;for(var qa=144;qa<256;++qa)Wm[qa]=9;for(var qa=256;qa<280;++qa)Wm[qa]=7;for(var qa=280;qa<288;++qa)Wm[qa]=8;var My=new wo(32);for(var qa=0;qa<32;++qa)My[qa]=5;var q6e=Uu(Wm,9,0),z6e=Uu(Wm,9,1),H6e=Uu(My,5,0),W6e=Uu(My,5,1),a5=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},bd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},s5=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_I=function(e){return(e+7)/8|0},LK=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new wo(e.subarray(t,r))},G6e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],jd=function(e,t,r){var n=new Error(t||G6e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,jd),!r)throw n;return n},Y6e=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new wo(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new wo(s*3));var d=function(ce){var Z=r.length;if(ce>Z){var ae=new wo(Math.max(Z*2,ce));ae.set(r),r=ae}},u=t.f||0,h=t.p||0,m=t.b||0,p=t.l,v=t.d,g=t.m,b=t.n,y=s*8;do{if(!p){u=bd(e,h,1);var C=bd(e,h+1,3);if(h+=3,C)if(C==1)p=z6e,v=W6e,g=9,b=5;else if(C==2){var D=bd(e,h,31)+257,E=bd(e,h+10,15)+4,T=D+bd(e,h+5,31)+1;h+=14;for(var A=new wo(T),L=new wo(19),P=0;P<E;++P)L[h3[P]]=bd(e,h+P*3,7);h+=E*3;for(var O=a5(L),Q=(1<<O)-1,z=Uu(L,O,1),P=0;P<T;){var re=z[bd(e,h,Q)];h+=re&15;var N=re>>4;if(N<16)A[P++]=N;else{var U=0,X=0;for(N==16?(X=3+bd(e,h,3),h+=2,U=A[P-1]):N==17?(X=3+bd(e,h,7),h+=3):N==18&&(X=11+bd(e,h,127),h+=7);X--;)A[P++]=U}}var B=A.subarray(0,D),Y=A.subarray(D);g=a5(B),b=a5(Y),p=Uu(B,g,1),v=Uu(Y,b,1)}else jd(1);else{var N=_I(h)+4,k=e[N-4]|e[N-3]<<8,S=N+k;if(S>s){c&&jd(0);break}l&&d(m+k),r.set(e.subarray(N,S),m),t.b=m+=k,t.p=h=S*8,t.f=u;continue}if(h>y){c&&jd(0);break}}l&&d(m+131072);for(var K=(1<<g)-1,ue=(1<<b)-1,M=h;;M=h){var U=p[s5(e,h)&K],V=U>>4;if(h+=U&15,h>y){c&&jd(0);break}if(U||jd(2),V<256)r[m++]=V;else if(V==256){M=h,p=null;break}else{var W=V-254;if(V>264){var P=V-257,ee=ZS[P];W=bd(e,h,(1<<ee)-1)+RK[P],h+=ee}var te=v[s5(e,h)&ue],ne=te>>4;te||jd(3),h+=te&15;var Y=V6e[ne];if(ne>3){var ee=eC[ne];Y+=s5(e,h)&(1<<ee)-1,h+=ee}if(h>y){c&&jd(0);break}l&&d(m+131072);var se=m+W;if(m<Y){var oe=i-Y,G=Math.min(Y,se);for(oe+m<0&&jd(3);m<G;++m)r[m]=n[oe+m]}for(;m<se;++m)r[m]=r[m-Y]}}t.l=p,t.p=M,t.b=m,t.f=u,p&&(u=1,t.m=g,t.d=v,t.n=b)}while(!u);return m!=r.length&&o?LK(r,0,m):r.subarray(0,m)},Ph=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},kb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},i5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:UK,l:0};if(s==1){var o=new wo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,D){return S.f-D.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new Yl(m+1),v=p3(r[u-1],p,0);if(v>t){var n=0,g=0,b=v-t,y=1<<b;for(i.sort(function(D,E){return p[E.s]-p[D.s]||D.f-E.f});n<s;++n){var C=i[n].s;if(p[C]>t)g+=y-(1<<v-p[C]),p[C]=t;else break}for(g>>=b;g>0;){var N=i[n].s;p[N]<t?g-=1<<t-p[N]++-1:++n}for(;n>=0&&g;--n){var k=i[n].s;p[k]==t&&(--p[k],++g)}v=t}return{t:new wo(p),l:v}},p3=function(e,t,r){return e.s==-1?Math.max(p3(e.l,t,r+1),p3(e.r,t,r+1)):t[e.s]=r},k7=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yl(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},_b=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},BK=function(e,t,r){var n=r.length,s=_I(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},_7=function(e,t,r,n,s,i,o,l,c,d,u){Ph(t,u++,r),++s[256];for(var h=i5(s,15),m=h.t,p=h.l,v=i5(i,15),g=v.t,b=v.l,y=k7(m),C=y.c,N=y.n,k=k7(g),S=k.c,D=k.n,E=new Yl(19),T=0;T<C.length;++T)++E[C[T]&31];for(var T=0;T<S.length;++T)++E[S[T]&31];for(var A=i5(E,7),L=A.t,P=A.l,O=19;O>4&&!L[h3[O-1]];--O);var Q=d+5<<3,z=_b(s,Wm)+_b(i,My)+o,re=_b(s,m)+_b(i,g)+o+14+3*O+_b(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&Q<=z&&Q<=re)return BK(t,u,e.subarray(c,c+d));var U,X,B,Y;if(Ph(t,u,1+(re<z)),u+=2,re<z){U=Uu(m,p,0),X=m,B=Uu(g,b,0),Y=g;var K=Uu(L,P,0);Ph(t,u,N-257),Ph(t,u+5,D-1),Ph(t,u+10,O-4),u+=14;for(var T=0;T<O;++T)Ph(t,u+3*T,L[h3[T]]);u+=3*O;for(var ue=[C,S],M=0;M<2;++M)for(var V=ue[M],T=0;T<V.length;++T){var W=V[T]&31;Ph(t,u,K[W]),u+=L[W],W>15&&(Ph(t,u,V[T]>>5&127),u+=V[T]>>12)}}else U=q6e,X=Wm,B=H6e,Y=My;for(var T=0;T<l;++T){var ee=n[T];if(ee>255){var W=ee>>18&31;kb(t,u,U[W+257]),u+=X[W+257],W>7&&(Ph(t,u,ee>>23&31),u+=ZS[W]);var te=ee&31;kb(t,u,B[te]),u+=Y[te],te>3&&(kb(t,u,ee>>5&8191),u+=eC[te])}else kb(t,u,U[ee]),u+=X[ee]}return kb(t,u,U[256]),u+X[256]},K6e=new kI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UK=new wo(0),X6e=function(e,t,r,n,s,i){var o=i.z||e.length,l=new wo(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=K6e[t-1],m=h>>13,p=h&8191,v=(1<<r)-1,g=i.p||new Yl(32768),b=i.h||new Yl(v+1),y=Math.ceil(r/3),C=2*y,N=function(je){return(e[je]^e[je+1]<<y^e[je+2]<<C)&v},k=new kI(25e3),S=new Yl(288),D=new Yl(32),E=0,T=0,A=i.i||0,L=0,P=i.w||0,O=0;A+2<o;++A){var Q=N(A),z=A&32767,re=b[Q];if(g[z]=re,b[Q]=z,P<=A){var U=o-A;if((E>7e3||L>24576)&&(U>423||!d)){u=_7(e,c,0,k,S,D,T,L,O,A-O,u),L=E=T=0,O=A;for(var X=0;X<286;++X)S[X]=0;for(var X=0;X<30;++X)D[X]=0}var B=2,Y=0,K=p,ue=z-re&32767;if(U>2&&Q==N(A-ue))for(var M=Math.min(m,U)-1,V=Math.min(32767,A),W=Math.min(258,U);ue<=V&&--K&&z!=re;){if(e[A+B]==e[A+B-ue]){for(var ee=0;ee<W&&e[A+ee]==e[A+ee-ue];++ee);if(ee>B){if(B=ee,Y=ue,ee>M)break;for(var te=Math.min(ue,ee-2),ne=0,X=0;X<te;++X){var se=A-ue+X&32767,oe=g[se],G=se-oe&32767;G>ne&&(ne=G,re=se)}}}z=re,re=g[z],ue+=z-re&32767}if(Y){k[L++]=268435456|f3[B]<<18|C7[Y];var ce=f3[B]&31,Z=C7[Y]&31;T+=ZS[ce]+eC[Z],++S[257+ce],++D[Z],P=A+B,++E}else k[L++]=e[A],++S[e[A]]}}for(A=Math.max(A,P);A<o;++A)k[L++]=e[A],++S[e[A]];u=_7(e,c,d,k,S,D,T,L,O,A-O,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=A,i.w=P)}else{for(var A=i.w||0;A<o+d;A+=65535){var ae=A+65535;ae>=o&&(c[u/8|0]=d,ae=o),u=BK(c,u+1,e.subarray(A,ae))}i.i=o}return LK(l,0,n+_I(u)+s)},$K=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Q6e=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new wo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return X6e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},VK=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},J6e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=$K();s.p(t.dictionary),VK(e,2,s.d())}},Z6e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&jd(6,"invalid zlib data"),(e[1]>>5&1)==1&&jd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function x3(e,t){t||(t={});var r=$K();r.p(e);var n=Q6e(e,t,t.dictionary?6:2,4);return J6e(n,t),VK(n,n.length-4,r.d()),n}function e8e(e,t){return Y6e(e.subarray(Z6e(e),-4),{i:2},t,t)}var t8e=typeof TextDecoder<"u"&&new TextDecoder,r8e=0;try{t8e.decode(UK,{stream:!0}),r8e=1}catch{}var sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function o5(){sn.console&&typeof sn.console.log=="function"&&sn.console.log.apply(sn.console,arguments)}var Da={log:o5,warn:function(e){sn.console&&(typeof sn.console.warn=="function"?sn.console.warn.apply(sn.console,arguments):o5.call(null,arguments))},error:function(e){sn.console&&(typeof sn.console.error=="function"?sn.console.error.apply(sn.console,arguments):o5(e))}};function l5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Bp(n.response,t,r)},n.onerror=function(){Da.error("could not download file")},n.send()}function E7(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function xN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kb,v3,Bp=sn.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=sn.URL||sn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?E7(s.href)?l5(e,t,r):xN(s,s.target="_blank"):xN(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){xN(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(E7(e))l5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){xN(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Vn(i)!=="object"&&(Da.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return l5(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(sn.HTMLElement)||sn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=sn.URL||sn.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qK(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c5(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=so(r,n,s,i,t[0],7,-680876936),i=so(i,r,n,s,t[1],12,-389564586),s=so(s,i,r,n,t[2],17,606105819),n=so(n,s,i,r,t[3],22,-1044525330),r=so(r,n,s,i,t[4],7,-176418897),i=so(i,r,n,s,t[5],12,1200080426),s=so(s,i,r,n,t[6],17,-1473231341),n=so(n,s,i,r,t[7],22,-45705983),r=so(r,n,s,i,t[8],7,1770035416),i=so(i,r,n,s,t[9],12,-1958414417),s=so(s,i,r,n,t[10],17,-42063),n=so(n,s,i,r,t[11],22,-1990404162),r=so(r,n,s,i,t[12],7,1804603682),i=so(i,r,n,s,t[13],12,-40341101),s=so(s,i,r,n,t[14],17,-1502002290),r=io(r,n=so(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=io(i,r,n,s,t[6],9,-1069501632),s=io(s,i,r,n,t[11],14,643717713),n=io(n,s,i,r,t[0],20,-373897302),r=io(r,n,s,i,t[5],5,-701558691),i=io(i,r,n,s,t[10],9,38016083),s=io(s,i,r,n,t[15],14,-660478335),n=io(n,s,i,r,t[4],20,-405537848),r=io(r,n,s,i,t[9],5,568446438),i=io(i,r,n,s,t[14],9,-1019803690),s=io(s,i,r,n,t[3],14,-187363961),n=io(n,s,i,r,t[8],20,1163531501),r=io(r,n,s,i,t[13],5,-1444681467),i=io(i,r,n,s,t[2],9,-51403784),s=io(s,i,r,n,t[7],14,1735328473),r=oo(r,n=io(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=oo(i,r,n,s,t[8],11,-2022574463),s=oo(s,i,r,n,t[11],16,1839030562),n=oo(n,s,i,r,t[14],23,-35309556),r=oo(r,n,s,i,t[1],4,-1530992060),i=oo(i,r,n,s,t[4],11,1272893353),s=oo(s,i,r,n,t[7],16,-155497632),n=oo(n,s,i,r,t[10],23,-1094730640),r=oo(r,n,s,i,t[13],4,681279174),i=oo(i,r,n,s,t[0],11,-358537222),s=oo(s,i,r,n,t[3],16,-722521979),n=oo(n,s,i,r,t[6],23,76029189),r=oo(r,n,s,i,t[9],4,-640364487),i=oo(i,r,n,s,t[12],11,-421815835),s=oo(s,i,r,n,t[15],16,530742520),r=lo(r,n=oo(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=lo(i,r,n,s,t[7],10,1126891415),s=lo(s,i,r,n,t[14],15,-1416354905),n=lo(n,s,i,r,t[5],21,-57434055),r=lo(r,n,s,i,t[12],6,1700485571),i=lo(i,r,n,s,t[3],10,-1894986606),s=lo(s,i,r,n,t[10],15,-1051523),n=lo(n,s,i,r,t[1],21,-2054922799),r=lo(r,n,s,i,t[8],6,1873313359),i=lo(i,r,n,s,t[15],10,-30611744),s=lo(s,i,r,n,t[6],15,-1560198380),n=lo(n,s,i,r,t[13],21,1309151649),r=lo(r,n,s,i,t[4],6,-145523070),i=lo(i,r,n,s,t[11],10,-1120210379),s=lo(s,i,r,n,t[2],15,718787259),n=lo(n,s,i,r,t[9],21,-343485551),e[0]=Dm(r,e[0]),e[1]=Dm(n,e[1]),e[2]=Dm(s,e[2]),e[3]=Dm(i,e[3])}function tC(e,t,r,n,s,i){return t=Dm(Dm(t,e),Dm(n,i)),Dm(t<<s|t>>>32-s,r)}function so(e,t,r,n,s,i,o){return tC(t&r|~t&n,e,t,s,i,o)}function io(e,t,r,n,s,i,o){return tC(t&n|r&~n,e,t,s,i,o)}function oo(e,t,r,n,s,i,o){return tC(t^r^n,e,t,s,i,o)}function lo(e,t,r,n,s,i,o){return tC(r^(t|~n),e,t,s,i,o)}function zK(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)c5(n,n8e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(c5(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,c5(n,s),n}function n8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Kb=sn.atob.bind(sn),v3=sn.btoa.bind(sn);var D7="0123456789abcdef".split("");function a8e(e){for(var t="",r=0;r<4;r++)t+=D7[e>>8*r+4&15]+D7[e>>8*r&15];return t}function s8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function g3(e){return zK(e).map(s8e).join("")}var i8e=function(e){for(var t=0;t<e.length;t++)e[t]=a8e(e[t]);return e.join("")}(zK("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dm(e,t){if(i8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b3(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,m=0,p=0,v="";for(c=0;c<h;c++)p=(p+(u=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=u,o=l[(l[m]+l[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var A7={print:4,modify:8,copy:16,"annot-forms":32};function Y0(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(A7.perm!==void 0)throw new Error("Invalid permission: "+l);s+=A7[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=g3(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=b3(this.encryptionKey,this.padding)}function K0(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function T7(e){if(Vn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){sn.console&&Da.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _w(e){if(!(this instanceof _w))return new _w(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function HK(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vp(e,t,r,n,s){if(!(this instanceof Vp))return new Vp(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,HK.call(this,n,s)}function tv(e,t,r,n,s){if(!(this instanceof tv))return new tv(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,HK.call(this,n,s)}function rn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Vn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=T7;var v="1.3",g=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(H){v=H};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(H){return b[H]};s=s||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},N=C.COMPAT;function k(){this.saveGraphicsState(),ie(new Ot(xe,0,0,-xe,0,qd()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),d="n",N=C.ADVANCED}function S(){this.restoreGraphicsState(),d="S",N=C.COMPAT}var D=p.__private__.combineFontStyleAndFontWeight=function(H,pe){if(H=="bold"&&pe=="normal"||H=="bold"&&pe==400||H=="normal"&&pe=="italic"||H=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(H=pe==400||pe==="normal"?H==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||H!=="normal"?(pe==700?"bold":pe)+""+H:"bold"),H};p.advancedAPI=function(H){var pe=N===C.COMPAT;return pe&&k.call(this),typeof H!="function"||(H(this),pe&&S.call(this)),this},p.compatAPI=function(H){var pe=N===C.ADVANCED;return pe&&S.call(this),typeof H!="function"||(H(this),pe&&k.call(this)),this},p.isAdvancedAPI=function(){return N===C.ADVANCED};var E,T=function(H){if(N!==C.ADVANCED)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=p.roundToPrecision=p.__private__.roundToPrecision=function(H,pe){var He=t||pe;if(isNaN(H)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(He).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,c)}:c==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return A(H,16)};var L=p.f2=p.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return A(H,2)},P=p.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return A(H,3)},O=p.scale=p.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return N===C.COMPAT?H*xe:N===C.ADVANCED?H:void 0},Q=function(H){return N===C.COMPAT?qd()-H:N===C.ADVANCED?H:void 0},z=function(H){return O(Q(H))};p.__private__.setPrecision=p.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(t=parseInt(H,10))};var re,U="00000000000000000000000000000000",X=p.__private__.getFileId=function(){return U},B=p.__private__.setFileId=function(H){return U=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(fs=new Y0(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};p.setFileId=function(H){return B(H),this},p.getFileId=function(){return X()};var Y=p.__private__.convertDateToPDFDate=function(H){var pe=H.getTimezoneOffset(),He=pe<0?"+":"-",tt=Math.floor(Math.abs(pe/60)),gt=Math.abs(pe%60),Lt=[He,W(tt),"'",W(gt),"'"].join("");return["D:",H.getFullYear(),W(H.getMonth()+1),W(H.getDate()),W(H.getHours()),W(H.getMinutes()),W(H.getSeconds()),Lt].join("")},K=p.__private__.convertPDFDateToDate=function(H){var pe=parseInt(H.substr(2,4),10),He=parseInt(H.substr(6,2),10)-1,tt=parseInt(H.substr(8,2),10),gt=parseInt(H.substr(10,2),10),Lt=parseInt(H.substr(12,2),10),ar=parseInt(H.substr(14,2),10);return new Date(pe,He,tt,gt,Lt,ar,0)},ue=p.__private__.setCreationDate=function(H){var pe;if(H===void 0&&(H=new Date),H instanceof Date)pe=Y(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=H}return re=pe},M=p.__private__.getCreationDate=function(H){var pe=re;return H==="jsDate"&&(pe=K(re)),pe};p.setCreationDate=function(H){return ue(H),this},p.getCreationDate=function(H){return M(H)};var V,W=p.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},ee=p.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},te=0,ne=[],se=[],oe=0,G=[],ce=[],Z=!1,ae=se,je=function(){te=0,oe=0,se=[],ne=[],G=[],Ae=ur(),ke=ur()};p.__private__.setCustomOutputDestination=function(H){Z=!0,ae=H};var de=function(H){Z||(ae=H)};p.__private__.resetCustomOutputDestination=function(){Z=!1,ae=se};var ie=p.__private__.out=function(H){return H=H.toString(),oe+=H.length+1,ae.push(H),ae},be=p.__private__.write=function(H){return ie(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},Ne=p.__private__.getArrayBuffer=function(H){for(var pe=H.length,He=new ArrayBuffer(pe),tt=new Uint8Array(He);pe--;)tt[pe]=H.charCodeAt(pe);return He},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Fe};var Xe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(H){return Xe=N===C.ADVANCED?H/xe:H,this};var ct,xt=p.__private__.getFontSize=p.getFontSize=function(){return N===C.COMPAT?Xe:Xe*xe},Re=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(H){return Re=H,this},p.__private__.getR2L=p.getR2L=function(){return Re};var ht,At=p.__private__.setZoomMode=function(H){var pe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))ct=H;else if(isNaN(H)){if(pe.indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');ct=H}else ct=parseInt(H,10)};p.__private__.getZoomMode=function(){return ct};var _t,Wt=p.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');ht=H};p.__private__.getPageMode=function(){return ht};var Ke=p.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');_t=H};p.__private__.getLayoutMode=function(){return _t},p.__private__.setDisplayMode=p.setDisplayMode=function(H,pe,He){return At(H),Ke(pe),Wt(He),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(H){if(Object.keys(ge).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[H]},p.__private__.getDocumentProperties=function(){return ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(H){for(var pe in ge)ge.hasOwnProperty(pe)&&H[pe]&&(ge[pe]=H[pe]);return this},p.__private__.setDocumentProperty=function(H,pe){if(Object.keys(ge).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[H]=pe};var ve,xe,Ie,Ze,Ft,Qe={},Ye={},Le=[],ze={},ut={},Te={},We={},Ge=null,It=0,Bt=[],Ee=new T7(p),_e=e.hotfixes||[],st={},wt={},rr=[],Ot=function H(pe,He,tt,gt,Lt,ar){if(!(this instanceof H))return new H(pe,He,tt,gt,Lt,ar);isNaN(pe)&&(pe=1),isNaN(He)&&(He=0),isNaN(tt)&&(tt=0),isNaN(gt)&&(gt=1),isNaN(Lt)&&(Lt=0),isNaN(ar)&&(ar=0),this._matrix=[pe,He,tt,gt,Lt,ar]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(H)},Ot.prototype.multiply=function(H){var pe=H.sx*this.sx+H.shy*this.shx,He=H.sx*this.shy+H.shy*this.sy,tt=H.shx*this.sx+H.sy*this.shx,gt=H.shx*this.shy+H.sy*this.sy,Lt=H.tx*this.sx+H.ty*this.shx+this.tx,ar=H.tx*this.shy+H.ty*this.sy+this.ty;return new Ot(pe,He,tt,gt,Lt,ar)},Ot.prototype.decompose=function(){var H=this.sx,pe=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Lt=this.ty,ar=Math.sqrt(H*H+pe*pe),Nr=(H/=ar)*He+(pe/=ar)*tt;He-=H*Nr,tt-=pe*Nr;var Mr=Math.sqrt(He*He+tt*tt);return Nr/=Mr,H*(tt/=Mr)<pe*(He/=Mr)&&(H=-H,pe=-pe,Nr=-Nr,ar=-ar),{scale:new Ot(ar,0,0,Mr,0,0),translate:new Ot(1,0,0,1,gt,Lt),rotate:new Ot(H,pe,-pe,H,0,0),skew:new Ot(1,0,Nr,1,0,0)}},Ot.prototype.toString=function(H){return this.join(" ")},Ot.prototype.inversed=function(){var H=this.sx,pe=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Lt=this.ty,ar=1/(H*tt-pe*He),Nr=tt*ar,Mr=-pe*ar,fn=-He*ar,dn=H*ar;return new Ot(Nr,Mr,fn,dn,-Nr*gt-fn*Lt,-Mr*gt-dn*Lt)},Ot.prototype.applyToPoint=function(H){var pe=H.x*this.sx+H.y*this.shx+this.tx,He=H.x*this.shy+H.y*this.sy+this.ty;return new Pf(pe,He)},Ot.prototype.applyToRectangle=function(H){var pe=this.applyToPoint(H),He=this.applyToPoint(new Pf(H.x+H.w,H.y+H.h));return new ip(pe.x,pe.y,He.x-pe.x,He.y-pe.y)},Ot.prototype.clone=function(){var H=this.sx,pe=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Lt=this.ty;return new Ot(H,pe,He,tt,gt,Lt)},p.Matrix=Ot;var er=p.matrixMult=function(H,pe){return pe.multiply(H)},fr=new Ot(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=fr;var yr=function(H,pe){if(!ut[H]){var He=(pe instanceof Vp?"Sh":"P")+(Object.keys(ze).length+1).toString(10);pe.id=He,ut[H]=He,ze[He]=pe,Ee.publish("addPattern",pe)}};p.ShadingPattern=Vp,p.TilingPattern=tv,p.addShadingPattern=function(H,pe){return T("addShadingPattern()"),yr(H,pe),this},p.beginTilingPattern=function(H){T("beginTilingPattern()"),Of(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},p.endTilingPattern=function(H,pe){T("endTilingPattern()"),pe.stream=ce[V].join(`
`),yr(H,pe),Ee.publish("endTilingPattern",pe),rr.pop().restore()};var Yr=p.__private__.newObject=function(){var H=ur();return me(H,!0),H},ur=p.__private__.newObjectDeferred=function(){return te++,ne[te]=function(){return oe},te},me=function(H,pe){return pe=typeof pe=="boolean"&&pe,ne[H]=oe,pe&&ie(H+" 0 obj"),H},Be=p.__private__.newAdditionalObject=function(){var H={objId:ur(),content:""};return G.push(H),H},Ae=ur(),ke=ur(),Me=p.__private__.decodeColorString=function(H){var pe=H.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length===5&&(pe[4]==="k"||pe[4]==="K")&&(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var He=parseFloat(pe[0]);pe=[He,He,He,"r"]}for(var tt="#",gt=0;gt<3;gt++)tt+=("0"+Math.floor(255*parseFloat(pe[gt])).toString(16)).slice(-2);return tt},$e=p.__private__.encodeColorString=function(H){var pe;typeof H=="string"&&(H={ch1:H});var He=H.ch1,tt=H.ch2,gt=H.ch3,Lt=H.ch4,ar=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var Nr=new qK(He);if(Nr.ok)He=Nr.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var Mr=parseInt(He.substr(1),16);He=Mr>>16&255,tt=Mr>>8&255,gt=255&Mr}if(tt===void 0||Lt===void 0&&He===tt&&tt===gt)if(typeof He=="string")pe=He+" "+ar[0];else switch(H.precision){case 2:pe=L(He/255)+" "+ar[0];break;case 3:default:pe=P(He/255)+" "+ar[0]}else if(Lt===void 0||Vn(Lt)==="object"){if(Lt&&!isNaN(Lt.a)&&Lt.a===0)return pe=["1.","1.","1.",ar[1]].join(" ");if(typeof He=="string")pe=[He,tt,gt,ar[1]].join(" ");else switch(H.precision){case 2:pe=[L(He/255),L(tt/255),L(gt/255),ar[1]].join(" ");break;default:case 3:pe=[P(He/255),P(tt/255),P(gt/255),ar[1]].join(" ")}}else if(typeof He=="string")pe=[He,tt,gt,Lt,ar[2]].join(" ");else switch(H.precision){case 2:pe=[L(He),L(tt),L(gt),L(Lt),ar[2]].join(" ");break;case 3:default:pe=[P(He),P(tt),P(gt),P(Lt),ar[2]].join(" ")}return pe},pt=p.__private__.getFilters=function(){return o},jt=p.__private__.putStream=function(H){var pe=(H=H||{}).data||"",He=H.filters||pt(),tt=H.alreadyAppliedFilters||[],gt=H.addLength1||!1,Lt=pe.length,ar=H.objectId,Nr=function(rs){return rs};if(u!==null&&ar===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nr=fs.encryptor(ar,0));var Mr={};He===!0&&(He=["FlateEncode"]);var fn=H.additionalKeyValues||[],dn=(Mr=rn.API.processDataByFilters!==void 0?rn.API.processDataByFilters(pe,He):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(Mr.data.length!==0&&(fn.push({key:"Length",value:Mr.data.length}),gt===!0&&fn.push({key:"Length1",value:Lt})),dn.length!=0)if(dn.split("/").length-1==1)fn.push({key:"Filter",value:dn});else{fn.push({key:"Filter",value:"["+dn+"]"});for(var Pn=0;Pn<fn.length;Pn+=1)if(fn[Pn].key==="DecodeParms"){for(var Pa=[],La=0;La<Mr.reverseChain.split("/").length-1;La+=1)Pa.push("null");Pa.push(fn[Pn].value),fn[Pn].value="["+Pa.join(" ")+"]"}}ie("<<");for(var ts=0;ts<fn.length;ts++)ie("/"+fn[ts].key+" "+fn[ts].value);ie(">>"),Mr.data.length!==0&&(ie("stream"),ie(Nr(Mr.data)),ie("endstream"))},ot=p.__private__.putPage=function(H){var pe=H.number,He=H.data,tt=H.objId,gt=H.contentsObjId;me(tt,!0),ie("<</Type /Page"),ie("/Parent "+H.rootDictionaryObjId+" 0 R"),ie("/Resources "+H.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(E(H.mediaBox.bottomLeftX))+" "+parseFloat(E(H.mediaBox.bottomLeftY))+" "+E(H.mediaBox.topRightX)+" "+E(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&ie("/CropBox ["+E(H.cropBox.bottomLeftX)+" "+E(H.cropBox.bottomLeftY)+" "+E(H.cropBox.topRightX)+" "+E(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&ie("/BleedBox ["+E(H.bleedBox.bottomLeftX)+" "+E(H.bleedBox.bottomLeftY)+" "+E(H.bleedBox.topRightX)+" "+E(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&ie("/TrimBox ["+E(H.trimBox.bottomLeftX)+" "+E(H.trimBox.bottomLeftY)+" "+E(H.trimBox.topRightX)+" "+E(H.trimBox.topRightY)+"]"),H.artBox!==null&&ie("/ArtBox ["+E(H.artBox.bottomLeftX)+" "+E(H.artBox.bottomLeftY)+" "+E(H.artBox.topRightX)+" "+E(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&ie("/UserUnit "+H.userUnit),Ee.publish("putPage",{objId:tt,pageContext:Bt[pe],pageNumber:pe,page:He}),ie("/Contents "+gt+" 0 R"),ie(">>"),ie("endobj");var Lt=He.join(`
`);return N===C.ADVANCED&&(Lt+=`
Q`),me(gt,!0),jt({data:Lt,filters:pt(),objectId:gt}),ie("endobj"),tt},bt=p.__private__.putPages=function(){var H,pe,He=[];for(H=1;H<=It;H++)Bt[H].objId=ur(),Bt[H].contentsObjId=ur();for(H=1;H<=It;H++)He.push(ot({number:H,data:ce[H],objId:Bt[H].objId,contentsObjId:Bt[H].contentsObjId,mediaBox:Bt[H].mediaBox,cropBox:Bt[H].cropBox,bleedBox:Bt[H].bleedBox,trimBox:Bt[H].trimBox,artBox:Bt[H].artBox,userUnit:Bt[H].userUnit,rootDictionaryObjId:Ae,resourceDictionaryObjId:ke}));me(Ae,!0),ie("<</Type /Pages");var tt="/Kids [";for(pe=0;pe<It;pe++)tt+=He[pe]+" 0 R ";ie(tt+"]"),ie("/Count "+It),ie(">>"),ie("endobj"),Ee.publish("postPutPages")},yt=function(H){Ee.publish("putFont",{font:H,out:ie,newObject:Yr,putStream:jt}),H.isAlreadyPutted!==!0&&(H.objectNumber=Yr(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+K0(H.postScriptName)),ie("/Subtype /Type1"),typeof H.encoding=="string"&&ie("/Encoding /"+H.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Yt=function(){for(var H in Qe)Qe.hasOwnProperty(H)&&(h===!1||h===!0&&m.hasOwnProperty(H))&&yt(Qe[H])},sr=function(H){H.objectNumber=Yr();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[E(H.x),E(H.y),E(H.x+H.width),E(H.y+H.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var He=H.pages[1].join(`
`);jt({data:He,additionalKeyValues:pe,objectId:H.objectNumber}),ie("endobj")},mr=function(){for(var H in st)st.hasOwnProperty(H)&&sr(st[H])},ir=function(H,pe){var He,tt=[],gt=1/(pe-1);for(He=0;He<1;He+=gt)tt.push(He);if(tt.push(1),H[0].offset!=0){var Lt={offset:0,color:H[0].color};H.unshift(Lt)}if(H[H.length-1].offset!=1){var ar={offset:1,color:H[H.length-1].color};H.push(ar)}for(var Nr="",Mr=0,fn=0;fn<tt.length;fn++){for(He=tt[fn];He>H[Mr+1].offset;)Mr++;var dn=H[Mr].offset,Pn=(He-dn)/(H[Mr+1].offset-dn),Pa=H[Mr].color,La=H[Mr+1].color;Nr+=ee(Math.round((1-Pn)*Pa[0]+Pn*La[0]).toString(16))+ee(Math.round((1-Pn)*Pa[1]+Pn*La[1]).toString(16))+ee(Math.round((1-Pn)*Pa[2]+Pn*La[2]).toString(16))}return Nr.trim()},Ve=function(H,pe){pe||(pe=21);var He=Yr(),tt=ir(H.colors,pe),gt=[];gt.push({key:"FunctionType",value:"0"}),gt.push({key:"Domain",value:"[0.0 1.0]"}),gt.push({key:"Size",value:"["+pe+"]"}),gt.push({key:"BitsPerSample",value:"8"}),gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt({data:tt,additionalKeyValues:gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),ie("endobj"),H.objectNumber=Yr(),ie("<< /ShadingType "+H.type),ie("/ColorSpace /DeviceRGB");var Lt="/Coords ["+E(parseFloat(H.coords[0]))+" "+E(parseFloat(H.coords[1]))+" ";H.type===2?Lt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3])):Lt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3]))+" "+E(parseFloat(H.coords[4]))+" "+E(parseFloat(H.coords[5])),ie(Lt+="]"),H.matrix&&ie("/Matrix ["+H.matrix.toString()+"]"),ie("/Function "+He+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},dr=function(H,pe){var He=ur(),tt=Yr();pe.push({resourcesOid:He,objectOid:tt}),H.objectNumber=tt;var gt=[];gt.push({key:"Type",value:"/Pattern"}),gt.push({key:"PatternType",value:"1"}),gt.push({key:"PaintType",value:"1"}),gt.push({key:"TilingType",value:"1"}),gt.push({key:"BBox",value:"["+H.boundingBox.map(E).join(" ")+"]"}),gt.push({key:"XStep",value:E(H.xStep)}),gt.push({key:"YStep",value:E(H.yStep)}),gt.push({key:"Resources",value:He+" 0 R"}),H.matrix&&gt.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),jt({data:H.stream,additionalKeyValues:gt,objectId:H.objectNumber}),ie("endobj")},or=function(H){var pe;for(pe in ze)ze.hasOwnProperty(pe)&&(ze[pe]instanceof Vp?Ve(ze[pe]):ze[pe]instanceof tv&&dr(ze[pe],H))},$r=function(H){for(var pe in H.objectNumber=Yr(),ie("<<"),H)switch(pe){case"opacity":ie("/ca "+L(H[pe]));break;case"stroke-opacity":ie("/CA "+L(H[pe]))}ie(">>"),ie("endobj")},gn=function(){var H;for(H in Te)Te.hasOwnProperty(H)&&$r(Te[H])},vt=function(){for(var H in ie("/XObject <<"),st)st.hasOwnProperty(H)&&st[H].objectNumber>=0&&ie("/"+H+" "+st[H].objectNumber+" 0 R");Ee.publish("putXobjectDict"),ie(">>")},br=function(){fs.oid=Yr(),ie("<<"),ie("/Filter /Standard"),ie("/V "+fs.v),ie("/R "+fs.r),ie("/U <"+fs.toHexString(fs.U)+">"),ie("/O <"+fs.toHexString(fs.O)+">"),ie("/P "+fs.P),ie(">>"),ie("endobj")},hr=function(){for(var H in ie("/Font <<"),Qe)Qe.hasOwnProperty(H)&&(h===!1||h===!0&&m.hasOwnProperty(H))&&ie("/"+H+" "+Qe[H].objectNumber+" 0 R");ie(">>")},qr=function(){if(Object.keys(ze).length>0){for(var H in ie("/Shading <<"),ze)ze.hasOwnProperty(H)&&ze[H]instanceof Vp&&ze[H].objectNumber>=0&&ie("/"+H+" "+ze[H].objectNumber+" 0 R");Ee.publish("putShadingPatternDict"),ie(">>")}},Qr=function(H){if(Object.keys(ze).length>0){for(var pe in ie("/Pattern <<"),ze)ze.hasOwnProperty(pe)&&ze[pe]instanceof p.TilingPattern&&ze[pe].objectNumber>=0&&ze[pe].objectNumber<H&&ie("/"+pe+" "+ze[pe].objectNumber+" 0 R");Ee.publish("putTilingPatternDict"),ie(">>")}},da=function(){if(Object.keys(Te).length>0){var H;for(H in ie("/ExtGState <<"),Te)Te.hasOwnProperty(H)&&Te[H].objectNumber>=0&&ie("/"+H+" "+Te[H].objectNumber+" 0 R");Ee.publish("putGStateDict"),ie(">>")}},Fn=function(H){me(H.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),hr(),qr(),Qr(H.objectOid),da(),vt(),ie(">>"),ie("endobj")},Ia=function(){var H=[];Yt(),gn(),mr(),or(H),Ee.publish("putResources"),H.forEach(Fn),Fn({resourcesOid:ke,objectOid:Number.MAX_SAFE_INTEGER}),Ee.publish("postPutResources")},Ti=function(){Ee.publish("putAdditionalObjects");for(var H=0;H<G.length;H++){var pe=G[H];me(pe.objId,!0),ie(pe.content),ie("endobj")}Ee.publish("postPutAdditionalObjects")},ya=function(H){Ye[H.fontName]=Ye[H.fontName]||{},Ye[H.fontName][H.fontStyle]=H.id},ka=function(H,pe,He,tt,gt){var Lt={id:"F"+(Object.keys(Qe).length+1).toString(10),postScriptName:H,fontName:pe,fontStyle:He,encoding:tt,isStandardFont:gt||!1,metadata:{}};return Ee.publish("addFont",{font:Lt,instance:this}),Qe[Lt.id]=Lt,ya(Lt),Lt.id},pl=function(H){for(var pe=0,He=Fe.length;pe<He;pe++){var tt=ka.call(this,H[pe][0],H[pe][1],H[pe][2],Fe[pe][3],!0);h===!1&&(m[tt]=!0);var gt=H[pe][0].split("-");ya({id:tt,fontName:gt[0],fontStyle:gt[1]||""})}Ee.publish("addFonts",{fonts:Qe,dictionary:Ye})},es=function(H){return H.foo=function(){try{return H.apply(this,arguments)}catch(tt){var pe=tt.stack||"";~pe.indexOf(" at ")&&(pe=pe.split(" at ")[1]);var He="Error in function "+pe.split(`
`)[0].split("<")[0]+": "+tt.message;if(!sn.console)throw new Error(He);sn.console.error(He,tt),sn.alert&&alert(He)}},H.foo.bar=H,H.foo},$o=function(H,pe){var He,tt,gt,Lt,ar,Nr,Mr,fn,dn;if(gt=(pe=pe||{}).sourceEncoding||"Unicode",ar=pe.outputEncoding,(pe.autoencode||ar)&&Qe[ve].metadata&&Qe[ve].metadata[gt]&&Qe[ve].metadata[gt].encoding&&(Lt=Qe[ve].metadata[gt].encoding,!ar&&Qe[ve].encoding&&(ar=Qe[ve].encoding),!ar&&Lt.codePages&&(ar=Lt.codePages[0]),typeof ar=="string"&&(ar=Lt[ar]),ar)){for(Mr=!1,Nr=[],He=0,tt=H.length;He<tt;He++)(fn=ar[H.charCodeAt(He)])?Nr.push(String.fromCharCode(fn)):Nr.push(H[He]),Nr[He].charCodeAt(0)>>8&&(Mr=!0);H=Nr.join("")}for(He=H.length;Mr===void 0&&He!==0;)H.charCodeAt(He-1)>>8&&(Mr=!0),He--;if(!Mr)return H;for(Nr=pe.noBOM?[]:[254,255],He=0,tt=H.length;He<tt;He++){if((dn=(fn=H.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+H+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nr.push(dn),Nr.push(fn-(dn<<8))}return String.fromCharCode.apply(void 0,Nr)},Or=p.__private__.pdfEscape=p.pdfEscape=function(H,pe){return $o(H,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$s=p.__private__.beginPage=function(H){ce[++It]=[],Bt[It]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},xl(It),de(ce[V])},Qi=function(H,pe){var He,tt,gt;switch(r=pe||r,typeof H=="string"&&(He=y(H.toLowerCase()),Array.isArray(He)&&(tt=He[0],gt=He[1])),Array.isArray(H)&&(tt=H[0]*xe,gt=H[1]*xe),isNaN(tt)&&(tt=s[0],gt=s[1]),(tt>14400||gt>14400)&&(Da.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),gt=Math.min(14400,gt)),s=[tt,gt],r.substr(0,1)){case"l":gt>tt&&(s=[gt,tt]);break;case"p":tt>gt&&(s=[gt,tt])}$s(s),Df(cc),ie(jl),sp!==0&&ie(sp+" J"),If!==0&&ie(If+" j"),Ee.publish("addPage",{pageNumber:It})},nh=function(H){H>0&&H<=It&&(ce.splice(H,1),Bt.splice(H,1),It--,V>It&&(V=It),this.setPage(V))},xl=function(H){H>0&&H<=It&&(V=H)},kf=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ce.length-1},ah=function(H,pe,He){var tt,gt=void 0;return He=He||{},H=H!==void 0?H:Qe[ve].fontName,pe=pe!==void 0?pe:Qe[ve].fontStyle,tt=H.toLowerCase(),Ye[tt]!==void 0&&Ye[tt][pe]!==void 0?gt=Ye[tt][pe]:Ye[H]!==void 0&&Ye[H][pe]!==void 0?gt=Ye[H][pe]:He.disableWarning===!1&&Da.warn("Unable to look up font label for font '"+H+"', '"+pe+"'. Refer to getFontList() for available fonts."),gt||He.noFallback||(gt=Ye.times[pe])==null&&(gt=Ye.times.normal),gt},Vo=p.__private__.putInfo=function(){var H=Yr(),pe=function(tt){return tt};for(var He in u!==null&&(pe=fs.encryptor(H,0)),ie("<<"),ie("/Producer ("+Or(pe("jsPDF "+rn.version))+")"),ge)ge.hasOwnProperty(He)&&ge[He]&&ie("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+Or(pe(ge[He]))+")");ie("/CreationDate ("+Or(pe(re))+")"),ie(">>"),ie("endobj")},ac=p.__private__.putCatalog=function(H){var pe=(H=H||{}).rootDictionaryObjId||Ae;switch(Yr(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+pe+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+ct;He.substr(He.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+L(ct)+"]")}switch(_t||(_t="continuous"),_t){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}ht&&ie("/PageMode /"+ht),Ee.publish("putCatalog"),ie(">>"),ie("endobj")},Qc=p.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(te+1)),ie("/Root "+te+" 0 R"),ie("/Info "+(te-1)+" 0 R"),u!==null&&ie("/Encrypt "+fs.oid+" 0 R"),ie("/ID [ <"+U+"> <"+U+"> ]"),ie(">>")},vl=p.__private__.putHeader=function(){ie("%PDF-"+v),ie("%")},Jc=p.__private__.putXRef=function(){var H="0000000000";ie("xref"),ie("0 "+(te+1)),ie("0000000000 65535 f ");for(var pe=1;pe<=te;pe++)typeof ne[pe]=="function"?ie((H+ne[pe]()).slice(-10)+" 00000 n "):ne[pe]!==void 0?ie((H+ne[pe]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},gl=p.__private__.buildDocument=function(){je(),de(se),Ee.publish("buildDocument"),vl(),bt(),Ti(),Ia(),u!==null&&br(),Vo(),ac();var H=oe;return Jc(),Qc(),ie("startxref"),ie(""+H),ie("%%EOF"),de(ce[V]),se.join(`
`)},sc=p.__private__.getBlob=function(H){return new Blob([Ne(H)],{type:"application/pdf"})},bl=p.output=p.__private__.output=es(function(H,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",H){case void 0:return gl();case"save":p.save(pe.filename);break;case"arraybuffer":return Ne(gl());case"blob":return sc(gl());case"bloburi":case"bloburl":if(sn.URL!==void 0&&typeof sn.URL.createObjectURL=="function")return sn.URL&&sn.URL.createObjectURL(sc(gl()))||void 0;Da.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",tt=gl();try{He=v3(tt)}catch{He=v3(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+pe.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(gt=pe.pdfObjectUrl,Lt="");var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+gt+'"'+Lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",Nr=sn.open();return Nr!==null&&Nr.document.write(ar),Nr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',fn=sn.open();if(fn!==null){fn.document.write(Mr);var dn=this;fn.document.documentElement.querySelector("#pdfViewer").onload=function(){fn.document.title=pe.filename,fn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(dn.output("bloburl"))}}return fn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',Pa=sn.open();if(Pa!==null&&(Pa.document.write(Pn),Pa.document.title=pe.filename),Pa||typeof safari>"u")return Pa;break;case"datauri":case"dataurl":return sn.document.location.href=this.output("datauristring",pe);default:return null}}),ic=function(H){return Array.isArray(_e)===!0&&_e.indexOf(H)>-1};switch(n){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=ic("px_scaling")==1?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xe=n}var fs=null;ue(),B();var oc=function(H){return u!==null?fs.encryptor(H,0):function(pe){return pe}},yl=p.__private__.getPageInfo=p.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Bt[H].objId,pageNumber:H,pageContext:Bt[H]}},Zr=p.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in Bt)if(Bt[pe].objId===H)break;return yl(pe)},sh=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Bt[V].objId,pageNumber:V,pageContext:Bt[V]}};p.addPage=function(){return Qi.apply(this,arguments),this},p.setPage=function(){return xl.apply(this,arguments),de.call(this,ce[V]),this},p.insertPage=function(H){return this.addPage(),this.movePage(V,H),this},p.movePage=function(H,pe){var He,tt;if(H>pe){He=ce[H],tt=Bt[H];for(var gt=H;gt>pe;gt--)ce[gt]=ce[gt-1],Bt[gt]=Bt[gt-1];ce[pe]=He,Bt[pe]=tt,this.setPage(pe)}else if(H<pe){He=ce[H],tt=Bt[H];for(var Lt=H;Lt<pe;Lt++)ce[Lt]=ce[Lt+1],Bt[Lt]=Bt[Lt+1];ce[pe]=He,Bt[pe]=tt,this.setPage(pe)}return this},p.deletePage=function(){return nh.apply(this,arguments),this},p.__private__.text=p.text=function(H,pe,He,tt,gt){var Lt,ar,Nr,Mr,fn,dn,Pn,Pa,La,ts=(tt=tt||{}).scope||this;if(typeof H=="number"&&typeof pe=="number"&&(typeof He=="string"||Array.isArray(He))){var rs=He;He=pe,pe=H,H=rs}if(arguments[3]instanceof Ot?(T("The transform parameter of text() with a Matrix value"),La=gt):(Nr=arguments[4],Mr=arguments[5],Vn(Pn=arguments[3])==="object"&&Pn!==null||(typeof Nr=="string"&&(Mr=Nr,Nr=null),typeof Pn=="string"&&(Mr=Pn,Pn=null),typeof Pn=="number"&&(Nr=Pn,Pn=null),tt={flags:Pn,angle:Nr,align:Mr})),isNaN(pe)||isNaN(He)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return ts;var Vs="",Nl=!1,Ao=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:fi,wl=ts.internal.scaleFactor;function cp(kn){return kn=kn.split("	").join(Array(tt.TabLen||9).join(" ")),Or(kn,Pn)}function ed(kn){for(var _n,ja=kn.concat(),ns=[],Yo=ja.length;Yo--;)typeof(_n=ja.shift())=="string"?ns.push(_n):Array.isArray(kn)&&(_n.length===1||_n[1]===void 0&&_n[2]===void 0)?ns.push(_n[0]):ns.push([_n[0],_n[1],_n[2]]);return ns}function td(kn,_n){var ja;if(typeof kn=="string")ja=_n(kn)[0];else if(Array.isArray(kn)){for(var ns,Yo,Zd=kn.concat(),eu=[],ad=Zd.length;ad--;)typeof(ns=Zd.shift())=="string"?eu.push(_n(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Yo=_n(ns[0],ns[1],ns[2]),eu.push([Yo[0],Yo[1],Yo[2]]));ja=eu}return ja}var Ff=!1,zd=!0;if(typeof H=="string")Ff=!0;else if(Array.isArray(H)){var Lf=H.concat();ar=[];for(var ch,ks=Lf.length;ks--;)(typeof(ch=Lf.shift())!="string"||Array.isArray(ch)&&typeof ch[0]!="string")&&(zd=!1);Ff=zd}if(Ff===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var Hd=Xe/ts.internal.scaleFactor,dh=Hd*(Ao-1);switch(tt.baseline){case"bottom":He-=dh;break;case"top":He+=Hd-dh;break;case"hanging":He+=Hd-2*dh;break;case"middle":He+=Hd/2-dh}if((dn=tt.maxWidth||0)>0&&(typeof H=="string"?H=ts.splitTextToSize(H,dn):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce(function(kn,_n){return kn.concat(ts.splitTextToSize(_n,dn))},[]))),Lt={text:H,x:pe,y:He,options:tt,mutex:{pdfEscape:Or,activeFontKey:ve,fonts:Qe,activeFontSize:Xe}},Ee.publish("preProcessText",Lt),H=Lt.text,Nr=(tt=Lt.options).angle,!(La instanceof Ot)&&Nr&&typeof Nr=="number"){Nr*=Math.PI/180,tt.rotationDirection===0&&(Nr=-Nr),N===C.ADVANCED&&(Nr=-Nr);var uh=Math.cos(Nr),Bf=Math.sin(Nr);La=new Ot(uh,Bf,-Bf,uh,0,0)}else Nr&&Nr instanceof Ot&&(La=Nr);N!==C.ADVANCED||La||(La=fr),(fn=tt.charSpace||Tf)!==void 0&&(Vs+=E(O(fn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pa=tt.horizontalScale)!==void 0&&(Vs+=E(100*Pa)+` Tz
`),tt.lang;var Ji=-1,vg=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,dp=ts.internal.getCurrentPageInfo().pageContext;switch(vg){case 0:case!1:case"fill":Ji=0;break;case 1:case!0:case"stroke":Ji=1;break;case 2:case"fillThenStroke":Ji=2;break;case 3:case"invisible":Ji=3;break;case 4:case"fillAndAddForClipping":Ji=4;break;case 5:case"strokeAndAddPathForClipping":Ji=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ji=6;break;case 7:case"addToPathForClipping":Ji=7}var Jx=dp.usedRenderingMode!==void 0?dp.usedRenderingMode:-1;Ji!==-1?Vs+=Ji+` Tr
`:Jx!==-1&&(Vs+=`0 Tr
`),Ji!==-1&&(dp.usedRenderingMode=Ji),Mr=tt.align||"left";var Go,qs=Xe*Ao,Wd=ts.internal.pageSize.getWidth(),up=Qe[ve];fn=tt.charSpace||Tf,dn=tt.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var rd=[],Gd=function(kn){return ts.getStringUnitWidth(kn,{font:up,charSpace:fn,fontSize:Xe,doKerning:!1})*Xe/wl};if(Object.prototype.toString.call(H)==="[object Array]"){var Ii;ar=ed(H),Mr!=="left"&&(Go=ar.map(Gd));var ti,Yd=0;if(Mr==="right"){pe-=Go[0],H=[],ks=ar.length;for(var Zi=0;Zi<ks;Zi++)Zi===0?(ti=Do(pe),Ii=dc(He)):(ti=O(Yd-Go[Zi]),Ii=-qs),H.push([ar[Zi],ti,Ii]),Yd=Go[Zi]}else if(Mr==="center"){pe-=Go[0]/2,H=[],ks=ar.length;for(var Sl=0;Sl<ks;Sl++)Sl===0?(ti=Do(pe),Ii=dc(He)):(ti=O((Yd-Go[Sl])/2),Ii=-qs),H.push([ar[Sl],ti,Ii]),Yd=Go[Sl]}else if(Mr==="left"){H=[],ks=ar.length;for(var uc=0;uc<ks;uc++)H.push(ar[uc])}else if(Mr==="justify"&&up.encoding==="Identity-H"){H=[],ks=ar.length,dn=dn!==0?dn:Wd;for(var Cl=0,Wa=0;Wa<ks;Wa++)if(Ii=Wa===0?dc(He):-qs,ti=Wa===0?Do(pe):Cl,Wa<ks-1){var kl=O((dn-Go[Wa])/(ar[Wa].split(" ").length-1)),ms=ar[Wa].split(" ");H.push([ms[0]+" ",ti,Ii]),Cl=0;for(var eo=1;eo<ms.length;eo++){var hh=(Gd(ms[eo-1]+" "+ms[eo])-Gd(ms[eo]))*wl+kl;eo==ms.length-1?H.push([ms[eo],hh,0]):H.push([ms[eo]+" ",hh,0]),Cl-=hh}}else H.push([ar[Wa],ti,Ii]);H.push(["",Cl,0])}else{if(Mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],ks=ar.length,dn=dn!==0?dn:Wd,Wa=0;Wa<ks;Wa++)Ii=Wa===0?dc(He):-qs,ti=Wa===0?Do(pe):0,Wa<ks-1?rd.push(E(O((dn-Go[Wa])/(ar[Wa].split(" ").length-1)))):rd.push(0),H.push([ar[Wa],ti,Ii])}}var hc=typeof tt.R2L=="boolean"?tt.R2L:Re;hc===!0&&(H=td(H,function(kn,_n,ja){return[kn.split("").reverse().join(""),_n,ja]})),Lt={text:H,x:pe,y:He,options:tt,mutex:{pdfEscape:Or,activeFontKey:ve,fonts:Qe,activeFontSize:Xe}},Ee.publish("postProcessText",Lt),H=Lt.text,Nl=Lt.mutex.isHex||!1;var Uf=Qe[ve].encoding;Uf!=="WinAnsiEncoding"&&Uf!=="StandardEncoding"||(H=td(H,function(kn,_n,ja){return[cp(kn),_n,ja]})),ar=ed(H),H=[];for(var Kd,Xd,Qd,fh=0,$f=1,Jd=Array.isArray(ar[0])?$f:fh,nd="",mh=function(kn,_n,ja){var ns="";return ja instanceof Ot?(ja=typeof tt.angle=="number"?er(ja,new Ot(1,0,0,1,kn,_n)):er(new Ot(1,0,0,1,kn,_n),ja),N===C.ADVANCED&&(ja=er(new Ot(1,0,0,-1,0,0),ja)),ns=ja.join(" ")+` Tm
`):ns=E(kn)+" "+E(_n)+` Td
`,ns},Ga=0;Ga<ar.length;Ga++){switch(nd="",Jd){case $f:Qd=(Nl?"<":"(")+ar[Ga][0]+(Nl?">":")"),Kd=parseFloat(ar[Ga][1]),Xd=parseFloat(ar[Ga][2]);break;case fh:Qd=(Nl?"<":"(")+ar[Ga]+(Nl?">":")"),Kd=Do(pe),Xd=dc(He)}rd!==void 0&&rd[Ga]!==void 0&&(nd=rd[Ga]+` Tw
`),Ga===0?H.push(nd+mh(Kd,Xd,La)+Qd):Jd===fh?H.push(nd+Qd):Jd===$f&&H.push(nd+mh(Kd,Xd,La)+Qd)}H=Jd===fh?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var To=`BT
/`;return To+=ve+" "+Xe+` Tf
`,To+=E(Xe*Ao)+` TL
`,To+=oh+`
`,To+=Vs,To+=H,ie(To+="ET"),m[ve]=!0,ts};var _f=p.__private__.clip=p.clip=function(H){return ie(H==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return _f("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ie("n"),this};var rt=p.__private__.isValidStyle=function(H){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(pe=!0),pe};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(H){return rt(H)&&(d=H),this};var lr=p.__private__.getStyle=p.getStyle=function(H){var pe=d;switch(H){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=H}return pe},Zt=p.close=function(){return ie("h"),this};p.stroke=function(){return ie("S"),this},p.fill=function(H){return _r("f",H),this},p.fillEvenOdd=function(H){return _r("f*",H),this},p.fillStroke=function(H){return _r("B",H),this},p.fillStrokeEvenOdd=function(H){return _r("B*",H),this};var _r=function(H,pe){Vn(pe)==="object"?qo(pe,H):ie(H)},Cr=function(H){H===null||N===C.ADVANCED&&H===void 0||(H=lr(H),ie(H))};function _a(H,pe,He,tt,gt){var Lt=new tv(pe||this.boundingBox,He||this.xStep,tt||this.yStep,this.gState,gt||this.matrix);Lt.stream=this.stream;var ar=H+"$$"+this.cloneIndex+++"$$";return yr(ar,Lt),Lt}var qo=function(H,pe){var He=ut[H.key],tt=ze[He];if(tt instanceof Vp)ie("q"),ie(Ef(pe)),tt.gState&&p.setGState(tt.gState),ie(H.matrix.toString()+" cm"),ie("/"+He+" sh"),ie("Q");else if(tt instanceof tv){var gt=new Ot(1,0,0,-1,0,qd());H.matrix&&(gt=gt.multiply(H.matrix||fr),He=_a.call(tt,H.key,H.boundingBox,H.xStep,H.yStep,gt).id),ie("q"),ie("/Pattern cs"),ie("/"+He+" scn"),tt.gState&&p.setGState(tt.gState),ie(pe),ie("Q")}},Ef=function(H){switch(H){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},lc=p.moveTo=function(H,pe){return ie(E(O(H))+" "+E(z(pe))+" m"),this},zo=p.lineTo=function(H,pe){return ie(E(O(H))+" "+E(z(pe))+" l"),this},Ho=p.curveTo=function(H,pe,He,tt,gt,Lt){return ie([E(O(H)),E(z(pe)),E(O(He)),E(z(tt)),E(O(gt)),E(z(Lt)),"c"].join(" ")),this};p.__private__.line=p.line=function(H,pe,He,tt,gt){if(isNaN(H)||isNaN(pe)||isNaN(He)||isNaN(tt)||!rt(gt))throw new Error("Invalid arguments passed to jsPDF.line");return N===C.COMPAT?this.lines([[He-H,tt-pe]],H,pe,[1,1],gt||"S"):this.lines([[He-H,tt-pe]],H,pe,[1,1]).stroke()},p.__private__.lines=p.lines=function(H,pe,He,tt,gt,Lt){var ar,Nr,Mr,fn,dn,Pn,Pa,La,ts,rs,Vs,Nl;if(typeof H=="number"&&(Nl=He,He=pe,pe=H,H=Nl),tt=tt||[1,1],Lt=Lt||!1,isNaN(pe)||isNaN(He)||!Array.isArray(H)||!Array.isArray(tt)||!rt(gt)||typeof Lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(lc(pe,He),ar=tt[0],Nr=tt[1],fn=H.length,rs=pe,Vs=He,Mr=0;Mr<fn;Mr++)(dn=H[Mr]).length===2?(rs=dn[0]*ar+rs,Vs=dn[1]*Nr+Vs,zo(rs,Vs)):(Pn=dn[0]*ar+rs,Pa=dn[1]*Nr+Vs,La=dn[2]*ar+rs,ts=dn[3]*Nr+Vs,rs=dn[4]*ar+rs,Vs=dn[5]*Nr+Vs,Ho(Pn,Pa,La,ts,rs,Vs));return Lt&&Zt(),Cr(gt),this},p.path=function(H){for(var pe=0;pe<H.length;pe++){var He=H[pe],tt=He.c;switch(He.op){case"m":lc(tt[0],tt[1]);break;case"l":zo(tt[0],tt[1]);break;case"c":Ho.apply(this,tt);break;case"h":Zt()}}return this},p.__private__.rect=p.rect=function(H,pe,He,tt,gt){if(isNaN(H)||isNaN(pe)||isNaN(He)||isNaN(tt)||!rt(gt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===C.COMPAT&&(tt=-tt),ie([E(O(H)),E(z(pe)),E(O(He)),E(O(tt)),"re"].join(" ")),Cr(gt),this},p.__private__.triangle=p.triangle=function(H,pe,He,tt,gt,Lt,ar){if(isNaN(H)||isNaN(pe)||isNaN(He)||isNaN(tt)||isNaN(gt)||isNaN(Lt)||!rt(ar))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-H,tt-pe],[gt-He,Lt-tt],[H-gt,pe-Lt]],H,pe,[1,1],ar,!0),this},p.__private__.roundedRect=p.roundedRect=function(H,pe,He,tt,gt,Lt,ar){if(isNaN(H)||isNaN(pe)||isNaN(He)||isNaN(tt)||isNaN(gt)||isNaN(Lt)||!rt(ar))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nr=4/3*(Math.SQRT2-1);return gt=Math.min(gt,.5*He),Lt=Math.min(Lt,.5*tt),this.lines([[He-2*gt,0],[gt*Nr,0,gt,Lt-Lt*Nr,gt,Lt],[0,tt-2*Lt],[0,Lt*Nr,-gt*Nr,Lt,-gt,Lt],[2*gt-He,0],[-gt*Nr,0,-gt,-Lt*Nr,-gt,-Lt],[0,2*Lt-tt],[0,-Lt*Nr,gt*Nr,-Lt,gt,-Lt]],H+gt,pe,[1,1],ar,!0),this},p.__private__.ellipse=p.ellipse=function(H,pe,He,tt,gt){if(isNaN(H)||isNaN(pe)||isNaN(He)||isNaN(tt)||!rt(gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Lt=4/3*(Math.SQRT2-1)*He,ar=4/3*(Math.SQRT2-1)*tt;return lc(H+He,pe),Ho(H+He,pe-ar,H+Lt,pe-tt,H,pe-tt),Ho(H-Lt,pe-tt,H-He,pe-ar,H-He,pe),Ho(H-He,pe+ar,H-Lt,pe+tt,H,pe+tt),Ho(H+Lt,pe+tt,H+He,pe+ar,H+He,pe),Cr(gt),this},p.__private__.circle=p.circle=function(H,pe,He,tt){if(isNaN(H)||isNaN(pe)||isNaN(He)||!rt(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,pe,He,He,tt)},p.setFont=function(H,pe,He){return He&&(pe=D(pe,He)),ve=ah(H,pe,{disableWarning:!1}),this};var Cs=p.__private__.getFont=p.getFont=function(){return Qe[ah.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var H,pe,He={};for(H in Ye)if(Ye.hasOwnProperty(H))for(pe in He[H]=[],Ye[H])Ye[H].hasOwnProperty(pe)&&He[H].push(pe);return He},p.addFont=function(H,pe,He,tt,gt){var Lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Lt.indexOf(arguments[3])!==-1?gt=arguments[3]:arguments[3]&&Lt.indexOf(arguments[3])==-1&&(He=D(He,tt)),gt=gt||"Identity-H",ka.call(this,H,pe,He,gt)};var fi,cc=e.lineWidth||.200025,Wo=p.__private__.getLineWidth=p.getLineWidth=function(){return cc},Df=p.__private__.setLineWidth=p.setLineWidth=function(H){return cc=H,ie(E(O(H))+" w"),this};p.__private__.setLineDash=rn.API.setLineDash=rn.API.setLineDashPattern=function(H,pe){if(H=H||[],pe=pe||0,isNaN(pe)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map(function(He){return E(O(He))}).join(" "),pe=E(O(pe)),ie("["+H+"] "+pe+" d"),this};var Zc=p.__private__.getLineHeight=p.getLineHeight=function(){return Xe*fi};p.__private__.getLineHeight=p.getLineHeight=function(){return Xe*fi};var Af=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(fi=H),this},$d=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return fi};Af(e.lineHeight);var Do=p.__private__.getHorizontalCoordinate=function(H){return O(H)},dc=p.__private__.getVerticalCoordinate=function(H){return N===C.ADVANCED?H:Bt[V].mediaBox.topRightY-Bt[V].mediaBox.bottomLeftY-O(H)},fg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(H){return E(Do(H))},Vd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(H){return E(dc(H))},jl=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Me(jl)},p.__private__.setStrokeColor=p.setDrawColor=function(H,pe,He,tt){return jl=$e({ch1:H,ch2:pe,ch3:He,ch4:tt,pdfColorType:"draw",precision:2}),ie(jl),this};var ih=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Me(ih)},p.__private__.setFillColor=p.setFillColor=function(H,pe,He,tt){return ih=$e({ch1:H,ch2:pe,ch3:He,ch4:tt,pdfColorType:"fill",precision:2}),ie(ih),this};var oh=e.textColor||"0 g",mg=p.__private__.getTextColor=p.getTextColor=function(){return Me(oh)};p.__private__.setTextColor=p.setTextColor=function(H,pe,He,tt){return oh=$e({ch1:H,ch2:pe,ch3:He,ch4:tt,pdfColorType:"text",precision:3}),this};var Tf=e.charSpace,pg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tf||0)};p.__private__.setCharSpace=p.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tf=H,this};var sp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(H){var pe=p.CapJoinStyles[H];if(pe===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=pe,ie(pe+" J"),this};var If=0;p.__private__.setLineJoin=p.setLineJoin=function(H){var pe=p.CapJoinStyles[H];if(pe===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return If=pe,ie(pe+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(E(O(H))+" M"),this},p.GState=_w,p.setGState=function(H){(H=typeof H=="string"?Te[We[H]]:Qx(null,H)).equals(Ge)||(ie("/"+H.id+" gs"),Ge=H)};var Qx=function(H,pe){if(!H||!We[H]){var He=!1;for(var tt in Te)if(Te.hasOwnProperty(tt)&&Te[tt].equals(pe)){He=!0;break}if(He)pe=Te[tt];else{var gt="GS"+(Object.keys(Te).length+1).toString(10);Te[gt]=pe,pe.id=gt}return H&&(We[H]=pe.id),Ee.publish("addGState",pe),pe}};p.addGState=function(H,pe){return Qx(H,pe),this},p.saveGraphicsState=function(){return ie("q"),Le.push({key:ve,size:Xe,color:oh}),this},p.restoreGraphicsState=function(){ie("Q");var H=Le.pop();return ve=H.key,Xe=H.size,oh=H.color,Ge=null,this},p.setCurrentTransformationMatrix=function(H){return ie(H.toString()+" cm"),this},p.comment=function(H){return ie("#"+H),this};var Pf=function(H,pe){var He=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Lt){isNaN(Lt)||(He=parseFloat(Lt))}});var tt=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Lt){isNaN(Lt)||(tt=parseFloat(Lt))}});var gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return gt},set:function(Lt){gt=Lt.toString()}}),this},ip=function(H,pe,He,tt){Pf.call(this,H,pe),this.type="rect";var gt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return gt},set:function(ar){isNaN(ar)||(gt=parseFloat(ar))}});var Lt=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Lt},set:function(ar){isNaN(ar)||(Lt=parseFloat(ar))}}),this},op=function(){this.page=It,this.currentPage=V,this.pages=ce.slice(0),this.pagesContext=Bt.slice(0),this.x=Ie,this.y=Ze,this.matrix=Ft,this.width=lh(V),this.height=qd(V),this.outputDestination=ae,this.id="",this.objectNumber=-1};op.prototype.restore=function(){It=this.page,V=this.currentPage,Bt=this.pagesContext,ce=this.pages,Ie=this.x,Ze=this.y,Ft=this.matrix,Rf(V,this.width),lp(V,this.height),ae=this.outputDestination};var Of=function(H,pe,He,tt,gt){rr.push(new op),It=V=0,ce=[],Ie=H,Ze=pe,Ft=gt,$s([He,tt])},xg=function(H){if(wt[H])rr.pop().restore();else{var pe=new op,He="Xo"+(Object.keys(st).length+1).toString(10);pe.id=He,wt[H]=He,st[He]=pe,Ee.publish("addFormObject",pe),rr.pop().restore()}};for(var Mf in p.beginFormObject=function(H,pe,He,tt,gt){return Of(H,pe,He,tt,gt),this},p.endFormObject=function(H){return xg(H),this},p.doFormObject=function(H,pe){var He=st[wt[H]];return ie("q"),ie(pe.toString()+" cm"),ie("/"+He.id+" Do"),ie("Q"),this},p.getFormObject=function(H){var pe=st[wt[H]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},p.save=function(H,pe){return H=H||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(Bp(sc(gl()),H),typeof Bp.unload=="function"&&sn.setTimeout&&setTimeout(Bp.unload,911),this):new Promise(function(He,tt){try{var gt=Bp(sc(gl()),H);typeof Bp.unload=="function"&&sn.setTimeout&&setTimeout(Bp.unload,911),He(gt)}catch(Lt){tt(Lt.message)}})},rn.API)rn.API.hasOwnProperty(Mf)&&(Mf==="events"&&rn.API.events.length?function(H,pe){var He,tt,gt;for(gt=pe.length-1;gt!==-1;gt--)He=pe[gt][0],tt=pe[gt][1],H.subscribe.apply(H,[He].concat(typeof tt=="function"?[tt]:tt))}(Ee,rn.API.events):p[Mf]=rn.API[Mf]);var lh=p.getPageWidth=function(H){return(Bt[H=H||V].mediaBox.topRightX-Bt[H].mediaBox.bottomLeftX)/xe},Rf=p.setPageWidth=function(H,pe){Bt[H].mediaBox.topRightX=pe*xe+Bt[H].mediaBox.bottomLeftX},qd=p.getPageHeight=function(H){return(Bt[H=H||V].mediaBox.topRightY-Bt[H].mediaBox.bottomLeftY)/xe},lp=p.setPageHeight=function(H,pe){Bt[H].mediaBox.topRightY=pe*xe+Bt[H].mediaBox.bottomLeftY};return p.internal={pdfEscape:Or,getStyle:lr,getFont:Cs,getFontSize:xt,getCharSpace:pg,getTextColor:mg,getLineHeight:Zc,getLineHeightFactor:$d,getLineWidth:Wo,write:be,getHorizontalCoordinate:Do,getVerticalCoordinate:dc,getCoordinateString:fg,getVerticalCoordinateString:Vd,collections:{},newObject:Yr,newAdditionalObject:Be,newObjectDeferred:ur,newObjectDeferredBegin:me,getFilters:pt,putStream:jt,events:Ee,scaleFactor:xe,pageSize:{getWidth:function(){return lh(V)},setWidth:function(H){Rf(V,H)},getHeight:function(){return qd(V)},setHeight:function(H){lp(V,H)}},encryptionOptions:u,encryption:fs,getEncryptor:oc,output:bl,getNumberOfPages:kf,pages:ce,out:ie,f2:L,f3:P,getPageInfo:yl,getPageInfoByObjId:Zr,getCurrentPageInfo:sh,getPDFVersion:g,Point:Pf,Rectangle:ip,Matrix:Ot,hasHotfix:ic},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return lh(V)},set:function(H){Rf(V,H)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return qd(V)},set:function(H){lp(V,H)},enumerable:!0,configurable:!0}),pl.call(p,Fe),ve="F1",Qi(s,r),Ee.publish("initialized"),p}Y0.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Y0.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Y0.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Y0.prototype.processOwnerPassword=function(e,t){return b3(g3(t).substr(0,5),e)},Y0.prototype.encryptor=function(e,t){var r=g3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return b3(r,n)}},_w.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Vn(e)!==Vn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},rn.API={events:[]},rn.version="3.0.1";var bs=rn.API,EI=1,Xx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},U0=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xn=function(e){return e.toFixed(2)},jm=function(e){return e.toFixed(5)};bs.__acroform__={};var ml=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},I7=function(e){return e*EI},gu=function(e){var t=new GK,r=Ar.internal.getHeight(e)||0,n=Ar.internal.getWidth(e)||0;return t.BBox=[0,0,Number(xn(n)),Number(xn(r))],t},o8e=bs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},l8e=bs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},c8e=bs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ps=bs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return c8e(e,t-1)},Os=bs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return o8e(e,t-1)},Ms=bs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return l8e(e,t-1)},d8e=bs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(xn(c.lowerLeft_X)),Number(xn(c.lowerLeft_Y)),Number(xn(c.upperRight_X)),Number(xn(c.upperRight_Y))]},u8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=y3(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+xn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=gu(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},y3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var i=r,o=Ar.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ar.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,O,Q){if(P+1<s.length){var z=O+" "+s[P+1][0];return vN(z,e,Q).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=vN("3",e,i).height,m=e.multiline?o-i:(o-h)/2,p=m+=2,v=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+vN(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",C=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var k=!1;if(s[N].length!==1&&b!==s[N].length-1){if((h+2)*(C+2)+2>o)continue e;y+=s[N][b],k=!0,g=N,N--}else{y=(y+=s[N][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(N),D=c(S,y,i),E=N>=s.length-1;if(D&&!E){y+=" ",b=0;continue}if(D||E){if(E)g=S;else if(e.multiline&&(h+2)*(C+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(C+2)+2>o)continue e;g=S}}for(var T="",A=v;A<=g;A++){var L=s[A];if(e.multiline){if(A===g){T+=L[b]+" ",b=(b+1)%L.length;continue}if(A===v){T+=L[L.length-1]+" ";continue}}T+=L[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=vN(T,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=xn(d)+" "+xn(p)+` Td
`,t+="("+Xx(T)+`) Tj
`,t+=-xn(d)+` 0 Td
`,p=-(i+2),u=0,v=k?g:g+1,C++,y=""}break}return n.text=t,n.fontSize=i,n},vN=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},h8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},f8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},m8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Vn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},p8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Bd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(h8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new YK,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&f8e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=d8e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ar.createDefaultAppearanceStream(l),Vn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=u8e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&m8e(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},WK=bs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Vn(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+Xx(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d5=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xx(n(e))+")"},Pu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pu.prototype.toString=function(){return this.objId+" 0 R"},Pu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Pu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:WK(s,this.objId,this.scope)}):s instanceof Pu?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var GK=function(){Pu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ml(GK,Pu);var YK=function(){Pu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xx(r(e))+")"}},set:function(r){e=r}})};ml(YK,Pu);var Bd=function e(){Pu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ps(t,3)},set:function(y){y?this.F=Os(t,3):this.F=Ms(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ew)return;i="FieldObject"+e.FieldNum++}var y=function(C){return C};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Xx(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/EI:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Ew||this instanceof xx))return d5(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ji?m:d5(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof ji?y:y.substr(0,1)==="("?U0(y.substr(1,y.length-2)):U0(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ji?U0(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof ji?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ji?p:d5(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof ji?y:y.substr(0,1)==="("?U0(y.substr(1,y.length-2)):U0(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ji?U0(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof ji?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,1)},set:function(y){y?this.Ff=Os(this.Ff,1):this.Ff=Ms(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,2)},set:function(y){y?this.Ff=Os(this.Ff,2):this.Ff=Ms(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,3)},set:function(y){y?this.Ff=Os(this.Ff,3):this.Ff=Ms(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};ml(Bd,Pu);var bv=function(){Bd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return WK(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,18)},set:function(r){r?this.Ff=Os(this.Ff,18):this.Ff=Ms(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Os(this.Ff,19):this.Ff=Ms(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,20)},set:function(r){r?(this.Ff=Os(this.Ff,20),t.sort()):this.Ff=Ms(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,22)},set:function(r){r?this.Ff=Os(this.Ff,22):this.Ff=Ms(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,23)},set:function(r){r?this.Ff=Os(this.Ff,23):this.Ff=Ms(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,27)},set:function(r){r?this.Ff=Os(this.Ff,27):this.Ff=Ms(this.Ff,27)}}),this.hasAppearanceStream=!1};ml(bv,Bd);var yv=function(){bv.call(this),this.fontName="helvetica",this.combo=!1};ml(yv,bv);var jv=function(){yv.call(this),this.combo=!0};ml(jv,yv);var LN=function(){jv.call(this),this.edit=!0};ml(LN,jv);var ji=function(){Bd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,15)},set:function(r){r?this.Ff=Os(this.Ff,15):this.Ff=Ms(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,16)},set:function(r){r?this.Ff=Os(this.Ff,16):this.Ff=Ms(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,17)},set:function(r){r?this.Ff=Os(this.Ff,17):this.Ff=Ms(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,26)},set:function(r){r?this.Ff=Os(this.Ff,26):this.Ff=Ms(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+Xx(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Vn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ml(ji,Bd);var BN=function(){ji.call(this),this.pushButton=!0};ml(BN,ji);var Nv=function(){ji.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ml(Nv,ji);var Ew=function(){var e,t;Bd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Xx(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Vn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ml(Ew,Bd),Nv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Nv.prototype.createOption=function(e){var t=new Ew;return t.Parent=this,t.optionName=e,this.Kids.push(t),x8e.call(this.scope,t),t};var UN=function(){ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};ml(UN,ji);var xx=function(){Bd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,13)},set:function(t){t?this.Ff=Os(this.Ff,13):this.Ff=Ms(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,21)},set:function(t){t?this.Ff=Os(this.Ff,21):this.Ff=Ms(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,23)},set:function(t){t?this.Ff=Os(this.Ff,23):this.Ff=Ms(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,24)},set:function(t){t?this.Ff=Os(this.Ff,24):this.Ff=Ms(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,25)},set:function(t){t?this.Ff=Os(this.Ff,25):this.Ff=Ms(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,26)},set:function(t){t?this.Ff=Os(this.Ff,26):this.Ff=Ms(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ml(xx,Bd);var $N=function(){xx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ps(this.Ff,14)},set:function(e){e?this.Ff=Os(this.Ff,14):this.Ff=Ms(this.Ff,14)}}),this.password=!0};ml($N,xx);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=y3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+xn(Ar.internal.getWidth(e))+" "+xn(Ar.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+xn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=gu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Ar.internal.getHeight(e),o=Ar.internal.getWidth(e),l=y3(e,e.caption);return s.push("1 g"),s.push("0 0 "+xn(o)+" "+xn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+xn(o-1)+" "+xn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+xn(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+xn(Ar.internal.getWidth(e))+" "+xn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Circle.YesNormal,t.D[e]=Ar.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=gu(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Ar.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ar.internal.Bezier_C).toFixed(5)),o=Number((n*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Ar.internal.getWidth(e)/2)+" "+jm(Ar.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Cross.YesNormal,t.D[e]=Ar.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=gu(e);t.scope=e.scope;var r=[],n=Ar.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+xn(Ar.internal.getWidth(e)-2)+" "+xn(Ar.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(xn(n.x1.x)+" "+xn(n.x1.y)+" m"),r.push(xn(n.x2.x)+" "+xn(n.x2.y)+" l"),r.push(xn(n.x4.x)+" "+xn(n.x4.y)+" m"),r.push(xn(n.x3.x)+" "+xn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=Ar.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+xn(Ar.internal.getWidth(e))+" "+xn(Ar.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+xn(Ar.internal.getWidth(e)-2)+" "+xn(Ar.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(xn(r.x1.x)+" "+xn(r.x1.y)+" m"),n.push(xn(r.x2.x)+" "+xn(r.x2.y)+" l"),n.push(xn(r.x4.x)+" "+xn(r.x4.y)+" m"),n.push(xn(r.x3.x)+" "+xn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=gu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+xn(Ar.internal.getWidth(e))+" "+xn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ar.internal.getWidth(e),r=Ar.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ar.internal.getWidth=function(e){var t=0;return Vn(e)==="object"&&(t=I7(e.Rect[2])),t},Ar.internal.getHeight=function(e){var t=0;return Vn(e)==="object"&&(t=I7(e.Rect[3])),t};var x8e=bs.addField=function(e){if(p8e(this,e),!(e instanceof Bd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bs.AcroFormChoiceField=bv,bs.AcroFormListBox=yv,bs.AcroFormComboBox=jv,bs.AcroFormEditBox=LN,bs.AcroFormButton=ji,bs.AcroFormPushButton=BN,bs.AcroFormRadioButton=Nv,bs.AcroFormCheckBox=UN,bs.AcroFormTextField=xx,bs.AcroFormPasswordField=$N,bs.AcroFormAppearance=Ar,bs.AcroForm={ChoiceField:bv,ListBox:yv,ComboBox:jv,EditBox:LN,Button:ji,PushButton:BN,RadioButton:Nv,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Ar},rn.AcroForm={ChoiceField:bv,ListBox:yv,ComboBox:jv,EditBox:LN,Button:ji,PushButton:BN,RadioButton:Nv,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Ar};rn.AcroForm;function KK(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,O){var Q,z,re,U,X,B=t;if((O=O||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(D(P))for(X in r)for(re=r[X],Q=0;Q<re.length;Q+=1){for(U=!0,z=0;z<re[Q].length;z+=1)if(re[Q][z]!==void 0&&re[Q][z]!==P[z]){U=!1;break}if(U===!0){B=X;break}}else for(X in r)for(re=r[X],Q=0;Q<re.length;Q+=1){for(U=!0,z=0;z<re[Q].length;z+=1)if(re[Q][z]!==void 0&&re[Q][z]!==P.charCodeAt(z)){U=!1;break}if(U===!0){B=X;break}}return B===t&&O!==t&&(B=O),B},s=function P(O){for(var Q=this.internal.write,z=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:O.width}),U.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var X="",B=0,Y=O.transparency.length;B<Y;B++)X+=O.transparency[B]+" "+O.transparency[B]+" ";U.push({key:"Mask",value:"["+X+"]"})}O.sMask!==void 0&&U.push({key:"SMask",value:O.objectId+1+" 0 R"});var K=O.filter!==void 0?["/"+O.filter]:void 0;if(z({data:O.data,additionalKeyValues:U,alreadyAppliedFilters:K,objectId:O.objectId}),Q("endobj"),"sMask"in O&&O.sMask!==void 0){var ue="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,M={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:ue,data:O.sMask};"filter"in O&&(M.filter=O.filter),P.call(this,M)}if(O.colorSpace===b.INDEXED){var V=this.internal.newObject();z({data:T(new Uint8Array(O.palette)),objectId:V}),Q("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var O in P)s.call(this,P[O])},o=function(){var P,O=this.internal.collections.addImage_images,Q=this.internal.write;for(var z in O)Q("/I"+(P=O[z]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},h=function(P){return Vn(P)==="object"&&P.nodeType===1},m=function(P,O){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var Q=""+P.getAttribute("src");if(Q.indexOf("data:image/")===0)return Kb(unescape(Q).split("base64,").pop());var z=e.loadFile(Q,!0);if(z!==void 0)return z}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var re;switch(O){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return Kb(P.toDataURL(re,1).split("base64,").pop())}},p=function(P){var O=this.internal.collections.addImage_images;if(O){for(var Q in O)if(P===O[Q].alias)return O[Q]}},v=function(P,O,Q){return P||O||(P=-96,O=-96),P<0&&(P=-1*Q.width*72/P/this.internal.scaleFactor),O<0&&(O=-1*Q.height*72/O/this.internal.scaleFactor),P===0&&(P=O*Q.width/Q.height),O===0&&(O=P*Q.height/Q.width),[P,O]},g=function(P,O,Q,z,re,U){var X=v.call(this,Q,z,re),B=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,K=c.call(this);if(Q=X[0],z=X[1],K[re.index]=re,U){U*=Math.PI/180;var ue=Math.cos(U),M=Math.sin(U),V=function(ee){return ee.toFixed(4)},W=[V(ue),V(M),V(-1*M),V(ue),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,B(P),Y(O+z),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([B(Q),"0","0",B(z),"0","0","cm"].join(" "))):this.internal.write([B(Q),"0","0",B(z),B(P),Y(O+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(P){var O,Q,z=0;if(typeof P=="string")for(Q=P.length,O=0;O<Q;O++)z=(z<<5)-z+P.charCodeAt(O),z|=0;else if(D(P))for(Q=P.byteLength/2,O=0;O<Q;O++)z=(z<<5)-z+P[O],z|=0;return z},N=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var O=!0;return P.length===0&&(O=!1),P.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(O=!1),O},k=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var O=P.indexOf(",");return O<0?null:P.substring(0,O).trim().endsWith("base64")?P.substring(O+1):null},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return S()&&P instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(P){return S()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var O=P.length,Q=new Uint8Array(O),z=0;z<O;z++)Q[z]=P.charCodeAt(z);return Q},T=e.__addimage__.arrayBufferToBinaryString=function(P){for(var O="",Q=D(P)?P:new Uint8Array(P),z=0;z<Q.length;z+=8192)O+=String.fromCharCode.apply(null,Q.subarray(z,z+8192));return O};e.addImage=function(){var P,O,Q,z,re,U,X,B,Y;if(typeof arguments[1]=="number"?(O=t,Q=arguments[1],z=arguments[2],re=arguments[3],U=arguments[4],X=arguments[5],B=arguments[6],Y=arguments[7]):(O=arguments[1],Q=arguments[2],z=arguments[3],re=arguments[4],U=arguments[5],X=arguments[6],B=arguments[7],Y=arguments[8]),Vn(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var K=P;P=K.imageData,O=K.format||O||t,Q=K.x||Q||0,z=K.y||z||0,re=K.w||K.width||re,U=K.h||K.height||U,X=K.alias||X,B=K.compression||B,Y=K.rotation||K.angle||Y}var ue=this.internal.getFilters();if(B===void 0&&ue.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(Q)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=A.call(this,P,O,X,B);return g.call(this,Q,z,re,U,M,Y),this};var A=function(P,O,Q,z){var re,U,X;if(typeof P=="string"&&n(P)===t){P=unescape(P);var B=L(P,!1);(B!==""||(B=e.loadFile(P,!0))!==void 0)&&(P=B)}if(h(P)&&(P=m(P,O)),O=n(P,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((X=Q)==null||X.length===0)&&(Q=function(Y){return typeof Y=="string"||D(Y)?C(Y):D(Y.data)?C(Y.data):null}(P)),(re=p.call(this,Q))||(S()&&(P instanceof Uint8Array||O==="RGBA"||(U=P,P=E(P))),re=this["process"+O.toUpperCase()](P,d.call(this),Q,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:y.NONE}(z),U)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},L=e.__addimage__.convertBase64ToBinaryString=function(P,O){O=typeof O!="boolean"||O;var Q,z="";if(typeof P=="string"){var re;Q=(re=k(P))!==null&&re!==void 0?re:P;try{z=Kb(Q)}catch(U){if(O)throw N(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(P){var O,Q,z="";if(h(P)&&(P=m(P)),typeof P=="string"&&n(P)===t&&((z=L(P,!1))===""&&(z=e.loadFile(P)||""),P=z),Q=n(P),!u(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!S()||P instanceof Uint8Array||(P=E(P)),!(O=this["process"+Q.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=Q,O}})(rn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};rn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),C=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(C))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+s),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(rn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,C="",N=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(N++,typeof(y=y[g.charCodeAt(b)])=="number"&&(C+=String.fromCharCode(y),y=r,N=0),b===g.length-1&&(y=r,C+=g.charAt(b-(N-1)),b-=N-1,N=0)):(y=r,C+=g.charAt(b-N),b-=N,N=0);return C};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:u(g)&&o(b)&&!l(b)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},p=function(g){var b=0,y=0,C=0,N="",k="",S="",D=(g=g||"").split("\\s+"),E=[];for(b=0;b<D.length;b+=1){for(E.push(""),y=0;y<D[b].length;y+=1)N=D[b][y],k=D[b][y-1],S=D[b][y+1],o(N)?(C=m(N,k,S),E[b]+=C!==-1?String.fromCharCode(t[N.charCodeAt(0)][C]):N):E[b]+=N;E[b]=h(E[b])}return E.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var C=0;for(y=[],C=0;C<b.length;C+=1)Array.isArray(b[C])?y.push([p(b[C][0]),b[C][1],b[C][2]]):y.push([p(b[C])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(rn.API),rn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(rn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,p=0,v=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,k){return N.concat(b.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var C=0;C<c.length;C++)p<(g=this.getStringUnitWidth(c[C],{font:h})*u)&&(p=g);return p!==0&&(v=c.length),{w:p/=m,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,v,g,b,y=[],C=[],N=[],k={},S={},D=[],E=[],T=(m=m||{}).autoSize||!1,A=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,P=m.margins||Object.assign({width:this.getPageWidth()},t),O=typeof m.padding=="number"?m.padding:3,Q=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=z,this.setFontSize(L),h==null)C=y=Object.keys(u[0]),N=y.map(function(){return"left"});else if(Array.isArray(h)&&Vn(h[0])==="object")for(y=h.map(function(K){return K.name}),C=h.map(function(K){return K.prompt||K.name||""}),N=h.map(function(K){return K.align||"left"}),p=0;p<h.length;p+=1)S[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(C=y=h,N=y.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=u.map(function(K){return K[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(C[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[b],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)D.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,D)+O+O,D=[]}if(A){var re={};for(p=0;p<y.length;p+=1)re[y[p]]={},re[y[p]].text=C[p],re[y[p]].align=N[p];var U=l.call(this,re,S);E=y.map(function(K){return new i(c,d,S[K],U,re[K].text,void 0,re[K].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var X=h.reduce(function(K,ue){return K[ue.name]=ue.align,K},{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var B=l.call(this,u[p],S);for(g=0;g<y.length;g+=1){var Y=u[p][y[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:g,data:Y},this),o.call(this,new i(c,d,S[y[g]],B,Y,p+2,X[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+u+u},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(rn.API);var XK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},QK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j3=KK(QK),JK=[100,200,300,400,500,600,700,800,900],v8e=KK(JK);function N3(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return XK[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof j3[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function P7(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var g8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},O7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M7(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function b8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},g8e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=N3(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+M7(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=j3[c],h=u<=j3.normal?-1:1,m=P7(d,QK,u,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=XK[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=v8e[c],h=P7(d,JK,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M7(i)+"'.");return o}function R7(e){return e.trimLeft()}function y8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function j8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gN,F7,L7,u5=["times"];(function(e){var t,r,n,s,i,o,l,c,d,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=M;Object.defineProperty(this,"pdf",{get:function(){return V}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(de){W=!!de}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(de){ee=!!de}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(de){isNaN(de)||(te=de)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(de){isNaN(de)||(ne=de)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(de){var ie;typeof de=="number"?ie=[de,de,de,de]:((ie=new Array(4))[0]=de[0],ie[1]=de.length>=2?de[1]:ie[0],ie[2]=de.length>=3?de[2]:ie[0],ie[3]=de.length>=4?de[3]:ie[1]),d.margin=ie}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(de){se=de}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(de){oe=de}});var G=[];Object.defineProperty(this,"pageBreaks",{get:function(){return G},set:function(de){G=de}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(de){de instanceof u&&(d=de)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(de){d.path=de}});var ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return ce},set:function(de){ce=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var ie;ie=m(de),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var ie=m(de);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var Z=null;function ae(de,ie){if(Z===null){var be=function(Ne){var Fe=[];return Object.keys(Ne).forEach(function(Xe){Ne[Xe].forEach(function(ct){var xt=null;switch(ct){case"bold":xt={family:Xe,weight:"bold"};break;case"italic":xt={family:Xe,style:"italic"};break;case"bolditalic":xt={family:Xe,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:Xe}}xt!==null&&(xt.ref={name:Xe,style:ct},Fe.push(xt))})}),Fe}(de.getFontList());Z=function(Ne){for(var Fe={},Xe=0;Xe<Ne.length;++Xe){var ct=N3(Ne[Xe]),xt=ct.family,Re=ct.stretch,ht=ct.style,At=ct.weight;Fe[xt]=Fe[xt]||{},Fe[xt][Re]=Fe[xt][Re]||{},Fe[xt][Re][ht]=Fe[xt][Re][ht]||{},Fe[xt][Re][ht][At]=ct}return Fe}(be.concat(ie))}return Z}var je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(de){Z=null,je=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var ie;if(this.ctx.font=de,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var be=ie[1];ie[2];var Ne=ie[3],Fe=ie[4];ie[5];var Xe=ie[6],ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(ct==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var xt=function(ge){var ve,xe,Ie=[],Ze=ge.trim();if(Ze==="")return u5;if(Ze in O7)return[O7[Ze]];for(;Ze!=="";){switch(xe=null,ve=(Ze=R7(Ze)).charAt(0)){case'"':case"'":xe=y8e(Ze.substring(1),ve);break;default:xe=j8e(Ze)}if(xe===null||(Ie.push(xe[0]),(Ze=R7(xe[1]))!==""&&Ze.charAt(0)!==","))return u5;Ze=Ze.replace(/^,/,"")}return Ie}(Xe);if(this.fontFaces){var Re=b8e(ae(this.pdf,this.fontFaces),xt.map(function(ge){return{family:ge,stretch:"normal",weight:Ne,style:be}}));this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var ht="";(Ne==="bold"||parseInt(Ne,10)>=700||be==="bold")&&(ht="bold"),be==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var At="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Wt=0;Wt<xt.length;Wt++){if(this.pdf.internal.getFont(xt[Wt],ht,{noFallback:!0,disableWarning:!0})!==void 0){At=xt[Wt];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(xt[Wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=xt[Wt],ht="bold";else if(this.pdf.internal.getFont(xt[Wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=xt[Wt],ht="normal";break}}if(At===""){for(var Ke=0;Ke<xt.length;Ke++)if(_t[xt[Ke]]){At=_t[xt[Ke]];break}}At=At===""?"Times":At,this.pdf.setFont(At,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,V){if(isNaN(M)||isNaN(V))throw Da.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(M,V)},h.prototype.closePath=function(){var M=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Vn(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){M=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,V){if(isNaN(M)||isNaN(V))throw Da.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,V,W,ee){if(isNaN(W)||isNaN(ee)||isNaN(M)||isNaN(V))throw Da.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(W,ee)),ne=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.bezierCurveTo=function(M,V,W,ee,te,ne){if(isNaN(te)||isNaN(ne)||isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw Da.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new o(te,ne)),oe=this.ctx.transform.applyToPoint(new o(M,V)),G=this.ctx.transform.applyToPoint(new o(W,ee));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:G.x,y2:G.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.arc=function(M,V,W,ee,te,ne){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee)||isNaN(te))throw Da.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new o(M,V));M=se.x,V=se.y;var oe=this.ctx.transform.applyToPoint(new o(0,W)),G=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(oe.x-G.x,2)+Math.pow(oe.y-G.y,2))}Math.abs(te-ee)>=2*Math.PI&&(ee=0,te=2*Math.PI),this.path.push({type:"arc",x:M,y:V,radius:W,startAngle:ee,endAngle:te,counterclockwise:ne})},h.prototype.arcTo=function(M,V,W,ee,te){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw Da.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,V),this.lineTo(M+W,V),this.lineTo(M+W,V+ee),this.lineTo(M,V+ee),this.lineTo(M,V),this.lineTo(M+W,V),this.lineTo(M,V)},h.prototype.fillRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw Da.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,V,W,ee),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},h.prototype.strokeRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw Da.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,V,W,ee),this.stroke())},h.prototype.clearRect=function(M,V,W,ee){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee))throw Da.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,V,W,ee))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(V),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var V,W,ee,te;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))V=0,W=0,ee=0,te=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ne!==null)V=parseInt(ne[1]),W=parseInt(ne[2]),ee=parseInt(ne[3]),te=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)V=parseInt(ne[1]),W=parseInt(ne[2]),ee=parseInt(ne[3]),te=parseFloat(ne[4]);else{if(te=1,typeof M=="string"&&M.charAt(0)!=="#"){var se=new qK(M);M=se.ok?se.toHex():"#000000"}M.length===4?(V=M.substring(1,2),V+=V,W=M.substring(2,3),W+=W,ee=M.substring(3,4),ee+=ee):(V=M.substring(1,3),W=M.substring(3,5),ee=M.substring(5,7)),V=parseInt(V,16),W=parseInt(W,16),ee=parseInt(ee,16)}}return{r:V,g:W,b:ee,a:te,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,V,W,ee){if(isNaN(V)||isNaN(W)||typeof M!="string")throw Da.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var te=B(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:W,scale:ne,angle:te,align:this.textAlign,maxWidth:ee})}},h.prototype.strokeText=function(M,V,W,ee){if(isNaN(V)||isNaN(W)||typeof M!="string")throw Da.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ee=isNaN(ee)?void 0:ee;var te=B(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:W,scale:ne,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:ee})}},h.prototype.measureText=function(M){if(typeof M!="string")throw Da.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,W=this.pdf.internal.scaleFactor,ee=V.internal.getFontSize(),te=V.getStringUnitWidth(M)*ee/V.internal.scaleFactor,ne=function(se){var oe=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new ne({width:te*=Math.round(96*W/72*1e4)/1e4})},h.prototype.scale=function(M,V){if(isNaN(M)||isNaN(V))throw Da.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(M,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.rotate=function(M){if(isNaN(M))throw Da.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.translate=function(M,V){if(isNaN(M)||isNaN(V))throw Da.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,M,V);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.transform=function(M,V,W,ee,te,ne){if(isNaN(M)||isNaN(V)||isNaN(W)||isNaN(ee)||isNaN(te)||isNaN(ne))throw Da.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new c(M,V,W,ee,te,ne);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.setTransform=function(M,V,W,ee,te,ne){M=isNaN(M)?1:M,V=isNaN(V)?0:V,W=isNaN(W)?0:W,ee=isNaN(ee)?1:ee,te=isNaN(te)?0:te,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(M,V,W,ee,te,ne)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,V,W,ee,te,ne,se,oe,G){var ce=this.pdf.getImageProperties(M),Z=1,ae=1,je=1,de=1;ee!==void 0&&oe!==void 0&&(je=oe/ee,de=G/te,Z=ce.width/ee*oe/ee,ae=ce.height/te*G/te),ne===void 0&&(ne=V,se=W,V=0,W=0),ee!==void 0&&oe===void 0&&(oe=ee,G=te),ee===void 0&&oe===void 0&&(oe=ce.width,G=ce.height);for(var ie,be=this.ctx.transform.decompose(),Ne=B(be.rotate.shx),Fe=new c,Xe=(Fe=(Fe=(Fe=Fe.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new l(ne-V*je,se-W*de,ee*Z,te*ae)),ct=b.call(this,Xe),xt=[],Re=0;Re<ct.length;Re+=1)xt.indexOf(ct[Re])===-1&&xt.push(ct[Re]);if(N(xt),this.autoPaging)for(var ht=xt[0],At=xt[xt.length-1],_t=ht;_t<At+1;_t++){this.pdf.setPage(_t);var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=_t===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xe=_t===1?0:ge+(_t-2)*ve;if(this.ctx.clip_path.length!==0){var Ie=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(ie,this.posX+this.margin[3],-xe+Ke+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Ie}var Ze=JSON.parse(JSON.stringify(Xe));Ze=C([Ze],this.posX+this.margin[3],-xe+Ke+this.ctx.prevPageLastElemOffset)[0];var Ft=(_t>ht||_t<At)&&g.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,ve,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,Ne),Ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,Ne)};var b=function(M,V,W){var ee=[];V=V||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ee.push(Math.floor((M.y+te)/W)+1);break;case"arc":ee.push(Math.floor((M.y+te-M.radius)/W)+1),ee.push(Math.floor((M.y+te+M.radius)/W)+1);break;case"qct":var ne=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ee.push(Math.floor((ne.y+te)/W)+1),ee.push(Math.floor((ne.y+ne.h+te)/W)+1);break;case"bct":var se=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ee.push(Math.floor((se.y+te)/W)+1),ee.push(Math.floor((se.y+se.h+te)/W)+1);break;case"rect":ee.push(Math.floor((M.y+te)/W)+1),ee.push(Math.floor((M.y+M.h+te)/W)+1)}for(var oe=0;oe<ee.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[oe];)y.call(this);return ee},y=function(){var M=this.fillStyle,V=this.strokeStyle,W=this.font,ee=this.lineCap,te=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=V,this.font=W,this.lineCap=ee,this.lineWidth=te,this.lineJoin=ne},C=function(M,V,W){for(var ee=0;ee<M.length;ee++)switch(M[ee].type){case"bct":M[ee].x2+=V,M[ee].y2+=W;case"qct":M[ee].x1+=V,M[ee].y1+=W;case"mt":case"lt":case"arc":default:M[ee].x+=V,M[ee].y+=W}return M},N=function(M){return M.sort(function(V,W){return V-W})},k=function(M,V){for(var W,ee,te=this.fillStyle,ne=this.strokeStyle,se=this.lineCap,oe=this.lineWidth,G=Math.abs(oe*this.ctx.transform.scaleX),ce=this.lineJoin,Z=JSON.parse(JSON.stringify(this.path)),ae=JSON.parse(JSON.stringify(this.path)),je=[],de=0;de<ae.length;de++)if(ae[de].x!==void 0)for(var ie=b.call(this,ae[de]),be=0;be<ie.length;be+=1)je.indexOf(ie[be])===-1&&je.push(ie[be]);for(var Ne=0;Ne<je.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<je[Ne];)y.call(this);if(N(je),this.autoPaging)for(var Fe=je[0],Xe=je[je.length-1],ct=Fe;ct<Xe+1;ct++){this.pdf.setPage(ct),this.fillStyle=te,this.strokeStyle=ne,this.lineCap=se,this.lineWidth=G,this.lineJoin=ce;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=ct===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=ct===1?0:ht+(ct-2)*At;if(this.ctx.clip_path.length!==0){var Wt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(W,this.posX+this.margin[3],-_t+Re+this.ctx.prevPageLastElemOffset),S.call(this,M,!0),this.path=Wt}if(ee=JSON.parse(JSON.stringify(Z)),this.path=C(ee,this.posX+this.margin[3],-_t+Re+this.ctx.prevPageLastElemOffset),V===!1||ct===0){var Ke=(ct>Fe||ct<Xe)&&g.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,At,null).clip().discardPath()),S.call(this,M,V),Ke&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=G,S.call(this,M,V),this.lineWidth=oe;this.path=Z},S=function(M,V){if((M!=="stroke"||V||!v.call(this))&&(M==="stroke"||V||!p.call(this))){for(var W,ee,te=[],ne=this.path,se=0;se<ne.length;se++){var oe=ne[se];switch(oe.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:oe,deltas:[],abs:[]});break;case"lt":var G=te.length;if(ne[se-1]&&!isNaN(ne[se-1].x)&&(W=[oe.x-ne[se-1].x,oe.y-ne[se-1].y],G>0)){for(;G>=0;G--)if(te[G-1].close!==!0&&te[G-1].begin!==!0){te[G-1].deltas.push(W),te[G-1].abs.push(oe);break}}break;case"bct":W=[oe.x1-ne[se-1].x,oe.y1-ne[se-1].y,oe.x2-ne[se-1].x,oe.y2-ne[se-1].y,oe.x-ne[se-1].x,oe.y-ne[se-1].y],te[te.length-1].deltas.push(W);break;case"qct":var ce=ne[se-1].x+2/3*(oe.x1-ne[se-1].x),Z=ne[se-1].y+2/3*(oe.y1-ne[se-1].y),ae=oe.x+2/3*(oe.x1-oe.x),je=oe.y+2/3*(oe.y1-oe.y),de=oe.x,ie=oe.y;W=[ce-ne[se-1].x,Z-ne[se-1].y,ae-ne[se-1].x,je-ne[se-1].y,de-ne[se-1].x,ie-ne[se-1].y],te[te.length-1].deltas.push(W);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(oe)}}ee=V?null:M==="stroke"?"stroke":"fill";for(var be=!1,Ne=0;Ne<te.length;Ne++)if(te[Ne].arc)for(var Fe=te[Ne].abs,Xe=0;Xe<Fe.length;Xe++){var ct=Fe[Xe];ct.type==="arc"?T.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,V,!be):Q.call(this,ct.x,ct.y),be=!0}else if(te[Ne].close===!0)this.pdf.internal.out("h"),be=!1;else if(te[Ne].begin!==!0){var xt=te[Ne].start.x,Re=te[Ne].start.y;z.call(this,te[Ne].deltas,xt,Re),be=!0}ee&&A.call(this,ee),V&&L.call(this)}},D=function(M){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-W;case"top":return M+V-W;case"hanging":return M+V-2*W;case"middle":return M+V/2-W;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(V,W){this.colorStops.push([V,W])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(M,V,W,ee,te,ne,se,oe,G){for(var ce=U.call(this,W,ee,te,ne),Z=0;Z<ce.length;Z++){var ae=ce[Z];Z===0&&(G?P.call(this,ae.x1+M,ae.y1+V):Q.call(this,ae.x1+M,ae.y1+V)),re.call(this,M,V,ae.x2,ae.y2,ae.x3,ae.y3,ae.x4,ae.y4)}oe?L.call(this):A.call(this,se)},A=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,V){this.pdf.internal.out(r(M)+" "+n(V)+" m")},O=function(M){var V;switch(M.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var W=this.pdf.getTextDimensions(M.text),ee=D.call(this,M.y),te=E.call(this,ee)-W.h,ne=this.ctx.transform.applyToPoint(new o(M.x,ee)),se=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var G,ce,Z,ae=this.ctx.transform.applyToRectangle(new l(M.x,ee,W.w,W.h)),je=oe.applyToRectangle(new l(M.x,te,W.w,W.h)),de=b.call(this,je),ie=[],be=0;be<de.length;be+=1)ie.indexOf(de[be])===-1&&ie.push(de[be]);if(N(ie),this.autoPaging)for(var Ne=ie[0],Fe=ie[ie.length-1],Xe=Ne;Xe<Fe+1;Xe++){this.pdf.setPage(Xe);var ct=Xe===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],ht=Re-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],_t=At-this.margin[3],Wt=Xe===1?0:xt+(Xe-2)*ht;if(this.ctx.clip_path.length!==0){var Ke=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(G,this.posX+this.margin[3],-1*Wt+ct),S.call(this,"fill",!0),this.path=Ke}var ge=C([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-Wt+ct+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*M.scale),Z=this.lineWidth,this.lineWidth=Z*M.scale);var ve=this.autoPaging!=="text";if(ve||ge.y+ge.h<=Re){if(ve||ge.y>=ct&&ge.x<=At){var xe=ve?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||At-ge.x)[0],Ie=C([JSON.parse(JSON.stringify(ae))],this.posX+this.margin[3],-Wt+ct+this.ctx.prevPageLastElemOffset)[0],Ze=ve&&(Xe>Ne||Xe<Fe)&&g.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,ht,null).clip().discardPath()),this.pdf.text(xe,Ie.x,Ie.y,{angle:M.angle,align:V,renderingMode:M.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else ge.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-ge.y);M.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=Z)}else M.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*M.scale),Z=this.lineWidth,this.lineWidth=Z*M.scale),this.pdf.text(M.text,ne.x+this.posX,ne.y+this.posY,{angle:M.angle,align:V,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=Z)},Q=function(M,V,W,ee){W=W||0,ee=ee||0,this.pdf.internal.out(r(M+W)+" "+n(V+ee)+" l")},z=function(M,V,W){return this.pdf.lines(M,V,W,null,null)},re=function(M,V,W,ee,te,ne,se,oe){this.pdf.internal.out([t(s(W+M)),t(i(ee+V)),t(s(te+M)),t(i(ne+V)),t(s(se+M)),t(i(oe+V)),"c"].join(" "))},U=function(M,V,W,ee){for(var te=2*Math.PI,ne=Math.PI/2;V>W;)V-=te;var se=Math.abs(W-V);se<te&&ee&&(se=te-se);for(var oe=[],G=ee?-1:1,ce=V;se>1e-5;){var Z=ce+G*Math.min(se,ne);oe.push(X.call(this,M,ce,Z)),se-=Math.abs(Z-ce),ce=Z}return oe},X=function(M,V,W){var ee=(W-V)/2,te=M*Math.cos(ee),ne=M*Math.sin(ee),se=te,oe=-ne,G=se*se+oe*oe,ce=G+se*te+oe*ne,Z=4/3*(Math.sqrt(2*G*ce)-ce)/(se*ne-oe*te),ae=se-Z*oe,je=oe+Z*se,de=ae,ie=-je,be=ee+V,Ne=Math.cos(be),Fe=Math.sin(be);return{x1:M*Math.cos(V),y1:M*Math.sin(V),x2:ae*Ne-je*Fe,y2:ae*Fe+je*Ne,x3:de*Ne-ie*Fe,y3:de*Fe+ie*Ne,x4:M*Math.cos(W),y4:M*Math.sin(W)}},B=function(M){return 180*M/Math.PI},Y=function(M,V,W,ee,te,ne){var se=M+.5*(W-M),oe=V+.5*(ee-V),G=te+.5*(W-te),ce=ne+.5*(ee-ne),Z=Math.min(M,te,se,G),ae=Math.max(M,te,se,G),je=Math.min(V,ne,oe,ce),de=Math.max(V,ne,oe,ce);return new l(Z,je,ae-Z,de-je)},K=function(M,V,W,ee,te,ne,se,oe){var G,ce,Z,ae,je,de,ie,be,Ne,Fe,Xe,ct,xt,Re,ht=W-M,At=ee-V,_t=te-W,Wt=ne-ee,Ke=se-te,ge=oe-ne;for(ce=0;ce<41;ce++)Ne=(ie=(Z=M+(G=ce/40)*ht)+G*((je=W+G*_t)-Z))+G*(je+G*(te+G*Ke-je)-ie),Fe=(be=(ae=V+G*At)+G*((de=ee+G*Wt)-ae))+G*(de+G*(ne+G*ge-de)-be),ce==0?(Xe=Ne,ct=Fe,xt=Ne,Re=Fe):(Xe=Math.min(Xe,Ne),ct=Math.min(ct,Fe),xt=Math.max(xt,Ne),Re=Math.max(Re,Fe));return new l(Math.round(Xe),Math.round(ct),Math.round(xt-Xe),Math.round(Re-ct))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,V,W=(M=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:V}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(rn.API),function(e){var t=function(i){var o,l,c,d,u,h,m,p,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(v=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,l.push(h+33,m+33,p+33,v+33,g+33)):l.push(122);return function(b,y){for(var C=y;C>0;C--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,m="length",p=255,v="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[m]%5||5))[m];u>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(y,C){for(var N=C;N>0;N--)y.pop()}(c,o[m]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=x3(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(rn.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,m=0,p=function(v){var g=v.length,b=[],y=String.fromCharCode;for(m=0;m<g;m+=1)b.push(y(255&v.charCodeAt(m)));return b.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(s,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(rn.API),function(e){function t(){return(sn.html2canvas?Promise.resolve(sn.html2canvas):u3(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(sn.DOMPurify?Promise.resolve(sn.DOMPurify):u3(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Vn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(c(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var p=d[m],v=p.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,rn.getPageSize=function(o,l,c){if(Vn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,v=0,g=0;if(m.hasOwnProperty(h))v=m[h][1]/u,g=m[h][0]/u;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(p=g,g=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(p=g,g=v,v=p)}return{width:g,height:v,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(N3):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(rn.API),rn.API.addJS=function(e){return L7=e,this.internal.events.subscribe("postPutResources",function(){gN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gN!==void 0&&F7!==void 0&&this.internal.out("/Names <</JavaScript "+gN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(rn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,g={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=p,t.indexOf(h.charCodeAt(b+1))!==-1){m=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:m,numcomponents:h.charCodeAt(b+9)};break}p=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:s}}return u}}(rn.API);var $0,bN,B7,U7,$7,N8e=function(){var e,t,r;function n(i){var o,l,c,d,u,h,m,p,v,g,b,y,C,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var k,S;for(S=[],k=0;k<4;++k)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(C=0;0<=g?C<g:C>g;0<=g?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(b=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,b.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,m,p,v){var g,b,y,C,N,k,S,D,E,T,A,L,P,O,Q,z,re,U,X,B,Y,K=Math.ceil((d.width-h)/p),ue=Math.ceil((d.height-m)/v),M=d.width==K&&d.height==ue;for(O=o*K,L=M?l:new Uint8Array(O*ue),k=i.length,P=0,b=0;P<ue&&c<k;){switch(i[c++]){case 0:for(C=re=0;re<O;C=re+=1)L[b++]=i[c++];break;case 1:for(C=U=0;U<O;C=U+=1)g=i[c++],N=C<o?0:L[b-o],L[b++]=(g+N)%256;break;case 2:for(C=X=0;X<O;C=X+=1)g=i[c++],y=(C-C%o)/o,Q=P&&L[(P-1)*O+y*o+C%o],L[b++]=(Q+g)%256;break;case 3:for(C=B=0;B<O;C=B+=1)g=i[c++],y=(C-C%o)/o,N=C<o?0:L[b-o],Q=P&&L[(P-1)*O+y*o+C%o],L[b++]=(g+Math.floor((N+Q)/2))%256;break;case 4:for(C=Y=0;Y<O;C=Y+=1)g=i[c++],y=(C-C%o)/o,N=C<o?0:L[b-o],P===0?Q=z=0:(Q=L[(P-1)*O+y*o+C%o],z=y&&L[(P-1)*O+(y-1)*o+C%o]),S=N+Q-z,D=Math.abs(S-N),T=Math.abs(S-Q),A=Math.abs(S-z),E=D<=T&&D<=A?N:T<=A?Q:z,L[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var V=((m+P*v)*d.width+h)*o,W=P*O;for(C=0;C<K;C+=1){for(var ee=0;ee<o;ee+=1)l[V++]=L[W++];V+=(p-1)*o}}P++}}return i=e8e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,m,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,m=l.length;h<m;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,m,p,v,g,b,y;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,h=g||o,u=m=0,c===1)for(;u<v;)p=g?4*o[u/4]:m,b=h[p++],d[u++]=b,d[u++]=b,d[u++]=b,d[u++]=l?h[p++]:255,m=p;else for(;u<v;)p=g?4*o[u/4]:m,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(sn)==="[object Window]"){try{t=sn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,m,p;if(this.animation){for(p=[],l=u=0,h=(m=this.animation.frames).length;u<h;l=++u)o=m[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,m=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,v;if(p=l++%d,v=c[p],m.renderFrame(i,p),d>1&&l/d<u)return m.animation._timeout=setTimeout(o,v.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function w8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,m=null,p=0,v=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],(1&g)==0&&(m=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,k=e[t++],S=k>>6&1,D=1<<(7&k)+1,E=l,T=c,A=!1;k>>7&&(A=!0,E=t,T=D,t+=3*D);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:b,y,width:C,height:N,has_local_palette:A,palette_offset:E,palette_size:T,data_offset:L,data_length:t-L,transparent_index:m,interlaced:!!S,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,Q){var z=this.frameInfo(O),re=z.width*z.height,U=new Uint8Array(re);V7(e,z.data_offset,U,re);var X=z.palette_offset,B=z.transparent_index;B===null&&(B=256);var Y=z.width,K=r-Y,ue=Y,M=4*(z.y*r+z.x),V=4*((z.y+z.height)*r+z.x),W=M,ee=4*K;z.interlaced===!0&&(ee+=4*r*7);for(var te=8,ne=0,se=U.length;ne<se;++ne){var oe=U[ne];if(ue===0&&(ue=Y,(W+=ee)>=V&&(ee=4*K+4*r*(te-1),W=M+(Y+K)*(te<<1),te>>=1)),oe===B)W+=4;else{var G=e[X+3*oe],ce=e[X+3*oe+1],Z=e[X+3*oe+2];Q[W++]=Z,Q[W++]=ce,Q[W++]=G,Q[W++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(O,Q){var z=this.frameInfo(O),re=z.width*z.height,U=new Uint8Array(re);V7(e,z.data_offset,U,re);var X=z.palette_offset,B=z.transparent_index;B===null&&(B=256);var Y=z.width,K=r-Y,ue=Y,M=4*(z.y*r+z.x),V=4*((z.y+z.height)*r+z.x),W=M,ee=4*K;z.interlaced===!0&&(ee+=4*r*7);for(var te=8,ne=0,se=U.length;ne<se;++ne){var oe=U[ne];if(ue===0&&(ue=Y,(W+=ee)>=V&&(ee=4*K+4*r*(te-1),W=M+(Y+K)*(te<<1),te>>=1)),oe===B)W+=4;else{var G=e[X+3*oe],ce=e[X+3*oe+1],Z=e[X+3*oe+2];Q[W++]=G,Q[W++]=ce,Q[W++]=Z,Q[W++]=255}--ue}}}function V7(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,h=0,m=0,p=e[t++],v=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var b=h&d;if(h>>=c,u-=c,b!==i){if(b===o)break;for(var y=b<l?b:g,C=0,N=y;N>i;)N=v[N]>>8,++C;var k=N;if(m+C+(y!==b?1:0)>n)return void Da.log("Warning, gif stream longer than expected.");r[m++]=k;var S=m+=C;for(y!==b&&(r[m++]=k),N=y;C--;)N=v[N],r[--S]=255&N,N>>=8;g!==null&&l<4096&&(v[l++]=g<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=s+1))-1,g=null}return m!==n&&Da.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function h5(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),g=[],b=0,y=7,C=new Array(64),N=new Array(64),k=new Array(64),S=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(M,V){for(var W=0,ee=0,te=new Array,ne=1;ne<=16;ne++){for(var se=1;se<=M[ne];se++)te[V[ee]]=[],te[V[ee]][0]=W,te[V[ee]][1]=ne,ee++,W++;W*=2}return te}function X(M){for(var V=M[0],W=M[1]-1;W>=0;)V&1<<W&&(b|=1<<y),W--,--y<0&&(b==255?(B(255),B(0)):B(b),y=7,b=0)}function B(M){g.push(M)}function Y(M){B(M>>8&255),B(255&M)}function K(M,V,W,ee,te){for(var ne,se=te[0],oe=te[240],G=function(Fe,Xe){var ct,xt,Re,ht,At,_t,Wt,Ke,ge,ve,xe=0;for(ge=0;ge<8;++ge){ct=Fe[xe],xt=Fe[xe+1],Re=Fe[xe+2],ht=Fe[xe+3],At=Fe[xe+4],_t=Fe[xe+5],Wt=Fe[xe+6];var Ie=ct+(Ke=Fe[xe+7]),Ze=ct-Ke,Ft=xt+Wt,Qe=xt-Wt,Ye=Re+_t,Le=Re-_t,ze=ht+At,ut=ht-At,Te=Ie+ze,We=Ie-ze,Ge=Ft+Ye,It=Ft-Ye;Fe[xe]=Te+Ge,Fe[xe+4]=Te-Ge;var Bt=.707106781*(It+We);Fe[xe+2]=We+Bt,Fe[xe+6]=We-Bt;var Ee=.382683433*((Te=ut+Le)-(It=Qe+Ze)),_e=.5411961*Te+Ee,st=1.306562965*It+Ee,wt=.707106781*(Ge=Le+Qe),rr=Ze+wt,Ot=Ze-wt;Fe[xe+5]=Ot+_e,Fe[xe+3]=Ot-_e,Fe[xe+1]=rr+st,Fe[xe+7]=rr-st,xe+=8}for(xe=0,ge=0;ge<8;++ge){ct=Fe[xe],xt=Fe[xe+8],Re=Fe[xe+16],ht=Fe[xe+24],At=Fe[xe+32],_t=Fe[xe+40],Wt=Fe[xe+48];var er=ct+(Ke=Fe[xe+56]),fr=ct-Ke,yr=xt+Wt,Yr=xt-Wt,ur=Re+_t,me=Re-_t,Be=ht+At,Ae=ht-At,ke=er+Be,Me=er-Be,$e=yr+ur,pt=yr-ur;Fe[xe]=ke+$e,Fe[xe+32]=ke-$e;var jt=.707106781*(pt+Me);Fe[xe+16]=Me+jt,Fe[xe+48]=Me-jt;var ot=.382683433*((ke=Ae+me)-(pt=Yr+fr)),bt=.5411961*ke+ot,yt=1.306562965*pt+ot,Yt=.707106781*($e=me+Yr),sr=fr+Yt,mr=fr-Yt;Fe[xe+40]=mr+bt,Fe[xe+24]=mr-bt,Fe[xe+8]=sr+yt,Fe[xe+56]=sr-yt,xe++}for(ge=0;ge<64;++ge)ve=Fe[ge]*Xe[ge],p[ge]=ve>0?ve+.5|0:ve-.5|0;return p}(M,V),ce=0;ce<64;++ce)v[E[ce]]=G[ce];var Z=v[0]-W;W=v[0],Z==0?X(ee[0]):(X(ee[m[ne=32767+Z]]),X(h[ne]));for(var ae=63;ae>0&&v[ae]==0;)ae--;if(ae==0)return X(se),W;for(var je,de=1;de<=ae;){for(var ie=de;v[de]==0&&de<=ae;)++de;var be=de-ie;if(be>=16){je=be>>4;for(var Ne=1;Ne<=je;++Ne)X(oe);be&=15}ne=32767+v[de],X(te[(be<<4)+m[ne]]),X(h[ne]),de++}return ae!=63&&X(se),W}function ue(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(V){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var te=o((W[ee]*V+50)/100);te=Math.min(Math.max(te,1),255),l[E[ee]]=te}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var oe=o((ne[se]*V+50)/100);oe=Math.min(Math.max(oe,1),255),c[E[se]]=oe}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ce=0,Z=0;Z<8;Z++)for(var ae=0;ae<8;ae++)d[ce]=1/(l[E[ce]]*G[Z]*G[ae]*8),u[ce]=1/(c[E[ce]]*G[Z]*G[ae]*8),ce++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,V){V&&ue(V),g=new Array,b=0,y=7,Y(65496),Y(65504),Y(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),Y(1),Y(1),B(0),B(0),function(){Y(65499),Y(132),B(0);for(var xt=0;xt<64;xt++)B(l[xt]);B(1);for(var Re=0;Re<64;Re++)B(c[Re])}(),function(xt,Re){Y(65472),Y(17),B(8),Y(Re),Y(xt),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(M.width,M.height),function(){Y(65476),Y(418),B(0);for(var xt=0;xt<16;xt++)B(T[xt+1]);for(var Re=0;Re<=11;Re++)B(A[Re]);B(16);for(var ht=0;ht<16;ht++)B(L[ht+1]);for(var At=0;At<=161;At++)B(P[At]);B(1);for(var _t=0;_t<16;_t++)B(O[_t+1]);for(var Wt=0;Wt<=11;Wt++)B(Q[Wt]);B(17);for(var Ke=0;Ke<16;Ke++)B(z[Ke+1]);for(var ge=0;ge<=161;ge++)B(re[ge])}(),Y(65498),Y(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var W=0,ee=0,te=0;b=0,y=7,this.encode.displayName="_encode_";for(var ne,se,oe,G,ce,Z,ae,je,de,ie=M.data,be=M.width,Ne=M.height,Fe=4*be,Xe=0;Xe<Ne;){for(ne=0;ne<Fe;){for(ce=Fe*Xe+ne,ae=-1,je=0,de=0;de<64;de++)Z=ce+(je=de>>3)*Fe+(ae=4*(7&de)),Xe+je>=Ne&&(Z-=Fe*(Xe+1+je-Ne)),ne+ae>=Fe&&(Z-=ne+ae-Fe+4),se=ie[Z++],oe=ie[Z++],G=ie[Z++],C[de]=(D[se]+D[oe+256>>0]+D[G+512>>0]>>16)-128,N[de]=(D[se+768>>0]+D[oe+1024>>0]+D[G+1280>>0]>>16)-128,k[de]=(D[se+1280>>0]+D[oe+1536>>0]+D[G+1792>>0]>>16)-128;W=K(C,d,W,t,n),ee=K(N,u,ee,r,s),te=K(k,u,te,r,s),ne+=32}Xe+=8}if(y>=0){var ct=[];ct[1]=y+1,ct[0]=(1<<y+1)-1,X(ct)}return Y(65497),new Uint8Array(g)},e=e||50,function(){for(var M=String.fromCharCode,V=0;V<256;V++)S[V]=M(V)}(),t=U(T,A),r=U(O,Q),n=U(L,P),s=U(z,re),function(){for(var M=1,V=2,W=1;W<=15;W++){for(var ee=M;ee<V;ee++)m[32767+ee]=W,h[32767+ee]=[],h[32767+ee][1]=W,h[32767+ee][0]=ee;for(var te=-(V-1);te<=-M;te++)m[32767+te]=W,h[32767+te]=[],h[32767+te][1]=W,h[32767+te][0]=V-1+te;M<<=1,V<<=1}}(),function(){for(var M=0;M<256;M++)D[M]=19595*M,D[M+256>>0]=38470*M,D[M+512>>0]=7471*M+32768,D[M+768>>0]=-11059*M,D[M+1024>>0]=-21709*M,D[M+1280>>0]=32768*M+8421375,D[M+1536>>0]=-27439*M,D[M+1792>>0]=-5329*M}(),ue(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function yd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function q7(e){function t(T){if(!T)throw Error("assert :P")}function r(T,A,L){for(var P=0;4>P;P++)if(T[A+P]!=L.charCodeAt(P))return!0;return!1}function n(T,A,L,P,O){for(var Q=0;Q<O;Q++)T[A+Q]=L[P+Q]}function s(T,A,L,P){for(var O=0;O<P;O++)T[A+O]=L}function i(T){return new Int32Array(T)}function o(T,A){for(var L=[],P=0;P<T;P++)L.push(new A);return L}function l(T,A){var L=[];return function P(O,Q,z){for(var re=z[Q],U=0;U<re&&(O.push(z.length>Q+1?[]:new A),!(z.length<Q+1));U++)P(O[U],Q+1,z)}(L,0,T),L}var c=function(){var T=this;function A(I,F){for(var J=1<<F-1>>>0;I&J;)J>>>=1;return J?(I&J-1)+J:I}function L(I,F,J,le,fe){t(!(le%J));do I[F+(le-=J)]=fe;while(0<le)}function P(I,F,J,le,fe){if(t(2328>=fe),512>=fe)var ye=i(512);else if((ye=i(fe))==null)return 0;return function(we,Se,De,Ue,nt,Ct){var Nt,ft,Xt=Se,Pt=1<<De,at=i(16),lt=i(16);for(t(nt!=0),t(Ue!=null),t(we!=null),t(0<De),ft=0;ft<nt;++ft){if(15<Ue[ft])return 0;++at[Ue[ft]]}if(at[0]==nt)return 0;for(lt[1]=0,Nt=1;15>Nt;++Nt){if(at[Nt]>1<<Nt)return 0;lt[Nt+1]=lt[Nt]+at[Nt]}for(ft=0;ft<nt;++ft)Nt=Ue[ft],0<Ue[ft]&&(Ct[lt[Nt]++]=ft);if(lt[15]==1)return(Ue=new O).g=0,Ue.value=Ct[0],L(we,Xt,1,Pt,Ue),Pt;var Vt,Qt=-1,Ht=Pt-1,wr=0,vr=1,Vr=1,gr=1<<De;for(ft=0,Nt=1,nt=2;Nt<=De;++Nt,nt<<=1){if(vr+=Vr<<=1,0>(Vr-=at[Nt]))return 0;for(;0<at[Nt];--at[Nt])(Ue=new O).g=Nt,Ue.value=Ct[ft++],L(we,Xt+wr,nt,gr,Ue),wr=A(wr,Nt)}for(Nt=De+1,nt=2;15>=Nt;++Nt,nt<<=1){if(vr+=Vr<<=1,0>(Vr-=at[Nt]))return 0;for(;0<at[Nt];--at[Nt]){if(Ue=new O,(wr&Ht)!=Qt){for(Xt+=gr,Vt=1<<(Qt=Nt)-De;15>Qt&&!(0>=(Vt-=at[Qt]));)++Qt,Vt<<=1;Pt+=gr=1<<(Vt=Qt-De),we[Se+(Qt=wr&Ht)].g=Vt+De,we[Se+Qt].value=Xt-Se-Qt}Ue.g=Nt-De,Ue.value=Ct[ft++],L(we,Xt+(wr>>De),nt,gr,Ue),wr=A(wr,Nt)}}return vr!=2*lt[15]-1?0:Pt}(I,F,J,le,fe,ye)}function O(){this.value=this.g=0}function Q(){this.value=this.g=0}function z(){this.G=o(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ks,Q)}function re(I,F,J,le){t(I!=null),t(F!=null),t(2147483648>le),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=F,I.pa=J,I.Jd=F,I.Yc=J+le,I.Zc=4<=le?J+le-4+1:J,ne(I)}function U(I,F){for(var J=0;0<F--;)J|=oe(I,128)<<F;return J}function X(I,F){var J=U(I,F);return se(I)?-J:J}function B(I,F,J,le){var fe,ye=0;for(t(I!=null),t(F!=null),t(4294967288>le),I.Sb=le,I.Ra=0,I.u=0,I.h=0,4<le&&(le=4),fe=0;fe<le;++fe)ye+=F[J+fe]<<8*fe;I.Ra=ye,I.bb=le,I.oa=F,I.pa=J}function Y(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<uh-8>>>0,++I.bb,I.u-=8;W(I)&&(I.h=1,I.u=0)}function K(I,F){if(t(0<=F),!I.h&&F<=dh){var J=V(I)&Hd[F];return I.u+=F,Y(I),J}return I.h=1,I.u=0}function ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(I){return I.Ra>>>(I.u&uh-1)>>>0}function W(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>uh}function ee(I,F){I.u=F,I.h=W(I)}function te(I){I.u>=Bf&&(t(I.u>=Bf),Y(I))}function ne(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function se(I){return U(I,1)}function oe(I,F){var J=I.Ca;0>I.b&&ne(I);var le=I.b,fe=J*F>>>8,ye=(I.I>>>le>fe)+0;for(ye?(J-=fe,I.I-=fe+1<<le>>>0):J=fe+1,le=J,fe=0;256<=le;)fe+=8,le>>=8;return le=7^fe+Ji[le],I.b-=le,I.Ca=(J<<le)-1,ye}function G(I,F,J){I[F+0]=J>>24&255,I[F+1]=J>>16&255,I[F+2]=J>>8&255,I[F+3]=J>>0&255}function ce(I,F){return I[F+0]<<0|I[F+1]<<8}function Z(I,F){return ce(I,F)|I[F+2]<<16}function ae(I,F){return ce(I,F)|ce(I,F+2)<<16}function je(I,F){var J=1<<F;return t(I!=null),t(0<F),I.X=i(J),I.X==null?0:(I.Mb=32-F,I.Xa=F,1)}function de(I,F){t(I!=null),t(F!=null),t(I.Xa==F.Xa),n(F.X,0,I.X,0,1<<F.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function be(I,F,J,le){t(J!=null),t(le!=null);var fe=J[0],ye=le[0];return fe==0&&(fe=(I*ye+F/2)/F),ye==0&&(ye=(F*fe+I/2)/I),0>=fe||0>=ye?0:(J[0]=fe,le[0]=ye,1)}function Ne(I,F){return I+(1<<F)-1>>>F}function Fe(I,F){return((4278255360&I)+(4278255360&F)>>>0&4278255360)+((16711935&I)+(16711935&F)>>>0&16711935)>>>0}function Xe(I,F){T[F]=function(J,le,fe,ye,we,Se,De){var Ue;for(Ue=0;Ue<we;++Ue){var nt=T[I](Se[De+Ue-1],fe,ye+Ue);Se[De+Ue]=Fe(J[le+Ue],nt)}}}function ct(){this.ud=this.hd=this.jd=0}function xt(I,F){return((4278124286&(I^F))>>>1)+(I&F)>>>0}function Re(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function ht(I,F){return Re(I+(I-F+.5>>1))}function At(I,F,J){return Math.abs(F-J)-Math.abs(I-J)}function _t(I,F,J,le,fe,ye,we){for(le=ye[we-1],J=0;J<fe;++J)ye[we+J]=le=Fe(I[F+J],le)}function Wt(I,F,J,le,fe){var ye;for(ye=0;ye<J;++ye){var we=I[F+ye],Se=we>>8&255,De=16711935&(De=(De=16711935&we)+((Se<<16)+Se));le[fe+ye]=(4278255360&we)+De>>>0}}function Ke(I,F){F.jd=I>>0&255,F.hd=I>>8&255,F.ud=I>>16&255}function ge(I,F,J,le,fe,ye){var we;for(we=0;we<le;++we){var Se=F[J+we],De=Se>>>8,Ue=Se,nt=255&(nt=(nt=Se>>>16)+((I.jd<<24>>24)*(De<<24>>24)>>>5));Ue=255&(Ue=(Ue=Ue+((I.hd<<24>>24)*(De<<24>>24)>>>5))+((I.ud<<24>>24)*(nt<<24>>24)>>>5)),fe[ye+we]=(4278255360&Se)+(nt<<16)+Ue}}function ve(I,F,J,le,fe){T[F]=function(ye,we,Se,De,Ue,nt,Ct,Nt,ft){for(De=Ct;De<Nt;++De)for(Ct=0;Ct<ft;++Ct)Ue[nt++]=fe(Se[le(ye[we++])])},T[I]=function(ye,we,Se,De,Ue,nt,Ct){var Nt=8>>ye.b,ft=ye.Ea,Xt=ye.K[0],Pt=ye.w;if(8>Nt)for(ye=(1<<ye.b)-1,Pt=(1<<Nt)-1;we<Se;++we){var at,lt=0;for(at=0;at<ft;++at)at&ye||(lt=le(De[Ue++])),nt[Ct++]=fe(Xt[lt&Pt]),lt>>=Nt}else T["VP8LMapColor"+J](De,Ue,Xt,Pt,nt,Ct,we,Se,ft)}}function xe(I,F,J,le,fe){for(J=F+J;F<J;){var ye=I[F++];le[fe++]=ye>>16&255,le[fe++]=ye>>8&255,le[fe++]=ye>>0&255}}function Ie(I,F,J,le,fe){for(J=F+J;F<J;){var ye=I[F++];le[fe++]=ye>>16&255,le[fe++]=ye>>8&255,le[fe++]=ye>>0&255,le[fe++]=ye>>24&255}}function Ze(I,F,J,le,fe){for(J=F+J;F<J;){var ye=(we=I[F++])>>16&240|we>>12&15,we=we>>0&240|we>>28&15;le[fe++]=ye,le[fe++]=we}}function Ft(I,F,J,le,fe){for(J=F+J;F<J;){var ye=(we=I[F++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;le[fe++]=ye,le[fe++]=we}}function Qe(I,F,J,le,fe){for(J=F+J;F<J;){var ye=I[F++];le[fe++]=ye>>0&255,le[fe++]=ye>>8&255,le[fe++]=ye>>16&255}}function Ye(I,F,J,le,fe,ye){if(ye==0)for(J=F+J;F<J;)G(le,((ye=I[F++])[0]>>24|ye[1]>>8&65280|ye[2]<<8&16711680|ye[3]<<24)>>>0),fe+=32;else n(le,fe,I,F,J)}function Le(I,F){T[F][0]=T[I+"0"],T[F][1]=T[I+"1"],T[F][2]=T[I+"2"],T[F][3]=T[I+"3"],T[F][4]=T[I+"4"],T[F][5]=T[I+"5"],T[F][6]=T[I+"6"],T[F][7]=T[I+"7"],T[F][8]=T[I+"8"],T[F][9]=T[I+"9"],T[F][10]=T[I+"10"],T[F][11]=T[I+"11"],T[F][12]=T[I+"12"],T[F][13]=T[I+"13"],T[F][14]=T[I+"0"],T[F][15]=T[I+"0"]}function ze(I){return I==fp||I==tu||I==id||I==qf}function ut(){this.eb=[],this.size=this.A=this.fb=0}function Te(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function We(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ut,this.f.kb=new Te,this.sd=null}function Ge(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Bt(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Ee(I,F){var J=I.T,le=F.ba.f.RGBA,fe=le.eb,ye=le.fb+I.ka*le.A,we=Hs[F.ba.S],Se=I.y,De=I.O,Ue=I.f,nt=I.N,Ct=I.ea,Nt=I.W,ft=F.cc,Xt=F.dc,Pt=F.Mc,at=F.Nc,lt=I.ka,Vt=I.ka+I.T,Qt=I.U,Ht=Qt+1>>1;for(lt==0?we(Se,De,null,null,Ue,nt,Ct,Nt,Ue,nt,Ct,Nt,fe,ye,null,null,Qt):(we(F.ec,F.fc,Se,De,ft,Xt,Pt,at,Ue,nt,Ct,Nt,fe,ye-le.A,fe,ye,Qt),++J);lt+2<Vt;lt+=2)ft=Ue,Xt=nt,Pt=Ct,at=Nt,nt+=I.Rc,Nt+=I.Rc,ye+=2*le.A,we(Se,(De+=2*I.fa)-I.fa,Se,De,ft,Xt,Pt,at,Ue,nt,Ct,Nt,fe,ye-le.A,fe,ye,Qt);return De+=I.fa,I.j+Vt<I.o?(n(F.ec,F.fc,Se,De,Qt),n(F.cc,F.dc,Ue,nt,Ht),n(F.Mc,F.Nc,Ct,Nt,Ht),J--):1&Vt||we(Se,De,null,null,Ue,nt,Ct,Nt,Ue,nt,Ct,Nt,fe,ye+le.A,null,null,Qt),J}function _e(I,F,J){var le=I.F,fe=[I.J];if(le!=null){var ye=I.U,we=F.ba.S,Se=we==xh||we==id;F=F.ba.f.RGBA;var De=[0],Ue=I.ka;De[0]=I.T,I.Kb&&(Ue==0?--De[0]:(--Ue,fe[0]-=I.width),I.j+I.ka+I.T==I.o&&(De[0]=I.o-I.j-Ue));var nt=F.eb;Ue=F.fb+Ue*F.A,I=_n(le,fe[0],I.width,ye,De,nt,Ue+(Se?0:3),F.A),t(J==De),I&&ze(we)&&To(nt,Ue,Se,ye,De,F.A)}return 0}function st(I){var F=I.ma,J=F.ba.S,le=11>J,fe=J==Vf||J==hp||J==xh||J==sd||J==12||ze(J);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!zd(F.Oa,I,fe?11:12))return 0;if(fe&&ze(J)&&ar(),I.da)alert("todo:use_scaling");else{if(le){if(F.Ib=Bt,I.Kb){if(J=I.U+1>>1,F.memory=i(I.U+2*J),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+I.U,F.Mc=F.cc,F.Nc=F.dc+J,F.Ib=Ee,ar()}}else alert("todo:EmitYUV");fe&&(F.Jb=_e,le&&gt())}if(le&&!_1){for(I=0;256>I;++I)nC[I]=89858*(I-128)+Es>>vc,xp[I]=-22014*(I-128)+Es,bg[I]=-45773*(I-128),Ds[I]=113618*(I-128)+Es>>vc;for(I=au;I<s0;++I)F=76283*(I-16)+Es>>vc,vp[I-au]=Ao(F,255),yg[I-au]=Ao(F+8>>4,15);_1=1}return 1}function wt(I){var F=I.ma,J=I.U,le=I.T;return t(!(1&I.ka)),0>=J||0>=le?0:(J=F.Ib(I,F),F.Jb!=null&&F.Jb(I,F,J),F.Dc+=J,1)}function rr(I){I.ma.memory=null}function Ot(I,F,J,le){return K(I,8)!=47?0:(F[0]=K(I,14)+1,J[0]=K(I,14)+1,le[0]=K(I,1),K(I,3)!=0?0:!I.h)}function er(I,F){if(4>I)return I+1;var J=I-2>>1;return(2+(1&I)<<J)+K(F,J)+1}function fr(I,F){return 120<F?F-120:1<=(J=((J=ld[F-1])>>4)*I+(8-(15&J)))?J:1;var J}function yr(I,F,J){var le=V(J),fe=I[F+=255&le].g-8;return 0<fe&&(ee(J,J.u+8),le=V(J),F+=I[F].value,F+=le&(1<<fe)-1),ee(J,J.u+I[F].g),I[F].value}function Yr(I,F,J){return J.g+=I.g,J.value+=I.value<<F>>>0,t(8>=J.g),I.g}function ur(I,F,J){var le=I.xc;return t((F=le==0?0:I.vc[I.md*(J>>le)+(F>>le)])<I.Wb),I.Ya[F]}function me(I,F,J,le){var fe=I.ab,ye=I.c*F,we=I.C;F=we+F;var Se=J,De=le;for(le=I.Ta,J=I.Ua;0<fe--;){var Ue=I.gc[fe],nt=we,Ct=F,Nt=Se,ft=De,Xt=(De=le,Se=J,Ue.Ea);switch(t(nt<Ct),t(Ct<=Ue.nc),Ue.hc){case 2:Jx(Nt,ft,(Ct-nt)*Xt,De,Se);break;case 0:var Pt=nt,at=Ct,lt=De,Vt=Se,Qt=(gr=Ue).Ea;Pt==0&&(vg(Nt,ft,null,null,1,lt,Vt),_t(Nt,ft+1,0,0,Qt-1,lt,Vt+1),ft+=Qt,Vt+=Qt,++Pt);for(var Ht=1<<gr.b,wr=Ht-1,vr=Ne(Qt,gr.b),Vr=gr.K,gr=gr.w+(Pt>>gr.b)*vr;Pt<at;){var Bn=Vr,Kn=gr,Cn=1;for(dp(Nt,ft,lt,Vt-Qt,1,lt,Vt);Cn<Qt;){var jn=(Cn&~wr)+Ht;jn>Qt&&(jn=Qt),(0,rd[Bn[Kn++]>>8&15])(Nt,ft+ +Cn,lt,Vt+Cn-Qt,jn-Cn,lt,Vt+Cn),Cn=jn}ft+=Qt,Vt+=Qt,++Pt&wr||(gr+=vr)}Ct!=Ue.nc&&n(De,Se-Xt,De,Se+(Ct-nt-1)*Xt,Xt);break;case 1:for(Xt=Nt,at=ft,Qt=(Nt=Ue.Ea)-(Vt=Nt&~(lt=(ft=1<<Ue.b)-1)),Pt=Ne(Nt,Ue.b),Ht=Ue.K,Ue=Ue.w+(nt>>Ue.b)*Pt;nt<Ct;){for(wr=Ht,vr=Ue,Vr=new ct,gr=at+Vt,Bn=at+Nt;at<gr;)Ke(wr[vr++],Vr),Gd(Vr,Xt,at,ft,De,Se),at+=ft,Se+=ft;at<Bn&&(Ke(wr[vr++],Vr),Gd(Vr,Xt,at,Qt,De,Se),at+=Qt,Se+=Qt),++nt&lt||(Ue+=Pt)}break;case 3:if(Nt==De&&ft==Se&&0<Ue.b){for(at=De,Nt=Xt=Se+(Ct-nt)*Xt-(Vt=(Ct-nt)*Ne(Ue.Ea,Ue.b)),ft=De,lt=Se,Pt=[],Vt=(Qt=Vt)-1;0<=Vt;--Vt)Pt[Vt]=ft[lt+Vt];for(Vt=Qt-1;0<=Vt;--Vt)at[Nt+Vt]=Pt[Vt];Go(Ue,nt,Ct,De,Xt,De,Se)}else Go(Ue,nt,Ct,Nt,ft,De,Se)}Se=le,De=J}De!=J&&n(le,J,Se,De,ye)}function Be(I,F){var J=I.V,le=I.Ba+I.c*I.C,fe=F-I.C;if(t(F<=I.l.o),t(16>=fe),0<fe){var ye=I.l,we=I.Ta,Se=I.Ua,De=ye.width;if(me(I,fe,J,le),fe=Se=[Se],t((J=I.C)<(le=F)),t(ye.v<ye.va),le>ye.o&&(le=ye.o),J<ye.j){var Ue=ye.j-J;J=ye.j,fe[0]+=Ue*De}if(J>=le?J=0:(fe[0]+=4*ye.v,ye.ka=J-ye.j,ye.U=ye.va-ye.v,ye.T=le-J,J=1),J){if(Se=Se[0],11>(J=I.ca).S){var nt=J.f.RGBA,Ct=(le=J.S,fe=ye.U,ye=ye.T,Ue=nt.eb,nt.A),Nt=ye;for(nt=nt.fb+I.Ma*nt.A;0<Nt--;){var ft=we,Xt=Se,Pt=fe,at=Ue,lt=nt;switch(le){case mi:Ii(ft,Xt,Pt,at,lt);break;case Vf:ti(ft,Xt,Pt,at,lt);break;case fp:ti(ft,Xt,Pt,at,lt),To(at,lt,0,Pt,1,0);break;case fc:Sl(ft,Xt,Pt,at,lt);break;case hp:Ye(ft,Xt,Pt,at,lt,1);break;case tu:Ye(ft,Xt,Pt,at,lt,1),To(at,lt,0,Pt,1,0);break;case xh:Ye(ft,Xt,Pt,at,lt,0);break;case id:Ye(ft,Xt,Pt,at,lt,0),To(at,lt,1,Pt,1,0);break;case sd:Yd(ft,Xt,Pt,at,lt);break;case qf:Yd(ft,Xt,Pt,at,lt),kn(at,lt,Pt,1,0);break;case e0:Zi(ft,Xt,Pt,at,lt);break;default:t(0)}Se+=De,nt+=Ct}I.Ma+=ye}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=J.height)}}I.C=F,t(I.C<=I.i)}function Ae(I){var F;if(0<I.ua)return 0;for(F=0;F<I.Wb;++F){var J=I.Ya[F].G,le=I.Ya[F].H;if(0<J[1][le[1]+0].g||0<J[2][le[2]+0].g||0<J[3][le[3]+0].g)return 0}return 1}function ke(I,F,J,le,fe,ye){if(I.Z!=0){var we=I.qd,Se=I.rd;for(t(pc[I.Z]!=null);F<J;++F)pc[I.Z](we,Se,le,fe,le,fe,ye),we=le,Se=fe,fe+=ye;I.qd=we,I.rd=Se}}function Me(I,F){var J=I.l.ma,le=J.Z==0||J.Z==1?I.l.j:I.C;if(le=I.C<le?le:I.C,t(F<=I.l.o),F>le){var fe=I.l.width,ye=J.ca,we=J.tb+fe*le,Se=I.V,De=I.Ba+I.c*le,Ue=I.gc;t(I.ab==1),t(Ue[0].hc==3),Wd(Ue[0],le,F,Se,De,ye,we),ke(J,le,F,ye,we,fe)}I.C=I.Ma=F}function $e(I,F,J,le,fe,ye,we){var Se=I.$/le,De=I.$%le,Ue=I.m,nt=I.s,Ct=J+I.$,Nt=Ct;fe=J+le*fe;var ft=J+le*ye,Xt=280+nt.ua,Pt=I.Pb?Se:16777216,at=0<nt.ua?nt.Wa:null,lt=nt.wc,Vt=Ct<ft?ur(nt,De,Se):null;t(I.C<ye),t(ft<=fe);var Qt=!1;e:for(;;){for(;Qt||Ct<ft;){var Ht=0;if(Se>=Pt){var wr=Ct-J;t((Pt=I).Pb),Pt.wd=Pt.m,Pt.xd=wr,0<Pt.s.ua&&de(Pt.s.Wa,Pt.s.vb),Pt=Se+S1}if(De&lt||(Vt=ur(nt,De,Se)),t(Vt!=null),Vt.Qb&&(F[Ct]=Vt.qb,Qt=!0),!Qt)if(te(Ue),Vt.jc){Ht=Ue,wr=F;var vr=Ct,Vr=Vt.pd[V(Ht)&ks-1];t(Vt.jc),256>Vr.g?(ee(Ht,Ht.u+Vr.g),wr[vr]=Vr.value,Ht=0):(ee(Ht,Ht.u+Vr.g-256),t(256<=Vr.value),Ht=Vr.value),Ht==0&&(Qt=!0)}else Ht=yr(Vt.G[0],Vt.H[0],Ue);if(Ue.h)break;if(Qt||256>Ht){if(!Qt)if(Vt.nd)F[Ct]=(Vt.qb|Ht<<8)>>>0;else{if(te(Ue),Qt=yr(Vt.G[1],Vt.H[1],Ue),te(Ue),wr=yr(Vt.G[2],Vt.H[2],Ue),vr=yr(Vt.G[3],Vt.H[3],Ue),Ue.h)break;F[Ct]=(vr<<24|Qt<<16|Ht<<8|wr)>>>0}if(Qt=!1,++Ct,++De>=le&&(De=0,++Se,we!=null&&Se<=ye&&!(Se%16)&&we(I,Se),at!=null))for(;Nt<Ct;)Ht=F[Nt++],at.X[(506832829*Ht&4294967295)>>>at.Mb]=Ht}else if(280>Ht){if(Ht=er(Ht-256,Ue),wr=yr(Vt.G[4],Vt.H[4],Ue),te(Ue),wr=fr(le,wr=er(wr,Ue)),Ue.h)break;if(Ct-J<wr||fe-Ct<Ht)break e;for(vr=0;vr<Ht;++vr)F[Ct+vr]=F[Ct+vr-wr];for(Ct+=Ht,De+=Ht;De>=le;)De-=le,++Se,we!=null&&Se<=ye&&!(Se%16)&&we(I,Se);if(t(Ct<=fe),De&lt&&(Vt=ur(nt,De,Se)),at!=null)for(;Nt<Ct;)Ht=F[Nt++],at.X[(506832829*Ht&4294967295)>>>at.Mb]=Ht}else{if(!(Ht<Xt))break e;for(Qt=Ht-280,t(at!=null);Nt<Ct;)Ht=F[Nt++],at.X[(506832829*Ht&4294967295)>>>at.Mb]=Ht;Ht=Ct,t(!(Qt>>>(wr=at).Xa)),F[Ht]=wr.X[Qt],Qt=!0}Qt||t(Ue.h==W(Ue))}if(I.Pb&&Ue.h&&Ct<fe)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&de(I.s.vb,I.s.Wa);else{if(Ue.h)break e;we?.(I,Se>ye?ye:Se),I.a=0,I.$=Ct-J}return 1}return I.a=3,0}function pt(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var F=I.Wa;F!=null&&(F.X=null),I.vb=null,t(I!=null)}function jt(){var I=new xg;return I==null?null:(I.a=0,I.xb=zf,Le("Predictor","VP8LPredictors"),Le("Predictor","VP8LPredictors_C"),Le("PredictorAdd","VP8LPredictorsAdd"),Le("PredictorAdd","VP8LPredictorsAdd_C"),Jx=Wt,Gd=ge,Ii=xe,ti=Ie,Yd=Ze,Zi=Ft,Sl=Qe,T.VP8LMapColor32b=qs,T.VP8LMapColor8b=up,I)}function ot(I,F,J,le,fe){var ye=1,we=[I],Se=[F],De=le.m,Ue=le.s,nt=null,Ct=0;e:for(;;){if(J)for(;ye&&K(De,1);){var Nt=we,ft=Se,Xt=le,Pt=1,at=Xt.m,lt=Xt.gc[Xt.ab],Vt=K(at,2);if(Xt.Oc&1<<Vt)ye=0;else{switch(Xt.Oc|=1<<Vt,lt.hc=Vt,lt.Ea=Nt[0],lt.nc=ft[0],lt.K=[null],++Xt.ab,t(4>=Xt.ab),Vt){case 0:case 1:lt.b=K(at,3)+2,Pt=ot(Ne(lt.Ea,lt.b),Ne(lt.nc,lt.b),0,Xt,lt.K),lt.K=lt.K[0];break;case 3:var Qt,Ht=K(at,8)+1,wr=16<Ht?0:4<Ht?1:2<Ht?2:3;if(Nt[0]=Ne(lt.Ea,wr),lt.b=wr,Qt=Pt=ot(Ht,1,0,Xt,lt.K)){var vr,Vr=Ht,gr=lt,Bn=1<<(8>>gr.b),Kn=i(Bn);if(Kn==null)Qt=0;else{var Cn=gr.K[0],jn=gr.w;for(Kn[0]=gr.K[0][0],vr=1;vr<1*Vr;++vr)Kn[vr]=Fe(Cn[jn+vr],Kn[vr-1]);for(;vr<4*Bn;++vr)Kn[vr]=0;gr.K[0]=null,gr.K[0]=Kn,Qt=1}}Pt=Qt;break;case 2:break;default:t(0)}ye=Pt}}if(we=we[0],Se=Se[0],ye&&K(De,1)&&!(ye=1<=(Ct=K(De,4))&&11>=Ct)){le.a=3;break e}var ia;if(ia=ye)t:{var Xn,hn,ua,Gr=le,an=we,Ln=Se,Un=Ct,Ws=J,As=Gr.m,as=Gr.s,ss=[null],ps=1,Qo=0,Qn=gh[Un];r:for(;;){if(Ws&&K(As,1)){var xs=K(As,3)+2,_l=Ne(an,xs),su=Ne(Ln,xs),jh=_l*su;if(!ot(_l,su,0,Gr,ss))break r;for(ss=ss[0],as.xc=xs,Xn=0;Xn<jh;++Xn){var iu=ss[Xn]>>8&65535;ss[Xn]=iu,iu>=ps&&(ps=iu+1)}}if(As.h)break r;for(hn=0;5>hn;++hn){var Oa=Io[hn];!hn&&0<Un&&(Oa+=1<<Un),Qo<Oa&&(Qo=Oa)}var gp=o(ps*Qn,O),i0=ps,Oi=o(i0,z);if(Oi==null)var Ba=null;else t(65536>=i0),Ba=Oi;var Nh=i(Qo);if(Ba==null||Nh==null||gp==null){Gr.a=1;break r}var ou=gp;for(Xn=ua=0;Xn<ps;++Xn){var to=Ba[Xn],lu=to.G,ro=to.H,bp=0,Wf=1,o0=0;for(hn=0;5>hn;++hn){Oa=Io[hn],lu[hn]=ou,ro[hn]=ua,!hn&&0<Un&&(Oa+=1<<Un);a:{var yp,l0=Oa,jp=Gr,Gf=Nh,A1=ou,T1=ua,Np=0,hd=jp.m,sC=K(hd,1);if(s(Gf,0,0,l0),sC){var I1=K(hd,1)+1,P1=K(hd,1),jg=K(hd,P1==0?1:8);Gf[jg]=1,I1==2&&(Gf[jg=K(hd,8)]=1);var Yf=1}else{var Ng=i(19),wg=K(hd,4)+4;if(19<wg){jp.a=3;var wp=0;break a}for(yp=0;yp<wg;++yp)Ng[od[yp]]=K(hd,3);var c0=void 0,Kf=void 0,O1=jp,M1=Ng,fd=l0,Sp=Gf,d0=0,El=O1.m,Xf=8,Sg=o(128,O);n:for(;P(Sg,0,7,M1,19);){if(K(El,1)){var R1=2+2*K(El,3);if((c0=2+K(El,R1))>fd)break n}else c0=fd;for(Kf=0;Kf<fd&&c0--;){te(El);var Cg=Sg[0+(127&V(El))];ee(El,El.u+Cg.g);var wh=Cg.value;if(16>wh)Sp[Kf++]=wh,wh!=0&&(Xf=wh);else{var F1=wh==16,kg=wh-16,_g=Xo[kg],Eg=K(El,t0[kg])+_g;if(Kf+Eg>fd)break n;for(var L1=F1?Xf:0;0<Eg--;)Sp[Kf++]=L1}}d0=1;break n}d0||(O1.a=3),Yf=d0}(Yf=Yf&&!hd.h)&&(Np=P(A1,T1,8,Gf,l0)),Yf&&Np!=0?wp=Np:(jp.a=3,wp=0)}if(wp==0)break r;if(Wf&&vh[hn]==1&&(Wf=ou[ua].g==0),bp+=ou[ua].g,ua+=wp,3>=hn){var Sh,u0=Nh[0];for(Sh=1;Sh<Oa;++Sh)Nh[Sh]>u0&&(u0=Nh[Sh]);o0+=u0}}if(to.nd=Wf,to.Qb=0,Wf&&(to.qb=(lu[3][ro[3]+0].value<<24|lu[1][ro[1]+0].value<<16|lu[2][ro[2]+0].value)>>>0,bp==0&&256>lu[0][ro[0]+0].value&&(to.Qb=1,to.qb+=lu[0][ro[0]+0].value<<8)),to.jc=!to.Qb&&6>o0,to.jc){var Cp,md=to;for(Cp=0;Cp<ks;++Cp){var gc=Cp,pd=md.pd[gc],kp=md.G[0][md.H[0]+gc];256<=kp.value?(pd.g=kp.g+256,pd.value=kp.value):(pd.g=0,pd.value=0,gc>>=Yr(kp,8,pd),gc>>=Yr(md.G[1][md.H[1]+gc],16,pd),gc>>=Yr(md.G[2][md.H[2]+gc],0,pd),Yr(md.G[3][md.H[3]+gc],24,pd))}}}as.vc=ss,as.Wb=ps,as.Ya=Ba,as.yc=gp,ia=1;break t}ia=0}if(!(ye=ia)){le.a=3;break e}if(0<Ct){if(Ue.ua=1<<Ct,!je(Ue.Wa,Ct)){le.a=1,ye=0;break e}}else Ue.ua=0;var _p=le,Dg=we,B1=Se,Ag=_p.s,Tg=Ag.xc;if(_p.c=Dg,_p.i=B1,Ag.md=Ne(Dg,Tg),Ag.wc=Tg==0?-1:(1<<Tg)-1,J){le.xb=k1;break e}if((nt=i(we*Se))==null){le.a=1,ye=0;break e}ye=(ye=$e(le,nt,0,we,Se,Se,null))&&!De.h;break e}return ye?(fe!=null?fe[0]=nt:(t(nt==null),t(J)),le.$=0,J||pt(Ue)):pt(Ue),ye}function bt(I,F){var J=I.c*I.i,le=J+F+16*F;return t(I.c<=F),I.V=i(le),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+J+F,1)}function yt(I,F){var J=I.C,le=F-J,fe=I.V,ye=I.Ba+I.c*J;for(t(F<=I.l.o);0<le;){var we=16<le?16:le,Se=I.l.ma,De=I.l.width,Ue=De*we,nt=Se.ca,Ct=Se.tb+De*J,Nt=I.Ta,ft=I.Ua;me(I,we,fe,ye),ja(Nt,ft,nt,Ct,Ue),ke(Se,J,J+we,nt,Ct,De),le-=we,fe+=we*I.c,J+=we}t(J==F),I.C=I.Ma=F}function Yt(){this.ub=this.yd=this.td=this.Rb=0}function sr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ir(){this.Yb=function(){var I=[];return function F(J,le,fe){for(var ye=fe[le],we=0;we<ye&&(J.push(fe.length>le+1?[]:0),!(fe.length<le+1));we++)F(J[we],le+1,fe)}(I,0,[3,11]),I}()}function Ve(){this.jb=i(3),this.Wc=l([4,8],ir),this.Xc=l([4,17],ir)}function dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function or(){this.ld=this.La=this.dd=this.tc=0}function $r(){this.Na=this.la=0}function gn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vt(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function br(){this.uc=this.M=this.Nb=0,this.wa=Array(new or),this.Y=0,this.ya=Array(new vt),this.aa=0,this.l=new Qr}function hr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function qr(){this.cb=this.a=0,this.sc="",this.m=new ue,this.Od=new Yt,this.Kc=new sr,this.ed=new dr,this.Qa=new mr,this.Ic=this.$c=this.Aa=0,this.D=new br,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ue),this.ia=0,this.pb=o(4,gn),this.Pa=new Ve,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hr),this.Hd=0,this.rb=Array(new $r),this.sb=0,this.wa=Array(new or),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vt),this.L=this.aa=0,this.gd=l([4,2],or),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function da(){var I=new qr;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,_s||(_s=ya)),I}function Fn(I,F,J){return I.a==0&&(I.a=F,I.sc=J,I.cb=0),0}function Ia(I,F,J){return 3<=J&&I[F+0]==157&&I[F+1]==1&&I[F+2]==42}function Ti(I,F){if(I==null)return 0;if(I.a=0,I.sc="OK",F==null)return Fn(I,2,"null VP8Io passed to VP8GetHeaders()");var J=F.data,le=F.w,fe=F.ha;if(4>fe)return Fn(I,7,"Truncated header.");var ye=J[le+0]|J[le+1]<<8|J[le+2]<<16,we=I.Od;if(we.Rb=!(1&ye),we.td=ye>>1&7,we.yd=ye>>4&1,we.ub=ye>>5,3<we.td)return Fn(I,3,"Incorrect keyframe parameters.");if(!we.yd)return Fn(I,4,"Frame not displayable.");le+=3,fe-=3;var Se=I.Kc;if(we.Rb){if(7>fe)return Fn(I,7,"cannot parse picture header");if(!Ia(J,le,fe))return Fn(I,3,"Bad code word");Se.c=16383&(J[le+4]<<8|J[le+3]),Se.Td=J[le+4]>>6,Se.i=16383&(J[le+6]<<8|J[le+5]),Se.Ud=J[le+6]>>6,le+=7,fe-=7,I.za=Se.c+15>>4,I.Ub=Se.i+15>>4,F.width=Se.c,F.height=Se.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,s((ye=I.Pa).jb,0,255,ye.jb.length),t((ye=I.Qa)!=null),ye.Cb=0,ye.Bb=0,ye.Fb=1,s(ye.Zb,0,0,ye.Zb.length),s(ye.Lb,0,0,ye.Lb)}if(we.ub>fe)return Fn(I,7,"bad partition length");re(ye=I.m,J,le,we.ub),le+=we.ub,fe-=we.ub,we.Rb&&(Se.Ld=se(ye),Se.Kd=se(ye)),Se=I.Qa;var De,Ue=I.Pa;if(t(ye!=null),t(Se!=null),Se.Cb=se(ye),Se.Cb){if(Se.Bb=se(ye),se(ye)){for(Se.Fb=se(ye),De=0;4>De;++De)Se.Zb[De]=se(ye)?X(ye,7):0;for(De=0;4>De;++De)Se.Lb[De]=se(ye)?X(ye,6):0}if(Se.Bb)for(De=0;3>De;++De)Ue.jb[De]=se(ye)?U(ye,8):255}else Se.Bb=0;if(ye.Ka)return Fn(I,3,"cannot parse segment header");if((Se=I.ed).zd=se(ye),Se.Tb=U(ye,6),Se.wb=U(ye,3),Se.Pc=se(ye),Se.Pc&&se(ye)){for(Ue=0;4>Ue;++Ue)se(ye)&&(Se.vd[Ue]=X(ye,6));for(Ue=0;4>Ue;++Ue)se(ye)&&(Se.od[Ue]=X(ye,6))}if(I.L=Se.Tb==0?0:Se.zd?1:2,ye.Ka)return Fn(I,3,"cannot parse filter header");var nt=fe;if(fe=De=le,le=De+nt,Se=nt,I.Xb=(1<<U(I.m,2))-1,nt<3*(Ue=I.Xb))J=7;else{for(De+=3*Ue,Se-=3*Ue,nt=0;nt<Ue;++nt){var Ct=J[fe+0]|J[fe+1]<<8|J[fe+2]<<16;Ct>Se&&(Ct=Se),re(I.Jc[+nt],J,De,Ct),De+=Ct,Se-=Ct,fe+=3}re(I.Jc[+Ue],J,De,Se),J=De<le?0:5}if(J!=0)return Fn(I,J,"cannot parse partitions");for(J=U(De=I.m,7),fe=se(De)?X(De,4):0,le=se(De)?X(De,4):0,Se=se(De)?X(De,4):0,Ue=se(De)?X(De,4):0,De=se(De)?X(De,4):0,nt=I.Qa,Ct=0;4>Ct;++Ct){if(nt.Cb){var Nt=nt.Zb[Ct];nt.Fb||(Nt+=J)}else{if(0<Ct){I.pb[Ct]=I.pb[0];continue}Nt=J}var ft=I.pb[Ct];ft.Sc[0]=mp[Ao(Nt+fe,127)],ft.Sc[1]=pp[Ao(Nt+0,127)],ft.Eb[0]=2*mp[Ao(Nt+le,127)],ft.Eb[1]=101581*pp[Ao(Nt+Se,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=mp[Ao(Nt+Ue,117)],ft.Qc[1]=pp[Ao(Nt+De,127)],ft.lc=Nt+De}if(!we.Rb)return Fn(I,4,"Not a key frame.");for(se(ye),we=I.Pa,J=0;4>J;++J){for(fe=0;8>fe;++fe)for(le=0;3>le;++le)for(Se=0;11>Se;++Se)Ue=oe(ye,bh[J][fe][le][Se])?U(ye,8):mc[J][fe][le][Se],we.Wc[J][fe].Yb[le][Se]=Ue;for(fe=0;17>fe;++fe)we.Xc[J][fe]=we.Wc[J][C1[fe]]}return I.kc=se(ye),I.kc&&(I.Bd=U(ye,8)),I.cb=1}function ya(I,F,J,le,fe,ye,we){var Se=F[fe].Yb[J];for(J=0;16>fe;++fe){if(!oe(I,Se[J+0]))return fe;for(;!oe(I,Se[J+1]);)if(Se=F[++fe].Yb[0],J=0,fe==16)return 16;var De=F[fe+1].Yb;if(oe(I,Se[J+2])){var Ue=I,nt=0;if(oe(Ue,(Nt=Se)[(Ct=J)+3]))if(oe(Ue,Nt[Ct+6])){for(Se=0,Ct=2*(nt=oe(Ue,Nt[Ct+8]))+(Nt=oe(Ue,Nt[Ct+9+nt])),nt=0,Nt=Ya[Ct];Nt[Se];++Se)nt+=nt+oe(Ue,Nt[Se]);nt+=3+(8<<Ct)}else oe(Ue,Nt[Ct+7])?(nt=7+2*oe(Ue,165),nt+=oe(Ue,145)):nt=5+oe(Ue,159);else nt=oe(Ue,Nt[Ct+4])?3+oe(Ue,Nt[Ct+5]):2;Se=De[2]}else nt=1,Se=De[1];De=we+zn[fe],0>(Ue=I).b&&ne(Ue);var Ct,Nt=Ue.b,ft=(Ct=Ue.Ca>>1)-(Ue.I>>Nt)>>31;--Ue.b,Ue.Ca+=ft,Ue.Ca|=1,Ue.I-=(Ct+1&ft)<<Nt,ye[De]=((nt^ft)-ft)*le[(0<fe)+0]}return 16}function ka(I){var F=I.rb[I.sb-1];F.la=0,F.Na=0,s(I.zc,0,0,I.zc.length),I.ja=0}function pl(I,F){if(I==null)return 0;if(F==null)return Fn(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!Ti(I,F))return 0;if(t(I.cb),F.ac==null||F.ac(F)){F.ob&&(I.L=0);var J=ud[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=F.v-J>>4,I.zb=F.j-J>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=F.o+15+J>>4,I.Hb=F.va+15+J>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var le=I.ed;for(J=0;4>J;++J){var fe;if(I.Qa.Cb){var ye=I.Qa.Lb[J];I.Qa.Fb||(ye+=le.Tb)}else ye=le.Tb;for(fe=0;1>=fe;++fe){var we=I.gd[J][fe],Se=ye;if(le.Pc&&(Se+=le.vd[0],fe&&(Se+=le.od[0])),0<(Se=0>Se?0:63<Se?63:Se)){var De=Se;0<le.wb&&(De=4<le.wb?De>>2:De>>1)>9-le.wb&&(De=9-le.wb),1>De&&(De=1),we.dd=De,we.tc=2*Se+De,we.ld=40<=Se?2:15<=Se?1:0}else we.tc=0;we.La=fe}}}J=0}else Fn(I,6,"Frame setup failed"),J=I.a;if(J=J==0){if(J){I.$c=0,0<I.Aa||(I.Ic=E1);e:{J=I.Ic,le=4*(De=I.za);var Ue=32*De,nt=De+1,Ct=0<I.L?De*(0<I.Aa?2:1):0,Nt=(I.Aa==2?2:1)*De;if((we=le+832+(fe=3*(16*J+ud[I.L])/2*Ue)+(ye=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=we)J=0;else{if(we>I.Vb){if(I.Vb=0,I.Ec=i(we),I.Fc=0,I.Ec==null){J=Fn(I,1,"no memory during frame initialization.");break e}I.Vb=we}we=I.Ec,Se=I.Fc,I.Ac=we,I.Bc=Se,Se+=le,I.Gd=o(Ue,hr),I.Hd=0,I.rb=o(nt+1,$r),I.sb=1,I.wa=Ct?o(Ct,or):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=De),t(!0),I.oc=we,I.pc=Se,Se+=832,I.ya=o(Nt,vt),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=De),I.R=16*De,I.B=8*De,De=(Ue=ud[I.L])*I.R,Ue=Ue/2*I.B,I.sa=we,I.ta=Se+De,I.qa=I.sa,I.ra=I.ta+16*J*I.R+Ue,I.Ha=I.qa,I.Ia=I.ra+8*J*I.B+Ue,I.$c=0,Se+=fe,I.mb=ye?we:null,I.nb=ye?Se:null,t(Se+ye<=I.Fc+I.Vb),ka(I),s(I.Ac,I.Bc,0,le),J=1}}if(J){if(F.ka=0,F.y=I.sa,F.O=I.ta,F.f=I.qa,F.N=I.ra,F.ea=I.Ha,F.Vd=I.Ia,F.fa=I.R,F.Rc=I.B,F.F=null,F.J=0,!ad){for(J=-255;255>=J;++J)ns[255+J]=0>J?-J:J;for(J=-1020;1020>=J;++J)Yo[1020+J]=-128>J?-128:127<J?127:J;for(J=-112;112>=J;++J)Zd[112+J]=-16>J?-16:15<J?15:J;for(J=-255;510>=J;++J)eu[255+J]=0>J?0:255<J?255:J;ad=1}uc=Vo,Cl=nh,kl=xl,ms=kf,eo=ah,Wa=Qi,hh=ih,hc=oh,Uf=pg,Kd=sp,Xd=mg,Qd=Tf,fh=If,$f=Qx,Jd=$d,nd=Do,mh=dc,Ga=fg,Pi[0]=rt,Pi[1]=Qc,Pi[2]=sh,Pi[3]=_f,Pi[4]=lr,Pi[5]=_r,Pi[6]=Zt,Pi[7]=Cr,Pi[8]=qo,Pi[9]=_a,cd[0]=ic,cd[1]=Jc,cd[2]=gl,cd[3]=sc,cd[4]=fs,cd[5]=oc,cd[6]=yl,Po[0]=Ho,Po[1]=vl,Po[2]=Ef,Po[3]=lc,Po[4]=fi,Po[5]=Cs,Po[6]=cc,J=1}else J=0}J&&(J=function(ft,Xt){for(ft.M=0;ft.M<ft.Va;++ft.M){var Pt,at=ft.Jc[ft.M&ft.Xb],lt=ft.m,Vt=ft;for(Pt=0;Pt<Vt.za;++Pt){var Qt=lt,Ht=Vt,wr=Ht.Ac,vr=Ht.Bc+4*Pt,Vr=Ht.zc,gr=Ht.ya[Ht.aa+Pt];if(Ht.Qa.Bb?gr.$b=oe(Qt,Ht.Pa.jb[0])?2+oe(Qt,Ht.Pa.jb[2]):oe(Qt,Ht.Pa.jb[1]):gr.$b=0,Ht.kc&&(gr.Ad=oe(Qt,Ht.Bd)),gr.Za=!oe(Qt,145)+0,gr.Za){var Bn=gr.Ob,Kn=0;for(Ht=0;4>Ht;++Ht){var Cn,jn=Vr[0+Ht];for(Cn=0;4>Cn;++Cn){jn=gg[wr[vr+Cn]][jn];for(var ia=ru[oe(Qt,jn[0])];0<ia;)ia=ru[2*ia+oe(Qt,jn[ia])];jn=-ia,wr[vr+Cn]=jn}n(Bn,Kn,wr,vr,4),Kn+=4,Vr[0+Ht]=jn}}else jn=oe(Qt,156)?oe(Qt,128)?1:3:oe(Qt,163)?2:0,gr.Ob[0]=jn,s(wr,vr,jn,4),s(Vr,0,jn,4);gr.Dd=oe(Qt,142)?oe(Qt,114)?oe(Qt,183)?1:3:2:0}if(Vt.m.Ka)return Fn(ft,7,"Premature end-of-partition0 encountered.");for(;ft.ja<ft.za;++ft.ja){if(Vt=at,Qt=(lt=ft).rb[lt.sb-1],wr=lt.rb[lt.sb+lt.ja],Pt=lt.ya[lt.aa+lt.ja],vr=lt.kc?Pt.Ad:0)Qt.la=wr.la=0,Pt.Za||(Qt.Na=wr.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var Xn,hn;if(Qt=wr,wr=Vt,vr=lt.Pa.Xc,Vr=lt.ya[lt.aa+lt.ja],gr=lt.pb[Vr.$b],Ht=Vr.ad,Bn=0,Kn=lt.rb[lt.sb-1],jn=Cn=0,s(Ht,Bn,0,384),Vr.Za)var ua=0,Gr=vr[3];else{ia=i(16);var an=Qt.Na+Kn.Na;if(an=_s(wr,vr[1],an,gr.Eb,0,ia,0),Qt.Na=Kn.Na=(0<an)+0,1<an)uc(ia,0,Ht,Bn);else{var Ln=ia[0]+3>>3;for(ia=0;256>ia;ia+=16)Ht[Bn+ia]=Ln}ua=1,Gr=vr[0]}var Un=15&Qt.la,Ws=15&Kn.la;for(ia=0;4>ia;++ia){var As=1&Ws;for(Ln=hn=0;4>Ln;++Ln)Un=Un>>1|(As=(an=_s(wr,Gr,an=As+(1&Un),gr.Sc,ua,Ht,Bn))>ua)<<7,hn=hn<<2|(3<an?3:1<an?2:Ht[Bn+0]!=0),Bn+=16;Un>>=4,Ws=Ws>>1|As<<7,Cn=(Cn<<8|hn)>>>0}for(Gr=Un,ua=Ws>>4,Xn=0;4>Xn;Xn+=2){for(hn=0,Un=Qt.la>>4+Xn,Ws=Kn.la>>4+Xn,ia=0;2>ia;++ia){for(As=1&Ws,Ln=0;2>Ln;++Ln)an=As+(1&Un),Un=Un>>1|(As=0<(an=_s(wr,vr[2],an,gr.Qc,0,Ht,Bn)))<<3,hn=hn<<2|(3<an?3:1<an?2:Ht[Bn+0]!=0),Bn+=16;Un>>=2,Ws=Ws>>1|As<<5}jn|=hn<<4*Xn,Gr|=Un<<4<<Xn,ua|=(240&Ws)<<Xn}Qt.la=Gr,Kn.la=ua,Vr.Hc=Cn,Vr.Gc=jn,Vr.ia=43690&jn?0:gr.ia,vr=!(Cn|jn)}if(0<lt.L&&(lt.wa[lt.Y+lt.ja]=lt.gd[Pt.$b][Pt.Za],lt.wa[lt.Y+lt.ja].La|=!vr),Vt.Ka)return Fn(ft,7,"Premature end-of-file encountered.")}if(ka(ft),lt=Xt,Vt=1,Pt=(at=ft).D,Qt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)e:{if(Pt.M=at.M,Pt.uc=Qt,td(at,Pt),Vt=1,Pt=(hn=at.D).Nb,Qt=(jn=ud[at.L])*at.R,wr=jn/2*at.B,ia=16*Pt*at.R,Ln=8*Pt*at.B,vr=at.sa,Vr=at.ta-Qt+ia,gr=at.qa,Ht=at.ra-wr+Ln,Bn=at.Ha,Kn=at.Ia-wr+Ln,Ws=(Un=hn.M)==0,Cn=Un>=at.Va-1,at.Aa==2&&td(at,hn),hn.uc)for(As=(an=at).D.M,t(an.D.uc),hn=an.yb;hn<an.Hb;++hn){ua=hn,Gr=As;var as=(ss=(Oa=an).D).Nb;Xn=Oa.R;var ss=ss.wa[ss.Y+ua],ps=Oa.sa,Qo=Oa.ta+16*as*Xn+16*ua,Qn=ss.dd,xs=ss.tc;if(xs!=0)if(t(3<=xs),Oa.L==1)0<ua&&nd(ps,Qo,Xn,xs+4),ss.La&&Ga(ps,Qo,Xn,xs),0<Gr&&Jd(ps,Qo,Xn,xs+4),ss.La&&mh(ps,Qo,Xn,xs);else{var _l=Oa.B,su=Oa.qa,jh=Oa.ra+8*as*_l+8*ua,iu=Oa.Ha,Oa=Oa.Ia+8*as*_l+8*ua;as=ss.ld,0<ua&&(hc(ps,Qo,Xn,xs+4,Qn,as),Kd(su,jh,iu,Oa,_l,xs+4,Qn,as)),ss.La&&(Qd(ps,Qo,Xn,xs,Qn,as),$f(su,jh,iu,Oa,_l,xs,Qn,as)),0<Gr&&(hh(ps,Qo,Xn,xs+4,Qn,as),Uf(su,jh,iu,Oa,_l,xs+4,Qn,as)),ss.La&&(Xd(ps,Qo,Xn,xs,Qn,as),fh(su,jh,iu,Oa,_l,xs,Qn,as))}}if(at.ia&&alert("todo:DitherRow"),lt.put!=null){if(hn=16*Un,Un=16*(Un+1),Ws?(lt.y=at.sa,lt.O=at.ta+ia,lt.f=at.qa,lt.N=at.ra+Ln,lt.ea=at.Ha,lt.W=at.Ia+Ln):(hn-=jn,lt.y=vr,lt.O=Vr,lt.f=gr,lt.N=Ht,lt.ea=Bn,lt.W=Kn),Cn||(Un-=jn),Un>lt.o&&(Un=lt.o),lt.F=null,lt.J=null,at.Fa!=null&&0<at.Fa.length&&hn<Un&&(lt.J=lp(at,lt,hn,Un-hn),lt.F=at.mb,lt.F==null&&lt.F.length==0)){Vt=Fn(at,3,"Could not decode alpha data.");break e}hn<lt.j&&(jn=lt.j-hn,hn=lt.j,t(!(1&jn)),lt.O+=at.R*jn,lt.N+=at.B*(jn>>1),lt.W+=at.B*(jn>>1),lt.F!=null&&(lt.J+=lt.width*jn)),hn<Un&&(lt.O+=lt.v,lt.N+=lt.v>>1,lt.W+=lt.v>>1,lt.F!=null&&(lt.J+=lt.v),lt.ka=hn-lt.j,lt.U=lt.va-lt.v,lt.T=Un-hn,Vt=lt.put(lt))}Pt+1!=at.Ic||Cn||(n(at.sa,at.ta-Qt,vr,Vr+16*at.R,Qt),n(at.qa,at.ra-wr,gr,Ht+8*at.B,wr),n(at.Ha,at.Ia-wr,Bn,Kn+8*at.B,wr))}if(!Vt)return Fn(ft,6,"Output aborted.")}return 1}(I,F)),F.bc!=null&&F.bc(F),J&=1}return J?(I.cb=0,J):0}function es(I,F,J,le,fe){fe=I[F+J+32*le]+(fe>>3),I[F+J+32*le]=-256&fe?0>fe?0:255:fe}function $o(I,F,J,le,fe,ye){es(I,F,0,J,le+fe),es(I,F,1,J,le+ye),es(I,F,2,J,le-ye),es(I,F,3,J,le-fe)}function Or(I){return(20091*I>>16)+I}function $s(I,F,J,le){var fe,ye=0,we=i(16);for(fe=0;4>fe;++fe){var Se=I[F+0]+I[F+8],De=I[F+0]-I[F+8],Ue=(35468*I[F+4]>>16)-Or(I[F+12]),nt=Or(I[F+4])+(35468*I[F+12]>>16);we[ye+0]=Se+nt,we[ye+1]=De+Ue,we[ye+2]=De-Ue,we[ye+3]=Se-nt,ye+=4,F++}for(fe=ye=0;4>fe;++fe)Se=(I=we[ye+0]+4)+we[ye+8],De=I-we[ye+8],Ue=(35468*we[ye+4]>>16)-Or(we[ye+12]),es(J,le,0,0,Se+(nt=Or(we[ye+4])+(35468*we[ye+12]>>16))),es(J,le,1,0,De+Ue),es(J,le,2,0,De-Ue),es(J,le,3,0,Se-nt),ye++,le+=32}function Qi(I,F,J,le){var fe=I[F+0]+4,ye=35468*I[F+4]>>16,we=Or(I[F+4]),Se=35468*I[F+1]>>16;$o(J,le,0,fe+we,I=Or(I[F+1]),Se),$o(J,le,1,fe+ye,I,Se),$o(J,le,2,fe-ye,I,Se),$o(J,le,3,fe-we,I,Se)}function nh(I,F,J,le,fe){$s(I,F,J,le),fe&&$s(I,F+16,J,le+4)}function xl(I,F,J,le){Cl(I,F+0,J,le,1),Cl(I,F+32,J,le+128,1)}function kf(I,F,J,le){var fe;for(I=I[F+0]+4,fe=0;4>fe;++fe)for(F=0;4>F;++F)es(J,le,F,fe,I)}function ah(I,F,J,le){I[F+0]&&ms(I,F+0,J,le),I[F+16]&&ms(I,F+16,J,le+4),I[F+32]&&ms(I,F+32,J,le+128),I[F+48]&&ms(I,F+48,J,le+128+4)}function Vo(I,F,J,le){var fe,ye=i(16);for(fe=0;4>fe;++fe){var we=I[F+0+fe]+I[F+12+fe],Se=I[F+4+fe]+I[F+8+fe],De=I[F+4+fe]-I[F+8+fe],Ue=I[F+0+fe]-I[F+12+fe];ye[0+fe]=we+Se,ye[8+fe]=we-Se,ye[4+fe]=Ue+De,ye[12+fe]=Ue-De}for(fe=0;4>fe;++fe)we=(I=ye[0+4*fe]+3)+ye[3+4*fe],Se=ye[1+4*fe]+ye[2+4*fe],De=ye[1+4*fe]-ye[2+4*fe],Ue=I-ye[3+4*fe],J[le+0]=we+Se>>3,J[le+16]=Ue+De>>3,J[le+32]=we-Se>>3,J[le+48]=Ue-De>>3,le+=64}function ac(I,F,J){var le,fe=F-32,ye=zs,we=255-I[fe-1];for(le=0;le<J;++le){var Se,De=ye,Ue=we+I[F-1];for(Se=0;Se<J;++Se)I[F+Se]=De[Ue+I[fe+Se]];F+=32}}function Qc(I,F){ac(I,F,4)}function vl(I,F){ac(I,F,8)}function Jc(I,F){ac(I,F,16)}function gl(I,F){var J;for(J=0;16>J;++J)n(I,F+32*J,I,F-32,16)}function sc(I,F){var J;for(J=16;0<J;--J)s(I,F,I[F-1],16),F+=32}function bl(I,F,J){var le;for(le=0;16>le;++le)s(F,J+32*le,I,16)}function ic(I,F){var J,le=16;for(J=0;16>J;++J)le+=I[F-1+32*J]+I[F+J-32];bl(le>>5,I,F)}function fs(I,F){var J,le=8;for(J=0;16>J;++J)le+=I[F-1+32*J];bl(le>>4,I,F)}function oc(I,F){var J,le=8;for(J=0;16>J;++J)le+=I[F+J-32];bl(le>>4,I,F)}function yl(I,F){bl(128,I,F)}function Zr(I,F,J){return I+2*F+J+2>>2}function sh(I,F){var J,le=F-32;for(le=new Uint8Array([Zr(I[le-1],I[le+0],I[le+1]),Zr(I[le+0],I[le+1],I[le+2]),Zr(I[le+1],I[le+2],I[le+3]),Zr(I[le+2],I[le+3],I[le+4])]),J=0;4>J;++J)n(I,F+32*J,le,0,le.length)}function _f(I,F){var J=I[F-1],le=I[F-1+32],fe=I[F-1+64],ye=I[F-1+96];G(I,F+0,16843009*Zr(I[F-1-32],J,le)),G(I,F+32,16843009*Zr(J,le,fe)),G(I,F+64,16843009*Zr(le,fe,ye)),G(I,F+96,16843009*Zr(fe,ye,ye))}function rt(I,F){var J,le=4;for(J=0;4>J;++J)le+=I[F+J-32]+I[F-1+32*J];for(le>>=3,J=0;4>J;++J)s(I,F+32*J,le,4)}function lr(I,F){var J=I[F-1+0],le=I[F-1+32],fe=I[F-1+64],ye=I[F-1-32],we=I[F+0-32],Se=I[F+1-32],De=I[F+2-32],Ue=I[F+3-32];I[F+0+96]=Zr(le,fe,I[F-1+96]),I[F+1+96]=I[F+0+64]=Zr(J,le,fe),I[F+2+96]=I[F+1+64]=I[F+0+32]=Zr(ye,J,le),I[F+3+96]=I[F+2+64]=I[F+1+32]=I[F+0+0]=Zr(we,ye,J),I[F+3+64]=I[F+2+32]=I[F+1+0]=Zr(Se,we,ye),I[F+3+32]=I[F+2+0]=Zr(De,Se,we),I[F+3+0]=Zr(Ue,De,Se)}function Zt(I,F){var J=I[F+1-32],le=I[F+2-32],fe=I[F+3-32],ye=I[F+4-32],we=I[F+5-32],Se=I[F+6-32],De=I[F+7-32];I[F+0+0]=Zr(I[F+0-32],J,le),I[F+1+0]=I[F+0+32]=Zr(J,le,fe),I[F+2+0]=I[F+1+32]=I[F+0+64]=Zr(le,fe,ye),I[F+3+0]=I[F+2+32]=I[F+1+64]=I[F+0+96]=Zr(fe,ye,we),I[F+3+32]=I[F+2+64]=I[F+1+96]=Zr(ye,we,Se),I[F+3+64]=I[F+2+96]=Zr(we,Se,De),I[F+3+96]=Zr(Se,De,De)}function _r(I,F){var J=I[F-1+0],le=I[F-1+32],fe=I[F-1+64],ye=I[F-1-32],we=I[F+0-32],Se=I[F+1-32],De=I[F+2-32],Ue=I[F+3-32];I[F+0+0]=I[F+1+64]=ye+we+1>>1,I[F+1+0]=I[F+2+64]=we+Se+1>>1,I[F+2+0]=I[F+3+64]=Se+De+1>>1,I[F+3+0]=De+Ue+1>>1,I[F+0+96]=Zr(fe,le,J),I[F+0+64]=Zr(le,J,ye),I[F+0+32]=I[F+1+96]=Zr(J,ye,we),I[F+1+32]=I[F+2+96]=Zr(ye,we,Se),I[F+2+32]=I[F+3+96]=Zr(we,Se,De),I[F+3+32]=Zr(Se,De,Ue)}function Cr(I,F){var J=I[F+0-32],le=I[F+1-32],fe=I[F+2-32],ye=I[F+3-32],we=I[F+4-32],Se=I[F+5-32],De=I[F+6-32],Ue=I[F+7-32];I[F+0+0]=J+le+1>>1,I[F+1+0]=I[F+0+64]=le+fe+1>>1,I[F+2+0]=I[F+1+64]=fe+ye+1>>1,I[F+3+0]=I[F+2+64]=ye+we+1>>1,I[F+0+32]=Zr(J,le,fe),I[F+1+32]=I[F+0+96]=Zr(le,fe,ye),I[F+2+32]=I[F+1+96]=Zr(fe,ye,we),I[F+3+32]=I[F+2+96]=Zr(ye,we,Se),I[F+3+64]=Zr(we,Se,De),I[F+3+96]=Zr(Se,De,Ue)}function _a(I,F){var J=I[F-1+0],le=I[F-1+32],fe=I[F-1+64],ye=I[F-1+96];I[F+0+0]=J+le+1>>1,I[F+2+0]=I[F+0+32]=le+fe+1>>1,I[F+2+32]=I[F+0+64]=fe+ye+1>>1,I[F+1+0]=Zr(J,le,fe),I[F+3+0]=I[F+1+32]=Zr(le,fe,ye),I[F+3+32]=I[F+1+64]=Zr(fe,ye,ye),I[F+3+64]=I[F+2+64]=I[F+0+96]=I[F+1+96]=I[F+2+96]=I[F+3+96]=ye}function qo(I,F){var J=I[F-1+0],le=I[F-1+32],fe=I[F-1+64],ye=I[F-1+96],we=I[F-1-32],Se=I[F+0-32],De=I[F+1-32],Ue=I[F+2-32];I[F+0+0]=I[F+2+32]=J+we+1>>1,I[F+0+32]=I[F+2+64]=le+J+1>>1,I[F+0+64]=I[F+2+96]=fe+le+1>>1,I[F+0+96]=ye+fe+1>>1,I[F+3+0]=Zr(Se,De,Ue),I[F+2+0]=Zr(we,Se,De),I[F+1+0]=I[F+3+32]=Zr(J,we,Se),I[F+1+32]=I[F+3+64]=Zr(le,J,we),I[F+1+64]=I[F+3+96]=Zr(fe,le,J),I[F+1+96]=Zr(ye,fe,le)}function Ef(I,F){var J;for(J=0;8>J;++J)n(I,F+32*J,I,F-32,8)}function lc(I,F){var J;for(J=0;8>J;++J)s(I,F,I[F-1],8),F+=32}function zo(I,F,J){var le;for(le=0;8>le;++le)s(F,J+32*le,I,8)}function Ho(I,F){var J,le=8;for(J=0;8>J;++J)le+=I[F+J-32]+I[F-1+32*J];zo(le>>4,I,F)}function Cs(I,F){var J,le=4;for(J=0;8>J;++J)le+=I[F+J-32];zo(le>>3,I,F)}function fi(I,F){var J,le=4;for(J=0;8>J;++J)le+=I[F-1+32*J];zo(le>>3,I,F)}function cc(I,F){zo(128,I,F)}function Wo(I,F,J){var le=I[F-J],fe=I[F+0],ye=3*(fe-le)+Zx[1020+I[F-2*J]-I[F+J]],we=ph[112+(ye+4>>3)];I[F-J]=zs[255+le+ph[112+(ye+3>>3)]],I[F+0]=zs[255+fe-we]}function Df(I,F,J,le){var fe=I[F+0],ye=I[F+J];return Ko[255+I[F-2*J]-I[F-J]]>le||Ko[255+ye-fe]>le}function Zc(I,F,J,le){return 4*Ko[255+I[F-J]-I[F+0]]+Ko[255+I[F-2*J]-I[F+J]]<=le}function Af(I,F,J,le,fe){var ye=I[F-3*J],we=I[F-2*J],Se=I[F-J],De=I[F+0],Ue=I[F+J],nt=I[F+2*J],Ct=I[F+3*J];return 4*Ko[255+Se-De]+Ko[255+we-Ue]>le?0:Ko[255+I[F-4*J]-ye]<=fe&&Ko[255+ye-we]<=fe&&Ko[255+we-Se]<=fe&&Ko[255+Ct-nt]<=fe&&Ko[255+nt-Ue]<=fe&&Ko[255+Ue-De]<=fe}function $d(I,F,J,le){var fe=2*le+1;for(le=0;16>le;++le)Zc(I,F+le,J,fe)&&Wo(I,F+le,J)}function Do(I,F,J,le){var fe=2*le+1;for(le=0;16>le;++le)Zc(I,F+le*J,1,fe)&&Wo(I,F+le*J,1)}function dc(I,F,J,le){var fe;for(fe=3;0<fe;--fe)$d(I,F+=4*J,J,le)}function fg(I,F,J,le){var fe;for(fe=3;0<fe;--fe)Do(I,F+=4,J,le)}function Vd(I,F,J,le,fe,ye,we,Se){for(ye=2*ye+1;0<fe--;){if(Af(I,F,J,ye,we))if(Df(I,F,J,Se))Wo(I,F,J);else{var De=I,Ue=F,nt=J,Ct=De[Ue-2*nt],Nt=De[Ue-nt],ft=De[Ue+0],Xt=De[Ue+nt],Pt=De[Ue+2*nt],at=27*(Vt=Zx[1020+3*(ft-Nt)+Zx[1020+Ct-Xt]])+63>>7,lt=18*Vt+63>>7,Vt=9*Vt+63>>7;De[Ue-3*nt]=zs[255+De[Ue-3*nt]+Vt],De[Ue-2*nt]=zs[255+Ct+lt],De[Ue-nt]=zs[255+Nt+at],De[Ue+0]=zs[255+ft-at],De[Ue+nt]=zs[255+Xt-lt],De[Ue+2*nt]=zs[255+Pt-Vt]}F+=le}}function jl(I,F,J,le,fe,ye,we,Se){for(ye=2*ye+1;0<fe--;){if(Af(I,F,J,ye,we))if(Df(I,F,J,Se))Wo(I,F,J);else{var De=I,Ue=F,nt=J,Ct=De[Ue-nt],Nt=De[Ue+0],ft=De[Ue+nt],Xt=ph[112+((Pt=3*(Nt-Ct))+4>>3)],Pt=ph[112+(Pt+3>>3)],at=Xt+1>>1;De[Ue-2*nt]=zs[255+De[Ue-2*nt]+at],De[Ue-nt]=zs[255+Ct+Pt],De[Ue+0]=zs[255+Nt-Xt],De[Ue+nt]=zs[255+ft-at]}F+=le}}function ih(I,F,J,le,fe,ye){Vd(I,F,J,1,16,le,fe,ye)}function oh(I,F,J,le,fe,ye){Vd(I,F,1,J,16,le,fe,ye)}function mg(I,F,J,le,fe,ye){var we;for(we=3;0<we;--we)jl(I,F+=4*J,J,1,16,le,fe,ye)}function Tf(I,F,J,le,fe,ye){var we;for(we=3;0<we;--we)jl(I,F+=4,1,J,16,le,fe,ye)}function pg(I,F,J,le,fe,ye,we,Se){Vd(I,F,fe,1,8,ye,we,Se),Vd(J,le,fe,1,8,ye,we,Se)}function sp(I,F,J,le,fe,ye,we,Se){Vd(I,F,1,fe,8,ye,we,Se),Vd(J,le,1,fe,8,ye,we,Se)}function If(I,F,J,le,fe,ye,we,Se){jl(I,F+4*fe,fe,1,8,ye,we,Se),jl(J,le+4*fe,fe,1,8,ye,we,Se)}function Qx(I,F,J,le,fe,ye,we,Se){jl(I,F+4,1,fe,8,ye,we,Se),jl(J,le+4,1,fe,8,ye,we,Se)}function Pf(){this.ba=new We,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ip(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function op(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Of(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new O}function xg(){this.xb=this.a=0,this.l=new Qr,this.ca=new We,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Of,this.ab=0,this.gc=o(4,op),this.Oc=0}function Mf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lh(I,F,J,le,fe,ye,we){for(I=I==null?0:I[F+0],F=0;F<we;++F)fe[ye+F]=I+J[le+F]&255,I=fe[ye+F]}function Rf(I,F,J,le,fe,ye,we){var Se;if(I==null)lh(null,null,J,le,fe,ye,we);else for(Se=0;Se<we;++Se)fe[ye+Se]=I[F+Se]+J[le+Se]&255}function qd(I,F,J,le,fe,ye,we){if(I==null)lh(null,null,J,le,fe,ye,we);else{var Se,De=I[F+0],Ue=De,nt=De;for(Se=0;Se<we;++Se)Ue=nt+(De=I[F+Se])-Ue,nt=J[le+Se]+(-256&Ue?0>Ue?0:255:Ue)&255,Ue=De,fe[ye+Se]=nt}}function lp(I,F,J,le){var fe=F.width,ye=F.o;if(t(I!=null&&F!=null),0>J||0>=le||J+le>ye)return null;if(!I.Cc){if(I.ga==null){var we;if(I.ga=new Mf,(we=I.ga==null)||(we=F.width*F.o,t(I.Gb.length==0),I.Gb=i(we),I.Uc=0,I.Gb==null?we=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,we=1),we=!we),!we){we=I.ga;var Se=I.Fa,De=I.P,Ue=I.qc,nt=I.mb,Ct=I.nb,Nt=De+1,ft=Ue-1,Xt=we.l;if(t(Se!=null&&nt!=null&&F!=null),pc[0]=null,pc[1]=lh,pc[2]=Rf,pc[3]=qd,we.ca=nt,we.tb=Ct,we.c=F.width,we.i=F.height,t(0<we.c&&0<we.i),1>=Ue)F=0;else if(we.$a=Se[De+0]>>0&3,we.Z=Se[De+0]>>2&3,we.Lc=Se[De+0]>>4&3,De=Se[De+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||De)F=0;else if(Xt.put=wt,Xt.ac=st,Xt.bc=rr,Xt.ma=we,Xt.width=F.width,Xt.height=F.height,Xt.Da=F.Da,Xt.v=F.v,Xt.va=F.va,Xt.j=F.j,Xt.o=F.o,we.$a)e:{t(we.$a==1),F=jt();t:for(;;){if(F==null){F=0;break e}if(t(we!=null),we.mc=F,F.c=we.c,F.i=we.i,F.l=we.l,F.l.ma=we,F.l.width=we.c,F.l.height=we.i,F.a=0,B(F.m,Se,Nt,ft),!ot(we.c,we.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&Ae(F.s)?(we.ic=1,Se=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Se),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(we.ic=0,F=bt(F,we.c)),!F))break t;F=1;break e}we.mc=null,F=0}else F=ft>=we.c*we.i;we=!F}if(we)return null;I.ga.Lc!=1?I.Ga=0:le=ye-J}t(I.ga!=null),t(J+le<=ye);e:{if(F=(Se=I.ga).c,ye=Se.l.o,Se.$a==0){if(Nt=I.rc,ft=I.Vc,Xt=I.Fa,De=I.P+1+J*F,Ue=I.mb,nt=I.nb+J*F,t(De<=I.P+I.qc),Se.Z!=0)for(t(pc[Se.Z]!=null),we=0;we<le;++we)pc[Se.Z](Nt,ft,Xt,De,Ue,nt,F),Nt=Ue,ft=nt,nt+=F,De+=F;else for(we=0;we<le;++we)n(Ue,nt,Xt,De,F),Nt=Ue,ft=nt,nt+=F,De+=F;I.rc=Nt,I.Vc=ft}else{if(t(Se.mc!=null),F=J+le,t((we=Se.mc)!=null),t(F<=we.i),we.C>=F)F=1;else if(Se.ic||gt(),Se.ic){Se=we.V,Nt=we.Ba,ft=we.c;var Pt=we.i,at=(Xt=1,De=we.$/ft,Ue=we.$%ft,nt=we.m,Ct=we.s,we.$),lt=ft*Pt,Vt=ft*F,Qt=Ct.wc,Ht=at<Vt?ur(Ct,Ue,De):null;t(at<=lt),t(F<=Pt),t(Ae(Ct));t:for(;;){for(;!nt.h&&at<Vt;){if(Ue&Qt||(Ht=ur(Ct,Ue,De)),t(Ht!=null),te(nt),256>(Pt=yr(Ht.G[0],Ht.H[0],nt)))Se[Nt+at]=Pt,++at,++Ue>=ft&&(Ue=0,++De<=F&&!(De%16)&&Me(we,De));else{if(!(280>Pt)){Xt=0;break t}Pt=er(Pt-256,nt);var wr,vr=yr(Ht.G[4],Ht.H[4],nt);if(te(nt),!(at>=(vr=fr(ft,vr=er(vr,nt)))&&lt-at>=Pt)){Xt=0;break t}for(wr=0;wr<Pt;++wr)Se[Nt+at+wr]=Se[Nt+at+wr-vr];for(at+=Pt,Ue+=Pt;Ue>=ft;)Ue-=ft,++De<=F&&!(De%16)&&Me(we,De);at<Vt&&Ue&Qt&&(Ht=ur(Ct,Ue,De))}t(nt.h==W(nt))}Me(we,De>F?F:De);break t}!Xt||nt.h&&at<lt?(Xt=0,we.a=nt.h?5:3):we.$=at,F=Xt}else F=$e(we,we.V,we.Ba,we.c,we.i,F,yt);if(!F){le=0;break e}}J+le>=ye&&(I.Cc=1),le=1}if(!le)return null;if(I.Cc&&((le=I.ga)!=null&&(le.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+J*fe}function H(I,F,J,le,fe,ye){for(;0<fe--;){var we,Se=I,De=F+(J?1:0),Ue=I,nt=F+(J?0:3);for(we=0;we<le;++we){var Ct=Ue[nt+4*we];Ct!=255&&(Ct*=32897,Se[De+4*we+0]=Se[De+4*we+0]*Ct>>23,Se[De+4*we+1]=Se[De+4*we+1]*Ct>>23,Se[De+4*we+2]=Se[De+4*we+2]*Ct>>23)}F+=ye}}function pe(I,F,J,le,fe){for(;0<le--;){var ye;for(ye=0;ye<J;++ye){var we=I[F+2*ye+0],Se=15&(Ue=I[F+2*ye+1]),De=4369*Se,Ue=(240&Ue|Ue>>4)*De>>16;I[F+2*ye+0]=(240&we|we>>4)*De>>16&240|(15&we|we<<4)*De>>16>>4&15,I[F+2*ye+1]=240&Ue|Se}F+=fe}}function He(I,F,J,le,fe,ye,we,Se){var De,Ue,nt=255;for(Ue=0;Ue<fe;++Ue){for(De=0;De<le;++De){var Ct=I[F+De];ye[we+4*De]=Ct,nt&=Ct}F+=J,we+=Se}return nt!=255}function tt(I,F,J,le,fe){var ye;for(ye=0;ye<fe;++ye)J[le+ye]=I[F+ye]>>8}function gt(){To=H,kn=pe,_n=He,ja=tt}function Lt(I,F,J){T[I]=function(le,fe,ye,we,Se,De,Ue,nt,Ct,Nt,ft,Xt,Pt,at,lt,Vt,Qt){var Ht,wr=Qt-1>>1,vr=Se[De+0]|Ue[nt+0]<<16,Vr=Ct[Nt+0]|ft[Xt+0]<<16;t(le!=null);var gr=3*vr+Vr+131074>>2;for(F(le[fe+0],255&gr,gr>>16,Pt,at),ye!=null&&(gr=3*Vr+vr+131074>>2,F(ye[we+0],255&gr,gr>>16,lt,Vt)),Ht=1;Ht<=wr;++Ht){var Bn=Se[De+Ht]|Ue[nt+Ht]<<16,Kn=Ct[Nt+Ht]|ft[Xt+Ht]<<16,Cn=vr+Bn+Vr+Kn+524296,jn=Cn+2*(Bn+Vr)>>3;gr=jn+vr>>1,vr=(Cn=Cn+2*(vr+Kn)>>3)+Bn>>1,F(le[fe+2*Ht-1],255&gr,gr>>16,Pt,at+(2*Ht-1)*J),F(le[fe+2*Ht-0],255&vr,vr>>16,Pt,at+(2*Ht-0)*J),ye!=null&&(gr=Cn+Vr>>1,vr=jn+Kn>>1,F(ye[we+2*Ht-1],255&gr,gr>>16,lt,Vt+(2*Ht-1)*J),F(ye[we+2*Ht+0],255&vr,vr>>16,lt,Vt+(2*Ht+0)*J)),vr=Bn,Vr=Kn}1&Qt||(gr=3*vr+Vr+131074>>2,F(le[fe+Qt-1],255&gr,gr>>16,Pt,at+(Qt-1)*J),ye!=null&&(gr=3*Vr+vr+131074>>2,F(ye[we+Qt-1],255&gr,gr>>16,lt,Vt+(Qt-1)*J)))}}function ar(){Hs[mi]=dd,Hs[Vf]=xc,Hs[fc]=nu,Hs[hp]=r0,Hs[xh]=n0,Hs[sd]=Hf,Hs[e0]=a0,Hs[fp]=xc,Hs[tu]=r0,Hs[id]=n0,Hs[qf]=Hf}function Nr(I){return I&-16384?0>I?0:255:I>>rC}function Mr(I,F){return Nr((19077*I>>8)+(26149*F>>8)-14234)}function fn(I,F,J){return Nr((19077*I>>8)-(6419*F>>8)-(13320*J>>8)+8708)}function dn(I,F){return Nr((19077*I>>8)+(33050*F>>8)-17685)}function Pn(I,F,J,le,fe){le[fe+0]=Mr(I,J),le[fe+1]=fn(I,F,J),le[fe+2]=dn(I,F)}function Pa(I,F,J,le,fe){le[fe+0]=dn(I,F),le[fe+1]=fn(I,F,J),le[fe+2]=Mr(I,J)}function La(I,F,J,le,fe){var ye=fn(I,F,J);F=ye<<3&224|dn(I,F)>>3,le[fe+0]=248&Mr(I,J)|ye>>5,le[fe+1]=F}function ts(I,F,J,le,fe){var ye=240&dn(I,F)|15;le[fe+0]=240&Mr(I,J)|fn(I,F,J)>>4,le[fe+1]=ye}function rs(I,F,J,le,fe){le[fe+0]=255,Pn(I,F,J,le,fe+1)}function Vs(I,F,J,le,fe){Pa(I,F,J,le,fe),le[fe+3]=255}function Nl(I,F,J,le,fe){Pn(I,F,J,le,fe),le[fe+3]=255}function Ao(I,F){return 0>I?0:I>F?F:I}function wl(I,F,J){T[I]=function(le,fe,ye,we,Se,De,Ue,nt,Ct){for(var Nt=nt+(-2&Ct)*J;nt!=Nt;)F(le[fe+0],ye[we+0],Se[De+0],Ue,nt),F(le[fe+1],ye[we+0],Se[De+0],Ue,nt+J),fe+=2,++we,++De,nt+=2*J;1&Ct&&F(le[fe+0],ye[we+0],Se[De+0],Ue,nt)}}function cp(I,F,J){return J==0?I==0?F==0?6:5:F==0?4:0:J}function ed(I,F,J,le,fe){switch(I>>>30){case 3:Cl(F,J,le,fe,0);break;case 2:Wa(F,J,le,fe);break;case 1:ms(F,J,le,fe)}}function td(I,F){var J,le,fe=F.M,ye=F.Nb,we=I.oc,Se=I.pc+40,De=I.oc,Ue=I.pc+584,nt=I.oc,Ct=I.pc+600;for(J=0;16>J;++J)we[Se+32*J-1]=129;for(J=0;8>J;++J)De[Ue+32*J-1]=129,nt[Ct+32*J-1]=129;for(0<fe?we[Se-1-32]=De[Ue-1-32]=nt[Ct-1-32]=129:(s(we,Se-32-1,127,21),s(De,Ue-32-1,127,9),s(nt,Ct-32-1,127,9)),le=0;le<I.za;++le){var Nt=F.ya[F.aa+le];if(0<le){for(J=-1;16>J;++J)n(we,Se+32*J-4,we,Se+32*J+12,4);for(J=-1;8>J;++J)n(De,Ue+32*J-4,De,Ue+32*J+4,4),n(nt,Ct+32*J-4,nt,Ct+32*J+4,4)}var ft=I.Gd,Xt=I.Hd+le,Pt=Nt.ad,at=Nt.Hc;if(0<fe&&(n(we,Se-32,ft[Xt].y,0,16),n(De,Ue-32,ft[Xt].f,0,8),n(nt,Ct-32,ft[Xt].ea,0,8)),Nt.Za){var lt=we,Vt=Se-32+16;for(0<fe&&(le>=I.za-1?s(lt,Vt,ft[Xt].y[15],4):n(lt,Vt,ft[Xt+1].y,0,4)),J=0;4>J;J++)lt[Vt+128+J]=lt[Vt+256+J]=lt[Vt+384+J]=lt[Vt+0+J];for(J=0;16>J;++J,at<<=2)lt=we,Vt=Se+yh[J],Pi[Nt.Ob[J]](lt,Vt),ed(at,Pt,16*+J,lt,Vt)}else if(lt=cp(le,fe,Nt.Ob[0]),cd[lt](we,Se),at!=0)for(J=0;16>J;++J,at<<=2)ed(at,Pt,16*+J,we,Se+yh[J]);for(J=Nt.Gc,lt=cp(le,fe,Nt.Dd),Po[lt](De,Ue),Po[lt](nt,Ct),at=Pt,lt=De,Vt=Ue,255&(Nt=J>>0)&&(170&Nt?kl(at,256,lt,Vt):eo(at,256,lt,Vt)),Nt=nt,at=Ct,255&(J>>=8)&&(170&J?kl(Pt,320,Nt,at):eo(Pt,320,Nt,at)),fe<I.Ub-1&&(n(ft[Xt].y,0,we,Se+480,16),n(ft[Xt].f,0,De,Ue+224,8),n(ft[Xt].ea,0,nt,Ct+224,8)),J=8*ye*I.B,ft=I.sa,Xt=I.ta+16*le+16*ye*I.R,Pt=I.qa,Nt=I.ra+8*le+J,at=I.Ha,lt=I.Ia+8*le+J,J=0;16>J;++J)n(ft,Xt+J*I.R,we,Se+32*J,16);for(J=0;8>J;++J)n(Pt,Nt+J*I.B,De,Ue+32*J,8),n(at,lt+J*I.B,nt,Ct+32*J,8)}}function Ff(I,F,J,le,fe,ye,we,Se,De){var Ue=[0],nt=[0],Ct=0,Nt=De!=null?De.kd:0,ft=De??new ip;if(I==null||12>J)return 7;ft.data=I,ft.w=F,ft.ha=J,F=[F],J=[J],ft.gb=[ft.gb];e:{var Xt=F,Pt=J,at=ft.gb;if(t(I!=null),t(Pt!=null),t(at!=null),at[0]=0,12<=Pt[0]&&!r(I,Xt[0],"RIFF")){if(r(I,Xt[0]+8,"WEBP")){at=3;break e}var lt=ae(I,Xt[0]+4);if(12>lt||4294967286<lt){at=3;break e}if(Nt&&lt>Pt[0]-8){at=7;break e}at[0]=lt,Xt[0]+=12,Pt[0]-=12}at=0}if(at!=0)return at;for(lt=0<ft.gb[0],J=J[0];;){e:{var Vt=I;Pt=F,at=J;var Qt=Ue,Ht=nt,wr=Xt=[0];if((gr=Ct=[Ct])[0]=0,8>at[0])at=7;else{if(!r(Vt,Pt[0],"VP8X")){if(ae(Vt,Pt[0]+4)!=10){at=3;break e}if(18>at[0]){at=7;break e}var vr=ae(Vt,Pt[0]+8),Vr=1+Z(Vt,Pt[0]+12);if(2147483648<=Vr*(Vt=1+Z(Vt,Pt[0]+15))){at=3;break e}wr!=null&&(wr[0]=vr),Qt!=null&&(Qt[0]=Vr),Ht!=null&&(Ht[0]=Vt),Pt[0]+=18,at[0]-=18,gr[0]=1}at=0}}if(Ct=Ct[0],Xt=Xt[0],at!=0)return at;if(Pt=!!(2&Xt),!lt&&Ct)return 3;if(ye!=null&&(ye[0]=!!(16&Xt)),we!=null&&(we[0]=Pt),Se!=null&&(Se[0]=0),we=Ue[0],Xt=nt[0],Ct&&Pt&&De==null){at=0;break}if(4>J){at=7;break}if(lt&&Ct||!lt&&!Ct&&!r(I,F[0],"ALPH")){J=[J],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{vr=I,at=F,lt=J;var gr=ft.gb;Qt=ft.na,Ht=ft.P,wr=ft.Sa,Vr=22,t(vr!=null),t(lt!=null),Vt=at[0];var Bn=lt[0];for(t(Qt!=null),t(wr!=null),Qt[0]=null,Ht[0]=null,wr[0]=0;;){if(at[0]=Vt,lt[0]=Bn,8>Bn){at=7;break e}var Kn=ae(vr,Vt+4);if(4294967286<Kn){at=3;break e}var Cn=8+Kn+1&-2;if(Vr+=Cn,0<gr&&Vr>gr){at=3;break e}if(!r(vr,Vt,"VP8 ")||!r(vr,Vt,"VP8L")){at=0;break e}if(Bn[0]<Cn){at=7;break e}r(vr,Vt,"ALPH")||(Qt[0]=vr,Ht[0]=Vt+8,wr[0]=Kn),Vt+=Cn,Bn-=Cn}}if(J=J[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],at!=0)break}J=[J],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(gr=I,at=F,lt=J,Qt=ft.gb[0],Ht=ft.Ja,wr=ft.xa,vr=at[0],Vt=!r(gr,vr,"VP8 "),Vr=!r(gr,vr,"VP8L"),t(gr!=null),t(lt!=null),t(Ht!=null),t(wr!=null),8>lt[0])at=7;else{if(Vt||Vr){if(gr=ae(gr,vr+4),12<=Qt&&gr>Qt-12){at=3;break e}if(Nt&&gr>lt[0]-8){at=7;break e}Ht[0]=gr,at[0]+=8,lt[0]-=8,wr[0]=Vr}else wr[0]=5<=lt[0]&&gr[vr+0]==47&&!(gr[vr+4]>>5),Ht[0]=lt[0];at=0}if(J=J[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],F=F[0],at!=0)break;if(4294967286<ft.Ja)return 3;if(Se==null||Pt||(Se[0]=ft.xa?2:1),we=[we],Xt=[Xt],ft.xa){if(5>J){at=7;break}Se=we,Nt=Xt,Pt=ye,I==null||5>J?I=0:5<=J&&I[F+0]==47&&!(I[F+4]>>5)?(lt=[0],gr=[0],Qt=[0],B(Ht=new M,I,F,J),Ot(Ht,lt,gr,Qt)?(Se!=null&&(Se[0]=lt[0]),Nt!=null&&(Nt[0]=gr[0]),Pt!=null&&(Pt[0]=Qt[0]),I=1):I=0):I=0}else{if(10>J){at=7;break}Se=Xt,I==null||10>J||!Ia(I,F+3,J-3)?I=0:(Nt=I[F+0]|I[F+1]<<8|I[F+2]<<16,Pt=16383&(I[F+7]<<8|I[F+6]),I=16383&(I[F+9]<<8|I[F+8]),1&Nt||3<(Nt>>1&7)||!(Nt>>4&1)||Nt>>5>=ft.Ja||!Pt||!I?I=0:(we&&(we[0]=Pt),Se&&(Se[0]=I),I=1))}if(!I||(we=we[0],Xt=Xt[0],Ct&&(Ue[0]!=we||nt[0]!=Xt)))return 3;De!=null&&(De[0]=ft,De.offset=F-De.w,t(4294967286>F-De.w),t(De.offset==De.ha-J));break}return at==0||at==7&&Ct&&De==null?(ye!=null&&(ye[0]|=ft.na!=null&&0<ft.na.length),le!=null&&(le[0]=we),fe!=null&&(fe[0]=Xt),0):at}function zd(I,F,J){var le=F.width,fe=F.height,ye=0,we=0,Se=le,De=fe;if(F.Da=I!=null&&0<I.Da,F.Da&&(Se=I.cd,De=I.bd,ye=I.v,we=I.j,11>J||(ye&=-2,we&=-2),0>ye||0>we||0>=Se||0>=De||ye+Se>le||we+De>fe))return 0;if(F.v=ye,F.j=we,F.va=ye+Se,F.o=we+De,F.U=Se,F.T=De,F.da=I!=null&&0<I.da,F.da){if(!be(Se,De,J=[I.ib],ye=[I.hb]))return 0;F.ib=J[0],F.hb=ye[0]}return F.ob=I!=null&&I.ob,F.Kb=I==null||!I.Sd,F.da&&(F.ob=F.ib<3*le/4&&F.hb<3*fe/4,F.Kb=0),1}function Lf(I){if(I==null)return 2;if(11>I.S){var F=I.f.RGBA;F.fb+=(I.height-1)*F.A,F.A=-F.A}else F=I.f.kb,I=I.height,F.O+=(I-1)*F.fa,F.fa=-F.fa,F.N+=(I-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(I-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(I-1)*F.lb,F.lb=-F.lb);return 0}function ch(I,F,J,le){if(le==null||0>=I||0>=F)return 2;if(J!=null){if(J.Da){var fe=J.cd,ye=J.bd,we=-2&J.v,Se=-2&J.j;if(0>we||0>Se||0>=fe||0>=ye||we+fe>I||Se+ye>F)return 2;I=fe,F=ye}if(J.da){if(!be(I,F,fe=[J.ib],ye=[J.hb]))return 2;I=fe[0],F=ye[0]}}le.width=I,le.height=F;e:{var De=le.width,Ue=le.height;if(I=le.S,0>=De||0>=Ue||!(I>=mi&&13>I))I=2;else{if(0>=le.Rd&&le.sd==null){we=ye=fe=F=0;var nt=(Se=De*D1[I])*Ue;if(11>I||(ye=(Ue+1)/2*(F=(De+1)/2),I==12&&(we=(fe=De)*Ue)),(Ue=i(nt+2*ye+we))==null){I=1;break e}le.sd=Ue,11>I?((De=le.f.RGBA).eb=Ue,De.fb=0,De.A=Se,De.size=nt):((De=le.f.kb).y=Ue,De.O=0,De.fa=Se,De.Fd=nt,De.f=Ue,De.N=0+nt,De.Ab=F,De.Cd=ye,De.ea=Ue,De.W=0+nt+ye,De.Db=F,De.Ed=ye,I==12&&(De.F=Ue,De.J=0+nt+2*ye),De.Tc=we,De.lb=fe)}if(F=1,fe=le.S,ye=le.width,we=le.height,fe>=mi&&13>fe)if(11>fe)I=le.f.RGBA,F&=(Se=Math.abs(I.A))*(we-1)+ye<=I.size,F&=Se>=ye*D1[fe],F&=I.eb!=null;else{I=le.f.kb,Se=(ye+1)/2,nt=(we+1)/2,De=Math.abs(I.fa),Ue=Math.abs(I.Ab);var Ct=Math.abs(I.Db),Nt=Math.abs(I.lb),ft=Nt*(we-1)+ye;F&=De*(we-1)+ye<=I.Fd,F&=Ue*(nt-1)+Se<=I.Cd,F=(F&=Ct*(nt-1)+Se<=I.Ed)&De>=ye&Ue>=Se&Ct>=Se,F&=I.y!=null,F&=I.f!=null,F&=I.ea!=null,fe==12&&(F&=Nt>=ye,F&=ft<=I.Tc,F&=I.F!=null)}else F=0;I=F?0:2}}return I!=0||J!=null&&J.fd&&(I=Lf(le)),I}var ks=64,Hd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dh=24,uh=32,Bf=8,Ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Xe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(I){return I},T.Predictor2=function(I,F,J){return F[J+0]},T.Predictor3=function(I,F,J){return F[J+1]},T.Predictor4=function(I,F,J){return F[J-1]},T.Predictor5=function(I,F,J){return xt(xt(I,F[J+1]),F[J+0])},T.Predictor6=function(I,F,J){return xt(I,F[J-1])},T.Predictor7=function(I,F,J){return xt(I,F[J+0])},T.Predictor8=function(I,F,J){return xt(F[J-1],F[J+0])},T.Predictor9=function(I,F,J){return xt(F[J+0],F[J+1])},T.Predictor10=function(I,F,J){return xt(xt(I,F[J-1]),xt(F[J+0],F[J+1]))},T.Predictor11=function(I,F,J){var le=F[J+0];return 0>=At(le>>24&255,I>>24&255,(F=F[J-1])>>24&255)+At(le>>16&255,I>>16&255,F>>16&255)+At(le>>8&255,I>>8&255,F>>8&255)+At(255&le,255&I,255&F)?le:I},T.Predictor12=function(I,F,J){var le=F[J+0];return(Re((I>>24&255)+(le>>24&255)-((F=F[J-1])>>24&255))<<24|Re((I>>16&255)+(le>>16&255)-(F>>16&255))<<16|Re((I>>8&255)+(le>>8&255)-(F>>8&255))<<8|Re((255&I)+(255&le)-(255&F)))>>>0},T.Predictor13=function(I,F,J){var le=F[J-1];return(ht((I=xt(I,F[J+0]))>>24&255,le>>24&255)<<24|ht(I>>16&255,le>>16&255)<<16|ht(I>>8&255,le>>8&255)<<8|ht(I>>0&255,le>>0&255))>>>0};var vg=T.PredictorAdd0;T.PredictorAdd1=_t,Xe("Predictor2","PredictorAdd2"),Xe("Predictor3","PredictorAdd3"),Xe("Predictor4","PredictorAdd4"),Xe("Predictor5","PredictorAdd5"),Xe("Predictor6","PredictorAdd6"),Xe("Predictor7","PredictorAdd7"),Xe("Predictor8","PredictorAdd8"),Xe("Predictor9","PredictorAdd9"),Xe("Predictor10","PredictorAdd10"),Xe("Predictor11","PredictorAdd11"),Xe("Predictor12","PredictorAdd12"),Xe("Predictor13","PredictorAdd13");var dp=T.PredictorAdd2;ve("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Jx,Go=T.ColorIndexInverseTransform,qs=T.MapARGB,Wd=T.VP8LColorIndexInverseTransformAlpha,up=T.MapAlpha,rd=T.VP8LPredictorsAdd=[];rd.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Gd,Ii,ti,Yd,Zi,Sl,uc,Cl,Wa,kl,ms,eo,hh,hc,Uf,Kd,Xd,Qd,fh,$f,Jd,nd,mh,Ga,To,kn,_n,ja,ns=i(511),Yo=i(2041),Zd=i(225),eu=i(767),ad=0,Zx=Yo,ph=Zd,zs=eu,Ko=ns,mi=0,Vf=1,fc=2,hp=3,xh=4,sd=5,e0=6,fp=7,tu=8,id=9,qf=10,t0=[2,3,7],Xo=[3,3,11],Io=[280,256,256,256,40],vh=[0,1,1,1,0],od=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ld=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],S1=8,mp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],pp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_s=null,Ya=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ru=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cd=[],Pi=[],Po=[],k1=1,zf=2,pc=[],Hs=[];Lt("UpsampleRgbLinePair",Pn,3),Lt("UpsampleBgrLinePair",Pa,3),Lt("UpsampleRgbaLinePair",Nl,4),Lt("UpsampleBgraLinePair",Vs,4),Lt("UpsampleArgbLinePair",rs,4),Lt("UpsampleRgba4444LinePair",ts,2),Lt("UpsampleRgb565LinePair",La,2);var dd=T.UpsampleRgbLinePair,nu=T.UpsampleBgrLinePair,xc=T.UpsampleRgbaLinePair,r0=T.UpsampleBgraLinePair,n0=T.UpsampleArgbLinePair,Hf=T.UpsampleRgba4444LinePair,a0=T.UpsampleRgb565LinePair,vc=16,Es=1<<vc-1,au=-227,s0=482,rC=6,_1=0,nC=i(256),Ds=i(256),bg=i(256),xp=i(256),vp=i(s0-au),yg=i(s0-au);wl("YuvToRgbRow",Pn,3),wl("YuvToBgrRow",Pa,3),wl("YuvToRgbaRow",Nl,4),wl("YuvToBgraRow",Vs,4),wl("YuvToArgbRow",rs,4),wl("YuvToRgba4444Row",ts,2),wl("YuvToRgb565Row",La,2);var yh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ud=[0,2,8],aC=[8,7,6,4,4,2,2,2,1,1,1,1],E1=1;this.WebPDecodeRGBA=function(I,F,J,le,fe){var ye=Vf,we=new Pf,Se=new We;we.ba=Se,Se.S=ye,Se.width=[Se.width],Se.height=[Se.height];var De=Se.width,Ue=Se.height,nt=new Ge;if(nt==null||I==null)var Ct=2;else t(nt!=null),Ct=Ff(I,F,J,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(Ct!=0?De=0:(De!=null&&(De[0]=nt.width[0]),Ue!=null&&(Ue[0]=nt.height[0]),De=1),De){Se.width=Se.width[0],Se.height=Se.height[0],le!=null&&(le[0]=Se.width),fe!=null&&(fe[0]=Se.height);e:{if(le=new Qr,(fe=new ip).data=I,fe.w=F,fe.ha=J,fe.kd=1,F=[0],t(fe!=null),((I=Ff(fe.data,fe.w,fe.ha,null,null,null,F,null,fe))==0||I==7)&&F[0]&&(I=4),(F=I)==0){if(t(we!=null),le.data=fe.data,le.w=fe.w+fe.offset,le.ha=fe.ha-fe.offset,le.put=wt,le.ac=st,le.bc=rr,le.ma=we,fe.xa){if((I=jt())==null){we=1;break e}if(function(Nt,ft){var Xt=[0],Pt=[0],at=[0];t:for(;;){if(Nt==null)return 0;if(ft==null)return Nt.a=2,0;if(Nt.l=ft,Nt.a=0,B(Nt.m,ft.data,ft.w,ft.ha),!Ot(Nt.m,Xt,Pt,at)){Nt.a=3;break t}if(Nt.xb=zf,ft.width=Xt[0],ft.height=Pt[0],!ot(Xt[0],Pt[0],1,Nt,null))break t;return 1}return t(Nt.a!=0),0}(I,le)){if(le=(F=ch(le.width,le.height,we.Oa,we.ba))==0){t:{le=I;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((J=le.l)!=null),t((fe=J.ma)!=null),le.xb!=0){if(le.ca=fe.ba,le.tb=fe.tb,t(le.ca!=null),!zd(fe.Oa,J,hp)){le.a=2;break r}if(!bt(le,J.width)||J.da)break r;if((J.da||ze(le.ca.S))&&gt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&gt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!je(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!$e(le,le.V,le.Ba,le.c,le.i,J.o,Be))break r;fe.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(F=I.a)}else F=I.a}else{if((I=new da)==null){we=1;break e}if(I.Fa=fe.na,I.P=fe.P,I.qc=fe.Sa,Ti(I,le)){if((F=ch(le.width,le.height,we.Oa,we.ba))==0){if(I.Aa=0,J=we.Oa,t((fe=I)!=null),J!=null){if(0<(De=0>(De=J.Md)?0:100<De?255:255*De/100)){for(Ue=nt=0;4>Ue;++Ue)12>(Ct=fe.pb[Ue]).lc&&(Ct.ia=De*aC[0>Ct.lc?0:Ct.lc]>>3),nt|=Ct.ia;nt&&(alert("todo:VP8InitRandom"),fe.ia=1)}fe.Ga=J.Id,100<fe.Ga?fe.Ga=100:0>fe.Ga&&(fe.Ga=0)}pl(I,le)||(F=I.a)}}else F=I.a}F==0&&we.Oa!=null&&we.Oa.fd&&(F=Lf(we.ba))}we=F}ye=we!=0?null:11>ye?Se.f.RGBA.eb:Se.f.kb.y}else ye=null;return ye};var D1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,A){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(T[A++]);return L}function u(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16)>>>0}function h(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16|T[A+3]<<24)>>>0}new c;var m=[0],p=[0],v=[],g=new c,b=e,y=function(T,A){var L={},P=0,O=!1,Q=0,z=0;if(L.frames=[],!function(V,W,ee,te){for(var ne=0;ne<te;ne++)if(V[W+ne]!=ee.charCodeAt(ne))return!0;return!1}(T,A,"RIFF",4)){for(h(T,A+=4),A+=8;A<T.length;){var re=d(T,A),U=h(T,A+=4);A+=4;var X=U+(1&U);switch(re){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(K=L.frames[P]).src_off=O?z:A-8,K.src_size=Q+U+8,P++,O&&(O=!1,Q=0,z=0);break;case"VP8X":(K=L.header={}).feature_flags=T[A];var B=A+4;K.canvas_width=1+u(T,B),B+=3,K.canvas_height=1+u(T,B),B+=3;break;case"ALPH":O=!0,Q=X+8,z=A-8;break;case"ANIM":(K=L.header).bgcolor=h(T,A),B=A+4,K.loop_count=(ue=T)[(M=B)+0]<<0|ue[M+1]<<8,B+=2;break;case"ANMF":var Y,K;(K=L.frames[P]={}).offset_x=2*u(T,A),A+=3,K.offset_y=2*u(T,A),A+=3,K.width=1+u(T,A),A+=3,K.height=1+u(T,A),A+=3,K.duration=u(T,A),A+=3,Y=T[A++],K.dispose=1&Y,K.blend=Y>>1&1}re!="ANMF"&&(A+=X)}var ue,M;return L}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var C=y.header?y.header:null,N=y.frames?y.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],p=[C.canvas_width];for(var k=0;k<N.length&&N[k].blend!=0;k++);}var S=N[0],D=g.WebPDecodeRGBA(b,S.src_off,S.src_size,p,m);S.rgba=D,S.imgwidth=p[0],S.imgheight=m[0];for(var E=0;E<p[0]*m[0]*4;E++)v[E]=D[E];return this.width=p,this.height=m,this.data=v,this}(function(e){var t=function(){return typeof x3=="function"},r=function(m,p,v,g){var b=4,y=o;switch(g){case e.image_compression.FAST:b=1,y=i;break;case e.image_compression.MEDIUM:b=6,y=l;break;case e.image_compression.SLOW:b=9,y=c}m=n(m,p,v,y);var C=x3(m,{level:b});return e.__addimage__.arrayBufferToBinaryString(C)},n=function(m,p,v,g){for(var b,y,C,N=m.length/p,k=new Uint8Array(m.length+N),S=u(),D=0;D<N;D+=1){if(C=D*p,b=m.subarray(C,C+p),g)k.set(g(b,v,y),C+D);else{for(var E,T=S.length,A=[];E<T;E+=1)A[E]=S[E](b,v,y);var L=h(A.concat());k.set(A[L],C+D)}y=b}return k},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var v,g=[],b=m.length;g[0]=1;for(var y=0;y<b;y+=1)v=m[y-p]||0,g[y+1]=m[y]-v+256&255;return g},o=function(m,p,v){var g,b=[],y=m.length;b[0]=2;for(var C=0;C<y;C+=1)g=v&&v[C]||0,b[C+1]=m[C]-g+256&255;return b},l=function(m,p,v){var g,b,y=[],C=m.length;y[0]=3;for(var N=0;N<C;N+=1)g=m[N-p]||0,b=v&&v[N]||0,y[N+1]=m[N]+256-(g+b>>>1)&255;return y},c=function(m,p,v){var g,b,y,C,N=[],k=m.length;N[0]=4;for(var S=0;S<k;S+=1)g=m[S-p]||0,b=v&&v[S]||0,y=v&&v[S-p]||0,C=d(g,b,y),N[S+1]=m[S]-C+256&255;return N},d=function(m,p,v){if(m===p&&p===v)return m;var g=Math.abs(p-v),b=Math.abs(m-v),y=Math.abs(m+p-v-v);return g<=b&&g<=y?m:b<=y?p:v},u=function(){return[s,i,o,l,c]},h=function(m){var p=m.map(function(v){return v.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,v,g){var b,y,C,N,k,S,D,E,T,A,L,P,O,Q,z,re=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(C=new N8e(m)).imgData,y=C.bits,b=C.colorSpace,k=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){T=(E=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*C.colors),A=new Uint8Array(T);var X,B=C.pixelBitlength-C.bits;for(Q=0,z=0;Q<T;Q++){for(O=E[Q],X=0;X<B;)L[z++]=O>>>X&255,X+=C.bits;A[Q]=O>>>X&255}}if(C.bits===16){T=(E=new Uint32Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*(32/C.pixelBitlength)*C.colors),A=new Uint8Array(T*(32/C.pixelBitlength)),P=C.colors>1,Q=0,z=0;for(var Y=0;Q<T;)O=E[Q++],L[z++]=O>>>0&255,P&&(L[z++]=O>>>16&255,O=E[Q++],L[z++]=O>>>0&255),A[Y++]=O>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(m=r(L,C.width*C.colors,C.colors,g),D=r(A,C.width,1,g)):(m=L,D=A,re=void 0)}if(C.colorType===3&&(b=this.color_spaces.INDEXED,S=C.palette,C.transparency.indexed)){var K=C.transparency.indexed,ue=0;for(Q=0,T=K.length;Q<T;++Q)ue+=K[Q];if((ue/=255)===T-1&&K.indexOf(0)!==-1)N=[K.indexOf(0)];else if(ue!==T){for(E=C.decodePixels(),A=new Uint8Array(E.length),Q=0,T=E.length;Q<T;Q++)A[Q]=K[E[Q]];D=r(A,C.width,1)}}var M=function(V){var W;switch(V){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(g);return re===this.decode.FLATE_DECODE&&(U="/Predictor "+M+" "),U+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:v,data:m,index:p,filter:re,decodeParameters:U,transparency:N,palette:S,sMask:D,predictor:M,width:C.width,height:C.height,bitsPerComponent:y,colorSpace:b}}}})(rn.API),function(e){e.processGIF89A=function(t,r,n,s){var i=new w8e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new h5(100).encode(d,100);return e.processJPEG.call(this,u,r,n,s)},e.processGIF87A=e.processGIF89A}(rn.API),yd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Da.log("bit decode error:"+r)}},yd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},yd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},yd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},yd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},yd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},yd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},yd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},yd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new yd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new h5(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(rn.API),q7.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new q7(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new h5(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(rn.API),rn.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=n[d],h=n[d+1],m=n[d+2],p=n[d+3];i[l++]=u,i[l++]=h,i[l++]=m,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},rn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$0=rn.API,bN=$0.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,m=0,p=e.length,v=0,g=l[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=h&&Vn(d[n])==="object"&&!isNaN(parseInt(d[n][v],10))?d[n][v]/u:0,b.push((l[n]||g)/c+m)),v=n;return b},B7=$0.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return $0.processArabic&&(e=$0.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:bN.apply(this,arguments).reduce(function(i,o){return i+o},0)},U7=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},$7=function(e,t,r){r||(r={});var n,s,i,o,l,c,d,u=[],h=[u],m=r.textIndent||0,p=0,v=0,g=e.split(" "),b=bN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),C=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?C=C.concat(k.map(function(S,D){return(D&&S.length?`
`:"")+S})):C.push(k[0])}),g=C,c=B7.apply(this,[y,r])}for(i=0,o=g.length;i<o;i++){var N=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),m+p+(v=(s=bN.apply(this,[n,r])).reduce(function(k,S){return k+S},0))>t||N){if(v>t){for(l=U7.apply(this,[n,s,t-(m+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(k,S){return k+S},0)}else u=[n];h.push(u),m=v+c,p=b}else u.push(n),m+=p+v,p=b}return d=c?function(k,S){return(S?y:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},$0.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat($7.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var m,p,v,g,b=["{"];for(var y in h){if(m=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(v=i(m).slice(3),g="-"):(v=i(m).slice(2),g=""),v=g+v.slice(0,-1)+n[v.slice(-1)];else{if(Vn(m)!=="object")throw new Error("Don't know what to do with value type "+Vn(m)+".");v=o(m)}b.push(p+v)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,g,b={},y=1,C=b,N=[],k="",S="",D=h.length-1,E=1;E<D;E+=1)(g=h[E])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(N.push([C,v]),C={},v=void 0):g=="}"?((p=N.pop())[0][p[1]]=C,v=void 0,C=p[0]):g=="-"?y=-1:v===void 0?r.hasOwnProperty(g)?(k+=r[g],v=parseInt(k,16)*y,y=1,k=""):k+=g:r.hasOwnProperty(g)?(S+=r[g],C[v]=parseInt(S,16)*y,y=1,v=void 0,S=""):S+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=d.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(rn.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Kb(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(rn),function(e){function t(){return(sn.canvg?Promise.resolve(sn.canvg):u3(()=>import("./index.es-BrW29vfo.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}rn.API.addSvgAsImage=function(r,n,s,i,o,l,c,d){if(isNaN(n)||isNaN(s))throw Da.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Da.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,s,i,o,c,d)})}}(),rn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},rn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(v,g){var b,y=!1;for(b=0;b<v.length;b+=1)v[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Vn(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(rn.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(i).sort(function(p,v){return p-v})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var b=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+K0(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var C=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+K0(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+K0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+C+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+K0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+K0(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,p=h.activeFontKey,v=h.fonts,g=p,b="",y=0,C="",N=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(C=l,g=p,Array.isArray(l)&&(C=l[0]),y=0;y<C.length;y+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[C[y].charCodeAt(0)]),o||C[y].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?b+=C[y]:b+="";var k="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?k=m(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(k=r(b,v[g])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(rn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(rn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,d,u,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,N=0;this.__bidiEngine__={};var k=function(P){var O=P.charCodeAt(),Q=O>>8,z=g[Q];return z!==void 0?h[256*z+(255&O)]:Q===252||Q===253?"AL":y.test(Q)?"L":Q===8?"R":"N"},S=function(P){for(var O,Q=0;Q<P.length;Q++){if((O=k(P.charAt(Q)))==="L")return!1;if(O==="R")return!0}return!1},D=function(P,O,Q,z){var re,U,X,B,Y=O[z];switch(Y){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(Y="AN");break;case"AL":C=!0,Y="R";break;case"WS":Y="N";break;case"CS":z<1||z+1>=O.length||(re=Q[z-1])!=="EN"&&re!=="AN"||(U=O[z+1])!=="EN"&&U!=="AN"?Y="N":C&&(U="AN"),Y=U===re?U:"N";break;case"ES":Y=(re=z>0?Q[z-1]:"B")==="EN"&&z+1<O.length&&O[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&Q[z-1]==="EN"){Y="EN";break}if(C){Y="N";break}for(X=z+1,B=O.length;X<B&&O[X]==="ET";)X++;Y=X<B&&O[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(B=O.length,X=z+1;X<B&&O[X]==="NSM";)X++;if(X<B){var K=P[z],ue=K>=1425&&K<=2303||K===64286;if(re=O[X],ue&&(re==="R"||re==="AL")){Y="R";break}}}Y=z<1||(re=O[z-1])==="B"?"N":Q[z-1];break;case"B":C=!1,s=!0,Y=N;break;case"S":i=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":Y="N"}return Y},E=function(P,O,Q){var z=P.split("");return Q&&T(z,Q,{hiLevel:N}),z.reverse(),O&&O.reverse(),z.join("")},T=function(P,O,Q){var z,re,U,X,B,Y=-1,K=P.length,ue=0,M=[],V=N?p:m,W=[];for(C=!1,s=!1,i=!1,re=0;re<K;re++)W[re]=k(P[re]);for(U=0;U<K;U++){if(B=ue,M[U]=D(P,W,M,U),z=240&(ue=V[B][v[M[U]]]),ue&=15,O[U]=X=V[ue][5],z>0)if(z===16){for(re=Y;re<U;re++)O[re]=1;Y=-1}else Y=-1;if(V[ue][6])Y===-1&&(Y=U);else if(Y>-1){for(re=Y;re<U;re++)O[re]=X;Y=-1}W[U]==="B"&&(O[U]=0),Q.hiLevel|=X}i&&function(ee,te,ne){for(var se=0;se<ne;se++)if(ee[se]==="S"){te[se]=N;for(var oe=se-1;oe>=0&&ee[oe]==="WS";oe--)te[oe]=N}}(W,O,K)},A=function(P,O,Q,z,re){if(!(re.hiLevel<P)){if(P===1&&N===1&&!s)return O.reverse(),void(Q&&Q.reverse());for(var U,X,B,Y,K=O.length,ue=0;ue<K;){if(z[ue]>=P){for(B=ue+1;B<K&&z[B]>=P;)B++;for(Y=ue,X=B-1;Y<X;Y++,X--)U=O[Y],O[Y]=O[X],O[X]=U,Q&&(U=Q[Y],Q[Y]=Q[X],Q[X]=U);ue=B}ue++}}},L=function(P,O,Q){var z=P.split(""),re={hiLevel:N};return Q||(Q=[]),T(z,Q,re),function(U,X,B){if(B.hiLevel!==0&&u)for(var Y,K=0;K<U.length;K++)X[K]===1&&(Y=b.indexOf(U[K]))>=0&&(U[K]=b[Y+1])}(z,Q,re),A(2,z,O,Q,re),A(1,z,O,Q,re),z.join("")};return this.__bidiEngine__.doBidiReorder=function(P,O,Q){if(function(re,U){if(U)for(var X=0;X<re.length;X++)U[X]=X;l===void 0&&(l=S(re)),d===void 0&&(d=S(re))}(P,O),o||!c||d)if(o&&c&&l^d)N=l?1:0,P=E(P,O,Q);else if(!o&&c&&d)N=l?1:0,P=L(P,O,Q),P=E(P,O);else if(!o||l||c||d){if(o&&!c&&l^d)P=E(P,O),l?(N=0,P=L(P,O,Q)):(N=1,P=L(P,O,Q),P=E(P,O));else if(o&&l&&!c&&d)N=1,P=L(P,O,Q),P=E(P,O);else if(!o&&!c&&l^d){var z=u;l?(N=1,P=L(P,O,Q),N=0,u=!1,P=L(P,O,Q),u=z):(N=0,P=L(P,O,Q),P=E(P,O),N=1,u=!1,P=L(P,O,Q),u=z,P=E(P,O))}}else N=0,P=L(P,O,Q);else N=l?1:0,P=L(P,O,Q);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,d=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(rn),rn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Gm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new L8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new S8e(this.contents),this.head=new k8e(this),this.name=new T8e(this),this.cmap=new ZK(this),this.toUnicode={},this.hhea=new _8e(this),this.maxp=new I8e(this),this.hmtx=new P8e(this),this.post=new D8e(this),this.os2=new E8e(this),this.loca=new F8e(this),this.glyf=new O8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Ud,Gm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),S8e=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,d,u,h,m,p,v,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(s=new Gm).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,v=[],r)for(m=r[g],s.writeString(g),s.writeInt(e(m)),s.writeInt(d),s.writeInt(m.length),v=v.concat(m),g==="head"&&(l=d),d+=m.length;d%4;)v.push(0),d++;return s.write(v),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=eX.call(r);r.length%4;)r.push(0);for(i=new Gm(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),C8e={}.hasOwnProperty,rh=function(e,t){for(var r in t)C8e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Ud=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var k8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Gm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),z7=function(){function e(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),d=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),u=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),s=(this.length-t.pos+this.offset)/2,l=function(){var k,S;for(S=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)S.push(t.readUInt16());return S}(),c=y=0,N=i.length;y<N;c=++y)for(b=i[c],n=C=v=g[c];v<=b?C<=b:C>=b;n=v<=b?++C:--C)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-v)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,N,k,S,D,E,T,A,L,P,O,Q,z,re,U,X,B,Y,K,ue,M,V,W,ee,te,ne,se,oe,G,ce,Z;switch(z=new Gm,o=Object.keys(t).sort(function(ae,je){return ae-je}),r){case"macroman":for(g=0,b=function(){var ae=[];for(v=0;v<256;++v)ae.push(0);return ae}(),C={0:0},i={},re=0,Y=o.length;re<Y;re++)C[oe=t[s=o[re]]]==null&&(C[oe]=++g),i[s]={old:t[s],new:C[t[s]]},b[s]=C[t[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(b),{charMap:i,subtable:z.data,maxGlyphID:g+1};case"unicode":for(O=[],h=[],N=0,C={},n={},y=d=null,U=0,K=o.length;U<K;U++)C[S=t[s=o[U]]]==null&&(C[S]=++N),n[s]={old:S,new:C[S]},l=C[S]-s,y!=null&&l===d||(y&&h.push(y),O.push(s),d=l),y=s;for(y&&h.push(y),h.push(65535),O.push(65535),L=2*(A=O.length),T=2*Math.pow(Math.log(A)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,E=2*A-T,c=[],D=[],p=[],v=X=0,ue=O.length;X<ue;v=++X){if(P=O[v],u=h[v],P===65535){c.push(0),D.push(0);break}if(P-(Q=n[P].new)>=32768)for(c.push(0),D.push(2*(p.length+A-v)),s=B=P;P<=u?B<=u:B>=u;s=P<=u?++B:--B)p.push(n[s].new);else c.push(Q-P),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*A+2*p.length),z.writeUInt16(0),z.writeUInt16(L),z.writeUInt16(T),z.writeUInt16(m),z.writeUInt16(E),ne=0,M=h.length;ne<M;ne++)s=h[ne],z.writeUInt16(s);for(z.writeUInt16(0),se=0,V=O.length;se<V;se++)s=O[se],z.writeUInt16(s);for(G=0,W=c.length;G<W;G++)l=c[G],z.writeUInt16(l);for(ce=0,ee=D.length;ce<ee;ce++)k=D[ce],z.writeUInt16(k);for(Z=0,te=p.length;Z<te;Z++)g=p[Z],z.writeUInt16(g);return{charMap:n,subtable:z.data,maxGlyphID:N+1}}},e}(),ZK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new z7(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=z7.encode(r,n),(i=new Gm).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),_8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),E8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),D8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),A8e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},T8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,d,u,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,m=s.length;h<m;o=++h)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new A8e(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),I8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),P8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,m,p;for(p=[],u=0,h=(m=this.metrics).length;u<h;u++)o=m[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),eX=[].slice,O8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,d,u,h,m;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new Gm(n.read(i))).readShort(),u=c.readShort(),m=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new R8e(c,u,m,d,h):new M8e(c,l,u,m,d,h),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),M8e=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),R8e=function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Gm(eX.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),F8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return rh(t,Ud),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},t}(),L8e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y;for(s in n=ZK.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[s]).old]=c.new;for(v in m=n.maxGlyphID,o)v in p||(p[v]=m++);return u=function(C){var N,k;for(N in k={},C)k[C[N]]=N;return k}(p),h=Object.keys(u).sort(function(C,N){return C-N}),g=function(){var C,N,k;for(k=[],C=0,N=h.length;C<N;C++)l=h[C],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();rn.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function B8e(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState([]),[u,h]=w.useState(!1),[m,p]=w.useState(!1),[v,g]=w.useState(null),[b,y]=w.useState(null),[C,N]=w.useState([]),[k,S]=w.useState(0),[D,E]=w.useState(0),[T,A]=w.useState(0),[L,P]=w.useState(0),[O,Q]=w.useState(1),[z,re]=w.useState({salary:"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString()}),[U,X]=w.useState(localStorage.getItem("activeRole")||"");JSON.parse(localStorage.getItem("user"));const B=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=[],K=new Date().getFullYear();for(let ge=K-5;ge<=K+1;ge++)Y.push(ge.toString());w.useEffect(()=>{M(),V(),ue()},[]);const ue=async()=>{try{const ge=await Oe.get("/api/departments");d(Array.isArray(ge.data)?ge.data:[])}catch(ge){console.error("Error fetching departments:",ge)}},M=async()=>{try{const ge=localStorage.getItem("activeRole")||"";let ve;ge==="SuperAdmin"?ve=await Oe.get("/api/faculties"):ve=await Oe.get("/api/faculties"),t(Array.isArray(ve.data)?ve.data:[])}catch(ge){console.error("Error fetching faculties:",ge)}},V=async()=>{try{const ge=await Oe.get("/api/salary-records");n(Array.isArray(ge.data)?ge.data:[])}catch(ge){console.error("Error fetching salary records:",ge)}},W=async ge=>{try{const ve=await Oe.get(`/api/salary-records/employee/${ge}`);N(Array.isArray(ve.data)?ve.data:[])}catch(ve){console.error("Error fetching employee salary history:",ve),N([])}},ee=ge=>{const ve=ge.joinDate||new Date().toISOString().split("T")[0],xe=new Date(ve),Ie=xe.toLocaleString("en-US",{month:"long"}),Ze=xe.getFullYear().toString();g(ge),re({salary:ge.salary||"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString(),minDate:ve,joinMonth:Ie,joinYear:Ze}),P(0),S(0),E(0),A(0),Q(1),h(!0),ne(ge.employeeId,new Date().toLocaleString("en-US",{month:"long"}),new Date().getFullYear().toString())},te=ge=>{g(ge),y(ge.employeeId),W(ge.employeeId),p(!0)},ne=async(ge,ve,xe)=>{try{const Ie=B.indexOf(ve)+1,Ze=Ie<10?`0${Ie}`:`${Ie}`,Ft=await Oe.get("/api/salary-records/leave-count",{params:{employeeId:ge,month:Ze,year:xe}});S(Ft.data.leaveCount||0),E(Ft.data.sundayCount||0),A(Ft.data.totalDays||0)}catch(Ie){console.error("Error fetching leave count:",Ie),S(0),E(0),A(0)}},se=()=>{h(!1),g(null)},oe=()=>{p(!1),y(null),g(null),N([])},G=ge=>{re({...z,[ge.target.name]:ge.target.value})},ce=ge=>{const ve=ge.target.value;re({...z,month:ve}),v&&ne(v.employeeId,ve,z.year)},Z=ge=>{const ve=ge.target.value;if(ve===z.joinYear){const xe=B.indexOf(z.month),Ie=B.indexOf(z.joinMonth);if(xe<Ie){re({...z,year:ve,month:z.joinMonth}),v&&ne(v.employeeId,z.joinMonth,ve);return}}re({...z,year:ve}),v&&ne(v.employeeId,z.month,ve)},ae=ge=>{P(ge.target.value)},je=ge=>{const ve=parseInt(ge.target.value);Q(isNaN(ve)||ve<0?0:ve)},de=()=>Math.max(0,k-O),ie=()=>{const ge=de()*L;return z.salary-ge},be=async()=>{try{const xe=de(),Ie=xe*L,Ze=ie();await Oe.post("/api/salary-records/save",{facultyId:v._id,employeeId:v.employeeId,month:z.month,year:z.year,salary:z.salary,leaveCount:k,sundayCount:D,totalLeaveCount:T,paidLeaveCount:O,deductibleDays:xe,deductionPerDay:L,totalDeduction:Ie,payableSalary:Ze,date:z.date});var ge=document.getElementById("standard-modal"),ve=bootstrap.Modal.getInstance(ge);ve||(ve=new bootstrap.Modal(ge)),ve.hide(),V(),alert("Salary saved successfully!"),se()}catch(xe){xe.response&&xe.response.status===400?alert("Salary already recorded for this employee in the same month!"):console.error("Error saving salary:",xe)}},Ne=async(ge,ve,xe,Ie=null)=>{const Ze=Ie?{firstName:Ie.facultyId?.firstName||"Unknown",lastName:Ie.facultyId?.lastName||"Unknown",employeeId:Ie.employeeId,department:Ie.facultyId?.department||"Unknown"}:v;if(!Ze)throw new Error("Employee information is required");try{const Ft=Ie?Ie.date:z.date,Qe=Ie?Ie.month:z.month,Ye=Ie?Ie.year:z.year,Le=Ie?Ie.salary:z.salary,ze=Ie?Ie.leaveCount:k,ut=Ie?Ie.sundayCount||0:D,Te=Ie?Ie.paidLeaveCount||0:O,We=Ie?Ie.deductibleDays||0:ve,Ge=Ie?Ie.deductionPerDay||0:L,It=Ie?Ie.totalDeduction||0:xe,Bt=Ie?Ie.payableSalary:ge,Ee=new rn;Ee.setFontSize(16),Ee.setFont(void 0,"bold"),Ee.text("Your Company Name",Ee.internal.pageSize.width/2,20,{align:"center"}),Ee.setFontSize(10),Ee.setFont(void 0,"normal"),Ee.text("Company Address Line 1",Ee.internal.pageSize.width/2,30,{align:"center"}),Ee.text("Company Address Line 2",Ee.internal.pageSize.width/2,35,{align:"center"}),Ee.text("Phone: (123) 456-7890 | Email: company@email.com",Ee.internal.pageSize.width/2,40,{align:"center"}),Ee.setLineWidth(.5),Ee.line(20,45,190,45),Ee.setFontSize(14),Ee.setFont(void 0,"bold"),Ee.text("Salary Receipt",Ee.internal.pageSize.width/2,55,{align:"center"}),Ee.setFontSize(10),Ee.setFont(void 0,"normal");const _e=new Date(Ft),st=`${String(_e.getDate()).padStart(2,"0")}-${String(_e.getMonth()+1).padStart(2,"0")}-${_e.getFullYear()}`;Ee.text(`Date: ${st}`,170,55,{align:"right"}),Ee.setFontSize(11),Ee.text("Employee Name:",20,70),Ee.text(`${Ze.firstName} ${Ze.lastName}`,80,70),Ee.text("Employee ID:",20,77),Ee.text(`${Ze.employeeId}`,80,77),Ee.text("Department:",20,84),Ee.text(`${Ze.department}`,80,84),Ee.text("Month & Year:",20,91),Ee.text(`${Qe} ${Ye}`,80,91),Ee.setLineWidth(.1),Ee.line(20,105,190,105),Ee.setFont(void 0,"bold"),Ee.text("Description",25,112),Ee.text("Amount",170,112),Ee.line(20,115,190,115),Ee.setFont(void 0,"normal"),Ee.text("Basic Salary",25,122),Ee.text(`${Le?.toFixed(2)}/-`,185,122,{align:"right"}),Ee.text("Leave Information",25,129),Ee.text("Paid Leave",25,136),Ee.text(`${Te}`,185,136,{align:"right"}),Ee.text("Deductible Leave Days",25,143),Ee.text(`${We}`,185,143,{align:"right"}),Ee.text("Deduction Per Day",25,150),Ee.text(`${Ge.toFixed(2)}/-`,185,150,{align:"right"}),Ee.line(20,155,190,155),Ee.text("Total Deduction",25,162),Ee.text(`${It.toFixed(2)}/-`,185,162,{align:"right"}),Ee.line(20,167,190,167),Ee.setFont(void 0,"bold"),Ee.text("Payable Salary",25,174),Ee.text(`${Bt.toFixed(2)}/-`,185,174,{align:"right"}),Ee.line(20,178,190,178),Ee.setFontSize(8),Ee.text("This is a computer-generated document. No signature required.",Ee.internal.pageSize.width/2,270,{align:"center"}),Ee.save(`Salary_Receipt_${Ze.firstName}_${Qe}_${Ye}.pdf`)}catch(Ft){throw console.error("Error generating salary receipt:",Ft),new Error(`Failed to generate salary receipt: ${Ft.message}`)}},Fe=async ge=>{if(!ge)return;const ve=ge.deductibleDays||0,xe=ge.totalDeduction||0,Ie=ge.payableSalary||ge.salary;try{await Ne(Ie,ve,xe,ge)}catch(Ze){console.error("Error downloading salary receipt:",Ze),alert("Failed to generate salary receipt. Please try again.")}},Xe=e.filter(ge=>{const ve=`${ge.firstName} ${ge.lastName}`.toLowerCase(),xe=s.toLowerCase(),Ie=!s||ve.includes(xe)||ge.employeeId&&ge.employeeId.toLowerCase().includes(xe)||ge.phone&&ge.phone.includes(xe),Ze=!o||ge.department===o;return Ie&&Ze}),[ct,xt]=w.useState(1),[Re]=w.useState(5),ht=ge=>xt(ge),At=ct*Re,_t=At-Re,Wt=Xe.slice(_t,At),Ke=Math.ceil(Xe.length/Re);return a.jsx("div",{className:"contanier",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row align-items-center",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{className:"page-title",children:"Payroll Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, employee ID, phone",value:s,onChange:ge=>i(ge.target.value)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"All Departments"}),a.jsxs("select",{className:"form-select",value:o,onChange:ge=>l(ge.target.value),children:[a.jsx("option",{value:"",children:"All Departments"}),c.map(ge=>a.jsx("option",{value:ge.name,children:ge.departmentName},ge._id))]})]})})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Base Salary"}),a.jsx("th",{className:"text-center",children:"Actions"})]})}),a.jsx("tbody",{children:Wt.length>0?Wt.map(ge=>a.jsxs("tr",{children:[a.jsx("td",{children:ge.employeeId}),a.jsxs("td",{children:[ge.firstName," ",ge.lastName]}),a.jsx("td",{children:ge.role}),a.jsx("td",{children:ge.department}),a.jsx("td",{children:a.jsxs("strong",{children:["",ge.salary]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-primary btn-icon btn-sm",onClick:()=>ee(ge),"data-bs-toggle":"modal","data-bs-target":"#standard-modal",title:"Generate Payslip",children:a.jsx("i",{className:"ti ti-file-dollar"})}),a.jsx("button",{className:"btn btn-secondary btn-icon btn-sm",onClick:()=>te(ge),"data-bs-toggle":"modal","data-bs-target":"#history-modal",title:"View History",children:a.jsx("i",{className:"ti ti-history"})})]})})]},ge._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"text-center",children:"No employees found matching your criteria"})})})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${ct===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(ct-1),disabled:ct===1,children:""})}),(()=>{const ge=ct,ve=Ke,xe=[];if(ve<=3)for(let Ie=1;Ie<=ve;Ie++)xe.push(a.jsx("li",{className:`page-item ${ge===Ie?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(Ie),children:Ie})},Ie));else xe.push(a.jsx("li",{className:`page-item ${ge===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(1),children:"1"})},1)),ge<=2&&xe.push(a.jsx("li",{className:`page-item ${ge===2?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(2),children:"2"})},2)),ge>3&&xe.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"start-ellipsis")),ge>2&&ge<ve-1&&xe.push(a.jsx("li",{className:"page-item active",children:a.jsx("button",{className:"page-link",onClick:()=>ht(ge),children:ge})},ge)),ge<ve-2&&xe.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"end-ellipsis")),ge>=ve-1&&xe.push(a.jsx("li",{className:`page-item ${ge===ve-1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(ve-1),children:ve-1})},ve-1)),ve>1&&xe.push(a.jsx("li",{className:`page-item ${ge===ve?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(ve),children:ve})},ve));return xe})(),a.jsx("li",{className:`page-item ${ct>=Ke?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ht(ct+1),disabled:ct>=Ke,children:""})})]})})})]})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Generate Salary"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:v&&a.jsxs("div",{children:[a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light-primary",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-primary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Month:"}),a.jsx("select",{className:"form-select",name:"month",value:z.month,onChange:ce,children:B.filter(ge=>{if(z.year===z.joinYear){const ve=B.indexOf(ge),xe=B.indexOf(z.joinMonth);return ve>=xe}return!0}).map(ge=>a.jsx("option",{value:ge,children:ge},ge))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Year:"}),a.jsx("select",{className:"form-select",name:"year",value:z.year,onChange:Z,children:Y.filter(ge=>parseInt(ge)>=parseInt(z.joinYear)).map(ge=>a.jsx("option",{value:ge,children:ge},ge))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Payment Date:"}),a.jsx("input",{type:"date",name:"date",className:"form-control",value:z.date,onChange:G,min:z.minDate})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Base Salary ():"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:z.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Per Day ():"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:ae})]})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Base Salary ():"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:z.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Deduction Per Day ():"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:ae})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsx("h5",{className:"card-title mb-0",children:"Attendance & Leave Information"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Total Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:k,readOnly:!0}),a.jsxs("small",{className:"text-muted",children:["Excluding ",D," Sundays"]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Paid Leave Allowed:"}),a.jsx("input",{type:"number",className:"form-control",value:O,onChange:je}),a.jsx("small",{className:"text-muted",children:"Default: 1 paid leave per month"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Deductible Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:de(),readOnly:!0}),a.jsx("small",{className:"text-muted",children:"After deducting paid leave"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Total Deduction ():"}),a.jsx("input",{type:"number",className:"form-control",value:de()*L,readOnly:!0})]})})]})})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light-success",children:a.jsx("h5",{className:"card-title mb-0",children:"Final Salary"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Payable Salary ():"}),a.jsx("input",{type:"number",className:"form-control form-control-lg",value:ie(),readOnly:!0}),a.jsxs("small",{className:"text-info",children:["Sundays and ",O," paid leave days are not included in salary deductions"]})]}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"h1 mb-0 text-success",children:["",ie()]}),a.jsx("div",{className:"small text-muted",children:"Final Amount"})]})})]})})]})]})}),a.jsxs("div",{className:"d-flex justify-content-end p-3 gap-2",children:[a.jsx("button",{className:"btn btn-light","data-bs-dismiss":"modal",children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:be,children:[a.jsx("i",{className:"ti ti-device-floppy me-1"})," Save"]})]})]})})}),a.jsx("div",{id:"history-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"history-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-secondary text-white",children:[a.jsx("h4",{className:"modal-title",id:"history-modalLabel",children:"Salary History"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsxs("div",{className:"modal-body",children:[v&&a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-secondary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),C.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Month & Year"}),a.jsx("th",{children:"Basic Salary"}),a.jsx("th",{children:"Leave Days"}),a.jsx("th",{children:"Total Deduction"}),a.jsx("th",{children:"Payable Salary"}),a.jsx("th",{children:"Payment Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:[...C].sort((ge,ve)=>new Date(ve.date)-new Date(ge.date)).map(ge=>a.jsxs("tr",{children:[a.jsxs("td",{children:[ge.month," ",ge.year]}),a.jsxs("td",{children:["",ge.salary]}),a.jsxs("td",{children:["Total: ",ge.leaveCount||0,a.jsx("span",{className:"text-muted d-block small",children:ge.sundayCount>0&&` (Sundays: ${ge.sundayCount})`})]}),a.jsx("td",{children:a.jsxs("span",{className:"text-danger",children:["",ge.totalDeduction||0]})}),a.jsx("td",{children:a.jsxs("strong",{className:"text-success",children:["",ge.payableSalary||ge.salary]})}),a.jsx("td",{children:new Date(ge.date).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Fe(ge),children:[a.jsx("i",{className:"ti ti-download me-1"})," ","Download"]})})]},ge._id))})]})}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-file-off text-muted",style:{fontSize:"48px"}})}),a.jsx("h5",{children:"No salary records found"}),a.jsx("p",{className:"text-muted",children:"No salary has been processed for this employee yet."})]})]}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-secondary m-3",onClick:oe,"data-bs-dismiss":"modal",style:{width:"200px"},children:"Close"})})]})})})]})})})}function U8e(){const[e,t]=w.useState(!1),r=({children:n})=>a.jsx(vee,{children:a.jsxs("div",{className:`  main-wrapper ${e?"slide-nav":""}`,children:[a.jsx(pee,{}),a.jsx(xee,{toggleSidebar:()=>t(s=>!s)}),a.jsx("div",{className:"page-wrapper ",children:n})]})});return a.jsx(a.Fragment,{children:a.jsx(EJ,{children:a.jsxs(aJ,{children:[a.jsx(cr,{path:"/login",element:a.jsx(Ipe,{})}),a.jsx(cr,{path:"/register",element:a.jsx(Ope,{})}),a.jsx(cr,{path:"/Access",element:a.jsx(I5e,{})}),a.jsx(cr,{path:"/gst",element:a.jsx(r,{children:a.jsx(P5e,{})})}),a.jsx(cr,{path:"loginscreen",element:a.jsx(Ppe,{})}),a.jsx(cr,{path:"/company-form",element:a.jsx(r,{children:a.jsx(b5e,{})})}),a.jsx(cr,{path:"/",element:a.jsx(r,{children:a.jsx(Tpe,{})})}),a.jsx(cr,{path:"/eway",element:a.jsx(r,{children:a.jsx(T5e,{})})}),a.jsx(cr,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(qB,{})})}),a.jsx(cr,{path:"/PurchaseIndentsummary",element:a.jsx(r,{children:a.jsx(USe,{})})}),a.jsx(cr,{path:"/PurchaseOrderList",element:a.jsx(r,{children:a.jsx(h5e,{})})}),a.jsx(cr,{path:"/SaleContractCategory",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(cr,{path:"/PurchaseQuotation",element:a.jsx(r,{children:a.jsx($Se,{})})}),a.jsx(cr,{path:"/PurchaseQuotationsDisplay",element:a.jsx(r,{children:a.jsx(d5e,{})})}),a.jsx(cr,{path:"/PurchaseOrder",element:a.jsx(r,{children:a.jsx(u5e,{})})}),a.jsx(cr,{path:"/PurchaseEnquiry",element:a.jsx(r,{children:a.jsx(BSe,{})})}),a.jsx(cr,{path:"/PurchaseContractsummary",element:a.jsx(r,{children:a.jsx(O5e,{})})}),a.jsx(cr,{path:"/PurchaseContract",element:a.jsx(r,{children:a.jsx(M5e,{})})}),a.jsx(cr,{path:"/SalesContract",element:a.jsx(r,{children:a.jsx(R5e,{})})}),a.jsx(cr,{path:"/SalesContractsummary",element:a.jsx(r,{children:a.jsx(F5e,{})})}),a.jsx(cr,{path:"/SalesEnquiry",element:a.jsx(r,{children:a.jsx(f5e,{})})}),a.jsx(cr,{path:"/SalesEnquiryList",element:a.jsx(r,{children:a.jsx(m5e,{})})}),a.jsx(cr,{path:"/SalesQuotation",element:a.jsx(r,{children:a.jsx(p5e,{})})}),a.jsx(cr,{path:"/SalesQuotationList",element:a.jsx(r,{children:a.jsx(x5e,{})})}),a.jsx(cr,{path:"/SalesOrder",element:a.jsx(r,{children:a.jsx(v5e,{})})}),a.jsx(cr,{path:"/SalesOrderList",element:a.jsx(r,{children:a.jsx(g5e,{})})}),a.jsx(cr,{path:"/MatrialIssue",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(cr,{path:"/MatrialReceipt",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(cr,{path:"/MatrialTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(cr,{path:"/MatrialTransferList",element:a.jsx(r,{children:a.jsx(EMe,{})})}),a.jsx(cr,{path:"/MaterialIssueList",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(cr,{path:"/MatrialReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(cr,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(cr,{path:"/GeneralCondition",element:a.jsx(r,{children:a.jsx(LSe,{})})}),a.jsx(cr,{path:"/ProcessList",element:a.jsx(r,{children:a.jsx(FSe,{})})}),a.jsx(cr,{path:"/customer-form",element:a.jsx(r,{children:a.jsx(y5e,{})})}),a.jsx(cr,{path:"/customer-price-list",element:a.jsx(r,{children:a.jsx(j5e,{})})}),a.jsx(cr,{path:"/locationmaster",element:a.jsx(r,{children:a.jsx(N5e,{})})}),a.jsx(cr,{path:"/material-form",element:a.jsx(r,{children:a.jsx(MSe,{})})}),a.jsx(cr,{path:"/tax-form",element:a.jsx(r,{children:a.jsx(w5e,{})})}),a.jsx(cr,{path:"/vendor-form",element:a.jsx(r,{children:a.jsx(S5e,{})})}),a.jsx(cr,{path:"/vendor-price-list",element:a.jsx(r,{children:a.jsx(C5e,{})})}),a.jsx(cr,{path:"/GoodsIssueFormUI",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(cr,{path:"/goods-issue-list",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(cr,{path:"/GoodsReciept",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(cr,{path:"/GoodsReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(cr,{path:"/GoodsTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(cr,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(cr,{path:"/InvoiceList",element:a.jsx(r,{children:a.jsx(_5e,{})})}),a.jsx(cr,{path:"/InvoiceForm",element:a.jsx(r,{children:a.jsx(E5e,{})})}),a.jsx(cr,{path:"/BillingForm",element:a.jsx(r,{children:a.jsx(D5e,{})})}),a.jsx(cr,{path:"/BillingDisplay",element:a.jsx(r,{children:a.jsx(A5e,{})})}),a.jsx(cr,{path:"/Ledger",element:a.jsx(r,{children:a.jsx(B5e,{})})}),a.jsx(cr,{path:"/Payments",element:a.jsx(r,{children:a.jsx($5e,{})})}),a.jsx(cr,{path:"/MRP",element:a.jsx(r,{children:a.jsx(U5e,{})})}),a.jsx(cr,{path:"/PaymentDisplay",element:a.jsx(r,{children:a.jsx(L5e,{})})}),a.jsx(cr,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(qB,{})})}),a.jsx(cr,{path:"/customer-category-form",element:a.jsx(r,{children:a.jsx(xMe,{})})}),a.jsx(cr,{path:"/GoodsIssueCategory",element:a.jsx(r,{children:a.jsx(vMe,{})})}),a.jsx(cr,{path:"/GoodsReceiptCategory",element:a.jsx(r,{children:a.jsx(gMe,{})})}),a.jsx(cr,{path:"/InvoiceCategory",element:a.jsx(r,{children:a.jsx(bMe,{})})}),a.jsx(cr,{path:"/BillingCategory",element:a.jsx(r,{children:a.jsx(pMe,{})})}),a.jsx(cr,{path:"/POCategory",element:a.jsx(r,{children:a.jsx(yMe,{})})}),a.jsx(cr,{path:"/Purchaserequestcat",element:a.jsx(r,{children:a.jsx(jMe,{})})}),a.jsx(cr,{path:"/sale-quotation-category-form",element:a.jsx(r,{children:a.jsx(wMe,{})})}),a.jsx(cr,{path:"/SalesCategory",element:a.jsx(r,{children:a.jsx(SMe,{})})}),a.jsx(cr,{path:"/SalesOrderCategoryForm",element:a.jsx(r,{children:a.jsx(CMe,{})})}),a.jsx(cr,{path:"/SaleContractCategoryForm",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(cr,{path:"/TransferCategory",element:a.jsx(r,{children:a.jsx(kMe,{})})}),a.jsx(cr,{path:"/vendor-category",element:a.jsx(r,{children:a.jsx(_Me,{})})}),a.jsx(cr,{path:"/RFQCategoryForm",element:a.jsx(r,{children:a.jsx(NMe,{})})}),a.jsx(cr,{path:"/PurchaseContractCategory",element:a.jsx(r,{children:a.jsx(V5e,{})})}),a.jsx(cr,{path:"/contacts",element:a.jsx(r,{children:a.jsx(DMe,{})})}),a.jsx(cr,{path:"/leads",element:a.jsx(r,{children:a.jsx(AMe,{})})}),a.jsx(cr,{path:"/proposals",element:a.jsx(r,{children:a.jsx(PMe,{})})}),a.jsx(cr,{path:"/sources",element:a.jsx(r,{children:a.jsx(OMe,{})})}),a.jsx(cr,{path:"/lost-reason",element:a.jsx(r,{children:a.jsx(MMe,{})})}),a.jsx(cr,{path:"/contact-stage",element:a.jsx(r,{children:a.jsx(RMe,{})})}),a.jsx(cr,{path:"/industry",element:a.jsx(r,{children:a.jsx(FMe,{})})}),a.jsx(cr,{path:"/calls",element:a.jsx(r,{children:a.jsx(LMe,{})})}),a.jsx(cr,{path:"/milestones",element:a.jsx(r,{children:a.jsx(BMe,{})})}),a.jsx(cr,{path:"/tasks",element:a.jsx(r,{children:a.jsx(UMe,{})})}),a.jsx(cr,{path:"/time-entries",element:a.jsx(r,{children:a.jsx($Me,{})})}),a.jsx(cr,{path:"/projects",element:a.jsx(r,{children:a.jsx(VMe,{})})}),a.jsx(cr,{path:"/campaigns",element:a.jsx(r,{children:a.jsx(qMe,{})})}),a.jsx(cr,{path:"/analytics",element:a.jsx(r,{children:a.jsx(zMe,{})})}),a.jsx(cr,{path:"/employee",element:a.jsx(r,{children:a.jsx(HMe,{})})}),a.jsx(cr,{path:"/leaverequest",element:a.jsx(r,{children:a.jsx(YMe,{})})}),a.jsx(cr,{path:"/leavemanagement",element:a.jsx(r,{children:a.jsx(B6e,{})})}),a.jsx(cr,{path:"/payroll",element:a.jsx(r,{children:a.jsx(B8e,{})})}),a.jsx(cr,{path:"/departments",element:a.jsx(r,{children:a.jsx(WMe,{})})}),a.jsx(cr,{path:"/designation",element:a.jsx(r,{children:a.jsx(GMe,{})})}),a.jsx(cr,{path:"/attendancereg",element:a.jsx(r,{children:a.jsx(hMe,{})})}),a.jsx(cr,{path:"/attendancetaking",element:a.jsx(r,{children:a.jsx(fMe,{})})}),a.jsx(cr,{path:"/attendancereport",element:a.jsx(r,{children:a.jsx(mMe,{})})})]})})})}hQ.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(U8e,{})}));export{Pb as _,$8e as c,Hu as g};
